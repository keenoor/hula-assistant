function execl1(a, b) {
    var c = "#" + a;
    "undefined" == typeof b && (b = "未命名"), $(c).tableExport({
        type: "excel",
        separator: ";",
        escape: "false"
    }, b)
}

function dealNumber(a, b) {
    var c = a.toFixed(3);
    return b ? c.substring(0, c.lastIndexOf(".") + 3) : parseFloat(c.substring(0, c.lastIndexOf(".") + 3))
}

function getShowDate(a, b) {
    var a = new Date(a),
        c = a.getFullYear(),
        d = a.getMonth() + 1 > 9 ? a.getMonth() + 1 : "0" + (a.getMonth() + 1),
        e = a.getDate() > 9 ? a.getDate() : "0" + a.getDate(),
        f = a.getHours() > 9 ? a.getHours() : "0" + a.getHours(),
        g = a.getMinutes() > 9 ? a.getMinutes() : "0" + a.getMinutes(),
        h = a.getSeconds() > 9 ? a.getSeconds() : "0" + a.getSeconds();
    switch (b) {
    case "day":
        return c + "-" + d + "-" + e;
    case "hour":
        return c + "-" + d + "-" + e + " " + f;
    case "min":
        return c + "-" + d + "-" + e + " " + f + ":" + g;
    case "second":
        return c + "-" + d + "-" + e + " " + f + ":" + g + ":" + h
    }
}

function payCodeCheck(a, b) {
    var c = /^[1][0,1,2,3,4,5][0-9]{16}$/,
        d = /^[25,26,27,28,29,30][0-9]{14,22}$/;
    switch (b) {
    case "alipay":
        return d.test(a);
    case "wx":
        return c.test(a)
    }
}

function isTel(a) {
    return /^1[345789]\d{9}$/.test(a)
}

function getLodop(a, b) {
    var c, d = "<br><font color='#FF00FF'>打印控件未安装!点击这里<a href='install_lodop32.exe' target='_self'>执行安装</a>,安装后请刷新页面或重新进入。</font>",
        e = "<br><font color='#FF00FF'>打印控件需要升级!点击这里<a href='install_lodop32.exe' target='_self'>执行升级</a>,升级后请重新进入。</font>",
        f = "<br><font color='#FF00FF'>打印控件未安装!点击这里<a href='install_lodop64.exe' target='_self'>执行安装</a>,安装后请刷新页面或重新进入。</font>",
        g = "<br><font color='#FF00FF'>打印控件需要升级!点击这里<a href='install_lodop64.exe' target='_self'>执行升级</a>,升级后请重新进入。</font>",
        h = "<br><br><font color='#FF00FF'>（注意：如曾安装过Lodop旧版附件npActiveXPLugin,请在【工具】->【附加组件】->【扩展】中先卸它）</font>",
        i = "<br><br><font color='#FF00FF'>(如果此前正常，仅因浏览器升级或重安装而出问题，需重新执行以上安装）</font>";
    try {
        var j = navigator.userAgent.indexOf("MSIE") >= 0 || navigator.userAgent.indexOf("Trident") >= 0,
            k = j && navigator.userAgent.indexOf("x64") >= 0;
        return void 0 != a || void 0 != b ? c = j ? a : b : null == CreatedOKLodop7766 ? (c = document.createElement("object"), c.setAttribute("width", 0), c.setAttribute("height", 0), c.setAttribute("style", "position:absolute;left:0px;top:-100px;width:0px;height:0px;"), j ? c.setAttribute("classid", "clsid:2105C259-1E0C-4534-8141-A753534CB4CA") : c.setAttribute("type", "application/x-print-lodop"), document.documentElement.appendChild(c), CreatedOKLodop7766 = c) : c = CreatedOKLodop7766, null == c || "undefined" == typeof c.VERSION ? (navigator.userAgent.indexOf("Chrome") >= 0 && (document.documentElement.innerHTML = i + document.documentElement.innerHTML), navigator.userAgent.indexOf("Firefox") >= 0 && (document.documentElement.innerHTML = h + document.documentElement.innerHTML), k ? document.write(f) : j ? document.write(d) : document.documentElement.innerHTML = d + document.documentElement.innerHTML, c) : c.VERSION < "6.1.9.8" ? (k ? document.write(g) : j ? document.write(e) : document.documentElement.innerHTML = e + document.documentElement.innerHTML, c) : c
    } catch (l) {
        return k ? document.documentElement.innerHTML = "Error:" + f + document.documentElement.innerHTML : document.documentElement.innerHTML = "Error:" + d + document.documentElement.innerHTML, c
    }
}! function () {
    "use strict";

    function a(a, b, c, d) {
        b.otherwise("/"), c.html5Mode({
            enabled: !0,
            requireBase: !1
        }), d.interceptors.push("authInterceptor")
    }

    function b(a) {
        var b = "data:application/vnd.ms-excel;base64,",
            c = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>',
            d = function (b) {
                return a.btoa(unescape(encodeURIComponent(b)))
            },
            e = function (a, b) {
                return a.replace(/{(\w+)}/g, function (a, c) {
                    return b[c]
                })
            };
        return {
            tableToExcel: function (a, f) {
                var g = $(a),
                    h = {
                        worksheet: f,
                        table: g.html()
                    },
                    i = b + d(e(c, h));
                return i
            }
        }
    }

    function c() {
        return {
            restrict: "EA",
            template: '<div style="border:1px solid #ddd;min-width:285px;background: #fff"><div ng-show="isShowDate"><div style="border-bottom:1px solid #ddd;height: 60px;font-size: 14px;text-align: center;"><div style="float: left;height: 60px;line-height: 60px;width: 16.6%"><div style="cursor: pointer;width: 30px;margin: 0 auto;height: 100%;position: relative;" ng-click="changeDate(&#39;1&#39;)"><span style="display: inline-block;border-right: 2px solid; border-bottom: 2px solid;width: 10px; height: 10px;transform: rotate(135deg);color: #ccc;position: absolute;top:23px;left: 5px;"></span><span style="display: inline-block;border-right: 2px solid; border-bottom: 2px solid;width: 10px; height: 10px;transform: rotate(135deg);color: #ccc;position: absolute;top:23px;left: 15px;"></span></div></div><div style="float: left;height: 60px;line-height: 60px;width: 16.6%"><div style="cursor: pointer;width: 15px;margin: 0 auto;height: 100%;position: relative;" ng-click="changeDate(&#39;down&#39;)"><span style="display: inline-block;border-right: 2px solid; border-bottom: 2px solid;width: 10px; height: 10px;transform: rotate(135deg);color: #ccc;cursor: pointer;position: absolute;top:23px;"></span></div></div><div style="float: left;height: 60px;line-height: 60px;width: 33.2%;color: #475669;font-size: 14px;"><span style="cursor: pointer;" ng-bind="show_date_cell.yearStr" ng-click="openYearCell(show_date_cell.year)"></span> <sapn style="cursor: pointer;" ng-bind="show_date_cell.monthStr" ng-click="openMonthCell(show_date_cell.year)"></sapn></div><div style="float: left;height: 60px;line-height: 60px;width: 16.6%;"><div style="cursor: pointer;width: 15px;margin: 0 auto;height: 100%;position: relative;" ng-click="changeDate(&#39;up&#39;)"><span style="display: inline-block;border-right: 2px solid; border-bottom: 2px solid;width: 10px; height: 10px;transform: rotate(-45deg);color: #ccc;cursor: pointer;position: absolute;top:23px;"></span></div></div><div style="float: left;height: 60px;line-height: 60px;width: 16.6%"><div style="cursor: pointer;width: 30px;margin: 0 auto;height: 100%;position: relative;" ng-click="changeDate(&#39;12&#39;)"><span style="display: inline-block;border-right: 2px solid; border-bottom: 2px solid;width: 10px; height: 10px;transform: rotate(-45deg);color: #ccc;position: absolute;top:23px;left: 5px;"></span><span style="display: inline-block;border-right: 2px solid; border-bottom: 2px solid;width: 10px; height: 10px;transform: rotate(-45deg);color: #ccc;position: absolute;top:23px;left: 15px;"></span></div></div></div><div style="text-align: center;"><div style="padding: 20px 0;color: #8492A6;font-size: 12px;"><div style="float:left;width:14.28%">日</div><div style="float:left;width:14.28%">一</div><div style="float:left;width:14.28%">二</div><div style="float:left;width:14.28%">三</div><div style="float:left;width:14.28%">四</div><div style="float:left;width:14.28%">五</div><div style="float:left;width:14.28%">六</div><div style="clear: both"></div></div><div style="float:left;width:14.28%;margin-bottom: 20px;" ng-repeat="date in show_date_cell.dateObj"><div style="width:32px;height:32px;margin: 0 auto;cursor: pointer;line-height: 32px;{{date.style}}" ng-bind="date.value" ng-click="selectDate(date.value)"></div></div><div style="clear: both"></div></div></div><div ng-show="isShowMonth"><div style="border-bottom:1px solid #ddd;height: 60px;font-size: 14px;text-align: center;"><div style="float: left;height: 60px;line-height: 60px;width: 33.2%"><div style="cursor: pointer;width: 15px;margin: 0 auto;height: 100%;position: relative;" ng-click="changeMonth(&#39;down&#39;)"><span style="display: inline-block;border-right: 2px solid; border-bottom: 2px solid;width: 10px; height: 10px;transform: rotate(135deg);color: #ccc;cursor: pointer;position: absolute;top:23px;"></span></div></div><div style="float: left;height: 60px;line-height: 60px;width: 33.2%;color: #475669;font-size: 14px;"><span style="cursor: pointer;" ng-bind="show_month_cell.yearStr" ng-click="openYearCell(show_month_cell.year)"></span></div><div style="float: left;height: 60px;line-height: 60px;width: 33.2%;"><div style="cursor: pointer;width: 15px;margin: 0 auto;height: 100%;position: relative;" ng-click="changeMonth(&#39;up&#39;)"><span style="display: inline-block;border-right: 2px solid; border-bottom: 2px solid;width: 10px; height: 10px;transform: rotate(-45deg);color: #ccc;cursor: pointer;position: absolute;top:23px;"></span></div></div></div><div style="text-align: center;padding-top: 20px;"><div style="float:left;width:25%;margin-bottom: 20px " ng-repeat="month in show_month_cell.monthObj"><div style="width:48px;height:32px;margin: 0 auto;cursor: pointer;line-height: 32px;{{month.style}}" ng-bind="month.str"  ng-click="openDateCell(null,month.value)"></div></div><div style="clear: both"></div></div></div><div ng-show="ishShowYear"><div style="border-bottom:1px solid #ddd;height: 60px;font-size: 14px;text-align: center;"><div style="float: left;height: 60px;line-height: 60px;width: 33.2%"><div style="cursor: pointer;width: 15px;margin: 0 auto;height: 100%;position: relative;" ng-click="changeYear(&#39;down&#39;)"><span style="display: inline-block;border-right: 2px solid; border-bottom: 2px solid;width: 10px; height: 10px;transform: rotate(135deg);color: #ccc;cursor: pointer;position: absolute;top:23px;"></span></div></div><div style="float: left;height: 60px;line-height: 60px;width: 33.2%;color: #475669;font-size: 14px;"><span style="cursor: pointer;" ng-bind="show_year_cell.title">2010年-2019年</span></div><div style="float: left;height: 60px;line-height: 60px;width: 33.2%;"><div style="cursor: pointer;width: 15px;margin: 0 auto;height: 100%;position: relative;" ng-click="changeYear(&#39;up&#39;)"><span style="display: inline-block;border-right: 2px solid; border-bottom: 2px solid;width: 10px; height: 10px;transform: rotate(-45deg);color: #ccc;cursor: pointer;position: absolute;top:23px;"></span></div></div></div><div style="text-align: center;padding-top: 20px;"><div style="float:left;width:25%;margin-bottom: 20px " ng-repeat="year in show_year_cell.yearObj"><div style="width:48px;height:32px;margin: 0 auto;cursor: pointer;line-height: 32px;{{year.style}}" ng-bind="year.value" ng-click="openDateCell(year.value)"></div></div><div style="clear: both"></div></div></div></div>',
            scope: {
                date: "=ngDate",
                close: "&ngClose",
                id: "=ngId"
            },
            link: function (a, b) {
                var c = new Date,
                    d = a,
                    e = c.getFullYear(),
                    f = c.getMonth(),
                    g = c.getDate();
                d.show_year_cell, d.show_month_cell, d.show_date_cell;
                var h, i, j, k = [],
                    l = [],
                    m = [];
                "开始时间" == d.date && (d.date = "");
                var n = function () {
                        d.date && (e = d.date.getFullYear(), f = d.date.getMonth(), g = d.date.getDate()), o(e), p(e), q(e, f), s(), r()
                    },
                    o = function (a) {
                        for (var b = 10 * parseInt(a / 10), c = {
                            start: b,
                            title: b + "年-" + (b + 9) + "年",
                            yearObj: []
                        }, d = 0; 10 > d; d++) {
                            var e = {
                                style: "",
                                value: b + d
                            };
                            c.yearObj.push(e)
                        }
                        k.push(c)
                    },
                    p = function (a) {
                        var b = {
                            year: a,
                            yearStr: a + "年",
                            monthObj: [{
                                style: "",
                                value: 0,
                                str: "一月"
                            }, {
                                style: "",
                                value: 1,
                                str: "二月"
                            }, {
                                style: "",
                                value: 2,
                                str: "三月"
                            }, {
                                style: "",
                                value: 3,
                                str: "四月"
                            }, {
                                style: "",
                                value: 4,
                                str: "五月"
                            }, {
                                style: "",
                                value: 5,
                                str: "六月"
                            }, {
                                style: "",
                                value: 6,
                                str: "七月"
                            }, {
                                style: "",
                                value: 7,
                                str: "八月"
                            }, {
                                style: "",
                                value: 8,
                                str: "九月"
                            }, {
                                style: "",
                                value: 9,
                                str: "十月"
                            }, {
                                style: "",
                                value: 10,
                                str: "十一月"
                            }, {
                                style: "",
                                value: 11,
                                str: "十二月"
                            }]
                        };
                        l.push(b)
                    },
                    q = function (a, b) {
                        var c = {
                                year: a,
                                yearStr: a + "年",
                                month: b,
                                monthStr: b + 1 + "月",
                                dateObj: []
                            },
                            d = new Date;
                        d.setDate(1), d.setMonth(b), d.setYear(a);
                        for (var e = 0; e < d.getDay(); e++) c.dateObj.push({
                            style: "",
                            value: null
                        });
                        d.setMonth(b + 1), d = new Date(d.getTime() - 864e5);
                        for (var e = 0; e < d.getDate(); e++) c.dateObj.push({
                            state: "",
                            value: e + 1
                        });
                        m.push(c)
                    };
                d.changeYear = function (a) {
                    switch (a) {
                    case "up":
                        e += 10;
                        break;
                    case "down":
                        e -= 10
                    }
                    var b = _.findWhere(k, {
                        start: 10 * parseInt(e / 10)
                    });
                    if (b) d.show_year_cell = b;
                    else {
                        o(e);
                        var b = _.findWhere(k, {
                            start: 10 * parseInt(e / 10)
                        });
                        d.show_year_cell = b
                    }
                }, d.changeMonth = function (a) {
                    switch (a) {
                    case "up":
                        e += 1;
                        break;
                    case "down":
                        e -= 1
                    }
                    var b = _.findWhere(l, {
                        year: e
                    });
                    if (b) d.show_month_cell = b;
                    else {
                        p(e);
                        var b = _.findWhere(l, {
                            year: e
                        });
                        d.show_month_cell = b
                    }
                }, d.changeDate = function (a) {
                    switch (a) {
                    case "up":
                        f += 1, 12 == f && (f = 0, e += 1);
                        break;
                    case "down":
                        f -= 1, -1 == f && (f = 11, e -= 1);
                        break;
                    case "1":
                        f = 0;
                        break;
                    case "12":
                        f = 11
                    }
                    var b = _.findWhere(m, {
                        year: e,
                        month: f
                    });
                    if (b) d.show_date_cell = b;
                    else {
                        q(e, f);
                        var b = _.findWhere(m, {
                            year: e,
                            month: f
                        });
                        d.show_date_cell = b
                    }
                }, d.openYearCell = function (a) {
                    e = a;
                    var b = _.findWhere(k, {
                        start: 10 * parseInt(e / 10)
                    });
                    if (b) d.show_year_cell = b;
                    else {
                        o(e);
                        var b = _.findWhere(k, {
                            start: 10 * parseInt(e / 10)
                        });
                        d.show_year_cell = b
                    }
                    r("year")
                }, d.openMonthCell = function (a) {
                    e = a;
                    var b = _.findWhere(l, {
                        year: e
                    });
                    if (b) d.show_month_cell = b;
                    else {
                        p(e);
                        var b = _.findWhere(l, {
                            year: e
                        });
                        d.show_month_cell = b
                    }
                    r("month")
                }, d.openDateCell = function (a, b) {
                    a && (e = a), (b || 0 == b) && (f = b);
                    var c = _.findWhere(m, {
                        year: e,
                        month: f
                    });
                    if (c) d.show_date_cell = c;
                    else {
                        q(e, f);
                        var c = _.findWhere(m, {
                            year: e,
                            month: f
                        });
                        d.show_date_cell = c
                    }
                    r()
                };
                var r = function (a) {
                        switch (d.isShowDate = !1, d.isShowMonth = !1, d.ishShowYear = !1, a) {
                        case "year":
                            d.ishShowYear = !0;
                            break;
                        case "month":
                            d.isShowMonth = !0;
                            break;
                        default:
                            d.isShowDate = !0
                        }
                    },
                    s = function () {
                        t(), u(), v()
                    },
                    t = function () {
                        h && (h.style = "");
                        var a = _.findWhere(k, {
                                start: 10 * parseInt(e / 10)
                            }),
                            b = _.findWhere(a.yearObj, {
                                value: e
                            });
                        h = b, b.style = "background:#22a0ff;color:#fff", d.show_year_cell = a
                    },
                    u = function () {
                        i && (i.style = "");
                        var a = _.findWhere(l, {
                                year: e
                            }),
                            b = _.findWhere(a.monthObj, {
                                value: f
                            });
                        i = b, b.style = "background:#22a0ff;color:#fff", d.show_month_cell = a
                    },
                    v = function () {
                        j && (j.style = "");
                        var a = _.findWhere(m, {
                                year: e,
                                month: f
                            }),
                            b = _.findWhere(a.dateObj, {
                                value: g
                            });
                        j = b, b.style = "background:#22a0ff;color:#fff", d.show_date_cell = a
                    };
                d.selectDate = function (a) {
                    var b = new Date;
                    b.setDate(1), b.setYear(d.show_date_cell.year), b.setMonth(d.show_date_cell.month), b.setDate(a), b.setSeconds(0), d.date = b, e = d.show_date_cell.year, f = d.show_date_cell.month, g = a, k = [], l = [], m = [], n(), d.close && d.close()
                }, $("#" + d.id).click(function () {
                    d.date || (d.date = c)
                }), d.id || d.date || (d.date = c), n()
            }
        }
    }

    function d() {
        return {
            restrict: "EA",
            template: '<div style="border:1px solid #D3DCE6;width: 152px;height: 231px;margin: 0 auto;background: #fff;"><div style="height: 160px;border-bottom: 1px solid #D3DCE6;overflow: hidden;width: 150px;"><div style="width: 50px;overflow: hidden;height: 160px;border-right:1px solid #D3DCE6;float: left;"> <div style="height: 160px;overflow-y: auto;width: 80px;position: relative;" id="hours"><div ng-repeat="h in h_Arr" ng-bind="h.value" id="hours{{h.value}}" style="height: 32px;text-indent: 16px;line-height: 32px;cursor: pointer;{{h.style}}" ng-click="change_h(h.value)"></div></div></div><div style="width: 50px;overflow: hidden;height: 160px;border-right:1px solid #D3DCE6;float: left;"><div style="height: 160px;overflow-y: auto;width: 80px;position: relative;" id="hours"><div ng-repeat="m in ms_Arr" ng-bind="m.value" id="hours{{m.value}}" style="height: 32px;text-indent: 16px;line-height: 32px;cursor: pointer;{{m.m_style}}" ng-click="change_m(m.value)"></div></div></div><div style="width: 50px;overflow: hidden;height: 160px;float: left;"><div style="height: 160px;overflow-y: auto;width: 80px;position: relative;" id="hours"><div ng-repeat="s in ms_Arr" ng-bind="s.value" id="hours{{s.value}}" style="height: 32px;text-indent: 16px;line-height: 32px;cursor: pointer;{{s.s_style}}" ng-click="change_s(s.value)"></div></div></div></div><div style="height: 30px;border-bottom: 1px solid #D3DCE6"><div style="height: 30px;line-height: 30px;text-align: center;float: left;width: 48px;" ng-bind="select_h">23</div><div style="height: 30px;line-height: 30px;width: 2px;text-align: center;float: left;">:</div><div style="height: 30px;line-height: 30px;text-align: center;float: left;width: 48px;" ng-bind="select_m">23</div><div style="height: 30px;line-height: 30px;width: 2px;text-align: center;float: left;">:</div><div style="height: 30px;line-height: 30px;text-align: center;float: left;width: 48px;" ng-bind="select_s">23</div></div><div style="height: 39px;position: relative;"><div style="color: #8492A6;font-size: 12px;position: absolute;top: 13px;right: 50px;cursor: pointer;" ng-click="cancel()">取消</div><div style="color: #22a0ff;font-size: 12px;position: absolute;top: 13px;right: 13px;cursor: pointer;" ng-click="confirm()">确定</div></div></div>',
            scope: {
                date: "=ngDate",
                close: "&ngClose"
            },
            link: function (a) {
                var b = new Date,
                    c = a;
                c.select_h = b.getHours(), c.select_m = b.getMinutes(), c.select_s = b.getSeconds(), c.date = b;
                var d, e, f, g = function () {
                        h()
                    },
                    h = function () {
                        i(), j(), k()
                    },
                    i = function () {
                        c.select_h < 10 && (c.select_h = "0" + c.select_h);
                        var a = _.findWhere(c.h_Arr, {
                            value: c.select_h.toString()
                        });
                        a.style = "background:#22a0ff;color:#fff", d = a
                    },
                    j = function () {
                        c.select_m < 10 && (c.select_m = "0" + c.select_m);
                        var a = _.findWhere(c.ms_Arr, {
                            value: c.select_m.toString()
                        });
                        a.m_style = "background:#22a0ff;color:#fff", e = a
                    },
                    k = function () {
                        c.select_s < 10 && (c.select_s = "0" + c.select_s);
                        var a = _.findWhere(c.ms_Arr, {
                            value: c.select_s.toString()
                        });
                        a.s_style = "background:#22a0ff;color:#fff", f = a
                    };
                c.change_h = function (a) {
                    c.select_h = a, d.style = "";
                    var b = _.findWhere(c.h_Arr, {
                        value: c.select_h.toString()
                    });
                    b.style = "background:#22a0ff;color:#fff", d = b
                }, c.change_m = function (a) {
                    c.select_m = a, e.m_style = "";
                    var b = _.findWhere(c.ms_Arr, {
                        value: c.select_m.toString()
                    });
                    b.m_style = "background:#22a0ff;color:#fff", e = b
                }, c.change_s = function (a) {
                    c.select_s = a, f.s_style = "";
                    var b = _.findWhere(c.ms_Arr, {
                        value: c.select_s.toString()
                    });
                    b.s_style = "background:#22a0ff;color:#fff", f = b
                }, c.cancel = function () {
                    c.close()
                }, c.confirm = function () {
                    var a = new Date;
                    a.setHours(c.select_h), a.setMinutes(c.select_m), a.setSeconds(c.select_s), c.date = a, c.close()
                }, c.h_Arr = [{
                    value: "00",
                    style: ""
                }, {
                    value: "01",
                    style: ""
                }, {
                    value: "02",
                    style: ""
                }, {
                    value: "03",
                    style: ""
                }, {
                    value: "04",
                    style: ""
                }, {
                    value: "05",
                    style: ""
                }, {
                    value: "06",
                    style: ""
                }, {
                    value: "07",
                    style: ""
                }, {
                    value: "08",
                    style: ""
                }, {
                    value: "09",
                    style: ""
                }, {
                    value: "10",
                    style: ""
                }, {
                    value: "11",
                    style: ""
                }, {
                    value: "12",
                    style: ""
                }, {
                    value: "13",
                    style: ""
                }, {
                    value: "14",
                    style: ""
                }, {
                    value: "15",
                    style: ""
                }, {
                    value: "16",
                    style: ""
                }, {
                    value: "17",
                    style: ""
                }, {
                    value: "18",
                    style: ""
                }, {
                    value: "19",
                    style: ""
                }, {
                    value: "20",
                    style: ""
                }, {
                    value: "21",
                    style: ""
                }, {
                    value: "22",
                    style: ""
                }, {
                    value: "23",
                    style: ""
                }], c.ms_Arr = [{
                    value: "00",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "01",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "02",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "03",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "04",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "05",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "06",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "07",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "08",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "09",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "10",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "11",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "12",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "13",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "14",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "15",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "16",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "17",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "18",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "19",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "20",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "21",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "22",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "23",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "24",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "25",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "26",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "27",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "28",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "29",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "30",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "31",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "32",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "33",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "34",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "35",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "36",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "37",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "38",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "39",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "40",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "41",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "42",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "43",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "44",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "45",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "46",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "47",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "48",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "49",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "50",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "51",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "52",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "53",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "54",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "55",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "56",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "57",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "58",
                    m_style: "",
                    s_style: ""
                }, {
                    value: "59",
                    m_style: "",
                    s_style: ""
                }], g()
            }
        }
    }

    function e(a, b, c) {
        a.url = "field.hulasports.com", a.appid = "wx10f0dc99be1b32a7", a.$on("$stateChangeStart", function (a, d) {
            c.isLoggedInAsync(function (a) {
                d.authenticate && !a && b.path("/login")
            })
        })
    }

    function f(a, b, c, d) {
        return {
            request: function (a) {
                return a.headers = a.headers || {}, c.get("token") && (a.headers.Authorization = "Bearer " + c.get("token")), a
            }, responseError: function (a) {
                return 401 === a.status ? (d.path("/login"), c.remove("token"), b.reject(a)) : b.reject(a)
            }
        }
    }
    angular.module("fieldApp", ["ngCookies", "ngResource", "ngSanitize", "ui.router", "ui.bootstrap", "ngFileUpload", "angular-echarts", "chart.js"]).config(a).factory("authInterceptor", f).factory("Excel", b).directive("datetimepick", c).directive("timepick", d).run(e), a.$inject = ["$stateProvider", "$urlRouterProvider", "$locationProvider", "$httpProvider"], b.$inject = ["$window"], e.$inject = ["$rootScope", "$location", "Auth"], f.$inject = ["$rootScope", "$q", "$cookieStore", "$location"]
}();
var CreatedOKLodop7766 = null;
! function () {
    "use strict";

    function a(a) {
        a.state("login", {
            url: "/login",
            templateUrl: "app/account/login/login.html",
            controller: "LoginCtrl",
            controllerAs: "loginCtrl"
        }).state("signup", {
            url: "/signup",
            templateUrl: "app/account/signup/signup.html",
            controller: "SignupCtrl"
        }).state("settings", {
            url: "/settings",
            templateUrl: "app/account/settings/settings.html",
            controller: "SettingsCtrl",
            authenticate: !0
        })
    }
    angular.module("fieldApp").config(a), a.$inject = ["$stateProvider"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        function j(a) {
            d.login({
                account: k.account,
                password: k.pwd,
                code: k.code
            }).then(function () {
                b.go("main", {
                    state: a
                })
            })["catch"](function (a) {
                switch (a.code) {
                case 400:
                    k.error = "柜员账号请填写手机验证码";
                    break;
                case 409:
                    k.error = a.data.message || a.data;
                    break;
                default:
                    k.error = "用户名或密码错误"
                }
                k.showError = !0
            })
        }
        var k = this;
        g.value = "login", k.but_text = "发送验证码", k.login = j, k.sendCode = function () {
            return k.showError = !1, k.account ? void h.loginSms({
                account: k.account
            }, function (a) {
                k.but_text = "重新发送"
            }, function (a) {
                k.error = a.data.data, k.showError = !0, console.log(a)
            }) : (k.error = "请填写柜员账号", void(k.showError = !0))
        }, k.check = function () {
            i.isCheck({
                account: k.account
            }, function (a) {
                k.isCheck = a.data.isCheck
            })
        }, $("#login").keydown(function (a) {
            "login" == g.value && 13 == a.keyCode && (console.log("login"), k.login())
        })
    }
    angular.module("fieldApp").controller("LoginCtrl", a), a.$inject = ["$scope", "$state", "$stateParams", "Auth", "$location", "$cookieStore", "$rootScope", "Smscode", "User"]
}(),
function () {
    "use strict";

    function a(a, b, c) {
        function d(b) {
            a.submitted = !0, b.$valid && c.changePassword(a.user.oldPassword, a.user.newPassword).then(function () {
                a.message = "Password successfully changed."
            })["catch"](function () {
                b.password.$setValidity("mongoose", !1), a.errors.other = "Incorrect password", a.message = ""
            })
        }
        a.errors = {}, a.changePassword = d
    }
    angular.module("fieldApp").controller("SettingsCtrl", a), a.$inject = ["$scope", "User", "Auth"]
}(),
function () {
    "use strict";

    function a(a, b, c) {
        function d(d) {
            a.submitted = !0, d.$valid && b.createUser({
                name: a.user.name,
                email: a.user.email,
                password: a.user.password
            }).then(function () {
                c.path("/")
            })["catch"](function (b) {
                b = b.data, a.errors = {}, angular.forEach(b.errors, function (b, c) {
                    d[c].$setValidity("mongoose", !1), a.errors[c] = b.message
                })
            })
        }
        a.user = {}, a.errors = {}, a.register = d
    }
    angular.module("fieldApp").controller("SignupCtrl", a), a.$inject = ["$scope", "Auth", "$location"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f) {
        var g = this;
        g.name = "", g.account = "", g.password = "", g.logout = c.logout, g.close = function () {
            g.editFlag = !1, g.createFlag = !1, g.userFlag = !1, g.vFlag = !1, g.wx = "", g.ali = ""
        }, g.getUser = function () {
            g.venues = [], d.index({}, function (a) {
                g.users = a.data.users, g.num = 0, g.users.length > 0 && h(g.users[g.num])
            }, function (a) {})
        };
        var h = function (a) {
            var b = {};
            a.alipayAppId ? b.ali = a.alipayAppId : b.ali = "添加", a.mch_id ? b.wx = a.mch_id : b.wx = "添加", b.flag = !0, b.orgName = a.name, b.name = a.name, b._org = a._id, g.venues.push(b), f.index({
                _org: a._id
            }, function (b) {
                for (var c = 0; c < b.data.venues.length; c++) b.data.venues[c].wx = "添加", b.data.venues[c].ali = "添加", b.data.venues[c].flag = !1, b.data.venues[c].orgName = a.name;
                g.v = b.data.venues, e.index({
                    _org: a._id
                }, function (a) {
                    g.payConfigs = a.data.payConfigs, _.each(g.v, function (a) {
                        _.each(g.payConfigs, function (b) {
                            a._id == b._venue && (b.alipayAppId && (a.ali = b.alipayAppId), b.mch_id && (a.wx = b.mch_id), a.pay = b._id)
                        })
                    }), g.venues = g.venues.concat(g.v), g.num < g.users.length - 1 && (g.num = g.num + 1, h(g.users[g.num]))
                }, function () {})
            }, function () {})
        };
        g.show = function (a) {
            return g.editFlag = !0, a.flag ? (g.userFlag = !0, g.editFlag = !0, g._org = a._org, g.wx = "添加" == a.wx ? "" : a.wx, void(g.ali = "添加" == a.ali ? "" : a.ali)) : void("添加" == a.wx && "添加" == a.ali ? (g.createFlag = !0, g._venue = a._id, g.wx = "", g.ali = "") : (g.vFlag = !0, g._pay = a.pay, "添加" != a.wx ? g.wx = a.wx : g.wx = "", "添加" != a.ali ? g.ali = a.ali : g.ali = ""))
        }, g.edit = function () {
            return g.ali || g.wx ? void(g.createFlag ? e.create({
                alipayAppId: g.ali,
                mch_id: g.wx,
                _venue: g._venue
            }, function (a) {
                g.close(), g.getUser()
            }, function (a) {}) : g.vFlag ? e.update({
                id: g._pay
            }, {
                alipayAppId: g.ali,
                mch_id: g.wx
            }, function (a) {
                g.close(), g.getUser()
            }, function (a) {}) : d.updateMId({
                _org: g._org,
                mch_id: g.wx
            }, function (a) {
                d.updateAlipayappid({
                    _org: g._org,
                    alipayAppId: g.ali
                }, function () {
                    g.close(), g.getUser()
                }, function () {})
            }, function (a) {})) : void alert("请输入支付宝支付号或者微信商户号")
        }, g.finish = function () {
            return g.account ? g.password ? g.name ? void d.createOrg({
                account: g.account,
                password: g.password,
                name: g.name
            }, function (a) {
                g.addFlag = !1, g.name = "", g.account = "", g.password = "", g.getUser()
            }, function (a) {}) : void(g.nameFlag = !1) : void(g.passwordFlag = !1) : void(g.accountFlag = !1)
        };
        var i = function () {
            g.getUser()
        };
        i()
    }
    angular.module("fieldApp").controller("AdmCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "Payconfig", "Venue"]
}(),
function () {
    "use strict";

    function a(a, b, c, d) {
        a.users = d.query(), a["delete"] = function (b) {
            d.remove({
                id: b._id
            }), angular.forEach(a.users, function (c, d) {
                c === b && a.users.splice(d, 1)
            })
        }
    }
    angular.module("fieldApp").controller("AdminCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User"]
}(),
function () {
    "use strict";

    function a(a) {
        a.state("admin", {
            url: "/admin",
            templateUrl: "app/admin/admin.html",
            controller: "AdminCtrl"
        }).state("reask", {
            params: {
                value: "reask"
            },
            url: "/reask",
            templateUrl: "app/admin/reask.html",
            controller: "ReaskCtrl",
            controllerAs: "reaskCtrl"
        }).state("adm", {
            params: {
                value: "adm"
            },
            url: "/adm",
            templateUrl: "app/admin/adm.html",
            controller: "AdmCtrl",
            controllerAs: "admCtrl"
        })
    }
    angular.module("fieldApp").config(a), a.$inject = ["$stateProvider"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e) {
        var f = this;
        f.name = "", f.account = "", f.password = "", f.logout = c.logout, f.getSuggets = function () {
            var a = {
                page: f.pagination.page,
                itemsPerPage: f.pagination.itemsPerPage
            };
            e.index(a, function (a) {
                f.suggests = a.data.suggests, f.pagination.totalItems = a.data.count, f.pagination.numPages = a.data.count / f.itemsPerPage
            }, function (a) {})
        }, f.page = 1, f.itemsPerPage = 15, f.pagination = {
            page: f.page,
            itemsPerPage: f.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, f.reask = function (a) {
            f.addFlag = !0, f._id = a._id
        }, f.finish = function () {
            var a = {
                replay: f.content
            };
            e.feedback({
                id: f._id
            }, a, function (a) {
                f.addFlag = !1, f.content = "", f.toastFlag = !0, f.getSuggets()
            }, function (a) {})
        };
        var g = function () {
            f.getSuggets()
        };
        g()
    }
    angular.module("fieldApp").controller("ReaskCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "Suggest"]
}(),
function () {
    "use strict";

    function a(a, b, c) {
        function d(a) {
            void 0 !== p.mozSrcObject ? p.mozSrcObject = a : p.src = window.URL && window.URL.createObjectURL(a) || a, n = new Audio, o = f(n), o && (n.src = "polaroid." + o, n.play())
        }

        function e(a) {
            alert("Error！" + a)
        }

        function f(a) {
            if (a.canPlayType) {
                if ("" !== a.canPlayType('audio/mp4; codecs="mp4a.40.5"')) return "aac";
                if ("" !== a.canPlayType('audio/ogg; codecs="vorbis"')) return "ogg"
            }
            return !1
        }
        var g = this,
            h = Math.pow(2, 32),
            i = 1,
            j = {
                expiration: "2020-01-01T12:00:00.000Z",
                conditions: [
                    ["content-length-range", 0, 1048576e3]
                ]
            },
            k = "LTAIPGfNDMFdDR5c",
            l = "HChjvcnbFTe67BSeolSSxVsO6GIMFS",
            m = "http://hulafield.oss-cn-hangzhou.aliyuncs.com";
        g.upload = function () {
            if (g.file) {
                var a = g.file;
                console.log(a);
                var b = (new Date).getTime(),
                    d = b.toString(),
                    e = (Math.floor(Math.random() * (h - i)) + i).toString(),
                    f = e.toString(),
                    n = d + "_" + f + "_" + a.name.replace(/[^0-9a-z\.]+/gi, "");
                a.name = n;
                var o = Base64.encode(JSON.stringify(j)),
                    p = o,
                    q = Crypto.HMAC(Crypto.SHA1, p, l, {
                        asBytes: !0
                    }),
                    r = Crypto.util.bytesToBase64(q);
                c.upload({
                    url: m,
                    method: "POST",
                    data: {
                        Filename: n,
                        key: n,
                        policy: o,
                        OSSAccessKeyId: k,
                        success_action_status: "200",
                        signature: r,
                        file: a
                    }
                }).then(function (a) {
                    console.log("Success " + a.config.data.file.name + "uploaded. Response: " + a.data)
                }, function (a) {
                    console.log("Error status: " + a.status)
                }, function (a) {
                    var b = parseInt(100 * a.loaded / a.total);
                    console.log("progress: " + b + "% " + a.config.data.file.name)
                })
            }
        };
        var n, o, p = document.querySelector("video"),
            q = document.getElementById("canvas1"),
            r = q.getContext("2d"),
            s = document.getElementById("canvas2");
        s.getContext("2d");
        navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia, window.URL = window.URL || window.webkitURL || window.mozURL || window.msURL;
        var t = [];
        g.getMedia = function () {
            navigator.getUserMedia ? navigator.getUserMedia({
                video: {
                    optional: [{
                        sourceId: t[1]
                    }]
                },
                audio: !0
            }, d, e) : alert("Native device media streaming (getUserMedia) not supported in this browser.")
        }, g.getPhoto = function () {
            function a(a, b) {
                for (var c = a.split(","), d = c[0].match(/:(.*?);/)[1], e = atob(c[1]), f = e.length, g = new Uint8Array(f); f--;) g[f] = e.charCodeAt(f);
                return new File([g], b, {
                    type: d
                })
            }
            r.drawImage(p, 0, 0, 90, 120);
            var b = q.toDataURL("image/png"),
                d = a(b, "test.png"),
                e = (new Date).getTime(),
                f = e.toString(),
                g = (Math.floor(Math.random() * (h - i)) + i).toString(),
                n = g.toString(),
                o = f + "_" + n + "_xx";
            console.log(o), console.log(JSON.stringify(j));
            var s = Base64.encode(JSON.stringify(j)),
                t = s,
                u = Crypto.HMAC(Crypto.SHA1, t, l, {
                    asBytes: !0
                }),
                v = Crypto.util.bytesToBase64(u);
            c.upload({
                url: m,
                method: "POST",
                data: {
                    Filename: o,
                    key: o,
                    policy: s,
                    OSSAccessKeyId: k,
                    success_action_status: "200",
                    signature: v,
                    file: d,
                    filename: "9DFD2AD1520FAFDDE348E6C517EFC13C.png",
                    "Content-Type": "image/png"
                }
            }).then(function (a) {
                console.log("Success " + a.config.data.file.name + "uploaded. Response: " + a.data)
            }, function (a) {
                console.log("Error status: " + a.status)
            }, function (a) {
                var b = parseInt(100 * a.loaded / a.total);
                console.log("progress: " + b + "% " + a.config.data.file.name)
            })
        }, g.uploadExcel = function () {
            if (g.execlFile) {
                var a = g.execlFile,
                    b = (new Date).getTime(),
                    d = b.toString(),
                    e = (Math.floor(Math.random() * (h - i)) + i).toString(),
                    f = e.toString(),
                    j = d + "_" + f + "_" + a.name.replace(/[^0-9a-z\.]+/gi, "");
                console.log(a.name), c.upload({
                    method: "POST",
                    url: "api/upload",
                    data: {
                        file: a,
                        filename: j
                    }
                }).then(function (a) {
                    console.log("Success " + a.config.data.file.name + "uploaded. Response: " + a.data)
                }, function (a) {
                    console.log("Error status: " + a.status)
                }, function (a) {
                    var b = parseInt(100 * a.loaded / a.total);
                    console.log("progress: " + b + "% " + a.config.data.file.name)
                })
            }
        }
    }
    angular.module("fieldApp").controller("TestCtrl", a), a.$inject = ["$scope", "$http", "Upload"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.close = function () {
            k.cardFlag = !1, k.reFlag = !1, k.objectFlag = !1, k.num = "", k.promptERR = !1
        }, k.page = 1, k.itemsPerPage = 10, k.pagination = {
            page: k.page,
            itemsPerPage: k.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, k.cardFunction = function (a) {
            switch (k.cardFlag = !0, k.st = a, a) {
            case "enter":
                k.title = "卡入库", k.state = "add", k.wordOK = "入库成功";
                break;
            case "send":
                k.title = "卡发放", k.state = "pickout", k.object = "发放对象", k.objectFlag = !0, k.wordOK = "卡发放成功";
                break;
            case "re":
                k.title = "卡回收", k.state = "recovery", k.object = "回收对象", k.objectFlag = !0, k.wordOK = "卡回收成功";
                break;
            case "bad":
                k.title = "卡报销", k.state = "cancel", k.wordOK = "卡报销成功"
            }
        }, k.finish = function () {
            switch (k.st) {
            case "enter":
                k.describtion = "卡入库" + k.num + "张";
                break;
            case "send":
                k.title = "卡发放", k.describtion = "向" + k.objectName + "发放卡" + k.num + "张";
                break;
            case "re":
                k.title = "卡回收", k.describtion = "向" + k.objectName + "回收卡" + k.num + "张";
                break;
            case "bad":
                k.title = "卡报销", k.describtion = "卡报销" + k.num + "张"
            }
            var a = {
                status: k.state,
                editNum: k.num,
                describtion: k.describtion,
                _toUser: k._id
            };
            i.create(a, function (a) {
                l(), k.close(), k.promptOK = !0, j(function () {
                    k.promptOK = !1
                }, 1e3)
            }, function (a) {
                k.promptERR = !0, k.wordERR = a.data.data
            })
        }, k.chooseObject = function (a) {
            k.objectName = a.name, k.chooseObjectFlag = !1, k._id = a._id
        }, k.pageChanged = function () {
            l()
        };
        var l = function () {
                var a = {
                    page: k.pagination.page,
                    itemsPerPage: k.pagination.itemsPerPage,
                    workers: k.urr
                };
                i.index(a, function (a) {
                    k.records = a.data.cardRecords, k.records.length > 0 ? k.number = k.records[0].total : k.number = 0;
                    var b = a.data.count;
                    k.pagination.totalItems = b, k.pagination.numPages = b / k.itemsPerPage
                }, function (a) {})
            },
            m = function () {
                var a = {
                    role: "checkStand"
                };
                e.index(a, function (a) {
                    k.users = a.data.users, k.urr = [], _.each(k.users, function (a) {
                        k.urr.push(a._id)
                    }), l()
                }, function () {})
            },
            n = function () {
                m()
            };
        n()
    }
    angular.module("fieldApp").controller("CrdBankaCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Cardrecords", "$timeout"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this;
        j.close = function () {}, j.page = 1, j.itemsPerPage = 10, j.pagination = {
            page: j.page,
            itemsPerPage: j.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, j.pageChanged = function () {
            k()
        };
        var k = function () {
                var a = {
                    role: "checkStand",
                    page: j.pagination.page,
                    itemsPerPage: j.pagination.itemsPerPage
                };
                e.index(a, function (a) {
                    j.users = a.data.users, j.users.length > 0 && (j.objectName = j.users[0].name);
                    var b = a.data.count;
                    j.pagination.totalItems = b, j.pagination.numPages = b / j.itemsPerPage
                }, function () {})
            },
            l = function () {
                k()
            };
        l()
    }
    angular.module("fieldApp").controller("CrdEntityCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Cardrecords"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.close = function () {
            k.cardFlag = !1, k.reFlag = !1, k.objectFlag = !1, k.num = "", k.promptERR = !1
        }, k.page = 1, k.itemsPerPage = 10, k.pagination = {
            page: k.page,
            itemsPerPage: k.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, k.cardFunction = function (a) {
            switch (k.cardFlag = !0, k.st = a, a) {
            case "enter":
                k.title = "卡入库", k.state = "add", k.wordOK = "入库成功";
                break;
            case "send":
                k.title = "卡发放", k.state = "pickout", k.object = "发放对象", k.objectFlag = !0, k.wordOK = "卡发放成功";
                break;
            case "re":
                k.title = "卡回收", k.state = "recovery", k.object = "回收对象", k.objectFlag = !0, k.wordOK = "卡回收成功";
                break;
            case "bad":
                k.title = "卡报销", k.state = "cancel", k.wordOK = "卡报销成功"
            }
        }, k.finish = function () {
            switch (k.st) {
            case "enter":
                k.describtion = "卡入库" + k.num + "张";
                break;
            case "send":
                k.title = "卡发放", k.describtion = "向" + k.objectName + "发放卡" + k.num + "张";
                break;
            case "re":
                k.title = "卡回收", k.describtion = "向" + k.objectName + "回收卡" + k.num + "张";
                break;
            case "bad":
                k.title = "卡报销", k.describtion = "卡报销" + k.num + "张"
            }
            var a = {
                status: k.state,
                editNum: k.num,
                describtion: k.describtion,
                _toUser: k._id
            };
            i.create(a, function (a) {
                m(), k.close(), k.promptOK = !0, j(function () {
                    k.promptOK = !1
                }, 1e3)
            }, function (a) {
                k.promptERR = !0, k.wordERR = a.data.data
            })
        }, k.chooseObject = function (a) {
            k.objectName = a.name, k.chooseObjectFlag = !1, k._id = a._id
        }, k.pageChanged = function () {
            m()
        };
        var l = function () {
                var a = {
                    role: "checkStand"
                };
                e.index(a, function (a) {
                    k.users = a.data.users, k.users.length > 0 && (k.objectName = k.users[0].name, k._id = k.users[0]._id)
                }, function () {})
            },
            m = function () {
                var a = {
                    page: k.pagination.page,
                    itemsPerPage: k.pagination.itemsPerPage,
                    workers: k.urr
                };
                i.index(a, function (a) {
                    k.records = a.data.cardRecords, k.records.length > 0 ? k.number = k.records[0].total : k.number = 0;
                    var b = a.data.count;
                    k.pagination.totalItems = b, k.pagination.numPages = b / k.itemsPerPage
                }, function (a) {})
            },
            n = function () {
                var a = {
                    role: "cardManager"
                };
                e.get(a, function (a) {
                    k.urr = [], k.urr.push(a.data.user._id), m()
                }, function () {})
            },
            o = function () {
                n(), l()
            };
        o()
    }
    angular.module("fieldApp").controller("CrdCardCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Cardrecords", "$timeout"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n) {
        var o = this;
        o.titleState = f.params.state || "normal", o.page = 1, o.itemsPerPage = 10, o.pagination = {
            page: o.page,
            itemsPerPage: o.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, o.buyProduct = [], o.total = 0, o.showCodeBox = !0, o._member = "", o.wxFlag = !0, o.eMembers = [], o.type = "会员类型", o.close = function () {
            o.payFlag = !1, o.price = "", o.noFlag = !1
        }, o.sure = function () {
            if (!o.price) return o.promptERR = !0, void(o.wordERR = "请把数据填充完整");
            for (var a = [], b = 0; b < o.members.length; b++)
                if (o.members[b].select) {
                    var c = {
                        name: o.members[b].name,
                        tel: o.members[b].tel,
                        total: 1 * o.price
                    };
                    a.push(c)
                }
            var c = {
                docs: a
            };
            l.create(c, function (a) {
                o.close(), o.getMember(), o.promptOK = !0, n(function () {
                    o.promptOK = !1
                }, 1e3), o.wordOK = "充值成功", o.selectFlag = !1
            }, function (a) {
                o.promptERR = !0, o.deleteFlag = !1, (a.data.code = 409) ? o.wordERR = "数据有错误，请检查" : o.wordERR = a.data.data
            })
        }, o.changeTitle = function (a) {
            switch (o.titleState = "", o.pagination = {
                page: o.page,
                itemsPerPage: o.itemsPerPage,
                maxSize: 5,
                numPages: null,
                totalItems: null
            }, a) {
            case "normal":
                o.titleState = "normal", f.go("crd-dummy.normal", {
                    state: "normal"
                }), o.getMember();
                break;
            case "enter":
                o.titleState = "enter", f.go("crd-dummy.enter", {
                    state: "enter"
                });
                break;
            default:
                o.titleState = "record", f.go("crd-dummy.record", {
                    state: "record"
                }), p()
            }
            q()
        }, o.pageChanged = function () {
            "normal" == o.titleState ? o.getMember() : p()
        }, o.select = function (a) {
            for (var b = 0; b < o.members.length; b++) o.members[b].select = a;
            o.selectFlag = a, o.applyFlag = a
        }, o.selectE = function (a) {
            for (var b = 0; b < o.eMembers.length; b++) o.eMembers[b].select = a;
            o.selectFlagE = a, o.applyFlagE = a
        }, o.changeSelect = function (a) {
            a.select = !a.select, o.applyFlag = !1;
            for (var b = 0; b < o.members.length; b++) o.members[b].select && (o.applyFlag = !0)
        }, o.changeSelectE = function (a) {
            a.select = !a.select, o.applyFlagE = !1;
            for (var b = 0; b < o.eMembers.length; b++) o.eMembers[b].select && (o.applyFlagE = !0)
        }, o.getMemberCard = function () {
            o.getMember()
        }, o.getMember = function (a) {
            a && (o.type = a), "全部" == a && (a = "");
            var b = {
                page: o.pagination.page,
                itemsPerPage: o.pagination.itemsPerPage,
                mix: o.searchName,
                type: a
            };
            i.index(b, function (a) {
                if (o.members = a.data.members, o.member) {
                    o.members.push(o.member);
                    var b = 1
                } else var b = 0;
                for (var c = 0; c < o.members.length; c++) o.members[c].cards.length > 0 ? o.members[c].p = o.members[c].cards[0].total : o.members[c].p = "0";
                o.downFlag = !1;
                var d = a.data.count + b;
                o.pagination.totalItems = d, o.pagination.numPages = d / o.itemsPerPage
            })
        }, o.changePrice = function (a) {
            o.tel = a.tel, o.payFlag = !0
        }, o.edit = function () {
            if (!o.cp) return o.promptERR = !0, void(o.wordERR = "请把数据填充完整");
            o.t = 0;
            for (var a = 0; a < o.eMembers.length; a++) o.eMembers[a].tel == o.tel && (o.eMembers[a].total = parseInt(o.cp), o.payFlag = !1, 1 == o.promptOK, n(function () {
                o.promptOK = !1
            }, 1e3), o.wordOK = "修改成功"), o.t = o.t + o.eMembers[a].total
        }, o.toastPay = function () {
            return o.eMembers.length < 1 ? (o.promptWARN = !0, void(o.wordWARN = "请导入数据")) : (o.deleteFlag = !0, o.pFlag = !0, o.pWord = "是否确认充值？", void 0)
        }, o.judgePay = function () {
            for (var a = [], b = 0; b < o.eMembers.length; b++)
                if (o.eMembers[b].select) {
                    var c = {
                        name: o.eMembers[b].name,
                        tel: o.eMembers[b].tel,
                        total: o.eMembers[b].total
                    };
                    a.push(c)
                }
            var c = {
                docs: a
            };
            l.create(c, function (a) {
                o.eMembers = [], _.each(a.data.failArr, function (a) {
                    a.flag = !0, o.eMembers.push(a)
                }), o.eMembers.length > 0 ? o.oneF = !0 : o.oneF = !1, _.each(a.data.successArr, function (a) {
                    a.flag = !1, o.eMembers.push(a)
                }), o.close(), o.promptOK = !0, n(function () {
                    o.promptOK = !1
                }, 1e3), o.oneF ? o.wordOK = "部分账号充值成功" : o.wordOK = "充值成功", o.selectFlag = !1, o.selectFlagE = !1, o.deleteFlag = !1, o.t = 0;
                for (var b = 0; b < o.eMembers.length; b++) o.eMembers[b].select = !1, o.t = o.t + o.eMembers[b].total
            }, function (a) {
                o.promptERR = !0, o.deleteFlag = !1, (a.data.code = 409) ? o.wordERR = "数据有错误，请检查" : o.wordERR = a.data.data
            })
        }, o["delete"] = function (a) {
            a ? o.eMembers = o.timeRR : o.eMembers = o.eMembers.concat(o.timeRR), o.deleteFlag = !1
        }, o.uploadExcel = function () {
            var a = Math.pow(2, 32),
                b = 1;
            if (o.execlFile) {
                var c = o.execlFile,
                    d = (new Date).getTime(),
                    e = d.toString(),
                    f = (Math.floor(Math.random() * (a - b)) + b).toString(),
                    g = f.toString(),
                    h = e + "_" + g + "_" + c.name.replace(/[^0-9a-z\.]+/gi, "");
                m.upload({
                    method: "POST",
                    url: "api/upload",
                    data: {
                        file: c,
                        filename: h
                    }
                }).then(function (a) {
                    if (console.log("Success " + a.config.data.file.name + "uploaded. Response: " + a.data), o.eMembers.length > 0) return o.timeRR = a.data.data, o.deleteFlag = !0, o.pFlag = !1, void(o.pWord = "是否删除原来的列表内容?");
                    o.eMembers = a.data.data, o.t = 0;
                    for (var b = 0; b < o.eMembers.length; b++) o.t = o.t + o.eMembers[b].total
                }, function (a) {
                    console.log("Error status: " + a.status), o.promptERR = !0, o.wordERR = "表单格式有错误，请上传正确的表单"
                }, function (a) {
                    var b = parseInt(100 * a.loaded / a.total);
                    console.log("progress: " + b + "% " + a.config.data.file.name)
                })
            }
        }, o.cancel = function (a) {
            o.noFlag = !0, o.rId = a._id
        }, o.no = function () {
            var a = {
                id: o.rId
            };
            l.cancel(a, function (a) {
                o.promptOK = !0, o.noFlag = !1, n(function () {
                    o.promptOK = !1
                }, 1e3), o.wordOK = "撤销成功", p()
            })
        };
        var p = function () {
            var a = {
                page: o.pagination.page,
                itemsPerPage: o.pagination.itemsPerPage
            };
            l.index(a, function (a) {
                o.records = a.data.records;
                for (var b = 0; b < o.records.length; b++) {
                    for (var c = "", d = 0, e = 0; e < o.records[b].detail.length; e++) d += o.records[b].detail[e].total, c = 0 == e ? o.records[b].detail[e].name + "(" + o.records[b].detail[e].total + ")" : c + "," + o.records[b].detail[e].name + "(" + o.records[b].detail[e].total + ")";
                    o.records[b].name = c, o.records[b].p = d
                }
                var f = a.data.count;
                o.pagination.totalItems = f, o.pagination.numPages = f / o.itemsPerPage
            })
        };
        o.types = [{
            name: "全部"
        }, {
            name: "会员卡"
        }, {
            name: "外来卡"
        }, {
            name: "员工卡"
        }, {
            name: "领导金卡"
        }, {
            name: "保安卡"
        }];
        var q = function () {
            "normal" == o.titleState ? o.getMember() : p()
        };
        q()
    }
    angular.module("fieldApp").controller("CrdDummyCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "ShopProduct", "Record", "Virrecord", "Upload", "$timeout"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.close = function () {
            k.cardFlag = !1, k.reFlag = !1, k.objectFlag = !1, k.num = "", k.promptERR = !1
        }, k.page = 1, k.itemsPerPage = 10, k.pagination = {
            page: k.page,
            itemsPerPage: k.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, k.cardFunction = function (a) {
            switch (k.cardFlag = !0, k.st = a, a) {
            case "enter":
                k.title = "卡入库", k.state = "add", k.wordOK = "入库成功";
                break;
            case "send":
                k.title = "卡发放", k.state = "pickout", k.object = "发放对象", k.objectFlag = !0, k.wordOK = "卡发放成功";
                break;
            case "re":
                k.title = "卡回收", k.state = "recovery", k.object = "回收对象", k.objectFlag = !0, k.wordOK = "卡回收成功";
                break;
            case "bad":
                k.title = "卡报销", k.state = "cancel", k.wordOK = "卡报销成功"
            }
        }, k.finish = function () {
            switch (k.st) {
            case "enter":
                k.describtion = "卡入库" + k.num + "张";
                break;
            case "send":
                k.title = "卡发放", k.describtion = "向" + k.objectName + "发放卡" + k.num + "张";
                break;
            case "re":
                k.title = "卡回收", k.describtion = "向" + k.objectName + "回收卡" + k.num + "张";
                break;
            case "bad":
                k.title = "卡报销", k.describtion = "卡报销" + k.num + "张"
            }
            var a = {
                status: k.state,
                editNum: k.num,
                describtion: k.describtion,
                _toUser: k._id
            };
            i.create(a, function (a) {
                m(), k.close(), k.promptOK = !0, j(function () {
                    k.promptOK = !1
                }, 1e3)
            }, function (a) {
                k.promptERR = !0, k.wordERR = a.data.data
            })
        }, k.chooseObject = function (a) {
            k.objectName = a.name, k.chooseObjectFlag = !1, k._id = a._id
        }, k.pageChanged = function () {
            m()
        };
        var l = function () {
                var a = {
                    role: "checkStand"
                };
                e.index(a, function (a) {
                    k.users = a.data.users, k.users.length > 0 && (k.objectName = k.users[0].name, k._id = k.users[0]._id)
                }, function () {})
            },
            m = function () {
                var a = {
                    page: k.pagination.page,
                    itemsPerPage: k.pagination.itemsPerPage,
                    workers: k.urr
                };
                i.index(a, function (a) {
                    k.records = a.data.cardRecords, k.records.length > 0 ? k.number = k.records[0].total : k.number = 0;
                    var b = a.data.count;
                    k.pagination.totalItems = b, k.pagination.numPages = b / k.itemsPerPage
                }, function (a) {})
            },
            n = function () {
                var a = {
                    role: "cardManager"
                };
                e.get(a, function (a) {
                    k.urr = [], k.urr.push(a.data.user._id), m()
                }, function () {})
            },
            o = function () {
                n(), l()
            };
        o()
    }
    angular.module("fieldApp").controller("CrdUserecordCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Cardrecords", "$timeout"]
}(),
function () {
    "use strict";

    function a(a) {
        a.state("crd-member", {
            params: {
                value: "member"
            },
            url: "/crd/member",
            templateUrl: "app/cardmanager/member/member.html",
            controller: "CrdMemberCtrl",
            controllerAs: "crdMemberCtrl"
        }).state("crd-member-detail", {
            params: {
                value: "member"
            },
            url: "/crd/member/:id",
            templateUrl: "app/cardmanager/member/member-detail.html",
            controller: "CrdMemberDetailCtrl",
            controllerAs: "crdMemberDetailCtrl",
            "abstract": !0
        }).state("crd-member-detail.info", {
            url: "/member/detail/info?state",
            templateUrl: "app/cardmanager/member/member-detail-info.html"
        }).state("crd-member-detail.record", {
            url: "/member/detail/record",
            templateUrl: "app/cardmanager/member/member-detail-record.html"
        }).state("crd-docord", {
            params: {
                value: "member"
            },
            url: "/crd/docord",
            templateUrl: "app/cardmanager/member/member-docord.html",
            controller: "CrdDocordCtrl",
            controllerAs: "crdDocordCtrl"
        }).state("crd-finance-shop", {
            params: {
                value: "finance"
            },
            url: "/crd/finance/shop",
            templateUrl: "app/cardmanager/finance/shop/finance-shop.html",
            controller: "CrdFinanceShopCtrl",
            controllerAs: "crdFinanceShopCtrl"
        }).state("crd-card", {
            params: {
                value: "card",
                sencond: "entity"
            },
            url: "/card/cardrecord",
            templateUrl: "app/cardmanager/card/card.html",
            controller: "CrdCardCtrl",
            controllerAs: "crdCardCtrl"
        }).state("crd-banka", {
            params: {
                value: "banka",
                sencond: "entity"
            },
            url: "/card/banka",
            templateUrl: "app/cardmanager/card/banka.html",
            controller: "CrdBankaCtrl",
            controllerAs: "crdBankaCtrl"
        }).state("crd-userecord", {
            params: {
                value: "userecord",
                sencond: "entity"
            },
            url: "/card/userecord",
            templateUrl: "app/cardmanager/card/userecord.html",
            controller: "CrdUserecordCtrl",
            controllerAs: "crdUserecordCtrl"
        }).state("crd-entity", {
            params: {
                value: "card",
                sencond: "entity"
            },
            url: "/card/entity",
            templateUrl: "app/cardmanager/card/card-entity.html",
            controller: "CrdEntityCtrl",
            controllerAs: "crdEntityCtrl"
        }).state("crd-dummy", {
            params: {
                value: "card",
                sencond: "virtual"
            },
            url: "/card/dummy",
            templateUrl: "app/cardmanager/card/dummy.html",
            controller: "CrdDummyCtrl",
            controllerAs: "crdDummyCtrl",
            "abstract": !0
        }).state("crd-dummy.normal", {
            url: "/normal?state",
            templateUrl: "app/cardmanager/card/dummy-normal.html"
        }).state("crd-dummy.enter", {
            url: "/enter?state",
            templateUrl: "app/cardmanager/card/dummy-enter.html"
        }).state("crd-dummy.record", {
            url: "/record?state",
            templateUrl: "app/cardmanager/card/dummy-record.html"
        }).state("crd-sell", {
            params: {
                value: "sell",
                sencond: "stock"
            },
            url: "/crd/sell",
            templateUrl: "app/cardmanager/shop/sell.html",
            controller: "CrdSellCtrl",
            controllerAs: "crdSellCtrl",
            "abstract": !0
        }).state("crd-sell.sale", {
            url: "/sale?state",
            templateUrl: "app/cardmanager/shop/sell-sale.html"
        }).state("crd-sell.record", {
            url: "/record?state",
            templateUrl: "app/cardmanager/shop/sell-record.html"
        }).state("crd-purchase", {
            params: {
                value: "sell",
                sencond: "purchase"
            },
            url: "/crd/purchase",
            templateUrl: "app/cardmanager/stock/purchase.html",
            controller: "CrdPurchaseCtrl",
            controllerAs: "crdPurchaseCtrl"
        }).state("crd-stock", {
            params: {
                value: "sell",
                sencond: "purchase"
            },
            url: "/crd/stock",
            templateUrl: "app/cardmanager/stock/stock.html",
            controller: "CrdStockCtrl",
            controllerAs: "crdStockCtrl"
        }).state("crd-shop-form", {
            params: {
                value: "sell",
                sencond: "stock"
            },
            url: "/crd/shop/form",
            templateUrl: "app/cardmanager/stock/shop-form.html",
            controller: "CrdShopFormCtrl",
            controllerAs: "crdShopFormCtrl"
        }).state("crd-purchase-record", {
            params: {
                value: "sell",
                sencond: "stock"
            },
            url: "/crd/purchase/record",
            templateUrl: "app/cardmanager/stock/purchase-record.html",
            controller: "CrdPurchaseRecordCtrl",
            controllerAs: "crdPurchaseRecordCtrl"
        }).state("crd-return-record", {
            params: {
                value: "sell",
                sencond: "stock"
            },
            url: "/crd/return-record",
            templateUrl: "app/cardmanager/stock/return-record.html",
            controller: "CrdReturnRecordCtrl",
            controllerAs: "crdReturnRecordCtrl"
        }).state("crd-setting-person", {
            params: {
                value: "setting",
                sencond: "person"
            },
            url: "/card/setting/person",
            templateUrl: "app/cardmanager/setting/setting-person.html",
            controller: "CrdSettingPersonCtrl",
            controllerAs: "crdSettingPersonCtrl"
        }).state("crd-setting-supply", {
            params: {
                value: "sell",
                sencond: "sale"
            },
            url: "/crd/setting/shop/supply",
            templateUrl: "app/cardmanager/setting/setting-supply.html",
            controller: "CrdSupplyCtrl",
            controllerAs: "crdSupplyCtrl"
        }).state("crd-setting-product-info", {
            params: {
                value: "sell",
                sencond: "sale"
            },
            url: "/crd/setting/shop/info",
            templateUrl: "app/cardmanager/setting/setting-product-info.html",
            controller: "CrdProductInfoCtrl",
            controllerAs: "crdProductInfoCtrl"
        })
    }
    angular.module("fieldApp").config(a), a.$inject = ["$stateProvider"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        var p = this,
            q = function () {
                k.index({}, function (a) {
                    p.venues = a.data.venues, _.each(p.venues, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), p.chooseVenueName(p.venues[0])
                }, function () {})
            },
            r = function () {
                e.index({
                    role: "checkStand"
                }, function (a) {
                    p.workers = a.data.users, _.each(p.workers, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), q()
                }, function () {})
            },
            s = function () {
                p.hasChooseVenue = [], p.hasChooseItem = [], p.hasChooseWorker = [], _.each(p.items, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseItem.push(a)
                }), _.each(p.venues, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseVenue.push(a)
                }), _.each(p.workers, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseWorker.push(a)
                })
            },
            t = function () {
                s(), p.hasChooseItem.length > 0 && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "item" : 0 == p.hasChooseItem.length && p.hasChooseVenue.length > 0 && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "venue" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && p.hasChooseWorker.length > 0 && !p.whatFirst ? p.whatFirst = "worker" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && (p.whatFirst = ""), 0 == p.hasChooseItem.length && "item" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseVenue.length && "venue" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseWorker.length && "worker" == p.whatFirst && (p.whatFirst = "")
            },
            u = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    _.each(p.venues, function (b) {
                        var d = _.findWhere(b.items, {
                            _id: a._id
                        });
                        return d ? void c.push(b) : void 0
                    })
                }), b(c)
            },
            v = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    a.venues && a.venues.length > 0 ? _.each(p.venues, function (b) {
                        var d = _.findWhere(a.venues, {
                            _id: b._id
                        });
                        if (d) {
                            var e = _.findWhere(c, {
                                _id: d._id
                            });
                            if (!e) return void c.push(b)
                        }
                    }) : c = p.venues
                }), b(c)
            },
            w = function (a, b) {
                var c = [];
                return _.each(a, function (a) {
                    _.each(a.items, function (b) {
                        var d = _.findWhere(c, {
                            _id: b._id
                        });
                        d || (c = c.concat(a.items))
                    })
                }), b ? void b(c) : c
            },
            x = function (a, b) {
                var c = [];
                return _.each(p.workers, function (b) {
                    b.venues && b.venues.length > 0 ? _.each(a, function (a) {
                        var d = _.findWhere(b.venues, {
                            _id: a._id
                        });
                        d && c.push(b)
                    }) : c.push(b)
                }), b ? void b(c) : c
            };
        p.chooseItemName = function (a) {
            A(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseItem.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseItem.splice(p.hasChooseItem.indexOf(a), 1)), t(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "item" == p.whatFirst && u(p.hasChooseItem, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), x(a, function (a) {
                    _.each(p.workers, function (b) {
                        -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                    })
                })
            }), D()
        }, p.chooseVenueName = function (a) {
            if (A(), "manyChoose_imageNo" == a.image) a.image = "manyChoose_imageYes", p.hasChooseVenue.push(a);
            else {
                if (1 == p.hasChooseVenue.length) return p.promptERR = !0, void(p.wordERR = "必须选择一个场馆");
                a.image = "manyChoose_imageNo", p.hasChooseVenue.splice(p.hasChooseVenue.indexOf(a), 1)
            }
            t(), p.whatFirst || (_.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "venue" == p.whatFirst && (w(p.hasChooseVenue, function (a) {
                _.each(p.items, function (b) {
                    var c = _.findWhere(a, {
                        _id: b._id
                    });
                    c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                })
            }), x(p.hasChooseVenue, function (a) {
                _.each(p.workers, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                })
            })), D()
        }, p.chooseWorkerName = function (a) {
            A(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseWorker.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseWorker.splice(p.hasChooseWorker.indexOf(a), 1)), t(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            })), "worker" == p.whatFirst && v(p.hasChooseWorker, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), w(a, function (a) {
                    _.each(p.items, function (b) {
                        var c = _.findWhere(a, {
                            _id: b._id
                        });
                        c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                    })
                })
            }), D()
        };
        var y = function () {
                z(), r()
            },
            z = function () {
                p.hasChooseItem = [], p.hasChooseVenue = [], p.hasChooseWorker = [], p.searchVenueIdArr = [], p.searchItemIdArr = [], p.searchType = "", p.searchWorkerId = "", p.searchPayment = "", p.searchMemberId = "", p.searchMemberType = "", p.whatFirst = "", p.venueArr = [], p.itemArr = [], p.errState = "add", p.errRecordId = "", p.errPrice = "", p.errRemark = "", p.showTypeName = "类型", p.showWorkerName = "提交人", p.showPaymentName = "支付方式", p.showMemberName = "用户名", p.showMemberTypeName = "类型", p.startDate = new Date, p.endDate = new Date, p.paymentArr = [{
                    name: "全部"
                }, {
                    name: "微信支付",
                    value: "wx"
                }, {
                    name: "现金支付",
                    value: "cash"
                }, {
                    name: "余额支付",
                    value: "member"
                }, {
                    name: "支付宝支付",
                    value: "alipay"
                }], _.each(p.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.venues, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.workers, function (a) {
                    a.image = "manyChoose_imageNo"
                }), p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            A = function () {
                p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            B = function () {
                p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1, p.showChooseItemBox = !1, p.showChooseVenueBox = !1, p.showChooseTypeBox = !1, p.showChooseWorkerBox = !1, p.showChooseMemberBox = !1, p.showChoosePaymentBox = !1, p.showChooseMemberTypeBox = !1, p.showChooseWorkerBox = !1, p.showErrChangeBox = !1, p.showPreview = !1, p.showDetail = !1
            },
            C = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            };
        p.pageChanged = function () {
            E()
        }, p.closeChooseStartDateBox = function () {
            B(), A(), setTimeout(function () {
                D()
            }, 100)
        }, p.closeChooseEndDateBox = function () {
            B(), A(), setTimeout(function () {
                D()
            }, 100)
        }, p.choosePaymentName = function (a) {
            p.showChoosePaymentBox = !1, A(), p.showPaymentName = a.name, p.searchPayment = a.value, E()
        }, p.openErrChangeBox = function (a) {
            B(), p.showErrChangeBox = !0, p.errRecordId = a
        }, p.chooseErrState = function (a) {
            "add" == a ? p.errState = "add" : p.errState = "reduce"
        }, p.changeErrRemark = function () {
            if (!p.errPrice) return p.promptERR = !0, void(p.wordERR = "请填写纠错金额");
            if (!p.errRemark) return p.promptERR = !0, void(p.wordERR = "请填写纠错备注");
            var a = {
                _record: p.errRecordId,
                state: p.errState,
                cost: parseFloat(p.errPrice),
                remark: p.errRemark
            };
            i.create({}, a, function () {
                E()
            }, function () {})
        }, p.closePrompt = function () {
            p.promptOK = !1, p.promptERR = !1, p.promptWARN = !1, p.searchWorkerIdArr = [], p.searchPayment = ""
        };
        var D = function () {
            p.promptWARN = !0, p.wordWARN = "统计中";
            var a = {
                all: "all",
                state: "shop",
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            };
            p.dateName = "", p.dateName += p.startDate.getFullYear() + "年", p.dateName += p.startDate.getMonth() + 1 > 9 ? p.startDate.getMonth() + 1 + "月" : "0" + (p.startDate.getMonth() + 1) + "月", p.dateName += p.startDate.getDate() > 9 ? p.startDate.getDate() + "日-" : "0" + p.startDate.getDate() + "日-", p.dateName += p.endDate.getFullYear() + "年", p.dateName += p.endDate.getMonth() + 1 > 9 ? p.endDate.getMonth() + 1 + "月" : "0" + (p.endDate.getMonth() + 1) + "月", p.dateName += p.endDate.getDate() > 9 ? p.endDate.getDate() + "日" : "0" + p.endDate.getDate() + "日";
            var b = [];
            p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && (p.searchVenueIdArr.push(a._id), b.push(a))
            }), p.venueName = "";
            for (var c = 0; c < b.length; c++) p.venueName += (0 == c ? "" : "/") + b[c].name;
            p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: p.searchVenueIdArr
            })), p.searchWorkerIdArr = [], _.each(p.workers, function (a) {
                "manyChoose_imageYes" == a.image && p.searchWorkerIdArr.push(a._id)
            }), p.searchWorkerIdArr.length > 0 && (a = _.merge(a, {
                workers: p.searchWorkerIdArr
            })), o.shop(a, function (a) {
                p.records = a.data.statistic, p.promptWARN = !1
            }, function () {})
        };
        p["export"] = function (a) {
            var b;
            b = a ? p.dateName + p.workerName + "的" + p.venueName + "的小卖部消费明细表" : p.dateName + p.venueName + "的小卖部消费汇总表", setTimeout(function () {
                execl1(a ? a : "alltable", b)
            }, 100)
        }, p.initCondition = function (a, b) {
            a && (p.searchWorkerIdArr = [a]), E(b)
        };
        var E = function (a) {
            p.workerName = a;
            var b = {
                state: "shop",
                all: "all"
            };
            p.startDate && p.endDate && (b = _.merge(b, {
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            })), p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && p.searchVenueIdArr.push(a._id)
            }), p.searchVenueIdArr.length > 0 && (b = _.merge(b, {
                venues: p.searchVenueIdArr
            })), p.searchWorkerIdArr.length > 0 && (b = _.merge(b, {
                workers: p.searchWorkerIdArr
            })), p.searchPayment && (b = _.merge(b, {
                payments: [p.searchPayment]
            })), i.index(b, function (a) {
                if (p.recordsDetail = a.data.records, !(p.recordsDetail.length > 0)) return p.promptERR = !0, void(p.wordERR = "暂无记录");
                p.showDetail = !0, p.shopDetails = [];
                var b = 1,
                    c = 0,
                    d = 0,
                    e = 0,
                    f = 0;
                _.each(p.recordsDetail, function (a) {
                    switch (a.index = b, b++, a.status) {
                    case "refundShopProduct":
                        a.cost = -1 * a.cost, a.quantity = -1 * a.quantity
                    }
                    a.state && (a.quantity = 0), "reduce" == a.state && (a.cost = -1 * a.cost);
                    var c = _.findWhere(p.shopDetails, {
                        _id: a._shopProduct
                    });
                    if (c) c.quantity += a.quantity, c.subTotal += a.cost, "member" == a.payment ? c.member = C((100 * c.member + 100 * a.cost) / 100) : c.noMember = C((100 * c.noMember + 100 * a.cost) / 100);
                    else {
                        var d = {
                            _id: a._shopProduct,
                            name: a.shopProductName,
                            member: 0,
                            noMember: 0,
                            quantity: a.quantity,
                            subTotal: a.cost
                        };
                        "member" == a.payment ? d.member = C((100 * d.member + 100 * a.cost) / 100) : d.noMember = C((100 * d.noMember + 100 * a.cost) / 100), p.shopDetails.push(d)
                    }
                }), _.each(p.shopDetails, function (a) {
                    c += a.quantity, d = C((100 * a.subTotal + 100 * d) / 100), e = C((100 * e + 100 * a.member) / 100), f = C((100 * f + 100 * a.noMember) / 100)
                }), p.shopDetails.push({
                    name: "合计",
                    quantity: c,
                    subTotal: d,
                    member: e,
                    noMember: f
                })
            }, function () {})
        };
        p.close = function () {
            B(), p.searchWorkerIdArr = [], p.searchPayment = "", A()
        }, y()
    }
    angular.module("fieldApp").controller("CrdFinanceShopCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Record", "Item", "Venue", "Member", "Product", "Cardrecords", "Finance"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l) {
        var m = this;
        m.id = g.id, m.searchName = g.searchName, m.searchName ? c.searchName = m.searchName : c.searchName = "";
        var n = function () {
            i.index({
                id: m.id
            }, function (a) {
                m.member = a.data.member, m.name = m.member.name, m.tel = m.member.tel, m.member.idCard ? m.idCard = m.member.idCard : m.idCard = "暂无", m.typeName = m.member.type, m.name1 = m.member.name, m.tel1 = m.member.tel, m.idCard1 = m.member.idCard, m.typeName1 = m.member.type, m.speAccount = m.member.specialAccount, m.judge()
            })
        };
        m.update = function () {
            var a = {
                name: m.name,
                tel: m.tel,
                idCard: m.idCard,
                type: m.typeName
            };
            i.update({
                id: m.id
            }, a, function (a) {
                n(), m.toastFlag = !0, k(function () {
                    m.toastFlag = !1
                }, 1e3)
            }, function (a) {
                m.promptERR = !0, m.wordERR = a.data.data, "ValidationError: 该号码已被使用." == m.wordERR && (m.wordERR = "该号码已被使用")
            })
        }, m.chooseType = function (a) {
            m.chooseTypeFlag = !1;
            for (var b = 0; b < m.types.length; b++) m.types[b].select = !1;
            a.select = !0, m.typeName = a.name, m.judge()
        }, m.types = [{
            name: "会员卡",
            select: !0
        }, {
            name: "外来卡",
            select: !1
        }, {
            name: "员工卡",
            select: !1
        }, {
            name: "领导金卡",
            select: !1
        }, {
            name: "保安卡",
            select: !1
        }], m.close = function () {
            m.refundFlag = !1, m.price = "", m.priceFlag = !1, m.promptERR = !1
        }, m.chooseObject = function (a) {
            m.objectName = a.name, m.telS = a.tel, m._user = a._id, m.chooseObjectFlag = !1
        }, m.sendSms = function () {
            var a = {
                tel: m.telS,
                _member: m.member._id,
                _user: m._user
            };
            l.resms(a, function (a) {
                m.sendFlag = !0, m.sendToFlag = !1, k(function () {
                    m.sendFlag = !1
                }, 1e3)
            }, function (a) {
                m.promptERR = !0, m.wordERR = a.data.data
            })
        }, m.refund = function () {
            if (!m.price) return void(m.priceFlag = !0);
            var a = {
                refind: 1 * m.price,
                _member: m.member._id,
                code: m.code
            };
            i.refind(a, function (a) {
                m.promptOK = !0, m.close(), n(), p()
            }, function (a) {
                m.promptERR = !0, m.wordERR = a.data.data
            })
        }, m.page = 1, m.itemsPerPage = 10, m.pagination = {
            page: m.page,
            itemsPerPage: m.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, m.judge = function () {
            m.name != m.name1 || m.tel != m.tel1 || m.idCard != m.idCard1 || m.typeName != m.typeName1 ? m.judgeFlag = !0 : m.judgeFlag = !1
        };
        var o = function () {
                var a = {
                    role: "fieldManager"
                };
                e.index(a, function (a) {
                    m.users = a.data.users, m.users.length > 0 && (m.objectName = m.users[0].name, m.telS = m.users[0].tel, m._user = m.users[0]._id)
                }, function () {})
            },
            p = function () {
                var a = {
                    _member: m.id,
                    page: m.pagination.page,
                    itemsPerPage: m.pagination.itemsPerPage
                };
                j.index(a, function (a) {
                    m.records = a.data.records;
                    for (var b = 0; b < m.records.length; b++) {
                        switch (m.records[b].payment) {
                        case "wx":
                            m.records[b].pm = "微信支付";
                            break;
                        case "cash":
                            m.records[b].pm = "现金支付";
                            break;
                        case "alipay":
                            m.records[b].pm = "支付宝支付";
                            break;
                        case "member":
                            m.records[b].pm = "余额支付";
                            break;
                        case "member_vir":
                            m.records[b].pm = "虚拟卡支付";
                            break;
                        case "card":
                            m.records[b].pm = "转账支付";
                            break;
                        case "pos":
                            m.records[b].pm = "pos机支付";
                            break;
                        default:
                            m.records[b].pm = "无"
                        }
                        switch (m.records[b].status) {
                        case "refund":
                        case "buy":
                        case "buyTicket":
                        case "buyProduct":
                        case "buyShopProduct":
                            m.records[b].price = "+" + m.records[b].cost;
                            break;
                        case "pay":
                        case "cardRefund":
                        case "refundProduct":
                        case "refundShopProduct":
                            m.records[b].price = "-" + m.records[b].cost
                        }
                    }
                    var c = a.data.count;
                    m.pagination.totalItems = c, m.pagination.numPages = c / m.itemsPerPage
                })
            };
        m.pageChanged = function () {
            q()
        };
        var q = function () {
            n(), p(), o()
        };
        q()
    }
    angular.module("fieldApp").controller("CrdMemberDetailCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "Record", "$timeout", "Smscode"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l) {
        var m = this;
        m.page = 1, m.itemsPerPage = 10, m.pagination = {
            page: m.page,
            itemsPerPage: m.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, m.getRecord = function () {
            var a = {
                mix: m.mix,
                page: m.pagination.page,
                itemsPerPage: m.pagination.itemsPerPage
            };
            l.index(a, {
                _org: m._org
            }, function (a) {
                m.events = a.data.events, _.each(m.events, function (a) {
                    switch (a.status) {
                    case "move":
                        a.status = "过户";
                        break;
                    case "updateTel":
                        a.status = "更改绑定手机号";
                        break;
                    case "freeze":
                        a.status = "冻结";
                        break;
                    case "cancelFreeze":
                        a.status = "解除冻结"
                    }
                });
                var b = a.data.count;
                m.pagination.totalItems = b, m.pagination.numPages = b / m.itemsPerPage
            })
        };
        var n = function () {
            e.get({}, function (a) {
                m._org = a.data.user._organization ? a.data.user._organization : a.data.user._id, m.getRecord()
            }, function () {})
        };
        m.pageChanged = function () {
            o()
        };
        var o = function () {
            n()
        };
        o()
    }
    angular.module("fieldApp").controller("CrdDocordCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "Record", "$timeout", "Event"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n) {
        var o = this;
        o.addFlag = !1, o.chooseCardFlag = !1, o.idCard = "", o.showCodeBox = !0, o.wxFlag = !0, o.typeName = "会员卡", o.moneySelect = !0, o.oneSelect = !1, o.cardSelect = !1, o.isUsed = !0, o.isBk = !1, o.isAccount = !1, $("#search").keydown(function (a) {
            13 == a.keyCode && o.search()
        }), o.types = [{
            name: "会员卡",
            select: !0
        }, {
            name: "外来卡",
            select: !1
        }, {
            name: "员工卡",
            select: !1
        }, {
            name: "领导金卡",
            select: !1
        }, {
            name: "保安卡",
            select: !1
        }], o.order = {
            _member: "",
            orderDate: null,
            spbill_create_ip: "",
            auth_code: "",
            payment: "alipay",
            orderArr: {
                total: 0,
                fields: []
            }
        }, c.mPage ? o.page = c.mPage : (o.page = 1, c.mPage = o.page), o.itemsPerPage = 10, o.pagination = {
            page: c.mPage,
            itemsPerPage: o.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, o.close = function () {
            o.addFlag = !1, o.chooseCardFlag = !1, o.nameFlag = !1, o.phoneFlag = !1, o.sureFlag = !1, o.cardFlag = !1, o.idFlag = !1, o.name = "", o.phone = "", o.iderr = "", o.iFlag = !1, o.pFlag = !1, o.continueFlag = !1, o.idCard = "", o.cardFlag = !1, o.cardNum = "", o.needFlag = !1, o.cFlag = !1, o.payFlag = !1, o.auth_code = "", o.wxFlag = !0, o.defindFlag = !1, o.moneySelect = !0, o.oneSelect = !1, o.cardSelect = !1, o.choosedCardFlag = !1, o.showAuth_codeBox = !1, o.add = !1, o.price = "", o.printFlag = !1, _.each(o.vrr, function (a) {
                a.select = !1
            }), o.chargeVenue = "", o.chargeCardNum = "", o.chargeCardPassword = "", o.moneySelect = !0, o.oneSelect = !1, o.cardSelect = !1, o.speSelect = !1
        }, o.closePrompt = function () {
            o.promptERR = !1, o.toastFlag = !1, o.promptWARN = !1, o.showAuth_codeBox = !1, clearInterval(o.setIntervalId)
        }, o.defind = function (a) {
            o.addFlag = !0, o.defindFlag = !0, o.memTitle = "实名认证", o.name = a.name, o.phone = a.tel, o.mId = a._id
        }, o.chVenue = function (a) {
            _.each(o.vrr, function (a) {
                a.select = !1
            }), a.select = !0
        }, o.newAdd = function () {
            o.addFlag = !0, o.memTitle = "新增会员"
        }, o.banka = function (a) {
            o.cFlag = !0, o.mId = a._id
        }, o.getNowFormatDate = function (a) {
            var b = "-",
                c = ":",
                d = a.getMonth() + 1,
                e = a.getDate();
            d >= 1 && 9 >= d && (d = "0" + d), e >= 0 && 9 >= e && (e = "0" + e);
            var f = a.getFullYear() + b + d + b + e + " " + a.getHours() + c + a.getMinutes() + c + a.getSeconds();
            return f
        }, o.showSelect = function (a) {
            switch (a) {
            case "card":
                o.chooseCardFlag = !o.chooseCardFlag
            }
        }, o.useStateArr = [{
            name: "需要",
            image: "singleChoose_imageNo",
            isUsed: !0
        }, {
            name: "不需要",
            image: "singleChoose_imageYes",
            isUsed: !1
        }], o.create = function () {
            if (o.defindFlag) return void o.deFun();
            o.order.orderDate || (o.order.orderDate = new Date), o.order.orderDate = new Date(o.order.orderDate).getTime();
            var a = {
                name: o.name,
                tel: o.phone,
                idCard: o.idCard,
                type: o.typeName
            };
            i.create(a, function (a) {
                if (o.needFlag) {
                    var b = {
                        _member: a.data.member._id,
                        cardNo: o.cardNum
                    };
                    i.cardBind(b, function (a) {}, function (a) {
                        o.phoneFlag = !0, o.errPhone = a.data.data
                    })
                }
                o.promptWARN = !1, o.close(), q()
            }, function (a) {
                o.promptWARN = !1, 402 == a.data.code ? (o.phoneFlag = !0, o.errPhone = "手机号码格式错误") : 500 == a.data.code && (o.phoneFlag = !0, o.errPhone = "该手机号已被使用", o.payFlag = !1, o.addFlag = !0)
            })
        }, o.chooseCard = function (a) {
            o.chooseCardFlag = !1, o.cardName = a.name, o.cardId = a._id, o.realPrice = a.realPrice
        }, o.judge = function (a) {
            switch (a) {
            case "name":
                o.name ? o.nameFlag = !1 : o.nameFlag = !0;
                break;
            case "phone":
                o.phone ? o.phoneFlag = !1 : o.phoneFlag = !0
            }
        }, o.bind = function () {
            var a = {
                _member: o.mId,
                cardNo: o.cardNum
            };
            i.cardBind(a, function (a) {
                o.close(), o.wordOK = "绑定成功", o.toastFlag = !0, k(function () {
                    o.toastFlag = !1
                }, 1e3), q()
            }, function (a) {
                o.phoneFlag = !0, o.errPhone = a.data.data
            })
        };
        var p = function () {
            e.get({}, function (a) {
                var b = a.data.user._organization ? a.data.user._organization : a.data.user._id;
                e.getOrgInfo({
                    id: b
                }, function (a) {
                    o._id = a.data.user._id, o.cardCost = a.data.user.cardCost, o.admin = a.data.user.name
                }, function () {})
            }, function () {})
        };
        o.choose = function (a) {
            a.select = !0, o.choosedCardFlag = !1, o.cardId = a._id, o.cardName = a.name + "(" + a.price + "元)", o.realPrice = a.realPrice
        }, o.chooseType = function (a) {
            for (var b = 0; b < o.types.length; b++) o.types[b].select = !1;
            a.select = !0, o.choosedTypeFlag = !1, o.typeName = a.name
        }, o.pageChanged = function () {
            c.mPage = o.pagination.page, o.mix = o.searchName, q()
        }, o.search = function () {
            o.pagination.page = 1, o.pagination.itemsPerPage = 10, o.mix = o.searchName, q()
        };
        var q = function () {
            var a = {
                page: o.pagination.page,
                itemsPerPage: o.pagination.itemsPerPage,
                mix: o.mix
            };
            i.index(a, function (a) {
                o.mix = "", o.members = a.data.members;
                for (var b = 0; b < o.members.length; b++) o.members[b].cards.length > 0 ? o.members[b].p = o.members[b].cards[0].total : o.members[b].p = "0", _.each(o.members[b].specialAccount, function (a) {
                    "5a1e4774138f87e51c2e79e9" == a._venue ? (o.members[b].accFlag = !0, o.members[b].accTot = a.total) : (o.members[b].accFlag = !1, o.members[b].accTot = 0)
                });
                var c = a.data.count;
                o.pagination.totalItems = c, o.pagination.numPages = c / o.itemsPerPage
            })
        };
        o.initEmpty = function () {
            o.order = {
                _member: "",
                spbill_create_ip: "",
                auth_code: "",
                payment: "alipay",
                _card: ""
            }
        };
        var r = function () {
                m.index({}, function (a) {
                    o.venues = a.data.venues, o.vrr = [], _.each(o.venues, function (a) {
                        a.openSpe && o.vrr.push(a)
                    })
                }, function (a) {})
            },
            s = function () {
                p(), q(), r()
            };
        o.chooseChargeVenue = function (a) {
            o.chargeVenue ? o.chargeVenue._id == a._id ? (o.chargeVenue.image = "singleChoose_imageNo2", o.chargeVenue = "") : (o.chargeVenue.image = "singleChoose_imageNo2", o.chargeVenue = a, o.chargeVenue.image = "singleChoose_imageYes2") : (o.chargeVenue = a, o.chargeVenue.image = "singleChoose_imageYes2")
        }, s()
    }
    angular.module("fieldApp").controller("CrdMemberCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "Card", "$timeout", "Alipay", "Venue", "Tucard"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this;
        j.close = function () {
            j.succeedFlag = !1, j.errorFlag = !1
        }, j.save = function () {
            var a = {
                oldPassword: j.oldPassword,
                newPassword: j.newPassword
            };
            e.updatePassword(a, function (a) {
                j.oldPassword = "", j.newPassword = "", j.succeedFlag = !0, i(function () {
                    j.succeedFlag = !1
                }, 1e3)
            }, function (a) {
                j.errorFlag = !0, i(function () {
                    j.errorFlag = !1
                }, 1e3)
            })
        }, j.judge = function () {
            j.oldPassword && j.newPassword ? j.saveFlag = !0 : j.saveFlag = !1
        };
        var k = function () {
            e.get({}, function (a) {
                j.account = a.data.user.account
            }, function () {})
        };
        j.logout = d.logout;
        var l = function () {
            k()
        };
        l()
    }
    angular.module("fieldApp").controller("CrdSettingPersonCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "$timeout"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.categoryName = "", l.supplyName = "", l.state = !0, l.stateArr = [{
            name: "上架",
            image: "singleChoose_imageYes",
            value: !0
        }, {
            name: "下架",
            image: "singleChoose_imageNo",
            value: !1
        }], l.page = 1, l.itemsPerPage = 10, l.pagination = {
            page: l.page,
            itemsPerPage: l.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, l.close = function () {
            l.addFlag = !1, l.deleteFlag = !1, l.name = "", l.price = "", l.unit = "", l.shopProductCategories.length > 0 && (l.categoryName = l.shopProductCategories[0].name, l.cId = l.shopProductCategories[0]._id), l.supplies.length > 0 && (l.supplyName = l.supplies[0].supplyName, l._supply = l.supplies[0]._id), l.misCode = "", l.editFlag = !1
        }, l.chooseState = function (a) {
            _.each(l.stateArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", l.state = a.value
        }, l.chooseCreateCategory = function (a) {
            l.categoryName = a.name, l.cId = a._id, l.chooseProductFlag = !1
        }, l.chooseSupply = function (a) {
            l.supplyName = a.supplyName, l._supply = a._id, l.chooseSupplyFlag = !1
        }, l.pageChanged = function () {
            m()
        };
        var m = function () {
                var a = {
                    page: l.pagination.page,
                    itemsPerPage: l.pagination.itemsPerPage
                };
                j.index(a, function (a) {
                    l.products = a.data.shopBasics;
                    var b = a.data.count;
                    l.pagination.totalItems = b, l.pagination.numPages = b / l.itemsPerPage
                }, function (a) {})
            },
            n = function () {
                i.index({}, function (a) {
                    l.shopProductCategories = a.data.shopProductCategories, l.shopProductCategories.length > 0 && (l.categoryName = l.shopProductCategories[0].name, l.cId = l.shopProductCategories[0]._id)
                }, function (a) {})
            },
            o = function () {
                k.index({
                    isUsed: !0
                }, function (a) {
                    l.supplies = a.data.supplies, l.supplies.length > 0 && (l.supplyName = l.supplies[0].supplyName, l._supply = l.supplies[0]._id)
                }, function (a) {})
            };
        l.showEdit = function (a) {
            l.addFlag = !0, l.name = a.name, l.unit = a.unit, l.price = a.price, l.state = a.isUsed, l.misCode = a.misCode, l.categoryName = a.categoryName, l.cId = a._category, l.supplyName = a.supplyName, l._supply = a._supply, l.state ? (l.stateArr[0].image = "singleChoose_imageYes", l.stateArr[1].image = "singleChoose_imageNo") : (l.stateArr[0].image = "singleChoose_imageNo", l.stateArr[1].image = "singleChoose_imageYes"), l.pId = a._id, l.editFlag = !0
        }, l.edit = function () {
            var a = {
                name: l.name,
                _category: l.cId,
                _supply: l._supply,
                unit: l.unit,
                price: parseFloat(l.price),
                misCode: "" == l.misCode ? void 0 : l.misCode
            };
            j.update({
                id: l.pId
            }, a, function (a) {
                l.close(), m()
            }, function (a) {
                l.promptERR = !0, l.wordERR = a.data.data
            })
        }, l.create = function () {
            if (l.name ? l.nameFlag = !1 : l.nameFlag = !0, l.unit ? l.unitFlag = !1 : l.unitFlag = !0, l.price ? l.priceFlag = !1 : l.priceFlag = !0, l.misCode ? l.misCodeFlag = !1 : l.misCodeFlag = !0, l.name && l.unit && l.price && l.misCode) {
                if (l.editFlag) return void l.edit();
                var a = {
                    name: l.name,
                    unit: l.unit,
                    _supply: l._supply,
                    _category: l.cId,
                    price: parseFloat(l.price),
                    misCode: "" == l.misCode ? void 0 : l.misCode
                };
                j.create(a, function (a) {
                    l.close(), m()
                }, function (a) {})
            }
        };
        var p = function () {
            m(), n(), o()
        };
        l.closePrompt = function () {
            l.promptERR = !1, l.promptOK = !1, l.promptWARN = !1
        }, p()
    }
    angular.module("fieldApp").controller("CrdProductInfoCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Type", "ShopBasic", "Supply"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.close = function () {
            l.addFlag = !1, l.tel = "", l.supplyName = "", l.workerName = "", l.supplyNameFlag = !1, l.workerNameFlag = !1, l.telFlag = !1, l.deleteFlag = !1, l.editFlag = !1, l.addTypeFlag = !1, l.deleteTypeFlag = !1, l.typeFlag = !1, l.type = "", l.editTypeFlag = !1
        }, l.page = 1, l.itemsPerPage = 10, l.pagination = {
            page: l.page,
            itemsPerPage: l.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, l.stateArr = [{
            name: "启用",
            image: "singleChoose_imageYes",
            value: !0
        }, {
            name: "不启用",
            image: "singleChoose_imageNo",
            value: !1
        }], l.chooseState = function (a) {
            _.each(l.stateArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", l.state = a.value
        }, l.create = function () {
            if (l.supplyName ? l.supplyNameFlag = !1 : l.supplyNameFlag = !0, l.workerName ? l.workerNameFlag = !1 : l.workerNameFlag = !0, l.tel ? l.telFlag = !1 : l.telFlag = !0, l.supplyName && l.tel && l.workerName) {
                if (l.editFlag) return void l.edit();
                var a = {
                    supplyName: l.supplyName,
                    tel: l.tel,
                    workerName: l.workerName,
                    isUsed: l.state ? l.state : !0
                };
                j.create(a, function (a) {
                    l.close(), m()
                }, function (a) {})
            }
        }, l.createType = function () {
            if (!l.type) return void(l.typeFlag = !0);
            if (l.typeFlag = !1, l.editTypeFlag) return void l.editType();
            var a = {
                name: l.type
            };
            k.create(a, function (a) {
                l.close(), n()
            }, function (a) {})
        }, l.edit = function () {
            var a = {
                supplyName: l.supplyName,
                tel: l.tel,
                workerName: l.workerName,
                isUsed: l.state
            };
            j.update({
                id: l.sId
            }, a, function (a) {
                l.close(), m()
            }, function (a) {})
        }, l.editType = function () {
            var a = {
                name: l.type
            };
            k.update({
                id: l.tId
            }, a, function (a) {
                l.close(), o()
            }, function (a) {})
        }, l.showEdit = function (a) {
            l.supplyName = a.supplyName, l.tel = a.tel, l.workerName = a.workerName, _.each(l.stateArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.isUsed ? (l.state = !0, l.stateArr[0].image = "singleChoose_imageYes") : (l.state = !1, l.stateArr[1].image = "singleChoose_imageYes"), l.sId = a._id, l.editFlag = !0, l.addFlag = !0
        }, l.showTypeEdit = function (a) {
            l.addTypeFlag = !0, l.type = a.name, l.editTypeFlag = !0, l.tId = a._id
        }, l.pageChanged = function () {
            m()
        };
        var m = function () {
                var a = {
                    page: l.pagination.page,
                    itemsPerPage: l.pagination.itemsPerPage
                };
                j.index(a, function (a) {
                    l.supplies = a.data.supplies;
                    var b = a.data.count;
                    l.pagination.totalItems = b, l.pagination.numPages = b / l.itemsPerPage
                }, function (a) {})
            },
            n = function () {
                k.index({}, function (a) {
                    l.shopProductCategories = a.data.shopProductCategories
                }, function (a) {})
            };
        l.deleteSupply = function () {
            j["delete"]({}, {
                _id: l._supplyId
            }, function () {
                l.deleteFlag = !1, m(), l.promptOK = !0, l.wordOK = "删除成功", setTimeout(function () {
                    a.$apply(function () {
                        l.promptOK = !1
                    })
                }, 1e3)
            }, function () {})
        };
        var o = function () {
            m(), n()
        };
        l.closePrompt = function () {
            l.promptERR = !1, l.promptOK = !1, l.promptWARN = !1
        }, o()
    }
    angular.module("fieldApp").controller("CrdSupplyCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue", "Supply", "Type"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q) {
        var r, s = this;
        s.titleState = f.params.state || "sale", s.paymentArr = [{
            name: "支付宝",
            value: "alipay",
            image: "singleChoose_imageYes"
        }, {
            name: "微信",
            value: "wx",
            image: "singleChoose_imageNo"
        }, {
            name: "余额",
            value: "member",
            image: "singleChoose_imageNo"
        }, {
            name: "现金",
            value: "cash",
            image: "singleChoose_imageNo"
        }], s.paymentArr2 = [{
            name: "支付宝",
            value: "alipay",
            image: "singleChoose_imageYes"
        }, {
            name: "微信",
            value: "wx",
            image: "singleChoose_imageNo"
        }], s.refundArr = [{
            name: "现金",
            image: "singleChoose_imageYes",
            value: "cash"
        }, {
            name: "会员卡",
            value: "card",
            image: "singleChoose_imageNo"
        }], s.page = 1, s.itemsPerPage = 10, s.pagination = {
            page: s.page,
            itemsPerPage: s.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, s.buyProduct = [], s.total = 0, s.showCodeBox = !0, s._member = "", s.wxFlag = !0, s.buyPayment = "alipay", s.startDate = new Date, s.closeDate = new Date, s.close = function () {
            s.sellFlag = !1, s.refundFlag = !1, s.payFlag = !1, s.total = 0, s.showCodeBox = !0, s.wxFlag = !0, s.auth_code = "", s.moneySelect = !1, s.continueFlag = !1, s.buyProduct = []
        }, s.judgePay = function (a) {
            s.payFlag = !0
        }, s.getNowFormatDate = function (a) {
            var b = "-",
                c = ":",
                d = a.getMonth() + 1,
                e = a.getDate();
            d >= 1 && 9 >= d && (d = "0" + d), e >= 0 && 9 >= e && (e = "0" + e);
            var f = a.getFullYear() + b + d + b + e + " " + a.getHours() + c + a.getMinutes() + c + a.getSeconds();
            return f
        }, s.print = function (a) {
            for (var b = '<div><div><h3 style="font-size:20px">欢迎光临</h3><h3 style="font-size:20px">购买商品消费小票</h3>操作员：' + s.admin + '</h3></div><span>**********************************</span><div><div style="border-bottom: 1px solid #DADADA;"><table style="width: 100%;"><thead><tr><td width="50%">商品名称</td><td width="20%">数量</td><td width="30%">单价</td></tr></thead>', c = 0; c < s.buyProduct.length; c++) b = 0 == c ? b + "<tbody><tr><td>" + s.buyProduct[c].name + "</td><td>" + s.buyProduct[c].num + "</td><td>" + s.buyProduct[c].price + "</td></tr>" : b + "<tr><td>" + s.buyProduct[c].name + "</td><td>" + s.buyProduct[c].num + "</td><td>" + s.buyProduct[c].price + "</td></tr>", c == s.buyProduct.length - 1 && (b = b + "<tr><td>合计</td><td>" + s.total + "</td><td></td></tr></tbody></table></div><span>**********************************</span>");
            if (s.members.cards.length > 0) var d = "" + s.members.cards[0].total;
            else var d = "0"; if (s.members.virtualAccount.expires_in) var e = s.getNowFormatDate(new Date(s.members.virtualAccount.expires_in));
            else var e = "";
            b = b + "<div>消费方式:" + a + "</div><div>现金账户余额:￥" + d + "</div><div>虚拟账户余额:￥" + s.members.virtualAccount.total + "</div><div>有效期:" + e, b = b + "</div><div>消费日期:" + s.getNowFormatDate(new Date) + "</div><span>**********************************</span><div>客户签名:</div>";
            var f = getLodop();
            f.PRINT_INIT(""), f.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), f.SET_PRINTER_INDEXA(-1), f.SET_PRINT_PAGESIZE(3, 800, 100, ""), f.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", b), f.PRINT(), s.close()
        }, s.print1 = function (a) {
            for (var b = '<div><div><h3 style="font-size:20px">欢迎光临</h3><h3 style="font-size:20px">购买商品消费小票</h3>操作员：' + s.admin + '</h3></div><span>**********************************</span><div><div style="border-bottom: 1px solid #DADADA;"><table style="width: 100%;"><thead><tr><td width="50%">商品名称</td><td width="20%">数量</td><td width="30%">单价</td></tr></thead>', c = 0; c < s.buyProduct.length; c++) b = 0 == c ? b + "<tbody><tr><td>" + s.buyProduct[c].name + "</td><td>" + s.buyProduct[c].num + "</td><td>" + s.buyProduct[c].price + "</td></tr>" : b + "<tr><td>" + s.buyProduct[c].name + "</td><td>" + s.buyProduct[c].num + "</td><td>" + s.buyProduct[c].price + "</td></tr>", c == s.buyProduct.length - 1 && (b = b + "<tr><td>合计</td><td>" + s.total + "</td><td></td></tr></tbody></table></div><span>**********************************</span>");
            b = b + "<div>消费方式:" + a + "</div>", b = b + "<div>消费日期:" + s.getNowFormatDate(new Date) + "</div><span>**********************************</span><div>客户签名:</div>";
            var d = getLodop();
            d.PRINT_INIT(""), d.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), d.SET_PRINTER_INDEXA(-1), d.SET_PRINT_PAGESIZE(3, 800, 100, ""), d.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", b), d.PRINT(), s.close()
        }, s.auth_codeCreate = function (a) {
            if (s.promptWARN = !0, s.wordWARN = "支付中", 13 == a.keyCode) switch (s.buyPayment) {
            case "wx":
                var b = {
                    shopProductArr: s.brr,
                    auth_code: s.auth_code,
                    spbill_create_ip: "0.0.0.0"
                };
                j.buyWx(b, function (a) {
                    s.showAuth_codeBox = !1, s.promptOK = !0, s.promptWARN = !1, s.wordOK = "购买成功", clearInterval(s.setIntervalId), s.print1("微信支付"), o(function () {
                        s.promptOK = !1
                    }, 1e3)
                }, function (a) {
                    s.promptERR = !0, s.promptWARN = !1, clearInterval(s.setIntervalId), s.wordERR = a.data.data
                });
                break;
            case "alipay":
                var b = {
                    auth_code: s.auth_code,
                    shopProductArr: s.brr
                };
                l.payProduct(b, function (a) {
                    s.showAuth_codeBox = !1, s.promptOK = !0, s.promptWARN = !1, s.wordOK = "购买成功", clearInterval(s.setIntervalId), s.print1("支付宝支付"), o(function () {
                        s.promptOK = !1
                    }, 1e3)
                }, function (a) {
                    s.promptWARN = !1, s.promptERR = !0, clearInterval(s.setIntervalId), s.wordERR = a.data.data + ",请更新支付码再支付"
                });
                break;
            case "member":
                ;
                n.index({
                    id: "today"
                }, function (a) {
                    r = a.data;
                    var b = t(s.auth_code);
                    if (b) {
                        var c = {
                            _member: b,
                            payment: "member",
                            shopProductArr: s.brr
                        };
                        j.buyProduct(c, function (a) {
                            s.showAuth_codeBox = !1, s.promptWARN = !1, s.promptOK = !0, o(function () {
                                s.promptOK = !1
                            }, 1e3), s.wordOK = "购买成功", i.index({
                                id: b
                            }, function (a) {
                                s.members = a.data.member, s.print("余额支付")
                            }, function (a) {
                                "找不到对象：member" == a.data.data && (s.showMemberInfo = !1, s.promptERR = !0, s.wordERR = "会员不存在")
                            })
                        }, function (a) {
                            s.promptWARN = !1, s.promptERR = !0, s.wordERR = a.data.data
                        })
                    } else c = {
                        cardNo: s.auth_code
                    }, i.indexBycard(c, function (a) {
                        s.members = a.data.member;
                        var b = {
                            _member: a.data.member._id,
                            payment: "member",
                            shopProductArr: s.brr
                        };
                        j.buyProduct(b, function (a) {
                            s.showAuth_codeBox = !1, s.promptWARN = !1, s.promptOK = !0, s.wordOK = "购买成功", s.print("余额支付"), o(function () {
                                s.promptOK = !1
                            }, 1e3)
                        }, function (a) {
                            s.promptWARN = !1, s.promptERR = !0, s.wordERR = a.data.data
                        })
                    }, function (a) {
                        s.promptERR = !0, s.wordERR = "会员不存在"
                    })
                })
            }
        }, s.shut = function () {
            s.showAuth_codeBox = !1, clearInterval(s.setIntervalId), s.brr = [], document.getElementById("auth_code").blur()
        }, s.create = function () {
            s.brr = [];
            for (var a = 0; a < s.buyProduct.length; a++) {
                var b = {
                    _shopProduct: s.buyProduct[a]._id,
                    quantity: 1 * s.buyProduct[a].num
                };
                s.brr.push(b)
            }
            switch (s.buyPayment) {
            case "wx":
            case "alipay":
            case "member":
                s.showAuth_codeBox = !0, s.setIntervalId = setInterval(function () {
                    document.getElementById("auth_code").focus()
                }, 100);
                break;
            case "cash":
                var c = {
                    shopProductArr: s.brr,
                    payment: "cash"
                };
                j.buyProduct(c, function (a) {
                    s.promptWARN = !1, s.promptOK = !0, s.wordOK = "购买成功", s.print1("现金支付"), o(function () {
                        s.promptOK = !1
                    }, 1e3)
                }, function (a) {
                    s.promptWARN = !1, s.promptERR = !0, s.wordERR = a.data.data
                })
            }
        }, s.checkMember = function (a, b, c) {
            if (!s.memberTelOrCard && !c) return s.promptERR = !0, void(s.wordERR = "请填写会员卡号/手机号");
            if (c) i.show({
                id: c
            }, function (a) {
                s.members = a.data.member, s.showMemberInfo = !0, s._member = s.members._id
            }, function (a) {});
            else {
                var d = {};
                n.index({
                    id: "today"
                }, function (c) {
                    r = c.data;
                    var e = t(s.memberTelOrCard);
                    e ? i.index({
                        id: e
                    }, function (c) {
                        s.members = c.data.member, s._member = e, s.showMemberInfo = !0, s.isReal = c.data.member.isReal, s.name = c.data.member.name, s.phone = c.data.member.tel, a && s.print(b)
                    }, function (a) {
                        "找不到对象：member" == a.data.data && (s.showMemberInfo = !1, s.promptERR = !0, s.wordERR = "会员不存在")
                    }) : (d = {
                        cardNo: s.memberTelOrCard
                    }, i.indexBycard(d, function (c) {
                        s.members = c.data.member, s._member = s.members._id, s.showMemberInfo = !0, s.isReal = c.data.member.isReal, s.name = c.data.member.name, s.phone = c.data.member.tel, a && s.print(b)
                    }, function (a) {
                        "找不到对象：member" == a.data.data && (s.showMemberInfo = !1, s.promptERR = !0, s.wordERR = "会员不存在")
                    }))
                })
            }
        }, s.resert = function () {
            s.memberTelOrCard = "", s.members = null, document.getElementById("code").focus()
        }, s.getShopProduct = function () {
            s.pName ? s.selectFlag = !0 : s.selectFlag = !1;
            var a = {
                mix: s.pName
            };
            j.index(a, function (a) {
                s.products = a.data.shopProducts
            }, function (a) {})
        }, s.refund = function () {
            var a = {
                total: 1 * s.refundPrice
            };
            j.refund({
                controller: s.rId
            }, a, function (a) {
                s.close(), s.promptOK = !0, o(function () {
                    s.promptOK = !1
                }, 1e3), s.wordOK = "退款成功", s.getRecord()
            }, function (a) {})
        }, s.pageChanged = function () {
            s.getRecord()
        }, s.getRecord = function () {
            o(function () {
                s.startDateFlag = !1, s.closeDateFlag = !1;
                var a = {
                    page: s.pagination.page,
                    itemsPerPage: s.pagination.itemsPerPage,
                    statuses: ["buyShopProduct", "refundShopProduct"],
                    startDate: s.startDate.getTime(),
                    endDate: s.closeDate.getTime()
                };
                s.searchProductName && (a = _.merge(a, {
                    shopProductName: s.searchProductName
                })), k.index(a, function (a) {
                    s.records = a.data.records, s.recordTotal = 0, _.each(s.records, function (a) {
                        "refundShopProduct" == a.status ? s.recordTotal = s.recordTotal - a.cost : "buyShopProduct" == a.status && (s.recordTotal = s.recordTotal + a.cost)
                    }), s.recordTotal = s.recordTotal.toFixed(2);
                    var b = a.data.count;
                    s.pagination.totalItems = b, s.pagination.numPages = b / s.itemsPerPage
                })
            }, 100)
        }, s.addListByDown = function (a) {
            if (13 == a.keyCode) {
                var b = {
                    mix: s.pName
                };
                j.index(b, function (a) {
                    s.products = a.data.shopProducts, s.products && 1 == s.products.length && s.products[0].isUsed && s.add(s.products[0])
                }, function (a) {})
            }
        }, s.addList = function () {
            s.pName ? s.selectFlag = !0 : s.selectFlag = !1;
            var a = {
                mix: s.pName
            };
            j.index(a, function (a) {
                s.products = a.data.shopProducts, s.products && 1 == s.products.length && s.products[0].isUsed && s.add(s.products[0])
            }, function (a) {})
        }, s.getPrByCode = function () {}, s.changeNum = function (a, b) {
            if (a.num = 1 * a.num, "add" == b) a.num = a.num + 1, s.total = s.total + 1 * a.price, a.tot = Math.floor(a.num * a.price * 100) / 100;
            else if (s.total = s.total - 1 * a.price, s.arr = [], 1 == a.num) {
                for (var c = 0; c < s.buyProduct.length; c++) a._id != s.buyProduct[c]._id && s.arr.push(s.buyProduct[c]);
                s.buyProduct = s.arr
            } else a.num = a.num - 1, a.tot = Math.floor(a.num * a.price * 100) / 100;
            s.total = s.dealNumber(s.total)
        }, s.dealNumber = function (a, b) {
            var c = a.toFixed(3);
            return b ? c.substring(0, c.lastIndexOf(".") + 3) : parseFloat(c.substring(0, c.lastIndexOf(".") + 3))
        }, s.calPrice = function (a) {
            s.total = 0;
            for (var b = 0; b < s.buyProduct.length; b++) s.buyProduct[b]._id == a._id ? s.buyProduct[b].num && (s.total = s.total + s.buyProduct[b].num * s.buyProduct[b].price, s.buyProduct[b].tot = Math.floor(s.buyProduct[b].num * s.buyProduct[b].price * 100) / 100) : s.total = s.total + s.buyProduct[b].num * s.buyProduct[b].price;
            s.total = s.dealNumber(s.total)
        }, s.canPrice = function (a) {
            if (s.total = 0, s.arr = [], !a.num || 0 == a.num) {
                for (var b = 0; b < s.buyProduct.length; b++) a._id != s.buyProduct[b]._id && s.arr.push(s.buyProduct[b]);
                s.buyProduct = s.arr
            }
            for (var b = 0; b < s.buyProduct.length; b++) s.total = s.total + s.buyProduct[b].num * s.buyProduct[b].price;
            s.total = s.dealNumber(s.total)
        }, s.add = function (a) {
            s.selectFlag = !1, s.pName = "";
            for (var b = 0; b < s.buyProduct.length; b++)
                if (s.buyProduct[b]._id == a._id) return void s.changeNum(s.buyProduct[b], "add");
            s.total = s.total + 1 * a.price, a.num = 1, a.tot = Math.floor(a.num * a.price * 100) / 100, s.buyProduct.push(a), s.total = s.dealNumber(s.total)
        }, s.choosePayment = function (a) {
            _.each(s.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", s.buyPayment = a.value, "alipay" == s.buyPayment || "wx" == s.buyPayment ? s.showCodeBox = !0 : s.showCodeBox = !1
        }, s.choosePayment2 = function (a) {
            _.each(s.paymentArr2, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", s.buyPayment = a.value, "alipay" == s.buyPayment || "wx" == s.buyPayment ? s.showCodeBox = !0 : s.showCodeBox = !1
        }, s.chooseRefund = function (a) {
            _.each(s.refundArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", s.refund = a.value
        }, s.changeTitle = function (a) {
            switch (s.titleState = "", a) {
            case "sale":
                s.titleState = "sale", f.go("crd-sell.sale", {
                    state: "sale"
                });
                break;
            default:
                s.titleState = "record", f.go("crd-sell.record", {
                    state: "record"
                })
            }
            v()
        };
        var t = function (a) {
                var b = a.split("|");
                if (3 != b.length) return !1;
                var a = b[0],
                    c = b[1].split(""),
                    d = b[2],
                    e = d,
                    f = parseInt(r / 6e4).toString().split("");
                if (c.length < f.length) return !1;
                for (var g = 0; g < f.length; g++) d = d.replace(f[g], c[g]);
                return d == a ? e : !1
            },
            u = function () {
                e.get({}, function (a) {
                    s.admin = a.data.user.name
                }, function () {})
            };
        s.choose = function (a) {
            a.select = !0, s.choosedCardFlag = !1, s.cardId = a._id, s.cardName = a.name + "(" + a.price + "元)", s.realPrice = a.realPrice
        }, s.chooseType = function (a) {
            for (var b = 0; b < s.types.length; b++) s.types[b].select = !1;
            a.select = !0, s.choosedTypeFlag = !1, s.typeName = a.name
        };
        s.finish = function () {
            return s.needFlag && !s.cardNum ? void(s.cardFlag = !0) : (s.payFlag = !0, s.defindFlag = !1, void(s.moneyFlag = !0))
        };
        s.waySelect = function (a) {
            s.chargeVenue = "", "money" == a ? (s.moneySelect = !0, s.cardSelect = !1, s.speSelect = !1) : "card" == a ? (s.moneySelect = !1, s.cardSelect = !0, s.speSelect = !1) : "speCard" == a && (s.moneySelect = !1, s.cardSelect = !1, s.speSelect = !0, p.index({
                isUsed: !0
            }, function (a) {
                s.venues_clone = a.data.venues, _.each(s.venues_clone, function (a) {
                    a.image = "singleChoose_imageNo2"
                }), s.chargeVenue = s.venues_clone[0], s.venues_clone[0].image = "singleChoose_imageYes2"
            }, function () {}))
        }, s.openShowRechargeBox = function (a) {
            s.needIdCard = a, s.continueFlag = !0, s.paymentArr2 = [{
                name: "支付宝",
                value: "alipay",
                image: "singleChoose_imageYes"
            }, {
                name: "微信",
                value: "wx",
                image: "singleChoose_imageNo"
            }, {
                name: "现金",
                value: "cash",
                image: "singleChoose_imageNo"
            }, {
                name: "支票",
                value: "check",
                image: "singleChoose_imageNo"
            }], s.buyPayment = "alipay", s.cardName = s.cards[0].name + "(" + s.cards[0].price + "元)", s.cardId = s.cards[0]._id, s.moneySelect = !0, s.cardSelect = !1, s.speSelect = !1, s.chargeCardNum = "", s.chargeCardPassword = ""
        }, s.chooseChargeVenue = function (a) {
            s.chargeVenue ? s.chargeVenue._id == a._id ? (s.chargeVenue.image = "singleChoose_imageNo2", s.chargeVenue = "") : (s.chargeVenue.image = "singleChoose_imageNo2", s.chargeVenue = a, s.chargeVenue.image = "singleChoose_imageYes2") : (s.chargeVenue = a, s.chargeVenue.image = "singleChoose_imageYes2")
        };
        var v = function () {
            s.getRecord(), u()
        };
        s.searchProduct = function () {
            s.getRecord()
        }, s.enterCheck = function (a) {
            13 == a.keyCode && s.checkMember()
        }, v()
    }
    angular.module("fieldApp").controller("CrdSellCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "ShopProduct", "Record", "Alipay", "Card", "Time", "$timeout", "Venue", "Tucard"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this,
            k = function () {
                j.page = 1, j.itemsPerPage = 10, j.pagination = {
                    page: j.page,
                    itemsPerPage: j.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            l = function () {
                j.startDate = new Date((new Date).setDate(1)), j.closeDate = new Date
            },
            m = function () {
                var a = {
                    page: j.pagination.page,
                    itemsPerPage: j.pagination.itemsPerPage,
                    startDate: j.startDate.getTime(),
                    endDate: j.closeDate.getTime(),
                    status: "purchase"
                };
                j.searchProductName && (a = _.merge(a, {
                    mix: j.searchProductName
                })), j.orderNo && (a = _.merge(a, {
                    orderNo: j.orderNo
                })), i.index(a, function (a) {
                    j.orders = a.data.records, _.each(j.orders, function (a) {
                        a.cost = dealNumber(100 * a.purchasePrice) * a.quantity / 100, a.isCancel ? (a.state = "已撤销", a.canChange = !1) : a.isCheck ? (a.state = "已确认", a.canChange = !1) : (a.state = "等待确认", a.canChange = !0)
                    });
                    var b = a.data.count;
                    j.pagination.totalItems = b, j.pagination.numPages = b / j.itemsPerPage
                })
            },
            n = function () {
                k(), l(), m()
            };
        j.closeDateBox = function () {
            j.startDateFlag = !1, j.closeDateFlag = !1, setTimeout(function () {
                m()
            }, 100)
        }, j.check = function () {
            k(), m()
        }, j.resert = function () {
            j.orderNo = "", j.searchProductName = "", m()
        }, j.pageChanged = function () {
            m()
        }, j.enterCheck = function (a) {
            13 == a.keyCode && j.checkMember()
        }, j.closePrompt = function () {
            j.promptERR = !1, j.promptOK = !1, j.promptWARN = !1
        }, n()
    }
    angular.module("fieldApp").controller("CrdPurchaseRecordCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "PurchaseRecord"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this,
            l = function () {
                k.chooseAll = "manyChoose_imageYes2", k.product = {
                    _shopBasic: "",
                    showName: "",
                    name: "",
                    misCode: "",
                    quantity: "",
                    purchasePrice: "",
                    price: 0,
                    _supply: "",
                    supplyName: ""
                }, k.products = [], k.showProducts = [], k.commiteCount = 0, k.workerName = "请选择柜员"
            },
            m = function () {
                k.showWorkersBox = !1
            },
            n = function () {
                l(), o()
            },
            o = function () {
                e.index({
                    role: "checkStand"
                }, function (a) {
                    k.workers = a.data.users
                }, function () {})
            };
        k.checkProduct = function () {
            i.index({
                mix: k.product.showName
            }, function (a) {
                k.products = a.data.shopBasics, k.products.length > 0 && (k.showProductsBox = !0)
            }, function () {})
        }, k.chooseProduct = function (a) {
            k.showProductsBox = !1, k.product._shopBasic = a._id, k.product.showName = a.name, k.product.name = a.name, k.product.misCode = a.misCode, k.product._supply = a._supply, k.product.supplyName = a.supplyName, k.product.price = a.price
        }, k.resert = function () {
            k.product = {
                _shopBasic: "",
                showName: "",
                name: "",
                misCode: "",
                quantity: "",
                purchasePrice: "",
                price: 0,
                _supply: "",
                supplyName: ""
            }
        }, k.closePrompt = function () {
            k.promptERR = !1, k.promptOK = !1, k.promptWARN = !1
        }, k.addToForm = function () {
            if (isNaN(k.product.quantity) || isNaN(k.product.purchasePrice)) return k.promptERR = !0, void(k.wordERR = "请输入数字");
            var a = {
                _shopBasic: k.product._shopBasic,
                name: k.product.name,
                misCode: k.product.misCode,
                quantity: parseFloat(k.product.quantity),
                purchasePrice: parseFloat(k.product.purchasePrice),
                price: parseFloat(k.product.price),
                _supply: k.product._supply,
                supplyName: k.product.supplyName,
                cost: dealNumber(k.product.purchasePrice * k.product.quantity),
                image: "manyChoose_imageYes2"
            };
            k.showProducts.push(a), k.commiteCount++, k.resert()
        }, k.chooseAllDoc = function () {
            k.commiteCount < k.showProducts.length ? (k.commiteCount = k.showProducts.length, k.chooseAll = "manyChoose_imageYes2", _.each(k.showProducts, function (a) {
                a.image = "manyChoose_imageYes2"
            })) : (k.commiteCount = 0, k.chooseAll = "manyChoose_imageNo2", _.each(k.showProducts, function (a) {
                a.image = "manyChoose_imageNo2"
            }))
        }, k.chooseDoc = function (a) {
            "manyChoose_imageNo2" == a.image ? (a.image = "manyChoose_imageYes2", k.commiteCount++) : (a.image = "manyChoose_imageNo2", k.commiteCount--), k.commiteCount < k.showProducts.length ? k.chooseAll = "manyChoose_imageNo2" : k.chooseAll = "manyChoose_imageYes2"
        }, k.chooseWorker = function (a) {
            k.workerName = a.name, k._toWorker = a._id, k.chooseWorkerFlag = !1
        }, k.create = function () {
            var b = [];
            _.each(k.showProducts, function (a) {
                "manyChoose_imageYes2" == a.image && b.push(a)
            }), j.enter({}, {
                shopArr: b
            }, function () {
                j.transfer({}, {
                    _toWorker: k._toWorker
                }, function () {
                    m(), l(), k.promptOK = !0, k.wordOK = "进货成功", setTimeout(function () {
                        a.$apply(function () {
                            k.promptOK = !1
                        })
                    }, 1e3)
                }, function () {})
            }, function (a) {
                console.log(a), k.promptERR = !0, k.wordERR = a.data.data
            })
        }, k.close = function () {
            m(), l()
        }, k.enterCheck = function (a) {
            13 == a.keyCode && k.checkProduct()
        }, k.closePrompt = function () {
            k.promptERR = !1, k.promptOK = !1, k.promptWARN = !1
        }, n()
    }
    angular.module("fieldApp").controller("CrdPurchaseCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "ShopBasic", "ShopProduct"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this,
            k = function () {
                j.page = 1, j.itemsPerPage = 10, j.pagination = {
                    page: j.page,
                    itemsPerPage: j.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            l = function () {
                j.startDate = new Date((new Date).setDate(1)), j.closeDate = new Date
            },
            m = function () {
                var a = {
                    page: j.pagination.page,
                    itemsPerPage: j.pagination.itemsPerPage,
                    startDate: j.startDate.getTime(),
                    endDate: j.closeDate.getTime(),
                    status: "return"
                };
                j.searchProductName && (a = _.merge(a, {
                    mix: j.searchProductName
                })), j.orderNo && (a = _.merge(a, {
                    orderNo: j.orderNo
                })), i.index(a, function (a) {
                    j.orders = a.data.records, _.each(j.orders, function (a) {
                        a.cost = dealNumber(100 * a.purchasePrice) * a.quantity / 100, a.isCancel ? (a.state = "已撤销", a.canChange = !1) : a.isCheck ? (a.state = "已确认", a.canChange = !1) : (a.state = "等待确认", a.canChange = !0)
                    });
                    var b = a.data.count;
                    j.pagination.totalItems = b, j.pagination.numPages = b / j.itemsPerPage
                })
            },
            n = function () {
                k(), l(), m()
            };
        j.closeDateBox = function () {
            j.startDateFlag = !1, j.closeDateFlag = !1, setTimeout(function () {
                m()
            }, 100)
        }, j.check = function () {
            k(), m()
        }, j.resert = function () {
            j.orderNo = "", j.searchProductName = "", m()
        }, j.pageChanged = function () {
            m()
        }, j.enterCheck = function (a) {
            13 == a.keyCode && j.checkMember()
        }, j.closePrompt = function () {
            j.promptERR = !1, j.promptOK = !1, j.promptWARN = !1
        }, n()
    }
    angular.module("fieldApp").controller("CrdReturnRecordCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "PurchaseRecord"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this,
            k = function () {
                j.page = 1, j.itemsPerPage = 10, j.pagination = {
                    page: j.page,
                    itemsPerPage: j.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            l = function () {
                j.startDate = new Date((new Date).setDate(1)), j.closeDate = new Date(Date.now() - 864e5)
            },
            m = function () {
                var a = {
                    page: j.pagination.page,
                    itemsPerPage: j.pagination.itemsPerPage,
                    startDate: j.startDate.getTime(),
                    endDate: j.closeDate.getTime()
                };
                i.index(a, function (a) {
                    j.forms = a.data.shopforms;
                    var b = a.data.count;
                    j.pagination.totalItems = b, j.pagination.numPages = b / j.itemsPerPage
                })
            },
            n = function () {
                k(), l(), m()
            };
        j.closeDateBox = function () {
            j.startDateFlag = !1, j.closeDateFlag = !1, setTimeout(function () {
                m()
            }, 100)
        }, j.pageChanged = function () {
            m()
        }, j["export"] = function () {
            var a = {
                all: "all",
                startDate: j.startDate.getTime(),
                endDate: j.closeDate.getTime()
            };
            j.dateName = "", j.dateName += j.startDate.getFullYear() + "年", j.dateName += j.startDate.getMonth() + 1 > 9 ? j.startDate.getMonth() + 1 + "月" : "0" + (j.startDate.getMonth() + 1) + "月", j.dateName += j.startDate.getDate() > 9 ? j.startDate.getDate() + "日-" : "0" + j.startDate.getDate() + "日-", j.dateName += j.closeDate.getFullYear() + "年", j.dateName += j.closeDate.getMonth() + 1 > 9 ? j.closeDate.getMonth() + 1 + "月" : "0" + (j.closeDate.getMonth() + 1) + "月", j.dateName += j.closeDate.getDate() > 9 ? j.closeDate.getDate() + "日" : "0" + j.closeDate.getDate() + "日", i.index(a, function (a) {
                j.exportforms = a.data.shopforms;
                var b = j.dateName + "的库存盘存表";
                setTimeout(function () {
                    execl1("alltable", b)
                }, 100)
            })
        }, j.closePrompt = function () {
            j.promptERR = !1, j.promptOK = !1, j.promptWARN = !1
        }, n()
    }
    angular.module("fieldApp").controller("CrdShopFormCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "ShopForm"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this,
            k = function () {
                j.page = 1, j.itemsPerPage = 10, j.pagination = {
                    page: j.page,
                    itemsPerPage: j.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            l = function () {
                j.showWorkerName = "选择柜员", j.searchWorker = "", j.returnQuantity = ""
            },
            m = function () {
                j.showReturnBox = !1
            },
            n = function () {
                var a = {
                    page: j.pagination.page,
                    itemsPerPage: j.pagination.itemsPerPage
                };
                if (j.searchWorker) switch (j.searchWorker) {
                case "all":
                    break;
                case "no":
                    a = _.merge(a, {
                        state: "no"
                    });
                    break;
                default:
                    a = _.merge(a, {
                        _worker: j.searchWorker
                    })
                }
                j.searchProductName && (a = _.merge(a, {
                    mix: j.searchProductName
                })), i.index(a, function (a) {
                    j.products = a.data.shopProducts, _.each(j.products, function (a) {
                        switch (a.status) {
                        case "sale":
                            a.status = "售卖中";
                            break;
                        case "return":
                            a.status = "报废中";
                            break;
                        case "transfer":
                            a.status = "交接中"
                        }
                    });
                    var b = a.data.count;
                    j.pagination.totalItems = b, j.pagination.numPages = b / j.itemsPerPage
                })
            },
            o = function () {
                e.index({
                    role: "checkStand"
                }, function (a) {
                    j.workers = [{
                        name: "全部",
                        _id: "all"
                    }, {
                        name: "暂无柜员",
                        _id: "no"
                    }].concat(a.data.users)
                }, function () {})
            },
            p = function () {
                k(), l(), n(), o()
            };
        j.chooseWorkerName = function (a) {
            j.showChooseWorkerBox = !1, j.showWorkerName = a.name, j.searchWorker = a._id, n()
        }, j.openShowReturnBox = function (a) {
            j._returnProduct = a, j.showReturnBox = !0
        }, j.check = function () {
            if (isNaN(j.returnQuantity)) return j.promptERR = !0, void(j.wordERR = "请输入数字");
            var b = [{
                _shopProduct: j._returnProduct,
                returnQuantity: parseFloat(j.returnQuantity)
            }];
            i.returnGood({}, {
                shopArr: b
            }, function (b) {
                i.returnCheck({}, {
                    orderIds: [b.data.order._id]
                }, function () {
                    l(), m(), j.promptOK = !0, j.wordOK = "报废确认成功", n(), setTimeout(function () {
                        a.$apply(function () {
                            j.promptOK = !1
                        })
                    }, 1e3)
                }, function () {})
            }, function (a) {
                console.log(a), j.promptERR = !0, j.wordERR = a.data.data
            })
        }, j.pageChanged = function () {
            n()
        }, j.searchProduct = function () {
            n()
        }, j.enterCheck = function (a) {
            13 == a.keyCode && n()
        }, j["export"] = function () {
            var a = {
                all: "all"
            };
            if (j.searchWorker) switch (j.searchWorker) {
            case "all":
                break;
            case "no":
                a = _.merge(a, {
                    state: "no"
                });
                break;
            default:
                a = _.merge(a, {
                    _worker: j.searchWorker
                })
            }
            j.searchProductName && (a = _.merge(a, {
                mix: j.searchProductName
            })), i.index(a, function (a) {
                j.exportProducts = a.data.shopProducts;
                var b = "柜员库存表";
                setTimeout(function () {
                    execl1("alltable", b)
                }, 100)
            })
        }, j.close = function () {
            m(), l()
        }, j.closePrompt = function () {
            j.promptERR = !1, j.promptOK = !1, j.promptWARN = !1
        }, p()
    }
    angular.module("fieldApp").controller("CrdStockCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "ShopProduct"]
}(),
function () {
    "use strict";

    function a(a) {
        a.state("csd-field-book", {
            params: {
                value: "field",
                sencond: "book"
            },
            url: "/checkstand/field/book",
            templateUrl: "app/checkstand/field/once/field-book.html",
            controller: "CsdFieldBookCtrl",
            controllerAs: "csdFieldBookCtrl",
            "abstract": !0
        }).state("csd-field-book.once", {
            url: "/once?state",
            templateUrl: "app/checkstand/field/once/field-book-once.html"
        }).state("csd-field-book.flexible", {
            url: "/flexible?state",
            templateUrl: "app/checkstand/field/once/field-book-flexible.html"
        }).state("csd-field-longbook", {
            params: {
                value: "field",
                sencond: "book"
            },
            url: "/checkstand/field/longbook",
            templateUrl: "app/checkstand/field/long/field-book-long.html",
            controller: "CsdFieldLongBookCtrl",
            controllerAs: "csdFieldLongBookCtrl"
        }).state("csd-field-cancelbook", {
            params: {
                value: "field",
                sencond: "book"
            },
            url: "/checkstand/field/cancelbook",
            templateUrl: "app/checkstand/field/cancel/field-book-cancel.html",
            controller: "CsdFieldCancelBookCtrl",
            controllerAs: "csdFieldCancelBookCtrl"
        }).state("csd-product", {
            params: {
                value: "field",
                sencond: "product"
            },
            url: "/checkstand/product",
            templateUrl: "app/checkstand/product/product.html",
            controller: "CsdProductCtrl",
            controllerAs: "csdProductCtrl",
            "abstract": !0
        }).state("csd-product.sale", {
            url: "/sale?state",
            templateUrl: "app/checkstand/product/product-sale.html"
        }).state("csd-product.record", {
            url: "/record?state",
            templateUrl: "app/checkstand/product/product-record.html"
        }).state("csd-ticket", {
            params: {
                value: "field",
                sencond: "ticket"
            },
            url: "/csd/ticket",
            templateUrl: "app/checkstand/field/ticket/ticket.html",
            controller: "CsdTicketCtrl",
            controllerAs: "csdTicketCtrl",
            "abstract": !0
        }).state("csd-ticket.ticket", {
            url: "/sale?state",
            templateUrl: "app/checkstand/field/ticket/ticket-sale.html"
        }).state("csd-ticket.record", {
            url: "/record?state",
            templateUrl: "app/checkstand/field/ticket/ticket-record.html"
        }).state("csd-finance-cashall", {
            params: {
                value: "finance"
            },
            url: "/checkstand/finance/cashall",
            templateUrl: "app/checkstand/finance/cashall/finance-cashall.html",
            controller: "CsdFinanceCashallCtrl",
            controllerAs: "csdFinanceCashallCtrl"
        }).state("csd-finance-field", {
            params: {
                value: "finance"
            },
            url: "/checkstand/finance/field",
            templateUrl: "app/checkstand/finance/field/finance-field.html",
            controller: "CsdFinanceFieldCtrl",
            controllerAs: "csdFinanceFieldCtrl"
        }).state("csd-finance-shop", {
            params: {
                value: "finance"
            },
            url: "/checkstand/finance/shop",
            templateUrl: "app/checkstand/finance/shop/finance-shop.html",
            controller: "CsdFinanceShopCtrl",
            controllerAs: "csdFinanceShopCtrl"
        }).state("csd-finance-preppay", {
            params: {
                value: "finance"
            },
            url: "/csd/finance/preppay",
            templateUrl: "app/checkstand/finance/preppay/preppay-view.html",
            controller: "CsdFinancePreppayCtrl",
            controllerAs: "csdFinancePreppayCtrl"
        }).state("csd-member", {
            params: {
                value: "member"
            },
            url: "/checkstand/member",
            templateUrl: "app/checkstand/member/member.html",
            controller: "CsdMemberCtrl",
            controllerAs: "csdMemberCtrl"
        }).state("csd-docord", {
            params: {
                value: "docord"
            },
            url: "/checkstand/docord",
            templateUrl: "app/checkstand/member/member-docord.html",
            controller: "CsdDocordCtrl",
            controllerAs: "csdDocordCtrl"
        }).state("csd-member-detail", {
            params: {
                value: "member"
            },
            url: "/checkstand/member/:id?searchName",
            templateUrl: "app/checkstand/member/member-detail.html",
            controller: "CsdMemberDetailCtrl",
            controllerAs: "csdMemberDetailCtrl",
            "abstract": !0
        }).state("csd-member-detail.info", {
            url: "/member/detail/info?state",
            templateUrl: "app/checkstand/member/member-detail-info.html"
        }).state("csd-member-detail.record", {
            url: "/member/detail/record",
            templateUrl: "app/checkstand/member/member-detail-record.html"
        }).state("csd-inventory", {
            params: {
                value: "inventory"
            },
            url: "/csd/inventory",
            templateUrl: "app/checkstand/shop/inventory.html",
            controller: "CsdInventoryCtrl",
            controllerAs: "csdInventoryCtrl",
            "abstract": !0
        }).state("csd-inventory.stock", {
            url: "/stock?state",
            templateUrl: "app/checkstand/shop/inventory-stock.html"
        }).state("csd-inventory.record", {
            url: "/record?state",
            templateUrl: "app/checkstand/shop/inventory-record.html"
        }).state("csd-sell", {
            params: {
                value: "sell",
                sencond: "sale"
            },
            url: "/csd/sell",
            templateUrl: "app/checkstand/shop/sell.html",
            controller: "CsdSellCtrl",
            controllerAs: "csdSellCtrl",
            "abstract": !0
        }).state("csd-sell.sale", {
            url: "/sale?state",
            templateUrl: "app/checkstand/shop/sell-sale.html"
        }).state("csd-sell.record", {
            url: "/record?state",
            templateUrl: "app/checkstand/shop/sell-record.html"
        }).state("csd-stock-transfer", {
            params: {
                value: "sell",
                sencond: "stock"
            },
            url: "/csd/stock/transfer",
            templateUrl: "app/checkstand/stock/stock-transfer.html",
            controller: "CsdStockTransferCtrl",
            controllerAs: "csdStockTransferCtrl"
        }).state("csd-stock-receive", {
            params: {
                value: "sell",
                sencond: "stock"
            },
            url: "/csd/stock/receive",
            templateUrl: "app/checkstand/stock/stock-receive.html",
            controller: "CsdStockReceiveCtrl",
            controllerAs: "csdStockReceiveCtrl"
        }).state("csd-old", {
            params: {
                value: "old"
            },
            url: "/csd/old",
            templateUrl: "app/checkstand/old/old.html",
            controller: "CsdOldCtrl",
            controllerAs: "csdOldCtrl",
            "abstract": !0
        }).state("csd-old.member", {
            url: "/member?state",
            templateUrl: "app/checkstand/old/old-member.html"
        }).state("csd-old.record", {
            url: "/record?state",
            templateUrl: "app/checkstand/old/old-record.html"
        }).state("csd-setting-person", {
            params: {
                value: "setting",
                sencond: "person"
            },
            url: "/checkstand/setting/person",
            templateUrl: "app/checkstand/setting/setting-person.html",
            controller: "CsdSettingPersonCtrl",
            controllerAs: "csdSettingPersonCtrl"
        })
    }
    angular.module("fieldApp").config(a), a.$inject = ["$stateProvider"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
        var q = this;
        q.titleState = f.params.state || "once", q.searchVenueId, q.searchItemId, q.searchPayment;
        var r = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            },
            s = function (a) {
                return a = new Date(1e3 * parseInt(a / 1e3)), a.setHours(0), a.setMinutes(0), a.setSeconds(0), a
            },
            t = function () {
                q.showChooseVenueBox = !1, q.showChooseItemBox = !1, q.showChooseStartDateBox = !1, q.showChooseEndDateBox = !1, q.showBasicInfoBox = !1, q.showchooseOnceTypeBox = !1, q.deleteFlag = !1, q.showLongRefundBox = !1, q.showInfoBox = !1, q.showPaymentBox = !1, q.showChooseFieldBox = !1, q.showRefundPrice = !1, q.promptDELETE = !1, q.showChoosePageBox = !1
            },
            u = function () {
                q.showVenueName = "选择场馆", q.showItemName = "选择项目", q.showFieldName = "选择场地", q.showPageName = "10", q.searchVenueId = "", q.searchItemId = "", q.searchFieldId = "", q.searchPageValue = "", q.cancelOrderIdArr = [], q.refundPrice = 0, q.sendNum = "", q.allImage = "manyChoose_imageNo2", q.nowImage = "manyChoose_imageNo2", q.refundTypes = [{
                    name: "按退款规则",
                    image: "singleChoose_imageYes"
                }, {
                    name: "自定义退款金额",
                    image: "singleChoose_imageNo"
                }], q.refundType = "按退款规则", q.states = [{
                    name: "全部",
                    value: "all"
                }, {
                    name: "未消费",
                    value: "noOpen"
                }, {
                    name: "已消费",
                    value: "hasOpen"
                }, {
                    name: "正常撤销",
                    value: "hasCancel"
                }, {
                    name: "违约撤销",
                    value: "noPromiseCancel"
                }, {
                    name: "售后撤销",
                    value: "afterSaleCancel"
                }], q.showStateName = "订单状态", q.searchStateValue = "", q.froms = [{
                    name: "全部",
                    value: "all"
                }, {
                    name: "普通(柜员)",
                    value: "once_worker"
                }, {
                    name: "普通(微信)",
                    value: "once_wx"
                }, {
                    name: "长包预订",
                    value: "long"
                }, {
                    name: "培训预订",
                    value: "train"
                }], q.showFromName = "订单来源", q.searchFromValue = "", q.sortByKey = "timeUp", q.pageArr = [{
                    name: "10",
                    value: 10
                }, {
                    name: "20",
                    value: 20
                }, {
                    name: "50",
                    value: 50
                }, {
                    name: "100",
                    value: 100
                }], q.searchPageValue = 10, setTimeout(function () {
                    q.startDate = new Date(new Date), q.endDate = new Date(new Date)
                }, 100)
            },
            v = function () {
                q.page = 1, q.itemsPerPage = q.searchPageValue ? q.searchPageValue : 10, q.pagination = {
                    page: q.page,
                    itemsPerPage: q.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            };
        q.chooseObject = function (a) {
            q.objectName = a.name, q.chooseObjectFlag = !1, q._user = a._id
        }, q.send = function () {
            var b = {
                _user: q._user,
                _orderlist: q.cancelOrderId
            };
            p.send(b, function (b) {
                q.sendToFlag = !1, q.promptOK = !0, q.wordOK = "发送成功", setTimeout(function () {
                    a.$apply(function () {
                        q.promptOK = !1
                    })
                }, 1e3)
            }, function (a) {
                q.promptERR = !0, q.wordERR = a.data.data
            })
        };
        var w = function () {
                var a = {
                    role: "fieldManager"
                };
                e.index(a, function (a) {
                    q.users = a.data.users, q.users.length > 0 && (q.objectName = q.users[0].name, q._user = q.users[0]._id)
                }, function () {})
            },
            x = function () {
                e.get({}, function (a) {
                    "organization" == a.data.user.role ? q.organization = a.data.user : e.getOrgInfo({
                        id: a.data.user._organization
                    }, function (a) {
                        q.organization = a.data.user
                    }, function () {})
                }, function () {})
            },
            y = function () {
                u(), v(), z(), A(), C(), w(), x()
            },
            z = function () {
                m.index({
                    isUsed: !0
                }, function (a) {
                    q.items = [{
                        name: "全部"
                    }].concat(a.data.items)
                }, function () {})
            },
            A = function (a) {
                l.index({
                    isUsed: !0
                }, function (a) {
                    q.venues = [{
                        name: "全部"
                    }].concat(a.data.venues)
                }, function () {})
            },
            B = function () {
                var a = {
                    _venue: q.searchVenueId,
                    _item: q.searchItemId,
                    sortValue: "asc"
                };
                j.index(a, function (a) {
                    q.fields = [{
                        name: "全部"
                    }].concat(a.data.fields)
                }, function () {})
            };
        q.sortBy = function (a) {
            q.sortByKey = a, C()
        };
        var C = function () {
                var a = {
                    page: q.pagination.page,
                    itemsPerPage: q.pagination.itemsPerPage,
                    isCancel: "all"
                };
                q.searchStateValue && (a = _.merge(a, {
                    status: q.searchStateValue
                })), q.searchStateSpeValue && (a = _.merge(a, {
                    statusSpe: q.searchStateSpeValue
                })), q.searchFromValue && (a = _.merge(a, {
                    from: q.searchFromValue
                })), "timeUp" == q.sortByKey && (a = _.merge(a, {
                    sort: "startDate",
                    sortValue: "asc"
                })), "timeDown" == q.sortByKey && (a = _.merge(a, {
                    sort: "startDate"
                })), "orderUp" == q.sortByKey && (a = _.merge(a, {
                    sort: "createDate",
                    sortValue: "asc"
                })), "orderDown" == q.sortByKey && (a = _.merge(a, {
                    sort: "createDate"
                })), a = q.startDate ? _.merge(a, {
                    startDate: q.startDate.getTime()
                }) : _.merge(a, {
                    startDate: (new Date).getTime()
                }), q.endDate && "结束时间" != q.endDate && (a = _.merge(a, {
                    endDate: q.endDate.getTime()
                })), q.searchOrderName && (a = _.merge(a, {
                    mix: q.searchOrderName
                })), q.searchOrderRemark && (a = _.merge(a, {
                    remark: q.searchOrderRemark
                })), q.searchVenueId && (a = _.merge(a, {
                    _venue: q.searchVenueId
                })), q.searchItemId && (a = _.merge(a, {
                    _item: q.searchItemId
                })), q.searchFieldId && (a = _.merge(a, {
                    _field: q.searchFieldId
                })), k.index(a, function (a) {
                    q.orders = a.data.orderLists;
                    var b = s((new Date).getTime());
                    _.each(q.orders, function (a) {
                        if (a._worker) {
                            var c = /^\(长包预订\).*/,
                                d = /^\(培训预订\).*/,
                                e = /^201.*/;
                            c.test(a.description) && (a.form = "长包预订"), d.test(a.description) && (a.form = "培训预订"), e.test(a.description) && (a.form = "普通(柜员)")
                        } else a.form = "普通(微信)";
                        a.image = "manyChoose_imageNo2", new Date(a.startDate).getTime() < b.getTime() ? (a.refundState = "cant", a.state = "未消费", a.openDate || (a.penalty = r(a.cost - a.refund))) : (a.refundState = "can", a.state = "未消费", a.isCancel && (a.penalty = r(a.cost - a.refund))), 0 != a.cost ? a.sendFlag = !0 : a.sendFlag = !1, (new Date).getTime() >= new Date(a.startDate).getTime() - 24e5 && (new Date).getTime() < new Date(a.endDate).getTime() && (a.openState = "canOpen"), (a.openDate || !a.openDate && !a.isCancel && new Date(a.endDate).getTime() < Date.now()) && (a.state = "已消费"), a.isCancel && (a.state = "已撤销")
                    });
                    var c = a.data.count;
                    q.pagination.totalItems = c, q.pagination.numPages = c / q.itemsPerPage
                }, function () {})
            },
            D = function (a, b) {
                var c = {
                    isUsed: !0,
                    _item: a
                };
                l.index(c, function (a) {
                    var c = [{
                        name: "全部"
                    }].concat(a.data.venues);
                    b(c)
                }, function () {})
            },
            E = function (a, b) {
                var c = [{
                    name: "全部"
                }].concat(a.items);
                b(c)
            },
            F = function () {
                q.searchItemId && !q.searchVenueId ? q.whatFirst = "item" : !q.searchItemId && q.searchVenueId ? q.whatFirst = "venue" : q.searchItemId || q.searchVenueId || (q.whatFirst = "")
            };
        q.chooseItemName = function (a) {
            t(), q.showItemName = a.name, q.searchItemId = a._id, q.times = [], F(), "item" == q.whatFirst ? (q.searchVenueId = "", q.showVenueName = "选择场馆", D(q.searchItemId, function (a) {
                q.venues = a
            })) : A(), B(), v(), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2", C()
        }, q.chooseVenueName = function (a) {
            t(), q.showVenueName = a.name, q.searchVenueId = a._id, q.times = [], F(), "venue" == q.whatFirst ? (q.searchItemId = "", q.showItemName = "选择项目", E(a, function (a) {
                q.items = a
            })) : z(), B(), v(), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2", C()
        }, q.chooseFieldName = function (a) {
            t(), q.showFieldName = a.name, q.searchFieldId = a._id, v(), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2", C()
        }, q.choosePageName = function (a) {
            t(), q.showPageName = a.name, q.searchPageValue = a.value, v(), C()
        }, q.chooseStateName = function (a) {
            q.showChooseStateBox = !1, q.showStateName = a.name, q.searchStateValue = a.value, "all" == a.value && (q.searchStateValue = ""), C()
        }, q.chooseFromName = function (a) {
            v(), q.showChooseFromBox = !1, q.showFromName = a.name, q.searchFromValue = a.value, "all" == a.value && (q.searchFromValue = ""), C()
        }, q.chooseNowOrderList = function () {
            "manyChoose_imageNo2" == q.nowImage ? (q.nowImage = "manyChoose_imageYes2", q.searchStateSpeValue = "nowCanOpen", q.startDate = new Date, q.endDate = new Date) : (q.searchStateSpeValue = "", q.nowImage = "manyChoose_imageNo2", q.searchStateValue = "all"), C()
        }, q.closeChooseStartDateBox = function () {
            q.showChooseStartDateBox = !1, setTimeout(function () {
                v(), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2", C()
            }, 100)
        }, q.closeChooseEndDateBox = function () {
            q.showChooseEndDateBox = !1, setTimeout(function () {
                v(), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2", C()
            }, 100)
        }, q.searchOrder = function () {
            v(), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2", C()
        }, q.page = 1, q.itemsPerPage = 10, q.pagination = {
            page: q.page,
            itemsPerPage: q.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, q.close = function () {
            t(), u()
        }, q.closePrompt = function () {
            q.promptERR = !1, q.promptOK = !1, q.promptWARN = !1, q.promptDELETE = !1
        }, q.pageChanged = function () {
            C(), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2"
        }, q.openCancelOnce = function (a) {
            q.cancelOrderId = a._id, q.showBasicInfoBox = !0, q.sendFlag = a.sendFlag
        }, q.query = function (a) {
            q._id = a._id;
            var b = {
                state: "query"
            };
            k.cancelOnce({
                controller: q._id
            }, b, function (b) {
                q.rPriceFlag = !0, b.data.rule ? "before" == b.data.rule.status ? q.rPrice = a.cost * (1 - 1 * b.data.rule.costPrecent) : q.rPrice = a.cost * (1 - 1 * b.data.rule.costPrecent) : q.rPrice = a.cost, q.refundFlag = !0
            }, function (a) {
                q.rPriceFlag = !1
            })
        }, q.chooseRefundType = function (a) {
            _.each(q.refundTypes, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", "自定义退款金额" == a.name ? (q.refundType = "自定义退款金额", q.showRefundPrice = !0) : (q.refundType = "按退款规则", q.showRefundPrice = !1)
        }, q.cancelOnce = function () {
            var b = {};
            if ("自定义退款金额" == q.refundType) {
                if (!q.refundPrice && 0 != q.refundPrice) return q.promptERR = !0, void(q.wordERR = "金额未输入");
                b.price = parseFloat(q.refundPrice)
            } else b.useRule = !0; if (q.sendFlag) {
                if (!q.sendNum) return q.promptERR = !0, void(q.wordERR = "验证码未输入");
                b.code = q.sendNum
            }
            k.cancelOnce({
                controller: q.cancelOrderId
            }, b, function () {
                t(), C(), q.refundTypes = [{
                    name: "按退款规则",
                    image: "singleChoose_imageYes"
                }, {
                    name: "自定义退款金额",
                    image: "singleChoose_imageNo"
                }], q.refundType = "按退款规则", q.refundPrice = 0, q.promptOK = !0, q.wordOK = "撤销成功", setTimeout(function () {
                    a.$apply(function () {
                        q.promptOK = !1
                    })
                }, 1e3)
            }, function (a) {
                a.data.data && (q.promptERR = !0, q.wordERR = a.data.data)
            })
        }, q.drawBill = function (b) {
            k.drawBill({
                controller: b._id
            }, {}, function () {
                C(), q.promptOK = !0, q.wordOK = "开票成功", setTimeout(function () {
                    a.$apply(function () {
                        q.promptOK = !1
                    })
                }, 1e3)
            }, function () {})
        }, q.chooseCancelOrder = function (a) {
            "manyChoose_imageYes2" == a.image ? (a.image = "manyChoose_imageNo2", q.cancelOrderIdArr.splice(q.cancelOrderIdArr.indexOf(a._id), 1)) : (a.image = "manyChoose_imageYes2", q.cancelOrderIdArr.push(a._id))
        }, q.chooseCancelOrderAll = function () {
            q.cancelOrderIdArr.length > 0 ? (_.each(q.orders, function (a) {
                a.image = "manyChoose_imageNo2"
            }), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2") : (_.each(q.orders, function (a) {
                a.image = "manyChoose_imageYes2", q.cancelOrderIdArr.push(a._id)
            }), q.allImage = "manyChoose_imageYes2")
        }, q.openCancelOrders = function () {
            q.promptDELETE = !0, q.wordDELETE = "退订为不可逆操作，是否继续？"
        }, q.cancelOrders = function () {
            k.cancelOrders({}, {
                ids: q.cancelOrderIdArr
            }, function () {
                t(), C(), u(), q.promptOK = !0, q.wordOK = "撤销成功", setTimeout(function () {
                    a.$apply(function () {
                        q.promptOK = !1
                    })
                }, 1e3)
            }, function (a) {
                a.data.data && (q.promptDELETE = !1, q.promptERR = !0, q.wordERR = a.data.data)
            })
        }, q.openField = function (b) {
            k.open({
                controller: b._id
            }, {}, function () {
                q.promptOK = !0, q.wordOK = "开启成功", setTimeout(function () {
                    a.$apply(function () {
                        q.promptOK = !1
                    })
                }, 1e3), C()
            }, function () {})
        }, q.openChooseFieldWork = function () {
            return 0 == q.users.length ? (q.promptERR = !0, void(q.wordERR = "暂无场地管理员")) : void(1 == q.users.length ? (q.objectName = q.users[0].name, q._user = q.users[0]._id, q.send()) : q.sendToFlag = !0)
        }, q.printOrder = function (a) {
            for (var b = "", c = 0; c < a.tel.length; c++) b += "3" == c || "4" == c || "5" == c || "6" == c ? "*" : a.tel[c];
            a.tel = b;
            var d = '<div style="width: 250px;padding:0;margin: 0;"><div>';
            d += '<div style="font-size: 20px;font-weight: bold;">欢迎光临', d += q.organization.name, d += '</div><div style="font-size: 20px;font-weight: bold;margin-top: 10px;">场地订单小票</div></div>', d += '<div style="margin-top: 10px;">**************************************</div>', d += '<div><div style="font-size: 16px;margin-top: 10px;">场馆名称：', d += a.venueName, d += '</div><div style="font-size: 16px;margin-top: 10px;">场地名称：', d += a.fieldName, d += '</div><div style="font-size: 16px;margin-top: 10px;">日期：', d += new Date(a.startDate).getFullYear() + "年" + (new Date(a.startDate).getMonth() + 1) + "月" + new Date(a.startDate).getDate() + "日", d += '</div><div style="font-size: 16px;margin-top: 10px;">场次时间：', d += a.showDate, d += '</div><div style="font-size: 16px;margin-top: 10px;">预订人：', d += a.name, d += '</div><div style="font-size: 16px;margin-top: 10px;">联系方式：', d += a.tel, d += '</div><div style="font-size: 16px;margin-top: 10px;">预订金额：', d += a.cost, d += '</div><div style="font-size: 16px;margin-top: 10px;">验证码：', d += a.code, d += '</div><div style="font-size: 16px;margin-top: 10px;">备注：请在消费后的一个月内开票，逾期作废', d += "</div></div></div>";
            var e = getLodop();
            e.PRINT_INIT(""), e.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), e.SET_PRINTER_INDEXA(-1), e.SET_PRINT_PAGESIZE(3, 800, 100, ""), e.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", d), e.PRINT()
        }, q.openShowOrderRemark = function (a) {
            q.showOrderRemark = !0, q.order = {
                _id: a._id,
                remark: a.remark || void 0
            }
        }, q.updateRemark = function () {
            k.updateRemark({
                controller: q.order._id
            }, q.order, function () {
                q.showOrderRemark = !1, C(), q.promptOK = !0, q.wordOK = "修改成功", setTimeout(function () {
                    a.$apply(function () {
                        q.promptOK = !1
                    })
                }, 1e3)
            }, function () {})
        }, y()
    }
    angular.module("fieldApp").controller("CsdFieldCancelBookCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Time", "Field", "Orderlist", "Venue", "Item", "Orderlong", "Member", "Smscode"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        var p = this;
        p.titleState = f.params.state || "once", p.searchVenueId, p.searchItemId, p.searchPayment;
        var q = function (a) {
                return a = new Date(1e3 * parseInt(a / 1e3)), a.setHours(0), a.setMinutes(0), a.setSeconds(0), a
            },
            r = function (a) {
                return a = new Date(1e3 * parseInt(a / 1e3)), a.setHours(23), a.setMinutes(59), a.setSeconds(59), a
            },
            s = function () {
                p.showChooseVenueBox = !1, p.showChooseItemBox = !1, p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1, p.showBasicInfoBox = !1, p.showchooseOnceTypeBox = !1, p.deleteFlag = !1, p.showLongRefundBox = !1, p.showInfoBox = !1, p.showPaymentBox = !1, p.showAddTimeBox = !1, p.showEditTimeBox = !1
            };
        p.close = function () {
            s(), A(), B()
        };
        var t = function () {
            u(), v(), B()
        };
        p.closePrompt = function () {
            p.promptERR = !1, p.promptOK = !1, p.promptWARN = !1
        };
        var u = function () {
                m.index({
                    isUsed: !0
                }, function (a) {
                    p.items = [{
                        name: "全部"
                    }].concat(a.data.items)
                }, function () {})
            },
            v = function (a) {
                l.index({
                    isUsed: !0
                }, function (a) {
                    p.venues = [{
                        name: "全部"
                    }].concat(a.data.venues)
                }, function () {})
            },
            w = function () {
                i.index({
                    _venue: p.searchVenueId,
                    _item: p.searchItemId,
                    isUsed: !0,
                    sortBy: "startDate"
                }, function (a) {
                    var b = (new Date).getTime(),
                        c = q(b),
                        d = r(b),
                        e = (_.clone(p.startDate), p.startDate.getHours()),
                        f = q(p.startDate),
                        g = (r(p.startDate), []);
                    c.getTime() == f.getTime() ? _.each(a.data.times, function (a) {
                        a.endDateHours > e && g.push(a)
                    }) : d.getTime() < p.startDate.getTime() && (g = a.data.times), p.times = [];
                    for (var h = g[0].startDateHours; h <= g[g.length - 1].endDateHours; h++) p.times.push({
                        showDate: h + ":00",
                        value: h
                    })
                }, function () {})
            },
            x = function (a, b) {
                var c = {
                    isUsed: !0,
                    _item: a
                };
                l.index(c, function (a) {
                    var c = [{
                        name: "全部"
                    }].concat(a.data.venues);
                    b(c)
                }, function () {})
            },
            y = function (a, b) {
                var c = [{
                    name: "全部"
                }].concat(a.items);
                b(c)
            },
            z = function () {
                p.searchItemId && !p.searchVenueId ? p.whatFirst = "item" : !p.searchItemId && p.searchVenueId ? p.whatFirst = "venue" : p.searchItemId || p.searchVenueId || (p.whatFirst = "")
            };
        p.chooseItemName = function (a) {
            s(), p.showStartTime = "选择开始时间", p.showEndTime = "选择结束时间", p.showTimesArr = [{
                startDateHours: 0,
                startDateMins: 0,
                endDateHours: 0,
                endDateMins: 0
            }], p.showItemName = a.name, p.searchItemId = a._id, p.times = [], z(), "item" == p.whatFirst ? (p.searchVenueId = "", p.showVenueName = "选择场馆", x(p.searchItemId, function (a) {
                p.venues = a
            })) : v(), p.searchItemId && p.searchVenueId && w()
        }, p.chooseVenueName = function (a) {
            s(), p.showStartTime = "选择开始时间", p.showEndTime = "选择结束时间", p.showTimesArr = [{
                startDateHours: 0,
                startDateMins: 0,
                endDateHours: 0,
                endDateMins: 0
            }], p.showVenueName = a.name, p.searchVenueId = a._id, p.times = [], z(), "venue" == p.whatFirst ? (p.searchItemId = "", p.showItemName = "选择项目", y(a, function (a) {
                p.items = a
            })) : u(), p.searchItemId && p.searchVenueId && w()
        };
        var A = function () {
                p.BlongFirst = !1, p.BlongSecond = !1, p.BlongThird = !1, p.BlongFouth = !1, p.showChooseWeekDayBox = !1, p.showChooseMonthDayBox = !1, p.showChooseTimesSelect = !1, p.showchooseLongTypeBox = !1, p.showLongRefundDateBox = !1
            },
            B = function (a) {
                if (!a) {
                    p.showVenueName = "选择场馆", p.showItemName = "选择项目", p.showTypeName = "选择类型", p.showStartTime = "选择开始时间", p.showEndTime = "选择结束时间", p.long_weekDays = [{
                        name: "周一",
                        value: 1,
                        image: ""
                    }, {
                        name: "周二",
                        value: 2,
                        image: ""
                    }, {
                        name: "周三",
                        value: 3,
                        image: ""
                    }, {
                        name: "周四",
                        value: 4,
                        image: ""
                    }, {
                        name: "周五",
                        value: 5,
                        image: ""
                    }, {
                        name: "周六",
                        value: 6,
                        image: ""
                    }, {
                        name: "周日",
                        value: 0,
                        image: ""
                    }], p.long_monthDays = [];
                    for (var b = 1; 32 > b; b++) p.long_monthDays.push({
                        value: b,
                        image: ""
                    });
                    p.long_values = [{
                        name: "每周",
                        value: "week"
                    }, {
                        name: "每月",
                        value: "month"
                    }, {
                        name: "每天",
                        value: "day"
                    }], p.long_orderTypeArr = [{
                        name: "长包",
                        image: "singleChoose_imageYes"
                    }, {
                        name: "培训",
                        image: "singleChoose_imageNo"
                    }], p.long_orderType = "", p.showWeekDayName = "请选择星期几", p.showMonthDayName = "请选择日期", p.showChooseWeekDayBox = !1, p.showChooseMonthDayBox = !1, p.showTimesArr = [{
                        startDateHours: 0,
                        startDateMins: 0,
                        endDateHours: 0,
                        endDateMins: 0
                    }], p.searchKey = "week", p.showValueName = "每周", p.showChooseWeekDayBox = !0, p.long_name = "", p.long_tel = "", p.long_remark = "", p.searchValueArr = []
                }
                p.specialArr = [], p.chooseAll = "manyChoose_imageNo2", p.showResult = [], p.cancelDocArr = []
            };
        p.long_closeChooseStartDateBox = function (a) {
            p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1, a || w()
        }, p.long_closeChooseEndDateBox = function () {
            p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1
        }, p.long_chooseValue = function (a) {
            switch (p.showChooseValueBox = !1, p.showChooseWeekDayBox = !1, p.showChooseMonthDayBox = !1, p.searchValueArr = [], p.showWeekDayName = "请选择星期几", p.showMonthDayName = "请选择日期", p.showValueName = a.name, a.name) {
            case "每周":
                p.searchKey = "week", p.showChooseWeekDayBox = !0;
                break;
            case "每月":
                p.searchKey = "month", p.showChooseMonthDayBox = !0;
                break;
            default:
                p.searchKey = "day"
            }
        }, p.chooseWeekDay = function (a) {
            p.searchKey = "week";
            var b = p.searchValueArr.indexOf(a.value);
            0 > b ? (p.searchValueArr.push(a.value), a.image = "background:url(../../assets/images/ok.png) no-repeat 170px 13.5px;") : (p.searchValueArr.splice(b, 1), a.image = ""), p.showWeekDayName = "";
            for (var c = 0; c < p.searchValueArr.length; c++) {
                var d = p.searchValueArr[c],
                    a = _.findWhere(p.long_weekDays, {
                        value: d
                    });
                0 == c ? p.showWeekDayName = a.name : p.showWeekDayName += "," + a.name
            }
            p.showChooseWeekDaySelect = !1
        }, p.chooseMonthDay = function (a) {
            p.searchKey = "month";
            var b = p.searchValueArr.indexOf(a.value);
            0 > b ? (p.searchValueArr.push(a.value), a.image = "background:url(../../assets/images/ok.png) no-repeat 170px 13.5px;") : (p.searchValueArr.splice(b, 1), a.image = ""), p.showMonthDayName = "";
            for (var c = 0; c < p.searchValueArr.length; c++) {
                var d = p.searchValueArr[c];
                0 == c ? p.showMonthDayName = d : p.showMonthDayName += "," + d
            }
            p.showChooseMonthDaySelect = !1
        }, p.chooseStartTime = function (a) {
            p.showStartTime = a.showDate, p.showTimesArr[0].startDateHours = a.value, p.showStartTimeBox = !1
        }, p.chooseEndTime = function (a) {
            p.showEndTime = a.showDate, p.showTimesArr[0].endDateHours = a.value, p.showEndTimeBox = !1
        }, p.long_chooseOrderType = function (a) {
            switch (p.showTypeName = a.name, p.showChooseTypeBox = !1, a.name) {
            case "长包":
                p.long_orderType = "long";
                break;
            case "培训":
                p.long_orderType = "train"
            }
        }, p.checkField = function () {
            if (p.showTimesArr.length < 1) return p.promptWARN = !0, void(p.wordWARN = "请选择场次");
            if (p.showTimesArr[0].startDateHours > p.showTimesArr[0].endDateHours) return p.promptERR = !0, void(p.wordERR = "场次开始时间不能大于结束时间");
            var a = {
                _venue: p.searchVenueId,
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime(),
                defindTimes: p.showTimesArr,
                key: p.searchKey,
                valueArr: p.searchValueArr,
                check: "check",
                _item: p.searchItemId
            };
            k.createLong({}, a, function (a) {
                p.BlongFirst = !0, p.longFields = a.result
            }, function (a) {
                "时间区间内没有需要预定的场次" == a.data.data && (p.promptWARN = !0, p.wordWARN = "请重新选择时间范围"), "时间段不能重叠" == a.data.data && (p.promptWARN = !0, p.wordWARN = "时间段不能重叠")
            })
        }, p.openBlongSecond = function (a) {
            p.backstate = "flexible", p.long_field = a;
            var b = {
                name: p.long_name,
                _field: p.long_field._id,
                _venue: p.searchVenueId,
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime(),
                defindTimes: p.showTimesArr,
                key: p.searchKey,
                valueArr: p.searchValueArr,
                tel: p.long_tel || null,
                remark: p.long_remark || null,
                cost: p.long_price,
                state: "flexible"
            };
            k.createLong({}, b, function (a) {
                p.BlongFirst = !1, p.BlongSecond = !0, p.replaceFields = a.result, _.each(p.replaceFields, function (a) {
                    return "没有推荐场地" == a.recommendField ? (p.promptERR = !0, p.wordERR = "没有推荐场地", A(), void B("create")) : (a.replaceFieldName = a.recommendField[0].name, void p.specialArr.push({
                        startDate: a.conflictField.startDate,
                        endDate: a.conflictField.endDate,
                        name: a.recommendField[0].name,
                        replaceFieldId: a.recommendField[0]._id,
                        orderDateNum: a.conflictField.orderDateNum,
                        startHours: a.conflictField.startHours,
                        endHours: a.conflictField.endHours
                    }))
                })
            }, function () {})
        }, p.backToFirst = function () {
            p.backstate = "", p.BlongSecond = !1, p.BlongFirst = !0, p.specialArr = []
        }, p.chooseReplaceField = function (a, b) {
            b.showChooseReplaceFieldBox = !1, b.replaceFieldName = a.name;
            var c = _.findWhere(p.specialArr, {
                startDate: b.conflictField.startDate,
                endDate: b.conflictField.endDate
            });
            c ? (c.replaceFieldId = a._id, c.name = a.name) : p.specialArr.push({
                startDate: b.conflictField.startDate,
                endDate: b.conflictField.endDate,
                name: a.name,
                replaceFieldId: a._id,
                orderDateNum: b.conflictField.orderDateNum,
                startHours: b.conflictField.startHours,
                endHours: b.conflictField.endHours
            })
        }, p.backToSecond = function () {
            p.BlongFouth = !1, p.backstate && "flexible" == p.backstate ? p.BlongSecond = !0 : (p.BlongFirst = !0, p.backstate = "")
        }, p.openBlongFouth = function (a) {
            a && (p.long_field = a), p.BlongFirst = !1, p.BlongSecond = !1, p.BlongFouth = !0
        }, p.getResult = function () {
            var a = {
                name: p.long_name,
                _field: p.long_field._id,
                _venue: p.searchVenueId,
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime(),
                defindTimes: p.showTimesArr,
                getResult: "getResult",
                key: p.searchKey,
                valueArr: p.searchValueArr,
                tel: p.long_tel || null,
                remark: p.long_remark || null,
                cost: p.long_price,
                orderType: p.long_orderType
            };
            p.specialArr.length > 0 && (a = _.merge(a, {
                specialArr: p.specialArr
            })), k.createLong({}, a, function (a) {
                p.showResult = a.result, p.cancelDocArr = [], p.BlongFouth = !1, p.chooseAll = "manyChoose_imageYes2", _.each(p.showResult, function (a) {
                    a.choose = "manyChoose_imageYes2"
                })
            }, function () {})
        }, p.changeAllChoose = function () {
            p.cancelDocArr.length > 0 ? (p.cancelDocArr = [], p.chooseAll = "manyChoose_imageYes2", _.each(p.showResult, function (a) {
                a.choose = "manyChoose_imageYes2"
            })) : (p.cancelDocArr = _.cloneDeep(p.showResult), p.chooseAll = "manyChoose_imageNo2", _.each(p.showResult, function (a) {
                a.choose = "manyChoose_imageNo2"
            }))
        }, p.changeChoose = function (a) {
            if ("manyChoose_imageNo2" == a.choose) {
                var b = p.cancelDocArr.indexOf(a);
                b > -1 && p.cancelDocArr.splice(b, 1), a.choose = "manyChoose_imageYes2"
            } else p.cancelDocArr.push(a), a.choose = "manyChoose_imageNo2"
        }, p.deleteDoc = function () {
            p.showResult = [], p.cancelDocArr = [], p.chooseAll = "manyChoose_imageNo2"
        }, p.createLong = function () {
            var b = {
                name: p.long_name,
                _field: p.long_field._id,
                _venue: p.searchVenueId,
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime(),
                defindTimes: p.showTimesArr,
                key: p.searchKey,
                valueArr: p.searchValueArr,
                tel: p.long_tel || null,
                remark: p.long_remark || null,
                cost: p.long_price,
                orderType: p.long_orderType
            };
            p.specialArr.length > 0 && (b = _.merge(b, {
                specialArr: p.specialArr
            })), p.cancelDocArr.length > 0 && (b = _.merge(b, {
                cancelArr: p.cancelDocArr
            })), k.createLong({}, b, function (b) {
                p.showResult = b.result, p.BlongFouth = !1, _.each(p.showResult, function (a) {
                    a.choose = !1
                }), A(), B("create"), v(), p.showChooseWeekDayBox = !0, p.promptOK = !0, p.wordOK = "预订成功", setTimeout(function () {
                    a.$apply(function () {
                        p.promptOK = !1
                    })
                }, 1e3)
            }, function (a) {
                console.log(a), p.promptERR = !0, p.wordERR = a.data.data
            })
        }, t()
    }
    angular.module("fieldApp").controller("CsdFieldLongBookCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Time", "Field", "Orderlist", "Venue", "Item", "Orderlong", "Member"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r) {
        var s, t = this,
            u = 0,
            v = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            },
            w = function (a) {
                return a = new Date(1e3 * parseInt(a / 1e3)), a.setHours(0), a.setMinutes(0), a.setSeconds(0), a
            },
            x = function (a) {
                return a = new Date(1e3 * parseInt(a / 1e3)), a.setHours(23), a.setMinutes(59), a.setSeconds(59), a
            },
            y = function (a) {
                var b;
                switch (a) {
                case 0:
                    b = "周日";
                    break;
                case 1:
                    b = "周一";
                    break;
                case 2:
                    b = "周二";
                    break;
                case 3:
                    b = "周三";
                    break;
                case 4:
                    b = "周四";
                    break;
                case 5:
                    b = "周五";
                    break;
                case 6:
                    b = "周六"
                }
                return b
            },
            z = function () {
                t.showChooseVenueBox = !1, t.showChooseItemBox = !1, t.showChooseStartDateBox = !1, t.showChooseEndDateBox = !1, t.showBasicInfoBox = !1, t.showchooseOnceTypeBox = !1, t.showInfoBox = !1, t.showPaymentBox = !1, t.showMemberInfo = !1, t.showOrderBox = !1, t.showCodeBox = !1, t.showCreateMember = !1, t.showAuth_codeBox = !1, t.showRechargeBox = !1, clearInterval(t.setIntervalId)
            },
            A = function (a) {
                if (a) t.members = null;
                else {
                    t.showVenueName = "选择场馆", t.showItemName = "选择项目", t.searchVenueId = "", t.searchItemId = "", t.showHours = [], t.dateArr = [];
                    for (var b = Date.now(), c = b; b + 6912e5 > c; c += 864e5) t.dateArr.push({
                        date: new Date(c),
                        week: y(new Date(c).getDay()),
                        bgColor: "color:#99a9bf;",
                        isChoose: !1
                    });
                    t.dateArr[0].isChoose = !0, t.dateArr[0].bgColor = "background:#20a0ff;color:#fff;", t.startDate = new Date
                }
                t.memberTelOrCard = "", t.today = new Date, t.rechargeType = "cash", t.chooseCardId = "", t.rechargePayment = "", t.order = {
                    _member: "",
                    orderDate: null,
                    spbill_create_ip: "",
                    auth_code: "",
                    payment: "member",
                    subtotal: 0,
                    total: 0,
                    orderArr: []
                }, t.member = {
                    name: "",
                    tel: "",
                    idCard: ""
                }, t.flexibleOrderPrice = "", t.startTime = "点击场次获取", t.lastTime = "", t.paymentArr = [{
                    name: "余额",
                    value: "member",
                    image: "singleChoose_imageYes"
                }, {
                    name: "支付宝",
                    value: "alipay",
                    image: "singleChoose_imageNo"
                }, {
                    name: "微信",
                    value: "wx",
                    image: "singleChoose_imageNo"
                }, {
                    name: "现金",
                    value: "cash",
                    image: "singleChoose_imageNo"
                }, {
                    name: "支票",
                    value: "check",
                    image: "singleChoose_imageNo"
                }, {
                    name: "转账",
                    value: "card",
                    image: "singleChoose_imageNo"
                }, {
                    name: "POS机",
                    value: "pos",
                    image: "singleChoose_imageNo"
                }]
            },
            B = function () {
                A(), D(), E(), C()
            },
            C = function () {
                r.index({
                    sortBy: "discount"
                }, function (a) {
                    t.cards = a.data.membertypes
                }, function () {})
            },
            D = function () {
                m.index({
                    isUsed: !0
                }, function (a) {
                    t.items = [{
                        name: "全部"
                    }].concat(a.data.items)
                }, function () {})
            },
            E = function () {
                l.index({
                    isUsed: !0
                }, function (a) {
                    t.venues = [{
                        name: "全部"
                    }].concat(a.data.venues), 0 == u && a.data.venues.length > 0 && t.chooseVenueName(t.venues[1])
                }, function () {})
            },
            F = function () {
                t.order = {
                    _member: t.members ? t.members[0]._id : "",
                    orderDate: null,
                    spbill_create_ip: "",
                    auth_code: "",
                    payment: "member",
                    subtotal: 0,
                    total: 0,
                    orderArr: []
                }, t.startTime = "点击场次获取", t.lastTime = "", i.index({
                    _venue: t.searchVenueId,
                    _item: t.searchItemId,
                    isUsed: !0,
                    sortBy: "startDate",
                    orderDate: t.startDate.getTime()
                }, function (a) {
                    t.times = a.data.times, t.speDay = a.data.speDay;
                    var b = [],
                        c = Date.now();
                    if (_.each(t.times, function (a) {
                        a.isUsed ? b.push(a) : (a.close_startDate > c || a.close_endDate < c) && b.push(a)
                    }), t.times = b, "csd-field-book.flexible" == f.current.name) {
                        var b = [];
                        _.each(t.times, function (a) {
                            if (a.continueHours > 1)
                                for (var c = a.startDate; c < a.endDate; c++) {
                                    var d = _.cloneDeep(a);
                                    d.continueHours = 1, d.startDate = c, d.startDateHours = parseInt(c), d.startDateMins = c % 1 * 60, d.endDate = c + 1, d.endDateHours = parseInt(d.endDate), d.endDateMins = d.endDate % 1 * 60,
                                        d.showDate = "" + d.startDateHours + ":", d.showDate += d.startDateMins > 10 ? d.startDateMins : "0" + d.startDateMins, d.showDate += "--" + d.endDateHours + ":", d.showDate += d.endDateMins > 10 ? d.endDateMins : "0" + d.endDateMins, b.push(d)
                                } else b.push(a)
                        }), t.times = b
                    }
                    if (t.times.length > 0) {
                        var d = t.times[0].startDateHours || 0,
                            e = t.times[t.times.length - 1].endDateHours || 0;
                        e = e < t.times[t.times.length - 1].endDate ? e + 1 : e;
                        var g = e - d;
                        t.showHours = [];
                        for (var h = d; e >= h; h++) t.showHours.push({
                            num: 10 > h ? "0" + h : h,
                            fontColor: ""
                        });
                        var i = document.getElementsByTagName("html")[0].offsetWidth / 1320;
                        i = 10 * (i > 1 ? i : 1);
                        var j = 6 * g;
                        t.tableWidthB = "width:" + (6 * g + 16) + "rem;", t.tableWidthS = "width:" + 6 * g + "rem;";
                        for (var h = 0; h < t.times.length; h++) 0 == h ? t.times[h].marginleft = "margin-left:" + ((t.times[h].startDate - d) / g * j - 1 / i) + "rem;" : t.times[h].marginleft = "margin-left:" + ((t.times[h].startDate - t.times[h - 1].endDate) / g * j - 1 / i) + "rem;", t.times[h].width = "width:" + (t.times[h].continueHours / g * j + 1 / i) + "rem;";
                        G()
                    }
                }, function () {})
            },
            G = function () {
                var a = {
                    _venue: t.searchVenueId,
                    _item: t.searchItemId,
                    sortValue: "asc"
                };
                j.index(a, function (a) {
                    t.fields = a.data.fields, H()
                }, function () {})
            },
            H = function () {
                var a = Date.now(),
                    b = w(a),
                    c = (x(a), _.clone(t.startDate)),
                    d = t.startDate.getHours() + t.startDate.getMinutes() / 60,
                    e = w(t.startDate),
                    g = (x(t.startDate), t.speDay ? t.speDay.weekAs : 0 == c.getDay() ? 6 : c.getDay() - 1),
                    h = 0;
                _.each(t.fields, function (c) {
                    c.index = h, h++, c.isChoose = !1, c.fontColor = "", c.times = _.cloneDeep(t.times), _.each(c.times, function (h) {
                        switch (c.isUsed || !c.isUsed && new Date(c.closeDate).getTime() > a ? (h.state = "canbook", h.bgColor = "background:#fff;", "csd-field-book.once" == f.current.name ? (b.getTime() == e.getTime() && h.startDate < d || b.getTime() > t.startDate.getTime()) && (h.state = "cantbook", h.bgColor = "background:#e5e9f2;") : (b.getTime() == e.getTime() && h.endDate < d || b.getTime() > t.startDate.getTime()) && (h.state = "cantbook", h.bgColor = "background:#e5e9f2;")) : (h.state = "stop", h.bgColor = "background:#e5e9f2;"), h.isChoose = !1, h.tel = "", h.name = "", h.priceArr[g].unit) {
                        case "sign":
                            h.price = "￥" + v(h.priceArr[g].price);
                            break;
                        case "hours":
                            h.price = "￥" + v(h.priceArr[g].price * h.continueHours);
                            break;
                        default:
                            h.price = "No"
                        }
                    })
                }), I()
            },
            I = function () {
                var a = {
                    _venue: t.searchVenueId,
                    _item: t.searchItemId,
                    orderDateNum: t.startDate.getTime(),
                    state: "all"
                };
                k.index(a, function (a) {
                    t.orders = a.data.orderLists, _.each(t.orders, function (a) {
                        var b = _.findWhere(t.fields, {
                            _id: a._field
                        });
                        b && _.each(b.times, function (b) {
                            if (a.startHours < b.startDate && a.endHours > b.startDate || a.startHours >= b.startDate && a.startHours < b.endDate) {
                                if ("stop" != b.state && "cantbook" != b.state) {
                                    b.orderId = a._id, b.tel = a.tel || "", b.name = a.name || "";
                                    var c = a.description.substr(0, 6);
                                    "(长包预订)" == c ? (b.bgColor = "background:#F69667;", b.state = "hasbook", b.orderType = "long") : "(培训预订)" == c ? (b.bgColor = "background:#67BDDE;", b.state = "hasbook", b.orderType = "train") : (b.bgColor = "background:#5ED878;", b.state = "hasbook", b.orderType = "once"), M(a) && (b.bgColor = "background:#ff4949;", b.state = "isUsed"), b.code = a.code, b.remark = a.remark
                                } else b.orderId = a._id, b.tel = a.tel || "", b.name = a.name || "", b.bgColor = "background:#99a9bf;", b.state = "haspass", M(a) && (b.bgColor = "background:#ff4949;", b.state = "isUsed"), b.code = a.code, b.remark = a.remark;
                                delete b.isChoose
                            }
                        })
                    })
                }, function () {})
            },
            J = function (a, b) {
                var c = {
                    isUsed: !0,
                    _item: a
                };
                l.index(c, function (a) {
                    var c = [{
                        name: "全部"
                    }].concat(a.data.venues);
                    b(c)
                }, function () {})
            },
            K = function (a, b) {
                var c = [{
                    name: "全部"
                }].concat(a.items);
                b(c)
            },
            L = function () {
                t.searchItemId && !t.searchVenueId ? t.whatFirst = "item" : !t.searchItemId && t.searchVenueId ? t.whatFirst = "venue" : t.searchItemId || t.searchVenueId || (t.whatFirst = "")
            },
            M = function (a) {
                var b = (new Date).getTime(),
                    c = new Date(a.endDate).getTime();
                return a.isUsed && c >= b ? !0 : !1
            },
            N = function (a) {
                var b = a.split("|");
                if (3 != b.length) return !1;
                var a = b[0],
                    c = b[1].split(""),
                    d = b[2],
                    e = d,
                    f = parseInt(s / 6e4).toString().split("");
                if (c.length < f.length) return !1;
                for (var g = 0; g < f.length; g++) d = d.replace(f[g], c[g]);
                return d == a ? e : !1
            };
        t.changeTitle = function (a) {
            u = 0, E();
            var b = t.memberTelOrCard;
            z(), A(), t.memberTelOrCard = b, t.members && (t.showMemberInfo = !0, t.order._member = t.members[0]._id), "once" == a ? f.go("csd-field-book.once") : f.go("csd-field-book.flexible")
        }, t.checkMember = function (a) {
            return t.memberTelOrCard || a ? void(a ? n.show({
                id: a
            }, function (a) {
                t.members = [a.data.member], t.showMemberInfo = !0, t.order._member = t.members[0]._id
            }, function (a) {
                "找不到对象：member" == a.data.data && (t.showMemberInfo = !1, t.order = {
                    _member: "",
                    orderDate: null,
                    spbill_create_ip: "",
                    auth_code: "",
                    payment: "member",
                    total: 0,
                    orderArr: []
                }, t.promptERR = !0, t.wordERR = "会员不存在")
            }) : i.index({
                id: "today"
            }, function (a) {
                s = a.data;
                var b = N(t.memberTelOrCard);
                if (b) n.show({
                    id: b
                }, function (a) {
                    t.members = [a.data.member], t.showMemberInfo = !0, t.order._member = t.members[0]._id
                }, function (a) {
                    "找不到对象：member" == a.data.data && (t.showMemberInfo = !1, t.order = {
                        _member: "",
                        orderDate: null,
                        spbill_create_ip: "",
                        auth_code: "",
                        payment: "member",
                        total: 0,
                        orderArr: []
                    }, t.promptERR = !0, t.wordERR = "会员不存在")
                });
                else {
                    var c = {
                        cardNo: t.memberTelOrCard
                    };
                    n.indexBycard(c, function (a) {
                        t.members = [a.data.member], t.showMemberInfo = !0, t.order._member = t.members[0]._id
                    }, function (a) {
                        "找不到对象：member" == a.data.data && (t.showMemberInfo = !1, t.order = {
                            _member: "",
                            orderDate: null,
                            spbill_create_ip: "",
                            auth_code: "",
                            payment: "member",
                            total: 0,
                            orderArr: []
                        }, t.promptERR = !0, t.wordERR = "会员不存在")
                    })
                }
            })) : (t.promptERR = !0, void(t.wordERR = "请读取会员卡号/二维码"))
        }, t.chooseItemName = function (a) {
            t.showChooseItemBox = !1, t.showItemName = a.name, t.searchItemId = a._id, t.times = [], L(), "item" == t.whatFirst ? (t.searchVenueId = "", t.showVenueName = "选择场馆", J(t.searchItemId, function (a) {
                t.venues = a
            })) : E(), t.searchItemId && t.searchVenueId && F()
        }, t.chooseVenueName = function (a) {
            t.showChooseVenueBox = !1, t.showVenueName = a.name, t.searchVenueId = a._id, t.times = [], L(), "venue" == t.whatFirst ? (t.searchItemId = "", t.showItemName = "选择项目", K(a, function (a) {
                t.items = a
            })) : D(), 0 == u && t.items.length > 0 ? (u++, t.chooseItemName(t.items[1])) : t.searchItemId && t.searchVenueId && F()
        }, t.closeChooseStartDateBox = function () {
            setTimeout(function () {
                t.showChooseStartDateBox = !1, F()
            }, 100)
        }, t.changeDate = function (a) {
            _.each(t.dateArr, function (a) {
                a.bgColor = "color:#99a9bf;", a.isChoose = !1
            }), a.bgColor = "background:#20a0ff;color:#fff;", a.isChoose = !0, t.startDate = a.date, t.searchItemId && t.searchVenueId && F()
        };
        var O = function () {
            _.each(t.showHours, function (a) {
                a.fontColor = ""
            }), _.each(t.fields, function (a) {
                a.fontColor = ""
            }), _.each(t.order.orderArr, function (a) {
                for (var b = a.startDateHours; b <= a.endDateHours; b++) {
                    b = 10 > b ? "0" + b : b;
                    var c = _.findWhere(t.showHours, {
                        num: b
                    });
                    c.fontColor = "color:#ff4949;font-weight:bold;"
                }
                var d = _.findWhere(t.fields, {
                    _id: a._field
                });
                d.fontColor = "color:#ff4949;font-weight:bold;"
            })
        };
        t.chooseField = function (a, b) {
            if (!t.order._member) return t.promptERR = !0, void(t.wordERR = "请先查找会员信息");
            if ("No" == b.price) return t.promptERR = !0, void(t.wordERR = "未设置单位场次不可预订");
            var c, d = t.speDay ? parseInt(t.speDay.weekAs) : t.startDate.getDay(),
                e = 0,
                f = 0;
            c = a.itemDiscount ? a.itemDiscount : t.members[0].cards.length > 0 ? t.members[0].cards[0].discount : 1;
            var g = _.findWhere(b.priceArr, {
                week: d
            });
            if ("sign" == g.unit ? (e = g.price, f = g.price * c) : "hours" == g.unit && (e = g.price * b.continueHours, f = g.price * b.continueHours * c), f = Math.ceil(parseInt(1e3 * f) / 10) / 100, e = Math.ceil(parseInt(1e3 * e) / 10) / 100, b.isChoose) {
                b.isChoose = !1, b.bgColor = "background:#fff;", b.state = "canbook", b.fontColor = "";
                var a = _.findWhere(t.order.orderArr, {
                    date: t.startDate,
                    _field: a._id,
                    _time: b._id
                });
                if (a) {
                    var h = t.order.orderArr.indexOf(a);
                    t.order.total = v((100 * t.order.total - 100 * f) / 100), t.order.subtotal = v((100 * t.order.subtotal - 100 * e) / 100), t.order.orderArr.splice(h, 1)
                }
            } else {
                if (9 == t.order.orderArr.length) return t.promptERR = !0, void(t.wordERR = "一次最多选择9场");
                b.isChoose = !0, b.bgColor = "background:#20a0ff;", b.fontColor = "color:#fff;", b.state = "choose", t.order.total = v((100 * t.order.total + 100 * f) / 100), t.order.subtotal = v((100 * t.order.subtotal + 100 * e) / 100), t.order.orderArr.push({
                    date: t.startDate,
                    _field: a._id,
                    fieldName: a.name,
                    _time: b._id,
                    timeShowDate: b.showDate,
                    startDateHours: b.startDateHours,
                    endDateHours: b.endDateHours,
                    itmeName: t.showItemName,
                    venueName: t.showVenueName,
                    week: y(t.startDate.getDay())
                })
            }
            O()
        }, t.deleteField = function (a) {
            var b, c = _.findWhere(t.fields, {
                    _id: a._field
                }),
                d = _.findWhere(c.times, {
                    _id: a._time
                }),
                e = t.speDay ? parseInt(t.speDay.weekAs) : t.startDate.getDay(),
                f = 0,
                g = 0;
            b = a.itemDiscount ? a.itemDiscount : t.members[0].cards.length > 0 ? t.members[0].cards[0].discount : 1;
            var h = _.findWhere(d.priceArr, {
                week: e
            });
            "sign" == h.unit ? (f = h.price, g = h.price * b) : "hours" == h.unit && (f = h.price * d.continueHours, g = h.price * d.continueHours * b), g = Math.ceil(parseInt(1e3 * g) / 10) / 100, f = Math.ceil(parseInt(1e3 * f) / 10) / 100, d.bgColor = "background:#fff;", d.fontColor = "color:#000;", d.isChoose = !1, t.order.subtotal = v((100 * t.order.subtotal - 100 * f) / 100), t.order.total = v((100 * t.order.total - 100 * g) / 100), t.order.orderArr.splice(t.order.orderArr.indexOf(a), 1), O()
        }, t.create = function () {
            switch (t.order.orderDate = new Date(t.startDate).getTime(), t.order.payment) {
            case "wx":
            case "alipay":
                t.order.spbill_create_ip = "122.224.134.196", t.showAuth_codeBox = !0, t.setIntervalId = setInterval(function () {
                    document.getElementById("auth_code").focus()
                }, 100);
                break;
            case "cash":
            case "card":
            case "pos":
            case "check":
            case "member":
                t.showOrderBox = !1, t.promptWARN = !0, t.wordWARN = "支付中", k.createOrders({}, t.order, function () {
                    t.promptWARN = !1, t.promptOK = !0, t.wordOK = "预订成功，请凭验证码入场", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), F(), z(), A("afterCreate")
                }, function (a) {
                    return t.promptWARN = !1, a.data.data ? (t.promptERR = !0, void(t.wordERR = a.data.data)) : void 0
                })
            }
        }, t.auth_codeCreate = function (b) {
            if (t.promptWARN = !0, t.wordWARN = "支付中", 13 == b.keyCode) switch (clearInterval(t.setIntervalId), t.order.payment) {
            case "wx":
                var c = /^[1][0,1,2,3,4,5][0-9]{16}$/;
                if (!c.test(t.order.auth_code)) return t.order.auth_code = "", t.promptWARN = !1, t.promptERR = !0, void(t.wordERR = "支付码错误，重新扫码");
                k.createOrdersMicropay({}, t.order, function (b) {
                    t.order.auth_code = "", t.promptWARN = !1, t.promptOK = !0, t.wordOK = "预订成功，请凭验证码入场", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), F(), z(), A("afterCreate")
                }, function (a) {
                    return t.promptWARN = !1, a.data.data ? (t.promptERR = !0, void(t.wordERR = a.data.data)) : void 0
                });
                break;
            case "alipay":
                var c = /^[25,26,27,28,29,30][0-9]{14,22}$/;
                if (!c.test(t.order.auth_code)) return t.order.auth_code = "", t.promptWARN = !1, t.promptERR = !0, void(t.wordERR = "支付码错误，重新扫码");
                o.createOrders({}, t.order, function (b) {
                    t.order.auth_code = "", t.promptWARN = !1, t.promptOK = !0, t.wordOK = "预订成功，请凭验证码入场", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), F(), z(), A("afterCreate")
                }, function (a) {
                    return t.promptWARN = !1, a.data.data ? (t.promptERR = !0, void(t.wordERR = a.data.data)) : void 0
                })
            }
        }, t.openShowOrderBox = function () {
            t.showOrderBox = !0, t.showOrderBox = !0, t.order.auth_code = "", ("alipay" == t.order.payment || "wx" == t.order.payment) && (t.showCodeBox = !0)
        }, t.choosePayment = function (a) {
            _.each(t.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), t.order.auth_code = "", a.image = "singleChoose_imageYes", t.order.payment = a.value, "alipay" == a.value || "wx" == a.value ? t.showCodeBox = !0 : t.showCodeBox = !1
        }, t.close = function () {
            z()
        }, t.resert = function () {
            z(), A(), t.memberTelOrCard = "", t.members = null, document.getElementById("cardNoBox").focus()
        }, t.closePrompt = function () {
            t.promptERR = !1, t.promptOK = !1, t.promptWARN = !1, t.showAuth_codeBox = !1, clearInterval(t.setIntervalId)
        }, t.chooseFieldFiexible = function (a, b) {
            if (!t.order._member) return t.promptERR = !0, void(t.wordERR = "请先查找会员信息");
            var c = !1;
            if (_.each(t.times, function (a) {
                var b = _.findWhere(a.priceArr, {
                    week: (new Date).getDay()
                });
                return b.unit ? void 0 : (t.promptERR = !0, t.wordERR = "有场次未设置单位,不可订", c = !0, !1)
            }), !c) {
                t.itemDiscount, a.itemDiscount ? t.itemDiscount = a.itemDiscount : t.itemDiscount = t.members[0].cards.length > 0 ? t.members[0].cards[0].discount : 1, t.chooseStartField && (t.chooseStartField.time.bgColor = ""), t.chooseStartField = {
                    field: a,
                    time: b
                }, t.chooseStartField.time.bgColor = "background:#20a0ff;color:#fff;", t.order.orderArr = [];
                var d = new Date,
                    e = d.getHours(),
                    f = d.getMinutes(),
                    g = 60 * e + f;
                g >= 60 * b.startDate && g <= 60 * b.endDate ? f > 30 ? t.order.orderArr.push({
                    date: t.startDate,
                    _field: a._id,
                    startDateHours: e + 1,
                    startDateMins: 0,
                    endDateHours: e + 1,
                    endDateMins: 0
                }) : 30 > f && f > 0 ? t.order.orderArr.push({
                    date: t.startDate,
                    _field: a._id,
                    startDateHours: e,
                    startDateMins: 30,
                    endDateHours: e,
                    endDateMins: 30
                }) : t.order.orderArr.push({
                    date: t.startDate,
                    _field: a._id,
                    startDateHours: e,
                    startDateMins: f,
                    endDateHours: e,
                    endDateMins: f
                }) : (b.startDateMins > 0 && b.startDateMins < 30 ? b.startDateMins = 30 : b.startDateMins > 30 && b.startDateMins < 60 && (b.startDateMins = 0, b.startDateHours++), t.order.orderArr.push({
                    date: t.startDate,
                    _field: a._id,
                    startDateHours: b.startDateHours,
                    startDateMins: b.startDateMins,
                    endDateHours: b.startDateHours,
                    endDateMins: b.startDateMins
                }));
                var h = t.order.orderArr[0];
                t.startTime = h.startDateHours + ":" + (h.startDateMins < 10 ? "0" + h.startDateMins : h.startDateMins), t.lastTime = 0, h = _.merge(h, {
                    _field: a._id,
                    fieldName: a.name,
                    itmeName: t.showItemName,
                    venueName: t.showVenueName,
                    week: y(t.startDate.getDay())
                }), console.log(new Date(t.startDate))
            }
        }, t.openShowFiexibleOrderBox = function () {
            var a = t.order.orderArr[0];
            a = _.merge(a, {
                timeShowDate: a.startDateHours + ":" + (a.startDateMins >= 10 ? a.startDateMins : "0" + a.startDateMins) + "--" + a.endDateHours + ":" + (a.endDateMins >= 10 ? a.endDateMins : "0" + a.endDateMins)
            }), t.showOrderBox = !0, t.showOrderBox = !0, t.order.auth_code = "", ("alipay" == t.order.payment || "wx" == t.order.payment) && (t.showCodeBox = !0)
        };
        var P = function (a) {
                var b = _.cloneDeep(t.order.orderArr[0]),
                    c = parseInt(t.lastTime / 1),
                    d = t.lastTime % 1 * 60,
                    e = [],
                    f = w(Date.now()),
                    g = x(Date.now());
                if (t.startDate.getTime() > f && t.startDate.getTime() < g)
                    for (var h = (new Date).getHours(); h < t.showHours[t.showHours.length - 1].num + 1; h++) e.push(h);
                else if (t.startDate.getTime() > g)
                    for (var h = t.showHours[0].num; h < t.showHours[t.showHours.length - 1].num + 1; h++) e.push(h);
                switch (a) {
                case "startAdd":
                    30 == b.startDateMins ? (b.startDateMins = 0, b.startDateHours += 1) : b.startDateMins = 30;
                    break;
                case "startReduce":
                    30 == b.startDateMins ? b.startDateMins = 0 : (b.startDateMins = 30, b.startDateHours -= 1);
                    break;
                case "lastAdd":
                    30 == d ? (d = 0, c += 1) : d = 30;
                    break;
                case "lastReduce":
                    30 == d ? d = 0 : (d = 30, c -= 1)
                }
                b.startDateMins + d == 60 ? (b.endDateMins = 0, b.endDateHours = b.startDateHours + c + 1) : b.startDateMins + d == 0 ? (b.endDateMins = 0, b.endDateHours = b.startDateHours + c) : (b.endDateMins = 30, b.endDateHours = b.startDateHours + c);
                var i = b.startDateHours == e[0] - 1 && 30 == b.startDateMins,
                    j = b.startDateHours == e[e.length - 1] && 0 == b.startDateMins,
                    k = b.endDateHours == e[e.length - 1] && 30 == b.endDateMins;
                return i || j || k ? !0 : !1
            },
            Q = function () {
                var a = t.order.orderArr[0],
                    b = a.startDateHours + a.startDateMins / 60,
                    c = a.endDateHours + a.endDateMins / 60,
                    d = 0,
                    e = 0,
                    f = t.itemDiscount,
                    g = [];
                _.each(t.times, function (a) {
                    (a.startDate >= b && a.startDate <= c || a.endDate >= b && a.endDate <= c || a.startDate < b && a.endDate > c) && g.push(a)
                });
                for (var h = 0; h < g.length; h++) {
                    var i, j = g[h],
                        k = t.speDay ? parseInt(t.speDay.weekAs) : t.startDate.getDay(),
                        l = _.findWhere(j.priceArr, {
                            week: k
                        });
                    switch (j.startDate < b && j.endDate > b && j.endDate <= c ? "hours" == l.unit && (i = j.endDate - b) : j.startDate >= b && j.endDate <= c ? "hours" == l.unit && (i = j.continueHours) : j.startDate >= b && j.startDate < c && j.endDate > c ? "hours" == l.unit && (i = c - j.startDate) : j.startDate < b && j.endDate > c ? "hours" == l.unit && (i = c - b) : "hours" == l.unit && (i = 0), l.unit) {
                    case "sign":
                        d += 100 * l.price, e += 100 * l.price;
                        break;
                    case "hours":
                        i % 1 > 0 && .5 > i % 1 ? i = parseInt(i / 1) + .5 : i % 1 > .5 && 1 > i % 1 && (i = parseInt(i / 1) + 1), d += l.price * i * f * 100, e += l.price * i * 100
                    }
                    t.order.total = v(d / 100), t.order.subtotal = v(e / 100)
                }
            };
        t.changeStartTime = function (a) {
            if (!t.startTime || "点击场次获取" == t.startTime) return t.promptERR = !0, void(t.wordERR = "先点击场次获取开始时间");
            var b = t.order.orderArr[0];
            if ("add" == a) {
                if (P("startAdd")) return t.promptERR = !0, void(t.wordERR = "超出范围不可选");
                30 == b.startDateMins ? (b.startDateMins = 0, b.startDateHours += 1) : b.startDateMins = 30
            } else {
                if (P("startReduce")) return t.promptERR = !0, void(t.wordERR = "超出范围不可选");
                30 == b.startDateMins ? b.startDateMins = 0 : (b.startDateMins = 30, b.startDateHours -= 1)
            }
            var c = b.startDateMins / 60 + b.startDateHours + t.lastTime;
            c % 1 > 0 && .5 >= c % 1 ? (b.endDateMins = 30, b.endDateHours = parseInt(c / 1)) : c % 1 > .5 && 1 > c % 1 ? (b.endDateMins = 0, b.endDateHours = parseInt(c / 1) + 1) : (b.endDateMins = 0, b.endDateHours = parseInt(c / 1)), t.startTime = b.startDateHours + ":" + (b.startDateMins < 10 ? "0" + b.startDateMins : b.startDateMins), Q()
        }, t.changeLastTime = function (a) {
            if (!t.startTime || "点击场次获取" == t.startTime) return t.promptERR = !0, void(t.wordERR = "先点击场次获取开始时间");
            var b = t.order.orderArr[0];
            if ("add" == a) {
                if (P("lastAdd")) return t.promptERR = !0, void(t.wordERR = "超出范围不可选");
                30 == b.endDateMins ? (b.endDateHours++, b.endDateMins = 0) : b.endDateMins = 30, t.lastTime += .5
            } else {
                if (P("lastReduce")) return t.promptERR = !0, void(t.wordERR = "超出范围不可选");
                if (b.startDateHours == b.endDateHours && b.startDateMins == b.endDateMins) return;
                30 == b.endDateMins ? b.endDateMins = 0 : (b.endDateHours--, b.endDateMins = 30), t.lastTime -= .5
            }
            Q()
        }, t.createFlexible = function () {
            switch (t.order.orderArr[0].price = parseFloat(t.order.subtotal), t.order.orderDate || (t.order.orderDate = t.startDate), t.order.orderDate = new Date(t.order.orderDate).getTime(), t.order.payment) {
            case "wx":
            case "alipay":
                t.order.spbill_create_ip = "122.224.134.196", t.showAuth_codeBox = !0, document.getElementById("auth_code").focus();
                break;
            case "cash":
            case "card":
            case "pos":
            case "check":
            case "member":
                t.showOrderBox = !1, t.promptWARN = !0, t.wordWARN = "支付中", k.createOrders({}, t.order, function (b) {
                    t.promptWARN = !1, t.promptOK = !0, t.wordOK = "预订成功，请凭验证码入场", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), F(), z(), A("afterCreate")
                }, function (a) {
                    return t.promptWARN = !1, a.data.data ? (t.promptERR = !0, void(t.wordERR = a.data.data)) : void 0
                })
            }
        };
        t.createMember = function () {
            return t.member.name ? t.member.tel ? void n.create({}, t.member, function (a) {
                var b = t.memberTelOrCard;
                z(), A(), t.members = [a.data.member], t.members.length > 0 && (t.showMemberInfo = !0, t.order._member = t.members[0]._id), t.memberTelOrCard = b
            }, function (a) {
                return "ValidationError: 该号码已被使用." == a.data.data ? (t.promptERR = !0, void(t.wordERR = "该号码已被使用")) : "数据错误：手机格式错误" == a.data.data ? (t.promptERR = !0, void(t.wordERR = "手机格式错误")) : void 0
            }) : (t.promptERR = !0, void(t.wordERR = "请填写手机号")) : (t.promptERR = !0, void(t.wordERR = "请填写名称"))
        }, t.changeRechargeType = function (a) {
            t.chargeCardNum = "", t.chargeCardPassword = "", t.rechargeType = a, "speCard" == a && l.index({
                isUsed: !0
            }, function (a) {
                t.venues_clone = a.data.venues, _.each(t.venues_clone, function (a) {
                    a.image = "singleChoose_imageNo2"
                }), t.chargeVenue = t.venues_clone[0], t.venues_clone[0].image = "singleChoose_imageYes2"
            }, function () {})
        }, t.openShowRechargeBox = function (a) {
            t.needIdCard = a, t.showRechargeBox = !0, t.paymentArr = [{
                name: "支付宝",
                value: "alipay",
                image: "singleChoose_imageYes"
            }, {
                name: "微信",
                value: "wx",
                image: "singleChoose_imageNo"
            }, {
                name: "现金",
                value: "cash",
                image: "singleChoose_imageNo"
            }, {
                name: "支票",
                value: "check",
                image: "singleChoose_imageNo"
            }, {
                name: "转账",
                value: "card",
                image: "singleChoose_imageNo"
            }, {
                name: "POS机",
                value: "pos",
                image: "singleChoose_imageNo"
            }], t.rechargePayment = "alipay", t.showCardName = t.cards[0].name + "(" + t.cards[0].price + "元)", t.chooseCardId = t.cards[0]._id, t.rechargeType = "cash"
        }, t.chooseCard = function (a) {
            t.openChooseCardBox = !1, t.showCardName = a.name + "(" + a.price + "元)", t.chooseCardId = a._id
        }, t.chooseRechargePayment = function (a) {
            _.each(t.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", t.rechargePayment = a.value
        }, t.recharge = function () {
            if ("idCard" == t.needIdCard) {
                if (!t.idCard) return t.promptERR = !0, void(t.wordERR = "请输入身份证号");
                n.update({
                    id: t.members[0]._id
                }, {
                    idCard: t.idCard
                }, function () {
                    t.showRechargeBox = !1, t.promptOK = !0, t.wordOK = "认证成功", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), t.idCard = "", t.checkMember(t.members[0]._id)
                }, function () {})
            } else if ("cash" == t.rechargeType) switch (t.rechargePayment) {
            case "wx":
            case "alipay":
                t.showAuth_codeBox = !0, t.rechargeAuth_code = "", t.rechargeSpbill_create_ip = "122.224.134.196", t.setIntervalId = setInterval(function () {
                    document.getElementById("rechargeAuth_code").focus()
                }, 100);
                break;
            case "cash":
            case "check":
            case "card":
            case "pos":
                t.showRechargeBox = !1, t.promptWARN = !0, t.wordWARN = "支付中";
                var b = {
                    _card: t.chooseCardId,
                    payment: t.rechargePayment
                };
                n.addCard({
                    id: t.members[0]._id
                }, b, function (b) {
                    t.promptWARN = !1, t.promptOK = !0, t.wordOK = "充值成功", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), t.idCard = "", t.checkMember(t.members[0]._id)
                }, function (a) {})
            } else {
                if (!t.chargeCardNum) return t.promptERR = !0, void(t.wordERR = "请输入充值卡卡号");
                if (!t.chargeCardPassword) return t.promptERR = !0, void(t.wordERR = "请输入充值卡密码");
                var c = {
                    cardNum: t.chargeCardNum,
                    password: t.chargeCardPassword
                };
                t.chargeVenue && "speCard" == t.rechargeType && (c = _.merge(c, {
                    _venue: t.chargeVenue._id
                })), q.charge({
                    id: t.members[0]._id
                }, c, function (b) {
                    t.showRechargeBox = !1, t.promptOK = !0, t.wordOK = b.data.data, setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), t.checkMember(t.members[0]._id), t.chargeVenue = "", t.chargeCardNum = "", t.chargeCardPassword = "", t.rechargeType = "cash"
                }, function (a) {
                    "找不到对象：card" == a.data.data ? (t.promptERR = !0, t.wordERR = "充值卡不存在或已使用") : (t.promptERR = !0, t.wordERR = a.data.data)
                })
            }
        }, t.rechargeAuth_codeCreate = function (b) {
            if (t.promptWARN = !0, t.wordWARN = "支付中", 13 == b.keyCode) switch (t.showRechargeBox = !1, t.showAuth_codeBox = !1, clearInterval(t.setIntervalId), t.rechargePayment) {
            case "wx":
                var c = /^[1][0,1,2,3,4,5][0-9]{16}$/;
                if (!c.test(t.rechargeAuth_code)) return t.rechargeAuth_code = "", t.promptWARN = !1, t.promptERR = !0, void(t.wordERR = "支付码错误，重新扫码");
                var d = {
                    _member: t.members[0]._id,
                    _card: t.chooseCardId,
                    auth_code: t.rechargeAuth_code,
                    spbill_create_ip: t.rechargeSpbill_create_ip,
                    payment: "wx"
                };
                p.pay(d, function (b) {
                    t.rechargeAuth_code = "", t.promptWARN = !1, t.promptOK = !0, t.wordOK = "充值成功", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), t.idCard = "", t.checkMember(t.members[0]._id)
                }, function (a) {
                    return t.promptWARN = !1, a.data.data ? (t.promptERR = !0, void(t.wordERR = a.data.data)) : void 0
                });
                break;
            case "alipay":
                var c = /^[25,26,27,28,29,30][0-9]{14,22}$/;
                if (!c.test(t.rechargeAuth_code)) return t.rechargeAuth_code = "", t.promptWARN = !1, t.promptERR = !0, void(t.wordERR = "支付码错误，重新扫码");
                var d = {
                    _member: t.members[0]._id,
                    _card: t.chooseCardId,
                    auth_code: t.rechargeAuth_code,
                    payment: "alipay"
                };
                o.pay(d, function (b) {
                    t.rechargeAuth_code = "", t.promptWARN = !1, t.promptOK = !0, t.wordOK = "充值成功", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), t.idCard = "", t.checkMember(t.members[0]._id)
                }, function (a) {
                    return t.promptWARN = !1, a.data.data ? (t.promptERR = !0, void(t.wordERR = a.data.data)) : void 0
                })
            }
        }, t.chooseChargeVenue = function (a) {
            t.chargeVenue ? t.chargeVenue._id == a._id ? (t.chargeVenue.image = "singleChoose_imageNo2", t.chargeVenue = "") : (t.chargeVenue.image = "singleChoose_imageNo2", t.chargeVenue = a, t.chargeVenue.image = "singleChoose_imageYes2") : (t.chargeVenue = a, t.chargeVenue.image = "singleChoose_imageYes2")
        }, t.enterCheck = function (a) {
            13 == a.keyCode && t.checkMember()
        }, B()
    }
    angular.module("fieldApp").controller("CsdFieldBookCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Time", "Field", "Orderlist", "Venue", "Item", "Member", "Alipay", "Card", "Tucard", "Membertype"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q) {
        var r, s = this;
        s.titleState = f.params.state || "sale", s.paymentArr = [{
            name: "现金",
            value: "cash",
            image: "singleChoose_imageYes"
        }, {
            name: "支付宝",
            value: "alipay",
            image: "singleChoose_imageNo"
        }, {
            name: "微信",
            value: "wx",
            image: "singleChoose_imageNo"
        }, {
            name: "余额",
            value: "member",
            image: "singleChoose_imageNo"
        }], s.page = 1, s.itemsPerPage = 10, s.pagination = {
            page: s.page,
            itemsPerPage: s.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, s.startDate = new Date, s.startDate.setDate(1), s.closeDate = new Date, s.buyPayment = "cash", s.close = function () {
            s.payFlag = !1, s.total = 0, s.auth_code = "", s.resert(), s.tickets = [], s.canFlag = !1, "所有场馆" == s.vName ? u() : s.getTicket()
        }, s.judgePay = function (a) {
            if (0 == a.num) s.promptERR = !0, s.wordERR = "请先设置门票数量";
            else {
                s.payFlag = !0, s.total = a.num * a.price, s.buyTickets = [];
                var b = {
                    _ticket: a._id,
                    count: a.num,
                    _venue: a._venue,
                    _item: a._item,
                    showDate: a.showDate
                };
                s._vId = a._venue._id, s.num = a.num, s.ticketName = a.name, s.price = a.price, s.buyTickets.push(b), s.showDate = s.buyTickets[0].showDate, s.venueName = s.buyTickets[0]._venue.name, s.itemName = s.buyTickets[0]._item.name
            }
        }, s.create = function () {
            switch (s.buyPayment) {
            case "cash":
                var a = {
                    payment: s.buyPayment,
                    tickets: s.buyTickets
                };
                s.canFlag || (s.canFlag = !0, q.buy(a, function (a) {
                    s.promptOK = !0, s.wordOK = "购买成功", n(function () {
                        s.promptOK = !1
                    }, 1e3), s.print()
                }, function (a) {
                    s.promptERR = !1, s.wordERR = a.data.data
                }));
                break;
            case "wx":
            case "alipay":
            case "member":
                s.showAuth_codeBox = !0, s.setIntervalId = setInterval(function () {
                    document.getElementById("auth_code").focus()
                }, 100)
            }
        }, s.auth_codeCreate = function (a) {
            if (s.promptWARN = !0, s.wordWARN = "支付中", 13 == a.keyCode) switch (console.log(s.buyPayment), s.buyPayment) {
            case "wx":
                var b = {
                    _venue: s._vId,
                    shopProductArr: s.brr,
                    auth_code: s.auth_code,
                    spbill_create_ip: "0.0.0.0",
                    tickets: s.buyTickets
                };
                q.wxBuy(b, function (a) {
                    s.showAuth_codeBox = !1, s.promptOK = !0, s.promptWARN = !1, s.wordOK = "购买成功", clearInterval(s.setIntervalId), s.print(), n(function () {
                        s.promptOK = !1
                    }, 1e3)
                }, function (a) {
                    s.promptERR = !0, s.promptWARN = !1, clearInterval(s.setIntervalId), s.wordERR = a.data.data
                });
                break;
            case "alipay":
                var b = {
                    _venue: s._vId,
                    auth_code: s.auth_code,
                    tickets: s.buyTickets
                };
                l.payTicket(b, function (a) {
                    s.showAuth_codeBox = !1, s.promptOK = !0, s.promptWARN = !1, s.wordOK = "购买成功", clearInterval(s.setIntervalId), s.print(), n(function () {
                        s.promptOK = !1
                    }, 1e3)
                }, function (a) {
                    s.promptWARN = !1, s.promptERR = !0, clearInterval(s.setIntervalId), s.wordERR = a.data.data + ",请更新支付码再支付"
                });
                break;
            case "member":
                var c = {};
                m.index({
                    id: "today"
                }, function (a) {
                    r = a.data;
                    var b = t(s.auth_code);
                    console.log(b), b ? i.index({
                        id: b
                    }, function (a) {
                        var c = {
                            _member: b,
                            payment: s.buyPayment,
                            tickets: s.buyTickets
                        };
                        q.buy(c, function (a) {
                            s.showAuth_codeBox = !1, s.promptOK = !0, n(function () {
                                s.promptOK = !1
                            }, 1e3), s.promptWARN = !1, s.wordOK = "购买成功", clearInterval(s.setIntervalId), s.print()
                        }, function (a) {
                            s.promptERR = !1, s.wordERR = a.data.data
                        })
                    }, function (a) {
                        s.promptERR = !0, s.wordERR = "会员不存在"
                    }) : (c = {
                        cardNo: s.auth_code
                    }, i.indexBycard(c, function (a) {
                        var b = {
                            _member: a.data.member._id,
                            payment: s.buyPayment,
                            tickets: s.buyTickets
                        };
                        q.buy(b, function (a) {
                            s.showAuth_codeBox = !1, s.promptOK = !0, n(function () {
                                s.promptOK = !1
                            }, 1e3), s.promptWARN = !1, s.wordOK = "购买成功", clearInterval(s.setIntervalId), s.print()
                        }, function (a) {
                            s.promptERR = !1, s.wordERR = a.data.data
                        })
                    }, function (a) {
                        s.promptERR = !0, s.wordERR = "会员不存在"
                    }))
                })
            }
        }, s.getNowFormatDate = function (a) {
            var b = "-",
                c = ":",
                d = a.getMonth() + 1,
                e = a.getDate();
            d >= 1 && 9 >= d && (d = "0" + d), e >= 0 && 9 >= e && (e = "0" + e);
            var f = a.getFullYear() + b + d + b + e + " " + a.getHours() + c + a.getMinutes() + c + a.getSeconds();
            return f
        }, s.print = function (a) {
            var b = '<div><div><h3 style="font-size:20px">欢迎光临</h3><h3 style="font-size:20px">购买门票消费小票</h3>操作员：' + s.admin + '</h3></div><span>**********************************</span><div><div style="border-bottom: 1px solid #DADADA;"><table style="width: 100%;"><thead><tr><td width="50%">商品名称</td><td width="20%">数量</td><td width="30%">单价</td></tr></thead>';
            b = b + '<tbody><tr><td style="font-size:36px">' + s.ticketName + "</td><td>" + s.num + "</td><td>" + s.price + "</td></tr>", b = b + "<tr><td>合计</td><td>" + s.total + "</td><td></td></tr></tbody></table></div><span>**********************************</span>", b = b + "<div>时间段:" + s.showDate + "</div><div>场馆:" + s.venueName + "</div><div>项目:" + s.itemName + "</div>", b = b + "<div>消费日期:" + s.getNowFormatDate(new Date) + "</div><span>**********************************</span><div>客户签名:</div>";
            var c = getLodop();
            c.PRINT_INIT(""), c.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), c.SET_PRINTER_INDEXA(-1), c.SET_PRINT_PAGESIZE(3, 800, 100, ""), c.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", b), c.PRINT(), s.close()
        }, s.resert = function () {
            s.showMemberInfo = !1, s.memberTelOrCard = "", s.members = []
        }, s.pageChanged = function () {
            s.getRecord()
        }, s.getRecord = function () {
            n(function () {
                s.startDateFlag = !1, s.closeDateFlag = !1;
                var a = {
                    page: s.pagination.page,
                    itemsPerPage: s.pagination.itemsPerPage,
                    statuses: ["buyTicket"],
                    startDate: s.startDate.getTime(),
                    endDate: s.closeDate.getTime(),
                    name: s.searchName
                };
                k.index(a, function (a) {
                    s.records = a.data.records;
                    var b = a.data.count;
                    s.pagination.totalItems = b, s.pagination.numPages = b / s.itemsPerPage
                })
            }, 100)
        }, s.dealNumber = function (a, b) {
            var c = a.toFixed(3);
            return b ? c.substring(0, c.lastIndexOf(".") + 3) : parseFloat(c.substring(0, c.lastIndexOf(".") + 3))
        }, s.choosePayment = function (a) {
            _.each(s.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", s.buyPayment = a.value
        }, s.changeTitle = function (a) {
            switch (s.titleState = "", a) {
            case "sale":
                s.titleState = "sale", f.go("csd-ticket.ticket", {
                    state: "sale"
                });
                break;
            default:
                s.titleState = "record", f.go("csd-ticket.record", {
                    state: "record"
                })
            }
            x()
        };
        var t = function (a) {
            var b = a.split("|");
            if (3 != b.length) return !1;
            var a = b[0],
                c = b[1].split(""),
                d = b[2],
                e = d,
                f = parseInt(r / 6e4).toString().split("");
            if (c.length < f.length) return !1;
            for (var g = 0; g < f.length; g++) d = d.replace(f[g], c[g]);
            return d == a ? e : !1
        };
        s.changeNum = function (a, b) {
            if ("add" == b) a.num = 1 * a.num + 1;
            else {
                if (0 == a.num) return;
                a.num = 1 * a.num - 1
            }
        }, s.chooseItem = function (a) {
            s.iId = a._id, s.iName = a.name, s.selectItemFlag = !1, s.tickets = [], "所有场馆" == s.vName ? u() : s.getTicket()
        }, s.chooseVenue = function (a) {
            s.vId = a._id, s.vName = a.name, s.selectVenueFlag = !1, s.tickets = [], "所有场馆" == s.vName ? u() : s.getTicket()
        }, s.getTicket = function () {
            var a = {
                sortBy: "startDate",
                sortValue: "asc",
                _item: s.iId,
                _venue: s.vId
            };
            q.index(a, function (a) {
                _.each(a.data.tickets, function (a) {
                    a.num = 0, s.tickets.push(a)
                }), "所有场馆" == s.vName && s.venues.length > s.i + 1 && (s.i = s.i + 1, s.vId = s.venues[s.i]._id, s.getTicket(s.venues[s.i]))
            }, function () {})
        };
        var u = function () {
                o.index({}, function (a) {
                    s.venues = a.data.venues, s.vrr = [];
                    var b = {
                        name: "所有场馆",
                        _id: ""
                    };
                    s.vName = "所有场馆", s.vId = "", s.vrr.push(b), _.each(s.venues, function (a) {
                        s.vrr.push(a)
                    }), s.tickets = [], s.venues.length > 0 && (s.i = 0, s.vId = s.venues[0]._id, s.getTicket(s.venues[0]))
                }, function () {})
            },
            v = function () {
                j.index({
                    isUsed: !0
                }, function (a) {
                    s.items = a.data.items, s.irr = [];
                    var b = {
                        name: "所有项目",
                        _id: ""
                    };
                    s.iName = "所有项目", s.iId = "", s.irr.push(b), _.each(s.items, function (a) {
                        s.irr.push(a)
                    }), u()
                }, function (a) {})
            };
        s.finish = function () {
            return s.needFlag && !s.cardNum ? void(s.cardFlag = !0) : (s.payFlag = !0, s.defindFlag = !1, void(s.moneyFlag = !0))
        };
        var w = function () {
                e.get({}, function (a) {
                    s.admin = a.data.user.name
                }, function () {})
            },
            x = function () {
                s.getRecord(), v(), w()
            };
        x()
    }
    angular.module("fieldApp").controller("CsdTicketCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "Item", "Record", "Alipay", "Time", "$timeout", "Venue", "Tucard", "Ticket"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        var p = this;
        p.titleState = f.params.state || "field";
        var q = function () {
                k.index({}, function (a) {
                    p.venues = a.data.venues, _.each(p.venues, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), p.chooseVenueName(p.venues[0])
                }, function () {})
            },
            r = function () {
                e.index({
                    role: "checkStand"
                }, function (a) {
                    s(a.data.users)
                }, function () {})
            },
            s = function (a) {
                e.get({}, function (b) {
                    var c = b.data.user._organization ? b.data.user._organization : b.data.user._id;
                    e.getOrgInfo({
                        id: c
                    }, function (b) {
                        p.workers = [{
                            name: "微信",
                            _id: "wx"
                        }].concat(a), _.each(p.workers, function (a) {
                            a.image = "manyChoose_imageNo"
                        }), q()
                    }, function () {})
                }, function () {})
            },
            t = function () {
                p.hasChooseVenue = [], p.hasChooseItem = [], p.hasChooseWorker = [], _.each(p.items, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseItem.push(a)
                }), _.each(p.venues, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseVenue.push(a)
                }), _.each(p.workers, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseWorker.push(a)
                })
            },
            u = function () {
                t(), p.hasChooseItem.length > 0 && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "item" : 0 == p.hasChooseItem.length && p.hasChooseVenue.length > 0 && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "venue" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && p.hasChooseWorker.length > 0 && !p.whatFirst ? p.whatFirst = "worker" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && (p.whatFirst = ""), 0 == p.hasChooseItem.length && "item" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseVenue.length && "venue" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseWorker.length && "worker" == p.whatFirst && (p.whatFirst = "")
            },
            v = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    _.each(p.venues, function (b) {
                        var d = _.findWhere(b.items, {
                            _id: a._id
                        });
                        return d ? void c.push(b) : void 0
                    })
                }), b(c)
            },
            w = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    a.venues && a.venues.length > 0 ? _.each(p.venues, function (b) {
                        var d = _.findWhere(a.venues, {
                            _id: b._id
                        });
                        if (d) {
                            var e = _.findWhere(c, {
                                _id: d._id
                            });
                            if (!e) return void c.push(b)
                        }
                    }) : c = p.venues
                }), b(c)
            },
            x = function (a, b) {
                var c = [];
                return _.each(a, function (a) {
                    _.each(a.items, function (b) {
                        var d = _.findWhere(c, {
                            _id: b._id
                        });
                        d || (c = c.concat(a.items))
                    })
                }), b ? void b(c) : c
            },
            y = function (a, b) {
                var c = [];
                return _.each(p.workers, function (b) {
                    b.venues && b.venues.length > 0 ? _.each(a, function (a) {
                        var d = _.findWhere(b.venues, {
                            _id: a._id
                        });
                        d && c.indexOf(b) < 0 && c.push(b)
                    }) : b.venues || c.push(b)
                }), b ? void b(c) : c
            };
        p.chooseItemName = function (a) {
            B(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseItem.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseItem.splice(p.hasChooseItem.indexOf(a), 1)), u(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "item" == p.whatFirst && v(p.hasChooseItem, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), y(a, function (a) {
                    _.each(p.workers, function (b) {
                        -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                    })
                })
            }), F()
        }, p.chooseVenueName = function (a) {
            if (B(), "manyChoose_imageNo" == a.image) a.image = "manyChoose_imageYes", p.hasChooseVenue.push(a);
            else {
                if (1 == p.hasChooseVenue.length) return p.promptERR = !0, void(p.wordERR = "必须选择一个场馆");
                a.image = "manyChoose_imageNo", p.hasChooseVenue.splice(p.hasChooseVenue.indexOf(a), 1)
            }
            u(), p.whatFirst || (_.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "venue" == p.whatFirst && (x(p.hasChooseVenue, function (a) {
                _.each(p.items, function (b) {
                    var c = _.findWhere(a, {
                        _id: b._id
                    });
                    c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                })
            }), y(p.hasChooseVenue, function (a) {
                _.each(p.workers, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                })
            })), F()
        }, p.chooseWorkerName = function (a) {
            B(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseWorker.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseWorker.splice(p.hasChooseWorker.indexOf(a), 1)), u(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            })), "worker" == p.whatFirst && w(p.hasChooseWorker, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), x(a, function (a) {
                    _.each(p.items, function (b) {
                        var c = _.findWhere(a, {
                            _id: b._id
                        });
                        c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                    })
                })
            }), F()
        };
        var z = function () {
                A(), r()
            },
            A = function () {
                p.hasChooseItem = [], p.hasChooseVenue = [], p.hasChooseWorker = [], p.searchVenueIdArr = [], p.searchItemIdArr = [], p.searchType = "", p.searchWorkerId = "", p.searchPayment = "", p.searchMemberId = "", p.searchMemberType = "", p.whatFirst = "", p.venueArr = [], p.itemArr = [], p.errState = "add", p.errRecordId = "", p.errPrice = "", p.errRemark = "", p.showTypeName = "类型", p.showWorkerName = "提交人", p.showPaymentName = "支付方式", p.showMemberName = "用户名", p.showMemberTypeName = "类型", p.startDate = new Date, p.endDate = new Date, p.paymentArr = [{
                    name: "全部"
                }, {
                    name: "现金支付",
                    value: "cash"
                }, {
                    name: "微信支付",
                    value: "wx"
                }, {
                    name: "支付宝",
                    value: "alipay"
                }, {
                    name: "转账支付",
                    value: "card"
                }, {
                    name: "支票支付",
                    value: "check"
                }, {
                    name: "POS机支付",
                    value: "pos"
                }], _.each(p.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.venues, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.workers, function (a) {
                    a.image = "manyChoose_imageNo"
                }), p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            B = function () {
                p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            C = function () {
                p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1, p.showChooseItemBox = !1, p.showChooseVenueBox = !1, p.showChooseTypeBox = !1, p.showChooseWorkerBox = !1, p.showChooseMemberBox = !1, p.showChoosePaymentBox = !1, p.showChooseMemberTypeBox = !1, p.showChooseWorkerBox = !1, p.showErrChangeBox = !1, p.showPreview = !1, p.showDetail = !1
            },
            D = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            };
        p.pageChanged = function () {
            G()
        }, p.closeChooseStartDateBox = function () {
            C(), B(), setTimeout(function () {
                F()
            }, 100)
        }, p.closeChooseEndDateBox = function () {
            C(), B(), setTimeout(function () {
                F()
            }, 100)
        }, p.choosePaymentName = function (a) {
            p.showChoosePaymentBox = !1, B(), p.showPaymentName = a.name, p.searchPayment = a.value, G()
        }, p.openErrChangeBox = function (a) {
            C(), p.showErrChangeBox = !0, p.errRecordId = a
        }, p.chooseErrState = function (a) {
            "add" == a ? p.errState = "add" : p.errState = "reduce"
        }, p.changeErrRemark = function () {
            if (!p.errPrice) return p.promptERR = !0, void(p.wordERR = "请填写纠错金额");
            if (!p.errRemark) return p.promptERR = !0, void(p.wordERR = "请填写纠错备注");
            var a = {
                _record: p.errRecordId,
                state: p.errState,
                cost: parseFloat(p.errPrice),
                remark: p.errRemark
            };
            i.create({}, a, function () {
                G()
            }, function () {})
        }, p.closePrompt = function () {
            p.promptOK = !1, p.promptERR = !1, p.promptWARN = !1, p.searchWorkerIdArr = [], p.searchPayment = ""
        };
        var E = function (a) {
                var b = 0;
                return b = D((100 * b + 100 * p.resultType.statuses.ticket[a]) / 100), b = D((100 * b + 100 * p.resultType.statuses.memberService[a]) / 100), b = D((100 * b + 100 * p.resultType.statuses.cardFee[a]) / 100), b = D((100 * b + 100 * p.resultType.statuses.bail[a]) / 100), b = D((100 * b + 100 * p.resultType.statuses.refundBail[a]) / 100)
            },
            F = function () {
                p.promptWARN = !0, p.wordWARN = "统计中";
                var a = {
                        startDate: p.startDate.getTime(),
                        endDate: p.endDate.getTime()
                    },
                    b = {
                        startDate: p.startDate.getTime(),
                        endDate: p.endDate.getTime(),
                        status: "makeCard",
                        all: "all"
                    },
                    c = {
                        startDate: p.startDate.getTime(),
                        endDate: p.endDate.getTime(),
                        state: "realNumber",
                        all: "all"
                    };
                p.dateName = "", p.dateName += p.startDate.getFullYear() + "年", p.dateName += p.startDate.getMonth() + 1 > 9 ? p.startDate.getMonth() + 1 + "月" : "0" + (p.startDate.getMonth() + 1) + "月", p.dateName += p.startDate.getDate() > 9 ? p.startDate.getDate() + "日-" : "0" + p.startDate.getDate() + "日-", p.dateName += p.endDate.getFullYear() + "年", p.dateName += p.endDate.getMonth() + 1 > 9 ? p.endDate.getMonth() + 1 + "月" : "0" + (p.endDate.getMonth() + 1) + "月", p.dateName += p.endDate.getDate() > 9 ? p.endDate.getDate() + "日" : "0" + p.endDate.getDate() + "日";
                var d = [];
                p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                    "manyChoose_imageYes" == a.image && (p.searchVenueIdArr.push(a._id), d.push(a))
                }), p.venueName = "";
                for (var e = 0; e < d.length; e++) p.venueName += (0 == e ? "" : "/") + d[e].name;
                p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                    venues: p.searchVenueIdArr
                }));
                var f = [];
                p.searchWorkerIdArr = [], _.each(p.workers, function (a) {
                    "manyChoose_imageYes" == a.image && (p.searchWorkerIdArr.push(a._id), f.push(a))
                }), p.workerName = "";
                for (var e = 0; e < f.length; e++) p.workerName += (0 == e ? "" : "/") + f[e].name;
                console.log(p.workerName), p.searchWorkerIdArr.length > 0 && (a = _.merge(a, {
                    workers: p.searchWorkerIdArr
                }));
                var g = [];
                o.business(a, function (d) {
                    p.result = d.data.statistic, _.each(p.result, function (a) {
                        "wx" != a._worker && "all" != a._worker && g.push(a._worker)
                    }), b = _.merge(b, {
                        workers: g
                    }), c = _.merge(c, {
                        realWorkers: g
                    }), n.index(b, function (b) {
                        var d = b.data.cardRecords;
                        _.each(d, function (a) {
                            var b = _.findWhere(p.result, {
                                    _worker: a._worker
                                }),
                                c = _.findWhere(p.result, {
                                    _worker: "all"
                                });
                            b && (b.issueCardCount = b.issueCardCount ? b.issueCardCount + 1 : 1, c.issueCardCount = c.issueCardCount ? c.issueCardCount + 1 : 1)
                        }), l.index(c, function (b) {
                            var c = b.data.members;
                            _.each(c, function (a) {
                                var b = _.findWhere(p.result, {
                                        _worker: a._realWorker
                                    }),
                                    c = _.findWhere(p.result, {
                                        _worker: "all"
                                    });
                                b && (b.realMemberCount = b.realMemberCount ? b.realMemberCount + 1 : 1, c.realMemberCount = c.realMemberCount ? c.realMemberCount + 1 : 1)
                            }), a.venues = ["5a1e4774138f87e51c2e79e9"], o.type(a, function (a) {
                                p.resultType = a.data.statistic[a.data.statistic.length - 1], p.resultType.statuses.cardFee.quantity = p.resultType.statuses.cardFee.subtotal / 20, p.resultType.statuses.bail.quantity = p.resultType.statuses.bail.subtotal / 20, p.resultType.statuses.refundBail.quantity = p.resultType.statuses.refundBail.subtotal / -20, p.resultType.wxTotal = E("wx"), p.resultType.alipayTotal = E("alipay"), p.resultType.cashTotal = E("cash"), p.resultType.cardTotal = E("card"), p.resultType.checkTotal = E("check"), p.resultType.posTotal = E("pos"), p.resultType.subtotal = 0, p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.wxTotal) / 100), p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.alipayTotal) / 100), p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.cashTotal) / 100), p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.cardTotal) / 100), p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.checkTotal) / 100), p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.posTotal) / 100), p.searchVenueIdArr.indexOf("5a1e4774138f87e51c2e79e9") > -1 ? p.baoyugang = !0 : p.baoyugang = !1, p.promptWARN = !1
                            }, function () {})
                        }, function () {})
                    }, function () {})
                }, function () {})
            };
        p["export"] = function (a) {
            var b = p.dateName + p.venueName + "的" + p.workerName + "收入汇总表";
            setTimeout(function () {
                execl1(a, b)
            }, 100)
        }, p.initCondition = function (a) {
            a ? "微信" == a ? p.searchWorkerIdArr = ["wx"] : p.searchWorkerName = a : (p.searchWorkerIdArr = [], _.each(p.workers, function (a) {
                "manyChoose_imageYes" == a.image && p.searchWorkerIdArr.push(a._id)
            })), G()
        };
        var G = function () {
            var a = {
                page: p.pagination.page,
                itemsPerPage: p.pagination.itemsPerPage,
                state: "other"
            };
            p.startDate && p.endDate && (a = _.merge(a, {
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            })), p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && p.searchVenueIdArr.push(a._id)
            }), p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: p.searchVenueIdArr
            })), p.searchWorkerIdArr.length > 0 && (a = _.merge(a, {
                workers: p.searchWorkerIdArr
            })), p.searchWorkerName && (a = _.merge(a, {
                workerName: p.searchWorkerName
            })), p.searchPayment && (a = _.merge(a, {
                payments: [p.searchPayment]
            })), i.index(a, function (a) {
                if (p.recordsDetail = a.data.records, !(p.recordsDetail.length > 0)) return p.promptERR = !0, void(p.wordERR = "暂无记录");
                p.showDetail = !0;
                var b = 1;
                _.each(p.recordsDetail, function (a) {
                    if (a.index = b, b++, a.state) a.cost = ("add" == a.state ? "+" : "-") + a.cost;
                    else switch (a.status) {
                    case "pay":
                    case "buy":
                    case "buyProduct":
                    case "buyShopProduct":
                    case "buySpe":
                    case "bindCard":
                        a.cost = "+" + a.cost;
                        break;
                    case "refund":
                    case "cardRefund":
                    case "refundProduct":
                    case "refundShopProduct":
                    case "refundSpe":
                        a.cost = "-" + a.cost
                    }
                    switch (a.payment) {
                    case "wx":
                        a.payment = "微信支付";
                        break;
                    case "card":
                        a.payment = "转账支付";
                        break;
                    case "cash":
                        a.payment = "现金支付";
                        break;
                    case "alipay":
                        a.payment = "支付宝支付";
                        break;
                    case "check":
                        a.payment = "支票支付";
                        break;
                    case "pos":
                        a.payment = "POS机支付";
                        break;
                    default:
                        a.payment = "无"
                    }
                });
                var c = a.data.count;
                p.pagination.totalItems = c, p.pagination.numPages = c / p.itemsPerPage
            }, function () {})
        };
        p.close = function () {
            C(), p.searchWorkerIdArr = [], p.searchPayment = "", B()
        }, z()
    }
    angular.module("fieldApp").controller("CsdFinanceCashallCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Record", "Item", "Venue", "Member", "Product", "Cardrecords", "Finance"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
        var q = this;
        q.titleState = f.params.state || "field";
        var r = function () {
                q.items = [], _.each(q.venues, function (a) {
                    _.each(a.items, function (a) {
                        q.items.indexOf(a) < 0 && q.items.push(a)
                    })
                }), _.each(q.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), q.chooseVenueName(q.venues[0])
            },
            s = function () {
                k.index({}, function (a) {
                    q.venues = a.data.venues, _.each(q.venues, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), r()
                }, function () {})
            },
            t = function (a) {
                p.show({
                    id: a
                }, function (a) {
                    q.secondCategories = [{
                        name: "全部",
                        _id: ""
                    }].concat(a.data.productcategory.secondCategories)
                }, function () {})
            },
            u = function (a) {
                m.index({
                    _secondCategory: a
                }, function (a) {
                    q.products = a.data.products
                }, function () {})
            },
            v = function () {
                q.hasChooseVenue = [], q.hasChooseItem = [], q.hasChooseWorker = [], _.each(q.items, function (a) {
                    "manyChoose_imageYes" == a.image && q.hasChooseItem.push(a)
                }), _.each(q.venues, function (a) {
                    "manyChoose_imageYes" == a.image && q.hasChooseVenue.push(a)
                }), _.each(q.workers, function (a) {
                    "manyChoose_imageYes" == a.image && q.hasChooseWorker.push(a)
                })
            },
            w = function () {
                v(), q.hasChooseItem.length > 0 && 0 == q.hasChooseVenue.length && 0 == q.hasChooseWorker.length && !q.whatFirst ? q.whatFirst = "item" : 0 == q.hasChooseItem.length && q.hasChooseVenue.length > 0 && 0 == q.hasChooseWorker.length && !q.whatFirst ? q.whatFirst = "venue" : 0 == q.hasChooseItem.length && 0 == q.hasChooseVenue.length && q.hasChooseWorker.length > 0 && !q.whatFirst ? q.whatFirst = "worker" : 0 == q.hasChooseItem.length && 0 == q.hasChooseVenue.length && 0 == q.hasChooseWorker.length && (q.whatFirst = ""), 0 == q.hasChooseItem.length && "item" == q.whatFirst && (q.whatFirst = ""), 0 == q.hasChooseVenue.length && "venue" == q.whatFirst && (q.whatFirst = ""), 0 == q.hasChooseWorker.length && "worker" == q.whatFirst && (q.whatFirst = "")
            },
            x = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    _.each(q.venues, function (b) {
                        var d = _.findWhere(b.items, {
                            _id: a._id
                        });
                        return d ? void c.push(b) : void 0
                    })
                }), b(c)
            },
            y = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    a.venues && a.venues.length > 0 ? _.each(q.venues, function (b) {
                        var d = _.findWhere(a.venues, {
                            _id: b._id
                        });
                        if (d) {
                            var e = _.findWhere(c, {
                                _id: d._id
                            });
                            if (!e) return void c.push(b)
                        }
                    }) : c = q.venues
                }), b(c)
            },
            z = function (a, b) {
                var c = [];
                return _.each(a, function (a) {
                    _.each(a.items, function (b) {
                        var d = _.findWhere(c, {
                            _id: b._id
                        });
                        d || (c = c.concat(a.items))
                    })
                }), b ? void b(c) : c
            },
            A = function (a, b) {
                var c = [];
                return _.each(q.workers, function (b) {
                    b.venues && b.venues.length > 0 ? _.each(a, function (a) {
                        var d = _.findWhere(b.venues, {
                            _id: a._id
                        });
                        d && c.push(b)
                    }) : c.push(b)
                }), b ? void b(c) : c
            };
        q.chooseItemName = function (a) {
            D(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", q.hasChooseItem.push(a)) : (a.image = "manyChoose_imageNo", q.hasChooseItem.splice(q.hasChooseItem.indexOf(a), 1)), w(), q.whatFirst || (_.each(q.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(q.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "item" == q.whatFirst && x(q.hasChooseItem, function (a) {
                _.each(q.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), A(a, function (a) {
                    _.each(q.workers, function (b) {
                        -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                    })
                })
            }), G()
        }, q.chooseVenueName = function (a) {
            if (D(), "manyChoose_imageNo" == a.image) a.image = "manyChoose_imageYes", q.hasChooseVenue.push(a);
            else {
                if (1 == q.hasChooseVenue.length) return q.promptERR = !0, void(q.wordERR = "必须选择一个场馆");
                a.image = "manyChoose_imageNo", q.hasChooseVenue.splice(q.hasChooseVenue.indexOf(a), 1)
            }
            w(), q.whatFirst || (_.each(q.items, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(q.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "venue" == q.whatFirst && (z(q.hasChooseVenue, function (a) {
                _.each(q.items, function (b) {
                    var c = _.findWhere(a, {
                        _id: b._id
                    });
                    c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                })
            }), A(q.hasChooseVenue, function (a) {
                _.each(q.workers, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                })
            })), G()
        }, q.chooseWorkerName = function (a) {
            D(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", q.hasChooseWorker.push(a)) : (a.image = "manyChoose_imageNo", q.hasChooseWorker.splice(q.hasChooseWorker.indexOf(a), 1)), w(), q.whatFirst || (_.each(q.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(q.items, function (a) {
                a.image = "manyChoose_imageNo"
            })), "worker" == q.whatFirst && y(q.hasChooseWorker, function (a) {
                _.each(q.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), z(a, function (a) {
                    _.each(q.items, function (b) {
                        var c = _.findWhere(a, {
                            _id: b._id
                        });
                        c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                    })
                })
            }), G()
        };
        var B = function () {
                C(), s()
            },
            C = function () {
                q.hasChooseItem = [], q.hasChooseVenue = [], q.hasChooseWorker = [], q.searchVenueIdArr = [], q.searchItemIdArr = [], q.searchType = "", q.searchWorkerId = "", q.searchPayment = "", q.searchMemberId = "", q.searchMemberType = "", q.whatFirst = "", q.venueArr = [], q.itemArr = [], q.errState = "add", q.errRecordId = "", q.errPrice = "", q.errRemark = "", q.showTypeName = "类型", q.showWorkerName = "提交人", q.showPaymentName = "支付方式", q.showMemberName = "用户名", q.showMemberTypeName = "类型", q.startDate = new Date, q.endDate = new Date, q.searchProduct = "选择综合服务", q.searchSecond = "选择二级分类", q.paymentArr = [{
                    name: "全部"
                }, {
                    name: "现金支付",
                    value: "cash"
                }, {
                    name: "微信支付",
                    value: "wx"
                }, {
                    name: "支付宝支付",
                    value: "alipay"
                }, {
                    name: "转账支付",
                    value: "card"
                }, {
                    name: "支票支付",
                    value: "check"
                }, {
                    name: "POS机支付",
                    value: "pos"
                }, {
                    name: "余额支付",
                    value: "member"
                }, {
                    name: "虚拟卡支付",
                    value: "member_vir"
                }, {
                    name: "专用账户支付",
                    value: "member_spe"
                }], _.each(q.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(q.venues, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(q.workers, function (a) {
                    a.image = "manyChoose_imageNo"
                }), q.page = 1, q.itemsPerPage = 10, q.pagination = {
                    page: q.page,
                    itemsPerPage: q.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            D = function () {
                q.page = 1, q.itemsPerPage = 10, q.pagination = {
                    page: q.page,
                    itemsPerPage: q.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            E = function () {
                q.showChooseStartDateBox = !1, q.showChooseEndDateBox = !1, q.showChooseItemBox = !1, q.showChooseVenueBox = !1, q.showChooseTypeBox = !1, q.showChooseWorkerBox = !1, q.showChooseMemberBox = !1, q.showChoosePaymentBox = !1, q.showChooseMemberTypeBox = !1, q.showChooseWorkerBox = !1, q.showErrChangeBox = !1, q.showPreview = !1, q.showDetail = !1
            },
            F = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            };
        q.pageChanged = function () {
            H()
        }, q.closeChooseStartDateBox = function () {
            E(), D(), setTimeout(function () {
                G()
            }, 100)
        }, q.closeChooseEndDateBox = function () {
            E(), D(), setTimeout(function () {
                G()
            }, 100)
        }, q.chooseTypeName = function (a) {
            E(), D(), q.showTypeName = a.name, q.searchType = a.value, H()
        }, q.chooseMemberName = function (a) {
            E(), D(), q.showMemberName = a.name, "tourist" == a.value ? q.searchMemberId = "tourist" : q.searchMemberId = a._id, H()
        }, q.choosePaymentName = function (a) {
            q.showChoosePaymentBox = !1, D(), q.showPaymentName = a.name, q.searchPayment = a.value, H()
        }, q.openErrChangeBox = function (a) {
            E(), q.showErrChangeBox = !0, q.errRecordId = a
        }, q.chooseErrState = function (a) {
            "add" == a ? q.errState = "add" : q.errState = "reduce"
        }, q.changeErrRemark = function () {
            if (!q.errPrice) return q.promptERR = !0, void(q.wordERR = "请填写纠错金额");
            if (!q.errRemark) return q.promptERR = !0, void(q.wordERR = "请填写纠错备注");
            var a = {
                _record: q.errRecordId,
                state: q.errState,
                cost: parseFloat(q.errPrice),
                remark: q.errRemark
            };
            i.create({}, a, function () {
                H()
            }, function () {})
        }, q.closePrompt = function () {
            q.promptOK = !1, q.promptERR = !1, q.promptWARN = !1, q.searchWorkerIdArr = [], q.searchPayment = ""
        };
        var G = function () {
            q.promptWARN = !0, q.wordWARN = "统计中";
            var a = {
                all: "all",
                state: "field",
                startDate: q.startDate.getTime(),
                endDate: q.endDate.getTime()
            };
            q.dateName = "", q.dateName += q.startDate.getFullYear() + "年", q.dateName += q.startDate.getMonth() + 1 > 9 ? q.startDate.getMonth() + 1 + "月" : "0" + (q.startDate.getMonth() + 1) + "月", q.dateName += q.startDate.getDate() > 9 ? q.startDate.getDate() + "日-" : "0" + q.startDate.getDate() + "日-", q.dateName += q.endDate.getFullYear() + "年", q.dateName += q.endDate.getMonth() + 1 > 9 ? q.endDate.getMonth() + 1 + "月" : "0" + (q.endDate.getMonth() + 1) + "月", q.dateName += q.endDate.getDate() > 9 ? q.endDate.getDate() + "日" : "0" + q.endDate.getDate() + "日";
            var b = [];
            q.searchVenueIdArr = [], _.each(q.venues, function (a) {
                "manyChoose_imageYes" == a.image && (q.searchVenueIdArr.push(a._id), b.push(a))
            }), q.venueName = "";
            for (var c = 0; c < b.length; c++) q.venueName += (0 == c ? "" : "/") + b[c].name;
            q.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: q.searchVenueIdArr
            })), q.searchItemIdArr = [], _.each(q.items, function (a) {
                "manyChoose_imageYes" == a.image && q.searchItemIdArr.push(a._id)
            }), q.searchItemIdArr.length > 0 && (a = _.merge(a, {
                items: q.searchItemIdArr
            })), o.income(a, function (a) {
                q.itemAndProduct = a.data.statistic.itemAndProduct, q.firstcategory = a.data.statistic.firstcategory, _.each(q.itemAndProduct, function (a) {
                    a.payment.cashAll = 0, a.payment.cashAll = F(a.payment.cashAll + a.payment.wx + a.payment.alipay + a.payment.cash + a.payment.card + a.payment.check + a.payment.pos)
                }), _.each(q.firstcategory, function (a) {
                    a.payment.cashAll = 0, a.payment.cashAll = F(a.payment.cashAll + a.payment.wx + a.payment.alipay + a.payment.cash + a.payment.card + a.payment.check + a.payment.pos)
                }), q.all = _.findWhere(q.itemAndProduct, {
                    _ip: "all"
                });
                for (var b = 0, c = !0, d = 0, e = 0; e < q.itemAndProduct.length; e++) "product" == q.itemAndProduct[e].state && (c && (b = e, c = !1), d++);
                q.itemAndProduct.splice(q.itemAndProduct.indexOf(q.all), 1), 0 == q.searchItemIdArr.length && q.itemAndProduct.splice(b, d), q.promptWARN = !1
            }, function () {})
        };
        q["export"] = function () {
            var a = q.dateName + q.venueName + "的消费汇总表";
            setTimeout(function () {
                execl1("alltable", a)
            }, 100)
        }, q.changeStatus = function (a) {
            D(), q.searchStatus = a, H()
        }, q.initCondition = function (a) {
            if ("item" == a.state) q.searchItemId2 = a._ip;
            else if ("product" == a.state) q.searchStatus = "other", q.searchProductId = a._ip;
            else if ("firstcategory" == a.state) {
                q.searchStatus = "other", q.searchFirstCategoryId = a._ip;
                var b = [];
                _.each(q.venues, function (a) {
                    "manyChoose_imageYes" == a.image && b.push(a)
                }), q.secondCategories = [], q.searchSecond = "选择二级分类", q._searchSecond = "", q.products = [], q.searchProduct = "选择综合服务", q._searchProduct = "", t(q.searchFirstCategoryId)
            }
            H()
        }, q.chooseSecond = function (a) {
            q.openShowSearchSecond = !1, q.searchSecond = a.name, q._searchSecond = a._id, q.products = [], q.searchProduct = "选择综合服务", q._searchProduct = "", H(), u(q._searchSecond)
        }, q.chooseProduct = function (a) {
            q.openShowSearchProduct = !1, q.searchProduct = a.name, q._searchProduct = a._id, H()
        }, q.searchDetail = function () {
            D(), H()
        }, q.exportDetail = function () {
            var a = {
                all: "all",
                state: "field"
            };
            q.startDate && q.endDate && (a = _.merge(a, {
                startDate: q.startDate.getTime(),
                endDate: q.endDate.getTime()
            })), q.searchVenueIdArr = [], _.each(q.venues, function (a) {
                "manyChoose_imageYes" == a.image && q.searchVenueIdArr.push(a._id)
            }), q.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: q.searchVenueIdArr
            })), q.searchItemId2 ? a = _.merge(a, {
                items: [q.searchItemId2]
            }) : q.searchProductId ? a = _.merge(a, {
                _product: q.searchProductId
            }) : q.searchFirstCategoryId && (a = _.merge(a, {
                _firstCategory: q.searchFirstCategoryId
            })), q.searchPayment && (a = _.merge(a, {
                payments: [q.searchPayment]
            })), q.searchRecordRemark && (a = _.merge(a, {
                description: q.searchRecordRemark
            })), q._searchProduct && (a = _.merge(a, {
                _product: q._searchProduct
            })), q._searchSecond && (a = _.merge(a, {
                _secondCategory: q._searchSecond
            })), a = "other" == q.searchStatus ? _.merge(a, {
                statuses: ["buyProduct", "refundProduct", "buyTicket"]
            }) : _.merge(a, {
                statuses: ["pay", "refund"],
                sortBy: "checkDate"
            }), i.index(a, function (a) {
                q.exportRecordsDetail = a.data.records, _.each(q.exportRecordsDetail, function (a) {
                    if (a.state) a.cost = ("add" == a.state ? "+" : "-") + a.cost;
                    else switch (a.status) {
                    case "pay":
                    case "buy":
                    case "buyProduct":
                    case "buyShopProduct":
                    case "buySpe":
                    case "bindCard":
                        a.cost = "+" + a.cost;
                        break;
                    case "refund":
                    case "cardRefund":
                    case "refundProduct":
                    case "refundShopProduct":
                    case "refundSpe":
                        a.cost = "-" + a.cost
                    }
                    switch (a.payment) {
                    case "wx":
                        a.payment = "微信支付";
                        break;
                    case "card":
                        a.payment = "转账支付";
                        break;
                    case "cash":
                        a.payment = "现金支付";
                        break;
                    case "alipay":
                        a.payment = "支付宝支付";
                        break;
                    case "check":
                        a.payment = "支票支付";
                        break;
                    case "pos":
                        a.payment = "POS机支付";
                        break;
                    case "member":
                        a.payment = "余额支付";
                        break;
                    case "member_vir":
                        a.payment = "虚拟卡支付";
                        break;
                    case "member_spe":
                        a.payment = "专用账户支付";
                        break;
                    default:
                        a.payment = "无"
                    }
                });
                var b = "明细表";
                setTimeout(function () {
                    execl1("alltable2", b)
                }, 100)
            }, function () {})
        };
        var H = function () {
            var a = {
                page: q.pagination.page,
                itemsPerPage: q.pagination.itemsPerPage,
                state: "field"
            };
            q.startDate && q.endDate && (a = _.merge(a, {
                startDate: q.startDate.getTime(),
                endDate: q.endDate.getTime()
            })), q.searchVenueIdArr = [], _.each(q.venues, function (a) {
                "manyChoose_imageYes" == a.image && q.searchVenueIdArr.push(a._id)
            }), q.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: q.searchVenueIdArr
            })), q.searchItemId2 ? a = _.merge(a, {
                items: [q.searchItemId2]
            }) : q.searchProductId ? a = _.merge(a, {
                _product: q.searchProductId
            }) : q.searchFirstCategoryId && (a = _.merge(a, {
                _firstCategory: q.searchFirstCategoryId
            })), q.searchPayment && (a = _.merge(a, {
                payments: [q.searchPayment]
            })), q.searchRecordRemark && (a = _.merge(a, {
                description: q.searchRecordRemark
            })), q.searchProductContacts && (a = _.merge(a, {
                productContacts: q.searchProductContacts
            })), q._searchProduct && (a = _.merge(a, {
                _product: q._searchProduct
            })), q._searchSecond && (a = _.merge(a, {
                _secondCategory: q._searchSecond
            })), a = "other" == q.searchStatus ? _.merge(a, {
                statuses: ["buyProduct", "refundProduct", "buyTicket"]
            }) : _.merge(a, {
                statuses: ["pay", "refund"],
                sortBy: "checkDate"
            }), i.index(a, function (b) {
                q.recordsDetail = b.data.records, q.showDetail = !0, _.each(q.recordsDetail, function (a) {
                    if (a.state) a.cost = ("add" == a.state ? "+" : "-") + a.cost;
                    else switch (a.status) {
                    case "pay":
                    case "buyProduct":
                        a.cost = "+" + a.cost;
                        break;
                    case "refund":
                    case "refundProduct":
                        a.cost = "-" + a.cost
                    }
                    switch (a.payment) {
                    case "wx":
                        a.payment = "微信支付";
                        break;
                    case "card":
                        a.payment = "转账支付";
                        break;
                    case "cash":
                        a.payment = "现金支付";
                        break;
                    case "alipay":
                        a.payment = "支付宝支付";
                        break;
                    case "check":
                        a.payment = "支票支付";
                        break;
                    case "pos":
                        a.payment = "POS机支付";
                        break;
                    case "member":
                        a.payment = "余额支付";
                        break;
                    case "member_vir":
                        a.payment = "虚拟卡支付";
                        break;
                    case "member_spe":
                        a.payment = "专用账户支付";
                        break;
                    default:
                        a.payment = "无"
                    }
                });
                var c = b.data.count;
                q.pagination.totalItems = c, q.pagination.numPages = c / q.itemsPerPage, a = _.merge(a, {
                    all: "total"
                }), i.index(a, function (a) {
                    q.cost = a.data.total
                }, function () {})
            }, function () {})
        };
        q.close = function () {
            E(), q.searchItemId2 = "", q.searchProductId = "", q.searchFirstCategoryId = "", q.searchPayment = "", q.searchStatus = "field", q.showPaymentName = "支付方式", q.searchPayment = "", q.searchProduct = "选择综合服务", q._searchProduct = "", D()
        }, B()
    }
    angular.module("fieldApp").controller("CsdFinanceFieldCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Record", "Item", "Venue", "Member", "Product", "Cardrecords", "Finance", "Productcategory"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this,
            k = function () {
                j.startDate = new Date, j.endDate = new Date
            },
            l = function () {
                j.page = 1, j.itemsPerPage = 10, j.pagination = {
                    page: j.page,
                    itemsPerPage: j.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            m = function () {
                var a = {
                    page: j.pagination.page,
                    itemsPerPage: j.pagination.itemsPerPage,
                    statuses: ["prepPay", "refundPrepPay"],
                    payments: ["cash"]
                };
                j.startDate && j.endDate && (a = _.merge(a, {
                    startDate: j.startDate.getTime(),
                    endDate: j.endDate.getTime()
                })), i.index(a, function (b) {
                    j.records = b.data.records;
                    var c = b.data.count;
                    j.pagination.totalItems = c, j.pagination.numPages = c / j.itemsPerPage, a = _.merge(a, {
                        all: "all"
                    }), i.index(a, function (a) {
                        var b = a.data.records;
                        j.cost = 0, j.inCost = 0, j.outCost = 0, _.each(b, function (a) {
                            if (a.state) a.cost = ("add" == a.state ? 1 : -1) * a.cost;
                            else switch (a.status) {
                            case "refundPrepPay":
                                j.outCost = dealNumber((100 * j.outCost + 100 * a.cost) / 100), a.cost = -1 * a.cost;
                                break;
                            case "prepPay":
                                j.inCost = dealNumber((100 * j.inCost + 100 * a.cost) / 100)
                            }
                            j.cost = dealNumber((100 * j.cost + 100 * a.cost) / 100)
                        })
                    }, function () {})
                }, function () {})
            },
            n = function () {
                k(), l(), m()
            };
        j.pageChanged = function () {
            m()
        }, j.closeChooseBox = function () {
            j.showChooseStartDateBox = !1, j.showChooseEndDateBox = !1, setTimeout(function () {
                l(), m()
            }, 100)
        }, n()
    }
    angular.module("fieldApp").controller("CsdFinancePreppayCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Record"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        var p = this,
            q = function () {
                k.index({}, function (a) {
                    p.venues = a.data.venues, _.each(p.venues, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), p.chooseVenueName(p.venues[0])
                }, function () {})
            },
            r = function () {
                e.get({}, function (a) {
                    p.workers = [a.data.user], _.each(p.workers, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), q()
                }, function () {})
            },
            s = function () {
                p.hasChooseVenue = [], p.hasChooseItem = [], p.hasChooseWorker = [], _.each(p.items, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseItem.push(a)
                }), _.each(p.venues, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseVenue.push(a)
                }), _.each(p.workers, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseWorker.push(a)
                })
            },
            t = function () {
                s(), p.hasChooseItem.length > 0 && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "item" : 0 == p.hasChooseItem.length && p.hasChooseVenue.length > 0 && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "venue" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && p.hasChooseWorker.length > 0 && !p.whatFirst ? p.whatFirst = "worker" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && (p.whatFirst = ""), 0 == p.hasChooseItem.length && "item" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseVenue.length && "venue" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseWorker.length && "worker" == p.whatFirst && (p.whatFirst = "")
            },
            u = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    _.each(p.venues, function (b) {
                        var d = _.findWhere(b.items, {
                            _id: a._id
                        });
                        return d ? void c.push(b) : void 0
                    })
                }), b(c)
            },
            v = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    a.venues && a.venues.length > 0 ? _.each(p.venues, function (b) {
                        var d = _.findWhere(a.venues, {
                            _id: b._id
                        });
                        if (d) {
                            var e = _.findWhere(c, {
                                _id: d._id
                            });
                            if (!e) return void c.push(b)
                        }
                    }) : c = p.venues
                }), b(c)
            },
            w = function (a, b) {
                var c = [];
                return _.each(a, function (a) {
                    _.each(a.items, function (b) {
                        var d = _.findWhere(c, {
                            _id: b._id
                        });
                        d || (c = c.concat(a.items))
                    })
                }), b ? void b(c) : c
            },
            x = function (a, b) {
                var c = [];
                return _.each(p.workers, function (b) {
                    b.venues && b.venues.length > 0 ? _.each(a, function (a) {
                        var d = b.venues.indexOf(a._id);
                        d > -1 && c.push(b)
                    }) : c.push(b)
                }), b ? void b(c) : c
            };
        p.chooseItemName = function (a) {
            A(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseItem.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseItem.splice(p.hasChooseItem.indexOf(a), 1)), t(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "item" == p.whatFirst && u(p.hasChooseItem, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), x(a, function (a) {
                    _.each(p.workers, function (b) {
                        -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                    })
                })
            }), D()
        }, p.chooseVenueName = function (a) {
            if (A(), "manyChoose_imageNo" == a.image) a.image = "manyChoose_imageYes", p.hasChooseVenue.push(a);
            else {
                if (1 == p.hasChooseVenue.length) return p.promptERR = !0, void(p.wordERR = "必须选择一个场馆");
                a.image = "manyChoose_imageNo", p.hasChooseVenue.splice(p.hasChooseVenue.indexOf(a), 1)
            }
            t(), p.whatFirst || (_.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "venue" == p.whatFirst && (w(p.hasChooseVenue, function (a) {
                _.each(p.items, function (b) {
                    var c = _.findWhere(a, {
                        _id: b._id
                    });
                    c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                })
            }), x(p.hasChooseVenue, function (a) {
                _.each(p.workers, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                })
            })), D()
        }, p.chooseWorkerName = function (a) {
            A(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseWorker.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseWorker.splice(p.hasChooseWorker.indexOf(a), 1)), t(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            })), "worker" == p.whatFirst && v(p.hasChooseWorker, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), w(a, function (a) {
                    _.each(p.items, function (b) {
                        var c = _.findWhere(a, {
                            _id: b._id
                        });
                        c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                    })
                })
            }), D()
        };
        var y = function () {
                z(), r()
            },
            z = function () {
                p.hasChooseItem = [], p.hasChooseVenue = [], p.hasChooseWorker = [], p.searchVenueIdArr = [], p.searchItemIdArr = [], p.searchType = "", p.searchWorkerId = "", p.searchPayment = "", p.searchMemberId = "", p.searchMemberType = "", p.whatFirst = "", p.venueArr = [], p.itemArr = [], p.errState = "add", p.errRecordId = "", p.errPrice = "", p.errRemark = "", p.showTypeName = "类型", p.showWorkerName = "提交人", p.showPaymentName = "支付方式", p.showMemberName = "用户名", p.showMemberTypeName = "类型", p.startDate = new Date, p.endDate = new Date, p.paymentArr = [{
                    name: "全部"
                }, {
                    name: "微信支付",
                    value: "wx"
                }, {
                    name: "现金支付",
                    value: "cash"
                }, {
                    name: "余额支付",
                    value: "member"
                }, {
                    name: "支付宝支付",
                    value: "alipay"
                }], _.each(p.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.venues, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.workers, function (a) {
                    a.image = "manyChoose_imageNo"
                }), p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            A = function () {
                p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            B = function () {
                p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1, p.showChooseItemBox = !1, p.showChooseVenueBox = !1, p.showChooseTypeBox = !1, p.showChooseWorkerBox = !1, p.showChooseMemberBox = !1,
                    p.showChoosePaymentBox = !1, p.showChooseMemberTypeBox = !1, p.showChooseWorkerBox = !1, p.showErrChangeBox = !1, p.showPreview = !1, p.showDetail = !1
            },
            C = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            };
        p.pageChanged = function () {
            E()
        }, p.closeChooseStartDateBox = function () {
            B(), A(), setTimeout(function () {
                D()
            }, 100)
        }, p.closeChooseEndDateBox = function () {
            B(), A(), setTimeout(function () {
                D()
            }, 100)
        }, p.choosePaymentName = function (a) {
            p.showChoosePaymentBox = !1, A(), p.showPaymentName = a.name, p.searchPayment = a.value, E()
        }, p.openErrChangeBox = function (a) {
            B(), p.showErrChangeBox = !0, p.errRecordId = a
        }, p.chooseErrState = function (a) {
            "add" == a ? p.errState = "add" : p.errState = "reduce"
        }, p.changeErrRemark = function () {
            if (!p.errPrice) return p.promptERR = !0, void(p.wordERR = "请填写纠错金额");
            if (!p.errRemark) return p.promptERR = !0, void(p.wordERR = "请填写纠错备注");
            var a = {
                _record: p.errRecordId,
                state: p.errState,
                cost: parseFloat(p.errPrice),
                remark: p.errRemark
            };
            i.create({}, a, function () {
                E()
            }, function () {})
        }, p.closePrompt = function () {
            p.promptOK = !1, p.promptERR = !1, p.promptWARN = !1, p.searchWorkerIdArr = [], p.searchPayment = ""
        };
        var D = function () {
            p.promptWARN = !0, p.wordWARN = "统计中";
            var a = {
                all: "all",
                state: "shop",
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            };
            p.dateName = "", p.dateName += p.startDate.getFullYear() + "年", p.dateName += p.startDate.getMonth() + 1 > 9 ? p.startDate.getMonth() + 1 + "月" : "0" + (p.startDate.getMonth() + 1) + "月", p.dateName += p.startDate.getDate() > 9 ? p.startDate.getDate() + "日-" : "0" + p.startDate.getDate() + "日-", p.dateName += p.endDate.getFullYear() + "年", p.dateName += p.endDate.getMonth() + 1 > 9 ? p.endDate.getMonth() + 1 + "月" : "0" + (p.endDate.getMonth() + 1) + "月", p.dateName += p.endDate.getDate() > 9 ? p.endDate.getDate() + "日" : "0" + p.endDate.getDate() + "日";
            var b = [];
            p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && (p.searchVenueIdArr.push(a._id), b.push(a))
            }), p.venueName = "";
            for (var c = 0; c < b.length; c++) p.venueName += (0 == c ? "" : "/") + b[c].name;
            p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: p.searchVenueIdArr
            })), p.searchWorkerIdArr = [], _.each(p.workers, function (a) {
                "manyChoose_imageYes" == a.image && p.searchWorkerIdArr.push(a._id)
            }), p.searchWorkerIdArr.length > 0 && (a = _.merge(a, {
                workers: p.searchWorkerIdArr
            })), o.shop(a, function (a) {
                p.records = a.data.statistic, p.promptWARN = !1
            }, function () {})
        };
        p["export"] = function (a) {
            var b;
            b = a ? p.dateName + p.workerName + "的" + p.venueName + "的小卖部消费明细表" : p.dateName + p.venueName + "的小卖部消费汇总表", setTimeout(function () {
                execl1(a ? a : "alltable", b)
            }, 100)
        }, p.initCondition = function (a, b) {
            a && (p.searchWorkerIdArr = [a]), E(b)
        };
        var E = function (a) {
            p.workerName = a;
            var b = {
                state: "shop",
                all: "all"
            };
            p.startDate && p.endDate && (b = _.merge(b, {
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            })), p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && p.searchVenueIdArr.push(a._id)
            }), p.searchVenueIdArr.length > 0 && (b = _.merge(b, {
                venues: p.searchVenueIdArr
            })), p.searchWorkerIdArr.length > 0 && (b = _.merge(b, {
                workers: p.searchWorkerIdArr
            })), p.searchPayment && (b = _.merge(b, {
                payments: [p.searchPayment]
            })), i.index(b, function (a) {
                if (p.recordsDetail = a.data.records, !(p.recordsDetail.length > 0)) return p.promptERR = !0, void(p.wordERR = "暂无记录");
                p.showDetail = !0, p.shopDetails = [];
                var b = 1,
                    c = 0,
                    d = 0,
                    e = 0,
                    f = 0;
                _.each(p.recordsDetail, function (a) {
                    switch (a.index = b, b++, a.status) {
                    case "refundShopProduct":
                        a.cost = -1 * a.cost, a.quantity = -1 * a.quantity
                    }
                    a.state && (a.quantity = 0), "reduce" == a.state && (a.cost = -1 * a.cost);
                    var c = _.findWhere(p.shopDetails, {
                        _id: a._shopProduct
                    });
                    if (c) c.quantity += a.quantity, c.subTotal += a.cost, "member" == a.payment ? c.member = C((100 * c.member + 100 * a.cost) / 100) : c.noMember = C((100 * c.noMember + 100 * a.cost) / 100);
                    else {
                        var d = {
                            _id: a._shopProduct,
                            name: a.shopProductName,
                            member: 0,
                            noMember: 0,
                            quantity: a.quantity,
                            subTotal: a.cost
                        };
                        "member" == a.payment ? d.member = C((100 * d.member + 100 * a.cost) / 100) : d.noMember = C((100 * d.noMember + 100 * a.cost) / 100), p.shopDetails.push(d)
                    }
                }), _.each(p.shopDetails, function (a) {
                    c += a.quantity, d = C((100 * a.subTotal + 100 * d) / 100), e = C((100 * e + 100 * a.member) / 100), f = C((100 * f + 100 * a.noMember) / 100)
                }), p.shopDetails.push({
                    name: "合计",
                    quantity: c,
                    subTotal: d,
                    member: e,
                    noMember: f
                })
            }, function () {})
        };
        p.close = function () {
            B(), p.searchWorkerIdArr = [], p.searchPayment = "", A()
        }, y()
    }
    angular.module("fieldApp").controller("CsdFinanceShopCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Record", "Item", "Venue", "Member", "Product", "Cardrecords", "Finance"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m) {
        var n = this;
        n.id = g.id, n.searchName = g.searchName, n.searchName ? c.searchName = n.searchName : c.searchName = "", n.chooseObject = function (a) {
            n.objectName = a.name, n.telS = a.tel, n._user = a._id, n.chooseObjectFlag = !1
        };
        var o = function () {
            i.index({
                id: n.id
            }, function (a) {
                n.member = a.data.member, n.name = n.member.name, n.tel = n.member.tel, n.member.idCard ? n.idCard = n.member.idCard : n.idCard = "暂无", n.typeName = n.member.type, n.name1 = n.member.name, n.tel1 = n.member.tel, n.idCard1 = n.member.idCard, n.typeName1 = n.member.type, n.speAccount = n.member.specialAccount, n.judge()
            })
        };
        n.update = function () {
            var a = {
                name: n.name,
                tel: n.tel,
                idType: "id",
                idCard: n.idCard,
                type: n.typeName
            };
            i.update({
                id: n.id
            }, a, function (a) {
                o(), n.toastFlag = !0, k(function () {
                    n.toastFlag = !1
                }, 1e3)
            }, function (a) {
                n.promptERR = !0, n.wordERR = a.data.data, "ValidationError: 该号码已被使用." == n.wordERR && (n.wordERR = "该号码已被使用")
            })
        }, n.chooseType = function (a) {
            n.chooseTypeFlag = !1;
            for (var b = 0; b < n.types.length; b++) n.types[b].select = !1;
            a.select = !0, n.typeName = a.name, n.judge()
        }, n.types = [{
            name: "会员卡",
            select: !0
        }, {
            name: "外来卡",
            select: !1
        }, {
            name: "员工卡",
            select: !1
        }, {
            name: "领导金卡",
            select: !1
        }, {
            name: "保安卡",
            select: !1
        }], n.close = function () {
            n.refundFlag = !1, n.price = "", n.priceFlag = !1, n.promptERR = !1
        }, n.sendSms = function () {
            var a = {
                tel: n.telS,
                _member: n.member._id,
                _user: n._user
            };
            l.resms(a, function (a) {
                n.sendFlag = !0, n.sendToFlag = !1, k(function () {
                    n.sendFlag = !1
                }, 1e3)
            }, function (a) {
                n.promptERR = !0, n.wordERR = a.data.data
            })
        }, n.refund = function () {
            if (!n.price) return void(n.priceFlag = !0);
            var a = {
                refind: 1 * n.price,
                _member: n.member._id,
                code: n.code
            };
            i.refind(a, function (a) {
                n.promptOK = !0, o(), n.close(), o(), q()
            }, function (a) {
                n.promptERR = !0, n.wordERR = a.data.data
            })
        }, n.page = 1, n.itemsPerPage = 10, n.pagination = {
            page: n.page,
            itemsPerPage: n.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, n.judge = function () {
            n.name != n.name1 || n.tel != n.tel1 || n.idCard != n.idCard1 || n.typeName != n.typeName1 ? n.judgeFlag = !0 : n.judgeFlag = !1
        };
        var p = function () {
            var a = {
                role: "fieldManager"
            };
            e.index(a, function (a) {
                n.users = a.data.users, n.users.length > 0 && (n.objectName = n.users[0].name, n.telS = n.users[0].tel, n._user = n.users[0]._id)
            }, function () {})
        };
        n.getMemberService = function () {
            var a = {
                _member: n.id
            };
            m.get(a, function (a) {
                n.memberServices = a.data.memberServices, _.each(n.memberServices, function (a) {
                    if (a.endDate) {
                        var b = new Date(a.endDate).getTime(),
                            c = (new Date).getTime();
                        a.timeValue = parseInt((b - c) / 1e3 / 24 / 3600)
                    }
                })
            }, function (a) {
                n.promptERR = !0, n.wordERR = a.data.data
            })
        };
        var q = function () {
            var a = {
                _member: n.id,
                page: n.pagination.page,
                itemsPerPage: n.pagination.itemsPerPage
            };
            j.index(a, function (a) {
                n.records = a.data.records;
                for (var b = 0; b < n.records.length; b++) {
                    switch (n.records[b].payment) {
                    case "wx":
                        n.records[b].pm = "微信支付";
                        break;
                    case "cash":
                        n.records[b].pm = "现金支付";
                        break;
                    case "alipay":
                        n.records[b].pm = "支付宝支付";
                        break;
                    case "member":
                        n.records[b].pm = "储值卡支付";
                        break;
                    case "member_vir":
                        n.records[b].pm = "虚拟卡支付";
                        break;
                    case "card":
                        n.records[b].pm = "转账支付";
                        break;
                    case "pos":
                        n.records[b].pm = "pos机支付";
                        break;
                    case "member_spe":
                        n.records[b].pm = "专用账户支付";
                        break;
                    default:
                        n.records[b].pm = "无"
                    }
                    switch (n.records[b].status) {
                    case "refund":
                    case "buy":
                    case "refundPrepPay":
                        n.records[b].price = "+" + n.records[b].cost;
                        break;
                    case "pay":
                    case "cardRefund":
                    case "refundProduct":
                    case "refundShopProduct":
                    case "buyTicket":
                    case "buyProduct":
                    case "buyShopProduct":
                    case "prepPay":
                    case "buyService":
                    case "overtime":
                    case "bindCard":
                        n.records[b].price = "-" + n.records[b].cost
                    }
                }
                var c = a.data.count;
                n.pagination.totalItems = c, n.pagination.numPages = c / n.itemsPerPage
            })
        };
        n.pageChanged = function () {
            r()
        };
        var r = function () {
            o(), q(), p(), n.getMemberService()
        };
        r()
    }
    angular.module("fieldApp").controller("CsdMemberDetailCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "Record", "$timeout", "Smscode", "MemberService"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l) {
        var m = this;
        m.page = 1, m.itemsPerPage = 10, m.pagination = {
            page: m.page,
            itemsPerPage: m.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, m.getRecord = function () {
            var a = {
                mix: m.mix,
                page: m.pagination.page,
                itemsPerPage: m.pagination.itemsPerPage
            };
            l.index(a, {
                _org: m._org
            }, function (a) {
                m.events = a.data.events, _.each(m.events, function (a) {
                    switch (a.status) {
                    case "move":
                        a.status = "过户";
                        break;
                    case "updateTel":
                        a.status = "更改绑定手机号";
                        break;
                    case "freeze":
                        a.status = "冻结";
                        break;
                    case "cancelFreeze":
                        a.status = "解除冻结"
                    }
                });
                var b = a.data.count;
                m.pagination.totalItems = b, m.pagination.numPages = b / m.itemsPerPage
            })
        };
        var n = function () {
            e.get({}, function (a) {
                m._org = a.data.user._organization ? a.data.user._organization : a.data.user._id, m.getRecord()
            }, function () {})
        };
        m.pageChanged = function () {
            o()
        };
        var o = function () {
            n()
        };
        o()
    }
    angular.module("fieldApp").controller("CsdDocordCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "Record", "$timeout", "Event"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        var p = this;
        p.addFlag = !1, p.chooseCardFlag = !1, p.idCard = "", p.showCodeBox = !0, p.wxFlag = !0, p.typeName = "会员卡", p.moneySelect = !0, p.oneSelect = !1, p.cardSelect = !1, p.isUsed = !0, p.isBk = !1, p.isAccount = !1, p.printFlag = !0, p.idType = "id", p.zhengName = "身份证", p.levelDes = "", c.searchName && (p.mix = c.searchName, p.searchName = c.searchName), $("#search").keydown(function (a) {
            13 == a.keyCode && p.search()
        }), p.cardBlue = {
            padding: "10px",
            background: "#00a1ff",
            color: "#fff",
            "border-radius": "4px",
            margin: "0 10px 10px 0",
            border: "1px solid #00a1ff"
        }, p.cardGray = {
            padding: "10px",
            background: "#fff",
            color: "#000",
            "border-radius": "4px",
            margin: "0 10px 10px 0",
            border: "1px solid #ddd"
        }, p.types = [{
            name: "会员卡",
            select: !0
        }, {
            name: "外来卡",
            select: !1
        }, {
            name: "员工卡",
            select: !1
        }, {
            name: "领导金卡",
            select: !1
        }, {
            name: "保安卡",
            select: !1
        }], p.order = {
            _member: "",
            orderDate: null,
            spbill_create_ip: "",
            auth_code: "",
            payment: "alipay",
            orderArr: {
                total: 0,
                fields: []
            }
        }, p.paymentArr = [{
            name: "支付宝",
            value: "alipay",
            image: "singleChoose_imageYes"
        }, {
            name: "微信",
            value: "wx",
            image: "singleChoose_imageNo"
        }, {
            name: "现金",
            value: "cash",
            image: "singleChoose_imageNo"
        }, {
            name: "支票",
            value: "check",
            image: "singleChoose_imageNo"
        }, {
            name: "转账",
            value: "card",
            image: "singleChoose_imageNo"
        }, {
            name: "POS机",
            value: "pos",
            image: "singleChoose_imageNo"
        }], c.mPage ? p.page = c.mPage : (p.page = 1, c.mPage = p.page), p.itemsPerPage = 10, p.pagination = {
            page: c.mPage,
            itemsPerPage: p.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, p.close = function () {
            p.addFlag = !1, p.chooseCardFlag = !1, p.nameFlag = !1, p.phoneFlag = !1, p.sureFlag = !1, p.cardFlag = !1, p.selfFlag = !1, p.idFlag = !1, p.answerFlag = !1, p.changeAccFlag = !1, p.name = "", p.tel = "", p.phone = "", p.iderr = "", p.iFlag = !1, p.pFlag = !1, p.continueFlag = !1, p.idCard = "", p.cardFlag = !1, p.cardNum = "", p.needFlag = !1, p.cFlag = !1, p.payFlag = !1, p.auth_code = "", p.wxFlag = !0, p.defindFlag = !1, p.moneySelect = !0, p.oneSelect = !1, p.cardSelect = !1, p.choosedCardFlag = !1, p.showAuth_codeBox = !1, p.add = !1, p.lengthFlag = !1, p.isReal = "", p.isFreeze = "", r(), p.price = "", p.printFlag = !0, _.each(p.vrr, function (a) {
                a.select = !1
            }), p.chargeVenue = "", p.chargeCardNum = "", p.chargeCardPassword = "", p.moneySelect = !0, p.oneSelect = !1, p.cardSelect = !1, p.speSelect = !1
        }, p.closePrompt = function () {
            p.promptERR = !1, p.toastFlag = !1, p.promptWARN = !1, p.showAuth_codeBox = !1, clearInterval(p.setIntervalId)
        }, p.judgeLength = function () {
            11 == p.phone.length ? (p.lengthFlag = !0, p.codeTel()) : p.lengthFlag = !1
        }, p.chooseIdType = function (a) {
            p.choosedZhengFlag = !1, "id" == a ? (p.idType = "id", p.zhengName = "身份证") : (p.idType = "other", p.zhengName = "其他")
        }, p.chooseMembertype = function (a) {
            for (var b = 0; b < p.membertypes.length; b++) p.membertypes[b].select = !1;
            a.select = !0, p.choosedMembertypeFlag = !1, p.membertypeName = a.name
        }, p.defind = function (a) {
            p.addFlag = !0, p.defindFlag = !0, p.memTitle = "实名认证", p.name = a.name, p.phone = a.tel, p.mId = a._id, a.idType && "other" == a.idType ? (p.zhengName = "其他", p.idType = "other") : (p.zhengName = "身份证", p.idType = "id")
        }, p.chVenue = function (a) {
            _.each(p.vrr, function (a) {
                a.select = !1
            }), a.select = !0
        }, p.newAdd = function () {
            p.addFlag = !0, p.memTitle = "新增会员", _.each(p.cards, function (a) {
                a.select = !1, a.flag = !1
            }), p.cards.length > 0 && (p.cards[0].select = !0, p.cardName = p.cards[0].name + "(" + p.cards[0].price + "元)", p.cardId = p.cards[0]._id, p.cards[0].flag = !0, p.realPrice = p.cards[0].realPrice)
        }, p.chongzhi = function (a) {
            p.mId = a._id, p.continueFlag = !0, p.cCards = [], a.isReal ? p.cCards = p.cards : _.each(p.cards, function (a) {
                a.select = !1, a.flag = !1, a.price <= 100 && p.cCards.push(a)
            });
            var b = {
                price: "自定义充值",
                select: !1,
                flag: !1
            };
            p.cCards.push(b), p.cCards.length > 0 && (p.cCards[0].select = !0, p.cardName = p.cCards[0].name + "(" + p.cCards[0].price + "元)", p.cardId = p.cCards[0]._id, p.cCards[0].flag = !0, p.realPrice = p.cCards[0].realPrice), a.cards.length > 0 && (p.tot = a.cards[0].total), a.virtualAccount.expires_in ? p.xd = p.getNowFormatDate(new Date(a.virtualAccount.expires_in)) : p.xd = "", p.vPrice = a.virtualAccount.total
        }, p.auth_codeCreateC = function (a) {
            if (p.promptWARN = !0, p.wordWARN = "支付中", 13 == a.keyCode) switch (p.order.payment) {
            case "wx":
                var b = /^[1][0,1,2,3,4,5][0-9]{16}$/;
                if (!b.test(p.auth_code)) return p.auth_code = "", p.promptWARN = !1, p.promptERR = !0, void(p.wordERR = "支付码错误，重新扫码");
                if (p.selfFlag) {
                    var c = {
                        total: p.price,
                        auth_code: p.auth_code,
                        spbill_create_ip: "0.0.0.0"
                    };
                    return i.randomWx({
                        id: p.mId
                    }, c, function (a) {
                        p.printFlag && (p.tot = 1 * p.tot + 1 * p.price, p.print("微信充值")), p.close(), p.promptWARN = !1, p.getMember(), p.toastFlag = !0, p.wordOK = "充值成功", k(function () {
                            p.toastFlag = !1
                        }, 1e3)
                    }, function (a) {
                        p.promptWARN = !1, p.promptERR = !0, p.wordERR = a.data.data, p.wxFlag = !1, p.getMember()
                    }), void clearInterval(p.setIntervalId)
                }
                if (p.oneSelect) return _.each(p.mrr, function (a) {
                    var b = {
                        _venue: a,
                        total: p.price,
                        auth_code: p.auth_code,
                        spbill_create_ip: "0.0.0.0"
                    };
                    i.wxSpeAccount({
                        id: p.mId
                    }, b, function (a) {
                        p.printFlag && (p.tot = 1 * p.tot + 1 * p.price, p.print("专用账户充值")), p.close(), p.promptWARN = !1, p.getMember(), p.toastFlag = !0, p.wordOK = "充值成功", k(function () {
                            p.toastFlag = !1
                        }, 1e3)
                    }, function (a) {
                        p.promptWARN = !1, p.promptERR = !0, p.wordERR = a.data.data, p.wxFlag = !1, p.getMember()
                    })
                }), void clearInterval(p.setIntervalId);
                var d = {
                    _member: p.mId,
                    _card: p.cardId,
                    auth_code: p.auth_code,
                    spbill_create_ip: "0.0.0.0",
                    payment: "wx"
                };
                j.pay(d, function (a) {
                    p.printFlag && (p.price = p.realPrice, p.tot = 1 * p.tot + 1 * p.price, p.print("微信充值")), p.close(), p.promptWARN = !1, p.toastFlag = !0, p.wordOK = "充值成功", p.showAuth_codeBox = !1, p.auth_code = "", clearInterval(p.setIntervalId), k(function () {
                        p.toastFlag = !1
                    }, 1e3), p.getMember()
                }, function (a) {
                    p.showAuth_codeBox = !1, p.promptWARN = !1, p.auth_code = "", p.deleteFlag = !0, p.payWarn = a.data.data, p.wxFlag = !1, clearInterval(p.setIntervalId), p.getMember()
                });
                break;
            case "alipay":
                var b = /^[25,26,27,28,29,30][0-9]{14,22}$/;
                if (!b.test(p.auth_code)) return p.auth_code = "", p.promptWARN = !1, p.promptERR = !0, void(p.wordERR = "支付码错误，重新扫码");
                if (p.selfFlag) {
                    var c = {
                        total: p.price,
                        auth_code: p.auth_code,
                        _member: p.mId
                    };
                    return l.randomAlipay(c, function (a) {
                        p.printFlag && (p.tot = 1 * p.tot + 1 * p.price, p.print("支付宝充值")), p.close(), p.promptWARN = !1, p.getMember(), p.toastFlag = !0, p.wordOK = "充值成功", k(function () {
                            p.toastFlag = !1
                        }, 1e3)
                    }, function (a) {
                        p.promptWARN = !1, p.promptERR = !0, p.wordERR = a.data.data, p.wxFlag = !1, p.getMember()
                    }), void clearInterval(p.setIntervalId)
                }
                if (p.oneSelect) return _.each(p.mrr, function (a) {
                    var b = {
                        _venue: a,
                        total: p.price,
                        auth_code: p.auth_code
                    };
                    l.aliSpeAccount({
                        way: p.mId
                    }, b, function (a) {
                        p.printFlag && (p.tot = p.tot + p.price, p.print("专用账户充值")), p.close(), p.promptWARN = !1, p.getMember(), p.toastFlag = !0, p.wordOK = "充值成功", k(function () {
                            p.toastFlag = !1
                        }, 1e3)
                    }, function (a) {
                        p.promptWARN = !1, p.promptERR = !0, p.wordERR = a.data.data, p.wxFlag = !1, p.getMember()
                    })
                }), void clearInterval(p.setIntervalId);
                var d = {
                    _member: p.mId,
                    _card: p.cardId,
                    auth_code: p.auth_code,
                    payment: "alipay"
                };
                l.pay(d, function (a) {
                    p.printFlag && (p.price = p.realPrice, p.tot = p.tot + p.price, p.print("支付宝充值")), p.close(), p.toastFlag = !0, p.wordOK = "充值成功", p.promptWARN = !1, p.showAuth_codeBox = !1, p.auth_code = "", clearInterval(p.setIntervalId), k(function () {
                        p.toastFlag = !1
                    }, 1e3), p.getMember()
                }, function (a) {
                    p.showAuth_codeBox = !1, p.promptWARN = !1, p.deleteFlag = !0, p.auth_code = "", p.payWarn = a.data.data, p.wxFlag = !1, clearInterval(p.setIntervalId), p.getMember()
                })
            }
        }, p.banka = function (a) {
            p.cFlag = !0, p.mId = a._id
        }, p.waySelect = function (a) {
            if (p.chargeVenue = "", "money" == a) p.moneySelect = !0, p.oneSelect = !1, p.cardSelect = !1, p.speSelect = !1;
            else if ("one" == a) {
                if (0 == p.vrr.length) return p.promptERR = !0, void(p.wordERR = "暂无专用场馆，请设置");
                p.moneySelect = !1, p.oneSelect = !0, p.cardSelect = !1, p.speSelect = !1
            } else "card" == a ? (p.moneySelect = !1, p.oneSelect = !1, p.cardSelect = !0, p.speSelect = !1) : "speCard" == a && (p.moneySelect = !1, p.oneSelect = !1, p.cardSelect = !1, p.speSelect = !0, m.index({
                isUsed: !0
            }, function (a) {
                p.venues_clone = a.data.venues, _.each(p.venues_clone, function (a) {
                    a.image = "singleChoose_imageNo2"
                }), p.chargeVenue = p.venues_clone[0], p.venues_clone[0].image = "singleChoose_imageYes2"
            }, function () {}))
        }, p.surePay = function () {
            switch (p.order.payment) {
            case "wx":
            case "alipay":
                p.sureFlag = !1, p.showAuth_codeBox = !0, p.setIntervalId = setInterval(function () {
                    document.getElementById("auth_codeC").focus()
                }, 100);
                break;
            case "cash":
            case "check":
            case "card":
            case "pos":
                var a = {
                    total: p.price,
                    payment: p.order.payment
                };
                i.randomPay({
                    id: p.mId
                }, a, function (a) {
                    p.printFlag && (p.tot = a.data.member.cards[0].total, a.data.member.virtualAccount.expires_in ? p.xd = p.getNowFormatDate(new Date(a.data.member.virtualAccount.expires_in)) : p.xd = "", p.vPrice = a.data.member.virtualAccount.total, p.print("现金充值")), p.close(), p.getMember(), p.toastFlag = !0, p.wordOK = "充值成功", k(function () {
                        p.toastFlag = !1
                    }, 1e3)
                }, function (a) {
                    p.promptWARN = !1, p.promptERR = !0, p.wordERR = a.data.data, p.wxFlag = !1, p.getMember()
                })
            }
        }, p["continue"] = function () {
            if (p.moneySelect && p.selfFlag) return void(p.price > 1e4 ? (p.promptERR = !0, p.wordERR = "只能输入10000以下的数字") : (p.sureFlag = !0, p.sureWarn = "您确定要充值" + p.price + "元吗？"));
            if (p.promptWARN = !0, p.moneySelect || p.oneSelect) {
                if (p.oneSelect) {
                    p.mrr = [], _.each(p.vrr, function (a) {
                        a.select && p.mrr.push(a._id)
                    });
                    var b = {
                        venues: p.mrr
                    };
                    if (0 == p.mrr.length ? p.iFlag = !0 : p.iFlag = !1, p.price ? p.pFlag = !1 : p.pFlag = !0, p.iFlag || p.pFlag) return;
                    return void i.speAccount({
                        id: p.mId
                    }, b, function (a) {
                        switch (p.order.payment) {
                        case "wx":
                        case "alipay":
                            p.promptWARN = !1, p.showAuth_codeBox = !0, p.setIntervalId = setInterval(function () {
                                document.getElementById("auth_codeC").focus()
                            }, 100);
                            break;
                        case "cash":
                        case "check":
                        case "card":
                        case "pos":
                            _.each(p.mrr, function (a) {
                                var b = {
                                    _venue: a,
                                    total: p.price,
                                    payment: p.order.payment
                                };
                                i.spePay({
                                    id: p.mId
                                }, b, function (a) {
                                    p.printFlag && (p.tot = a.data.member.cards[0].total, a.data.member.virtualAccount.expires_in ? p.xd = p.getNowFormatDate(new Date(a.data.member.virtualAccount.expires_in)) : p.xd = "", p.vPrice = a.data.member.virtualAccount.total, p.print("专用账户充值")), p.close(), p.promptWARN = !1, p.getMember(), p.toastFlag = !0, p.wordOK = "充值成功", k(function () {
                                        p.toastFlag = !1
                                    }, 1e3)
                                }, function (a) {
                                    p.promptWARN = !1, p.promptERR = !0, p.wordERR = a.data.data, p.wxFlag = !1, p.getMember()
                                })
                            })
                        }
                    }, function (a) {
                        p.promptWARN = !1, p.promptERR = !0, p.wordERR = a.data.data, p.wxFlag = !1, p.getMember()
                    })
                }
                switch (p.order.payment) {
                case "wx":
                case "alipay":
                    p.promptWARN = !1, p.showAuth_codeBox = !0, p.setIntervalId = setInterval(function () {
                        document.getElementById("auth_codeC").focus()
                    }, 100);
                    break;
                case "cash":
                case "check":
                case "card":
                case "pos":
                    if (p.moneySelect) {
                        var b = {
                            _card: p.cardId,
                            payment: p.order.payment
                        };
                        i.addCard({
                            id: p.mId
                        }, b, function (a) {
                            p.printFlag && (p.tot = a.data.member.cards[0].total, a.data.member.virtualAccount.expires_in ? p.xd = p.getNowFormatDate(new Date(a.data.member.virtualAccount.expires_in)) : p.xd = "", p.vPrice = a.data.member.virtualAccount.total, p.price = p.realPrice, p.print("现金充值")), p.close(), p.promptWARN = !1, p.getMember(), p.toastFlag = !0, p.wordOK = "充值成功", k(function () {
                                p.toastFlag = !1
                            }, 1e3)
                        }, function (a) {
                            p.promptWARN = !1, p.promptERR = !0, p.wordERR = a.data.data, p.wxFlag = !1, p.getMember()
                        })
                    } else p.promptWARN = !1
                }
            } else {
                if (!p.chargeCardNum) return p.promptWARN = !1, p.promptERR = !0, void(p.wordERR = "请输入充值卡卡号");
                if (!p.chargeCardPassword) return p.promptWARN = !1, p.promptERR = !0, void(p.wordERR = "请输入充值卡密码");
                var c = {
                    cardNum: p.chargeCardNum,
                    password: p.chargeCardPassword
                };
                p.chargeVenue && p.speSelect && (c = _.merge(c, {
                    _venue: p.chargeVenue._id
                })), n.charge({
                    id: p.mId
                }, c, function (b) {
                    p.printFlag && (p.tot = b.data.member.cards[0].total, b.data.member.virtualAccount.expires_in ? p.xd = p.getNowFormatDate(new Date(b.data.member.virtualAccount.expires_in)) : p.xd = "", p.vPrice = b.data.member.virtualAccount.total, p.print("充值卡充值")), p.continueFlag = !1, p.toastFlag = !0, p.wordOK = "充值成功", p.wordOK = b.data.data, setTimeout(function () {
                        a.$apply(function () {
                            p.toastFlag = !1
                        })
                    }, 1e3), p.getMember(), p.chargeVenue = "", p.chargeCardNum = "", p.chargeCardPassword = "", p.promptWARN = !1, p.moneySelect = !0, p.oneSelect = !1, p.cardSelect = !1, p.speSelect = !1
                }, function (a) {
                    p.promptWARN = !1, "找不到对象：card" == a.data.data ? (p.promptERR = !0, p.wordERR = "充值卡不存在或已使用") : (p.promptERR = !0, p.wordERR = a.data.data)
                })
            }
        }, p.print = function (a) {
            var b = '<div><div><h3 style="font-size:20px">欢迎光临</h3><h3 style="font-size:20px">充值消费小票</h3>操作员：' + p.admin + "</h3></div><span>**********************************</span><div>";
            b = b + "<div>充值方式:" + a + "</div><div>充值金额:" + p.price + "</div><div>现金账户余额:￥" + p.tot + "</div><div>虚拟账户余额:￥" + p.vPrice + "</div><div>有效期:" + p.xd, b = b + "</div><div>消费日期:" + p.getNowFormatDate(new Date) + "</div><span>**********************************</span><div>客户签名:</div>";
            var c = getLodop();
            c.PRINT_INIT(""), c.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), c.SET_PRINTER_INDEXA(-1), c.SET_PRINT_PAGESIZE(3, 800, 100, ""), c.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", b), c.PRINT()
        }, p.getNowFormatDate = function (a) {
            var b = "-",
                c = ":",
                d = a.getMonth() + 1,
                e = a.getDate();
            d >= 1 && 9 >= d && (d = "0" + d), e >= 0 && 9 >= e && (e = "0" + e);
            var f = a.getFullYear() + b + d + b + e + " " + a.getHours() + c + a.getMinutes() + c + a.getSeconds();
            return f
        }, p.showSelect = function (a) {
            switch (a) {
            case "card":
                p.chooseCardFlag = !p.chooseCardFlag
            }
        }, p.freeze = function (a) {
            var b = {
                _member: a._id
            };
            i.freeze(b, function (a) {
                p.toastFlag = !0, p.wordOK = "冻结成功", k(function () {
                    p.toastFlag = !1
                }, 1e3), p.getMember()
            }, function (a) {
                p.phoneFlag = !0, p.errPhone = a.data.data
            })
        }, p.cfreeze = function (a) {
            var b = {
                _member: a._id
            };
            i.cfreeze(b, function (a) {
                p.toastFlag = !0, p.wordOK = "解除冻结成功", k(function () {
                    p.toastFlag = !1
                }, 1e3), p.getMember()
            }, function (a) {
                p.phoneFlag = !0, p.errPhone = a.data.data
            })
        }, p.choosePayment = function (a) {
            _.each(p.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), p.order.auth_code = "", a.image = "singleChoose_imageYes", p.order.payment = a.value, "alipay" == a.value || "wx" == a.value ? p.showCodeBox = !0 : p.showCodeBox = !1
        }, p.chooseState = function (a) {
            _.each(p.useStateArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", p.isBk = a.isUsed
        }, p.useStateArr = [{
            name: "需要",
            image: "singleChoose_imageNo",
            isUsed: !0
        }, {
            name: "不需要",
            image: "singleChoose_imageYes",
            isUsed: !1
        }], p.auth_codeCreate = function (a) {
            if (p.promptWARN = !0, p.wordWARN = "支付中", 13 == a.keyCode) switch (p.order.payment) {
            case "wx":
                var b = /^[1][0,1,2,3,4,5][0-9]{16}$/;
                if (!b.test(p.auth_code)) return p.auth_code = "", p.promptWARN = !1, p.promptERR = !0, void(p.wordERR = "支付码错误，重新扫码");
                if (p.defindFlag) {
                    p.needFlag && p.isBk ? p.isBk = !0 : p.isBk = !1, p.wxFlag = !0;
                    var c = {
                        idType: p.idType,
                        idCard: p.idCard,
                        tel: p.phone,
                        name: p.name
                    };
                    return i.update({
                        id: p.mId
                    }, c, function (a) {
                        var b = {
                            _member: p.mId,
                            cardNo: p.cardNum,
                            auth_code: p.auth_code,
                            spbill_create_ip: "0.0.0.0"
                        };
                        i.wxPayBind(b, function (a) {
                            p.close(), p.toastFlag = !0, p.wordOK = "支付成功", p.auth_code = "", k(function () {
                                p.toastFlag = !1
                            }, 1e3), p.getMember()
                        }, function (a) {
                            p.auth_code = "", p.deleteFlag = !0, p.payWarn = a.data.data, p.wxFlag = !1, p.getMember()
                        })
                    }, function (a) {
                        p.auth_code = "", p.deleteFlag = !0, p.payWarn = a.data.data, p.wxFlag = !1
                    }), p.promptWARN = !1, clearInterval(p.setIntervalId), void(p.showAuth_codeBox = !1)
                }
                var d = {
                    name: p.name,
                    tel: p.phone,
                    _card: "",
                    idType: p.idType,
                    idCard: p.idCard,
                    type: p.typeName,
                    payment: "wx",
                    levelDes: p.membertypeName
                };
                i.create(d, function (a) {
                    if (p.mId = a.data.member._id, p.needFlag)
                        if (p.isBk) {
                            p.isBk = !0;
                            var b = {
                                _member: p.mId,
                                cardNo: p.cardNum,
                                auth_code: p.auth_code,
                                spbill_create_ip: "0.0.0.0"
                            };
                            i.wxPayBind(b, function (a) {
                                p.close(), p.toastFlag = !0, p.wordOK = "支付成功", p.promptWARN = !1, p.showAuth_codeBox = !1, p.auth_code = "", clearInterval(p.setIntervalId), k(function () {
                                    p.toastFlag = !1
                                }, 1e3), p.getMember()
                            }, function (a) {
                                p.auth_code = "", p.showAuth_codeBox = !1, p.promptWARN = !1, p.deleteFlag = !0, p.payWarn = a.data.data, clearInterval(p.setIntervalId), p.wxFlag = !1, p.getMember()
                            })
                        } else p.isBk = !1;
                    else p.isBk = !1;
                    p.wxFlag = !0
                }, function (a) {
                    clearInterval(p.setIntervalId), p.promptWARN = !1, p.showAuth_codeBox = !1, 402 == a.data.code ? (p.phoneFlag = !0, p.errPhone = "手机号码格式错误") : 500 == a.data.code && (p.phoneFlag = !0, p.errPhone = "该手机号已被使用", p.payFlag = !1, p.addFlag = !0)
                });
                break;
            case "alipay":
                var b = /^[25,26,27,28,29,30][0-9]{14,22}$/;
                if (!b.test(p.auth_code)) return p.auth_code = "", p.promptWARN = !1, p.promptERR = !0, void(p.wordERR = "支付码错误，重新扫码");
                if (p.defindFlag) {
                    p.needFlag && p.isBk ? p.isBk = !0 : p.isBk = !1, p.wxFlag = !0;
                    var c = {
                        idType: p.idType,
                        idCard: p.idCard,
                        tel: p.phone,
                        name: p.name
                    };
                    return i.update({
                        id: p.mId
                    }, c, function (a) {
                        var b = {
                            _member: p.mId,
                            cardNo: p.cardNum,
                            auth_code: p.auth_code
                        };
                        l.payBind(b, function (a) {
                            sself.close(), p.toastFlag = !0, p.wordOK = "支付成功", p.auth_code = "", k(function () {
                                p.toastFlag = !1
                            }, 1e3), p.getMember()
                        }, function (a) {
                            p.getMember(), p.deleteFlag = !0, p.auth_code = "", p.payWarn = a.data.data, p.wxFlag = !1
                        })
                    }, function (a) {
                        p.deleteFlag = !0, p.auth_code = "", p.payWarn = a.data.data
                    }), clearInterval(p.setIntervalId), p.showAuth_codeBox = !1, void(p.promptWARN = !1)
                }
                var d = {
                    name: p.name,
                    tel: p.phone,
                    _card: "",
                    idType: p.idType,
                    idCard: p.idCard,
                    type: p.typeName,
                    payment: "alipay",
                    levelDes: p.membertypeName
                };
                i.create(d, function (a) {
                    if (p.mId = a.data.member._id, p.needFlag)
                        if (p.isBk) {
                            p.isBk = !0;
                            var b = {
                                _member: p.mId,
                                cardNo: p.cardNum,
                                auth_code: p.auth_code
                            };
                            l.payBind(b, function (a) {
                                p.close(), p.toastFlag = !0, p.wordOK = "支付成功", p.promptWARN = !1, p.showAuth_codeBox = !1, p.auth_code = "", clearInterval(p.setIntervalId), k(function () {
                                    p.toastFlag = !1
                                }, 1e3), p.getMember()
                            }, function (a) {
                                p.auth_code = "", p.showAuth_codeBox = !1, p.promptWARN = !1, p.deleteFlag = !0, p.payWarn = a.data.data, clearInterval(p.setIntervalId), p.wxFlag = !1, p.getMember()
                            })
                        } else p.isBk = !1;
                    else p.isBk = !1;
                    p.wxFlag = !0
                }, function (a) {
                    clearInterval(p.setIntervalId), p.promptWARN = !1, p.showAuth_codeBox = !1, 402 == a.data.code ? (p.phoneFlag = !0, p.errPhone = "手机号码格式错误") : 500 == a.data.code && (p.phoneFlag = !0, p.errPhone = "该手机号已被使用", p.payFlag = !1, p.addFlag = !0)
                })
            }
        }, p.create = function () {
            if (p.promptWARN = !0, p.defindFlag) return void p.deFun();
            switch (p.order.orderDate || (p.order.orderDate = new Date), p.order.orderDate = new Date(p.order.orderDate).getTime(), p.order.payment) {
            case "wx":
            case "alipay":
                p.promptWARN = !1, p.showAuth_codeBox = !0, p.setIntervalId = setInterval(function () {
                    document.getElementById("auth_code").focus()
                }, 100);
                break;
            case "cash":
            case "check":
            case "card":
            case "pos":
                var a = {
                    name: p.name,
                    tel: p.phone,
                    idType: p.idType,
                    idCard: p.idCard,
                    type: p.typeName,
                    payment: p.order.payment,
                    levelDes: p.membertypeName
                };
                i.create(a, function (a) {
                    if (p.needFlag) {
                        var b = {
                            _member: a.data.member._id,
                            cardNo: p.cardNum
                        };
                        p.isUsed && (b = _.merge(b, {
                            isCost: !0,
                            payment: p.order.payment
                        })), i.cardBind(b, function (a) {
                            q()
                        }, function (a) {
                            p.phoneFlag = !0, p.errPhone = a.data.data
                        })
                    }
                    p.promptWARN = !1, p.close(), p.getMember()
                }, function (a) {
                    p.promptWARN = !1, 402 == a.data.code ? (p.phoneFlag = !0, p.errPhone = "手机号码格式错误") : 500 == a.data.code && (p.phoneFlag = !0, p.errPhone = "该手机号已被使用", p.payFlag = !1, p.addFlag = !0)
                })
            }
        }, p.chooseCard = function (a) {
            p.chooseCardFlag = !1, p.cardName = a.name, p.cardId = a._id, p.realPrice = a.realPrice
        }, p.judge = function (a) {
            switch (a) {
            case "name":
                p.name ? p.nameFlag = !1 : p.nameFlag = !0;
                break;
            case "phone":
                p.phone ? p.phoneFlag = !1 : p.phoneFlag = !0;
                break;
            case "tel":
                if (11 == p.tel.length) {
                    var b = {
                        mix: p.tel
                    };
                    i.index(b, function (a) {
                        p.answerFlag = !0, 1 == a.data.members.length ? (p.jFlag = !0, p.name = a.data.members[0].name, p.toId = a.data.members[0]._id) : p.jFlag = !1
                    }, function (a) {
                        p.promptERR = !0, p.wordERR = a.data.data
                    })
                }
            }
        }, p.move = function () {
            if (11 != p.tel.length) return p.promptERR = !0, void(p.wordERR = "请填写正确手机号");
            var a = {
                move_from: p.fromId,
                move_to: p.toId
            };
            i.move(a, function (a) {
                p.toastFlag = !0, p.wordOK = "账户过户成功", p.getMember(), k(function () {
                    p.toastFlag = !1
                }, 1e3), p.close()
            }, function (a) {
                p.promptERR = !0, p.wordERR = a.data.data
            })
        }, p.bk = function (a) {
            if (p.promptWARN = !0, p.wordWARN = "支付中", 13 == a.keyCode) switch (p.order.payment) {
            case "wx":
                var b = /^[1][0,1,2,3,4,5][0-9]{16}$/;
                if (!b.test(p.auth_code)) return p.auth_code = "", p.promptWARN = !1, p.promptERR = !0, void(p.wordERR = "支付码错误，重新扫码");
                p.wxFlag = !0;
                var c = {
                    _member: p.mId,
                    cardNo: p.cardNum,
                    auth_code: p.auth_code,
                    spbill_create_ip: "0.0.0.0"
                };
                i.wxPayBind(c, function (a) {
                    if (p.defindFlag) {
                        var b = {
                            idCard: p.idCard,
                            tel: p.phone,
                            name: p.name,
                            idType: p.idType
                        };
                        i.update({
                            id: p.mId
                        }, b, function (a) {
                            p.close(), p.toastFlag = !0, p.wordOK = "支付成功", p.promptWARN = !1, p.showAuth_codeBox = !1, p.auth_code = "", clearInterval(p.setIntervalId), k(function () {
                                p.toastFlag = !1
                            }, 1e3), p.getMember()
                        }, function (a) {
                            p.deleteFlag = !0, p.payWarn = a.data.data
                        })
                    } else p.close(), p.toastFlag = !0, p.wordOK = "支付成功", p.promptWARN = !1, p.showAuth_codeBox = !1, p.auth_code = "", clearInterval(p.setIntervalId), k(function () {
                        p.toastFlag = !1
                    }, 1e3), p.getMember()
                }, function (a) {
                    p.auth_code = "", p.showAuth_codeBox = !1, p.promptWARN = !1, p.deleteFlag = !0, p.payWarn = a.data.data, clearInterval(p.setIntervalId), p.wxFlag = !1, p.getMember()
                });
                break;
            case "alipay":
                var b = /^[25,26,27,28,29,30][0-9]{14,22}$/;
                if (!b.test(p.auth_code)) return p.auth_code = "", p.promptWARN = !1, p.promptERR = !0, void(p.wordERR = "支付码错误，重新扫码");
                var c = {
                    _member: p.mId,
                    cardNo: p.cardNum,
                    auth_code: p.auth_code
                };
                l.payBind(c, function (a) {
                    if (p.defindFlag) {
                        var b = {
                            idCard: p.idCard,
                            tel: p.phone,
                            name: p.name,
                            idType: p.idType
                        };
                        i.update({
                            id: p.mId
                        }, b, function (a) {
                            p.close(), p.toastFlag = !0, p.wordOK = "支付成功", p.promptWARN = !1, p.showAuth_codeBox = !1, p.auth_code = "", clearInterval(p.setIntervalId), k(function () {
                                p.toastFlag = !1
                            }, 1e3), p.getMember()
                        }, function (a) {
                            p.deleteFlag = !0, p.payWarn = a.data.data
                        })
                    } else p.close(), p.toastFlag = !0, p.wordOK = "支付成功", p.promptWARN = !1, p.showAuth_codeBox = !1, p.auth_code = "", clearInterval(p.setIntervalId), k(function () {
                        p.toastFlag = !1
                    }, 1e3), p.getMember()
                }, function (a) {
                    p.auth_code = "", p.showAuth_codeBox = !1, p.promptWARN = !1, p.deleteFlag = !0, p.payWarn = a.data.data, clearInterval(p.setIntervalId), p.wxFlag = !1, p.getMember()
                })
            }
        }, p.deFun = function () {
            switch (p.order.payment) {
            case "wx":
            case "alipay":
                p.promptWARN = !1, p.showAuth_codeBox = !0, p.setIntervalId = setInterval(function () {
                    document.getElementById("bk").focus()
                }, 100);
                break;
            case "cash":
            case "check":
            case "card":
            case "pos":
                var a = {
                    _member: p.mId,
                    cardNo: p.cardNum,
                    isCost: !0,
                    payment: p.order.payment
                };
                i.cardBind(a, function (a) {
                    var b = {
                        idCard: p.idCard,
                        tel: p.phone,
                        name: p.name,
                        idType: p.idType
                    };
                    i.update({
                        id: p.mId
                    }, b, function (a) {
                        p.close(), p.toastFlag = !0, p.wordOK = "支付成功", k(function () {
                            p.toastFlag = !1
                        }, 1e3), p.getMember(), p.promptWARN = !1, q()
                    }, function (a) {
                        p.deleteFlag = !0, p.payWarn = a.data.data
                    })
                }, function (a) {
                    p.promptWARN = !1, p.phoneFlag = !0, p.errPhone = a.data.data
                })
            }
        }, p.bind = function () {
            if (!p.cardNum) return void(p.cardFlag = !0);
            if (p.isBk) switch (p.order.payment) {
            case "wx":
            case "alipay":
                p.showAuth_codeBox = !0, p.setIntervalId = setInterval(function () {
                    document.getElementById("fillCard").focus()
                }, 100);
                break;
            case "cash":
            case "check":
            case "card":
            case "pos":
                var a = {
                    _member: p.mId,
                    cardNo: p.cardNum,
                    isCost: !0,
                    payment: p.order.payment
                };
                i.cardBind(a, function (a) {
                    p.close(), p.toastFlag = !0, p.wordOK = "支付成功", k(function () {
                        p.toastFlag = !1
                    }, 1e3), p.getMember(), p.printCard(), q()
                }, function (a) {
                    p.phoneFlag = !0, p.errPhone = a.data.data
                })
            } else {
                var a = {
                    _member: p.mId,
                    cardNo: p.cardNum
                };
                i.cardBind(a, function (a) {
                    p.close(), p.wordOK = "绑定成功", p.toastFlag = !0, k(function () {
                        p.toastFlag = !1
                    }, 1e3), p.getMember(), q()
                }, function (a) {
                    p.phoneFlag = !0, p.errPhone = a.data.data
                })
            }
        }, p.printCard = function () {
            var a = '<div><div><h3 style="font-size:20px">欢迎光临</h3><h3 style="font-size:20px">办卡消费小票</h3>操作员：' + p.admin + "</h3></div><span>**********************************</span><div>";
            a = a + "<div>办卡金额:" + p.cardCost + "元</div>", a = a + "<div>办卡日期:" + p.getNowFormatDate(new Date) + "</div><span>**********************************</span><div>客户签名:</div>";
            var b = getLodop();
            b.PRINT_INIT(""), b.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), b.SET_PRINTER_INDEXA(-1), b.SET_PRINT_PAGESIZE(3, 800, 100, ""), b.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", a), b.PRINT()
        }, p.finish = function () {
            if (p.name ? p.nameFlag = !1 : p.nameFlag = !0, p.phone) {
                var a = /^(((13[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(14[0-9]{1})|(18[0-9]{1}))+\d{8})$/;
                a.test(p.phone) ? p.phoneFlag = !1 : (p.errPhone = "请输入有效的手机号码！", p.phoneFlag = !0)
            } else p.errPhone = "此项为必填项", p.phoneFlag = !0; if (!p.nameFlag && !p.phoneFlag)
                if (p.defindFlag) {
                    if (!p.needFlag) {
                        if (!p.idCard) return void(p.idFlag = !0);
                        var b = {
                            idCard: p.idCard,
                            tel: p.phone,
                            name: p.name,
                            idType: p.idType
                        };
                        return void i.update({
                            id: p.mId
                        }, b, function (a) {
                            p.close(), p.toastFlag = !0, p.wordOK = "认证成功", k(function () {
                                p.toastFlag = !1
                            }, 1e3), p.getMember()
                        }, function (a) {
                            p.deleteFlag = !0, p.payWarn = a.data.data
                        })
                    }
                    if (!p.cardNum) return void(p.cardFlag = !0);
                    if (!p.isBk) {
                        var b = {
                            idCard: p.idCard,
                            tel: p.phone,
                            name: p.name,
                            idType: p.idType
                        };
                        return void i.update({
                            id: p.mId
                        }, b, function (a) {
                            var b = {
                                _member: p.mId,
                                cardNo: p.cardNum
                            };
                            i.cardBind(b, function (a) {
                                p.close(), p.toastFlag = !0, p.wordOK = "认证成功", k(function () {
                                    p.toastFlag = !1
                                }, 1e3), p.getMember(), q()
                            }, function (a) {
                                p.phoneFlag = !0, p.errPhone = a.data.data
                            })
                        }, function (a) {
                            p.deleteFlag = !0, p.payWarn = a.data.data
                        })
                    }
                    p.payFlag = !0, p.addFlag = !1, p.rp = p.cardCost
                } else if (p.addFlag = !1, p.isBk && p.needFlag) p.payFlag = !0, p.rp = p.cardCost, p.add = !0;
            else {
                var c = {
                    name: p.name,
                    tel: p.phone,
                    idCard: p.idCard,
                    type: p.typeName,
                    idType: p.idType,
                    levelDes: p.membertypeName
                };
                i.create(c, function (a) {
                    if (p.needFlag) {
                        var b = {
                            _member: a.data.member._id,
                            cardNo: p.cardNum
                        };
                        i.cardBind(b, function (a) {
                            q()
                        }, function (a) {
                            p.phoneFlag = !0, p.errPhone = a.data.data
                        })
                    }
                    p.promptWARN = !1, p.close(), p.getMember()
                }, function (a) {
                    p.promptWARN = !1, 402 == a.data.code ? (p.phoneFlag = !0, p.errPhone = "手机号码格式错误") : 500 == a.data.code && (p.phoneFlag = !0, p.errPhone = "该手机号已被使用", p.payFlag = !1, p.addFlag = !0)
                })
            }
        };
        var q = function () {
                e.get({}, function (a) {
                    var b = a.data.user._organization ? a.data.user._organization : a.data.user._id;
                    p.admin = a.data.user.name, p.cardCount = a.data.user.cardNum, e.getOrgInfo({
                        id: b
                    }, function (a) {
                        p._id = a.data.user._id, p.cardCost = a.data.user.cardCost, r()
                    }, function () {})
                }, function () {})
            },
            r = function () {
                var a = {
                    state: "all",
                    _org: p._id,
                    sortBy: "realPrice"
                };
                j.index(a, function (a) {
                    a.data.cards.length > 0 && (a.data.cards[0].select = !0, p.cardName = a.data.cards[0].name + "(" + a.data.cards[0].price + "元)", p.cardId = a.data.cards[0]._id, a.data.cards[0].flag = !0, p.realPrice = a.data.cards[0].realPrice), p.cards = a.data.cards
                })
            };
        p.chooseNewCard = function (a) {
            p.choosedCardFlag = !1, p.cardId = a._id, p.cardName = a.name + "(" + a.price + "元)", p.realPrice = a.realPrice
        }, p.choose = function (a) {
            _.each(p.cCards, function (a) {
                a.select = !1
            }), a.select = !0, "自定义充值" == a.price ? p.selfFlag = !0 : (p.cardId = a._id, p.selfFlag = !1, p.realPrice = a.realPrice)
        }, p.chooseType = function (a) {
            for (var b = 0; b < p.types.length; b++) p.types[b].select = !1;
            a.select = !0, p.choosedTypeFlag = !1, p.typeName = a.name
        }, p.pageChanged = function () {
            c.mPage = p.pagination.page, p.mix = p.searchName, p.getMember()
        }, p.search = function () {
            p.pagination.page = 1, p.pagination.itemsPerPage = 10, p.mix = p.searchName, p.getMember()
        }, p.getMember = function () {
            k(function () {
                p.levelFlag = !1, p.realFlag = !1, p.freezeFlag = !1;
                var a = {
                    isFreezed: p.isFreeze,
                    isReal: p.isReal,
                    levelDes: p.levelDes,
                    page: p.pagination.page,
                    itemsPerPage: p.pagination.itemsPerPage,
                    mix: p.mix,
                    state: p.state
                };
                i.index(a, function (a) {
                    p.mix = "", p.members = a.data.members;
                    for (var b = 0; b < p.members.length; b++) p.members[b].cardNo && p.members[b].cardNo.length > 9 && (p.members[b].cardNo = p.members[b].cardNo.substring(p.members[b].cardNo.length - 9, p.members[b].cardNo.length)), p.members[b].memberNo && p.members[b].memberNo.length > 9 && (p.members[b].memberNo = p.members[b].memberNo.substring(p.members[b].memberNo.length - 9, p.members[b].memberNo.length)), p.members[b].virtualAccount.expires_in && ((new Date).getTime() > new Date(p.members[b].virtualAccount.expires_in).getTime() ? p.members[b].virFlag = !0 : p.members[b].virFlag = !1), p.members[b].cards.length > 0 ? p.members[b].p = p.members[b].cards[0].total : p.members[b].p = "0", _.each(p.members[b].specialAccount, function (a) {
                        "5a1e4774138f87e51c2e79e9" == a._venue ? (p.members[b].accFlag = !0, p.members[b].accTot = a.total) : (p.members[b].accFlag = !1, p.members[b].accTot = 0)
                    });
                    var c = a.data.count;
                    p.pagination.totalItems = c, p.pagination.numPages = c / p.itemsPerPage
                })
            }, 100)
        }, p.initEmpty = function () {
            p.order = {
                _member: "",
                spbill_create_ip: "",
                auth_code: "",
                payment: "alipay",
                _card: ""
            }
        }, p.codeTel = function () {
            var a = {
                tel: p.phone,
                _org: p._id
            };
            i.judge(a, function (a) {
                a.data.isValued && (p.promptERR = !0, p.wordERR = "该手机号已被使用")
            }, function (a) {
                p.promptERR = !0, p.wordERR = a.data.data
            })
        };
        var s = function () {
                m.index({}, function (a) {
                    p.venues = a.data.venues, p.vrr = [], _.each(p.venues, function (a) {
                        a.openSpe && p.vrr.push(a)
                    })
                }, function (a) {})
            },
            t = function () {
                o.index({}, function (a) {
                    p.membertypes = a.data.membertypes, p.membertypeName = p.membertypes[0] ? p.membertypes[0].name : "暂无"
                }, function (a) {})
            },
            u = function () {
                q(), p.getMember(), r(), s(), t()
            };
        p.chooseChargeVenue = function (a) {
            p.chargeVenue ? p.chargeVenue._id == a._id ? (p.chargeVenue.image = "singleChoose_imageNo2", p.chargeVenue = "") : (p.chargeVenue.image = "singleChoose_imageNo2", p.chargeVenue = a, p.chargeVenue.image = "singleChoose_imageYes2") : (p.chargeVenue = a, p.chargeVenue.image = "singleChoose_imageYes2")
        }, u()
    }
    angular.module("fieldApp").controller("CsdMemberCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "Card", "$timeout", "Alipay", "Venue", "Tucard", "Membertype"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this;
        j.titleState = "member", j.canEdit = !1, j.cardNo = "请选择账号", j.telArr = [], j.close = function () {
            j.addFlag = !1, j.cardNo = "请选择账号", j.name = "", j.idCard = "", j.phone = "", j.noFlag = !1, j.nameFlag = !1, j.idFlag = !1, j.phoneFlag = !1
        }, j.showInfo = function (a) {
            j.name = a.name, j.tel = a.tel, j.cardNo = a.memberNo, j.merges = a.merge, j.infoFlag = !0
        }, j.page = 1, j.itemsPerPage = 10, j.pagination = {
            page: j.page,
            itemsPerPage: j.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, j.pageChanged = function () {
            j.getHistory()
        };
        j.search = function () {
            if (!j.searchNum) return j.promptERR = !0, void(j.wordERR = "请填写会员卡号/手机号");
            var a = {
                tel: j.searchNum
            };
            i.judgeAdd(a, function (a) {
                a.data.needMerge ? (j.members = a.data.members, _.each(j.members, function (a) {
                    a.cards[0] ? a.xPrice = a.cards[0].total : a.xPrice = 0, a.fPrice = a.virtualAccount.total
                })) : (j.promptERR = !0, j.wordERR = "该账号唯一，不需要合并")
            }, function (a) {
                var b = {
                    cardNo: j.searchNum
                };
                i.judgeAdd(b, function (a) {
                    a.data.needMerge ? (j.members = a.data.members, _.each(j.members, function (a) {
                        a.cards[0] ? a.xPrice = a.cards[0].total : a.xPrice = 0, a.fPrice = a.virtualAccount.total
                    })) : (j.promptERR = !0, j.wordERR = "该账号唯一，不需要合并")
                }, function (a) {
                    j.wordERR = a.data.data, j.promptERR = !0
                })
            })
        }, j.changeM = function (a) {
            j.canEdit = !1, a.selectFlag = !a.selectFlag, _.each(j.members, function (a) {
                return a.selectFlag ? void(j.canEdit = !0) : void 0
            })
        }, j.toAdd = function () {
            j.addFlag = !0, j.chooseMembers = [];
            for (var a = 0; a < j.members.length; a++) j.members[a].selectFlag && j.chooseMembers.push(j.members[a])
        }, j.choose = function (a) {
            j.chooseId = a._id, j.cardNo = a.cardNo, j.name = a.name, j.idCard = a.idCard, _.each(j.members, function (a) {
                a.oneSelect = !1
            }), a.oneSelect = !0, j.choosedMemberFlag = !1
        }, j.finish = function () {
            if (j.jFlag = !1, "请选择账号" == j.cardNo ? j.noFlag = !0 : j.noFlag = !1, j.name ? j.nameFlag = !1 : j.nameFlag = !0, j.idCard ? j.idFlag = !1 : j.idFlag = !0, j.phone ? j.phoneFlag = !1 : j.phoneFlag = !0, !(j.noFlag || j.nameFlag || j.idFlag || j.phoneFlag)) {
                if (_.each(j.telArr, function (a) {
                    a == j.phone && (j.jFlag = !0)
                }), j.jFlag) return j.wordERR = "该号码已被使用", void(j.promptERR = !0);
                var a = {
                    tel: j.phone,
                    name: j.name,
                    idCard: j.idCard,
                    cardNo: j.cardNo,
                    xPrice: 0,
                    fPrice: 0,
                    rFlag: !0,
                    nMembers: j.chooseMembers,
                    memberArr: []
                };
                _.each(j.chooseMembers, function (b) {
                    if (a.xPrice = a.xPrice + b.xPrice, a.fPrice = a.fPrice + b.fPrice, b.oneSelect) var c = {
                        id: b._id,
                        tel: j.phone,
                        name: j.name,
                        idCard: j.idCard,
                        option: "mergeAs"
                    };
                    else var c = {
                        id: b._id,
                        tel: "13333333333",
                        name: "xx",
                        idCard: "333333333333333",
                        option: "merge",
                        mergeTo: j.chooseId
                    };
                    a.memberArr.push(c)
                });
                var b = [];
                b.push(a), _.each(j.members, function (a) {
                    a.selectFlag || b.push(a)
                }), j.members = b, j.telArr.push(j.phone), j.close()
            }
        }, j.re = function (a) {
            var b = [],
                c = [];
            _.each(a.nMembers, function (a) {
                b.push(a)
            }), _.each(j.members, function (c) {
                c.cardNo != a.cardNo && b.push(c)
            }), j.members = b, _.each(j.telArr, function (b) {
                b != a.tel && j.brr.push[b]
            }), j.telArr = c
        }, j.sure = function () {
            var a = !1;
            return _.each(j.members, function (b) {
                b.rFlag || (a = !0)
            }), a ? void(j.deleteFlag = !0) : void j.submit()
        }, j.submit = function () {
            var a = {
                tel: j.searchNum,
                memberArr: []
            };
            _.each(j.members, function (b) {
                if (b.rFlag) _.each(b.memberArr, function (b) {
                    a.memberArr.push(b)
                });
                else {
                    var c = {
                        id: b._id,
                        tel: "13333333333",
                        name: "22",
                        idCard: "22",
                        option: "delete"
                    };
                    a.memberArr.push(c)
                }
            }), i.add(a, function (a) {
                j.wordOK = "合并成功", j.promptOK = !0, j.deleteFlag = !1, j.members = [], j.telArr = []
            }, function (a) {
                j.wordERR = a.data.data, j.promptERR = !0
            })
        }, j.changeTitle = function (a) {
            switch (j.titleState = "", a) {
            case "member":
                j.titleState = "member", f.go("csd-old.member", {
                    state: "member"
                });
                break;
            default:
                j.titleState = "record", f.go("csd-old.record", {
                    state: "record"
                })
            }
            k()
        };
        var k = function () {
            j.getHistory()
        };
        j.getHistory = function () {
            var a = {
                tel: j.searchN,
                page: j.pagination.page,
                itemsPerPage: j.pagination.itemsPerPage
            };
            i.mergeHistory(a, function (a) {
                j.historyMembers = a.data.members, _.each(a.data.members, function (a) {
                    if (a.rr = [], a.memberNo) var b = a.memberNo;
                    else var b = "暂无";
                    a.des = a.name + "会员号:" + b + "余额:" + a.cards[0].total, a.rr.push(a.des), _.each(a.merge, function (b) {
                        if (b.memberNo) var c = b.memberNo;
                        else var c = "暂无";
                        a.des = a.des + ";" + b.name + "会员号:" + c + "余额:" + b.cards[0].total;
                        var d = b.name + "会员号:" + c + "余额:" + b.cards[0].total;
                        a.rr.push(d)
                    })
                });
                var b = a.data.count;
                j.pagination.totalItems = b, j.pagination.numPages = b / j.itemsPerPage
            }, function (a) {
                var b = {
                    cardNo: j.searchN
                };
                i.mergeHistory(b, function (a) {
                    _.each(a.data.members, function (a) {
                        if (a.rr = [], a.memberNo) var b = a.memberNo;
                        else var b = "暂无";
                        a.des = a.name + "会员号:" + b + "余额:" + a.cards[0].total, a.rr.push(a.des), _.each(a.merge, function (b) {
                            if (b.memberNo) var c = b.memberNo;
                            else var c = "暂无";
                            a.des = a.des + ";" + b.name + "会员号:" + c + "余额:" + b.cards[0].total;
                            var d = b.name + "会员号:" + c + "余额:" + b.cards[0].total;
                            a.rr.push(d)
                        })
                    }), j.historyMembers = a.data.members;
                    var b = a.data.count;
                    j.pagination.totalItems = b, j.pagination.numPages = b / j.itemsPerPage
                }, function (a) {
                    j.wordERR = a.data.data, j.promptERR = !0
                })
            })
        }, j.enterCheck = function (a) {
            13 == a.keyCode && j.checkMember()
        }, k()
    }
    angular.module("fieldApp").controller("CsdOldCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
        var q = this;
        q.titleState = f.params.state || "sale";
        var r, s = function () {
                k.index({
                    isUsed: !0
                }, function (a) {
                    q.venues = [{
                        name: "全部"
                    }].concat(a.data.venues)
                }, function () {})
            },
            t = function () {
                n.index({}, function (a) {
                    q.productCategories = [{
                        name: "全部"
                    }].concat(a.data.productcategories)
                }, function () {})
            },
            u = function () {
                e.index({}, function (a) {
                    q.workers = a.data.users, v()
                }, function () {})
            },
            v = function () {
                e.get({}, function (a) {
                    q.me = [], q.me.push(a.data.user), q.workers = [{
                        name: "全部"
                    }].concat(q.me.concat(q.workers)), "organization" == q.me[0].role ? q.organization = q.me[0] : e.getOrgInfo({
                        id: q.me[0]._organization
                    }, function (a) {
                        q.organization = a.data.user
                    }, function () {})
                }, function () {})
            },
            w = function () {
                var a = {
                    page: q.pagination.page,
                    itemsPerPage: q.pagination.itemsPerPage,
                    statuses: ["buyProduct", "refundProduct"]
                };
                q.searchFirstId && (a = _.merge(a, {
                    _firstCategory: q.searchFirstId
                })), q.searchSecondId && (a = _.merge(a, {
                    _secondCategory: q.searchSecondId
                })), q.searchVenueId && (a = _.merge(a, {
                    venues: [q.searchVenueId]
                })), q.searchPayment && (a = _.merge(a, {
                    payment: q.searchPayment
                })), i.index(a, function (a) {
                    q.records = a.data.records, _.each(q.records, function (a) {
                        if (a.state) a.cost = ("add" == a.state ? "+" : "-") + a.cost;
                        else switch (a.status) {
                        case "buyProduct":
                            a.cost = "+" + a.cost;
                            break;
                        case "refundProduct":
                            a.cost = "-" + a.cost
                        }
                        switch (a.payment) {
                        case "wx":
                            a.payment = "微信支付";
                            break;
                        case "card":
                            a.payment = "转账支付";
                            break;
                        case "cash":
                            a.payment = "现金支付";
                            break;
                        case "member":
                            a.payment = "储值卡支付";
                            break;
                        case "member_vir":
                            a.payment = "虚拟卡支付";
                            break;
                        case "alipay":
                            a.payment = "支付宝支付";
                            break;
                        case "check":
                            a.payment = "支票支付";
                            break;
                        case "pos":
                            a.payment = "POS机支付";
                            break;
                        default:
                            a.payment = "无"
                        }
                    });
                    var b = a.data.count;
                    q.pagination.totalItems = b, q.pagination.numPages = b / q.itemsPerPage
                }, function () {})
            },
            x = function () {
                q.searchVenueId = "", q.searchItemId = "", q.searchFirstId = "", q.searchSecondId = "", q.searchWorkerId = "", q.searchPayment = "", q.showItemName = "选择项目", q.showVenueName = "选择场馆", q.showFirstName = "选择一级类目", q.showSecondName = "选择二级类目", q.showWorkerName = "提交人", q.showPaymentName = "支付方式", q.searchProductName = "", q.buyPayment = "alipay", q.buyProduct = "", q.name = "", q.price = "", q.remark = "", q.errState = "add", q.errRecordId = "", q.errPrice = "", q.errRemark = "", q.paymentArr = [{
                    name: "支付宝",
                    image: "singleChoose_imageYes",
                    value: "alipay"
                }, {
                    name: "微信",
                    image: "singleChoose_imageNo",
                    value: "wx"
                }, {
                    name: "现金",
                    image: "singleChoose_imageNo",
                    value: "cash"
                }, {
                    name: "转账",
                    image: "singleChoose_imageNo",
                    value: "card"
                }, {
                    name: "支票",
                    image: "singleChoose_imageNo",
                    value: "check"
                }, {
                    name: "POS机",
                    image: "singleChoose_imageNo",
                    value: "pos"
                }, {
                    name: "余额支付",
                    image: "singleChoose_imageNo",
                    value: "member"
                }], q.page = 1, q.itemsPerPage = 10, q.pagination = {
                    page: q.page,
                    itemsPerPage: q.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            y = function () {
                q.page = 1, q.itemsPerPage = 10, q.pagination = {
                    page: q.page,
                    itemsPerPage: q.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            z = function () {
                q.showChooseVenueBox = !1, q.showChooseItemBox = !1, q.showBuyProduct = !1, q.showChooseWorkerBox = !1, q.showChoosePaymentBox = !1, q.showErrChangeBox = !1, q.showAuth_codeBox = !1, clearInterval(q.setIntervalId)
            },
            A = function () {
                var a = {
                    page: q.pagination.page,
                    itemsPerPage: q.pagination.itemsPerPage
                };
                q.searchFirstId && (a = _.merge(a, {
                    _firstCategory: q.searchFirstId
                })), q.searchSecondId && (a = _.merge(a, {
                    _secondCategory: q.searchSecondId
                })), q.searchProductName && (a = _.merge(a, {
                    name: q.searchProductName
                })), q.searchVenueId && (a = _.merge(a, {
                    _venue: q.searchVenueId
                })), l.index(a, function (a) {
                    q.products = a.data.products;
                    var b = a.data.count;
                    q.pagination.totalItems = b, q.pagination.numPages = b / q.itemsPerPage
                }, function () {})
            };
        q.pageChanged = function () {
            "sale" == q.titleState ? A() : w()
        }, q.changeTitle = function (a) {
            switch (z(), x(), q.titleState = "", a) {
            case "sale":
                q.titleState = "sale", f.go("csd-product.sale", {
                    state: "sale"
                }), A();
                break;
            default:
                q.titleState = "record", f.go("csd-product.record", {
                    state: "record"
                }), w()
            }
        };
        var B = function () {
                x(), s(), u(), t(), "record" == f.params.state ? w() : A()
            },
            C = function (a) {
                var b = a.split("|");
                if (3 != b.length) return !1;
                var a = b[0],
                    c = b[1].split(""),
                    d = b[2],
                    e = d,
                    f = parseInt(r / 6e4).toString().split("");
                if (c.length < f.length) return !1;
                for (var g = 0; g < f.length; g++) d = d.replace(f[g], c[g]);
                return d == a ? e : !1
            };
        q.checkMember = function () {
            return q.memberTelOrCard ? void p.index({
                id: "today"
            }, function (a) {
                r = a.data;
                var b = C(q.memberTelOrCard);
                if (b) o.show({
                    id: b
                }, function (a) {
                    q.member = a.data.member, q.showMemberInfo = !0, q.memberId = q.member._id
                }, function (a) {
                    "找不到对象：member" == a.data.data && (q.showMemberInfo = !1, q.promptERR = !0, q.wordERR = "会员不存在")
                });
                else {
                    var c = {
                        cardNo: q.memberTelOrCard
                    };
                    o.indexBycard(c, function (a) {
                        q.member = a.data.member, q.showMemberInfo = !0, q.memberId = q.member._id
                    }, function (a) {
                        "找不到对象：member" == a.data.data && (q.showMemberInfo = !1, q.promptERR = !0, q.wordERR = "会员不存在")
                    })
                }
            }) : (q.promptERR = !0, void(q.wordERR = "请读取会员卡号/二维码"))
        }, q.chooseVenueName = function (a, b) {
            q.showChooseVenueBox = !1, q.showVenueName = a.name, q.searchVenueId = a._id, y(), "product" == b ? A() : w()
        }, q.chooseItemName = function (a, b) {
            q.showChooseItemBox = !1, q.showItemName = a.name, q.searchItemId = a._id, y(), "product" == b ? A() : w()
        }, q.chooseFirstName = function (a, b) {
            q.showChooseFirstBox = !1, q.showFirstName = a.name, q.searchFirstId = a._id, "全部" != a.name ? q.secondCategories = [{
                name: "全部"
            }].concat(a.secondCategories) : q.secondCategories = [{
                name: "全部"
            }], q.showSecondName = "全部", q.searchSecondId = "", y(), "product" == b ? A() : w()
        }, q.chooseSecondName = function (a, b) {
            q.showChooseSecondBox = !1, q.showSecondName = a.name, q.searchSecondId = a._id, y(), "product" == b ? A() : w()
        }, q.chooseWorkerName = function (a) {
            z(), y(), q.showWorkerName = a.name, q.searchWorkerId = a._id, w()
        }, q.choosePaymentName = function (a) {
            z(), y(), q.showPaymentName = a.name, q.searchPayment = a.value, w()
        }, q.searchProduct = function () {
            y(), A()
        }, q.choosePayment = function (a) {
            _.each(q.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", q.buyPayment = a.value
        }, q.openBuyProduct = function (a) {
            z(), q.showBuyProduct = !0, q.buyProduct = a
        };
        var D = function (a, b, c) {
            var d = new Date,
                e = '<div style="width: 250px;padding:0;margin: 0;"><div>';
            e += '<div style="font-size: 20px;font-weight: bold;">欢迎光临', e += q.organization.name, e += '</div><div style="font-size: 20px;font-weight: bold;margin-top: 10px;">购买综合服务消费小票</div>', e += '<div style="font-size: 16px;margin-top: 10px;">操作员：', e += q.me[0].name, e += '</div></div><div style="margin-top: 10px;">**************************************</div><div>', e += '<table style="width: 100%;"><tr><td width="60%">综合服务名称</td>', e += '<td width="20%">数量</td><td width="20%">金额</td></tr>', e += '<tr style="margin-top: 10px;"><td>', e += c.name, e += "</td><td>", e += "1", e += "</td><td>", e += a.cost, e += "</td></tr></table></div>", e += '<div style="margin-top: 10px;">**************************************</div><div><div>客户名称：', e += a.name, e += "</div><div>消费方式：", e += b, e += "</div><div>备注：", e += a.remark, e += "</div><div>联系人：", e += a.productContacts, e += "</div><div>消费金额：￥", e += a.cost, q.member && "余额支付" == b && (e += "</div><div>账户余额：￥", e += q.member.cards[0].total - a.cost), q.member && "余额支付" != b && (e += "</div><div>账户余额：￥", e += q.member.cards[0].total), q.member = null, e += "</div><div>消费日期：", e += d.getFullYear() + "-" + (d.getMonth() + 1) + "-" + d.getDate() + " " + d.getHours() + ":" + d.getMinutes(), e += '</div></div><div style="margin-top: 10px;">**************************************</div>', e += '<div style="margin-top: 10px;">客户签名：</div></div>';
            var f = getLodop();
            f.PRINT_INIT(""), f.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), f.SET_PRINTER_INDEXA(-1), f.SET_PRINT_PAGESIZE(3, 800, 100, ""), f.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", e), f.PRINT()
        };
        q.printRecord = function (a) {
            switch (a.payment) {
            case "wx":
                a.payment = "微信支付";
                break;
            case "alipay":
                a.payment = "支付宝支付";
                break;
            case "cash":
                a.payment = "现金支付";
                break;
            case "card":
                a.payment = "转账支付";
                break;
            case "check":
                a.payment = "支票支付";
                break;
            case "pos":
                a.payment = "支POS机支付";
                break;
            case "member":
                a.payment = "余额支付"
            }
            a.createDate = new Date(a.createDate), a.cost = a.cost.substring(1);
            var b = '<div style="width: 250px;padding:0;margin: 0;"><div>';
            b += '<div style="font-size: 20px;font-weight: bold;">欢迎光临', b += '</div><div style="font-size: 20px;font-weight: bold;margin-top: 10px;">购买综合服务消费小票</div>', b += '<div style="font-size: 16px;margin-top: 10px;">操作员：', b += a.workerName, b += '</div></div><div style="margin-top: 10px;">**************************************</div><div>', b += '<table style="width: 100%;"><tr><td width="60%">综合服务名称</td>', b += '<td width="20%">数量</td><td width="20%">金额</td></tr>', b += '<tr style="margin-top: 10px;"><td>', b += a.productName, b += "</td><td>", b += "1", b += "</td><td>", b += a.cost, b += "</td></tr></table></div>", b += '<div style="margin-top: 10px;">**************************************</div><div><div>客户名称：', b += a.name, b += "</div><div>消费方式：", b += a.payment, b += "</div><div>备注：", b += a.remark, b += "</div><div>消费金额：￥", b += a.cost, b += "</div><div>消费日期：", b += a.createDate.getFullYear() + "-" + (a.createDate.getMonth() + 1) + "-" + a.createDate.getDate() + " " + a.createDate.getHours() + ":" + a.createDate.getMinutes(), b += '</div></div><div style="margin-top: 10px;">**************************************</div>', b += '<div style="margin-top: 10px;">客户签名：</div></div>', console.log(b);
            var c = getLodop();
            c.PRINT_INIT(""), c.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), c.SET_PRINTER_INDEXA(-1), c.SET_PRINT_PAGESIZE(3, 800, 100, ""), c.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", b), c.PRINT()
        }, q.buy = function () {
            if (!q.name) return q.promptERR = !0, void(q.wordERR = "请输入客户名称");
            if (!q.price) return q.promptERR = !0, void(q.wordERR = "请填写综合服务金额");
            switch (q.buyPayment) {
            case "wx":
            case "alipay":
                q.spbill_create_ip = "122.224.134.196", q.showAuth_codeBox = !0, q.setIntervalId = setInterval(function () {
                    document.getElementById("auth_code").focus()
                }, 100);
                break;
            case "card":
            case "cash":
            case "check":
            case "pos":
            case "member":
                var b = {
                    _product: q.buyProduct._id,
                    name: q.name,
                    cost: parseFloat(q.price),
                    payment: q.buyPayment,
                    remark: q.remark,
                    productContacts: q.productContacts
                };
                if (q.memberId && (b = _.merge(b, {
                    _member: q.memberId
                })), "member" == q.buyPayment && !q.memberId) return q.promptERR = !0, void(q.wordERR = "请先读取用户信息");
                l.buy({}, b, function () {
                    q.memberTelOrCard = "", q.showMemberInfo = !1, q.memberId = "", q.promptOK = !0, q.wordOK = "购买成功";
                    var c;
                    switch (q.buyPayment) {
                    case "card":
                        c = "转账支付";
                        break;
                    case "cash":
                        c = "现金支付";
                        break;
                    case "check":
                        c = "支票支付";
                        break;
                    case "pos":
                        c = "POS机支付";
                        break;
                    case "member":
                        c = "余额支付"
                    }
                    var d = q.buyProduct;
                    setTimeout(function () {
                        a.$apply(function () {
                            q.promptOK = !1
                        }), D(b, c, d)
                    }, 1e3), z(), A(), x()
                }, function (a) {
                    return q.promptWARN = !1, a.data.data ? (q.promptERR = !0, void(q.wordERR = a.data.data)) : void 0
                })
            }
        }, q.auth_codeCreate = function (b) {
            if (q.promptWARN = !0, q.wordWARN = "支付中", 13 == b.keyCode) {
                var c = {
                    _product: q.buyProduct._id,
                    name: q.name,
                    cost: parseFloat(q.price),
                    payment: q.buyPayment,
                    remark: q.remark,
                    productContacts: q.productContacts,
                    auth_code: q.auth_code,
                    spbill_create_ip: q.spbill_create_ip
                };
                switch (q.memberId && (c = _.merge(c, {
                    _member: q.memberId
                })), q.buyPayment) {
                case "wx":
                    var d = /^[1][0,1,2,3,4,5][0-9]{16}$/;
                    if (!d.test(q.auth_code)) return q.auth_code = "", q.promptWARN = !1, q.promptERR = !0, void(q.wordERR = "支付码错误，重新扫码");
                    l.buyWx({}, c, function (b) {
                        q.memberTelOrCard = "", q.showMemberInfo = !1, q.memberId = "", q.auth_code = "", q.promptWARN = !1, q.promptOK = !0, q.wordOK = "购买成功";
                        var d = q.buyProduct;
                        setTimeout(function () {
                            a.$apply(function () {
                                q.promptOK = !1
                            }), D(c, "微信扫码支付", d)
                        }, 1e3), z(), x()
                    }, function (a) {
                        return q.auth_code = "", q.promptWARN = !1, a.data.data ? (q.promptERR = !0, void(q.wordERR = a.data.data)) : void 0
                    });
                    break;
                case "alipay":
                    var d = /^[25,26,27,28,29,30][0-9]{14,22}$/;
                    if (!d.test(q.auth_code)) return q.auth_code = "", q.promptWARN = !1, q.promptERR = !0, void(q.wordERR = "支付码错误，重新扫码");
                    m.payService({}, c, function (b) {
                        q.memberTelOrCard = "", q.showMemberInfo = !1, q.memberId = "", q.auth_code = "", q.promptWARN = !1, q.promptOK = !0, q.wordOK = "购买成功";
                        var d = q.buyProduct;
                        setTimeout(function () {
                            a.$apply(function () {
                                q.promptOK = !1
                            }), D(c, "支付宝扫码支付", d)
                        }, 1e3), z(), x()
                    }, function (a) {
                        return q.auth_code = "", q.promptWARN = !1, a.data.data ? (q.promptERR = !0, void(q.wordERR = a.data.data)) : void 0
                    })
                }
            }
        }, q.close = function () {
            z(), x()
        }, q.resert = function () {
            q.memberTelOrCard = "", q.memberId = "", q.member = null, q.showMemberInfo = !1, document.getElementById("cardNoBox").focus()
        }, q.closePrompt = function () {
            q.promptERR = !1, q.promptOK = !1, q.promptWARN = !1, q.showAuth_codeBox = !1, clearInterval(q.setIntervalId)
        }, q.openErrChangeBox = function (a) {
            z(), q.showErrChangeBox = !0, q.errRecordId = a
        }, q.chooseErrState = function (a) {
            "add" == a ? q.errState = "add" : q.errState = "reduce"
        }, q.changeErrRemark = function () {
            if (!q.errPrice) return q.promptERR = !0, void(q.wordERR = "请填写纠错金额");
            if (!q.errRemark) return q.promptERR = !0, void(q.wordERR = "请填写纠错备注");
            var a = {
                _record: q.errRecordId,
                state: q.errState,
                cost: parseFloat(q.errPrice),
                remark: q.errRemark
            };
            i.create({}, a, function () {
                z(), x(), w()
            }, function () {})
        }, q.enterCheck = function (a) {
            13 == a.keyCode && q.checkMember()
        }, B()
    }
    angular.module("fieldApp").controller("CsdProductCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Record", "Item", "Venue", "Product", "Alipay", "Productcategory", "Member", "Time"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this;
        j.close = function () {
            j.succeedFlag = !1, j.errorFlag = !1
        }, j.save = function () {
            var a = {
                oldPassword: j.oldPassword,
                newPassword: j.newPassword
            };
            e.updatePassword(a, function (a) {
                j.oldPassword = "", j.newPassword = "", j.succeedFlag = !0, i(function () {
                    j.succeedFlag = !1
                }, 1e3)
            }, function (a) {
                j.errorFlag = !0, i(function () {
                    j.errorFlag = !1
                }, 1e3)
            })
        }, j.judge = function () {
            j.oldPassword && j.newPassword ? j.saveFlag = !0 : j.saveFlag = !1
        };
        var k = function () {
            e.get({}, function (a) {
                j.account = a.data.user.account
            }, function () {})
        };
        j.logout = d.logout;
        var l = function () {
            k()
        };
        l()
    }
    angular.module("fieldApp").controller("CsdSettingPersonCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "$timeout"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.titleState = f.params.state || "stock", k.close = function () {
            k.enterFlag = !1, k.changePriceFlag = !1, k.name = "", k.supplier = "", k.num = "", k.price = "", k.salePrice = "", k.typeFlag = !1, k.searchProductName = ""
        };
        var l = function () {
                var a = {
                    name: k.searchProductName
                };
                i.index(a, function (a) {
                    k.products = a.data.shopProducts, k.products.length > 0 && (k.productName = k.products[0].name, k.pId = k.products[0]._id), k.close()
                }, function (a) {})
            },
            m = function () {
                j.index({}, function (a) {
                    k.supplies = a.data.supplies, k.supplies.length > 0 && (k.supply = k.supplies[0].supplyName, k.sId = k.supplies[0]._id)
                }, function (a) {})
            };
        k.search = function () {
            l()
        }, k.chooseProduct = function (a) {
            k.productName = a.name, k.pId = a._id, k.chooseNameFlag = !1
        }, k.chooseSupply = function (a) {
            k.supply = a.supplyName, k.sId = a._id, k.chooseSupplyFlag = !1
        }, k.enter = function () {
            var a = {
                _shopProduct: k.pId,
                quantity: 1 * k.num,
                _supply: k.sId,
                price: 1 * k.price
            };
            i.enter(a, function (a) {
                k.close(), l()
            }, function (a) {})
        }, k.changeTitle = function (a) {
            switch (k.titleState = "", k.close(), a) {
            case "stock":
                k.titleState = "stock", f.go("csd-inventory.stock", {
                    state: "stock"
                });
                break;
            default:
                k.titleState = "record", f.go("csd-inventory.record", {
                    state: "record"
                })
            }
            n()
        };
        var n = function () {
            l(), m()
        };
        n()
    }
    angular.module("fieldApp").controller("CsdInventoryCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "ShopProduct", "Supply"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r) {
        var s, t = this;
        t.titleState = f.params.state || "sale", t.paymentArr = [{
            name: "支付宝",
            value: "alipay",
            image: "singleChoose_imageYes"
        }, {
            name: "微信",
            value: "wx",
            image: "singleChoose_imageNo"
        }, {
            name: "余额",
            value: "member",
            image: "singleChoose_imageNo"
        }, {
            name: "现金",
            value: "cash",
            image: "singleChoose_imageNo"
        }, {
            name: "转账",
            value: "card",
            image: "singleChoose_imageNo"
        }, {
            name: "支票",
            value: "check",
            image: "singleChoose_imageNo"
        }, {
            name: "POS机",
            value: "pos",
            image: "singleChoose_imageNo"
        }], t.paymentArr2 = [{
            name: "支付宝",
            value: "alipay",
            image: "singleChoose_imageYes"
        }, {
            name: "微信",
            value: "wx",
            image: "singleChoose_imageNo"
        }], t.refundArr = [{
            name: "现金",
            image: "singleChoose_imageYes",
            value: "cash"
        }, {
            name: "会员卡",
            value: "card",
            image: "singleChoose_imageNo"
        }], t.page = 1, t.itemsPerPage = 10, t.pagination = {
            page: t.page,
            itemsPerPage: t.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, t.buyProduct = [], t.total = 0, t.showCodeBox = !0, t._member = "", t.wxFlag = !0, t.buyPayment = "alipay", t.startDate = new Date, t.closeDate = new Date, t.close = function () {
            t.sellFlag = !1, t.refundFlag = !1, t.payFlag = !1, t.total = 0, t.showCodeBox = !0, t.wxFlag = !0, t.auth_code = "", t.moneySelect = !1, t.continueFlag = !1, t.buyProduct = [], t.brr = []
        }, t.judgePay = function (a) {
            t.payFlag = !0, t.brr = [];
            for (var b = 0; b < t.buyProduct.length; b++) {
                var c = {
                    _shopProduct: t.buyProduct[b]._id,
                    quantity: 1 * t.buyProduct[b].num
                };
                t.brr.push(c)
            }
        }, t.getNowFormatDate = function (a) {
            var b = "-",
                c = ":",
                d = a.getMonth() + 1,
                e = a.getDate();
            d >= 1 && 9 >= d && (d = "0" + d), e >= 0 && 9 >= e && (e = "0" + e);
            var f = a.getFullYear() + b + d + b + e + " " + a.getHours() + c + a.getMinutes() + c + a.getSeconds();
            return f
        }, t.print = function (a) {
            for (var b = '<div><div><h3 style="font-size:20px">欢迎光临</h3><h3 style="font-size:20px">购买商品消费小票</h3>操作员：' + t.admin + '</h3></div><span>**********************************</span><div><div style="border-bottom: 1px solid #DADADA;"><table style="width: 100%;"><thead><tr><td width="50%">商品名称</td><td width="20%">数量</td><td width="30%">单价</td></tr></thead>', c = 0; c < t.buyProduct.length; c++) b = 0 == c ? b + "<tbody><tr><td>" + t.buyProduct[c].name + "</td><td>" + t.buyProduct[c].num + "</td><td>" + t.buyProduct[c].price + "</td></tr>" : b + "<tr><td>" + t.buyProduct[c].name + "</td><td>" + t.buyProduct[c].num + "</td><td>" + t.buyProduct[c].price + "</td></tr>", c == t.buyProduct.length - 1 && (b = b + "<tr><td>合计</td><td>" + t.total + "</td><td></td></tr></tbody></table></div><span>**********************************</span>");
            if (t.members.cards.length > 0) var d = "" + t.members.cards[0].total;
            else var d = "0"; if (t.members.virtualAccount.expires_in) var e = t.getNowFormatDate(new Date(t.members.virtualAccount.expires_in));
            else var e = "";
            b = b + "<div>消费方式:" + a + "</div><div>现金账户余额:￥" + d + "</div><div>虚拟账户余额:￥" + t.members.virtualAccount.total + "</div><div>有效期:" + e, b = b + "</div><div>消费日期:" + t.getNowFormatDate(new Date) + "</div><span>**********************************</span><div>客户签名:</div>";
            var f = getLodop();
            f.PRINT_INIT(""), f.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), f.SET_PRINTER_INDEXA(-1), f.SET_PRINT_PAGESIZE(3, 800, 100, ""), f.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", b), f.PRINT(), t.close()
        }, t.print1 = function (a) {
            console.log(a);
            for (var b = '<div><div><h3 style="font-size:20px">欢迎光临</h3><h3 style="font-size:20px">购买商品消费小票</h3>操作员：' + t.admin + '</h3></div><span>**********************************</span><div><div style="border-bottom: 1px solid #DADADA;"><table style="width: 100%;"><thead><tr><td width="50%">商品名称</td><td width="20%">数量</td><td width="30%">单价</td></tr></thead>', c = 0; c < t.buyProduct.length; c++) b = 0 == c ? b + "<tbody><tr><td>" + t.buyProduct[c].name + "</td><td>" + t.buyProduct[c].num + "</td><td>" + t.buyProduct[c].price + "</td></tr>" : b + "<tr><td>" + t.buyProduct[c].name + "</td><td>" + t.buyProduct[c].num + "</td><td>" + t.buyProduct[c].price + "</td></tr>", c == t.buyProduct.length - 1 && (b = b + "<tr><td>合计</td><td>" + t.total + "</td><td></td></tr></tbody></table></div><span>**********************************</span>");
            b = b + "<div>消费方式:" + a + "</div>", b = b + "<div>消费日期:" + t.getNowFormatDate(new Date) + "</div><span>**********************************</span><div>客户签名:</div>";
            var d = getLodop();
            d.PRINT_INIT(""), d.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), d.SET_PRINTER_INDEXA(-1), d.SET_PRINT_PAGESIZE(3, 800, 100, ""), d.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", b), d.PRINT(), t.close()
        }, t.auth_codeCreate = function (a) {
            if (t.promptWARN = !0, t.wordWARN = "支付中", 13 == a.keyCode) switch (t.buyPayment) {
            case "wx":
                var b = {
                    shopProductArr: t.brr,
                    auth_code: t.auth_code,
                    spbill_create_ip: "0.0.0.0"
                };
                j.buyWx(b, function (a) {
                    t.showAuth_codeBox = !1, t.promptOK = !0, t.promptWARN = !1, t.wordOK = "购买成功", clearInterval(t.setIntervalId), t.print1("微信支付"), o(function () {
                        t.promptOK = !1
                    }, 1e3)
                }, function (a) {
                    t.promptERR = !0, t.promptWARN = !1, clearInterval(t.setIntervalId), t.wordERR = a.data.data, t.auth_code = ""
                });
                break;
            case "alipay":
                var b = {
                    auth_code: t.auth_code,
                    shopProductArr: t.brr
                };
                l.payProduct(b, function (a) {
                    t.showAuth_codeBox = !1, t.promptOK = !0, t.promptWARN = !1, t.wordOK = "购买成功", clearInterval(t.setIntervalId), t.print1("支付宝支付"), o(function () {
                        t.promptOK = !1
                    }, 1e3)
                }, function (a) {
                    t.promptWARN = !1, t.promptERR = !0, clearInterval(t.setIntervalId), t.wordERR = a.data.data + ",请更新支付码再支付", t.auth_code = ""
                });
                break;
            case "member":
                ;
                n.index({
                    id: "today"
                }, function (a) {
                    s = a.data;
                    var b = u(t.auth_code);
                    if (b) {
                        var c = {
                            _member: b,
                            payment: "member",
                            shopProductArr: t.brr
                        };
                        j.buyProduct(c, function (a) {
                            t.showAuth_codeBox = !1, t.promptWARN = !1, t.promptOK = !0, o(function () {
                                t.promptOK = !1
                            }, 1e3), t.wordOK = "购买成功", i.index({
                                id: b
                            }, function (a) {
                                t.members = a.data.member, t.print("余额支付")
                            }, function (a) {
                                "找不到对象：member" == a.data.data && (t.showMemberInfo = !1, t.promptERR = !0, t.wordERR = "会员不存在")
                            })
                        }, function (a) {
                            t.promptWARN = !1, t.promptERR = !0, t.wordERR = a.data.data, t.auth_code = ""
                        })
                    } else c = {
                        cardNo: t.auth_code
                    }, i.indexBycard(c, function (a) {
                        t.members = a.data.member;
                        var b = {
                            _member: a.data.member._id,
                            payment: "member",
                            shopProductArr: t.brr
                        };
                        j.buyProduct(b, function (a) {
                            t.showAuth_codeBox = !1, t.promptWARN = !1, t.promptOK = !0, t.wordOK = "购买成功", i.indexBycard({
                                cardNo: t.auth_code
                            }, function (a) {
                                t.members = a.data.member, t.print("余额支付")
                            }, function (a) {
                                t.promptERR = !0, t.wordERR = "会员不存在"
                            }), o(function () {
                                t.promptOK = !1
                            }, 1e3)
                        }, function (a) {
                            t.promptWARN = !1, t.promptERR = !0, t.wordERR = a.data.data, t.auth_code = ""
                        })
                    }, function (a) {
                        t.promptWARN = !1, t.promptERR = !0, t.wordERR = "会员不存在", t.auth_code = ""
                    })
                })
            }
        }, t.shut = function () {
            t.showAuth_codeBox = !1, clearInterval(t.setIntervalId), document.getElementById("auth_code").blur()
        }, t.create = function () {
            switch (t.promptWARN = !0, t.buyPayment) {
            case "wx":
            case "alipay":
            case "member":
                t.promptWARN = !1, t.showAuth_codeBox = !0, t.setIntervalId = setInterval(function () {
                    document.getElementById("auth_code").focus()
                }, 100);
                break;
            case "cash":
            case "card":
            case "check":
            case "pos":
                var a = {
                    shopProductArr: t.brr,
                    payment: t.buyPayment
                };
                j.buyProduct(a, function (a) {
                    t.promptWARN = !1, t.promptOK = !0, t.wordOK = "购买成功", "cash" == t.buyPayment ? t.print1("现金支付") : "card" == t.buyPayment ? t.print1("转账支付") : "check" == t.buyPayment ? t.print1("支票支付") : t.print1("POS机支付"), o(function () {
                        t.promptOK = !1
                    }, 1e3)
                }, function (a) {
                    t.promptWARN = !1, t.promptERR = !0, t.wordERR = a.data.data
                })
            }
        }, t.checkMember = function (a, b, c) {
            if (!t.memberTelOrCard && !c) return t.promptERR = !0, void(t.wordERR = "请填写会员卡号/手机号");
            if (c) i.show({
                id: c
            }, function (a) {
                t.members = a.data.member, t.showMemberInfo = !0, t._member = t.members._id
            }, function (a) {});
            else {
                var d = {};
                n.index({
                    id: "today"
                }, function (c) {
                    s = c.data;
                    var e = u(t.memberTelOrCard);
                    e ? i.index({
                        id: e
                    }, function (c) {
                        t.members = c.data.member, t._member = e, t.showMemberInfo = !0, t.isReal = c.data.member.isReal, t.name = c.data.member.name, t.phone = c.data.member.tel, a && t.print(b)
                    }, function (a) {
                        "找不到对象：member" == a.data.data && (t.showMemberInfo = !1,
                            t.promptERR = !0, t.wordERR = "会员不存在")
                    }) : (d = {
                        cardNo: t.memberTelOrCard
                    }, i.indexBycard(d, function (c) {
                        t.members = c.data.member, t._member = t.members._id, t.showMemberInfo = !0, t.isReal = c.data.member.isReal, t.name = c.data.member.name, t.phone = c.data.member.tel, a && t.print(b)
                    }, function (a) {
                        "找不到对象：member" == a.data.data && (t.showMemberInfo = !1, t.promptERR = !0, t.wordERR = "会员不存在")
                    }))
                })
            }
        }, t.resert = function () {
            t.memberTelOrCard = "", t.members = null, document.getElementById("code").focus()
        }, t.getShopProduct = function () {
            t.pName ? t.selectFlag = !0 : t.selectFlag = !1;
            var a = {
                mix: t.pName
            };
            j.index(a, function (a) {
                t.products = a.data.shopProducts
            }, function (a) {})
        }, t.refund = function () {
            var a = {
                total: 1 * t.refundPrice
            };
            j.refund({
                controller: t.rId
            }, a, function (a) {
                t.close(), t.promptOK = !0, o(function () {
                    t.promptOK = !1
                }, 1e3), t.wordOK = "退款成功", t.getRecord()
            }, function (a) {
                t.promptERR = !0, t.wordERR = a.data.data
            })
        }, t.pageChanged = function () {
            t.getRecord()
        }, t.getRecord = function () {
            o(function () {
                t.startDateFlag = !1, t.closeDateFlag = !1;
                var a = {
                    page: t.pagination.page,
                    itemsPerPage: t.pagination.itemsPerPage,
                    statuses: ["buyShopProduct", "refundShopProduct"],
                    startDate: t.startDate.getTime(),
                    endDate: t.closeDate.getTime()
                };
                t.searchProductName && (a = _.merge(a, {
                    shopProductName: t.searchProductName
                })), k.index(a, function (a) {
                    t.records = a.data.records, t.recordTotal = 0, _.each(t.records, function (a) {
                        "refundShopProduct" == a.status ? t.recordTotal = t.recordTotal - a.cost : "buyShopProduct" == a.status && (t.recordTotal = t.recordTotal + a.cost)
                    }), t.recordTotal = t.recordTotal.toFixed(2);
                    var b = a.data.count;
                    t.pagination.totalItems = b, t.pagination.numPages = b / t.itemsPerPage
                })
            }, 100)
        }, t.addListByDown = function (a) {
            if (13 == a.keyCode) {
                var b = {
                    mix: t.pName
                };
                j.index(b, function (a) {
                    return t.products = a.data.shopProducts, t.products.length < 1 ? (t.promptERR = !0, void(t.wordERR = "商品不存在或无库存")) : void(1 == t.products.length ? t.products[0].isUsed && t.add(t.products[0]) : t.selectFlag = !0)
                }, function (a) {})
            }
        }, t.addList = function () {
            t.pName ? t.selectFlag = !0 : t.selectFlag = !1;
            var a = {
                mix: t.pName
            };
            j.index(a, function (a) {
                return t.products = a.data.shopProducts, t.products.length < 1 ? (t.promptERR = !0, void(t.wordERR = "商品不存在或无库存")) : void(1 == t.products.length ? t.products[0].isUsed && t.add(t.products[0]) : t.selectFlag = !0)
            }, function (a) {})
        }, t.getPrByCode = function () {}, t.changeNum = function (a, b) {
            if (a.num = 1 * a.num, "add" == b) a.num = a.num + 1, t.total = t.total + 1 * a.price, a.tot = Math.floor(a.num * a.price * 100) / 100;
            else if (t.total = t.total - 1 * a.price, t.arr = [], 1 == a.num) {
                for (var c = 0; c < t.buyProduct.length; c++) a._id != t.buyProduct[c]._id && t.arr.push(t.buyProduct[c]);
                t.buyProduct = t.arr
            } else a.num = a.num - 1, a.tot = Math.floor(a.num * a.price * 100) / 100;
            t.total = t.dealNumber(t.total)
        }, t.dealNumber = function (a, b) {
            var c = a.toFixed(3);
            return b ? c.substring(0, c.lastIndexOf(".") + 3) : parseFloat(c.substring(0, c.lastIndexOf(".") + 3))
        }, t.calPrice = function (a) {
            t.total = 0;
            for (var b = 0; b < t.buyProduct.length; b++) t.buyProduct[b]._id == a._id ? t.buyProduct[b].num && (t.total = t.total + t.buyProduct[b].num * t.buyProduct[b].price, t.buyProduct[b].tot = Math.floor(t.buyProduct[b].num * t.buyProduct[b].price * 100) / 100) : t.total = t.total + t.buyProduct[b].num * t.buyProduct[b].price;
            t.total = t.dealNumber(t.total)
        }, t.canPrice = function (a) {
            if (t.total = 0, t.arr = [], !a.num || 0 == a.num) {
                for (var b = 0; b < t.buyProduct.length; b++) a._id != t.buyProduct[b]._id && t.arr.push(t.buyProduct[b]);
                t.buyProduct = t.arr
            }
            for (var b = 0; b < t.buyProduct.length; b++) t.total = t.total + t.buyProduct[b].num * t.buyProduct[b].price;
            t.total = t.dealNumber(t.total)
        }, t.add = function (a) {
            t.selectFlag = !1, t.pName = "";
            for (var b = 0; b < t.buyProduct.length; b++)
                if (t.buyProduct[b]._id == a._id) return void t.changeNum(t.buyProduct[b], "add");
            t.total = t.total + 1 * a.price, a.num = 1, a.tot = Math.floor(a.num * a.price * 100) / 100, t.buyProduct.push(a), t.total = t.dealNumber(t.total)
        }, t.choosePayment = function (a) {
            _.each(t.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", t.buyPayment = a.value, "alipay" == t.buyPayment || "wx" == t.buyPayment ? t.showCodeBox = !0 : t.showCodeBox = !1
        }, t.choosePayment2 = function (a) {
            _.each(t.paymentArr2, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", t.buyPayment = a.value, "alipay" == t.buyPayment || "wx" == t.buyPayment ? t.showCodeBox = !0 : t.showCodeBox = !1
        }, t.chooseRefund = function (a) {
            _.each(t.refundArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", t.refund = a.value
        }, t.changeTitle = function (a) {
            switch (t.titleState = "", a) {
            case "sale":
                t.titleState = "sale", f.go("csd-sell.sale", {
                    state: "sale"
                });
                break;
            default:
                t.titleState = "record", f.go("csd-sell.record", {
                    state: "record"
                })
            }
            y()
        };
        var u = function (a) {
                var b = a.split("|");
                if (3 != b.length) return !1;
                var a = b[0],
                    c = b[1].split(""),
                    d = b[2],
                    e = d,
                    f = parseInt(s / 6e4).toString().split("");
                if (c.length < f.length) return !1;
                for (var g = 0; g < f.length; g++) d = d.replace(f[g], c[g]);
                return d == a ? e : !1
            },
            v = function () {
                e.get({}, function (a) {
                    t.admin = a.data.user.name, w(a.data.user._id)
                }, function () {})
            },
            w = function (a) {
                var b = {
                    type: "transfer",
                    _toWorker: a,
                    isCheck: !1,
                    isCancel: !1
                };
                r.index(b, function (a) {
                    t.orders = a.data.orders
                })
            };
        t.receive = function () {
            j.receive({}, {}, function () {
                t.promptOK = !0, t.wordOK = "接收成功", setTimeout(function () {
                    a.$apply(function () {
                        t.promptOK = !1, t.orders = []
                    })
                }, 1e3)
            }, function () {})
        }, t.choose = function (a) {
            a.select = !0, t.choosedCardFlag = !1, t.cardId = a._id, t.cardName = a.name + "(" + a.price + "元)", t.realPrice = a.realPrice
        }, t.chooseType = function (a) {
            for (var b = 0; b < t.types.length; b++) t.types[b].select = !1;
            a.select = !0, t.choosedTypeFlag = !1, t.typeName = a.name
        };
        var x = function () {
            var a = {
                state: "all",
                _org: t._id,
                sortBy: "realPrice"
            };
            m.index(a, function (a) {
                a.data.cards.length > 0 && (a.data.cards[0].select = !0, t.cardName = a.data.cards[0].name + "(" + a.data.cards[0].price + "元)", t.cardId = a.data.cards[0]._id, a.data.cards[0].flag = !0, t.realPrice = a.data.cards[0].realPrice), t.cards = a.data.cards
            })
        };
        t.finish = function () {
            return t.needFlag && !t.cardNum ? void(t.cardFlag = !0) : (t.payFlag = !0, t.defindFlag = !1, void(t.moneyFlag = !0))
        };
        t.waySelect = function (a) {
            t.chargeVenue = "", "money" == a ? (t.moneySelect = !0, t.cardSelect = !1, t.speSelect = !1) : "card" == a ? (t.moneySelect = !1, t.cardSelect = !0, t.speSelect = !1) : "speCard" == a && (t.moneySelect = !1, t.cardSelect = !1, t.speSelect = !0, p.index({
                isUsed: !0
            }, function (a) {
                t.venues_clone = a.data.venues, _.each(t.venues_clone, function (a) {
                    a.image = "singleChoose_imageNo2"
                }), t.chargeVenue = t.venues_clone[0], t.venues_clone[0].image = "singleChoose_imageYes2"
            }, function () {}))
        }, t.openShowRechargeBox = function (a) {
            t.needIdCard = a, t.continueFlag = !0, t.paymentArr2 = [{
                name: "支付宝",
                value: "alipay",
                image: "singleChoose_imageYes"
            }, {
                name: "微信",
                value: "wx",
                image: "singleChoose_imageNo"
            }, {
                name: "现金",
                value: "cash",
                image: "singleChoose_imageNo"
            }, {
                name: "支票",
                value: "check",
                image: "singleChoose_imageNo"
            }], t.buyPayment = "alipay", t.cardName = t.cards[0].name + "(" + t.cards[0].price + "元)", t.cardId = t.cards[0]._id, t.moneySelect = !0, t.cardSelect = !1, t.speSelect = !1, t.chargeCardNum = "", t.chargeCardPassword = ""
        }, t.chooseChargeVenue = function (a) {
            t.chargeVenue ? t.chargeVenue._id == a._id ? (t.chargeVenue.image = "singleChoose_imageNo2", t.chargeVenue = "") : (t.chargeVenue.image = "singleChoose_imageNo2", t.chargeVenue = a, t.chargeVenue.image = "singleChoose_imageYes2") : (t.chargeVenue = a, t.chargeVenue.image = "singleChoose_imageYes2")
        }, t.errState = "add", t.errRecordId = "", t.errPrice = "", t.errRemark = "", t.openErrChangeBox = function (a) {
            t.showErrChangeBox = !0, t.errRecordId = a
        }, t.chooseErrState = function (a) {
            "add" == a ? t.errState = "add" : t.errState = "reduce"
        }, t.changeErrRemark = function () {
            if (!t.errPrice) return t.promptERR = !0, void(t.wordERR = "请填写纠错金额");
            if (!t.errRemark) return t.promptERR = !0, void(t.wordERR = "请填写纠错备注");
            var a = {
                _record: t.errRecordId,
                state: t.errState,
                cost: parseFloat(t.errPrice),
                remark: t.errRemark
            };
            k.create({}, a, function () {
                t.showErrChangeBox = !1, t.errState = "add", t.errRecordId = "", t.errPrice = "", t.errRemark = "", t.getRecord(), t.promptOK = !0, t.wordOK = "纠错成功"
            }, function () {})
        };
        var y = function () {
            t.getRecord(), v(), x()
        };
        t.searchProduct = function () {
            t.getRecord()
        }, t.enterCheck = function (a) {
            13 == a.keyCode && t.checkMember()
        }, y()
    }
    angular.module("fieldApp").controller("CsdSellCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "ShopProduct", "Record", "Alipay", "Card", "Time", "$timeout", "Venue", "Tucard", "PurchaseOrder"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this,
            l = function () {
                k.page = 1, k.itemsPerPage = 10, k.pagination = {
                    page: k.page,
                    itemsPerPage: k.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            m = function () {
                e.get({}, function (a) {
                    k.me = a.data.user, n()
                }, function () {})
            },
            n = function () {
                var a = {
                    page: k.pagination.page,
                    itemsPerPage: k.pagination.itemsPerPage,
                    type: "transfer",
                    _toWorker: k.me._id,
                    isCheck: !1,
                    isCancel: !1
                };
                i.index(a, function (a) {
                    k.orders = a.data.orders, _.each(k.orders, function (a) {
                        a.cost = a.quantity * a.purchasePrice
                    });
                    var b = a.data.count;
                    k.pagination.totalItems = b, k.pagination.numPages = b / k.itemsPerPage
                })
            },
            o = function () {
                l(), m()
            };
        k.receive = function () {
            j.receive({}, {}, function () {
                n(), k.promptOK = !0, k.wordOK = "接收成功", setTimeout(function () {
                    a.$apply(function () {
                        k.promptOK = !1
                    })
                }, 1e3)
            }, function () {})
        }, k.pageChanged = function () {
            n()
        }, k.closePrompt = function () {
            k.promptERR = !1, k.promptOK = !1, k.promptWARN = !1
        }, o()
    }
    angular.module("fieldApp").controller("CsdStockReceiveCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "PurchaseOrder", "ShopProduct"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this,
            k = function () {
                j.page = 1, j.itemsPerPage = 10, j.pagination = {
                    page: j.page,
                    itemsPerPage: j.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            l = function () {
                j.showWorkerName = "选择交接柜员", j.searchWorker = ""
            },
            m = function () {
                var a = {
                    page: j.pagination.page,
                    itemsPerPage: j.pagination.itemsPerPage
                };
                i.index(a, function (a) {
                    j.products = a.data.shopProducts;
                    var b = a.data.count;
                    j.pagination.totalItems = b, j.pagination.numPages = b / j.itemsPerPage
                })
            },
            n = function () {
                e.index({
                    role: "checkStand"
                }, function (a) {
                    j.workers = a.data.users
                }, function () {})
            },
            o = function () {
                k(), l(), m(), n()
            };
        j.chooseWorkerName = function (a) {
            j.showChooseWorkerBox = !1, j.showWorkerName = a.name, j.searchWorker = a._id
        }, j.transfer = function () {
            i.transfer({}, {
                _toWorker: j.searchWorker
            }, function () {
                l(), j.promptOK = !0, j.wordOK = "交接成功，等待接收", setTimeout(function () {
                    a.$apply(function () {
                        j.promptOK = !1
                    })
                }, 1e3)
            }, function () {})
        }, j["export"] = function () {
            var a = {
                all: "all"
            };
            i.index(a, function (a) {
                j.exportProducts = a.data.shopProducts;
                var b = "柜员库存表";
                setTimeout(function () {
                    execl1("alltable", b)
                }, 100)
            })
        }, j.print = function () {
            var a = {
                all: "all"
            };
            i.index(a, function (a) {
                j.printProducts = a.data.shopProducts;
                var b = "";
                b += '<div style="width: 250px;padding:0;margin: 0;"><div><div style="font-size: 20px;font-weight: bold;margin-top: 10px;">柜员商品库存表</div>', b += j.printProducts[0].workerName, b += '</div><div style="margin-top: 10px;">**************************************</div>', b += '<div><table style="width: 100%;"><tr><td width="80%">商品名称</td><td width="20%">库存</td></tr>';
                for (var c = 0; c < j.printProducts.length; c++) b += '<tr style="margin-top: 10px;"><td>' + j.printProducts[c].name + "</td>", b += "<td>" + j.printProducts[c].quantity + "</td></tr>";
                b += '</table></div><div style="margin-top: 10px;">**************************************</div>', b += "<div><div>打印时间：" + getShowDate(Date.now(), "second") + "</div></div></div>";
                var d = getLodop();
                d.PRINT_INIT(""), d.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), d.SET_PRINTER_INDEXA(-1), d.SET_PRINT_PAGESIZE(3, 800, 100, ""), d.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", b), d.PRINT()
            })
        }, j.pageChanged = function () {
            m()
        }, j.enterCheck = function (a) {
            13 == a.keyCode && m()
        }, o()
    }
    angular.module("fieldApp").controller("CsdStockTransferCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "ShopProduct"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m) {
        function n() {
            var a = echarts.init(document.getElementById("pie1")),
                b = {
                    title: {
                        text: "按类型统计",
                        top: "bottom",
                        left: "center",
                        textStyle: {
                            fontSize: 14,
                            fontWeight: "",
                            color: "#333"
                        }
                    },
                    tooltip: {
                        trigger: "item",
                        formatter: "{a} <br/>{b}: {c} ({d}%)"
                    },
                    legend: {
                        show: !1,
                        orient: "vertical",
                        x: "left",
                        data: ["50%-学生", "25%-老师", "25%-家长"]
                    },
                    graphic: {
                        type: "text",
                        left: "center",
                        top: "center",
                        style: {
                            text: "用户统计\n100",
                            textAlign: "center",
                            font: "italic bolder 16px cursive",
                            fill: "#000",
                            width: 30,
                            height: 30
                        }
                    },
                    series: [{
                        name: "用户统计",
                        type: "pie",
                        radius: ["35%", "65%"],
                        itemStyle: {
                            normal: {
                                label: {
                                    show: !0,
                                    textStyle: {
                                        color: "#3c4858",
                                        fontSize: "18"
                                    },
                                    formatter: function (a) {
                                        return a.name.split("-").join("\n")
                                    }
                                },
                                labelLine: {
                                    show: !0,
                                    lineStyle: {
                                        color: "#3c4858"
                                    }
                                }
                            },
                            emphasis: {
                                shadowBlur: 10,
                                shadowOffsetX: 0,
                                shadowColor: "rgba(0, 0, 0, 0.5)",
                                textColor: "#000"
                            }
                        },
                        data: [{
                            value: 50,
                            name: "50%-学生"
                        }, {
                            value: 25,
                            name: "25%-老师"
                        }, {
                            value: 25,
                            name: "25%-家长"
                        }],
                        color: ["#51CEC6", "#FFB703", "#5FA0FA"]
                    }]
                };
            a.setOption(b)
        }

        function o() {
            var a = [{
                NAME: "测试1",
                NUM: 11
            }, {
                NAME: "测试2",
                NUM: 22
            }, {
                NAME: "测试3",
                NUM: 33
            }, {
                NAME: "测试4",
                NUM: 44
            }];
            if (a) {
                var b = [];
                angular.forEach(a, function (a) {
                    var c = {
                        x: a.NAME,
                        y: a.NUM
                    };
                    b.push(c)
                }), q.dataList.incomeData = [{
                    name: "echart饼图测试",
                    datapoints: b
                }]
            }
        }

        function p() {
            var a = echarts.init(document.getElementById("id0001")),
                b = {
                    tooltip: {
                        trigger: "axis",
                        axisPointer: {
                            type: "shadow"
                        }
                    },
                    legend: {
                        data: ["直接访问", "邮件营销", "联盟广告", "视频广告", "搜索引擎", "百度", "谷歌", "必应", "其他"]
                    },
                    toolbox: {
                        show: !0,
                        orient: "vertical",
                        x: "right",
                        y: "center",
                        feature: {
                            mark: {
                                show: !0
                            },
                            dataView: {
                                show: !0,
                                readOnly: !1
                            },
                            magicType: {
                                show: !0,
                                type: ["line", "bar", "stack", "tiled"]
                            },
                            restore: {
                                show: !0
                            },
                            saveAsImage: {
                                show: !0
                            }
                        }
                    },
                    calculable: !0,
                    xAxis: [{
                        type: "category",
                        data: ["周一", "周二", "周三", "周四", "周五", "周六", "周日"]
                    }],
                    yAxis: [{
                        type: "value"
                    }],
                    series: [{
                        name: "直接访问",
                        type: "bar",
                        data: [320, 332, 301, 334, 390, 330, 320]
                    }, {
                        name: "邮件营销",
                        type: "bar",
                        stack: "广告",
                        data: [120, 132, 101, 134, 90, 230, 210]
                    }, {
                        name: "联盟广告",
                        type: "bar",
                        stack: "广告",
                        data: [220, 182, 191, 234, 290, 330, 310]
                    }, {
                        name: "视频广告",
                        type: "bar",
                        stack: "广告",
                        data: [150, 232, 201, 154, 190, 330, 410]
                    }, {
                        name: "搜索引擎",
                        type: "bar",
                        data: [862, 1018, 964, 1026, 1679, 1600, 1570],
                        markLine: {
                            itemStyle: {
                                normal: {
                                    lineStyle: {
                                        type: "dashed"
                                    }
                                }
                            },
                            data: [
                                [{
                                    type: "min"
                                }, {
                                    type: "max"
                                }]
                            ]
                        }
                    }, {
                        name: "百度",
                        type: "bar",
                        barWidth: 5,
                        stack: "搜索引擎",
                        data: [620, 732, 701, 734, 1090, 1130, 1120]
                    }, {
                        name: "谷歌",
                        type: "bar",
                        stack: "搜索引擎",
                        data: [120, 132, 101, 134, 290, 230, 220]
                    }, {
                        name: "必应",
                        type: "bar",
                        stack: "搜索引擎",
                        data: [60, 72, 71, 74, 190, 130, 110]
                    }, {
                        name: "其他",
                        type: "bar",
                        stack: "搜索引擎",
                        data: [62, 82, 91, 84, 109, 110, 120]
                    }]
                };
            a.setOption(b)
        }
        var q = this;
        q._org = g._org, q.sn = 0, q.colors = ["#6BFFBB", "#6BBCFF", "#6B70FF", "#EA6BFF", "#FF6BB5", "#6BFFEF", "#803690", "#00ADF9"], q.dealNumber = function (a) {
            var b = a.toFixed(3);
            return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
        }, q.c = function (a) {
            var b = document.getElementById("canvas");
            b.width = "520", b.height = "520";
            for (var c = b.getContext("2d"), d = a.buy_online + a.buy_stand + a.pay + a.product + a.shopProduct + a.bindCard + a.ticket, e = [{
                value: a.buy_online / d,
                color: q.colors[0],
                title: "网上充值"
            }, {
                value: a.buy_stand / d,
                color: q.colors[1],
                title: "现场充值"
            }, {
                value: a.pay / d,
                color: q.colors[2],
                title: "预订场地"
            }, {
                value: a.product / d,
                color: q.colors[3],
                title: "综合服务"
            }, {
                value: a.shopProduct / d,
                color: q.colors[7],
                title: "小卖部"
            }, {
                value: a.bindCard / d,
                color: q.colors[5],
                title: "工本费"
            }, {
                value: a.ticket / d,
                color: q.colors[6],
                title: "门票"
            }], f = -90, g = 300, h = 300, i = 150, j = 0, k = 0; k < e.length; k++) {
                var l = e[k];
                c.beginPath(), c.moveTo(300, 300), c.fillStyle = l.color;
                var m = 360 * l.value,
                    n = f * Math.PI / 180,
                    o = (m + f) * Math.PI / 180;
                if (c.arc(g, h, i, n, o), c.fill(), c.stroke(), c.beginPath(), k == e.length - 1) var p = q.dealNumber(100 * (1 - j)) + "%";
                else var p = q.dealNumber(100 * l.value) + "%";
                j += l.value;
                var r = f + .5 * m,
                    s = g + Math.cos(r * Math.PI / 180) * (i + 20),
                    t = h + Math.sin(r * Math.PI / 180) * (i + 20);
                c.font = "bold 22px '微软雅黑'", r > 90 && 270 > f && (c.textAlign = "end"), c.fillText(p, s, t), c.fill(), f += m
            }
        }, q.c2 = function (a) {
            var b = document.getElementById("canvas2");
            b.width = "520", b.height = "520";
            for (var c = b.getContext("2d"), d = a.wx + a.alipay + a.cash + a.card + a.check, e = [{
                value: a.wx / d,
                color: q.colors[0],
                title: "微信支付"
            }, {
                value: a.alipay / d,
                color: q.colors[1],
                title: "支付宝"
            }, {
                value: a.cash / d,
                color: q.colors[2],
                title: "现金"
            }, {
                value: a.card / d,
                color: q.colors[3],
                title: "转账"
            }, {
                value: a.check / d,
                color: q.colors[4],
                title: "支票"
            }], f = -90, g = 300, h = 300, i = 150, j = 0, k = 0; k < e.length; k++) {
                var l = e[k];
                c.beginPath(), c.moveTo(300, 300), c.fillStyle = l.color;
                var m = 360 * l.value,
                    n = f * Math.PI / 180,
                    o = (m + f) * Math.PI / 180;
                if (c.arc(g, h, i, n, o), c.fill(), c.stroke(), c.beginPath(), k == e.length - 1) var p = q.dealNumber(100 * (1 - j)) + "%";
                else var p = q.dealNumber(100 * l.value) + "%";
                j += l.value;
                var r = f + .5 * m,
                    s = g + Math.cos(r * Math.PI / 180) * (i + 20),
                    t = h + Math.sin(r * Math.PI / 180) * (i + 20);
                c.font = "bold 22px '微软雅黑'", r > 90 && 270 > f && (c.textAlign = "end"), c.fillText(p, s, t), c.fill(), f += m
            }
        }, q.getLine = function () {
            var a = [],
                b = {
                    _org: q._org
                },
                c = 0;
            a.push(0), i.numIndex(b, function (b) {
                _.each(b.data.result, function (b) {
                    a.push(3 * b.count), c += 3 * b.count
                }), c != q.sn && (q.sn = c), q.line = {
                    labels: [6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22],
                    data: [a],
                    title: "测试",
                    datasetOverride: [{
                        yAxisID: "y-axis-1"
                    }],
                    options: {
                        scales: {
                            yAxes: [{
                                id: "y-axis-1",
                                type: "linear",
                                display: !0,
                                position: "left"
                            }]
                        },
                        showLine: !1
                    },
                    onClick: function (a, b) {
                        console.log(a, b)
                    }, colors: ["#6BFFBB", "#6BBCFF", "#6B70FF", "#EA6BFF", "#FF6BB5", "#6BFFEF", "#803690", "#00ADF9"]
                }
            }, function (a) {})
        }, Array.prototype.max = function () {
            return Math.max.apply({}, this)
        }, q.bar = function (a) {
            var b = [],
                c = [];
            _.each(a, function (a) {
                _.each(q.items, function (b) {
                    b._id == a._item && (a.name = b.name)
                }), b.push(a.name), c.push(a.total / 100)
            });
            for (var d = document.getElementById("bar1"), e = c.max(), f = 180 / e, g = 0; g < c.length; g++) {
                var h = document.createElement("div");
                h.id = "sumrow_" + g + "_" + c[g], h.setAttribute("class", "incallchartsumrow"), h.style.left = 16 * g * 2 + 55 + "px", h.style.height = Math.round(f * c[g]) + "px", h.style.width = "10px", h.style.position = "absolute", h.style.overflow = "hidden", h.style.background = "none repeat scroll 0 0 #1280ef", h.style.display = "block", h.style.top = 200 - Math.round(f * c[g]) + "px", d.appendChild(h);
                var i = document.createElement("div");
                i.id = "timerow_" + g, i.setAttribute("class", "callnum"), i.style.left = 16 * g * 2 + 55 + "px", i.style.width = "30px", i.style.height = "20px", i.style.position = "absolute", i.style.top = "205px", i.innerHTML = '<span style="font-size:12px; color:#fff;"> ' + b[g] + "</span>", d.appendChild(i)
            }
            for (var g = 0; 6 > g; g++) {
                var j = document.createElement("div");
                j.setAttribute("class", "tity"), j.style.width = "20px", j.style.position = "absolute", j.style.top = 36 * g + 14 + "px", j.style.left = "15px", j.innerHTML = '<span style="font-size:12px; color:#fff;"> ' + Math.round(e - e / 5 * g) + "</span>", d.appendChild(j);
                var k = document.createElement("div");
                k.setAttribute("style", "width:450px; left:40px; border-top:1px dotted #B9B9B9; height:1px; line-height:1px; display:block; overflow:hidden; position:absolute; "), k.style.top = 36 * g + 20 + "px", d.appendChild(k)
            }
        }, q.bar22 = function (a) {
            var b = [],
                c = [];
            _.each(a, function (a) {
                _.each(q.venues, function (b) {
                    b._id == a._venue && (a.name = b.name)
                }), a.name && a.name.length > 4 && (a.name = a.name.substring(0, 4) + "..."), b.push(a.name), c.push(a.total / 100)
            });
            for (var d = document.getElementById("bar2"), e = c.max(), f = 180 / e, g = 0; g < c.length; g++) {
                var h = document.createElement("div");
                h.id = "sumrow_" + g + "_" + c[g], h.setAttribute("class", "incallchartsumrow"), h.style.left = 30 * g * 2 + 6 * g + 60 + "px", h.style.height = Math.round(f * c[g]) + "px", h.style.width = "40px", h.style.position = "absolute", h.style.overflow = "hidden", h.style.background = "none repeat scroll 0 0 #1280ef", h.style.display = "block", h.style.top = 200 - Math.round(f * c[g]) + "px", d.appendChild(h);
                var i = document.createElement("div");
                i.id = "timerow_" + g, i.setAttribute("class", "callnum"), i.style.left = 30 * g * 2 + 6 * g + 60 + "px", i.style.width = "100px", i.style.position = "absolute", i.style.top = "205px", i.innerHTML = '<span style="font-size:12px; color:#fff;"> ' + b[g] + "</span>", d.appendChild(i)
            }
            for (var g = 0; 6 > g; g++) {
                var j = document.createElement("div");
                j.setAttribute("class", "tity"), j.style.width = "40px", j.style.position = "absolute", j.style.top = 36 * g + 14 + "px", j.style.left = "15px", j.innerHTML = '<span style="font-size:12px; color:#fff;"> ' + Math.round(e - e / 5 * g) + "</span>", d.appendChild(j);
                var k = document.createElement("div");
                k.setAttribute("style", "width:450px; left:40px; border-top:1px dotted #B9B9B9; height:1px; line-height:1px; display:block; overflow:hidden; position:absolute; "), k.style.top = 36 * g + 20 + "px", d.appendChild(k)
            }
        }, q.getStatistic = function () {
            var a = {
                dayStr: (new Date).getTime() - 14688e5,
                _org: q._org
            };
            i.index(a, function (a) {
                q.date = new Date, q.yingTotal = a.data.statistic.b_total.total / 100, q.changTotal = a.data.statistic.c_total.total / 100, q.c(a.data.statistic.b_total.behavior), q.c2(a.data.statistic.b_total.payment), q.bar(a.data.statistic.c_items), q.bar22(a.data.statistic.c_venues)
            }, function (a) {})
        }, q.getVenue = function () {
            l.index({
                _org: q._org
            }, function (a) {
                q.venues = a.data.venues, q.getItem()
            }, function (a) {
                q.getStatistic()
            })
        }, q.getItem = function () {
            j.index({
                _org: q._org
            }, function (a) {
                q.items = a.data.items, q.getStatistic()
            }, function (a) {})
        }, q.getAll = function () {
            var a = {
                dayStr: "all",
                _org: q._org
            };
            i.index(a, function (a) {
                q.addSport = 3 * (a.data.statistic.payCount + a.data.statistic.long_payCount) + a.data.statistic.ticketCount + 30, q.addTot = a.data.statistic.b_total.total / 100
            }, function (a) {})
        }, q.getLine1 = function (a) {
            var b = [],
                c = [];
            _.each(a, function (a) {
                var d = new Date(a.statisticDate);
                d = d.getMonth() + 1 + "." + d.getDate(), b.push(d), c.push(a.c_total.total / 100)
            }), q.line1 = {
                labels: b,
                data: [c],
                title: "测试",
                datasetOverride: [{
                    yAxisID: "y-axis-1"
                }],
                options: {
                    scales: {
                        yAxes: [{
                            id: "y-axis-1",
                            type: "linear",
                            display: !0,
                            position: "left"
                        }]
                    },
                    showLine: !1
                },
                onClick: function (a, b) {
                    console.log(a, b)
                }, colors: ["#6BFFBB", "#6BBCFF", "#6B70FF", "#EA6BFF", "#FF6BB5", "#6BFFEF", "#803690", "#00ADF9"]
            }
        }, q.getLine2 = function (a) {
            var b = [],
                c = [];
            _.each(a, function (a) {
                var d = new Date(a.statisticDate);
                d = d.getMonth() + 1 + "." + d.getDate(), b.push(d), c.push(3 * a.payCount + a.ticketCount + 30)
            }), q.line2 = {
                labels: b,
                data: [c],
                title: "测试",
                datasetOverride: [{
                    yAxisID: "y-axis-1"
                }],
                options: {
                    scales: {
                        yAxes: [{
                            id: "y-axis-1",
                            type: "linear",
                            display: !0,
                            position: "left"
                        }]
                    },
                    showLine: !1
                },
                onClick: function (a, b) {
                    console.log(a, b)
                }, colors: ["#6BFFBB", "#6BBCFF", "#6B70FF", "#EA6BFF", "#FF6BB5", "#6BFFEF", "#803690", "#00ADF9"]
            }
        }, q.getMonth = function () {
            var a = new Date,
                b = a.getTime() - 2592e6,
                c = {
                    startDate: b,
                    endDate: a.getTime() - 864e5,
                    _org: q._org
                };
            i.monthIndex(c, function (a) {
                q.getLine1(a.data.statistic), q.getLine2(a.data.statistic)
            }, function (a) {})
        }, q.getMmeber = function () {
            var a = {
                _org: q._org
            };
            i.memberIndex(a, function (a) {
                q.memberNum = a.data.count
            }, function (a) {})
        }, q.title = "echart图表", q.goBack = function () {
            $ionicHistory.goBack()
        }, q.dataList = {
            incomeData: ""
        }, q.pieConfig = {}, q.donutConfig = {};
        var r = function () {
            n(), o(), p()
        };
        r()
    }
    angular.module("fieldApp").controller("DataCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Statistic", "Item", "$timeout", "Venue", "$interval"]
}(),
function () {
    "use strict";

    function a(a) {
        a.state("newdata", {
            params: {
                value: "newdata"
            },
            url: "/newdata?_org",
            templateUrl: "app/data/newdata.html",
            controller: "NewdataCtrl",
            controllerAs: "newdataCtrl"
        }).state("data", {
            params: {
                value: "data"
            },
            url: "/data?_org",
            templateUrl: "app/data/data.html",
            controller: "DataCtrl",
            controllerAs: "dataCtrl"
        })
    }
    angular.module("fieldApp").config(a), a.$inject = ["$stateProvider"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m) {
        function n() {
            var a = echarts.init(document.getElementById("pie1")),
                b = {
                    legend: {
                        orient: "vertical",
                        x: "400px",
                        y: "middle",
                        data: ["直接访问", "邮件营销", "联盟广告", "视频广告", "搜索引擎"],
                        textStyle: {
                            color: "#fff"
                        },
                        itemGap: 20,
                        formatter: function (a) {
                            return a + "  10%"
                        }
                    },
                    graphic: {
                        elements: [{
                            type: "text",
                            left: "150px",
                            top: "120px",
                            style: {
                                text: "总人数",
                                textAlign: "center",
                                font: "bolder 14px 黑体",
                                fill: "#fff",
                                width: 60,
                                height: 60
                            }
                        }, {
                            type: "text",
                            left: "150px",
                            top: "140px",
                            style: {
                                text: "100",
                                textAlign: "center",
                                font: "bolder 24px 黑体",
                                fill: "#fff",
                                width: 60,
                                height: 60
                            }
                        }]
                    },
                    calculable: !0,
                    series: [{
                        name: "访问来源",
                        type: "pie",
                        radius: ["60%", "90%"],
                        center: ["30%", "50%"],
                        itemStyle: {
                            normal: {
                                label: {
                                    show: !1
                                },
                                labelLine: {
                                    show: !1
                                }
                            },
                            emphasis: {
                                label: {
                                    show: !1,
                                    position: "center",
                                    textStyle: {
                                        fontSize: "30",
                                        fontWeight: "bold"
                                    }
                                }
                            }
                        },
                        data: [{
                            value: 335,
                            name: "直接访问"
                        }, {
                            value: 310,
                            name: "邮件营销"
                        }, {
                            value: 234,
                            name: "联盟广告"
                        }, {
                            value: 135,
                            name: "视频广告"
                        }, {
                            value: 1548,
                            name: "搜索引擎"
                        }]
                    }]
                };
            a.setOption(b);
            var c = echarts.init(document.getElementById("pie2")),
                d = {
                    legend: {
                        orient: "vertical",
                        x: "400px",
                        y: "middle",
                        data: ["直接访问", "邮件营销", "联盟广告", "视频广告", "搜索引擎"],
                        textStyle: {
                            color: "#fff"
                        }
                    },
                    tooltip: {
                        trigger: "item",
                        show: !1
                    },
                    graphic: {
                        elements: [{
                            type: "text",
                            left: "150px",
                            top: "120px",
                            style: {
                                text: "总人数",
                                textAlign: "center",
                                font: "bolder 14px 黑体",
                                fill: "#fff",
                                width: 60,
                                height: 60
                            }
                        }, {
                            type: "text",
                            left: "150px",
                            top: "140px",
                            style: {
                                text: "100",
                                textAlign: "center",
                                font: "bolder 24px 黑体",
                                fill: "#fff",
                                width: 60,
                                height: 60
                            }
                        }]
                    },
                    calculable: !0,
                    series: [{
                        name: "访问来源",
                        type: "pie",
                        radius: ["60%", "90%"],
                        center: ["30%", "50%"],
                        itemStyle: {
                            normal: {
                                label: {
                                    show: !1
                                },
                                labelLine: {
                                    show: !1
                                }
                            },
                            emphasis: {
                                label: {
                                    show: !1,
                                    position: "center",
                                    textStyle: {
                                        fontSize: "30",
                                        fontWeight: "bold"
                                    }
                                }
                            }
                        },
                        data: [{
                            value: 335,
                            name: "直接访问"
                        }, {
                            value: 310,
                            name: "邮件营销"
                        }, {
                            value: 234,
                            name: "联盟广告"
                        }, {
                            value: 135,
                            name: "视频广告"
                        }, {
                            value: 1548,
                            name: "搜索引擎"
                        }]
                    }]
                };
            c.setOption(d)
        }

        function o() {
            var a = echarts.init(document.getElementById("bar1")),
                b = {
                    legend: {
                        data: ["蒸发量"],
                        textStyle: {
                            color: "#fff"
                        }
                    },
                    calculable: !0,
                    xAxis: [{
                        type: "category",
                        data: ["1月", "2月", "3月", "4月", "5月", "6月", "7月", "8月", "9月", "10月", "11月", "12月"],
                        axisLine: {
                            lineStyle: {
                                type: "solid",
                                color: "#fff",
                                width: "2"
                            }
                        },
                        axisLabel: {
                            show: !0,
                            textStyle: {
                                color: "#fff"
                            }
                        }
                    }],
                    yAxis: [{
                        type: "value",
                        axisLine: {
                            lineStyle: {
                                type: "solid",
                                color: "#fff",
                                width: "2"
                            }
                        },
                        axisLabel: {
                            show: !0,
                            textStyle: {
                                color: "#fff"
                            }
                        }
                    }],
                    series: [{
                        name: "蒸发量",
                        type: "bar",
                        data: [2, 4.9, 7, 23.2, 25.6, 76.7, 135.6, 162.2, 32.6, 20, 6.4, 3.3],
                        markLine: {
                            data: [{
                                type: "average",
                                name: "平均值"
                            }]
                        }
                    }]
                };
            a.setOption(b);
            var c = echarts.init(document.getElementById("bar2")),
                d = {
                    grid: {
                        x: 50,
                        y: 10,
                        x2: 50,
                        y2: 70,
                        backgroundColor: "rgba(0,0,0,0)",
                        borderWidth: 1,
                        borderColor: "#ccc"
                    },
                    calculable: !0,
                    xAxis: [{
                        type: "category",
                        data: ["1月", "2月", "3月", "4月", "5月", "6月", "7月", "8月", "9月", "10月", "11月", "12月"],
                        axisLine: {
                            lineStyle: {
                                type: "solid",
                                color: "#fff",
                                width: "2"
                            }
                        },
                        axisLabel: {
                            show: !0,
                            textStyle: {
                                color: "#fff"
                            }
                        }
                    }],
                    yAxis: [{
                        type: "value",
                        axisLine: {
                            lineStyle: {
                                type: "solid",
                                color: "#fff",
                                width: "2"
                            }
                        },
                        axisLabel: {
                            show: !0,
                            textStyle: {
                                color: "#fff"
                            }
                        }
                    }],
                    series: [{
                        name: "蒸发量",
                        type: "bar",
                        data: [2, 4.9, 7, 23.2, 25.6, 76.7, 135.6, 162.2, 32.6, 20, 6.4, 3.3],
                        markLine: {
                            data: [{
                                type: "average",
                                name: "平均值"
                            }]
                        }
                    }]
                };
            c.setOption(d);
            var e = echarts.init(document.getElementById("bar3")),
                f = {
                    calculable: !0,
                    xAxis: [{
                        type: "category",
                        data: ["1月", "2月", "3月", "4月", "5月", "6月", "7月", "8月", "9月", "10月", "11月", "12月"],
                        axisLine: {
                            lineStyle: {
                                type: "solid",
                                color: "#fff",
                                width: "2"
                            }
                        },
                        axisLabel: {
                            show: !0,
                            textStyle: {
                                color: "#fff"
                            }
                        }
                    }],
                    yAxis: [{
                        type: "value",
                        axisLine: {
                            lineStyle: {
                                type: "solid",
                                color: "#fff",
                                width: "2"
                            }
                        },
                        axisLabel: {
                            show: !0,
                            textStyle: {
                                color: "#fff"
                            }
                        }
                    }],
                    series: [{
                        name: "蒸发量",
                        type: "bar",
                        barWidth: 30,
                        itemStyle: {
                            normal: {
                                color: "#4ad2ff"
                            }
                        },
                        data: [2, 4.9, 7, 23.2, 25.6, 76.7, 135.6, 162.2, 32.6, 20, 6.4, 3.3],
                        markLine: {
                            data: [{
                                type: "average",
                                name: "平均值"
                            }]
                        }
                    }]
                };
            e.setOption(f)
        }

        function p() {
            var a = echarts.init(document.getElementById("line")),
                b = {
                    legend: {
                        data: ["最高气温", "最低气温"],
                        textStyle: {
                            color: "#fff"
                        }
                    },
                    calculable: !0,
                    grid: {
                        x: 50,
                        y: 30,
                        x2: 50,
                        y2: 50,
                        backgroundColor: "rgba(0,0,0,0)",
                        borderWidth: 1,
                        borderColor: "#ccc"
                    },
                    xAxis: [{
                        type: "category",
                        boundaryGap: !1,
                        data: ["周一", "周二", "周三", "周四", "周五", "周六", "周日"],
                        axisLine: {
                            lineStyle: {
                                type: "solid",
                                color: "#0f0",
                                width: "2"
                            }
                        },
                        axisLabel: {
                            show: !0,
                            textStyle: {
                                color: "#fff"
                            }
                        }
                    }],
                    yAxis: [{
                        type: "value",
                        axisLine: {
                            lineStyle: {
                                type: "solid",
                                color: "#0f0",
                                width: "2"
                            }
                        },
                        axisLabel: {
                            formatter: "{value} °C",
                            textStyle: {
                                color: "#fff"
                            }
                        }
                    }],
                    series: [{
                        name: "最高气温",
                        type: "line",
                        data: [11, 11, 15, 13, 12, 13, 10],
                        itemStyle: {
                            normal: {
                                lineStyle: {
                                    color: "#00FF00"
                                }
                            }
                        },
                        markPoint: {
                            data: [{
                                type: "max",
                                name: "最大值"
                            }, {
                                type: "min",
                                name: "最小值"
                            }]
                        },
                        markLine: {
                            data: [{
                                type: "average",
                                name: "平均值"
                            }]
                        }
                    }, {
                        name: "最低气温",
                        type: "line",
                        data: [1, -2, 2, 5, 3, 2, 0],
                        itemStyle: {
                            normal: {
                                lineStyle: {
                                    color: "#00f"
                                }
                            }
                        },
                        markPoint: {
                            data: [{
                                name: "周最低",
                                value: -2,
                                xAxis: 1,
                                yAxis: -1.5
                            }]
                        },
                        markLine: {
                            data: [{
                                type: "average",
                                name: "平均值"
                            }]
                        }
                    }]
                };
            a.setOption(b)
        }
        var q = this;
        q.date = new Date;
        var r = function () {
            n(), o(), p()
        };
        r()
    }
    angular.module("fieldApp").controller("NewdataCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Statistic", "Item", "$timeout", "Venue", "$interval"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
        var q = this;
        q.titleState = f.params.state || "once", q.searchVenueId, q.searchItemId, q.searchPayment;
        var r = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            },
            s = function (a) {
                return a = new Date(1e3 * parseInt(a / 1e3)), a.setHours(0), a.setMinutes(0), a.setSeconds(0), a
            },
            t = function () {
                q.showChooseVenueBox = !1, q.showChooseItemBox = !1, q.showChooseStartDateBox = !1, q.showChooseEndDateBox = !1, q.showBasicInfoBox = !1, q.showchooseOnceTypeBox = !1, q.deleteFlag = !1, q.showLongRefundBox = !1, q.showInfoBox = !1, q.showPaymentBox = !1, q.showChooseFieldBox = !1, q.showRefundPrice = !1, q.promptDELETE = !1, q.showChoosePageBox = !1
            },
            u = function () {
                q.showVenueName = "选择场馆", q.showItemName = "选择项目", q.showFieldName = "选择场地", q.showPageName = "10", q.searchVenueId = "", q.searchItemId = "", q.searchFieldId = "", q.searchPageValue = "", q.cancelOrderIdArr = [], q.refundPrice = 0, q.sendNum = "", q.allImage = "manyChoose_imageNo2", q.nowImage = "manyChoose_imageNo2", q.refundTypes = [{
                    name: "按退款规则",
                    image: "singleChoose_imageYes"
                }, {
                    name: "自定义退款金额",
                    image: "singleChoose_imageNo"
                }], q.refundType = "按退款规则", q.states = [{
                    name: "全部",
                    value: "all"
                }, {
                    name: "未消费",
                    value: "noOpen"
                }, {
                    name: "已消费",
                    value: "hasOpen"
                }, {
                    name: "正常撤销",
                    value: "hasCancel"
                }, {
                    name: "违约撤销",
                    value: "noPromiseCancel"
                }, {
                    name: "售后撤销",
                    value: "afterSaleCancel"
                }], q.showStateName = "订单状态", q.searchStateValue = "", q.froms = [{
                    name: "全部",
                    value: "all"
                }, {
                    name: "普通(柜员)",
                    value: "once_worker"
                }, {
                    name: "普通(微信)",
                    value: "once_wx"
                }, {
                    name: "长包预订",
                    value: "long"
                }, {
                    name: "培训预订",
                    value: "train"
                }], q.showFromName = "订单来源", q.searchFromValue = "", q.sortByKey = "timeUp", q.pageArr = [{
                    name: "10",
                    value: 10
                }, {
                    name: "20",
                    value: 20
                }, {
                    name: "50",
                    value: 50
                }, {
                    name: "100",
                    value: 100
                }], q.searchPageValue = 10, setTimeout(function () {
                    q.startDate = new Date(new Date), q.endDate = new Date(new Date)
                }, 100)
            },
            v = function () {
                q.page = 1, q.itemsPerPage = q.searchPageValue ? q.searchPageValue : 10, q.pagination = {
                    page: q.page,
                    itemsPerPage: q.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            };
        q.chooseObject = function (a) {
            q.objectName = a.name, q.chooseObjectFlag = !1, q._user = a._id
        }, q.send = function () {
            var b = {
                _user: q._user,
                _orderlist: q.cancelOrderId
            };
            p.send(b, function (b) {
                q.sendToFlag = !1, q.promptOK = !0, q.wordOK = "发送成功", setTimeout(function () {
                    a.$apply(function () {
                        q.promptOK = !1
                    })
                }, 1e3)
            }, function (a) {
                q.promptERR = !0, q.wordERR = a.data.data
            })
        };
        var w = function () {
                var a = {
                    role: "fieldManager"
                };
                e.index(a, function (a) {
                    q.users = a.data.users, q.users.length > 0 && (q.objectName = q.users[0].name, q._user = q.users[0]._id)
                }, function () {})
            },
            x = function () {
                e.get({}, function (a) {
                    "organization" == a.data.user.role ? q.organization = a.data.user : e.getOrgInfo({
                        id: a.data.user._organization
                    }, function (a) {
                        q.organization = a.data.user
                    }, function () {})
                }, function () {})
            },
            y = function () {
                u(), v(), z(), A(), C(), w(), x()
            },
            z = function () {
                m.index({
                    isUsed: !0
                }, function (a) {
                    q.items = [{
                        name: "全部"
                    }].concat(a.data.items)
                }, function () {})
            },
            A = function (a) {
                l.index({
                    isUsed: !0
                }, function (a) {
                    q.venues = [{
                        name: "全部"
                    }].concat(a.data.venues)
                }, function () {})
            },
            B = function () {
                var a = {
                    _venue: q.searchVenueId,
                    _item: q.searchItemId,
                    sortValue: "asc"
                };
                j.index(a, function (a) {
                    q.fields = [{
                        name: "全部"
                    }].concat(a.data.fields)
                }, function () {})
            };
        q.sortBy = function (a) {
            q.sortByKey = a, C()
        };
        var C = function () {
                var a = {
                    page: q.pagination.page,
                    itemsPerPage: q.pagination.itemsPerPage,
                    isCancel: "all"
                };
                q.searchStateValue && (a = _.merge(a, {
                    status: q.searchStateValue
                })), q.searchStateSpeValue && (a = _.merge(a, {
                    statusSpe: q.searchStateSpeValue
                })), q.searchFromValue && (a = _.merge(a, {
                    from: q.searchFromValue
                })), "timeUp" == q.sortByKey && (a = _.merge(a, {
                    sort: "startDate",
                    sortValue: "asc"
                })), "timeDown" == q.sortByKey && (a = _.merge(a, {
                    sort: "startDate"
                })), "orderUp" == q.sortByKey && (a = _.merge(a, {
                    sort: "createDate",
                    sortValue: "asc"
                })), "orderDown" == q.sortByKey && (a = _.merge(a, {
                    sort: "createDate"
                })), a = q.startDate ? _.merge(a, {
                    startDate: q.startDate.getTime()
                }) : _.merge(a, {
                    startDate: (new Date).getTime()
                }), q.endDate && "结束时间" != q.endDate && (a = _.merge(a, {
                    endDate: q.endDate.getTime()
                })), q.searchOrderName && (a = _.merge(a, {
                    mix: q.searchOrderName
                })), q.searchOrderRemark && (a = _.merge(a, {
                    remark: q.searchOrderRemark
                })), q.searchVenueId && (a = _.merge(a, {
                    _venue: q.searchVenueId
                })), q.searchItemId && (a = _.merge(a, {
                    _item: q.searchItemId
                })), q.searchFieldId && (a = _.merge(a, {
                    _field: q.searchFieldId
                })), k.index(a, function (a) {
                    q.orders = a.data.orderLists;
                    var b = s((new Date).getTime());
                    _.each(q.orders, function (a) {
                        if (a._worker) {
                            var c = /^\(长包预订\).*/,
                                d = /^\(培训预订\).*/,
                                e = /^201.*/;
                            c.test(a.description) && (a.form = "长包预订"), d.test(a.description) && (a.form = "培训预订"), e.test(a.description) && (a.form = "普通(柜员)")
                        } else a.form = "普通(微信)";
                        a.image = "manyChoose_imageNo2", new Date(a.startDate).getTime() < b.getTime() ? (a.refundState = "cant", a.state = "未消费",
                            a.openDate || (a.penalty = r(a.cost - a.refund))) : (a.refundState = "can", a.state = "未消费", a.isCancel && (a.penalty = r(a.cost - a.refund))), 0 != a.cost ? a.sendFlag = !0 : a.sendFlag = !1, (new Date).getTime() >= new Date(a.startDate).getTime() - 24e5 && (new Date).getTime() < new Date(a.endDate).getTime() && (a.openState = "canOpen"), (a.openDate || !a.openDate && !a.isCancel && new Date(a.endDate).getTime() < Date.now()) && (a.state = "已消费"), a.isCancel && (a.state = "已撤销")
                    });
                    var c = a.data.count;
                    q.pagination.totalItems = c, q.pagination.numPages = c / q.itemsPerPage
                }, function () {})
            },
            D = function (a, b) {
                var c = {
                    isUsed: !0,
                    _item: a
                };
                l.index(c, function (a) {
                    var c = [{
                        name: "全部"
                    }].concat(a.data.venues);
                    b(c)
                }, function () {})
            },
            E = function (a, b) {
                var c = [{
                    name: "全部"
                }].concat(a.items);
                b(c)
            },
            F = function () {
                q.searchItemId && !q.searchVenueId ? q.whatFirst = "item" : !q.searchItemId && q.searchVenueId ? q.whatFirst = "venue" : q.searchItemId || q.searchVenueId || (q.whatFirst = "")
            };
        q.chooseItemName = function (a) {
            t(), q.showItemName = a.name, q.searchItemId = a._id, q.times = [], F(), "item" == q.whatFirst ? (q.searchVenueId = "", q.showVenueName = "选择场馆", D(q.searchItemId, function (a) {
                q.venues = a
            })) : A(), B(), v(), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2", C()
        }, q.chooseVenueName = function (a) {
            t(), q.showVenueName = a.name, q.searchVenueId = a._id, q.times = [], F(), "venue" == q.whatFirst ? (q.searchItemId = "", q.showItemName = "选择项目", E(a, function (a) {
                q.items = a
            })) : z(), B(), v(), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2", C()
        }, q.chooseFieldName = function (a) {
            t(), q.showFieldName = a.name, q.searchFieldId = a._id, v(), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2", C()
        }, q.choosePageName = function (a) {
            t(), q.showPageName = a.name, q.searchPageValue = a.value, v(), C()
        }, q.chooseStateName = function (a) {
            q.showChooseStateBox = !1, q.showStateName = a.name, q.searchStateValue = a.value, "all" == a.value && (q.searchStateValue = ""), C()
        }, q.chooseFromName = function (a) {
            v(), q.showChooseFromBox = !1, q.showFromName = a.name, q.searchFromValue = a.value, "all" == a.value && (q.searchFromValue = ""), C()
        }, q.chooseNowOrderList = function () {
            "manyChoose_imageNo2" == q.nowImage ? (q.nowImage = "manyChoose_imageYes2", q.searchStateSpeValue = "nowCanOpen", q.startDate = new Date, q.endDate = new Date) : (q.searchStateSpeValue = "", q.nowImage = "manyChoose_imageNo2", q.searchStateValue = "all"), C()
        }, q.closeChooseStartDateBox = function () {
            q.showChooseStartDateBox = !1, setTimeout(function () {
                v(), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2", C()
            }, 100)
        }, q.closeChooseEndDateBox = function () {
            q.showChooseEndDateBox = !1, setTimeout(function () {
                v(), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2", C()
            }, 100)
        }, q.searchOrder = function () {
            v(), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2", C()
        }, q.page = 1, q.itemsPerPage = 10, q.pagination = {
            page: q.page,
            itemsPerPage: q.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, q.close = function () {
            t(), u()
        }, q.closePrompt = function () {
            q.promptERR = !1, q.promptOK = !1, q.promptWARN = !1, q.promptDELETE = !1
        }, q.pageChanged = function () {
            C(), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2"
        }, q.openCancelOnce = function (a) {
            q.cancelOrderId = a._id, q.showBasicInfoBox = !0, q.sendFlag = a.sendFlag
        }, q.query = function (a) {
            q._id = a._id;
            var b = {
                state: "query"
            };
            k.cancelOnce({
                controller: q._id
            }, b, function (b) {
                q.rPriceFlag = !0, b.data.rule ? "before" == b.data.rule.status ? q.rPrice = a.cost * (1 - 1 * b.data.rule.costPrecent) : q.rPrice = a.cost * (1 - 1 * b.data.rule.costPrecent) : q.rPrice = a.cost, q.refundFlag = !0
            }, function (a) {
                q.rPriceFlag = !1
            })
        }, q.chooseRefundType = function (a) {
            _.each(q.refundTypes, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", "自定义退款金额" == a.name ? (q.refundType = "自定义退款金额", q.showRefundPrice = !0) : (q.refundType = "按退款规则", q.showRefundPrice = !1)
        }, q.cancelOnce = function () {
            var b = {};
            if ("自定义退款金额" == q.refundType) {
                if (!q.refundPrice && 0 != q.refundPrice) return q.promptERR = !0, void(q.wordERR = "金额未输入");
                b.price = parseFloat(q.refundPrice)
            } else b.useRule = !0; if (q.sendFlag) {
                if (!q.sendNum) return q.promptERR = !0, void(q.wordERR = "验证码未输入");
                b.code = q.sendNum
            }
            k.cancelOnce({
                controller: q.cancelOrderId
            }, b, function () {
                t(), C(), q.refundTypes = [{
                    name: "按退款规则",
                    image: "singleChoose_imageYes"
                }, {
                    name: "自定义退款金额",
                    image: "singleChoose_imageNo"
                }], q.refundType = "按退款规则", q.refundPrice = 0, q.promptOK = !0, q.wordOK = "撤销成功", setTimeout(function () {
                    a.$apply(function () {
                        q.promptOK = !1
                    })
                }, 1e3)
            }, function (a) {
                a.data.data && (q.promptERR = !0, q.wordERR = a.data.data)
            })
        }, q.drawBill = function (b) {
            k.drawBill({
                controller: b._id
            }, {}, function () {
                C(), q.promptOK = !0, q.wordOK = "开票成功", setTimeout(function () {
                    a.$apply(function () {
                        q.promptOK = !1
                    })
                }, 1e3)
            }, function () {})
        }, q.chooseCancelOrder = function (a) {
            "manyChoose_imageYes2" == a.image ? (a.image = "manyChoose_imageNo2", q.cancelOrderIdArr.splice(q.cancelOrderIdArr.indexOf(a._id), 1)) : (a.image = "manyChoose_imageYes2", q.cancelOrderIdArr.push(a._id))
        }, q.chooseCancelOrderAll = function () {
            q.cancelOrderIdArr.length > 0 ? (_.each(q.orders, function (a) {
                a.image = "manyChoose_imageNo2"
            }), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2") : (_.each(q.orders, function (a) {
                a.image = "manyChoose_imageYes2", q.cancelOrderIdArr.push(a._id)
            }), q.allImage = "manyChoose_imageYes2")
        }, q.openCancelOrders = function () {
            q.promptDELETE = !0, q.wordDELETE = "退订为不可逆操作，是否继续？"
        }, q.cancelOrders = function () {
            k.cancelOrders({}, {
                ids: q.cancelOrderIdArr
            }, function () {
                t(), C(), u(), q.promptOK = !0, q.wordOK = "撤销成功", setTimeout(function () {
                    a.$apply(function () {
                        q.promptOK = !1
                    })
                }, 1e3)
            }, function (a) {
                a.data.data && (q.promptDELETE = !1, q.promptERR = !0, q.wordERR = a.data.data)
            })
        }, q.openField = function (b) {
            k.open({
                controller: b._id
            }, {}, function () {
                q.promptOK = !0, q.wordOK = "开启成功", setTimeout(function () {
                    a.$apply(function () {
                        q.promptOK = !1
                    })
                }, 1e3), C()
            }, function () {})
        }, q.openChooseFieldWork = function () {
            return 0 == q.users.length ? (q.promptERR = !0, void(q.wordERR = "暂无场地管理员")) : void(1 == q.users.length ? (q.objectName = q.users[0].name, q._user = q.users[0]._id, q.send()) : q.sendToFlag = !0)
        }, q.printOrder = function (a) {
            for (var b = "", c = 0; c < a.tel.length; c++) b += "3" == c || "4" == c || "5" == c || "6" == c ? "*" : a.tel[c];
            a.tel = b;
            var d = '<div style="width: 250px;padding:0;margin: 0;"><div>';
            d += '<div style="font-size: 20px;font-weight: bold;">欢迎光临', d += q.organization.name, d += '</div><div style="font-size: 20px;font-weight: bold;margin-top: 10px;">场地订单小票</div></div>', d += '<div style="margin-top: 10px;">**************************************</div>', d += '<div><div style="font-size: 16px;margin-top: 10px;">场馆名称：', d += a.venueName, d += '</div><div style="font-size: 16px;margin-top: 10px;">场地名称：', d += a.fieldName, d += '</div><div style="font-size: 16px;margin-top: 10px;">日期：', d += new Date(a.startDate).getFullYear() + "年" + (new Date(a.startDate).getMonth() + 1) + "月" + new Date(a.startDate).getDate() + "日", d += '</div><div style="font-size: 16px;margin-top: 10px;">场次时间：', d += a.showDate, d += '</div><div style="font-size: 16px;margin-top: 10px;">预订人：', d += a.name, d += '</div><div style="font-size: 16px;margin-top: 10px;">联系方式：', d += a.tel, d += '</div><div style="font-size: 16px;margin-top: 10px;">预订金额：', d += a.cost, d += '</div><div style="font-size: 16px;margin-top: 10px;">验证码：', d += a.code, d += '</div><div style="font-size: 16px;margin-top: 10px;">备注：请在消费后的一个月内开票，逾期作废', d += "</div></div></div>";
            var e = getLodop();
            e.PRINT_INIT(""), e.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), e.SET_PRINTER_INDEXA(-1), e.SET_PRINT_PAGESIZE(3, 800, 100, ""), e.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", d), e.PRINT()
        }, q.openShowOrderRemark = function (a) {
            q.showOrderRemark = !0, q.order = {
                _id: a._id,
                remark: a.remark || void 0
            }
        }, q.updateRemark = function () {
            k.updateRemark({
                controller: q.order._id
            }, q.order, function () {
                q.showOrderRemark = !1, C(), q.promptOK = !0, q.wordOK = "修改成功", setTimeout(function () {
                    a.$apply(function () {
                        q.promptOK = !1
                    })
                }, 1e3)
            }, function () {})
        }, y()
    }
    angular.module("fieldApp").controller("FmFieldCancelBookCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Time", "Field", "Orderlist", "Venue", "Item", "Orderlong", "Member", "Smscode"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        var p = this;
        p.titleState = f.params.state || "once", p.searchVenueId, p.searchItemId, p.searchPayment;
        var q = function (a) {
                return a = new Date(1e3 * parseInt(a / 1e3)), a.setHours(0), a.setMinutes(0), a.setSeconds(0), a
            },
            r = function (a) {
                return a = new Date(1e3 * parseInt(a / 1e3)), a.setHours(23), a.setMinutes(59), a.setSeconds(59), a
            },
            s = function () {
                p.showChooseVenueBox = !1, p.showChooseItemBox = !1, p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1, p.showBasicInfoBox = !1, p.showchooseOnceTypeBox = !1, p.deleteFlag = !1, p.showLongRefundBox = !1, p.showInfoBox = !1, p.showPaymentBox = !1, p.showAddTimeBox = !1, p.showEditTimeBox = !1
            };
        p.close = function () {
            s(), A(), B()
        };
        var t = function () {
            u(), v(), B()
        };
        p.closePrompt = function () {
            p.promptERR = !1, p.promptOK = !1, p.promptWARN = !1
        };
        var u = function () {
                m.index({
                    isUsed: !0
                }, function (a) {
                    p.items = [{
                        name: "全部"
                    }].concat(a.data.items)
                }, function () {})
            },
            v = function (a) {
                l.index({
                    isUsed: !0
                }, function (a) {
                    p.venues = [{
                        name: "全部"
                    }].concat(a.data.venues)
                }, function () {})
            },
            w = function () {
                i.index({
                    _venue: p.searchVenueId,
                    _item: p.searchItemId,
                    isUsed: !0,
                    sortBy: "startDate"
                }, function (a) {
                    var b = (new Date).getTime(),
                        c = q(b),
                        d = r(b),
                        e = (_.clone(p.startDate), p.startDate.getHours()),
                        f = q(p.startDate),
                        g = (r(p.startDate), []);
                    c.getTime() == f.getTime() ? _.each(a.data.times, function (a) {
                        a.endDateHours > e && g.push(a)
                    }) : d.getTime() < p.startDate.getTime() && (g = a.data.times), p.times = [];
                    for (var h = g[0].startDateHours; h <= g[g.length - 1].endDateHours; h++) p.times.push({
                        showDate: h + ":00",
                        value: h
                    })
                }, function () {})
            },
            x = function (a, b) {
                var c = {
                    isUsed: !0,
                    _item: a
                };
                l.index(c, function (a) {
                    var c = [{
                        name: "全部"
                    }].concat(a.data.venues);
                    b(c)
                }, function () {})
            },
            y = function (a, b) {
                var c = [{
                    name: "全部"
                }].concat(a.items);
                b(c)
            },
            z = function () {
                p.searchItemId && !p.searchVenueId ? p.whatFirst = "item" : !p.searchItemId && p.searchVenueId ? p.whatFirst = "venue" : p.searchItemId || p.searchVenueId || (p.whatFirst = "")
            };
        p.chooseItemName = function (a) {
            s(), p.showStartTime = "选择开始时间", p.showEndTime = "选择结束时间", p.showTimesArr = [{
                startDateHours: 0,
                startDateMins: 0,
                endDateHours: 0,
                endDateMins: 0
            }], p.showItemName = a.name, p.searchItemId = a._id, p.times = [], z(), "item" == p.whatFirst ? (p.searchVenueId = "", p.showVenueName = "选择场馆", x(p.searchItemId, function (a) {
                p.venues = a
            })) : v(), p.searchItemId && p.searchVenueId && w()
        }, p.chooseVenueName = function (a) {
            s(), p.showStartTime = "选择开始时间", p.showEndTime = "选择结束时间", p.showTimesArr = [{
                startDateHours: 0,
                startDateMins: 0,
                endDateHours: 0,
                endDateMins: 0
            }], p.showVenueName = a.name, p.searchVenueId = a._id, p.times = [], z(), "venue" == p.whatFirst ? (p.searchItemId = "", p.showItemName = "选择项目", y(a, function (a) {
                p.items = a
            })) : u(), p.searchItemId && p.searchVenueId && w()
        };
        var A = function () {
                p.BlongFirst = !1, p.BlongSecond = !1, p.BlongThird = !1, p.BlongFouth = !1, p.showChooseWeekDayBox = !1, p.showChooseMonthDayBox = !1, p.showChooseTimesSelect = !1, p.showchooseLongTypeBox = !1, p.showLongRefundDateBox = !1
            },
            B = function (a) {
                if (!a) {
                    p.showVenueName = "选择场馆", p.showItemName = "选择项目", p.showTypeName = "选择类型", p.showStartTime = "选择开始时间", p.showEndTime = "选择结束时间", p.long_weekDays = [{
                        name: "周一",
                        value: 1,
                        image: ""
                    }, {
                        name: "周二",
                        value: 2,
                        image: ""
                    }, {
                        name: "周三",
                        value: 3,
                        image: ""
                    }, {
                        name: "周四",
                        value: 4,
                        image: ""
                    }, {
                        name: "周五",
                        value: 5,
                        image: ""
                    }, {
                        name: "周六",
                        value: 6,
                        image: ""
                    }, {
                        name: "周日",
                        value: 0,
                        image: ""
                    }], p.long_monthDays = [];
                    for (var b = 1; 32 > b; b++) p.long_monthDays.push({
                        value: b,
                        image: ""
                    });
                    p.long_values = [{
                        name: "每周",
                        value: "week"
                    }, {
                        name: "每月",
                        value: "month"
                    }, {
                        name: "每天",
                        value: "day"
                    }], p.long_orderTypeArr = [{
                        name: "长包",
                        image: "singleChoose_imageYes"
                    }, {
                        name: "培训",
                        image: "singleChoose_imageNo"
                    }], p.long_orderType = "", p.showWeekDayName = "请选择星期几", p.showMonthDayName = "请选择日期", p.showChooseWeekDayBox = !1, p.showChooseMonthDayBox = !1, p.showTimesArr = [{
                        startDateHours: 0,
                        startDateMins: 0,
                        endDateHours: 0,
                        endDateMins: 0
                    }], p.searchKey = "week", p.showValueName = "每周", p.showChooseWeekDayBox = !0, p.long_name = "", p.long_tel = "", p.long_remark = "", p.searchValueArr = []
                }
                p.specialArr = [], p.chooseAll = "manyChoose_imageNo2", p.showResult = [], p.cancelDocArr = []
            };
        p.long_closeChooseStartDateBox = function (a) {
            p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1, a || w()
        }, p.long_closeChooseEndDateBox = function () {
            p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1
        }, p.long_chooseValue = function (a) {
            switch (p.showChooseValueBox = !1, p.showChooseWeekDayBox = !1, p.showChooseMonthDayBox = !1, p.searchValueArr = [], p.showWeekDayName = "请选择星期几", p.showMonthDayName = "请选择日期", p.showValueName = a.name, a.name) {
            case "每周":
                p.searchKey = "week", p.showChooseWeekDayBox = !0;
                break;
            case "每月":
                p.searchKey = "month", p.showChooseMonthDayBox = !0;
                break;
            default:
                p.searchKey = "day"
            }
        }, p.chooseWeekDay = function (a) {
            p.searchKey = "week";
            var b = p.searchValueArr.indexOf(a.value);
            0 > b ? (p.searchValueArr.push(a.value), a.image = "background:url(../../assets/images/ok.png) no-repeat 170px 13.5px;") : (p.searchValueArr.splice(b, 1), a.image = ""), p.showWeekDayName = "";
            for (var c = 0; c < p.searchValueArr.length; c++) {
                var d = p.searchValueArr[c],
                    a = _.findWhere(p.long_weekDays, {
                        value: d
                    });
                0 == c ? p.showWeekDayName = a.name : p.showWeekDayName += "," + a.name
            }
            p.showChooseWeekDaySelect = !1
        }, p.chooseMonthDay = function (a) {
            p.searchKey = "month";
            var b = p.searchValueArr.indexOf(a.value);
            0 > b ? (p.searchValueArr.push(a.value), a.image = "background:url(../../assets/images/ok.png) no-repeat 170px 13.5px;") : (p.searchValueArr.splice(b, 1), a.image = ""), p.showMonthDayName = "";
            for (var c = 0; c < p.searchValueArr.length; c++) {
                var d = p.searchValueArr[c];
                0 == c ? p.showMonthDayName = d : p.showMonthDayName += "," + d
            }
            p.showChooseMonthDaySelect = !1
        }, p.chooseStartTime = function (a) {
            p.showStartTime = a.showDate, p.showTimesArr[0].startDateHours = a.value, p.showStartTimeBox = !1
        }, p.chooseEndTime = function (a) {
            p.showEndTime = a.showDate, p.showTimesArr[0].endDateHours = a.value, p.showEndTimeBox = !1
        }, p.long_chooseOrderType = function (a) {
            switch (p.showTypeName = a.name, p.showChooseTypeBox = !1, a.name) {
            case "长包":
                p.long_orderType = "long";
                break;
            case "培训":
                p.long_orderType = "train"
            }
        }, p.checkField = function () {
            if (p.showTimesArr.length < 1) return p.promptWARN = !0, void(p.wordWARN = "请选择场次");
            if (p.showTimesArr[0].startDateHours > p.showTimesArr[0].endDateHours) return p.promptERR = !0, void(p.wordERR = "场次开始时间不能大于结束时间");
            var a = {
                _venue: p.searchVenueId,
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime(),
                defindTimes: p.showTimesArr,
                key: p.searchKey,
                valueArr: p.searchValueArr,
                check: "check",
                _item: p.searchItemId
            };
            k.createLong({}, a, function (a) {
                p.BlongFirst = !0, p.longFields = a.result
            }, function (a) {
                "时间区间内没有需要预定的场次" == a.data.data && (p.promptWARN = !0, p.wordWARN = "请重新选择时间范围"), "时间段不能重叠" == a.data.data && (p.promptWARN = !0, p.wordWARN = "时间段不能重叠")
            })
        }, p.openBlongSecond = function (a) {
            p.backstate = "flexible", p.long_field = a;
            var b = {
                name: p.long_name,
                _field: p.long_field._id,
                _venue: p.searchVenueId,
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime(),
                defindTimes: p.showTimesArr,
                key: p.searchKey,
                valueArr: p.searchValueArr,
                tel: p.long_tel || null,
                remark: p.long_remark || null,
                cost: p.long_price,
                state: "flexible"
            };
            k.createLong({}, b, function (a) {
                p.BlongFirst = !1, p.BlongSecond = !0, p.replaceFields = a.result, _.each(p.replaceFields, function (a) {
                    return "没有推荐场地" == a.recommendField ? (p.promptERR = !0, p.wordERR = "没有推荐场地", A(), void B("create")) : (a.replaceFieldName = a.recommendField[0].name, void p.specialArr.push({
                        startDate: a.conflictField.startDate,
                        endDate: a.conflictField.endDate,
                        name: a.recommendField[0].name,
                        replaceFieldId: a.recommendField[0]._id,
                        orderDateNum: a.conflictField.orderDateNum,
                        startHours: a.conflictField.startHours,
                        endHours: a.conflictField.endHours
                    }))
                })
            }, function () {})
        }, p.backToFirst = function () {
            p.backstate = "", p.BlongSecond = !1, p.BlongFirst = !0, p.specialArr = []
        }, p.chooseReplaceField = function (a, b) {
            b.showChooseReplaceFieldBox = !1, b.replaceFieldName = a.name;
            var c = _.findWhere(p.specialArr, {
                startDate: b.conflictField.startDate,
                endDate: b.conflictField.endDate
            });
            c ? (c.replaceFieldId = a._id, c.name = a.name) : p.specialArr.push({
                startDate: b.conflictField.startDate,
                endDate: b.conflictField.endDate,
                name: a.name,
                replaceFieldId: a._id,
                orderDateNum: b.conflictField.orderDateNum,
                startHours: b.conflictField.startHours,
                endHours: b.conflictField.endHours
            })
        }, p.backToSecond = function () {
            p.BlongFouth = !1, p.backstate && "flexible" == p.backstate ? p.BlongSecond = !0 : (p.BlongFirst = !0, p.backstate = "")
        }, p.openBlongFouth = function (a) {
            a && (p.long_field = a), p.BlongFirst = !1, p.BlongSecond = !1, p.BlongFouth = !0
        }, p.getResult = function () {
            var a = {
                name: p.long_name,
                _field: p.long_field._id,
                _venue: p.searchVenueId,
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime(),
                defindTimes: p.showTimesArr,
                getResult: "getResult",
                key: p.searchKey,
                valueArr: p.searchValueArr,
                tel: p.long_tel || null,
                remark: p.long_remark || null,
                cost: p.long_price,
                orderType: p.long_orderType
            };
            p.specialArr.length > 0 && (a = _.merge(a, {
                specialArr: p.specialArr
            })), k.createLong({}, a, function (a) {
                p.showResult = a.result, p.cancelDocArr = [], p.BlongFouth = !1, p.chooseAll = "manyChoose_imageYes2", _.each(p.showResult, function (a) {
                    a.choose = "manyChoose_imageYes2"
                })
            }, function () {})
        }, p.changeAllChoose = function () {
            p.cancelDocArr.length > 0 ? (p.cancelDocArr = [], p.chooseAll = "manyChoose_imageYes2", _.each(p.showResult, function (a) {
                a.choose = "manyChoose_imageYes2"
            })) : (p.cancelDocArr = _.cloneDeep(p.showResult), p.chooseAll = "manyChoose_imageNo2", _.each(p.showResult, function (a) {
                a.choose = "manyChoose_imageNo2"
            }))
        }, p.changeChoose = function (a) {
            if ("manyChoose_imageNo2" == a.choose) {
                var b = p.cancelDocArr.indexOf(a);
                b > -1 && p.cancelDocArr.splice(b, 1), a.choose = "manyChoose_imageYes2"
            } else p.cancelDocArr.push(a), a.choose = "manyChoose_imageNo2"
        }, p.deleteDoc = function () {
            p.showResult = [], p.cancelDocArr = [], p.chooseAll = "manyChoose_imageNo2"
        }, p.createLong = function () {
            var b = {
                name: p.long_name,
                _field: p.long_field._id,
                _venue: p.searchVenueId,
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime(),
                defindTimes: p.showTimesArr,
                key: p.searchKey,
                valueArr: p.searchValueArr,
                tel: p.long_tel || null,
                remark: p.long_remark || null,
                cost: p.long_price,
                orderType: p.long_orderType
            };
            p.specialArr.length > 0 && (b = _.merge(b, {
                specialArr: p.specialArr
            })), p.cancelDocArr.length > 0 && (b = _.merge(b, {
                cancelArr: p.cancelDocArr
            })), k.createLong({}, b, function (b) {
                p.showResult = b.result, p.BlongFouth = !1, _.each(p.showResult, function (a) {
                    a.choose = !1
                }), A(), B("create"), v(), p.showChooseWeekDayBox = !0, p.promptOK = !0, p.wordOK = "预订成功", setTimeout(function () {
                    a.$apply(function () {
                        p.promptOK = !1
                    })
                }, 1e3)
            }, function (a) {
                console.log(a), p.promptERR = !0, p.wordERR = a.data.data
            })
        }, t()
    }
    angular.module("fieldApp").controller("FmFieldLongBookCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Time", "Field", "Orderlist", "Venue", "Item", "Orderlong", "Member"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r) {
        var s, t = this,
            u = 0,
            v = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            },
            w = function (a) {
                return a = new Date(1e3 * parseInt(a / 1e3)), a.setHours(0), a.setMinutes(0), a.setSeconds(0), a
            },
            x = function (a) {
                return a = new Date(1e3 * parseInt(a / 1e3)), a.setHours(23), a.setMinutes(59), a.setSeconds(59), a
            },
            y = function (a) {
                var b;
                switch (a) {
                case 0:
                    b = "周日";
                    break;
                case 1:
                    b = "周一";
                    break;
                case 2:
                    b = "周二";
                    break;
                case 3:
                    b = "周三";
                    break;
                case 4:
                    b = "周四";
                    break;
                case 5:
                    b = "周五";
                    break;
                case 6:
                    b = "周六"
                }
                return b
            },
            z = function () {
                t.showChooseVenueBox = !1, t.showChooseItemBox = !1, t.showChooseStartDateBox = !1, t.showChooseEndDateBox = !1, t.showBasicInfoBox = !1, t.showchooseOnceTypeBox = !1, t.showInfoBox = !1, t.showPaymentBox = !1, t.showMemberInfo = !1, t.showOrderBox = !1, t.showCodeBox = !1, t.showCreateMember = !1, t.showAuth_codeBox = !1, t.showRechargeBox = !1, clearInterval(t.setIntervalId)
            },
            A = function (a) {
                if (a) t.members = null;
                else {
                    t.showVenueName = "选择场馆", t.showItemName = "选择项目", t.searchVenueId = "", t.searchItemId = "", t.showHours = [], t.dateArr = [];
                    for (var b = Date.now(), c = b; b + 6912e5 > c; c += 864e5) t.dateArr.push({
                        date: new Date(c),
                        week: y(new Date(c).getDay()),
                        bgColor: "color:#99a9bf;",
                        isChoose: !1
                    });
                    t.dateArr[0].isChoose = !0, t.dateArr[0].bgColor = "background:#20a0ff;color:#fff;", t.startDate = new Date
                }
                t.memberTelOrCard = "", t.today = new Date, t.rechargeType = "cash", t.chooseCardId = "", t.rechargePayment = "", t.order = {
                    _member: "",
                    orderDate: null,
                    spbill_create_ip: "",
                    auth_code: "",
                    payment: "member",
                    subtotal: 0,
                    total: 0,
                    orderArr: []
                }, t.member = {
                    name: "",
                    tel: "",
                    idCard: ""
                }, t.flexibleOrderPrice = "", t.startTime = "点击场次获取", t.lastTime = "", t.paymentArr = [{
                    name: "余额",
                    value: "member",
                    image: "singleChoose_imageYes"
                }, {
                    name: "支付宝",
                    value: "alipay",
                    image: "singleChoose_imageNo"
                }, {
                    name: "微信",
                    value: "wx",
                    image: "singleChoose_imageNo"
                }, {
                    name: "现金",
                    value: "cash",
                    image: "singleChoose_imageNo"
                }, {
                    name: "支票",
                    value: "check",
                    image: "singleChoose_imageNo"
                }, {
                    name: "转账",
                    value: "card",
                    image: "singleChoose_imageNo"
                }, {
                    name: "POS机",
                    value: "pos",
                    image: "singleChoose_imageNo"
                }]
            },
            B = function () {
                A(), D(), E(), C()
            },
            C = function () {
                r.index({
                    sortBy: "discount"
                }, function (a) {
                    t.cards = a.data.membertypes
                }, function () {})
            },
            D = function () {
                m.index({
                    isUsed: !0
                }, function (a) {
                    t.items = [{
                        name: "全部"
                    }].concat(a.data.items)
                }, function () {})
            },
            E = function () {
                l.index({
                    isUsed: !0
                }, function (a) {
                    t.venues = [{
                        name: "全部"
                    }].concat(a.data.venues), 0 == u && a.data.venues.length > 0 && t.chooseVenueName(t.venues[1])
                }, function () {})
            },
            F = function () {
                t.order = {
                    _member: t.members ? t.members[0]._id : "",
                    orderDate: null,
                    spbill_create_ip: "",
                    auth_code: "",
                    payment: "member",
                    subtotal: 0,
                    total: 0,
                    orderArr: []
                }, t.startTime = "点击场次获取", t.lastTime = "", i.index({
                    _venue: t.searchVenueId,
                    _item: t.searchItemId,
                    isUsed: !0,
                    sortBy: "startDate",
                    orderDate: t.startDate.getTime()
                }, function (a) {
                    t.times = a.data.times, t.speDay = a.data.speDay;
                    var b = [],
                        c = Date.now();
                    if (_.each(t.times, function (a) {
                        a.isUsed ? b.push(a) : (a.close_startDate > c || a.close_endDate < c) && b.push(a)
                    }), t.times = b, "fm-field-book.flexible" == f.current.name) {
                        var b = [];
                        _.each(t.times, function (a) {
                            if (a.continueHours > 1)
                                for (var c = a.startDate; c < a.endDate; c++) {
                                    var d = _.cloneDeep(a);
                                    d.continueHours = 1, d.startDate = c, d.startDateHours = parseInt(c), d.startDateMins = c % 1 * 60, d.endDate = c + 1, d.endDateHours = parseInt(d.endDate), d.endDateMins = d.endDate % 1 * 60, d.showDate = "" + d.startDateHours + ":", d.showDate += d.startDateMins > 10 ? d.startDateMins : "0" + d.startDateMins, d.showDate += "--" + d.endDateHours + ":", d.showDate += d.endDateMins > 10 ? d.endDateMins : "0" + d.endDateMins, b.push(d)
                                } else b.push(a)
                        }), t.times = b
                    }
                    if (t.times.length > 0) {
                        var d = t.times[0].startDateHours || 0,
                            e = t.times[t.times.length - 1].endDateHours || 0;
                        e = e < t.times[t.times.length - 1].endDate ? e + 1 : e;
                        var g = e - d;
                        t.showHours = [];
                        for (var h = d; e >= h; h++) t.showHours.push({
                            num: 10 > h ? "0" + h : h,
                            fontColor: ""
                        });
                        var i = document.getElementsByTagName("html")[0].offsetWidth / 1320;
                        i = 10 * (i > 1 ? i : 1);
                        var j = 6 * g;
                        t.tableWidthB = "width:" + (6 * g + 16) + "rem;", t.tableWidthS = "width:" + 6 * g + "rem;";
                        for (var h = 0; h < t.times.length; h++) 0 == h ? t.times[h].marginleft = "margin-left:" + ((t.times[h].startDate - d) / g * j - 1 / i) + "rem;" : t.times[h].marginleft = "margin-left:" + ((t.times[h].startDate - t.times[h - 1].endDate) / g * j - 1 / i) + "rem;", t.times[h].width = "width:" + (t.times[h].continueHours / g * j + 1 / i) + "rem;";
                        G()
                    }
                }, function () {})
            },
            G = function () {
                var a = {
                    _venue: t.searchVenueId,
                    _item: t.searchItemId,
                    sortValue: "asc"
                };
                j.index(a, function (a) {
                    t.fields = a.data.fields, H()
                }, function () {})
            },
            H = function () {
                var a = Date.now(),
                    b = w(a),
                    c = (x(a), _.clone(t.startDate)),
                    d = t.startDate.getHours() + t.startDate.getMinutes() / 60,
                    e = w(t.startDate),
                    g = (x(t.startDate), t.speDay ? t.speDay.weekAs : 0 == c.getDay() ? 6 : c.getDay() - 1),
                    h = 0;
                _.each(t.fields, function (c) {
                    c.index = h, h++, c.isChoose = !1, c.fontColor = "", c.times = _.cloneDeep(t.times), _.each(c.times, function (h) {
                        switch (c.isUsed || !c.isUsed && new Date(c.closeDate).getTime() > a ? (h.state = "canbook", h.bgColor = "background:#fff;", "csd-field-book.once" == f.current.name ? (b.getTime() == e.getTime() && h.startDate < d || b.getTime() > t.startDate.getTime()) && (h.state = "cantbook", h.bgColor = "background:#e5e9f2;") : (b.getTime() == e.getTime() && h.endDate < d || b.getTime() > t.startDate.getTime()) && (h.state = "cantbook", h.bgColor = "background:#e5e9f2;")) : (h.state = "stop", h.bgColor = "background:#e5e9f2;"), h.isChoose = !1, h.tel = "", h.name = "", h.priceArr[g].unit) {
                        case "sign":
                            h.price = "￥" + v(h.priceArr[g].price);
                            break;
                        case "hours":
                            h.price = "￥" + v(h.priceArr[g].price * h.continueHours);
                            break;
                        default:
                            h.price = "No"
                        }
                    })
                }), I()
            },
            I = function () {
                var a = {
                    _venue: t.searchVenueId,
                    _item: t.searchItemId,
                    orderDateNum: t.startDate.getTime(),
                    state: "all"
                };
                k.index(a, function (a) {
                    t.orders = a.data.orderLists, _.each(t.orders, function (a) {
                        var b = _.findWhere(t.fields, {
                            _id: a._field
                        });
                        b && _.each(b.times, function (b) {
                            if (a.startHours < b.startDate && a.endHours > b.startDate || a.startHours >= b.startDate && a.startHours < b.endDate) {
                                if ("stop" != b.state && "cantbook" != b.state) {
                                    b.orderId = a._id, b.tel = a.tel || "", b.name = a.name || "";
                                    var c = a.description.substr(0, 6);
                                    "(长包预订)" == c ? (b.bgColor = "background:#F69667;", b.state = "hasbook", b.orderType = "long") : "(培训预订)" == c ? (b.bgColor = "background:#67BDDE;", b.state = "hasbook", b.orderType = "train") : (b.bgColor = "background:#5ED878;", b.state = "hasbook", b.orderType = "once"), M(a) && (b.bgColor = "background:#ff4949;", b.state = "isUsed"), b.code = a.code, b.remark = a.remark
                                } else b.orderId = a._id, b.tel = a.tel || "", b.name = a.name || "", b.bgColor = "background:#99a9bf;", b.state = "haspass", M(a) && (b.bgColor = "background:#ff4949;", b.state = "isUsed"), b.code = a.code, b.remark = a.remark;
                                delete b.isChoose
                            }
                        })
                    })
                }, function () {})
            },
            J = function (a, b) {
                var c = {
                    isUsed: !0,
                    _item: a
                };
                l.index(c, function (a) {
                    var c = [{
                        name: "全部"
                    }].concat(a.data.venues);
                    b(c)
                }, function () {})
            },
            K = function (a, b) {
                var c = [{
                    name: "全部"
                }].concat(a.items);
                b(c)
            },
            L = function () {
                t.searchItemId && !t.searchVenueId ? t.whatFirst = "item" : !t.searchItemId && t.searchVenueId ? t.whatFirst = "venue" : t.searchItemId || t.searchVenueId || (t.whatFirst = "")
            },
            M = function (a) {
                var b = (new Date).getTime(),
                    c = new Date(a.endDate).getTime();
                return a.isUsed && c >= b ? !0 : !1
            },
            N = function (a) {
                var b = a.split("|");
                if (3 != b.length) return !1;
                var a = b[0],
                    c = b[1].split(""),
                    d = b[2],
                    e = d,
                    f = parseInt(s / 6e4).toString().split("");
                if (c.length < f.length) return !1;
                for (var g = 0; g < f.length; g++) d = d.replace(f[g], c[g]);
                return d == a ? e : !1
            };
        t.changeTitle = function (a) {
            u = 0, E();
            var b = t.memberTelOrCard;
            z(), A(), t.memberTelOrCard = b, t.members && (t.showMemberInfo = !0, t.order._member = t.members[0]._id), "once" == a ? f.go("fm-field-book.once") : f.go("fm-field-book.flexible")
        }, t.checkMember = function (a) {
            return t.memberTelOrCard || a ? void(a ? n.show({
                id: a
            }, function (a) {
                t.members = [a.data.member], t.showMemberInfo = !0, t.order._member = t.members[0]._id
            }, function (a) {
                "找不到对象：member" == a.data.data && (t.showMemberInfo = !1, t.order = {
                    _member: "",
                    orderDate: null,
                    spbill_create_ip: "",
                    auth_code: "",
                    payment: "member",
                    total: 0,
                    orderArr: []
                }, t.promptERR = !0, t.wordERR = "会员不存在")
            }) : i.index({
                id: "today"
            }, function (a) {
                s = a.data;
                var b = N(t.memberTelOrCard);
                if (b) n.show({
                    id: b
                }, function (a) {
                    t.members = [a.data.member], t.showMemberInfo = !0, t.order._member = t.members[0]._id
                }, function (a) {
                    "找不到对象：member" == a.data.data && (t.showMemberInfo = !1, t.order = {
                        _member: "",
                        orderDate: null,
                        spbill_create_ip: "",
                        auth_code: "",
                        payment: "member",
                        total: 0,
                        orderArr: []
                    }, t.promptERR = !0, t.wordERR = "会员不存在")
                });
                else {
                    var c = {
                        cardNo: t.memberTelOrCard
                    };
                    n.indexBycard(c, function (a) {
                        t.members = [a.data.member], t.showMemberInfo = !0, t.order._member = t.members[0]._id
                    }, function (a) {
                        "找不到对象：member" == a.data.data && (t.showMemberInfo = !1, t.order = {
                            _member: "",
                            orderDate: null,
                            spbill_create_ip: "",
                            auth_code: "",
                            payment: "member",
                            total: 0,
                            orderArr: []
                        }, t.promptERR = !0, t.wordERR = "会员不存在")
                    })
                }
            })) : (t.promptERR = !0, void(t.wordERR = "请读取会员卡号/二维码"))
        }, t.chooseItemName = function (a) {
            t.showChooseItemBox = !1, t.showItemName = a.name, t.searchItemId = a._id, t.times = [], L(), "item" == t.whatFirst ? (t.searchVenueId = "", t.showVenueName = "选择场馆", J(t.searchItemId, function (a) {
                t.venues = a
            })) : E(), t.searchItemId && t.searchVenueId && F()
        }, t.chooseVenueName = function (a) {
            t.showChooseVenueBox = !1, t.showVenueName = a.name, t.searchVenueId = a._id, t.times = [], L(), "venue" == t.whatFirst ? (t.searchItemId = "", t.showItemName = "选择项目", K(a, function (a) {
                t.items = a
            })) : D(), 0 == u && t.items.length > 0 ? (u++, t.chooseItemName(t.items[1])) : t.searchItemId && t.searchVenueId && F()
        }, t.closeChooseStartDateBox = function () {
            setTimeout(function () {
                t.showChooseStartDateBox = !1, F()
            }, 100)
        }, t.changeDate = function (a) {
            _.each(t.dateArr, function (a) {
                a.bgColor = "color:#99a9bf;", a.isChoose = !1
            }), a.bgColor = "background:#20a0ff;color:#fff;", a.isChoose = !0, t.startDate = a.date, t.searchItemId && t.searchVenueId && F()
        };
        var O = function () {
            _.each(t.showHours, function (a) {
                a.fontColor = ""
            }), _.each(t.fields, function (a) {
                a.fontColor = ""
            }), _.each(t.order.orderArr, function (a) {
                for (var b = a.startDateHours; b <= a.endDateHours; b++) {
                    b = 10 > b ? "0" + b : b;
                    var c = _.findWhere(t.showHours, {
                        num: b
                    });
                    c.fontColor = "color:#ff4949;font-weight:bold;"
                }
                var d = _.findWhere(t.fields, {
                    _id: a._field
                });
                d.fontColor = "color:#ff4949;font-weight:bold;"
            })
        };
        t.chooseField = function (a, b) {
            if (!t.order._member) return t.promptERR = !0, void(t.wordERR = "请先查找会员信息");
            if ("No" == b.price) return t.promptERR = !0, void(t.wordERR = "未设置单位场次不可预订");
            var c, d = t.speDay ? parseInt(t.speDay.weekAs) : t.startDate.getDay(),
                e = 0,
                f = 0;
            c = a.itemDiscount ? a.itemDiscount : t.members[0].cards.length > 0 ? t.members[0].cards[0].discount : 1;
            var g = _.findWhere(b.priceArr, {
                week: d
            });
            if ("sign" == g.unit ? (e = g.price, f = g.price * c) : "hours" == g.unit && (e = g.price * b.continueHours, f = g.price * b.continueHours * c), f = Math.ceil(parseInt(1e3 * f) / 10) / 100, e = Math.ceil(parseInt(1e3 * e) / 10) / 100, b.isChoose) {
                b.isChoose = !1, b.bgColor = "background:#fff;", b.state = "canbook", b.fontColor = "";
                var a = _.findWhere(t.order.orderArr, {
                    date: t.startDate,
                    _field: a._id,
                    _time: b._id
                });
                if (a) {
                    var h = t.order.orderArr.indexOf(a);
                    t.order.total = v((100 * t.order.total - 100 * f) / 100), t.order.subtotal = v((100 * t.order.subtotal - 100 * e) / 100), t.order.orderArr.splice(h, 1)
                }
            } else {
                if (9 == t.order.orderArr.length) return t.promptERR = !0, void(t.wordERR = "一次最多选择9场");
                b.isChoose = !0, b.bgColor = "background:#20a0ff;", b.fontColor = "color:#fff;", b.state = "choose", t.order.total = v((100 * t.order.total + 100 * f) / 100), t.order.subtotal = v((100 * t.order.subtotal + 100 * e) / 100), t.order.orderArr.push({
                    date: t.startDate,
                    _field: a._id,
                    fieldName: a.name,
                    _time: b._id,
                    timeShowDate: b.showDate,
                    startDateHours: b.startDateHours,
                    endDateHours: b.endDateHours,
                    itmeName: t.showItemName,
                    venueName: t.showVenueName,
                    week: y(t.startDate.getDay())
                })
            }
            O()
        }, t.deleteField = function (a) {
            var b, c = _.findWhere(t.fields, {
                    _id: a._field
                }),
                d = _.findWhere(c.times, {
                    _id: a._time
                }),
                e = t.speDay ? parseInt(t.speDay.weekAs) : t.startDate.getDay(),
                f = 0,
                g = 0;
            b = a.itemDiscount ? a.itemDiscount : t.members[0].cards.length > 0 ? t.members[0].cards[0].discount : 1;
            var h = _.findWhere(d.priceArr, {
                week: e
            });
            "sign" == h.unit ? (f = h.price, g = h.price * b) : "hours" == h.unit && (f = h.price * d.continueHours, g = h.price * d.continueHours * b), g = Math.ceil(parseInt(1e3 * g) / 10) / 100, f = Math.ceil(parseInt(1e3 * f) / 10) / 100, d.bgColor = "background:#fff;", d.fontColor = "color:#000;", d.isChoose = !1, t.order.subtotal = v((100 * t.order.subtotal - 100 * f) / 100), t.order.total = v((100 * t.order.total - 100 * g) / 100), t.order.orderArr.splice(t.order.orderArr.indexOf(a), 1), O()
        }, t.create = function () {
            switch (t.order.orderDate = new Date(t.startDate).getTime(), t.order.payment) {
            case "wx":
            case "alipay":
                t.order.spbill_create_ip = "122.224.134.196", t.showAuth_codeBox = !0, t.setIntervalId = setInterval(function () {
                    document.getElementById("auth_code").focus()
                }, 100);
                break;
            case "cash":
            case "card":
            case "pos":
            case "check":
            case "member":
                t.showOrderBox = !1, t.promptWARN = !0, t.wordWARN = "支付中", k.createOrders({}, t.order, function () {
                    t.promptWARN = !1, t.promptOK = !0, t.wordOK = "预订成功，请凭验证码入场", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), F(), z(), A("afterCreate")
                }, function (a) {
                    return t.promptWARN = !1, a.data.data ? (t.promptERR = !0, void(t.wordERR = a.data.data)) : void 0
                })
            }
        }, t.auth_codeCreate = function (b) {
            if (t.promptWARN = !0, t.wordWARN = "支付中", 13 == b.keyCode) switch (clearInterval(t.setIntervalId), t.order.payment) {
            case "wx":
                var c = /^[1][0,1,2,3,4,5][0-9]{16}$/;
                if (!c.test(t.order.auth_code)) return t.order.auth_code = "", t.promptWARN = !1, t.promptERR = !0, void(t.wordERR = "支付码错误，重新扫码");
                k.createOrdersMicropay({}, t.order, function (b) {
                    t.order.auth_code = "", t.promptWARN = !1, t.promptOK = !0, t.wordOK = "预订成功，请凭验证码入场", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), F(), z(), A("afterCreate")
                }, function (a) {
                    return t.promptWARN = !1, a.data.data ? (t.promptERR = !0, void(t.wordERR = a.data.data)) : void 0
                });
                break;
            case "alipay":
                var c = /^[25,26,27,28,29,30][0-9]{14,22}$/;
                if (!c.test(t.order.auth_code)) return t.order.auth_code = "", t.promptWARN = !1, t.promptERR = !0, void(t.wordERR = "支付码错误，重新扫码");
                o.createOrders({}, t.order, function (b) {
                    t.order.auth_code = "", t.promptWARN = !1, t.promptOK = !0, t.wordOK = "预订成功，请凭验证码入场", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), F(), z(), A("afterCreate")
                }, function (a) {
                    return t.promptWARN = !1, a.data.data ? (t.promptERR = !0, void(t.wordERR = a.data.data)) : void 0
                })
            }
        }, t.openShowOrderBox = function () {
            t.showOrderBox = !0, t.showOrderBox = !0, t.order.auth_code = "", ("alipay" == t.order.payment || "wx" == t.order.payment) && (t.showCodeBox = !0)
        }, t.choosePayment = function (a) {
            _.each(t.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), t.order.auth_code = "", a.image = "singleChoose_imageYes", t.order.payment = a.value, "alipay" == a.value || "wx" == a.value ? t.showCodeBox = !0 : t.showCodeBox = !1
        }, t.close = function () {
            z()
        }, t.resert = function () {
            z(), A(), t.memberTelOrCard = "", t.members = null, document.getElementById("cardNoBox").focus()
        }, t.closePrompt = function () {
            t.promptERR = !1, t.promptOK = !1, t.promptWARN = !1, t.showAuth_codeBox = !1, clearInterval(t.setIntervalId)
        }, t.chooseFieldFiexible = function (a, b) {
            if (!t.order._member) return t.promptERR = !0, void(t.wordERR = "请先查找会员信息");
            var c = !1;
            if (_.each(t.times, function (a) {
                var b = _.findWhere(a.priceArr, {
                    week: (new Date).getDay()
                });
                return b.unit ? void 0 : (t.promptERR = !0, t.wordERR = "有场次未设置单位,不可订", c = !0, !1)
            }), !c) {
                t.itemDiscount, a.itemDiscount ? t.itemDiscount = a.itemDiscount : t.itemDiscount = t.members[0].cards.length > 0 ? t.members[0].cards[0].discount : 1, t.chooseStartField && (t.chooseStartField.time.bgColor = ""), t.chooseStartField = {
                    field: a,
                    time: b
                }, t.chooseStartField.time.bgColor = "background:#20a0ff;color:#fff;", t.order.orderArr = [];
                var d = new Date,
                    e = d.getHours(),
                    f = d.getMinutes(),
                    g = 60 * e + f;
                g >= 60 * b.startDate && g <= 60 * b.endDate ? f > 30 ? t.order.orderArr.push({
                    date: t.startDate,
                    _field: a._id,
                    startDateHours: e + 1,
                    startDateMins: 0,
                    endDateHours: e + 1,
                    endDateMins: 0
                }) : 30 > f && f > 0 ? t.order.orderArr.push({
                    date: t.startDate,
                    _field: a._id,
                    startDateHours: e,
                    startDateMins: 30,
                    endDateHours: e,
                    endDateMins: 30
                }) : t.order.orderArr.push({
                    date: t.startDate,
                    _field: a._id,
                    startDateHours: e,
                    startDateMins: f,
                    endDateHours: e,
                    endDateMins: f
                }) : (b.startDateMins > 0 && b.startDateMins < 30 ? b.startDateMins = 30 : b.startDateMins > 30 && b.startDateMins < 60 && (b.startDateMins = 0, b.startDateHours++), t.order.orderArr.push({
                    date: t.startDate,
                    _field: a._id,
                    startDateHours: b.startDateHours,
                    startDateMins: b.startDateMins,
                    endDateHours: b.startDateHours,
                    endDateMins: b.startDateMins
                }));
                var h = t.order.orderArr[0];
                t.startTime = h.startDateHours + ":" + (h.startDateMins < 10 ? "0" + h.startDateMins : h.startDateMins), t.lastTime = 0, h = _.merge(h, {
                    _field: a._id,
                    fieldName: a.name,
                    itmeName: t.showItemName,
                    venueName: t.showVenueName,
                    week: y(t.startDate.getDay())
                }), console.log(new Date(t.startDate))
            }
        }, t.openShowFiexibleOrderBox = function () {
            var a = t.order.orderArr[0];
            a = _.merge(a, {
                timeShowDate: a.startDateHours + ":" + (a.startDateMins >= 10 ? a.startDateMins : "0" + a.startDateMins) + "--" + a.endDateHours + ":" + (a.endDateMins >= 10 ? a.endDateMins : "0" + a.endDateMins)
            }), t.showOrderBox = !0, t.showOrderBox = !0, t.order.auth_code = "", ("alipay" == t.order.payment || "wx" == t.order.payment) && (t.showCodeBox = !0)
        };
        var P = function (a) {
                var b = _.cloneDeep(t.order.orderArr[0]),
                    c = parseInt(t.lastTime / 1),
                    d = t.lastTime % 1 * 60,
                    e = [],
                    f = w(Date.now()),
                    g = x(Date.now());
                if (t.startDate.getTime() > f && t.startDate.getTime() < g)
                    for (var h = (new Date).getHours(); h < t.showHours[t.showHours.length - 1].num + 1; h++) e.push(h);
                else if (t.startDate.getTime() > g)
                    for (var h = t.showHours[0].num; h < t.showHours[t.showHours.length - 1].num + 1; h++) e.push(h);
                switch (a) {
                case "startAdd":
                    30 == b.startDateMins ? (b.startDateMins = 0, b.startDateHours += 1) : b.startDateMins = 30;
                    break;
                case "startReduce":
                    30 == b.startDateMins ? b.startDateMins = 0 : (b.startDateMins = 30, b.startDateHours -= 1);
                    break;
                case "lastAdd":
                    30 == d ? (d = 0, c += 1) : d = 30;
                    break;
                case "lastReduce":
                    30 == d ? d = 0 : (d = 30, c -= 1)
                }
                b.startDateMins + d == 60 ? (b.endDateMins = 0, b.endDateHours = b.startDateHours + c + 1) : b.startDateMins + d == 0 ? (b.endDateMins = 0, b.endDateHours = b.startDateHours + c) : (b.endDateMins = 30, b.endDateHours = b.startDateHours + c);
                var i = b.startDateHours == e[0] - 1 && 30 == b.startDateMins,
                    j = b.startDateHours == e[e.length - 1] && 0 == b.startDateMins,
                    k = b.endDateHours == e[e.length - 1] && 30 == b.endDateMins;
                return i || j || k ? !0 : !1
            },
            Q = function () {
                var a = t.order.orderArr[0],
                    b = a.startDateHours + a.startDateMins / 60,
                    c = a.endDateHours + a.endDateMins / 60,
                    d = 0,
                    e = 0,
                    f = t.itemDiscount,
                    g = [];
                _.each(t.times, function (a) {
                    (a.startDate >= b && a.startDate <= c || a.endDate >= b && a.endDate <= c || a.startDate < b && a.endDate > c) && g.push(a)
                });
                for (var h = 0; h < g.length; h++) {
                    var i, j = g[h],
                        k = t.speDay ? parseInt(t.speDay.weekAs) : t.startDate.getDay(),
                        l = _.findWhere(j.priceArr, {
                            week: k
                        });
                    switch (j.startDate < b && j.endDate > b && j.endDate <= c ? "hours" == l.unit && (i = j.endDate - b) : j.startDate >= b && j.endDate <= c ? "hours" == l.unit && (i = j.continueHours) : j.startDate >= b && j.startDate < c && j.endDate > c ? "hours" == l.unit && (i = c - j.startDate) : j.startDate < b && j.endDate > c ? "hours" == l.unit && (i = c - b) : "hours" == l.unit && (i = 0), l.unit) {
                    case "sign":
                        d += 100 * l.price, e += 100 * l.price;
                        break;
                    case "hours":
                        i % 1 > 0 && .5 > i % 1 ? i = parseInt(i / 1) + .5 : i % 1 > .5 && 1 > i % 1 && (i = parseInt(i / 1) + 1), d += l.price * i * f * 100, e += l.price * i * 100
                    }
                    t.order.total = v(d / 100), t.order.subtotal = v(e / 100)
                }
            };
        t.changeStartTime = function (a) {
            if (!t.startTime || "点击场次获取" == t.startTime) return t.promptERR = !0, void(t.wordERR = "先点击场次获取开始时间");
            var b = t.order.orderArr[0];
            if ("add" == a) {
                if (P("startAdd")) return t.promptERR = !0, void(t.wordERR = "超出范围不可选");
                30 == b.startDateMins ? (b.startDateMins = 0, b.startDateHours += 1) : b.startDateMins = 30
            } else {
                if (P("startReduce")) return t.promptERR = !0, void(t.wordERR = "超出范围不可选");
                30 == b.startDateMins ? b.startDateMins = 0 : (b.startDateMins = 30, b.startDateHours -= 1)
            }
            var c = b.startDateMins / 60 + b.startDateHours + t.lastTime;
            c % 1 > 0 && .5 >= c % 1 ? (b.endDateMins = 30, b.endDateHours = parseInt(c / 1)) : c % 1 > .5 && 1 > c % 1 ? (b.endDateMins = 0, b.endDateHours = parseInt(c / 1) + 1) : (b.endDateMins = 0, b.endDateHours = parseInt(c / 1)), t.startTime = b.startDateHours + ":" + (b.startDateMins < 10 ? "0" + b.startDateMins : b.startDateMins), Q()
        }, t.changeLastTime = function (a) {
            if (!t.startTime || "点击场次获取" == t.startTime) return t.promptERR = !0, void(t.wordERR = "先点击场次获取开始时间");
            var b = t.order.orderArr[0];
            if ("add" == a) {
                if (P("lastAdd")) return t.promptERR = !0, void(t.wordERR = "超出范围不可选");
                30 == b.endDateMins ? (b.endDateHours++, b.endDateMins = 0) : b.endDateMins = 30, t.lastTime += .5
            } else {
                if (P("lastReduce")) return t.promptERR = !0, void(t.wordERR = "超出范围不可选");
                if (b.startDateHours == b.endDateHours && b.startDateMins == b.endDateMins) return;
                30 == b.endDateMins ? b.endDateMins = 0 : (b.endDateHours--, b.endDateMins = 30), t.lastTime -= .5
            }
            Q()
        }, t.createFlexible = function () {
            switch (t.order.orderArr[0].price = parseFloat(t.order.subtotal), t.order.orderDate || (t.order.orderDate = t.startDate), t.order.orderDate = new Date(t.order.orderDate).getTime(), t.order.payment) {
            case "wx":
            case "alipay":
                t.order.spbill_create_ip = "122.224.134.196", t.showAuth_codeBox = !0, document.getElementById("auth_code").focus();
                break;
            case "cash":
            case "card":
            case "pos":
            case "check":
            case "member":
                t.showOrderBox = !1, t.promptWARN = !0, t.wordWARN = "支付中", k.createOrders({}, t.order, function (b) {
                    t.promptWARN = !1, t.promptOK = !0, t.wordOK = "预订成功，请凭验证码入场", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), F(), z(), A("afterCreate")
                }, function (a) {
                    return t.promptWARN = !1, a.data.data ? (t.promptERR = !0, void(t.wordERR = a.data.data)) : void 0
                })
            }
        };
        t.createMember = function () {
            return t.member.name ? t.member.tel ? void n.create({}, t.member, function (a) {
                var b = t.memberTelOrCard;
                z(), A(), t.members = [a.data.member], t.members.length > 0 && (t.showMemberInfo = !0, t.order._member = t.members[0]._id), t.memberTelOrCard = b
            }, function (a) {
                return "ValidationError: 该号码已被使用." == a.data.data ? (t.promptERR = !0, void(t.wordERR = "该号码已被使用")) : "数据错误：手机格式错误" == a.data.data ? (t.promptERR = !0, void(t.wordERR = "手机格式错误")) : void 0
            }) : (t.promptERR = !0, void(t.wordERR = "请填写手机号")) : (t.promptERR = !0, void(t.wordERR = "请填写名称"))
        }, t.changeRechargeType = function (a) {
            t.chargeCardNum = "", t.chargeCardPassword = "", t.rechargeType = a, "speCard" == a && l.index({
                isUsed: !0
            }, function (a) {
                t.venues_clone = a.data.venues, _.each(t.venues_clone, function (a) {
                    a.image = "singleChoose_imageNo2"
                }), t.chargeVenue = t.venues_clone[0], t.venues_clone[0].image = "singleChoose_imageYes2"
            }, function () {})
        }, t.openShowRechargeBox = function (a) {
            t.needIdCard = a, t.showRechargeBox = !0, t.paymentArr = [{
                name: "支付宝",
                value: "alipay",
                image: "singleChoose_imageYes"
            }, {
                name: "微信",
                value: "wx",
                image: "singleChoose_imageNo"
            }, {
                name: "现金",
                value: "cash",
                image: "singleChoose_imageNo"
            }, {
                name: "支票",
                value: "check",
                image: "singleChoose_imageNo"
            }, {
                name: "转账",
                value: "card",
                image: "singleChoose_imageNo"
            }, {
                name: "POS机",
                value: "pos",
                image: "singleChoose_imageNo"
            }], t.rechargePayment = "alipay", t.showCardName = t.cards[0].name + "(" + t.cards[0].price + "元)", t.chooseCardId = t.cards[0]._id, t.rechargeType = "cash"
        }, t.chooseCard = function (a) {
            t.openChooseCardBox = !1, t.showCardName = a.name + "(" + a.price + "元)", t.chooseCardId = a._id
        }, t.chooseRechargePayment = function (a) {
            _.each(t.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", t.rechargePayment = a.value
        }, t.recharge = function () {
            if ("idCard" == t.needIdCard) {
                if (!t.idCard) return t.promptERR = !0, void(t.wordERR = "请输入身份证号");
                n.update({
                    id: t.members[0]._id
                }, {
                    idCard: t.idCard
                }, function () {
                    t.showRechargeBox = !1, t.promptOK = !0, t.wordOK = "认证成功", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), t.idCard = "", t.checkMember(t.members[0]._id)
                }, function () {})
            } else if ("cash" == t.rechargeType) switch (t.rechargePayment) {
            case "wx":
            case "alipay":
                t.showAuth_codeBox = !0, t.rechargeAuth_code = "", t.rechargeSpbill_create_ip = "122.224.134.196", t.setIntervalId = setInterval(function () {
                    document.getElementById("rechargeAuth_code").focus()
                }, 100);
                break;
            case "cash":
            case "check":
            case "card":
            case "pos":
                t.showRechargeBox = !1, t.promptWARN = !0, t.wordWARN = "支付中";
                var b = {
                    _card: t.chooseCardId,
                    payment: t.rechargePayment
                };
                n.addCard({
                    id: t.members[0]._id
                }, b, function (b) {
                    t.promptWARN = !1, t.promptOK = !0, t.wordOK = "充值成功", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), t.idCard = "", t.checkMember(t.members[0]._id)
                }, function (a) {})
            } else {
                if (!t.chargeCardNum) return t.promptERR = !0, void(t.wordERR = "请输入充值卡卡号");
                if (!t.chargeCardPassword) return t.promptERR = !0, void(t.wordERR = "请输入充值卡密码");
                var c = {
                    cardNum: t.chargeCardNum,
                    password: t.chargeCardPassword
                };
                t.chargeVenue && "speCard" == t.rechargeType && (c = _.merge(c, {
                    _venue: t.chargeVenue._id
                })), q.charge({
                    id: t.members[0]._id
                }, c, function (b) {
                    t.showRechargeBox = !1, t.promptOK = !0, t.wordOK = b.data.data, setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), t.checkMember(t.members[0]._id), t.chargeVenue = "", t.chargeCardNum = "", t.chargeCardPassword = "", t.rechargeType = "cash"
                }, function (a) {
                    "找不到对象：card" == a.data.data ? (t.promptERR = !0, t.wordERR = "充值卡不存在或已使用") : (t.promptERR = !0, t.wordERR = a.data.data)
                })
            }
        }, t.rechargeAuth_codeCreate = function (b) {
            if (t.promptWARN = !0, t.wordWARN = "支付中", 13 == b.keyCode) switch (t.showRechargeBox = !1, t.showAuth_codeBox = !1, clearInterval(t.setIntervalId), t.rechargePayment) {
            case "wx":
                var c = /^[1][0,1,2,3,4,5][0-9]{16}$/;
                if (!c.test(t.rechargeAuth_code)) return t.rechargeAuth_code = "", t.promptWARN = !1, t.promptERR = !0, void(t.wordERR = "支付码错误，重新扫码");
                var d = {
                    _member: t.members[0]._id,
                    _card: t.chooseCardId,
                    auth_code: t.rechargeAuth_code,
                    spbill_create_ip: t.rechargeSpbill_create_ip,
                    payment: "wx"
                };
                p.pay(d, function (b) {
                    t.rechargeAuth_code = "", t.promptWARN = !1, t.promptOK = !0, t.wordOK = "充值成功", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), t.idCard = "", t.checkMember(t.members[0]._id)
                }, function (a) {
                    return t.promptWARN = !1, a.data.data ? (t.promptERR = !0, void(t.wordERR = a.data.data)) : void 0
                });
                break;
            case "alipay":
                var c = /^[25,26,27,28,29,30][0-9]{14,22}$/;
                if (!c.test(t.rechargeAuth_code)) return t.rechargeAuth_code = "", t.promptWARN = !1, t.promptERR = !0, void(t.wordERR = "支付码错误，重新扫码");
                var d = {
                    _member: t.members[0]._id,
                    _card: t.chooseCardId,
                    auth_code: t.rechargeAuth_code,
                    payment: "alipay"
                };
                o.pay(d, function (b) {
                    t.rechargeAuth_code = "", t.promptWARN = !1, t.promptOK = !0, t.wordOK = "充值成功", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), t.idCard = "", t.checkMember(t.members[0]._id)
                }, function (a) {
                    return t.promptWARN = !1, a.data.data ? (t.promptERR = !0, void(t.wordERR = a.data.data)) : void 0
                })
            }
        }, t.chooseChargeVenue = function (a) {
            t.chargeVenue ? t.chargeVenue._id == a._id ? (t.chargeVenue.image = "singleChoose_imageNo2", t.chargeVenue = "") : (t.chargeVenue.image = "singleChoose_imageNo2", t.chargeVenue = a, t.chargeVenue.image = "singleChoose_imageYes2") : (t.chargeVenue = a, t.chargeVenue.image = "singleChoose_imageYes2")
        }, t.enterCheck = function (a) {
            13 == a.keyCode && t.checkMember()
        }, B()
    }
    angular.module("fieldApp").controller("FmFieldBookCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Time", "Field", "Orderlist", "Venue", "Item", "Member", "Alipay", "Card", "Tucard", "Membertype"]
}(),
function () {
    "use strict";

    function a(a) {
        a.state("fm-field-book", {
            params: {
                value: "field",
                sencond: "book"
            },
            url: "/fm/field/book",
            templateUrl: "app/fieldmanager/field/once/field-book.html",
            controller: "FmFieldBookCtrl",
            controllerAs: "fmFieldBookCtrl",
            "abstract": !0
        }).state("fm-field-book.once", {
            url: "/once?state",
            templateUrl: "app/fieldmanager/field/once/field-book-once.html"
        }).state("fm-field-book.flexible", {
            url: "/flexible?state",
            templateUrl: "app/fieldmanager/field/once/field-book-flexible.html"
        }).state("fm-field-longbook", {
            params: {
                value: "field",
                sencond: "book"
            },
            url: "/fm/field/longbook",
            templateUrl: "app/fieldmanager/field/long/field-book-long.html",
            controller: "FmFieldLongBookCtrl",
            controllerAs: "fmFieldLongBookCtrl"
        }).state("fm-field-cancelbook", {
            params: {
                value: "field",
                sencond: "book"
            },
            url: "/fm/field/cancelbook",
            templateUrl: "app/fieldmanager/field/cancel/field-book-cancel.html",
            controller: "FmFieldCancelBookCtrl",
            controllerAs: "fmFieldCancelBookCtrl"
        }).state("fm-product", {
            params: {
                value: "field",
                sencond: "product"
            },
            url: "/fm/product",
            templateUrl: "app/fieldmanager/product/product.html",
            controller: "FmProductCtrl",
            controllerAs: "fmProductCtrl",
            "abstract": !0
        }).state("fm-product.sale", {
            url: "/sale?state",
            templateUrl: "app/fieldmanager/product/product-sale.html"
        }).state("fm-product.record", {
            url: "/record?state",
            templateUrl: "app/fieldmanager/product/product-record.html"
        }).state("fm-finance-cashall", {
            params: {
                value: "finance"
            },
            url: "/fm/finance/cashall",
            templateUrl: "app/fieldmanager/finance/cashall/finance-cashall.html",
            controller: "FmFinanceCashallCtrl",
            controllerAs: "fmFinanceCashallCtrl"
        }).state("fm-finance-field", {
            params: {
                value: "finance"
            },
            url: "/fm/finance/field",
            templateUrl: "app/fieldmanager/finance/field/finance-field.html",
            controller: "FmFinanceFieldCtrl",
            controllerAs: "fmFinanceFieldCtrl"
        }).state("fm-finance-shop", {
            params: {
                value: "finance"
            },
            url: "/fm/finance/shop",
            templateUrl: "app/fieldmanager/finance/shop/finance-shop.html",
            controller: "FmFinanceShopCtrl",
            controllerAs: "fmFinanceShopCtrl"
        }).state("fm-finance-prep", {
            params: {
                value: "finance"
            },
            url: "/fm/finance/prep",
            templateUrl: "app/fieldmanager/finance/preporder/finance-preporder.html",
            controller: "FmFinancePrepCtrl",
            controllerAs: "fmFinancePrepCtrl"
        }).state("fm-service-count", {
            params: {
                value: "finance"
            },
            url: "/fm/service/count",
            templateUrl: "app/fieldmanager/finance/service/service-count.html",
            controller: "FmServiceCountCtrl",
            controllerAs: "fmServiceCountCtrl"
        }).state("fm-member", {
            params: {
                value: "member",
                sencond: "member"
            },
            url: "/fm/member",
            templateUrl: "app/fieldmanager/member/member.html",
            controller: "FmMemberCtrl",
            controllerAs: "fmMemberCtrl"
        }).state("fm-docord", {
            params: {
                value: "docord"
            },
            url: "/fm/docord",
            templateUrl: "app/fieldmanager/member/member-docord.html",
            controller: "FmDocordCtrl",
            controllerAs: "fmDocordCtrl"
        }).state("fm-member-detail", {
            params: {
                value: "member"
            },
            url: "/fm/member/:id",
            templateUrl: "app/fieldmanager/member/member-detail.html",
            controller: "FmMemberDetailCtrl",
            controllerAs: "fmMemberDetailCtrl",
            "abstract": !0
        }).state("fm-member-detail.info", {
            url: "/member/detail/info?state",
            templateUrl: "app/fieldmanager/member/member-detail-info.html"
        }).state("fm-member-detail.record", {
            url: "/member/detail/record",
            templateUrl: "app/fieldmanager/member/member-detail-record.html"
        }).state("fm-vip-table", {
            params: {
                value: "member",
                sencond: "memberservice"
            },
            url: "/fm/swim/vip/table",
            templateUrl: "app/fieldmanager/member/membership-card.html",
            controller: "FmVipTableCtrl",
            controllerAs: "fmVipTableCtrl"
        }).state("fm-inventory", {
            params: {
                value: "inventory"
            },
            url: "/fm/inventory",
            templateUrl: "app/fieldmanager/shop/inventory.html",
            controller: "FmInventoryCtrl",
            controllerAs: "fmInventoryCtrl",
            "abstract": !0
        }).state("fm-inventory.stock", {
            url: "/stock?state",
            templateUrl: "app/fieldmanager/shop/inventory-stock.html"
        }).state("fm-inventory.record", {
            url: "/record?state",
            templateUrl: "app/fieldmanager/shop/inventory-record.html"
        }).state("fm-sell", {
            params: {
                value: "sell",
                sencond: "stock"
            },
            url: "/fm/sell",
            templateUrl: "app/fieldmanager/shop/sell.html",
            controller: "FmSellCtrl",
            controllerAs: "fmSellCtrl",
            "abstract": !0
        }).state("fm-sell.sale", {
            url: "/sale?state",
            templateUrl: "app/fieldmanager/shop/sell-sale.html"
        }).state("fm-sell.record", {
            url: "/record?state",
            templateUrl: "app/fieldmanager/shop/sell-record.html"
        }).state("fm-purchase", {
            params: {
                value: "sell",
                sencond: "purchase"
            },
            url: "/fm/purchase",
            templateUrl: "app/fieldmanager/stock/purchase.html",
            controller: "FmPurchaseCtrl",
            controllerAs: "fmPurchaseCtrl"
        }).state("fm-stock", {
            params: {
                value: "sell",
                sencond: "purchase"
            },
            url: "/fm/stock",
            templateUrl: "app/fieldmanager/stock/stock.html",
            controller: "FmStockCtrl",
            controllerAs: "fmStockCtrl"
        }).state("fm-shop-form", {
            params: {
                value: "sell",
                sencond: "stock"
            },
            url: "/fm/shop/form",
            templateUrl: "app/fieldmanager/stock/shop-form.html",
            controller: "FmShopFormCtrl",
            controllerAs: "fmShopFormCtrl"
        }).state("fm-purchase-record", {
            params: {
                value: "sell",
                sencond: "stock"
            },
            url: "/fm/purchase/record",
            templateUrl: "app/fieldmanager/stock/purchase-record.html",
            controller: "FmPurchaseRecordCtrl",
            controllerAs: "fmPurchaseRecordCtrl"
        }).state("fm-return-record", {
            params: {
                value: "sell",
                sencond: "stock"
            },
            url: "/fm/return/record",
            templateUrl: "app/fieldmanager/stock/return-record.html",
            controller: "FmReturnRecordCtrl",
            controllerAs: "fmReturnRecordCtrl"
        }).state("fm-staff", {
            params: {
                value: "staff"
            },
            url: "/fm/staff",
            templateUrl: "app/fieldmanager/staff/staff.html",
            controller: "FmStaffCtrl",
            controllerAs: "fmStaffCtrl",
            "abstract": !0
        }).state("fm-staff.all", {
            url: "/all",
            templateUrl: "app/fieldmanager/staff/staff-all.html"
        }).state("fm-staff.explain", {
            url: "/explain",
            templateUrl: "app/fieldmanager/staff/staff-explain.html"
        }).state("fm-setting-person", {
            params: {
                value: "setting",
                sencond: "person"
            },
            url: "/fm/setting/person",
            templateUrl: "app/fieldmanager/setting/setting-person.html",
            controller: "FmSettingPersonCtrl",
            controllerAs: "fmSettingPersonCtrl"
        }).state("fm-setting-item", {
            params: {
                value: "setting",
                sencond: "item"
            },
            url: "/fm/setting/item",
            templateUrl: "app/fieldmanager/setting/setting-item.html",
            controller: "FmSettingItemCtrl",
            controllerAs: "fmSettingItemCtrl"
        }).state("fm-setting-vip", {
            params: {
                value: "setting",
                sencond: "vip",
                third: "vip"
            },
            url: "/fm/setting/vip",
            templateUrl: "app/fieldmanager/setting/setting-vip.html",
            controller: "FmSettingVipCtrl",
            controllerAs: "fmSettingVipCtrl"
        }).state("fm-setting-card", {
            params: {
                value: "setting",
                sencond: "vip",
                third: "card"
            },
            url: "/fm/setting/card",
            templateUrl: "app/fieldmanager/setting/setting-card.html",
            controller: "FmSettingCardCtrl",
            controllerAs: "fmSettingCardCtrl"
        }).state("fm-setting-special", {
            params: {
                value: "setting",
                sencond: "vip",
                third: "special"
            },
            url: "/fm/setting/special",
            templateUrl: "app/fieldmanager/setting/setting-special.html",
            controller: "FmSettingSpecialCtrl",
            controllerAs: "fmSettingSpecialCtrl"
        }).state("fm-setting-time-card", {
            params: {
                value: "setting",
                sencond: "vip",
                third: "timecard"
            },
            url: "/fm/setting/timecard",
            templateUrl: "app/fieldmanager/setting/setting-time-card.html",
            controller: "FmTimeCardCtrl",
            controllerAs: "fmTimeCardCtrl"
        }).state("fm-setting-date-card", {
            params: {
                value: "setting",
                sencond: "vip",
                third: "datecard"
            },
            url: "/fm/setting/datecard",
            templateUrl: "app/fieldmanager/setting/setting-date-card.html",
            controller: "FmDateCardCtrl",
            controllerAs: "fmDateCardCtrl"
        }).state("fm-setting-service-tag", {
            params: {
                value: "setting",
                sencond: "vip",
                third: "servicetag"
            },
            url: "/fm/setting/servicetag",
            templateUrl: "app/fieldmanager/setting/setting-service-tag.html",
            controller: "FmDateServiceTagCtrl",
            controllerAs: "fmDateServiceTagCtrl"
        }).state("fm-setting-venue-register", {
            params: {
                value: "setting",
                sencond: "venue",
                third: "venue"
            },
            url: "/fm/setting/venue/register",
            templateUrl: "app/fieldmanager/setting/setting-venue-register.html",
            controller: "FmVenueRegisterCtrl",
            controllerAs: "fmVenueRegisterCtrl"
        }).state("fm-setting-field-register", {
            params: {
                value: "setting",
                sencond: "field",
                third: "field"
            },
            url: "/fm/setting/field/register",
            templateUrl: "app/fieldmanager/setting/setting-field-register.html",
            controller: "FmFieldRegisterCtrl",
            controllerAs: "fmFieldRegisterCtrl"
        }).state("fm-setting-supply", {
            params: {
                value: "sell",
                sencond: "sale"
            },
            url: "/fm/setting/shop/supply",
            templateUrl: "app/fieldmanager/setting/setting-supply.html",
            controller: "FmSupplyCtrl",
            controllerAs: "fmSupplyCtrl"
        }).state("fm-setting-product-info", {
            params: {
                value: "sell",
                sencond: "sale"
            },
            url: "/fm/setting/shop/info",
            templateUrl: "app/fieldmanager/setting/setting-product-info.html",
            controller: "FmProductInfoCtrl",
            controllerAs: "fmProductInfoCtrl"
        }).state("fm-setting-time-register", {
            params: {
                value: "setting",
                sencond: "field",
                third: "time"
            },
            url: "/fm/setting/time/register",
            templateUrl: "app/fieldmanager/setting/setting-time-register.html",
            controller: "FmTimeRegisterCtrl",
            controllerAs: "fmTimeRegisterCtrl"
        }).state("fm-setting-price-register", {
            params: {
                value: "setting",
                sencond: "field",
                third: "price"
            },
            url: "/fm/setting/price/register",
            templateUrl: "app/fieldmanager/setting/setting-price-register.html",
            controller: "FmPriceRegisterCtrl",
            controllerAs: "fmPriceRegisterCtrl"
        }).state("fm-setting-service", {
            params: {
                value: "setting",
                sencond: "service"
            },
            url: "/fm/setting/service",
            templateUrl: "app/fieldmanager/setting/setting-service.html",
            controller: "FmSettingServiceCtrl",
            controllerAs: "fmSettingServiceCtrl"
        }).state("fm-setting-type", {
            params: {
                value: "setting",
                sencond: "service"
            },
            url: "/fm/setting/type",
            templateUrl: "app/fieldmanager/setting/setting-type.html",
            controller: "FmSettingTypeCtrl",
            controllerAs: "fmSettingTypeCtrl"
        }).state("fm-setting-holiday", {
            params: {
                value: "setting",
                sencond: "field",
                third: "holiday"
            },
            url: "/fm/setting/holiday",
            templateUrl: "app/fieldmanager/setting/setting-holiday.html",
            controller: "FmSettingHolidayCtrl",
            controllerAs: "fmSettingHolidayCtrl"
        }).state("fm-setting-ticket", {
            params: {
                value: "setting",
                sencond: "ticket"
            },
            url: "/fm/setting/ticket",
            templateUrl: "app/fieldmanager/setting/setting-ticket.html",
            controller: "FmSettingTicketCtrl",
            controllerAs: "fmSettingTicketCtrl"
        }).state("fm-setting-tag", {
            params: {
                value: "setting",
                sencond: "tag"
            },
            url: "/fm/setting/tag",
            templateUrl: "app/fieldmanager/setting/setting-tag.html",
            controller: "FmSettingTagCtrl",
            controllerAs: "fmSettingTagCtrl"
        }).state("fm-setting-ticket-cash", {
            params: {
                value: "setting",
                sencond: "ticketcash"
            },
            url: "/fm/setting/ticket-cash",
            templateUrl: "app/fieldmanager/setting/setting-ticket-cash.html",
            controller: "FmSettingTicketCashCtrl",
            controllerAs: "fmSettingTicketCashCtrl"
        }).state("fm-setting-rule", {
            params: {
                value: "setting",
                sencond: "rule"
            },
            url: "/fm/setting/rule",
            templateUrl: "app/fieldmanager/setting/setting-rule.html",
            controller: "FmSettingRuleCtrl",
            controllerAs: "fmSettingRuleCtrl"
        })
    }
    angular.module("fieldApp").config(a), a.$inject = ["$stateProvider"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        var p = this;
        p.titleState = f.params.state || "field";
        var q = function () {
                k.index({}, function (a) {
                    p.venues = a.data.venues, _.each(p.venues, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), p.chooseVenueName(p.venues[0])
                }, function () {})
            },
            r = function () {
                e.index({
                    role: "checkStand"
                }, function (a) {
                    s(a.data.users)
                }, function () {})
            },
            s = function (a) {
                e.get({}, function (b) {
                    var c = b.data.user._organization ? b.data.user._organization : b.data.user._id;
                    e.getOrgInfo({
                        id: c
                    }, function (b) {
                        p.workers = [{
                            name: "微信",
                            _id: "wx"
                        }].concat(a), _.each(p.workers, function (a) {
                            a.image = "manyChoose_imageNo"
                        }), q()
                    }, function () {})
                }, function () {})
            },
            t = function () {
                p.hasChooseVenue = [], p.hasChooseItem = [], p.hasChooseWorker = [], _.each(p.items, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseItem.push(a)
                }), _.each(p.venues, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseVenue.push(a)
                }), _.each(p.workers, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseWorker.push(a)
                })
            },
            u = function () {
                t(), p.hasChooseItem.length > 0 && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "item" : 0 == p.hasChooseItem.length && p.hasChooseVenue.length > 0 && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "venue" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && p.hasChooseWorker.length > 0 && !p.whatFirst ? p.whatFirst = "worker" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && (p.whatFirst = ""), 0 == p.hasChooseItem.length && "item" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseVenue.length && "venue" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseWorker.length && "worker" == p.whatFirst && (p.whatFirst = "")
            },
            v = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    _.each(p.venues, function (b) {
                        var d = _.findWhere(b.items, {
                            _id: a._id
                        });
                        return d ? void c.push(b) : void 0
                    })
                }), b(c)
            },
            w = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    a.venues && a.venues.length > 0 ? _.each(p.venues, function (b) {
                        var d = _.findWhere(a.venues, {
                            _id: b._id
                        });
                        if (d) {
                            var e = _.findWhere(c, {
                                _id: d._id
                            });
                            if (!e) return void c.push(b)
                        }
                    }) : c = p.venues
                }), b(c)
            },
            x = function (a, b) {
                var c = [];
                return _.each(a, function (a) {
                    _.each(a.items, function (b) {
                        var d = _.findWhere(c, {
                            _id: b._id
                        });
                        d || (c = c.concat(a.items))
                    })
                }), b ? void b(c) : c
            },
            y = function (a, b) {
                var c = [];
                return _.each(p.workers, function (b) {
                    b.venues && b.venues.length > 0 ? _.each(a, function (a) {
                        var d = _.findWhere(b.venues, {
                            _id: a._id
                        });
                        d && c.indexOf(b) < 0 && c.push(b)
                    }) : b.venues || c.push(b)
                }), b ? void b(c) : c
            };
        p.chooseItemName = function (a) {
            B(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseItem.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseItem.splice(p.hasChooseItem.indexOf(a), 1)), u(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "item" == p.whatFirst && v(p.hasChooseItem, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), y(a, function (a) {
                    _.each(p.workers, function (b) {
                        -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                    })
                })
            }), F()
        }, p.chooseVenueName = function (a) {
            if (B(), "manyChoose_imageNo" == a.image) a.image = "manyChoose_imageYes", p.hasChooseVenue.push(a);
            else {
                if (1 == p.hasChooseVenue.length) return p.promptERR = !0, void(p.wordERR = "必须选择一个场馆");
                a.image = "manyChoose_imageNo", p.hasChooseVenue.splice(p.hasChooseVenue.indexOf(a), 1)
            }
            u(), p.whatFirst || (_.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "venue" == p.whatFirst && (x(p.hasChooseVenue, function (a) {
                _.each(p.items, function (b) {
                    var c = _.findWhere(a, {
                        _id: b._id
                    });
                    c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                })
            }), y(p.hasChooseVenue, function (a) {
                _.each(p.workers, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                })
            })), F()
        }, p.chooseWorkerName = function (a) {
            B(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseWorker.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseWorker.splice(p.hasChooseWorker.indexOf(a), 1)), u(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            })), "worker" == p.whatFirst && w(p.hasChooseWorker, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), x(a, function (a) {
                    _.each(p.items, function (b) {
                        var c = _.findWhere(a, {
                            _id: b._id
                        });
                        c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                    })
                })
            }), F()
        };
        var z = function () {
                A(), r()
            },
            A = function () {
                p.hasChooseItem = [], p.hasChooseVenue = [], p.hasChooseWorker = [], p.searchVenueIdArr = [], p.searchItemIdArr = [], p.searchType = "", p.searchWorkerId = "", p.searchPayment = "", p.searchMemberId = "", p.searchMemberType = "", p.whatFirst = "", p.venueArr = [], p.itemArr = [], p.errState = "add", p.errRecordId = "", p.errPrice = "", p.errRemark = "", p.showTypeName = "类型", p.showWorkerName = "提交人", p.showPaymentName = "支付方式", p.showMemberName = "用户名", p.showMemberTypeName = "类型", p.startDate = new Date, p.endDate = new Date, p.paymentArr = [{
                    name: "全部"
                }, {
                    name: "现金支付",
                    value: "cash"
                }, {
                    name: "微信支付",
                    value: "wx"
                }, {
                    name: "支付宝",
                    value: "alipay"
                }, {
                    name: "转账支付",
                    value: "card"
                }, {
                    name: "支票支付",
                    value: "check"
                }, {
                    name: "POS机支付",
                    value: "pos"
                }], _.each(p.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.venues, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.workers, function (a) {
                    a.image = "manyChoose_imageNo"
                }), p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            B = function () {
                p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            C = function () {
                p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1, p.showChooseItemBox = !1, p.showChooseVenueBox = !1, p.showChooseTypeBox = !1, p.showChooseWorkerBox = !1, p.showChooseMemberBox = !1, p.showChoosePaymentBox = !1, p.showChooseMemberTypeBox = !1, p.showChooseWorkerBox = !1, p.showErrChangeBox = !1, p.showPreview = !1, p.showDetail = !1
            },
            D = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            };
        p.pageChanged = function () {
            G()
        }, p.closeChooseStartDateBox = function () {
            C(), B(), setTimeout(function () {
                F()
            }, 100)
        }, p.closeChooseEndDateBox = function () {
            C(), B(), setTimeout(function () {
                F()
            }, 100)
        }, p.choosePaymentName = function (a) {
            p.showChoosePaymentBox = !1, B(), p.showPaymentName = a.name, p.searchPayment = a.value, G()
        }, p.openErrChangeBox = function (a) {
            C(), p.showErrChangeBox = !0, p.errRecordId = a
        }, p.chooseErrState = function (a) {
            "add" == a ? p.errState = "add" : p.errState = "reduce"
        }, p.changeErrRemark = function () {
            if (!p.errPrice) return p.promptERR = !0, void(p.wordERR = "请填写纠错金额");
            if (!p.errRemark) return p.promptERR = !0, void(p.wordERR = "请填写纠错备注");
            var a = {
                _record: p.errRecordId,
                state: p.errState,
                cost: parseFloat(p.errPrice),
                remark: p.errRemark
            };
            i.create({}, a, function () {
                G()
            }, function () {})
        }, p.closePrompt = function () {
            p.promptOK = !1, p.promptERR = !1, p.promptWARN = !1, p.searchWorkerIdArr = [], p.searchPayment = ""
        };
        var E = function (a) {
                var b = 0;
                return b = D((100 * b + 100 * p.resultType.statuses.ticket[a]) / 100), b = D((100 * b + 100 * p.resultType.statuses.memberService[a]) / 100), b = D((100 * b + 100 * p.resultType.statuses.cardFee[a]) / 100), b = D((100 * b + 100 * p.resultType.statuses.bail[a]) / 100), b = D((100 * b + 100 * p.resultType.statuses.refundBail[a]) / 100)
            },
            F = function () {
                p.promptWARN = !0, p.wordWARN = "统计中";
                var a = {
                        startDate: p.startDate.getTime(),
                        endDate: p.endDate.getTime()
                    },
                    b = {
                        startDate: p.startDate.getTime(),
                        endDate: p.endDate.getTime(),
                        status: "makeCard",
                        all: "all"
                    },
                    c = {
                        startDate: p.startDate.getTime(),
                        endDate: p.endDate.getTime(),
                        state: "realNumber",
                        all: "all"
                    };
                p.dateName = "", p.dateName += p.startDate.getFullYear() + "年", p.dateName += p.startDate.getMonth() + 1 > 9 ? p.startDate.getMonth() + 1 + "月" : "0" + (p.startDate.getMonth() + 1) + "月", p.dateName += p.startDate.getDate() > 9 ? p.startDate.getDate() + "日-" : "0" + p.startDate.getDate() + "日-", p.dateName += p.endDate.getFullYear() + "年", p.dateName += p.endDate.getMonth() + 1 > 9 ? p.endDate.getMonth() + 1 + "月" : "0" + (p.endDate.getMonth() + 1) + "月", p.dateName += p.endDate.getDate() > 9 ? p.endDate.getDate() + "日" : "0" + p.endDate.getDate() + "日";
                var d = [];
                p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                    "manyChoose_imageYes" == a.image && (p.searchVenueIdArr.push(a._id), d.push(a))
                }), p.venueName = "";
                for (var e = 0; e < d.length; e++) p.venueName += (0 == e ? "" : "/") + d[e].name;
                p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                    venues: p.searchVenueIdArr
                }));
                var f = [];
                p.searchWorkerIdArr = [], _.each(p.workers, function (a) {
                    "manyChoose_imageYes" == a.image && (p.searchWorkerIdArr.push(a._id), f.push(a))
                }), p.workerName = "";
                for (var e = 0; e < f.length; e++) p.workerName += (0 == e ? "" : "/") + f[e].name;
                console.log(p.workerName), p.searchWorkerIdArr.length > 0 && (a = _.merge(a, {
                    workers: p.searchWorkerIdArr
                }));
                var g = [];
                o.business(a, function (d) {
                    p.result = d.data.statistic, _.each(p.result, function (a) {
                        "wx" != a._worker && "all" != a._worker && g.push(a._worker)
                    }), b = _.merge(b, {
                        workers: g
                    }), c = _.merge(c, {
                        realWorkers: g
                    }), n.index(b, function (b) {
                        var d = b.data.cardRecords;
                        _.each(d, function (a) {
                            var b = _.findWhere(p.result, {
                                    _worker: a._worker
                                }),
                                c = _.findWhere(p.result, {
                                    _worker: "all"
                                });
                            b && (b.issueCardCount = b.issueCardCount ? b.issueCardCount + 1 : 1, c.issueCardCount = c.issueCardCount ? c.issueCardCount + 1 : 1)
                        }), l.index(c, function (b) {
                            var c = b.data.members;
                            _.each(c, function (a) {
                                var b = _.findWhere(p.result, {
                                        _worker: a._realWorker
                                    }),
                                    c = _.findWhere(p.result, {
                                        _worker: "all"
                                    });
                                b && (b.realMemberCount = b.realMemberCount ? b.realMemberCount + 1 : 1, c.realMemberCount = c.realMemberCount ? c.realMemberCount + 1 : 1)
                            }), a.venues = ["5a1e4774138f87e51c2e79e9"], o.type(a, function (a) {
                                p.resultType = a.data.statistic[a.data.statistic.length - 1], p.resultType.statuses.cardFee.quantity = p.resultType.statuses.cardFee.subtotal / 20, p.resultType.statuses.bail.quantity = p.resultType.statuses.bail.subtotal / 20, p.resultType.statuses.refundBail.quantity = p.resultType.statuses.refundBail.subtotal / -20,
                                    p.resultType.wxTotal = E("wx"), p.resultType.alipayTotal = E("alipay"), p.resultType.cashTotal = E("cash"), p.resultType.cardTotal = E("card"), p.resultType.checkTotal = E("check"), p.resultType.posTotal = E("pos"), p.resultType.subtotal = 0, p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.wxTotal) / 100), p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.alipayTotal) / 100), p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.cashTotal) / 100), p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.cardTotal) / 100), p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.checkTotal) / 100), p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.posTotal) / 100), p.searchVenueIdArr.indexOf("5a1e4774138f87e51c2e79e9") > -1 ? p.baoyugang = !0 : p.baoyugang = !1, p.promptWARN = !1
                            }, function () {})
                        }, function () {})
                    }, function () {})
                }, function () {})
            };
        p["export"] = function (a) {
            var b = p.dateName + p.venueName + "的" + p.workerName + "收入汇总表";
            setTimeout(function () {
                execl1(a, b)
            }, 100)
        }, p.initCondition = function (a) {
            a ? "微信" == a ? p.searchWorkerIdArr = ["wx"] : p.searchWorkerName = a : (p.searchWorkerIdArr = [], _.each(p.workers, function (a) {
                "manyChoose_imageYes" == a.image && p.searchWorkerIdArr.push(a._id)
            })), G()
        };
        var G = function () {
            var a = {
                page: p.pagination.page,
                itemsPerPage: p.pagination.itemsPerPage,
                state: "other"
            };
            p.startDate && p.endDate && (a = _.merge(a, {
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            })), p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && p.searchVenueIdArr.push(a._id)
            }), p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: p.searchVenueIdArr
            })), p.searchWorkerIdArr.length > 0 && (a = _.merge(a, {
                workers: p.searchWorkerIdArr
            })), p.searchWorkerName && (a = _.merge(a, {
                workerName: p.searchWorkerName
            })), p.searchPayment && (a = _.merge(a, {
                payments: [p.searchPayment]
            })), i.index(a, function (a) {
                if (p.recordsDetail = a.data.records, !(p.recordsDetail.length > 0)) return p.promptERR = !0, void(p.wordERR = "暂无记录");
                p.showDetail = !0;
                var b = 1;
                _.each(p.recordsDetail, function (a) {
                    if (a.index = b, b++, a.state) a.cost = ("add" == a.state ? "+" : "-") + a.cost;
                    else switch (a.status) {
                    case "pay":
                    case "buy":
                    case "buyProduct":
                    case "buyShopProduct":
                    case "buySpe":
                    case "bindCard":
                        a.cost = "+" + a.cost;
                        break;
                    case "refund":
                    case "cardRefund":
                    case "refundProduct":
                    case "refundShopProduct":
                    case "refundSpe":
                        a.cost = "-" + a.cost
                    }
                    switch (a.payment) {
                    case "wx":
                        a.payment = "微信支付";
                        break;
                    case "card":
                        a.payment = "转账支付";
                        break;
                    case "cash":
                        a.payment = "现金支付";
                        break;
                    case "alipay":
                        a.payment = "支付宝支付";
                        break;
                    case "check":
                        a.payment = "支票支付";
                        break;
                    case "pos":
                        a.payment = "POS机支付";
                        break;
                    default:
                        a.payment = "无"
                    }
                });
                var c = a.data.count;
                p.pagination.totalItems = c, p.pagination.numPages = c / p.itemsPerPage
            }, function () {})
        };
        p.close = function () {
            C(), p.searchWorkerIdArr = [], p.searchPayment = "", B()
        }, z()
    }
    angular.module("fieldApp").controller("FmFinanceCashallCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Record", "Item", "Venue", "Member", "Product", "Cardrecords", "Finance"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
        var q = this;
        q.titleState = f.params.state || "field";
        var r = function () {
                q.items = [], _.each(q.venues, function (a) {
                    _.each(a.items, function (a) {
                        q.items.indexOf(a) < 0 && q.items.push(a)
                    })
                }), _.each(q.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), q.chooseVenueName(q.venues[0])
            },
            s = function () {
                k.index({}, function (a) {
                    q.venues = a.data.venues, _.each(q.venues, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), r()
                }, function () {})
            },
            t = function (a) {
                p.show({
                    id: a
                }, function (a) {
                    q.secondCategories = [{
                        name: "全部",
                        _id: ""
                    }].concat(a.data.productcategory.secondCategories)
                }, function () {})
            },
            u = function (a) {
                m.index({
                    _secondCategory: a
                }, function (a) {
                    q.products = a.data.products
                }, function () {})
            },
            v = function () {
                q.hasChooseVenue = [], q.hasChooseItem = [], q.hasChooseWorker = [], _.each(q.items, function (a) {
                    "manyChoose_imageYes" == a.image && q.hasChooseItem.push(a)
                }), _.each(q.venues, function (a) {
                    "manyChoose_imageYes" == a.image && q.hasChooseVenue.push(a)
                }), _.each(q.workers, function (a) {
                    "manyChoose_imageYes" == a.image && q.hasChooseWorker.push(a)
                })
            },
            w = function () {
                v(), q.hasChooseItem.length > 0 && 0 == q.hasChooseVenue.length && 0 == q.hasChooseWorker.length && !q.whatFirst ? q.whatFirst = "item" : 0 == q.hasChooseItem.length && q.hasChooseVenue.length > 0 && 0 == q.hasChooseWorker.length && !q.whatFirst ? q.whatFirst = "venue" : 0 == q.hasChooseItem.length && 0 == q.hasChooseVenue.length && q.hasChooseWorker.length > 0 && !q.whatFirst ? q.whatFirst = "worker" : 0 == q.hasChooseItem.length && 0 == q.hasChooseVenue.length && 0 == q.hasChooseWorker.length && (q.whatFirst = ""), 0 == q.hasChooseItem.length && "item" == q.whatFirst && (q.whatFirst = ""), 0 == q.hasChooseVenue.length && "venue" == q.whatFirst && (q.whatFirst = ""), 0 == q.hasChooseWorker.length && "worker" == q.whatFirst && (q.whatFirst = "")
            },
            x = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    _.each(q.venues, function (b) {
                        var d = _.findWhere(b.items, {
                            _id: a._id
                        });
                        return d ? void c.push(b) : void 0
                    })
                }), b(c)
            },
            y = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    a.venues && a.venues.length > 0 ? _.each(q.venues, function (b) {
                        var d = _.findWhere(a.venues, {
                            _id: b._id
                        });
                        if (d) {
                            var e = _.findWhere(c, {
                                _id: d._id
                            });
                            if (!e) return void c.push(b)
                        }
                    }) : c = q.venues
                }), b(c)
            },
            z = function (a, b) {
                var c = [];
                return _.each(a, function (a) {
                    _.each(a.items, function (b) {
                        var d = _.findWhere(c, {
                            _id: b._id
                        });
                        d || (c = c.concat(a.items))
                    })
                }), b ? void b(c) : c
            },
            A = function (a, b) {
                var c = [];
                return _.each(q.workers, function (b) {
                    b.venues && b.venues.length > 0 ? _.each(a, function (a) {
                        var d = _.findWhere(b.venues, {
                            _id: a._id
                        });
                        d && c.push(b)
                    }) : c.push(b)
                }), b ? void b(c) : c
            };
        q.chooseItemName = function (a) {
            D(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", q.hasChooseItem.push(a)) : (a.image = "manyChoose_imageNo", q.hasChooseItem.splice(q.hasChooseItem.indexOf(a), 1)), w(), q.whatFirst || (_.each(q.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(q.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "item" == q.whatFirst && x(q.hasChooseItem, function (a) {
                _.each(q.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), A(a, function (a) {
                    _.each(q.workers, function (b) {
                        -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                    })
                })
            }), G()
        }, q.chooseVenueName = function (a) {
            if (D(), "manyChoose_imageNo" == a.image) a.image = "manyChoose_imageYes", q.hasChooseVenue.push(a);
            else {
                if (1 == q.hasChooseVenue.length) return q.promptERR = !0, void(q.wordERR = "必须选择一个场馆");
                a.image = "manyChoose_imageNo", q.hasChooseVenue.splice(q.hasChooseVenue.indexOf(a), 1)
            }
            w(), q.whatFirst || (_.each(q.items, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(q.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "venue" == q.whatFirst && (z(q.hasChooseVenue, function (a) {
                _.each(q.items, function (b) {
                    var c = _.findWhere(a, {
                        _id: b._id
                    });
                    c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                })
            }), A(q.hasChooseVenue, function (a) {
                _.each(q.workers, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                })
            })), G()
        }, q.chooseWorkerName = function (a) {
            D(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", q.hasChooseWorker.push(a)) : (a.image = "manyChoose_imageNo", q.hasChooseWorker.splice(q.hasChooseWorker.indexOf(a), 1)), w(), q.whatFirst || (_.each(q.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(q.items, function (a) {
                a.image = "manyChoose_imageNo"
            })), "worker" == q.whatFirst && y(q.hasChooseWorker, function (a) {
                _.each(q.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), z(a, function (a) {
                    _.each(q.items, function (b) {
                        var c = _.findWhere(a, {
                            _id: b._id
                        });
                        c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                    })
                })
            }), G()
        };
        var B = function () {
                C(), s()
            },
            C = function () {
                q.hasChooseItem = [], q.hasChooseVenue = [], q.hasChooseWorker = [], q.searchVenueIdArr = [], q.searchItemIdArr = [], q.searchType = "", q.searchWorkerId = "", q.searchPayment = "", q.searchMemberId = "", q.searchMemberType = "", q.whatFirst = "", q.venueArr = [], q.itemArr = [], q.errState = "add", q.errRecordId = "", q.errPrice = "", q.errRemark = "", q.showTypeName = "类型", q.showWorkerName = "提交人", q.showPaymentName = "支付方式", q.showMemberName = "用户名", q.showMemberTypeName = "类型", q.startDate = new Date, q.endDate = new Date, q.searchProduct = "选择综合服务", q.searchSecond = "选择二级分类", q.paymentArr = [{
                    name: "全部"
                }, {
                    name: "现金支付",
                    value: "cash"
                }, {
                    name: "微信支付",
                    value: "wx"
                }, {
                    name: "支付宝支付",
                    value: "alipay"
                }, {
                    name: "转账支付",
                    value: "card"
                }, {
                    name: "支票支付",
                    value: "check"
                }, {
                    name: "POS机支付",
                    value: "pos"
                }, {
                    name: "余额支付",
                    value: "member"
                }, {
                    name: "虚拟卡支付",
                    value: "member_vir"
                }, {
                    name: "专用账户支付",
                    value: "member_spe"
                }], _.each(q.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(q.venues, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(q.workers, function (a) {
                    a.image = "manyChoose_imageNo"
                }), q.page = 1, q.itemsPerPage = 10, q.pagination = {
                    page: q.page,
                    itemsPerPage: q.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            D = function () {
                q.page = 1, q.itemsPerPage = 10, q.pagination = {
                    page: q.page,
                    itemsPerPage: q.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            E = function () {
                q.showChooseStartDateBox = !1, q.showChooseEndDateBox = !1, q.showChooseItemBox = !1, q.showChooseVenueBox = !1, q.showChooseTypeBox = !1, q.showChooseWorkerBox = !1, q.showChooseMemberBox = !1, q.showChoosePaymentBox = !1, q.showChooseMemberTypeBox = !1, q.showChooseWorkerBox = !1, q.showErrChangeBox = !1, q.showPreview = !1, q.showDetail = !1
            },
            F = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            };
        q.pageChanged = function () {
            H()
        }, q.closeChooseStartDateBox = function () {
            E(), D(), setTimeout(function () {
                G()
            }, 100)
        }, q.closeChooseEndDateBox = function () {
            E(), D(), setTimeout(function () {
                G()
            }, 100)
        }, q.chooseTypeName = function (a) {
            E(), D(), q.showTypeName = a.name, q.searchType = a.value, H()
        }, q.chooseMemberName = function (a) {
            E(), D(), q.showMemberName = a.name, "tourist" == a.value ? q.searchMemberId = "tourist" : q.searchMemberId = a._id, H()
        }, q.choosePaymentName = function (a) {
            q.showChoosePaymentBox = !1, D(), q.showPaymentName = a.name, q.searchPayment = a.value, H()
        }, q.openErrChangeBox = function (a) {
            E(), q.showErrChangeBox = !0, q.errRecordId = a
        }, q.chooseErrState = function (a) {
            "add" == a ? q.errState = "add" : q.errState = "reduce"
        }, q.changeErrRemark = function () {
            if (!q.errPrice) return q.promptERR = !0, void(q.wordERR = "请填写纠错金额");
            if (!q.errRemark) return q.promptERR = !0, void(q.wordERR = "请填写纠错备注");
            var a = {
                _record: q.errRecordId,
                state: q.errState,
                cost: parseFloat(q.errPrice),
                remark: q.errRemark
            };
            i.create({}, a, function () {
                H()
            }, function () {})
        }, q.closePrompt = function () {
            q.promptOK = !1, q.promptERR = !1, q.promptWARN = !1, q.searchWorkerIdArr = [], q.searchPayment = ""
        };
        var G = function () {
            q.promptWARN = !0, q.wordWARN = "统计中";
            var a = {
                all: "all",
                state: "field",
                startDate: q.startDate.getTime(),
                endDate: q.endDate.getTime()
            };
            q.dateName = "", q.dateName += q.startDate.getFullYear() + "年", q.dateName += q.startDate.getMonth() + 1 > 9 ? q.startDate.getMonth() + 1 + "月" : "0" + (q.startDate.getMonth() + 1) + "月", q.dateName += q.startDate.getDate() > 9 ? q.startDate.getDate() + "日-" : "0" + q.startDate.getDate() + "日-", q.dateName += q.endDate.getFullYear() + "年", q.dateName += q.endDate.getMonth() + 1 > 9 ? q.endDate.getMonth() + 1 + "月" : "0" + (q.endDate.getMonth() + 1) + "月", q.dateName += q.endDate.getDate() > 9 ? q.endDate.getDate() + "日" : "0" + q.endDate.getDate() + "日";
            var b = [];
            q.searchVenueIdArr = [], _.each(q.venues, function (a) {
                "manyChoose_imageYes" == a.image && (q.searchVenueIdArr.push(a._id), b.push(a))
            }), q.venueName = "";
            for (var c = 0; c < b.length; c++) q.venueName += (0 == c ? "" : "/") + b[c].name;
            q.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: q.searchVenueIdArr
            })), q.searchItemIdArr = [], _.each(q.items, function (a) {
                "manyChoose_imageYes" == a.image && q.searchItemIdArr.push(a._id)
            }), q.searchItemIdArr.length > 0 && (a = _.merge(a, {
                items: q.searchItemIdArr
            })), o.income(a, function (a) {
                q.itemAndProduct = a.data.statistic.itemAndProduct, q.firstcategory = a.data.statistic.firstcategory, _.each(q.itemAndProduct, function (a) {
                    a.payment.cashAll = 0, a.payment.cashAll = F(a.payment.cashAll + a.payment.wx + a.payment.alipay + a.payment.cash + a.payment.card + a.payment.check + a.payment.pos)
                }), _.each(q.firstcategory, function (a) {
                    a.payment.cashAll = 0, a.payment.cashAll = F(a.payment.cashAll + a.payment.wx + a.payment.alipay + a.payment.cash + a.payment.card + a.payment.check + a.payment.pos)
                }), q.all = _.findWhere(q.itemAndProduct, {
                    _ip: "all"
                });
                for (var b = 0, c = !0, d = 0, e = 0; e < q.itemAndProduct.length; e++) "product" == q.itemAndProduct[e].state && (c && (b = e, c = !1), d++);
                q.itemAndProduct.splice(q.itemAndProduct.indexOf(q.all), 1), 0 == q.searchItemIdArr.length && q.itemAndProduct.splice(b, d), q.promptWARN = !1
            }, function () {})
        };
        q["export"] = function () {
            var a = q.dateName + q.venueName + "的消费汇总表";
            setTimeout(function () {
                execl1("alltable", a)
            }, 100)
        }, q.changeStatus = function (a) {
            D(), q.searchStatus = a, H()
        }, q.initCondition = function (a) {
            if ("item" == a.state) q.searchItemId2 = a._ip;
            else if ("product" == a.state) q.searchStatus = "other", q.searchProductId = a._ip;
            else if ("firstcategory" == a.state) {
                q.searchStatus = "other", q.searchFirstCategoryId = a._ip;
                var b = [];
                _.each(q.venues, function (a) {
                    "manyChoose_imageYes" == a.image && b.push(a)
                }), q.secondCategories = [], q.searchSecond = "选择二级分类", q._searchSecond = "", q.products = [], q.searchProduct = "选择综合服务", q._searchProduct = "", t(q.searchFirstCategoryId)
            }
            H()
        }, q.chooseSecond = function (a) {
            q.openShowSearchSecond = !1, q.searchSecond = a.name, q._searchSecond = a._id, q.products = [], q.searchProduct = "选择综合服务", q._searchProduct = "", H(), u(q._searchSecond)
        }, q.chooseProduct = function (a) {
            q.openShowSearchProduct = !1, q.searchProduct = a.name, q._searchProduct = a._id, H()
        }, q.searchDetail = function () {
            D(), H()
        }, q.exportDetail = function () {
            var a = {
                all: "all",
                state: "field"
            };
            q.startDate && q.endDate && (a = _.merge(a, {
                startDate: q.startDate.getTime(),
                endDate: q.endDate.getTime()
            })), q.searchVenueIdArr = [], _.each(q.venues, function (a) {
                "manyChoose_imageYes" == a.image && q.searchVenueIdArr.push(a._id)
            }), q.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: q.searchVenueIdArr
            })), q.searchItemId2 ? a = _.merge(a, {
                items: [q.searchItemId2]
            }) : q.searchProductId ? a = _.merge(a, {
                _product: q.searchProductId
            }) : q.searchFirstCategoryId && (a = _.merge(a, {
                _firstCategory: q.searchFirstCategoryId
            })), q.searchPayment && (a = _.merge(a, {
                payments: [q.searchPayment]
            })), q.searchRecordRemark && (a = _.merge(a, {
                description: q.searchRecordRemark
            })), q._searchProduct && (a = _.merge(a, {
                _product: q._searchProduct
            })), q._searchSecond && (a = _.merge(a, {
                _secondCategory: q._searchSecond
            })), a = "other" == q.searchStatus ? _.merge(a, {
                statuses: ["buyProduct", "refundProduct", "buyTicket"]
            }) : _.merge(a, {
                statuses: ["pay", "refund"],
                sortBy: "checkDate"
            }), i.index(a, function (a) {
                q.exportRecordsDetail = a.data.records, _.each(q.exportRecordsDetail, function (a) {
                    if (a.state) a.cost = ("add" == a.state ? "+" : "-") + a.cost;
                    else switch (a.status) {
                    case "pay":
                    case "buy":
                    case "buyProduct":
                    case "buyShopProduct":
                    case "buySpe":
                    case "bindCard":
                        a.cost = "+" + a.cost;
                        break;
                    case "refund":
                    case "cardRefund":
                    case "refundProduct":
                    case "refundShopProduct":
                    case "refundSpe":
                        a.cost = "-" + a.cost
                    }
                    switch (a.payment) {
                    case "wx":
                        a.payment = "微信支付";
                        break;
                    case "card":
                        a.payment = "转账支付";
                        break;
                    case "cash":
                        a.payment = "现金支付";
                        break;
                    case "alipay":
                        a.payment = "支付宝支付";
                        break;
                    case "check":
                        a.payment = "支票支付";
                        break;
                    case "pos":
                        a.payment = "POS机支付";
                        break;
                    case "member":
                        a.payment = "余额支付";
                        break;
                    case "member_vir":
                        a.payment = "虚拟卡支付";
                        break;
                    case "member_spe":
                        a.payment = "专用账户支付";
                        break;
                    default:
                        a.payment = "无"
                    }
                });
                var b = "明细表";
                setTimeout(function () {
                    execl1("alltable2", b)
                }, 100)
            }, function () {})
        };
        var H = function () {
            var a = {
                page: q.pagination.page,
                itemsPerPage: q.pagination.itemsPerPage,
                state: "field"
            };
            q.startDate && q.endDate && (a = _.merge(a, {
                startDate: q.startDate.getTime(),
                endDate: q.endDate.getTime()
            })), q.searchVenueIdArr = [], _.each(q.venues, function (a) {
                "manyChoose_imageYes" == a.image && q.searchVenueIdArr.push(a._id)
            }), q.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: q.searchVenueIdArr
            })), q.searchItemId2 ? a = _.merge(a, {
                items: [q.searchItemId2]
            }) : q.searchProductId ? a = _.merge(a, {
                _product: q.searchProductId
            }) : q.searchFirstCategoryId && (a = _.merge(a, {
                _firstCategory: q.searchFirstCategoryId
            })), q.searchPayment && (a = _.merge(a, {
                payments: [q.searchPayment]
            })), q.searchRecordRemark && (a = _.merge(a, {
                description: q.searchRecordRemark
            })), q.searchProductContacts && (a = _.merge(a, {
                productContacts: q.searchProductContacts
            })), q._searchProduct && (a = _.merge(a, {
                _product: q._searchProduct
            })), q._searchSecond && (a = _.merge(a, {
                _secondCategory: q._searchSecond
            })), a = "other" == q.searchStatus ? _.merge(a, {
                statuses: ["buyProduct", "refundProduct", "buyTicket"]
            }) : _.merge(a, {
                statuses: ["pay", "refund"],
                sortBy: "checkDate"
            }), i.index(a, function (b) {
                q.recordsDetail = b.data.records, q.showDetail = !0, _.each(q.recordsDetail, function (a) {
                    if (a.state) a.cost = ("add" == a.state ? "+" : "-") + a.cost;
                    else switch (a.status) {
                    case "pay":
                    case "buyProduct":
                        a.cost = "+" + a.cost;
                        break;
                    case "refund":
                    case "refundProduct":
                        a.cost = "-" + a.cost
                    }
                    switch (a.payment) {
                    case "wx":
                        a.payment = "微信支付";
                        break;
                    case "card":
                        a.payment = "转账支付";
                        break;
                    case "cash":
                        a.payment = "现金支付";
                        break;
                    case "alipay":
                        a.payment = "支付宝支付";
                        break;
                    case "check":
                        a.payment = "支票支付";
                        break;
                    case "pos":
                        a.payment = "POS机支付";
                        break;
                    case "member":
                        a.payment = "余额支付";
                        break;
                    case "member_vir":
                        a.payment = "虚拟卡支付";
                        break;
                    case "member_spe":
                        a.payment = "专用账户支付";
                        break;
                    default:
                        a.payment = "无"
                    }
                });
                var c = b.data.count;
                q.pagination.totalItems = c, q.pagination.numPages = c / q.itemsPerPage, a = _.merge(a, {
                    all: "total"
                }), i.index(a, function (a) {
                    q.cost = a.data.total
                }, function () {})
            }, function () {})
        };
        q.close = function () {
            E(), q.searchItemId2 = "", q.searchProductId = "", q.searchFirstCategoryId = "", q.searchPayment = "", q.searchStatus = "field", q.showPaymentName = "支付方式", q.searchPayment = "", q.searchProduct = "选择综合服务", q._searchProduct = "", D()
        }, B()
    }
    angular.module("fieldApp").controller("FmFinanceFieldCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Record", "Item", "Venue", "Member", "Product", "Cardrecords", "Finance", "Productcategory"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        var p = this,
            q = function () {
                k.index({}, function (a) {
                    p.venues = a.data.venues, _.each(p.venues, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), p.chooseVenueName(p.venues[0])
                }, function () {})
            },
            r = function () {
                e.index({
                    role: "checkStand"
                }, function (a) {
                    p.workers = [{
                        name: "微信",
                        _id: "wx"
                    }].concat(a.data.users), _.each(p.workers, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), q()
                }, function () {})
            },
            s = function () {
                p.hasChooseVenue = [], p.hasChooseItem = [], p.hasChooseWorker = [], _.each(p.items, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseItem.push(a)
                }), _.each(p.venues, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseVenue.push(a)
                }), _.each(p.workers, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseWorker.push(a)
                })
            },
            t = function () {
                s(), p.hasChooseItem.length > 0 && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "item" : 0 == p.hasChooseItem.length && p.hasChooseVenue.length > 0 && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "venue" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && p.hasChooseWorker.length > 0 && !p.whatFirst ? p.whatFirst = "worker" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && (p.whatFirst = ""), 0 == p.hasChooseItem.length && "item" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseVenue.length && "venue" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseWorker.length && "worker" == p.whatFirst && (p.whatFirst = "")
            },
            u = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    _.each(p.venues, function (b) {
                        var d = _.findWhere(b.items, {
                            _id: a._id
                        });
                        return d ? void c.push(b) : void 0
                    })
                }), b(c)
            },
            v = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    a.venues && a.venues.length > 0 ? _.each(p.venues, function (b) {
                        var d = _.findWhere(a.venues, {
                            _id: b._id
                        });
                        if (d) {
                            var e = _.findWhere(c, {
                                _id: d._id
                            });
                            if (!e) return void c.push(b)
                        }
                    }) : c = p.venues
                }), b(c)
            },
            w = function (a, b) {
                var c = [];
                return _.each(a, function (a) {
                    _.each(a.items, function (b) {
                        var d = _.findWhere(c, {
                            _id: b._id
                        });
                        d || (c = c.concat(a.items))
                    })
                }), b ? void b(c) : c
            },
            x = function (a, b) {
                var c = [];
                return _.each(p.workers, function (b) {
                    b.venues && b.venues.length > 0 ? _.each(a, function (a) {
                        var d = _.findWhere(b.venues, {
                            _id: a._id
                        });
                        d && c.push(b)
                    }) : c.push(b)
                }), b ? void b(c) : c
            };
        p.chooseItemName = function (a) {
            A(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseItem.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseItem.splice(p.hasChooseItem.indexOf(a), 1)), t(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "item" == p.whatFirst && u(p.hasChooseItem, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), x(a, function (a) {
                    _.each(p.workers, function (b) {
                        -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                    })
                })
            }), D()
        }, p.chooseVenueName = function (a) {
            if (A(), "manyChoose_imageNo" == a.image) a.image = "manyChoose_imageYes", p.hasChooseVenue.push(a);
            else {
                if (1 == p.hasChooseVenue.length) return p.promptERR = !0, void(p.wordERR = "必须选择一个场馆");
                a.image = "manyChoose_imageNo", p.hasChooseVenue.splice(p.hasChooseVenue.indexOf(a), 1)
            }
            t(), p.whatFirst || (_.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "venue" == p.whatFirst && (w(p.hasChooseVenue, function (a) {
                _.each(p.items, function (b) {
                    var c = _.findWhere(a, {
                        _id: b._id
                    });
                    c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                })
            }), x(p.hasChooseVenue, function (a) {
                _.each(p.workers, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                })
            })), D()
        }, p.chooseWorkerName = function (a) {
            A(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseWorker.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseWorker.splice(p.hasChooseWorker.indexOf(a), 1)), t(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            })), "worker" == p.whatFirst && v(p.hasChooseWorker, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), w(a, function (a) {
                    _.each(p.items, function (b) {
                        var c = _.findWhere(a, {
                            _id: b._id
                        });
                        c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                    })
                })
            }), D()
        };
        var y = function () {
                z(), r()
            },
            z = function () {
                p.hasChooseItem = [], p.hasChooseVenue = [], p.hasChooseWorker = [], p.searchVenueIdArr = [], p.searchItemIdArr = [], p.searchType = "", p.searchWorkerId = "", p.searchPayment = "", p.searchMemberId = "", p.searchMemberType = "", p.whatFirst = "", p.venueArr = [], p.itemArr = [], p.errState = "add", p.errRecordId = "", p.errPrice = "", p.errRemark = "", p.showTypeName = "类型", p.showWorkerName = "提交人", p.showPaymentName = "支付方式", p.showMemberName = "用户名", p.showMemberTypeName = "类型", p.startDate = new Date, p.endDate = new Date, p.paymentArr = [{
                    name: "全部"
                }, {
                    name: "微信支付",
                    value: "wx"
                }, {
                    name: "支付宝支付",
                    value: "alipay"
                }], _.each(p.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.venues, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.workers, function (a) {
                    a.image = "manyChoose_imageNo"
                }), p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            A = function () {
                p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            B = function () {
                p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1, p.showChooseItemBox = !1, p.showChooseVenueBox = !1, p.showChooseTypeBox = !1, p.showChooseWorkerBox = !1, p.showChooseMemberBox = !1, p.showChoosePaymentBox = !1, p.showChooseMemberTypeBox = !1, p.showChooseWorkerBox = !1, p.showErrChangeBox = !1, p.showPreview = !1, p.showDetail = !1
            },
            C = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            };
        p.pageChanged = function () {
            E()
        }, p.closeChooseStartDateBox = function () {
            B(), A(), setTimeout(function () {
                D()
            }, 100)
        }, p.closeChooseEndDateBox = function () {
            B(), A(), setTimeout(function () {
                D()
            }, 100)
        }, p.choosePaymentName = function (a) {
            p.showChoosePaymentBox = !1, A(), p.showPaymentName = a.name, p.searchPayment = a.value, E()
        }, p.openErrChangeBox = function (a) {
            B(), p.showErrChangeBox = !0, p.errRecordId = a
        }, p.chooseErrState = function (a) {
            "add" == a ? p.errState = "add" : p.errState = "reduce"
        }, p.changeErrRemark = function () {
            if (!p.errPrice) return p.promptERR = !0, void(p.wordERR = "请填写纠错金额");
            if (!p.errRemark) return p.promptERR = !0, void(p.wordERR = "请填写纠错备注");
            var a = {
                _record: p.errRecordId,
                state: p.errState,
                cost: parseFloat(p.errPrice),
                remark: p.errRemark
            };
            Record.create({}, a, function () {
                E()
            }, function () {})
        }, p.closePrompt = function () {
            p.promptOK = !1, p.promptERR = !1, p.promptWARN = !1, p.searchWorkerIdArr = [], p.searchPayment = ""
        };
        var D = function () {
            p.promptWARN = !0, p.wordWARN = "统计中";
            var a = {
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            };
            p.dateName = "", p.dateName += p.startDate.getFullYear() + "年", p.dateName += p.startDate.getMonth() + 1 > 9 ? p.startDate.getMonth() + 1 + "月" : "0" + (p.startDate.getMonth() + 1) + "月", p.dateName += p.startDate.getDate() > 9 ? p.startDate.getDate() + "日-" : "0" + p.startDate.getDate() + "日-", p.dateName += p.endDate.getFullYear() + "年", p.dateName += p.endDate.getMonth() + 1 > 9 ? p.endDate.getMonth() + 1 + "月" : "0" + (p.endDate.getMonth() + 1) + "月", p.dateName += p.endDate.getDate() > 9 ? p.endDate.getDate() + "日" : "0" + p.endDate.getDate() + "日";
            var b = [];
            p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && (p.searchVenueIdArr.push(a._id), b.push(a))
            }), p.venueName = "";
            for (var c = 0; c < b.length; c++) p.venueName += (0 == c ? "" : "/") + b[c].name;
            p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: p.searchVenueIdArr
            })), p.searchWorkerIdArr = [], _.each(p.workers, function (a) {
                "manyChoose_imageYes" == a.image && p.searchWorkerIdArr.push(a._id)
            }), p.searchWorkerIdArr.length > 0 && (a = _.merge(a, {
                workers: p.searchWorkerIdArr
            }));
            o.prepIncome(a, function (a) {
                p.result = a.data.statistic, p.promptWARN = !1
            }, function () {})
        };
        p["export"] = function () {
            var a = p.dateName + p.venueName + "的微信支付宝收入汇总表";
            setTimeout(function () {
                execl1("alltable", a)
            }, 100)
        }, p.initCondition = function (a) {
            a && ("微信" == a ? p.searchWorkerIdArr = ["wx"] : "合计" == a ? p.searchWorkerName = void 0 : p.searchWorkerName = a), E()
        };
        var E = function () {
            var a = {
                page: p.pagination.page,
                itemsPerPage: p.pagination.itemsPerPage,
                state: "shop"
            };
            p.startDate && p.endDate && (a = _.merge(a, {
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            })), p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && p.searchVenueIdArr.push(a._id)
            }), p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: p.searchVenueIdArr
            })), 1 == p.searchWorkerIdArr.length && (a = _.merge(a, {
                _worker: p.searchWorkerIdArr[0]
            })), p.searchWorkerName && (a = _.merge(a, {
                workerName: p.searchWorkerName
            })), p.searchPayment && (a = _.merge(a, {
                payment: p.searchPayment
            })), i.index(a, function (a) {
                if (p.prepordersDetail = a.data.preporders, !(p.prepordersDetail.length > 0)) return p.promptERR = !0, void(p.wordERR = "暂无记录");
                p.showDetail = !0, _.each(p.prepordersDetail, function (a) {
                    switch (a.total_fee = C(a.total_fee / 100), a.status) {
                    case "buyMicropay":
                        a.status = "微信扫码购卡充值";
                        break;
                    case "payMicropay":
                        a.status = "微信扫码预订场地";
                        break;
                    case "shopProductMicropay":
                        a.status = "微信扫码购买商品";
                        break;
                    case "productMicropay":
                        a.status = "微信扫码购买综合服务";
                        break;
                    case "bindMicropay":
                        a.status = "微信扫码扣工本费";
                        break;
                    case "buySpeMicropay":
                        a.status = "微信扫码充值专用账户";
                        break;
                    case "buyMicropay&bindMicropay":
                        a.status = "微信扫码购卡充值并扣工本费";
                        break;
                    case "depositMicropay":
                        a.status = "微信扫码充值";
                        break;
                    case "buyServiceMicropay":
                        a.status = "微信扫码购卡购买会员服务", a.bail && (a.status += "并扣保证金");
                        break;
                    case "buyServiceMicropay&bindMicropay":
                        a.status = "微信扫码购卡购买会员服务并扣工本费", a.bail && (a.status += "并扣保证金");
                        break;
                    case "overtimeMicropay":
                        a.status = "微信扫码支付超时费用";
                        break;
                    case "bailMicropay":
                        a.status = "微信扫码支付押金";
                        break;
                    case "buyalipay":
                        a.status = "支付宝扫码购卡充值";
                        break;
                    case "payalipay":
                        a.status = "支付宝扫码预订场地";
                        break;
                    case "shopProductalipay":
                        a.status = "支付宝扫码购买商品";
                        break;
                    case "productalipay":
                        a.status = "支付宝扫码购买综合服务";
                        break;
                    case "bindalipay":
                        a.status = "支付宝扫码扣工本费";
                        break;
                    case "buySpeAlipay":
                        a.status = "支付宝扫码充值专用账户";
                        break;
                    case "bindalipay&buyalipay":
                        a.status = "支付宝扫码购卡充值并扣工本费";
                        break;
                    case "depositAlipay":
                        a.status = "支付宝扫码充值";
                        break;
                    case "buyServiceAlipay":
                        a.status = "支付宝扫码购卡购买会员服务", a.bail && (a.status += "并扣保证金");
                        break;
                    case "buyServiceAlipay&bindAlipay":
                        a.status = "支付宝扫码购卡购买会员服务并扣工本费", a.bail && (a.status += "并扣保证金");
                        break;
                    case "overtimeAlipay":
                        a.status = "支付宝扫码支付超时费用";
                        break;
                    case "bailAlipay":
                        a.status = "支付宝扫码支付押金";
                        break;
                    case "buy":
                        a.status = "微信用户线上购卡充值", a.payment = "微信公众号支付", a.workerName = "微信用户";
                        break;
                    case "buyTicket":
                        "wx" == a.payment ? a.status = "微信扫码购买门票" : a.status = "支付宝扫码购买门票"
                    }
                    switch (a.payment) {
                    case "wx":
                        a.payment = "微信支付";
                        break;
                    case "alipay":
                        a.payment = "支付宝支付"
                    }
                });
                var b = a.data.count;
                p.pagination.totalItems = b, p.pagination.numPages = b / p.itemsPerPage
            }, function () {})
        };
        p.close = function () {
            B(), p.searchWorkerIdArr = [], p.searchPayment = "", A()
        }, y()
    }
    angular.module("fieldApp").controller("FmFinancePrepCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Preporder", "Item", "Venue", "Member", "Product", "Cardrecords", "Finance"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        var p = this;
        p.titleState = f.params.state || "field";
        var q = function () {
                k.index({}, function (a) {
                    p.venues = a.data.venues, _.each(p.venues, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), p.chooseVenueName(p.venues[0])
                }, function () {})
            },
            r = function () {
                e.index({
                    role: "checkStand"
                }, function (a) {
                    s(a.data.users)
                }, function () {})
            },
            s = function (a) {
                e.get({}, function (b) {
                    var c = b.data.user._organization ? b.data.user._organization : b.data.user._id;
                    e.getOrgInfo({
                        id: c
                    }, function (b) {
                        p.workers = [{
                            name: "微信",
                            _id: "wx"
                        }].concat(a), _.each(p.workers, function (a) {
                            a.image = "manyChoose_imageNo"
                        }), q()
                    }, function () {})
                }, function () {})
            },
            t = function () {
                p.hasChooseVenue = [], p.hasChooseItem = [], p.hasChooseWorker = [], _.each(p.items, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseItem.push(a)
                }), _.each(p.venues, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseVenue.push(a)
                }), _.each(p.workers, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseWorker.push(a)
                })
            },
            u = function () {
                t(), p.hasChooseItem.length > 0 && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "item" : 0 == p.hasChooseItem.length && p.hasChooseVenue.length > 0 && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "venue" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && p.hasChooseWorker.length > 0 && !p.whatFirst ? p.whatFirst = "worker" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && (p.whatFirst = ""), 0 == p.hasChooseItem.length && "item" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseVenue.length && "venue" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseWorker.length && "worker" == p.whatFirst && (p.whatFirst = "")
            },
            v = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    _.each(p.venues, function (b) {
                        var d = _.findWhere(b.items, {
                            _id: a._id
                        });
                        return d ? void c.push(b) : void 0
                    })
                }), b(c)
            },
            w = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    a.venues && a.venues.length > 0 ? _.each(p.venues, function (b) {
                        var d = _.findWhere(a.venues, {
                            _id: b._id
                        });
                        if (d) {
                            var e = _.findWhere(c, {
                                _id: d._id
                            });
                            if (!e) return void c.push(b)
                        }
                    }) : c = p.venues
                }), b(c)
            },
            x = function (a, b) {
                var c = [];
                return _.each(a, function (a) {
                    _.each(a.items, function (b) {
                        var d = _.findWhere(c, {
                            _id: b._id
                        });
                        d || (c = c.concat(a.items))
                    })
                }), b ? void b(c) : c
            },
            y = function (a, b) {
                var c = [];
                return _.each(p.workers, function (b) {
                    b.venues && b.venues.length > 0 ? _.each(a, function (a) {
                        var d = _.findWhere(b.venues, {
                            _id: a._id
                        });
                        d && c.indexOf(b) < 0 && c.push(b)
                    }) : b.venues || c.push(b)
                }), b ? void b(c) : c
            };
        p.chooseItemName = function (a) {
            B(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseItem.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseItem.splice(p.hasChooseItem.indexOf(a), 1)), u(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "item" == p.whatFirst && v(p.hasChooseItem, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), y(a, function (a) {
                    _.each(p.workers, function (b) {
                        -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                    })
                })
            }), D()
        }, p.chooseVenueName = function (a) {
            if (B(), "manyChoose_imageNo" == a.image) a.image = "manyChoose_imageYes", p.hasChooseVenue.push(a);
            else {
                if (1 == p.hasChooseVenue.length) return p.promptERR = !0, void(p.wordERR = "必须选择一个场馆");
                a.image = "manyChoose_imageNo", p.hasChooseVenue.splice(p.hasChooseVenue.indexOf(a), 1)
            }
            u(), p.whatFirst || (_.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "venue" == p.whatFirst && (x(p.hasChooseVenue, function (a) {
                _.each(p.items, function (b) {
                    var c = _.findWhere(a, {
                        _id: b._id
                    });
                    c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG";
                })
            }), y(p.hasChooseVenue, function (a) {
                _.each(p.workers, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                })
            })), D()
        }, p.chooseWorkerName = function (a) {
            B(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseWorker.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseWorker.splice(p.hasChooseWorker.indexOf(a), 1)), u(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            })), "worker" == p.whatFirst && w(p.hasChooseWorker, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), x(a, function (a) {
                    _.each(p.items, function (b) {
                        var c = _.findWhere(a, {
                            _id: b._id
                        });
                        c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                    })
                })
            }), D()
        };
        var z = function () {
                A(), r()
            },
            A = function () {
                p.hasChooseItem = [], p.hasChooseVenue = [], p.hasChooseWorker = [], p.searchVenueIdArr = [], p.searchItemIdArr = [], p.searchType = "", p.searchWorkerId = "", p.searchPayment = "", p.searchMemberId = "", p.searchMemberType = "", p.whatFirst = "", p.venueArr = [], p.itemArr = [], p.errState = "add", p.errRecordId = "", p.errPrice = "", p.errRemark = "", p.showTypeName = "类型", p.showWorkerName = "提交人", p.showPaymentName = "支付方式", p.showMemberName = "用户名", p.showMemberTypeName = "类型", p.startDate = new Date, p.endDate = new Date, p.paymentArr = [{
                    name: "全部"
                }, {
                    name: "现金支付",
                    value: "cash"
                }, {
                    name: "微信支付",
                    value: "wx"
                }, {
                    name: "支付宝",
                    value: "alipay"
                }, {
                    name: "转账支付",
                    value: "card"
                }, {
                    name: "支票支付",
                    value: "check"
                }, {
                    name: "POS机支付",
                    value: "pos"
                }], _.each(p.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.venues, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.workers, function (a) {
                    a.image = "manyChoose_imageNo"
                }), p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            B = function () {
                p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            C = function () {
                p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1, p.showChooseItemBox = !1, p.showChooseVenueBox = !1, p.showChooseTypeBox = !1, p.showChooseWorkerBox = !1, p.showChooseMemberBox = !1, p.showChoosePaymentBox = !1, p.showChooseMemberTypeBox = !1, p.showChooseWorkerBox = !1, p.showErrChangeBox = !1, p.showPreview = !1, p.showDetail = !1
            };
        p.pageChanged = function () {
            E()
        }, p.closeChooseStartDateBox = function () {
            C(), B(), setTimeout(function () {
                D()
            }, 100)
        }, p.closeChooseEndDateBox = function () {
            C(), B(), setTimeout(function () {
                D()
            }, 100)
        }, p.choosePaymentName = function (a) {
            p.showChoosePaymentBox = !1, B(), p.showPaymentName = a.name, p.searchPayment = a.value, E()
        }, p.openErrChangeBox = function (a) {
            C(), p.showErrChangeBox = !0, p.errRecordId = a
        }, p.chooseErrState = function (a) {
            "add" == a ? p.errState = "add" : p.errState = "reduce"
        }, p.changeErrRemark = function () {
            if (!p.errPrice) return p.promptERR = !0, void(p.wordERR = "请填写纠错金额");
            if (!p.errRemark) return p.promptERR = !0, void(p.wordERR = "请填写纠错备注");
            var a = {
                _record: p.errRecordId,
                state: p.errState,
                cost: parseFloat(p.errPrice),
                remark: p.errRemark
            };
            i.create({}, a, function () {
                E()
            }, function () {})
        }, p.closePrompt = function () {
            p.promptOK = !1, p.promptERR = !1, p.promptWARN = !1, p.searchWorkerIdArr = [], p.searchPayment = ""
        };
        var D = function () {
            p.promptWARN = !0, p.wordWARN = "统计中";
            var a = {
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            };
            p.dateName = "", p.dateName += p.startDate.getFullYear() + "年", p.dateName += p.startDate.getMonth() + 1 > 9 ? p.startDate.getMonth() + 1 + "月" : "0" + (p.startDate.getMonth() + 1) + "月", p.dateName += p.startDate.getDate() > 9 ? p.startDate.getDate() + "日-" : "0" + p.startDate.getDate() + "日-", p.dateName += p.endDate.getFullYear() + "年", p.dateName += p.endDate.getMonth() + 1 > 9 ? p.endDate.getMonth() + 1 + "月" : "0" + (p.endDate.getMonth() + 1) + "月", p.dateName += p.endDate.getDate() > 9 ? p.endDate.getDate() + "日" : "0" + p.endDate.getDate() + "日";
            var b = [];
            p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && (p.searchVenueIdArr.push(a._id), b.push(a))
            }), p.venueName = "";
            for (var c = 0; c < b.length; c++) p.venueName += (0 == c ? "" : "/") + b[c].name;
            p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: p.searchVenueIdArr
            }));
            var d = {
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime(),
                _venue: "5a1e4774138f87e51c2e79e9"
            };
            o.count(d, function (a) {
                p.useCount = a.data, p.promptWARN = !1
            }, function () {})
        };
        p["export"] = function (a) {
            var b = p.dateName + "包玉刚运动人数明细表";
            setTimeout(function () {
                execl1(a, b)
            }, 100)
        }, p.initCondition = function (a) {
            a ? "微信" == a ? p.searchWorkerIdArr = ["wx"] : p.searchWorkerName = a : (p.searchWorkerIdArr = [], _.each(p.workers, function (a) {
                "manyChoose_imageYes" == a.image && p.searchWorkerIdArr.push(a._id)
            })), E()
        };
        var E = function () {
            var a = {
                page: p.pagination.page,
                itemsPerPage: p.pagination.itemsPerPage,
                state: "other"
            };
            p.startDate && p.endDate && (a = _.merge(a, {
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            })), p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && p.searchVenueIdArr.push(a._id)
            }), p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: p.searchVenueIdArr
            })), p.searchWorkerIdArr.length > 0 && (a = _.merge(a, {
                workers: p.searchWorkerIdArr
            })), p.searchWorkerName && (a = _.merge(a, {
                workerName: p.searchWorkerName
            })), p.searchPayment && (a = _.merge(a, {
                payments: [p.searchPayment]
            })), i.index(a, function (a) {
                if (p.recordsDetail = a.data.records, !(p.recordsDetail.length > 0)) return p.promptERR = !0, void(p.wordERR = "暂无记录");
                p.showDetail = !0;
                var b = 1;
                _.each(p.recordsDetail, function (a) {
                    if (a.index = b, b++, a.state) a.cost = ("add" == a.state ? "+" : "-") + a.cost;
                    else switch (a.status) {
                    case "pay":
                    case "buy":
                    case "buyProduct":
                    case "buyShopProduct":
                    case "buySpe":
                    case "bindCard":
                        a.cost = "+" + a.cost;
                        break;
                    case "refund":
                    case "cardRefund":
                    case "refundProduct":
                    case "refundShopProduct":
                    case "refundSpe":
                        a.cost = "-" + a.cost
                    }
                    switch (a.payment) {
                    case "wx":
                        a.payment = "微信支付";
                        break;
                    case "card":
                        a.payment = "转账支付";
                        break;
                    case "cash":
                        a.payment = "现金支付";
                        break;
                    case "alipay":
                        a.payment = "支付宝支付";
                        break;
                    case "check":
                        a.payment = "支票支付";
                        break;
                    case "pos":
                        a.payment = "POS机支付";
                        break;
                    default:
                        a.payment = "无"
                    }
                });
                var c = a.data.count;
                p.pagination.totalItems = c, p.pagination.numPages = c / p.itemsPerPage
            }, function () {})
        };
        p.close = function () {
            C(), p.searchWorkerIdArr = [], p.searchPayment = "", B()
        }, z()
    }
    angular.module("fieldApp").controller("FmServiceCountCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Record", "Item", "Venue", "Member", "Product", "Cardrecords", "Voucher"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        var p = this,
            q = function () {
                k.index({}, function (a) {
                    p.venues = a.data.venues, _.each(p.venues, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), p.chooseVenueName(p.venues[0])
                }, function () {})
            },
            r = function () {
                e.index({
                    role: "checkStand"
                }, function (a) {
                    p.workers = a.data.users, _.each(p.workers, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), q()
                }, function () {})
            },
            s = function () {
                p.hasChooseVenue = [], p.hasChooseItem = [], p.hasChooseWorker = [], _.each(p.items, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseItem.push(a)
                }), _.each(p.venues, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseVenue.push(a)
                }), _.each(p.workers, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseWorker.push(a)
                })
            },
            t = function () {
                s(), p.hasChooseItem.length > 0 && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "item" : 0 == p.hasChooseItem.length && p.hasChooseVenue.length > 0 && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "venue" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && p.hasChooseWorker.length > 0 && !p.whatFirst ? p.whatFirst = "worker" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && (p.whatFirst = ""), 0 == p.hasChooseItem.length && "item" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseVenue.length && "venue" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseWorker.length && "worker" == p.whatFirst && (p.whatFirst = "")
            },
            u = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    _.each(p.venues, function (b) {
                        var d = _.findWhere(b.items, {
                            _id: a._id
                        });
                        return d ? void c.push(b) : void 0
                    })
                }), b(c)
            },
            v = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    a.venues && a.venues.length > 0 ? _.each(p.venues, function (b) {
                        var d = _.findWhere(a.venues, {
                            _id: b._id
                        });
                        if (d) {
                            var e = _.findWhere(c, {
                                _id: d._id
                            });
                            if (!e) return void c.push(b)
                        }
                    }) : c = p.venues
                }), b(c)
            },
            w = function (a, b) {
                var c = [];
                return _.each(a, function (a) {
                    _.each(a.items, function (b) {
                        var d = _.findWhere(c, {
                            _id: b._id
                        });
                        d || (c = c.concat(a.items))
                    })
                }), b ? void b(c) : c
            },
            x = function (a, b) {
                var c = [];
                return _.each(p.workers, function (b) {
                    b.venues && b.venues.length > 0 ? _.each(a, function (a) {
                        var d = _.findWhere(b.venues, {
                            _id: a._id
                        });
                        d && c.push(b)
                    }) : c.push(b)
                }), b ? void b(c) : c
            };
        p.chooseItemName = function (a) {
            A(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseItem.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseItem.splice(p.hasChooseItem.indexOf(a), 1)), t(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "item" == p.whatFirst && u(p.hasChooseItem, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), x(a, function (a) {
                    _.each(p.workers, function (b) {
                        -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                    })
                })
            }), D()
        }, p.chooseVenueName = function (a) {
            if (A(), "manyChoose_imageNo" == a.image) a.image = "manyChoose_imageYes", p.hasChooseVenue.push(a);
            else {
                if (1 == p.hasChooseVenue.length) return p.promptERR = !0, void(p.wordERR = "必须选择一个场馆");
                a.image = "manyChoose_imageNo", p.hasChooseVenue.splice(p.hasChooseVenue.indexOf(a), 1)
            }
            t(), p.whatFirst || (_.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "venue" == p.whatFirst && (w(p.hasChooseVenue, function (a) {
                _.each(p.items, function (b) {
                    var c = _.findWhere(a, {
                        _id: b._id
                    });
                    c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                })
            }), x(p.hasChooseVenue, function (a) {
                _.each(p.workers, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                })
            })), D()
        }, p.chooseWorkerName = function (a) {
            A(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseWorker.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseWorker.splice(p.hasChooseWorker.indexOf(a), 1)), t(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            })), "worker" == p.whatFirst && v(p.hasChooseWorker, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), w(a, function (a) {
                    _.each(p.items, function (b) {
                        var c = _.findWhere(a, {
                            _id: b._id
                        });
                        c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                    })
                })
            }), D()
        };
        var y = function () {
                z(), r()
            },
            z = function () {
                p.hasChooseItem = [], p.hasChooseVenue = [], p.hasChooseWorker = [], p.searchVenueIdArr = [], p.searchItemIdArr = [], p.searchType = "", p.searchWorkerId = "", p.searchPayment = "", p.searchMemberId = "", p.searchMemberType = "", p.whatFirst = "", p.venueArr = [], p.itemArr = [], p.errState = "add", p.errRecordId = "", p.errPrice = "", p.errRemark = "", p.showTypeName = "类型", p.showWorkerName = "提交人", p.showPaymentName = "支付方式", p.showMemberName = "用户名", p.showMemberTypeName = "类型", p.startDate = new Date, p.endDate = new Date, p.paymentArr = [{
                    name: "全部"
                }, {
                    name: "微信支付",
                    value: "wx"
                }, {
                    name: "现金支付",
                    value: "cash"
                }, {
                    name: "余额支付",
                    value: "member"
                }, {
                    name: "支付宝支付",
                    value: "alipay"
                }], _.each(p.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.venues, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.workers, function (a) {
                    a.image = "manyChoose_imageNo"
                }), p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            A = function () {
                p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            B = function () {
                p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1, p.showChooseItemBox = !1, p.showChooseVenueBox = !1, p.showChooseTypeBox = !1, p.showChooseWorkerBox = !1, p.showChooseMemberBox = !1, p.showChoosePaymentBox = !1, p.showChooseMemberTypeBox = !1, p.showChooseWorkerBox = !1, p.showErrChangeBox = !1, p.showPreview = !1, p.showDetail = !1
            },
            C = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            };
        p.pageChanged = function () {
            E()
        }, p.closeChooseStartDateBox = function () {
            B(), A(), setTimeout(function () {
                D()
            }, 100)
        }, p.closeChooseEndDateBox = function () {
            B(), A(), setTimeout(function () {
                D()
            }, 100)
        }, p.choosePaymentName = function (a) {
            p.showChoosePaymentBox = !1, A(), p.showPaymentName = a.name, p.searchPayment = a.value, E()
        }, p.openErrChangeBox = function (a) {
            B(), p.showErrChangeBox = !0, p.errRecordId = a
        }, p.chooseErrState = function (a) {
            "add" == a ? p.errState = "add" : p.errState = "reduce"
        }, p.changeErrRemark = function () {
            if (!p.errPrice) return p.promptERR = !0, void(p.wordERR = "请填写纠错金额");
            if (!p.errRemark) return p.promptERR = !0, void(p.wordERR = "请填写纠错备注");
            var a = {
                _record: p.errRecordId,
                state: p.errState,
                cost: parseFloat(p.errPrice),
                remark: p.errRemark
            };
            i.create({}, a, function () {
                E()
            }, function () {})
        }, p.closePrompt = function () {
            p.promptOK = !1, p.promptERR = !1, p.promptWARN = !1, p.searchWorkerIdArr = [], p.searchPayment = ""
        };
        var D = function () {
            p.promptWARN = !0, p.wordWARN = "统计中";
            var a = {
                all: "all",
                state: "shop",
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            };
            p.dateName = "", p.dateName += p.startDate.getFullYear() + "年", p.dateName += p.startDate.getMonth() + 1 > 9 ? p.startDate.getMonth() + 1 + "月" : "0" + (p.startDate.getMonth() + 1) + "月", p.dateName += p.startDate.getDate() > 9 ? p.startDate.getDate() + "日-" : "0" + p.startDate.getDate() + "日-", p.dateName += p.endDate.getFullYear() + "年", p.dateName += p.endDate.getMonth() + 1 > 9 ? p.endDate.getMonth() + 1 + "月" : "0" + (p.endDate.getMonth() + 1) + "月", p.dateName += p.endDate.getDate() > 9 ? p.endDate.getDate() + "日" : "0" + p.endDate.getDate() + "日";
            var b = [];
            p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && (p.searchVenueIdArr.push(a._id), b.push(a))
            }), p.venueName = "";
            for (var c = 0; c < b.length; c++) p.venueName += (0 == c ? "" : "/") + b[c].name;
            p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: p.searchVenueIdArr
            })), p.searchWorkerIdArr = [], _.each(p.workers, function (a) {
                "manyChoose_imageYes" == a.image && p.searchWorkerIdArr.push(a._id)
            }), p.searchWorkerIdArr.length > 0 && (a = _.merge(a, {
                workers: p.searchWorkerIdArr
            })), o.shop(a, function (a) {
                p.records = a.data.statistic, p.promptWARN = !1
            }, function () {})
        };
        p["export"] = function (a) {
            var b;
            b = a ? p.dateName + p.workerName + "的" + p.venueName + "的小卖部消费明细表" : p.dateName + p.venueName + "的小卖部消费汇总表", setTimeout(function () {
                execl1(a ? a : "alltable", b)
            }, 100)
        }, p.initCondition = function (a, b) {
            a && (p.searchWorkerIdArr = [a]), E(b)
        };
        var E = function (a) {
            p.workerName = a;
            var b = {
                state: "shop",
                all: "all"
            };
            p.startDate && p.endDate && (b = _.merge(b, {
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            })), p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && p.searchVenueIdArr.push(a._id)
            }), p.searchVenueIdArr.length > 0 && (b = _.merge(b, {
                venues: p.searchVenueIdArr
            })), p.searchWorkerIdArr.length > 0 && (b = _.merge(b, {
                workers: p.searchWorkerIdArr
            })), p.searchPayment && (b = _.merge(b, {
                payments: [p.searchPayment]
            })), i.index(b, function (a) {
                if (p.recordsDetail = a.data.records, !(p.recordsDetail.length > 0)) return p.promptERR = !0, void(p.wordERR = "暂无记录");
                p.showDetail = !0, p.shopDetails = [];
                var b = 1,
                    c = 0,
                    d = 0,
                    e = 0,
                    f = 0;
                _.each(p.recordsDetail, function (a) {
                    switch (a.index = b, b++, a.status) {
                    case "refundShopProduct":
                        a.cost = -1 * a.cost, a.quantity = -1 * a.quantity
                    }
                    a.state && (a.quantity = 0), "reduce" == a.state && (a.cost = -1 * a.cost);
                    var c = _.findWhere(p.shopDetails, {
                        _id: a._shopProduct
                    });
                    if (c) c.quantity += a.quantity, c.subTotal += a.cost, "member" == a.payment ? c.member = C((100 * c.member + 100 * a.cost) / 100) : c.noMember = C((100 * c.noMember + 100 * a.cost) / 100);
                    else {
                        var d = {
                            _id: a._shopProduct,
                            name: a.shopProductName,
                            member: 0,
                            noMember: 0,
                            quantity: a.quantity,
                            subTotal: a.cost
                        };
                        "member" == a.payment ? d.member = C((100 * d.member + 100 * a.cost) / 100) : d.noMember = C((100 * d.noMember + 100 * a.cost) / 100), p.shopDetails.push(d)
                    }
                }), _.each(p.shopDetails, function (a) {
                    c += a.quantity, d = C((100 * a.subTotal + 100 * d) / 100), e = C((100 * e + 100 * a.member) / 100), f = C((100 * f + 100 * a.noMember) / 100)
                }), p.shopDetails.push({
                    name: "合计",
                    quantity: c,
                    subTotal: d,
                    member: e,
                    noMember: f
                })
            }, function () {})
        };
        p.close = function () {
            B(), p.searchWorkerIdArr = [], p.searchPayment = "", A()
        }, y()
    }
    angular.module("fieldApp").controller("FmFinanceShopCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Record", "Item", "Venue", "Member", "Product", "Cardrecords", "Finance"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h) {
        var i = this,
            j = function () {
                e.get({}, function (a) {
                    i.admin = a.data.user.name
                }, function () {})
            };
        i.logout = d.logout;
        var k = function () {
            j()
        };
        k()
    }
    angular.module("fieldApp").controller("HeadCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l) {
        var m = this;
        m.id = g.id, m.searchName = g.searchName, m.searchName ? c.searchName = m.searchName : c.searchName = "", m.chooseObject = function (a) {
            m.objectName = a.name, m.telS = a.tel, m._user = a._id, m.chooseObjectFlag = !1
        };
        var n = function () {
            i.index({
                id: m.id
            }, function (a) {
                m.member = a.data.member, m.name = m.member.name, m.tel = m.member.tel, m.member.idCard ? m.idCard = m.member.idCard : m.idCard = "暂无", m.typeName = m.member.type, m.name1 = m.member.name, m.tel1 = m.member.tel, m.idCard1 = m.member.idCard, m.typeName1 = m.member.type, m.speAccount = m.member.specialAccount, m.judge()
            })
        };
        m.update = function () {
            var a = {
                name: m.name,
                tel: m.tel,
                idCard: m.idCard,
                type: m.typeName
            };
            i.update({
                id: m.id
            }, a, function (a) {
                n(), m.toastFlag = !0, k(function () {
                    m.toastFlag = !1
                }, 1e3)
            }, function (a) {
                m.promptERR = !0, m.wordERR = a.data.data, "ValidationError: 该号码已被使用." == m.wordERR && (m.wordERR = "该号码已被使用")
            })
        }, m.chooseType = function (a) {
            m.chooseTypeFlag = !1;
            for (var b = 0; b < m.types.length; b++) m.types[b].select = !1;
            a.select = !0, m.typeName = a.name, m.judge()
        }, m.types = [{
            name: "会员卡",
            select: !0
        }, {
            name: "外来卡",
            select: !1
        }, {
            name: "员工卡",
            select: !1
        }, {
            name: "领导金卡",
            select: !1
        }, {
            name: "保安卡",
            select: !1
        }], m.close = function () {
            m.refundFlag = !1, m.price = "", m.priceFlag = !1, m.promptERR = !1
        }, m.sendSms = function () {
            var a = {
                tel: m.telS,
                _member: m.member._id,
                _user: m._user
            };
            l.resms(a, function (a) {
                m.sendFlag = !0, m.sendToFlag = !1, k(function () {
                    m.sendFlag = !1
                }, 1e3)
            }, function (a) {
                m.promptERR = !0, m.wordERR = a.data.data
            })
        }, m.refund = function () {
            if (!m.price) return void(m.priceFlag = !0);
            var a = {
                refind: 1 * m.price,
                _member: m.member._id,
                code: m.code
            };
            i.refind(a, function (a) {
                m.promptOK = !0, n(), m.close(), n(), p()
            }, function (a) {
                m.promptERR = !0, m.wordERR = a.data.data
            })
        }, m.page = 1, m.itemsPerPage = 10, m.pagination = {
            page: m.page,
            itemsPerPage: m.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, m.judge = function () {
            m.name != m.name1 || m.tel != m.tel1 || m.idCard != m.idCard1 || m.typeName != m.typeName1 ? m.judgeFlag = !0 : m.judgeFlag = !1
        };
        var o = function () {
                var a = {
                    role: "fieldManager"
                };
                e.index(a, function (a) {
                    m.users = a.data.users, m.users.length > 0 && (m.objectName = m.users[0].name, m.telS = m.users[0].tel, m._user = m.users[0]._id)
                }, function () {})
            },
            p = function () {
                var a = {
                    _member: m.id,
                    page: m.pagination.page,
                    itemsPerPage: m.pagination.itemsPerPage
                };
                j.index(a, function (a) {
                    m.records = a.data.records;
                    for (var b = 0; b < m.records.length; b++) {
                        switch (m.records[b].payment) {
                        case "wx":
                            m.records[b].pm = "微信支付";
                            break;
                        case "cash":
                            m.records[b].pm = "现金支付";
                            break;
                        case "alipay":
                            m.records[b].pm = "支付宝支付";
                            break;
                        case "member":
                            m.records[b].pm = "储值卡支付";
                            break;
                        case "member_vir":
                            m.records[b].pm = "虚拟卡支付";
                            break;
                        case "card":
                            m.records[b].pm = "转账支付";
                            break;
                        case "pos":
                            m.records[b].pm = "pos机支付";
                            break;
                        default:
                            m.records[b].pm = "无"
                        }
                        switch (m.records[b].status) {
                        case "refund":
                        case "buy":
                        case "buyTicket":
                        case "buyProduct":
                        case "buyShopProduct":
                            m.records[b].price = "+" + m.records[b].cost;
                            break;
                        case "pay":
                        case "cardRefund":
                        case "refundProduct":
                        case "refundShopProduct":
                            m.records[b].price = "-" + m.records[b].cost
                        }
                    }
                    var c = a.data.count;
                    m.pagination.totalItems = c, m.pagination.numPages = c / m.itemsPerPage
                })
            };
        m.pageChanged = function () {
            q()
        };
        var q = function () {
            n(), p(), o()
        };
        q()
    }
    angular.module("fieldApp").controller("FmMemberDetailCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "Record", "$timeout", "Smscode"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l) {
        var m = this;
        m.page = 1, m.itemsPerPage = 10, m.pagination = {
            page: m.page,
            itemsPerPage: m.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, m.getRecord = function () {
            var a = {
                mix: m.mix,
                page: m.pagination.page,
                itemsPerPage: m.pagination.itemsPerPage
            };
            l.index(a, {
                _org: m._org
            }, function (a) {
                m.events = a.data.events, _.each(m.events, function (a) {
                    switch (a.status) {
                    case "move":
                        a.status = "过户";
                        break;
                    case "updateTel":
                        a.status = "更改绑定手机号";
                        break;
                    case "freeze":
                        a.status = "冻结";
                        break;
                    case "cancelFreeze":
                        a.status = "解除冻结"
                    }
                });
                var b = a.data.count;
                m.pagination.totalItems = b, m.pagination.numPages = b / m.itemsPerPage
            })
        };
        var n = function () {
            e.get({}, function (a) {
                m._org = a.data.user._organization ? a.data.user._organization : a.data.user._id, m.getRecord()
            }, function () {})
        };
        m.pageChanged = function () {
            o()
        };
        var o = function () {
            n()
        };
        o()
    }
    angular.module("fieldApp").controller("FmDocordCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "Record", "$timeout", "Event"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n) {
        var o = this;
        o.addFlag = !1, o.chooseCardFlag = !1, o.idCard = "", o.showCodeBox = !0, o.wxFlag = !0, o.typeName = "会员卡", o.moneySelect = !0, o.oneSelect = !1, o.cardSelect = !1, o.isUsed = !0, o.isBk = !1, o.isAccount = !1, o.printFlag = !0, o.levelDes = "", c.searchName && (o.mix = c.searchName, o.searchName = c.searchName), $("#search").keydown(function (a) {
            13 == a.keyCode && o.search()
        }), o.cardBlue = {
            padding: "10px",
            background: "#00a1ff",
            color: "#fff",
            "border-radius": "4px",
            margin: "0 10px 10px 0",
            border: "1px solid #00a1ff"
        }, o.cardGray = {
            padding: "10px",
            background: "#fff",
            color: "#000",
            "border-radius": "4px",
            margin: "0 10px 10px 0",
            border: "1px solid #ddd"
        }, o.types = [{
            name: "会员卡",
            select: !0
        }, {
            name: "外来卡",
            select: !1
        }, {
            name: "员工卡",
            select: !1
        }, {
            name: "领导金卡",
            select: !1
        }, {
            name: "保安卡",
            select: !1
        }], o.order = {
            _member: "",
            orderDate: null,
            spbill_create_ip: "",
            auth_code: "",
            payment: "alipay",
            orderArr: {
                total: 0,
                fields: []
            }
        }, o.paymentArr = [{
            name: "支付宝",
            value: "alipay",
            image: "singleChoose_imageYes"
        }, {
            name: "微信",
            value: "wx",
            image: "singleChoose_imageNo"
        }, {
            name: "现金",
            value: "cash",
            image: "singleChoose_imageNo"
        }, {
            name: "支票",
            value: "check",
            image: "singleChoose_imageNo"
        }, {
            name: "转账",
            value: "card",
            image: "singleChoose_imageNo"
        }, {
            name: "POS机",
            value: "pos",
            image: "singleChoose_imageNo"
        }], c.mPage ? o.page = c.mPage : (o.page = 1, c.mPage = o.page), o.itemsPerPage = 10, o.pagination = {
            page: c.mPage,
            itemsPerPage: o.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, o.close = function () {
            o.addFlag = !1, o.chooseCardFlag = !1, o.nameFlag = !1, o.phoneFlag = !1, o.sureFlag = !1, o.cardFlag = !1, o.selfFlag = !1, o.idFlag = !1, o.answerFlag = !1, o.changeAccFlag = !1, o.name = "", o.tel = "", o.phone = "", o.iderr = "", o.iFlag = !1, o.pFlag = !1, o.continueFlag = !1, o.idCard = "", o.cardFlag = !1, o.cardNum = "", o.needFlag = !1, o.cFlag = !1, o.payFlag = !1, o.auth_code = "", o.wxFlag = !0, o.defindFlag = !1, o.moneySelect = !0, o.oneSelect = !1, o.cardSelect = !1, o.choosedCardFlag = !1, o.showAuth_codeBox = !1, o.add = !1, o.lengthFlag = !1, o.isReal = "", o.isFreeze = "", q(), o.price = "", o.printFlag = !0, _.each(o.vrr, function (a) {
                a.select = !1
            }), o.chargeVenue = "", o.chargeCardNum = "", o.chargeCardPassword = "", o.moneySelect = !0, o.oneSelect = !1, o.cardSelect = !1, o.speSelect = !1
        }, o.closePrompt = function () {
            o.promptERR = !1, o.toastFlag = !1, o.promptWARN = !1, o.showAuth_codeBox = !1, clearInterval(o.setIntervalId)
        }, o.judgeLength = function () {
            11 == o.phone.length ? (o.lengthFlag = !0, o.codeTel()) : o.lengthFlag = !1
        }, o.defind = function (a) {
            o.addFlag = !0, o.defindFlag = !0, o.memTitle = "实名认证", o.name = a.name, o.phone = a.tel, o.mId = a._id
        }, o.chVenue = function (a) {
            _.each(o.vrr, function (a) {
                a.select = !1
            }), a.select = !0
        }, o.newAdd = function () {
            o.addFlag = !0, o.memTitle = "新增会员", _.each(o.cards, function (a) {
                a.select = !1, a.flag = !1
            }), o.cards.length > 0 && (o.cards[0].select = !0, o.cardName = o.cards[0].name + "(" + o.cards[0].price + "元)", o.cardId = o.cards[0]._id, o.cards[0].flag = !0, o.realPrice = o.cards[0].realPrice)
        }, o.chongzhi = function (a) {
            o.mId = a._id, o.continueFlag = !0, o.cCards = [], a.isReal ? o.cCards = o.cards : _.each(o.cards, function (a) {
                a.select = !1, a.flag = !1, a.price <= 100 && o.cCards.push(a)
            });
            var b = {
                price: "自定义充值",
                select: !1,
                flag: !1
            };
            o.cCards.push(b), o.cCards.length > 0 && (o.cCards[0].select = !0, o.cardName = o.cCards[0].name + "(" + o.cCards[0].price + "元)", o.cardId = o.cCards[0]._id, o.cCards[0].flag = !0, o.realPrice = o.cCards[0].realPrice), a.cards.length > 0 && (o.tot = a.cards[0].total), a.virtualAccount.expires_in ? o.xd = o.getNowFormatDate(new Date(a.virtualAccount.expires_in)) : o.xd = "", o.vPrice = a.virtualAccount.total
        }, o.auth_codeCreateC = function (a) {
            if (o.promptWARN = !0, o.wordWARN = "支付中", 13 == a.keyCode) switch (o.order.payment) {
            case "wx":
                var b = /^[1][0,1,2,3,4,5][0-9]{16}$/;
                if (!b.test(o.auth_code)) return o.auth_code = "", o.promptWARN = !1, o.promptERR = !0, void(o.wordERR = "支付码错误，重新扫码");
                if (o.selfFlag) {
                    var c = {
                        total: o.price,
                        auth_code: o.auth_code,
                        spbill_create_ip: "0.0.0.0"
                    };
                    return void i.randomWx({
                        id: o.mId
                    }, c, function (a) {
                        o.printFlag && (o.tot = 1 * o.tot + 1 * o.price, o.print("微信充值")), o.close(), o.promptWARN = !1, o.getMember(), o.toastFlag = !0, o.wordOK = "充值成功", k(function () {
                            o.toastFlag = !1
                        }, 1e3)
                    }, function (a) {
                        o.promptWARN = !1, o.promptERR = !0, o.wordERR = a.data.data, o.wxFlag = !1, o.getMember()
                    })
                }
                if (o.oneSelect) return void _.each(o.mrr, function (a) {
                    var b = {
                        _venue: a,
                        total: o.price,
                        auth_code: o.auth_code,
                        spbill_create_ip: "0.0.0.0"
                    };
                    i.wxSpeAccount({
                        id: o.mId
                    }, b, function (a) {
                        o.printFlag && (o.tot = 1 * o.tot + 1 * o.price, o.print("专用账户充值")), o.close(), o.promptWARN = !1, o.getMember(), o.toastFlag = !0, o.wordOK = "充值成功", k(function () {
                            o.toastFlag = !1
                        }, 1e3)
                    }, function (a) {
                        o.promptWARN = !1, o.promptERR = !0, o.wordERR = a.data.data, o.wxFlag = !1, o.getMember()
                    })
                });
                var d = {
                    _member: o.mId,
                    _card: o.cardId,
                    auth_code: o.auth_code,
                    spbill_create_ip: "0.0.0.0",
                    payment: "wx"
                };
                j.pay(d, function (a) {
                    o.printFlag && (o.price = o.realPrice, o.tot = 1 * o.tot + 1 * o.price, o.print("微信充值")), o.close(), o.promptWARN = !1, o.toastFlag = !0, o.wordOK = "充值成功", o.showAuth_codeBox = !1, o.auth_code = "", clearInterval(o.setIntervalId), k(function () {
                        o.toastFlag = !1
                    }, 1e3), o.getMember()
                }, function (a) {
                    o.showAuth_codeBox = !1, o.promptWARN = !1, o.auth_code = "", o.deleteFlag = !0, o.payWarn = a.data.data, o.wxFlag = !1, clearInterval(o.setIntervalId), o.getMember()
                });
                break;
            case "alipay":
                var b = /^[25,26,27,28,29,30][0-9]{14,22}$/;
                if (!b.test(o.auth_code)) return o.auth_code = "", o.promptWARN = !1, o.promptERR = !0, void(o.wordERR = "支付码错误，重新扫码");
                if (o.selfFlag) {
                    var c = {
                        total: o.price,
                        auth_code: o.auth_code,
                        _member: o.mId
                    };
                    return void l.randomAlipay(c, function (a) {
                        o.printFlag && (o.tot = 1 * o.tot + 1 * o.price, o.print("支付宝充值")), o.close(), o.promptWARN = !1, o.getMember(), o.toastFlag = !0, o.wordOK = "充值成功", k(function () {
                            o.toastFlag = !1
                        }, 1e3)
                    }, function (a) {
                        o.promptWARN = !1, o.promptERR = !0, o.wordERR = a.data.data, o.wxFlag = !1, o.getMember()
                    })
                }
                if (o.oneSelect) return void _.each(o.mrr, function (a) {
                    var b = {
                        _venue: a,
                        total: o.price,
                        auth_code: o.auth_code
                    };
                    l.aliSpeAccount({
                        way: o.mId
                    }, b, function (a) {
                        o.printFlag && (o.tot = o.tot + o.price, o.print("专用账户充值")), o.close(), o.promptWARN = !1, o.getMember(), o.toastFlag = !0, o.wordOK = "充值成功", k(function () {
                            o.toastFlag = !1
                        }, 1e3)
                    }, function (a) {
                        o.promptWARN = !1, o.promptERR = !0, o.wordERR = a.data.data, o.wxFlag = !1, o.getMember()
                    })
                });
                var d = {
                    _member: o.mId,
                    _card: o.cardId,
                    auth_code: o.auth_code,
                    payment: "alipay"
                };
                l.pay(d, function (a) {
                    o.printFlag && (o.price = o.realPrice, o.tot = o.tot + o.price, o.print("支付宝充值")), o.close(), o.toastFlag = !0, o.wordOK = "充值成功", o.promptWARN = !1, o.showAuth_codeBox = !1, o.auth_code = "", clearInterval(o.setIntervalId), k(function () {
                        o.toastFlag = !1
                    }, 1e3), o.getMember()
                }, function (a) {
                    o.showAuth_codeBox = !1, o.promptWARN = !1, o.deleteFlag = !0, o.auth_code = "", o.payWarn = a.data.data, o.wxFlag = !1, clearInterval(o.setIntervalId), o.getMember()
                })
            }
        }, o.banka = function (a) {
            o.cFlag = !0, o.mId = a._id
        }, o.waySelect = function (a) {
            if (o.chargeVenue = "", "money" == a) o.moneySelect = !0, o.oneSelect = !1, o.cardSelect = !1, o.speSelect = !1;
            else if ("one" == a) {
                if (0 == o.vrr.length) return o.promptERR = !0, void(o.wordERR = "暂无专用场馆，请设置");
                o.moneySelect = !1, o.oneSelect = !0, o.cardSelect = !1, o.speSelect = !1
            } else "card" == a ? (o.moneySelect = !1, o.oneSelect = !1, o.cardSelect = !0, o.speSelect = !1) : "speCard" == a && (o.moneySelect = !1, o.oneSelect = !1, o.cardSelect = !1, o.speSelect = !0, m.index({
                isUsed: !0
            }, function (a) {
                o.venues_clone = a.data.venues, _.each(o.venues_clone, function (a) {
                    a.image = "singleChoose_imageNo2"
                }), o.chargeVenue = o.venues_clone[0], o.venues_clone[0].image = "singleChoose_imageYes2"
            }, function () {}))
        }, o.surePay = function () {
            switch (o.order.payment) {
            case "wx":
            case "alipay":
                o.sureFlag = !1, o.showAuth_codeBox = !0, o.setIntervalId = setInterval(function () {
                    document.getElementById("auth_codeC").focus()
                }, 100);
                break;
            case "cash":
            case "check":
            case "card":
            case "pos":
                var a = {
                    total: o.price,
                    payment: o.order.payment
                };
                i.randomPay({
                    id: o.mId
                }, a, function (a) {
                    o.printFlag && (o.tot = a.data.member.cards[0].total, a.data.member.virtualAccount.expires_in ? o.xd = o.getNowFormatDate(new Date(a.data.member.virtualAccount.expires_in)) : o.xd = "", o.vPrice = a.data.member.virtualAccount.total, o.print("现金充值")), o.close(), o.getMember(), o.toastFlag = !0, o.wordOK = "充值成功", k(function () {
                        o.toastFlag = !1
                    }, 1e3)
                }, function (a) {
                    o.promptWARN = !1, o.promptERR = !0, o.wordERR = a.data.data, o.wxFlag = !1, o.getMember()
                })
            }
        }, o["continue"] = function () {
            if (o.moneySelect && o.selfFlag) return void(o.price > 1e4 ? (o.promptERR = !0, o.wordERR = "只能输入10000以下的数字") : (o.sureFlag = !0, o.sureWarn = "您确定要充值" + o.price + "元吗？"));
            if (o.moneySelect || o.oneSelect) {
                if (o.oneSelect) {
                    o.mrr = [], _.each(o.vrr, function (a) {
                        a.select && o.mrr.push(a._id)
                    });
                    var b = {
                        venues: o.mrr
                    };
                    if (0 == o.mrr.length ? o.iFlag = !0 : o.iFlag = !1, o.price ? o.pFlag = !1 : o.pFlag = !0, o.iFlag || o.pFlag) return;
                    return void i.speAccount({
                        id: o.mId
                    }, b, function (a) {
                        switch (o.order.payment) {
                        case "wx":
                        case "alipay":
                            o.showAuth_codeBox = !0, o.setIntervalId = setInterval(function () {
                                document.getElementById("auth_codeC").focus()
                            }, 100);
                            break;
                        case "cash":
                        case "check":
                        case "card":
                        case "pos":
                            _.each(o.mrr, function (a) {
                                var b = {
                                    _venue: a,
                                    total: o.price,
                                    payment: o.order.payment
                                };
                                i.spePay({
                                    id: o.mId
                                }, b, function (a) {
                                    o.printFlag && (o.tot = a.data.member.cards[0].total, a.data.member.virtualAccount.expires_in ? o.xd = o.getNowFormatDate(new Date(a.data.member.virtualAccount.expires_in)) : o.xd = "", o.vPrice = a.data.member.virtualAccount.total, o.print("专用账户充值")), o.close(), o.promptWARN = !1, o.getMember(), o.toastFlag = !0, o.wordOK = "充值成功", k(function () {
                                        o.toastFlag = !1
                                    }, 1e3)
                                }, function (a) {
                                    o.promptWARN = !1, o.promptERR = !0, o.wordERR = a.data.data, o.wxFlag = !1, o.getMember()
                                })
                            })
                        }
                    }, function (a) {
                        o.promptWARN = !1, o.promptERR = !0, o.wordERR = a.data.data, o.wxFlag = !1, o.getMember()
                    })
                }
                switch (o.order.payment) {
                case "wx":
                case "alipay":
                    o.showAuth_codeBox = !0, o.setIntervalId = setInterval(function () {
                        document.getElementById("auth_codeC").focus()
                    }, 100);
                    break;
                case "cash":
                case "check":
                case "card":
                case "pos":
                    if (o.moneySelect) {
                        var b = {
                            _card: o.cardId,
                            payment: o.order.payment
                        };
                        i.addCard({
                            id: o.mId
                        }, b, function (a) {
                            o.printFlag && (o.tot = a.data.member.cards[0].total, a.data.member.virtualAccount.expires_in ? o.xd = o.getNowFormatDate(new Date(a.data.member.virtualAccount.expires_in)) : o.xd = "", o.vPrice = a.data.member.virtualAccount.total, o.price = o.realPrice, o.print("现金充值")), o.close(), o.promptWARN = !1, o.getMember(), o.toastFlag = !0, o.wordOK = "充值成功", k(function () {
                                o.toastFlag = !1
                            }, 1e3)
                        }, function (a) {
                            o.promptWARN = !1, o.promptERR = !0, o.wordERR = a.data.data, o.wxFlag = !1, o.getMember()
                        })
                    }
                }
            } else {
                if (!o.chargeCardNum) return o.promptERR = !0, void(o.wordERR = "请输入充值卡卡号");
                if (!o.chargeCardPassword) return o.promptERR = !0, void(o.wordERR = "请输入充值卡密码");
                var c = {
                    cardNum: o.chargeCardNum,
                    password: o.chargeCardPassword
                };
                o.chargeVenue && o.speSelect && (c = _.merge(c, {
                    _venue: o.chargeVenue._id
                })), n.charge({
                    id: o.mId
                }, c, function (b) {
                    o.printFlag && (o.tot = b.data.member.cards[0].total, b.data.member.virtualAccount.expires_in ? o.xd = o.getNowFormatDate(new Date(b.data.member.virtualAccount.expires_in)) : o.xd = "", o.vPrice = b.data.member.virtualAccount.total, o.print("充值卡充值")), o.continueFlag = !1, o.toastFlag = !0, o.wordOK = "充值成功", o.wordOK = b.data.data, setTimeout(function () {
                        a.$apply(function () {
                            o.toastFlag = !1
                        })
                    }, 1e3), o.getMember(), o.chargeVenue = "", o.chargeCardNum = "", o.chargeCardPassword = "", o.moneySelect = !0, o.oneSelect = !1, o.cardSelect = !1, o.speSelect = !1
                }, function (a) {
                    "找不到对象：card" == a.data.data ? (o.promptERR = !0, o.wordERR = "充值卡不存在或已使用") : (o.promptERR = !0, o.wordERR = a.data.data)
                })
            }
        }, o.print = function (a) {
            var b = '<div><div><h3 style="font-size:20px">欢迎光临</h3><h3 style="font-size:20px">充值消费小票</h3>操作员：' + o.admin + "</h3></div><span>**********************************</span><div>";
            b = b + "<div>充值方式:" + a + "</div><div>充值金额:" + o.price + "</div><div>现金账户余额:￥" + o.tot + "</div><div>虚拟账户余额:￥" + o.vPrice + "</div><div>有效期:" + o.xd,
                b = b + "</div><div>消费日期:" + o.getNowFormatDate(new Date) + "</div><span>**********************************</span><div>客户签名:</div>";
            var c = getLodop();
            c.PRINT_INIT(""), c.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), c.SET_PRINTER_INDEXA(-1), c.SET_PRINT_PAGESIZE(3, 800, 100, ""), c.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", b), c.PRINT()
        }, o.getNowFormatDate = function (a) {
            var b = "-",
                c = ":",
                d = a.getMonth() + 1,
                e = a.getDate();
            d >= 1 && 9 >= d && (d = "0" + d), e >= 0 && 9 >= e && (e = "0" + e);
            var f = a.getFullYear() + b + d + b + e + " " + a.getHours() + c + a.getMinutes() + c + a.getSeconds();
            return f
        }, o.showSelect = function (a) {
            switch (a) {
            case "card":
                o.chooseCardFlag = !o.chooseCardFlag
            }
        }, o.freeze = function (a) {
            var b = {
                _member: a._id
            };
            i.freeze(b, function (a) {
                o.toastFlag = !0, o.wordOK = "冻结成功", k(function () {
                    o.toastFlag = !1
                }, 1e3), o.getMember()
            }, function (a) {
                o.phoneFlag = !0, o.errPhone = a.data.data
            })
        }, o.cfreeze = function (a) {
            var b = {
                _member: a._id
            };
            i.cfreeze(b, function (a) {
                o.toastFlag = !0, o.wordOK = "解除冻结成功", k(function () {
                    o.toastFlag = !1
                }, 1e3), o.getMember()
            }, function (a) {
                o.phoneFlag = !0, o.errPhone = a.data.data
            })
        }, o.choosePayment = function (a) {
            _.each(o.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), o.order.auth_code = "", a.image = "singleChoose_imageYes", o.order.payment = a.value, "alipay" == a.value || "wx" == a.value ? o.showCodeBox = !0 : o.showCodeBox = !1
        }, o.chooseState = function (a) {
            _.each(o.useStateArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", o.isBk = a.isUsed
        }, o.useStateArr = [{
            name: "需要",
            image: "singleChoose_imageNo",
            isUsed: !0
        }, {
            name: "不需要",
            image: "singleChoose_imageYes",
            isUsed: !1
        }], o.auth_codeCreate = function (a) {
            if (o.promptWARN = !0, o.wordWARN = "支付中", 13 == a.keyCode) switch (o.order.payment) {
            case "wx":
                var b = /^[1][0,1,2,3,4,5][0-9]{16}$/;
                if (!b.test(o.auth_code)) return o.auth_code = "", o.promptWARN = !1, o.promptERR = !0, void(o.wordERR = "支付码错误，重新扫码");
                if (o.defindFlag) {
                    o.needFlag && o.isBk ? o.isBk = !0 : o.isBk = !1, o.wxFlag = !0;
                    var c = {
                        idCard: o.idCard,
                        tel: o.phone,
                        name: o.name
                    };
                    return i.update({
                        id: o.mId
                    }, c, function (a) {
                        var b = {
                            _member: o.mId,
                            _card: o.cardId,
                            auth_code: o.auth_code,
                            spbill_create_ip: "0.0.0.0",
                            isCost: o.isBk,
                            cardNo: o.cardNum
                        };
                        j.pay(b, function (a) {
                            o.close(), o.toastFlag = !0, o.wordOK = "支付成功", o.auth_code = "", k(function () {
                                o.toastFlag = !1
                            }, 1e3), o.getMember()
                        }, function (a) {
                            o.auth_code = "", o.deleteFlag = !0, o.payWarn = a.data.data, o.wxFlag = !1, o.getMember()
                        })
                    }, function (a) {
                        o.auth_code = "", o.deleteFlag = !0, o.payWarn = a.data.data, o.wxFlag = !1
                    }), o.promptWARN = !1, clearInterval(o.setIntervalId), void(o.showAuth_codeBox = !1)
                }
                var d = {
                    name: o.name,
                    tel: o.phone,
                    _card: "",
                    idCard: o.idCard,
                    type: o.typeName,
                    payment: "wx"
                };
                i.create(d, function (a) {
                    o.mId = a.data.member._id, o.needFlag && o.isBk ? o.isBk = !0 : o.isBk = !1, o.wxFlag = !0;
                    var b = {
                        _member: a.data.member._id,
                        _card: o.cardId,
                        auth_code: o.auth_code,
                        spbill_create_ip: "0.0.0.0",
                        isCost: o.isBk,
                        cardNo: o.cardNum
                    };
                    j.pay(b, function (a) {
                        clearInterval(o.setIntervalId), o.close(), o.toastFlag = !0, o.wordOK = "支付成功", o.promptWARN = !1, o.showAuth_codeBox = !1, o.auth_code = "", k(function () {
                            o.toastFlag = !1
                        }, 1e3), o.getMember()
                    }, function (a) {
                        clearInterval(o.setIntervalId), o.auth_code = "", o.showAuth_codeBox = !1, o.promptWARN = !1, o.deleteFlag = !0, o.payWarn = a.data.data, o.wxFlag = !1, o.getMember()
                    })
                }, function (a) {
                    clearInterval(o.setIntervalId), o.promptWARN = !1, o.showAuth_codeBox = !1, 402 == a.data.code ? (o.phoneFlag = !0, o.errPhone = "手机号码格式错误") : 500 == a.data.code && (o.phoneFlag = !0, o.errPhone = "该手机号已被使用", o.payFlag = !1, o.addFlag = !0)
                });
                break;
            case "alipay":
                var b = /^[25,26,27,28,29,30][0-9]{14,22}$/;
                if (!b.test(o.auth_code)) return o.auth_code = "", o.promptWARN = !1, o.promptERR = !0, void(o.wordERR = "支付码错误，重新扫码");
                if (o.defindFlag) {
                    o.needFlag && o.isBk ? o.isBk = !0 : o.isBk = !1, o.wxFlag = !0;
                    var c = {
                        idCard: o.idCard,
                        tel: o.phone,
                        name: o.name
                    };
                    return i.update({
                        id: o.mId
                    }, c, function (a) {
                        var b = {
                            _member: o.mId,
                            _card: o.cardId,
                            auth_code: o.auth_code,
                            isCost: o.isBk,
                            cardNo: o.cardNum
                        };
                        l.pay(b, function (a) {
                            o.close(), o.toastFlag = !0, o.wordOK = "支付成功", o.auth_code = "", k(function () {
                                o.toastFlag = !1
                            }, 1e3), o.getMember()
                        }, function (a) {
                            o.getMember(), o.deleteFlag = !0, o.auth_code = "", o.payWarn = a.data.data, o.wxFlag = !1
                        })
                    }, function (a) {
                        o.deleteFlag = !0, o.auth_code = "", o.payWarn = a.data.data
                    }), clearInterval(o.setIntervalId), o.showAuth_codeBox = !1, void(o.promptWARN = !1)
                }
                var d = {
                    name: o.name,
                    tel: o.phone,
                    _card: "",
                    idCard: o.idCard,
                    type: o.typeName,
                    payment: "alipay"
                };
                i.create(d, function (a) {
                    o.mId = a.data.member._id, o.needFlag && o.isBk ? o.isBk = !0 : o.isBk = !1, o.wxFlag = !0;
                    var b = {
                        _member: o.mId,
                        _card: o.cardId,
                        auth_code: o.auth_code,
                        isCost: o.isBk,
                        cardNo: o.cardNum
                    };
                    l.pay(b, function (a) {
                        clearInterval(o.setIntervalId), o.close(), o.toastFlag = !0, o.wordOK = "支付成功", o.promptWARN = !1, o.showAuth_codeBox = !1, o.auth_code = "", k(function () {
                            o.toastFlag = !1
                        }, 1e3), o.getMember()
                    }, function (a) {
                        clearInterval(o.setIntervalId), o.getMember(), o.promptWARN = !1, o.auth_code = "", o.deleteFlag = !0, o.showAuth_codeBox = !1, o.payWarn = a.data.data, o.wxFlag = !1
                    })
                }, function (a) {
                    clearInterval(o.setIntervalId), o.promptWARN = !1, o.showAuth_codeBox = !1, 402 == a.data.code ? (o.phoneFlag = !0, o.errPhone = "手机号码格式错误") : 500 == a.data.code && (o.phoneFlag = !0, o.errPhone = "该手机号已被使用", o.payFlag = !1, o.addFlag = !0)
                })
            }
        }, o.create = function () {
            if (o.defindFlag) return void o.deFun();
            switch (o.order.orderDate || (o.order.orderDate = new Date), o.order.orderDate = new Date(o.order.orderDate).getTime(), o.order.payment) {
            case "wx":
            case "alipay":
                o.showAuth_codeBox = !0, o.setIntervalId = setInterval(function () {
                    document.getElementById("auth_code").focus()
                }, 100);
                break;
            case "cash":
            case "check":
            case "card":
            case "pos":
                var a = {
                    name: o.name,
                    tel: o.phone,
                    _card: o.cardId,
                    idCard: o.idCard,
                    type: o.typeName,
                    payment: o.order.payment
                };
                i.create(a, function (a) {
                    if (o.needFlag) {
                        var b = {
                            _member: a.data.member._id,
                            cardNo: o.cardNum
                        };
                        o.isUsed && (b = _.merge(b, {
                            isCost: !0,
                            payment: o.order.payment
                        })), i.cardBind(b, function (a) {
                            p()
                        }, function (a) {
                            o.phoneFlag = !0, o.errPhone = a.data.data
                        })
                    }
                    o.promptWARN = !1, o.close(), o.getMember()
                }, function (a) {
                    o.promptWARN = !1, 402 == a.data.code ? (o.phoneFlag = !0, o.errPhone = "手机号码格式错误") : 500 == a.data.code && (o.phoneFlag = !0, o.errPhone = "该手机号已被使用", o.payFlag = !1, o.addFlag = !0)
                })
            }
        }, o.chooseCard = function (a) {
            o.chooseCardFlag = !1, o.cardName = a.name, o.cardId = a._id, o.realPrice = a.realPrice
        }, o.judge = function (a) {
            switch (a) {
            case "name":
                o.name ? o.nameFlag = !1 : o.nameFlag = !0;
                break;
            case "phone":
                o.phone ? o.phoneFlag = !1 : o.phoneFlag = !0;
                break;
            case "tel":
                if (11 == o.tel.length) {
                    var b = {
                        mix: o.tel
                    };
                    i.index(b, function (a) {
                        o.answerFlag = !0, 1 == a.data.members.length ? (o.jFlag = !0, o.name = a.data.members[0].name, o.toId = a.data.members[0]._id) : o.jFlag = !1
                    }, function (a) {
                        o.promptERR = !0, o.wordERR = a.data.data
                    })
                }
            }
        }, o.move = function () {
            if (11 != o.tel.length) return o.promptERR = !0, void(o.wordERR = "请填写正确手机号");
            var a = {
                move_from: o.fromId,
                move_to: o.toId
            };
            i.move(a, function (a) {
                o.toastFlag = !0, o.wordOK = "账户过户成功", o.getMember(), k(function () {
                    o.toastFlag = !1
                }, 1e3), o.close()
            }, function (a) {
                o.promptERR = !0, o.wordERR = a.data.data
            })
        }, o.bk = function (a) {
            if (o.promptWARN = !0, o.wordWARN = "支付中", 13 == a.keyCode) switch (o.order.payment) {
            case "wx":
                var b = /^[1][0,1,2,3,4,5][0-9]{16}$/;
                if (!b.test(o.auth_code)) return o.auth_code = "", o.promptWARN = !1, o.promptERR = !0, void(o.wordERR = "支付码错误，重新扫码");
                o.wxFlag = !0;
                var c = {
                    _member: o.mId,
                    cardNo: o.cardNum,
                    auth_code: o.auth_code,
                    spbill_create_ip: "0.0.0.0"
                };
                i.wxPayBind(c, function (a) {
                    if (o.defindFlag) {
                        var b = {
                            idCard: o.idCard,
                            tel: o.phone,
                            name: o.name
                        };
                        i.update({
                            id: o.mId
                        }, b, function (a) {
                            o.close(), o.toastFlag = !0, o.wordOK = "支付成功", o.promptWARN = !1, o.showAuth_codeBox = !1, o.auth_code = "", clearInterval(o.setIntervalId), k(function () {
                                o.toastFlag = !1
                            }, 1e3), o.getMember()
                        }, function (a) {
                            o.deleteFlag = !0, o.payWarn = a.data.data
                        })
                    } else o.close(), o.toastFlag = !0, o.wordOK = "支付成功", o.promptWARN = !1, o.showAuth_codeBox = !1, o.auth_code = "", clearInterval(o.setIntervalId), k(function () {
                        o.toastFlag = !1
                    }, 1e3), o.getMember()
                }, function (a) {
                    o.auth_code = "", o.showAuth_codeBox = !1, o.promptWARN = !1, o.deleteFlag = !0, o.payWarn = a.data.data, clearInterval(o.setIntervalId), o.wxFlag = !1, o.getMember()
                });
                break;
            case "alipay":
                var b = /^[25,26,27,28,29,30][0-9]{14,22}$/;
                if (!b.test(o.auth_code)) return o.auth_code = "", o.promptWARN = !1, o.promptERR = !0, void(o.wordERR = "支付码错误，重新扫码");
                var c = {
                    _member: o.mId,
                    cardNo: o.cardNum,
                    auth_code: o.auth_code
                };
                l.payBind(c, function (a) {
                    if (o.defindFlag) {
                        var b = {
                            idCard: o.idCard,
                            tel: o.phone,
                            name: o.name
                        };
                        i.update({
                            id: o.mId
                        }, b, function (a) {
                            o.close(), o.toastFlag = !0, o.wordOK = "支付成功", o.promptWARN = !1, o.showAuth_codeBox = !1, o.auth_code = "", clearInterval(o.setIntervalId), k(function () {
                                o.toastFlag = !1
                            }, 1e3), o.getMember()
                        }, function (a) {
                            o.deleteFlag = !0, o.payWarn = a.data.data
                        })
                    } else o.close(), o.toastFlag = !0, o.wordOK = "支付成功", o.promptWARN = !1, o.showAuth_codeBox = !1, o.auth_code = "", clearInterval(o.setIntervalId), k(function () {
                        o.toastFlag = !1
                    }, 1e3), o.getMember()
                }, function (a) {
                    o.auth_code = "", o.showAuth_codeBox = !1, o.promptWARN = !1, o.deleteFlag = !0, o.payWarn = a.data.data, clearInterval(o.setIntervalId), o.wxFlag = !1, o.getMember()
                })
            }
        }, o.deFun = function () {
            switch (o.order.payment) {
            case "wx":
            case "alipay":
                o.showAuth_codeBox = !0, o.setIntervalId = setInterval(function () {
                    document.getElementById("bk").focus()
                }, 100);
                break;
            case "cash":
            case "check":
            case "card":
            case "pos":
                var a = {
                    _member: o.mId,
                    cardNo: o.cardNum,
                    isCost: !0,
                    payment: o.order.payment
                };
                i.cardBind(a, function (a) {
                    var b = {
                        idCard: o.idCard,
                        tel: o.phone,
                        name: o.name
                    };
                    i.update({
                        id: o.mId
                    }, b, function (a) {
                        o.close(), o.toastFlag = !0, o.wordOK = "支付成功", k(function () {
                            o.toastFlag = !1
                        }, 1e3), o.getMember(), p()
                    }, function (a) {
                        o.deleteFlag = !0, o.payWarn = a.data.data
                    })
                }, function (a) {
                    o.phoneFlag = !0, o.errPhone = a.data.data
                })
            }
        }, o.bind = function () {
            if (!o.cardNum) return void(o.cardFlag = !0);
            if (o.isBk) switch (o.order.payment) {
            case "wx":
            case "alipay":
                o.showAuth_codeBox = !0, o.setIntervalId = setInterval(function () {
                    document.getElementById("fillCard").focus()
                }, 100);
                break;
            case "cash":
            case "check":
            case "card":
            case "pos":
                var a = {
                    _member: o.mId,
                    cardNo: o.cardNum,
                    isCost: !0,
                    payment: o.order.payment
                };
                i.cardBind(a, function (a) {
                    o.close(), o.toastFlag = !0, o.wordOK = "支付成功", k(function () {
                        o.toastFlag = !1
                    }, 1e3), o.getMember(), p()
                }, function (a) {
                    o.phoneFlag = !0, o.errPhone = a.data.data
                })
            } else {
                var a = {
                    _member: o.mId,
                    cardNo: o.cardNum
                };
                i.cardBind(a, function (a) {
                    o.close(), o.wordOK = "绑定成功", o.toastFlag = !0, k(function () {
                        o.toastFlag = !1
                    }, 1e3), o.getMember(), p()
                }, function (a) {
                    o.phoneFlag = !0, o.errPhone = a.data.data
                })
            }
        }, o.finish = function () {
            if (o.name ? o.nameFlag = !1 : o.nameFlag = !0, o.phone) {
                var a = /^(((13[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(14[0-9]{1})|(18[0-9]{1}))+\d{8})$/;
                a.test(o.phone) ? o.phoneFlag = !1 : (o.errPhone = "请输入有效的手机号码！", o.phoneFlag = !0)
            } else o.errPhone = "此项为必填项", o.phoneFlag = !0; if (!o.nameFlag && !o.phoneFlag) {
                if (!o.defindFlag) return o.payFlag = !0, o.addFlag = !1, void(o.isBk && o.needFlag ? (o.rp = o.realPrice + o.cardCost, o.add = !0) : o.rp = o.realPrice);
                if (!o.needFlag) {
                    if (!o.idCard) return void(o.idFlag = !0);
                    var b = {
                        idCard: o.idCard,
                        tel: o.phone,
                        name: o.name
                    };
                    return void i.update({
                        id: o.mId
                    }, b, function (a) {
                        o.close(), o.toastFlag = !0, o.wordOK = "认证成功", k(function () {
                            o.toastFlag = !1
                        }, 1e3), o.getMember()
                    }, function (a) {
                        o.deleteFlag = !0, o.payWarn = a.data.data
                    })
                }
                if (!o.cardNum) return void(o.cardFlag = !0);
                if (!o.isBk) {
                    var b = {
                        idCard: o.idCard,
                        tel: o.phone,
                        name: o.name
                    };
                    return void i.update({
                        id: o.mId
                    }, b, function (a) {
                        var b = {
                            _member: o.mId,
                            cardNo: o.cardNum
                        };
                        i.cardBind(b, function (a) {
                            o.close(), o.toastFlag = !0, o.wordOK = "认证成功", k(function () {
                                o.toastFlag = !1
                            }, 1e3), o.getMember(), p()
                        }, function (a) {
                            o.phoneFlag = !0, o.errPhone = a.data.data
                        })
                    }, function (a) {
                        o.deleteFlag = !0, o.payWarn = a.data.data
                    })
                }
                o.payFlag = !0, o.addFlag = !1, o.rp = o.cardCost
            }
        };
        var p = function () {
                e.get({}, function (a) {
                    var b = a.data.user._organization ? a.data.user._organization : a.data.user._id;
                    o.cardCount = a.data.user.cardNum, e.getOrgInfo({
                        id: b
                    }, function (a) {
                        o._id = a.data.user._id, o.cardCost = a.data.user.cardCost, o.admin = a.data.user.name, q()
                    }, function () {})
                }, function () {})
            },
            q = function () {
                var a = {
                    state: "all",
                    _org: o._id,
                    sortBy: "realPrice"
                };
                j.index(a, function (a) {
                    a.data.cards.length > 0 && (a.data.cards[0].select = !0, o.cardName = a.data.cards[0].name + "(" + a.data.cards[0].price + "元)", o.cardId = a.data.cards[0]._id, a.data.cards[0].flag = !0, o.realPrice = a.data.cards[0].realPrice), o.cards = a.data.cards
                })
            };
        o.chooseNewCard = function (a) {
            o.choosedCardFlag = !1, o.cardId = a._id, o.cardName = a.name + "(" + a.price + "元)", o.realPrice = a.realPrice
        }, o.choose = function (a) {
            _.each(o.cCards, function (a) {
                a.select = !1
            }), a.select = !0, "自定义充值" == a.price ? o.selfFlag = !0 : (o.cardId = a._id, o.selfFlag = !1, o.realPrice = a.realPrice)
        }, o.chooseType = function (a) {
            for (var b = 0; b < o.types.length; b++) o.types[b].select = !1;
            a.select = !0, o.choosedTypeFlag = !1, o.typeName = a.name
        }, o.pageChanged = function () {
            c.mPage = o.pagination.page, o.mix = o.searchName, o.getMember()
        }, o.search = function () {
            o.pagination.page = 1, o.pagination.itemsPerPage = 10, o.mix = o.searchName, o.getMember()
        }, o.getMember = function () {
            k(function () {
                o.levelFlag = !1, o.realFlag = !1, o.freezeFlag = !1;
                var a = {
                    isFreezed: o.isFreeze,
                    isReal: o.isReal,
                    levelDes: o.levelDes,
                    page: o.pagination.page,
                    itemsPerPage: o.pagination.itemsPerPage,
                    mix: o.mix,
                    state: o.state
                };
                i.index(a, function (a) {
                    o.mix = "", o.members = a.data.members;
                    for (var b = 0; b < o.members.length; b++) o.members[b].cardNo && o.members[b].cardNo.length > 9 && (o.members[b].cardNo = o.members[b].cardNo.substring(o.members[b].cardNo.length - 9, o.members[b].cardNo.length)), o.members[b].memberNo && o.members[b].memberNo.length > 9 && (o.members[b].memberNo = o.members[b].memberNo.substring(o.members[b].memberNo.length - 9, o.members[b].memberNo.length)), o.members[b].virtualAccount.expires_in && ((new Date).getTime() > new Date(o.members[b].virtualAccount.expires_in).getTime() ? o.members[b].virFlag = !0 : o.members[b].virFlag = !1), o.members[b].cards.length > 0 ? o.members[b].p = o.members[b].cards[0].total : o.members[b].p = "0", _.each(o.members[b].specialAccount, function (a) {
                        "5a1e4774138f87e51c2e79e9" == a._venue ? (o.members[b].accFlag = !0, o.members[b].accTot = a.total) : (o.members[b].accFlag = !1, o.members[b].accTot = 0)
                    });
                    var c = a.data.count;
                    o.pagination.totalItems = c, o.pagination.numPages = c / o.itemsPerPage
                })
            }, 100)
        }, o.initEmpty = function () {
            o.order = {
                _member: "",
                spbill_create_ip: "",
                auth_code: "",
                payment: "alipay",
                _card: ""
            }
        }, o.codeTel = function () {
            var a = {
                tel: o.phone,
                _org: o._id
            };
            i.judge(a, function (a) {
                a.data.isValued && (o.promptERR = !0, o.wordERR = "该手机号已被使用")
            }, function (a) {
                o.promptERR = !0, o.wordERR = a.data.data
            })
        };
        var r = function () {
                m.index({}, function (a) {
                    o.venues = a.data.venues, o.vrr = [], _.each(o.venues, function (a) {
                        a.openSpe && o.vrr.push(a)
                    })
                }, function (a) {})
            },
            s = function () {
                p(), o.getMember(), q(), r()
            };
        o.chooseChargeVenue = function (a) {
            o.chargeVenue ? o.chargeVenue._id == a._id ? (o.chargeVenue.image = "singleChoose_imageNo2", o.chargeVenue = "") : (o.chargeVenue.image = "singleChoose_imageNo2", o.chargeVenue = a, o.chargeVenue.image = "singleChoose_imageYes2") : (o.chargeVenue = a, o.chargeVenue.image = "singleChoose_imageYes2")
        }, s()
    }
    angular.module("fieldApp").controller("FmMemberCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "Card", "$timeout", "Alipay", "Venue", "Tucard"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r) {
        var s = this;
        window.addEventListener("popstate", function (a) {
            clearInterval(s.setIntervalId)
        }, !1);
        var t = function () {
                s.page = 1, s.itemsPerPage = s.searchPageValue ? s.searchPageValue : 10, s.pagination = {
                    page: s.page,
                    itemsPerPage: s.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            u = function () {
                var a = {
                    page: s.pagination.page,
                    itemsPerPage: s.pagination.itemsPerPage,
                    isValued: "all"
                };
                s.mix && (a = _.merge(a, {
                    mix: s.mix
                })), r.getIndex(a, function (a) {
                    s.memberServices = a.data.memberServices;
                    for (var b = 0; b < s.memberServices.length; b++) s.memberServices[b].freezeDate && new Date(s.memberServices[b].freezeDate) > new Date ? s.memberServices[b].isFreeze = !0 : s.memberServices[b].isFreeze = !1, s.memberServices[b].endDate ? s.memberServices[b].isActive = !0 : s.memberServices[b].isActive = !1, "date" == s.memberServices[b].service.serviceType ? s.memberServices[b].endDate && new Date(s.memberServices[b].endDate) < new Date ? s.memberServices[b].isEnd = !0 : s.memberServices[b].isEnd = !1 : s.memberServices[b].endDate && new Date(s.memberServices[b].endDate) < new Date || s.memberServices[b].valueLeft <= 0 ? s.memberServices[b].isEnd = !0 : s.memberServices[b].isEnd = !1;
                    var c = a.data.count;
                    s.pagination.totalItems = c, s.pagination.numPages = c / s.itemsPerPage
                }, function () {})
            },
            v = function () {
                s.showMemberService = {
                    _memberService: void 0,
                    value: void 0,
                    name: void 0,
                    tel: void 0,
                    date: void 0,
                    cardNo: void 0,
                    _toMember: void 0,
                    _toMemberName: void 0,
                    isCost: !1,
                    payment: "cash",
                    spbill_create_ip: "1.1.1.1",
                    auth_code: void 0
                }
            },
            w = function () {
                s.payments = [{
                    img: "chooseImgTrue",
                    name: "现金",
                    value: "cash"
                }, {
                    img: "chooseImgFalse",
                    name: "支付宝",
                    value: "alipay"
                }, {
                    img: "chooseImgFalse",
                    name: "微信",
                    value: "wx"
                }, {
                    img: "chooseImgFalse",
                    name: "转账",
                    value: "card"
                }, {
                    img: "chooseImgFalse",
                    name: "支票",
                    value: "check"
                }, {
                    img: "chooseImgFalse",
                    name: "POS机",
                    value: "pos"
                }]
            },
            x = function () {
                s.showChangeDate = "请选择冻结到哪天"
            },
            y = function () {
                s.menberBg = !1, s.postponeCard = !1, s.edit = !1, s.changeCard = !1, s.freezeCard = !1, s.changeName = !1, s.againCheckBox = !1
            },
            z = function () {
                return payCodeCheck(s.auth_code, "wx") ? (s.showMemberService.auth_code = s.auth_code, void i.wxPayBind({}, s.showMemberService, function (a) {
                    s.auth_code = void 0, s.close(), C("ok", "换卡成功"), u()
                }, function (a) {
                    s.auth_code = void 0, C("err", a.data.data)
                })) : void C("err", "支付码错误，重新扫码")
            },
            A = function () {
                return payCodeCheck(s.auth_code, "alipay") ? (s.showMemberService.auth_code = s.auth_code, void l.payBind({}, s.showMemberService, function (a) {
                    s.auth_code = void 0, s.close(), C("ok", "换卡成功"), u()
                }, function (a) {
                    s.auth_code = void 0, C("err", a.data.data)
                })) : void C("err", "支付码错误，重新扫码")
            },
            B = function () {
                t(), u(), v(), w(), y(), x()
            };
        s.mySearch = function () {
            s.pagination.page = 1, u()
        }, s.enterCheck = function (a) {
            13 == a.keyCode && (console.log("键盘回车查询数据"), s.mySearch())
        }, s.showPostponeCard = function (a) {
            s.menberBg = !0, s.postponeCard = !0, s.showMemberService._memberService = a
        }, s.postponeCardSure = function () {
            return isNaN(s.showMemberService.value) ? void C("err", "请输入数字") : parseInt(s.showMemberService.value) < 0 ? void C("err", "请输入大于0的数字") : (s.showMemberService.value = parseInt(s.showMemberService.value), void r.postpone({}, s.showMemberService, function () {
                s.close(), C("ok", "延期成功"), u()
            }, function (a) {
                C("ok", a.data.data)
            }))
        }, s.showEdit = function (a) {
            s.menberBg = !0, s.edit = !0, s.showMemberService._memberService = a._id, s.showMemberService.name = a.name, s.showMemberService.tel = a.tel
        }, s.update = function () {
            r.update({
                id: s.showMemberService._memberService
            }, s.showMemberService, function () {
                s.close(), C("ok", "编辑信息成功"), u()
            }, function (a) {
                C("err", a.data.data)
            })
        }, s.showChangeCard = function (a) {
            s.menberBg = !0, s.changeCard = !0, s.showMemberService._memberService = a
        }, s.choosePayment = function (a) {
            for (var b = 0; b < s.payments.length; b++) s.payments[b].img = "chooseImgFalse";
            a.img = "chooseImgTrue", s.showMemberService.payment = a.value
        }, s.changeBtnSure = function () {
            s.showMemberService.isCost ? "alipay" == s.showMemberService.payment || "wx" == s.showMemberService.payment ? (s.promptPay = !0, s.wordPay = "请扫描用户二维码", s.auth_code = "", s.setIntervalId = setInterval(function () {
                document.getElementById("auth_code").focus()
            }, 100)) : s.againCheckBox = !0 : s.otherPay()
        }, s.otherPay = function () {
            r.changeCard({}, s.showMemberService, function () {
                s.close(), C("ok", "换卡成功"), u()
            }, function (a) {
                C("err", a.data.data)
            })
        }, s.auth_codePay = function (a) {
            if (13 == a.keyCode) switch (s.closePrompt(), s.promptWARN = !0, s.wordWARN = "支付中", s.showMemberService.payment) {
            case "wx":
                z();
                break;
            case "alipay":
                A()
            }
        }, s.showFreezeCard = function (a) {
            s.menberBg = !0, s.freezeCard = !0, s.showMemberService._memberService = a
        }, s.closeChangeDateBox = function () {
            s.changeDateBox = !1, setTimeout(function () {
                s.showChangeDate = s.changeDate, a.$apply()
            }, 100)
        }, s.dongBtn = function () {
            return "请选择冻结到哪天" == s.showChangeDate ? void C("err", "请选择日期") : (s.showMemberService.date = new Date(s.showChangeDate).getTime(), void r.freeze({}, s.showMemberService, function (a) {
                s.close(), C("ok", "冻结成功"), u()
            }, function (a) {
                C("err", a.data.data)
            }))
        }, s.showChangeName = function (a) {
            s.menberBg = !0, s.changeName = !0, s.showMemberService._memberService = a
        }, s.searchMember = function () {
            isTel(s.showMemberService.tel) && i.indexByTel({
                tel: s.showMemberService.tel
            }, function (a) {
                s.showMemberService._toMember = a.data.member._id, s.showMemberService._toMemberName = a.data.member.name
            }, function (a) {
                s.showMemberService.tel = void 0, C("err", "手机号输入不正确")
            })
        }, s.transferCard = function () {
            r.change({}, s.showMemberService, function (a) {
                s.close(), C("ok", "过户成功"), u()
            }, function (a) {
                C("err", a.data.data)
            })
        }, s.close = function () {
            y(), v(), w(), x()
        }, s.pageChanged = function () {
            u()
        }, s.closePrompt = function () {
            s.promptPay = !1, clearInterval(s.setIntervalId)
        };
        var C = function (b, c) {
            switch (s.promptOK = !1, s.promptERR = !1, s.promptWARN = !1, b) {
            case "ok":
                s.promptOK = !0, s.wordOK = c;
                break;
            case "err":
                s.promptERR = !0, s.wordERR = c
            }
            setTimeout(function () {
                s.promptOK = !1, s.promptERR = !1, a.$apply()
            }, 1500)
        };
        B()
    }
    angular.module("fieldApp").controller("FmVipTableCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "Item", "Record", "Alipay", "Time", "$timeout", "Venue", "Tucard", "Ticket", "MemberService"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
        var q = this;
        q.titleState = f.params.state || "sale";
        var r, s = function () {
                k.index({
                    isUsed: !0
                }, function (a) {
                    q.venues = [{
                        name: "全部"
                    }].concat(a.data.venues)
                }, function () {})
            },
            t = function () {
                n.index({}, function (a) {
                    q.productCategories = [{
                        name: "全部"
                    }].concat(a.data.productcategories)
                }, function () {})
            },
            u = function () {
                e.index({}, function (a) {
                    q.workers = a.data.users, v()
                }, function () {})
            },
            v = function () {
                e.get({}, function (a) {
                    q.me = [], q.me.push(a.data.user), q.workers = [{
                        name: "全部"
                    }].concat(q.me.concat(q.workers)), "organization" == q.me[0].role ? q.organization = q.me[0] : e.getOrgInfo({
                        id: q.me[0]._organization
                    }, function (a) {
                        q.organization = a.data.user
                    }, function () {})
                }, function () {})
            },
            w = function () {
                var a = {
                    page: q.pagination.page,
                    itemsPerPage: q.pagination.itemsPerPage,
                    statuses: ["buyProduct", "refundProduct"]
                };
                q.searchFirstId && (a = _.merge(a, {
                    _firstCategory: q.searchFirstId
                })), q.searchSecondId && (a = _.merge(a, {
                    _secondCategory: q.searchSecondId
                })), q.searchVenueId && (a = _.merge(a, {
                    venues: [q.searchVenueId]
                })), q.searchPayment && (a = _.merge(a, {
                    payment: q.searchPayment
                })), i.index(a, function (a) {
                    q.records = a.data.records, _.each(q.records, function (a) {
                        if (a.state) a.cost = ("add" == a.state ? "+" : "-") + a.cost;
                        else switch (a.status) {
                        case "buyProduct":
                            a.cost = "+" + a.cost;
                            break;
                        case "refundProduct":
                            a.cost = "-" + a.cost
                        }
                        switch (a.payment) {
                        case "wx":
                            a.payment = "微信支付";
                            break;
                        case "card":
                            a.payment = "转账支付";
                            break;
                        case "cash":
                            a.payment = "现金支付";
                            break;
                        case "member":
                            a.payment = "储值卡支付";
                            break;
                        case "member_vir":
                            a.payment = "虚拟卡支付";
                            break;
                        case "alipay":
                            a.payment = "支付宝支付";
                            break;
                        case "check":
                            a.payment = "支票支付";
                            break;
                        case "pos":
                            a.payment = "POS机支付";
                            break;
                        default:
                            a.payment = "无"
                        }
                    });
                    var b = a.data.count;
                    q.pagination.totalItems = b, q.pagination.numPages = b / q.itemsPerPage
                }, function () {})
            },
            x = function () {
                q.searchVenueId = "", q.searchItemId = "", q.searchFirstId = "", q.searchSecondId = "", q.searchWorkerId = "", q.searchPayment = "", q.showItemName = "选择项目", q.showVenueName = "选择场馆", q.showFirstName = "选择一级类目", q.showSecondName = "选择二级类目", q.showWorkerName = "提交人", q.showPaymentName = "支付方式", q.searchProductName = "", q.buyPayment = "alipay", q.buyProduct = "", q.name = "", q.price = "", q.remark = "", q.errState = "add", q.errRecordId = "", q.errPrice = "", q.errRemark = "", q.paymentArr = [{
                    name: "支付宝",
                    image: "singleChoose_imageYes",
                    value: "alipay"
                }, {
                    name: "微信",
                    image: "singleChoose_imageNo",
                    value: "wx"
                }, {
                    name: "现金",
                    image: "singleChoose_imageNo",
                    value: "cash"
                }, {
                    name: "转账",
                    image: "singleChoose_imageNo",
                    value: "card"
                }, {
                    name: "支票",
                    image: "singleChoose_imageNo",
                    value: "check"
                }, {
                    name: "POS机",
                    image: "singleChoose_imageNo",
                    value: "pos"
                }, {
                    name: "余额支付",
                    image: "singleChoose_imageNo",
                    value: "member"
                }], q.page = 1, q.itemsPerPage = 10, q.pagination = {
                    page: q.page,
                    itemsPerPage: q.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            y = function () {
                q.page = 1, q.itemsPerPage = 10, q.pagination = {
                    page: q.page,
                    itemsPerPage: q.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            z = function () {
                q.showChooseVenueBox = !1, q.showChooseItemBox = !1, q.showBuyProduct = !1, q.showChooseWorkerBox = !1, q.showChoosePaymentBox = !1, q.showErrChangeBox = !1, q.showAuth_codeBox = !1, clearInterval(q.setIntervalId)
            },
            A = function () {
                var a = {
                    page: q.pagination.page,
                    itemsPerPage: q.pagination.itemsPerPage
                };
                q.searchFirstId && (a = _.merge(a, {
                    _firstCategory: q.searchFirstId
                })), q.searchSecondId && (a = _.merge(a, {
                    _secondCategory: q.searchSecondId
                })), q.searchProductName && (a = _.merge(a, {
                    name: q.searchProductName
                })), q.searchVenueId && (a = _.merge(a, {
                    _venue: q.searchVenueId
                })), l.index(a, function (a) {
                    q.products = a.data.products;
                    var b = a.data.count;
                    q.pagination.totalItems = b, q.pagination.numPages = b / q.itemsPerPage
                }, function () {})
            };
        q.pageChanged = function () {
            "sale" == q.titleState ? A() : w()
        }, q.changeTitle = function (a) {
            switch (z(), x(), q.titleState = "", a) {
            case "sale":
                q.titleState = "sale", f.go("fm-product.sale", {
                    state: "sale"
                }), A();
                break;
            default:
                q.titleState = "record", f.go("fm-product.record", {
                    state: "record"
                }), w()
            }
        };
        var B = function () {
                x(), s(), u(), t(), "record" == f.params.state ? w() : A()
            },
            C = function (a) {
                var b = a.split("|");
                if (3 != b.length) return !1;
                var a = b[0],
                    c = b[1].split(""),
                    d = b[2],
                    e = d,
                    f = parseInt(r / 6e4).toString().split("");
                if (c.length < f.length) return !1;
                for (var g = 0; g < f.length; g++) d = d.replace(f[g], c[g]);
                return d == a ? e : !1
            };
        q.checkMember = function () {
            return q.memberTelOrCard ? void p.index({
                id: "today"
            }, function (a) {
                r = a.data;
                var b = C(q.memberTelOrCard);
                if (b) o.show({
                    id: b
                }, function (a) {
                    q.member = a.data.member, q.showMemberInfo = !0, q.memberId = q.member._id
                }, function (a) {
                    "找不到对象：member" == a.data.data && (q.showMemberInfo = !1, q.promptERR = !0, q.wordERR = "会员不存在")
                });
                else {
                    var c = {
                        cardNo: q.memberTelOrCard
                    };
                    o.indexBycard(c, function (a) {
                        q.member = a.data.member, q.showMemberInfo = !0, q.memberId = q.member._id
                    }, function (a) {
                        "找不到对象：member" == a.data.data && (q.showMemberInfo = !1, q.promptERR = !0, q.wordERR = "会员不存在")
                    })
                }
            }) : (q.promptERR = !0, void(q.wordERR = "请读取会员卡号/二维码"))
        }, q.chooseVenueName = function (a, b) {
            q.showChooseVenueBox = !1, q.showVenueName = a.name, q.searchVenueId = a._id, y(), "product" == b ? A() : w()
        }, q.chooseItemName = function (a, b) {
            q.showChooseItemBox = !1, q.showItemName = a.name, q.searchItemId = a._id, y(), "product" == b ? A() : w()
        }, q.chooseFirstName = function (a, b) {
            q.showChooseFirstBox = !1, q.showFirstName = a.name, q.searchFirstId = a._id, "全部" != a.name ? q.secondCategories = [{
                name: "全部"
            }].concat(a.secondCategories) : q.secondCategories = [{
                name: "全部"
            }], q.showSecondName = "全部", q.searchSecondId = "", y(), "product" == b ? A() : w()
        }, q.chooseSecondName = function (a, b) {
            q.showChooseSecondBox = !1, q.showSecondName = a.name, q.searchSecondId = a._id, y(), "product" == b ? A() : w()
        }, q.chooseWorkerName = function (a) {
            z(), y(), q.showWorkerName = a.name, q.searchWorkerId = a._id, w()
        }, q.choosePaymentName = function (a) {
            z(), y(), q.showPaymentName = a.name, q.searchPayment = a.value, w()
        }, q.searchProduct = function () {
            y(), A()
        }, q.choosePayment = function (a) {
            _.each(q.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", q.buyPayment = a.value
        }, q.openBuyProduct = function (a) {
            z(), q.showBuyProduct = !0, q.buyProduct = a
        };
        var D = function (a, b, c) {
            var d = new Date,
                e = '<div style="width: 250px;padding:0;margin: 0;"><div>';
            e += '<div style="font-size: 20px;font-weight: bold;">欢迎光临', e += q.organization.name, e += '</div><div style="font-size: 20px;font-weight: bold;margin-top: 10px;">购买综合服务消费小票</div>', e += '<div style="font-size: 16px;margin-top: 10px;">操作员：', e += q.me[0].name, e += '</div></div><div style="margin-top: 10px;">**************************************</div><div>', e += '<table style="width: 100%;"><tr><td width="60%">综合服务名称</td>', e += '<td width="20%">数量</td><td width="20%">金额</td></tr>', e += '<tr style="margin-top: 10px;"><td>', e += c.name, e += "</td><td>", e += "1", e += "</td><td>", e += a.cost, e += "</td></tr></table></div>", e += '<div style="margin-top: 10px;">**************************************</div><div><div>客户名称：', e += a.name, e += "</div><div>消费方式：", e += b, e += "</div><div>备注：", e += a.remark, e += "</div><div>联系人：", e += a.productContacts, e += "</div><div>消费金额：￥", e += a.cost, q.member && "余额支付" == b && (e += "</div><div>账户余额：￥", e += q.member.cards[0].total - a.cost), q.member && "余额支付" != b && (e += "</div><div>账户余额：￥", e += q.member.cards[0].total), q.member = null, e += "</div><div>消费日期：", e += d.getFullYear() + "-" + (d.getMonth() + 1) + "-" + d.getDate() + " " + d.getHours() + ":" + d.getMinutes(), e += '</div></div><div style="margin-top: 10px;">**************************************</div>', e += '<div style="margin-top: 10px;">客户签名：</div></div>';
            var f = getLodop();
            f.PRINT_INIT(""), f.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), f.SET_PRINTER_INDEXA(-1), f.SET_PRINT_PAGESIZE(3, 800, 100, ""), f.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", e), f.PRINT()
        };
        q.printRecord = function (a) {
            switch (a.payment) {
            case "wx":
                a.payment = "微信支付";
                break;
            case "alipay":
                a.payment = "支付宝支付";
                break;
            case "cash":
                a.payment = "现金支付";
                break;
            case "card":
                a.payment = "转账支付";
                break;
            case "check":
                a.payment = "支票支付";
                break;
            case "pos":
                a.payment = "支POS机支付";
                break;
            case "member":
                a.payment = "余额支付"
            }
            a.createDate = new Date(a.createDate), a.cost = a.cost.substring(1);
            var b = '<div style="width: 250px;padding:0;margin: 0;"><div>';
            b += '<div style="font-size: 20px;font-weight: bold;">欢迎光临', b += '</div><div style="font-size: 20px;font-weight: bold;margin-top: 10px;">购买综合服务消费小票</div>', b += '<div style="font-size: 16px;margin-top: 10px;">操作员：', b += a.workerName, b += '</div></div><div style="margin-top: 10px;">**************************************</div><div>', b += '<table style="width: 100%;"><tr><td width="60%">综合服务名称</td>', b += '<td width="20%">数量</td><td width="20%">金额</td></tr>', b += '<tr style="margin-top: 10px;"><td>', b += a.productName, b += "</td><td>", b += "1", b += "</td><td>", b += a.cost, b += "</td></tr></table></div>", b += '<div style="margin-top: 10px;">**************************************</div><div><div>客户名称：', b += a.name, b += "</div><div>消费方式：", b += a.payment, b += "</div><div>备注：", b += a.remark, b += "</div><div>消费金额：￥", b += a.cost, b += "</div><div>消费日期：", b += a.createDate.getFullYear() + "-" + (a.createDate.getMonth() + 1) + "-" + a.createDate.getDate() + " " + a.createDate.getHours() + ":" + a.createDate.getMinutes(), b += '</div></div><div style="margin-top: 10px;">**************************************</div>', b += '<div style="margin-top: 10px;">客户签名：</div></div>';
            var c = getLodop();
            c.PRINT_INIT(""), c.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), c.SET_PRINTER_INDEXA(-1), c.SET_PRINT_PAGESIZE(3, 800, 100, ""), c.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", b), c.PRINT()
        }, q.buy = function () {
            if (!q.name) return q.promptERR = !0, void(q.wordERR = "请输入客户名称");
            if (!q.price) return q.promptERR = !0, void(q.wordERR = "请填写综合服务金额");
            switch (q.buyPayment) {
            case "wx":
            case "alipay":
                q.spbill_create_ip = "122.224.134.196", q.showAuth_codeBox = !0, q.setIntervalId = setInterval(function () {
                    document.getElementById("auth_code").focus()
                }, 100);
                break;
            case "card":
            case "cash":
            case "check":
            case "pos":
            case "member":
                var b = {
                    _product: q.buyProduct._id,
                    name: q.name,
                    cost: parseFloat(q.price),
                    payment: q.buyPayment,
                    remark: q.remark,
                    productContacts: q.productContacts
                };
                if (q.memberId && (b = _.merge(b, {
                    _member: q.memberId
                })), "member" == q.buyPayment && !q.memberId) return q.promptERR = !0, void(q.wordERR = "请先读取用户信息");
                l.buy({}, b, function () {
                    q.memberTelOrCard = "", q.showMemberInfo = !1, q.memberId = "", q.promptOK = !0, q.wordOK = "购买成功";
                    var c;
                    switch (q.buyPayment) {
                    case "card":
                        c = "转账支付";
                        break;
                    case "cash":
                        c = "现金支付";
                        break;
                    case "check":
                        c = "支票支付";
                        break;
                    case "pos":
                        c = "POS机支付";
                        break;
                    case "member":
                        c = "余额支付"
                    }
                    var d = q.buyProduct;
                    setTimeout(function () {
                        a.$apply(function () {
                            q.promptOK = !1
                        }), D(b, c, d)
                    }, 1e3), z(), A(), x()
                }, function (a) {
                    return q.promptWARN = !1, a.data.data ? (q.promptERR = !0, void(q.wordERR = a.data.data)) : void 0
                })
            }
        }, q.auth_codeCreate = function (b) {
            if (q.promptWARN = !0, q.wordWARN = "支付中", 13 == b.keyCode) {
                var c = {
                    _product: q.buyProduct._id,
                    name: q.name,
                    cost: parseFloat(q.price),
                    payment: q.buyPayment,
                    remark: q.remark,
                    productContacts: q.productContacts,
                    auth_code: q.auth_code,
                    spbill_create_ip: q.spbill_create_ip
                };
                switch (q.memberId && (c = _.merge(c, {
                    _member: q.memberId
                })), q.buyPayment) {
                case "wx":
                    var d = /^[1][0,1,2,3,4,5][0-9]{16}$/;
                    if (!d.test(q.auth_code)) return q.auth_code = "", q.promptWARN = !1, q.promptERR = !0, void(q.wordERR = "支付码错误，重新扫码");
                    l.buyWx({}, c, function (b) {
                        q.memberTelOrCard = "", q.showMemberInfo = !1, q.memberId = "", q.auth_code = "", q.promptWARN = !1, q.promptOK = !0, q.wordOK = "购买成功";
                        var d = q.buyProduct;
                        setTimeout(function () {
                            a.$apply(function () {
                                q.promptOK = !1
                            }), D(c, "微信扫码支付", d)
                        }, 1e3), z(), x()
                    }, function (a) {
                        return q.auth_code = "", q.promptWARN = !1, a.data.data ? (q.promptERR = !0, void(q.wordERR = a.data.data)) : void 0
                    });
                    break;
                case "alipay":
                    var d = /^[25,26,27,28,29,30][0-9]{14,22}$/;
                    if (!d.test(q.auth_code)) return q.auth_code = "", q.promptWARN = !1, q.promptERR = !0, void(q.wordERR = "支付码错误，重新扫码");
                    m.payService({}, c, function (b) {
                        q.memberTelOrCard = "", q.showMemberInfo = !1, q.memberId = "", q.auth_code = "", q.promptWARN = !1, q.promptOK = !0, q.wordOK = "购买成功";
                        var d = q.buyProduct;
                        setTimeout(function () {
                            a.$apply(function () {
                                q.promptOK = !1
                            }), D(c, "支付宝扫码支付", d)
                        }, 1e3), z(), x()
                    }, function (a) {
                        return q.auth_code = "", q.promptWARN = !1, a.data.data ? (q.promptERR = !0, void(q.wordERR = a.data.data)) : void 0
                    })
                }
            }
        }, q.close = function () {
            z(), x()
        }, q.resert = function () {
            q.memberTelOrCard = "", q.memberId = "", q.member = null, q.showMemberInfo = !1, document.getElementById("cardNoBox").focus()
        }, q.closePrompt = function () {
            q.promptERR = !1, q.promptOK = !1, q.promptWARN = !1, q.showAuth_codeBox = !1, clearInterval(q.setIntervalId)
        }, q.openErrChangeBox = function (a) {
            z(), q.showErrChangeBox = !0, q.errRecordId = a
        }, q.chooseErrState = function (a) {
            "add" == a ? q.errState = "add" : q.errState = "reduce"
        }, q.changeErrRemark = function () {
            if (!q.errPrice) return q.promptERR = !0, void(q.wordERR = "请填写纠错金额");
            if (!q.errRemark) return q.promptERR = !0, void(q.wordERR = "请填写纠错备注");
            var a = {
                _record: q.errRecordId,
                state: q.errState,
                cost: parseFloat(q.errPrice),
                remark: q.errRemark
            };
            i.create({}, a, function () {
                z(), x(), w()
            }, function () {})
        }, q.enterCheck = function (a) {
            13 == a.keyCode && q.checkMember()
        }, B()
    }
    angular.module("fieldApp").controller("FmProductCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Record", "Item", "Venue", "Product", "Alipay", "Productcategory", "Member", "Time"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.close = function () {
            k.name = "", k.price = "", k.totalPrice = "", k.addFlag = !1, k.editFlag = !1, k.sureFlag = !1, k.nameFlag = !1, k.discount = "", k.level = "", k.info = ""
        }, k.saveMoney = function () {
            if (!k.money) return k.errorFlag = !0, void(k.err = "请先填写金额");
            var a = {
                cardCost: 1 * k.money
            };
            e.updateMe(a, function (a) {
                k.succeedFlag = !0, j(function () {
                    k.succeedFlag = !1
                }, 1e3)
            }, function (a) {})
        }, k.judge = function (a) {
            switch (a) {
            case "name":
                k.name ? k.nameFlag = !1 : k.nameFlag = !0;
                break;
            case "price":
                k.price ? k.priceFlag = !1 : k.priceFlag = !0;
                break;
            case "discount":
                k.discount ? k.discountFlag = !1 : k.discountFlag = !0;
                break;
            case "level":
                k.level ? k.levelFlag = !1 : k.levelFlag = !0;
                break;
            case "info":
                k.info ? k.infoFlag = !1 : k.infoFlag = !0;
                break;
            case "totalPrice":
                k.totalPrice ? k.totalPriceFlag = !1 : k.totalPriceFlag = !0
            }
        }, k.finish = function () {
            if (k.name ? k.nameFlag = !1 : k.nameFlag = !0, k.totalPrice ? k.totalPriceFlag = !1 : k.totalPriceFlag = !0, k.discount ? k.discount > 1 || k.discount <= 0 ? (k.discountFlag = !0, k.discountErr = "请输入正确的数值") : k.discountFlag = !1 : (k.discountFlag = !0, k.discountErr = "此项为必填项"), k.info ? k.infoFlag = !1 : k.infoFlag = !0, !(k.nameFlag || k.totalPriceFlag || k.discountFlag || k.levelFlag || k.infoFlag)) {
                var a = {
                    name: k.name,
                    price: k.totalPrice,
                    realPrice: k.totalPrice,
                    levelDes: k.name,
                    discount: k.discount,
                    description: k.info
                };
                i.create(a, function (a) {
                    k.close(), l()
                }, function (a) {
                    k.errorFlag = !0, 402 == a.data.code && (k.err = "请在折扣处输入一个0到1的数")
                })
            }
        }, k["delete"] = function (a) {
            i["delete"]({
                id: k.cId
            }, function (a) {
                k.sureFlag = !1, l()
            }, function (a) {})
        }, k.showEdit = function (a) {
            k.editFlag = !0, k.name = a.name, k.totalPrice = a.realPrice, k.cId = a._id, k.discount = a.discount, k.level = a.levelDes, k.info = a.description
        }, k.edit = function () {
            var a = {
                name: k.name,
                price: k.totalPrice,
                realPrice: k.totalPrice,
                discount: k.discount,
                levelDes: k.name,
                description: k.info
            };
            i.update({
                id: k.cId
            }, a, function (a) {
                k.close(), l()
            }, function (a) {
                k.errorFlag = !0, 402 == a.data.code && (k.err = "请在折扣处输入一个0到1的数")
            })
        };
        var l = function () {
                i.index({
                    sortBy: "price"
                }, function (a) {
                    k.cards = a.data.cards
                }, function (a) {})
            },
            m = function () {
                e.get({}, function (a) {
                    e.getOrgInfo({
                        id: a.data.user._organization
                    }, function (a) {
                        k.money = a.data.user.cardCost
                    }, function () {})
                }, function () {})
            },
            n = function () {
                l(), m()
            };
        n()
    }
    angular.module("fieldApp").controller("FmSettingCardCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Card", "$timeout"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.vName = "全部", l.vId = "", l.iName = "全部", l.iId = "", l.oneFlag = !0, l.marginTop = {
            "margin-top": "38px"
        }, l.page = 1, l.itemsPerPage = 10, l.pagination = {
            page: l.page,
            itemsPerPage: l.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, l.pageChanged = function () {
            p()
        }, l.close = function () {
            l.addFlag = !1, l.editFlag = !1, l.deleteFlag = !1, l.name = "", l.value = "", l.price = "", l.daylimit = "", l.limit = "", l.des = "", l.bail = ""
        }, l["delete"] = function () {
            g["delete"]({
                id: l._id
            }, {}, function (a) {
                p(), l.close()
            }, function (a) {
                l.errorFlag = !0, l.err = a.data.data
            })
        }, l.chooseVenue = function (a) {
            l.venueName = a.name, l._venue = a._id, l.items = a.items, a.items.length > 0 ? (l.itemName = a.items[0].name, l._item = a.items[0]._id) : (l.itemName = "暂无", l._item = ""), l.venueFlag = !1, o()
        }, l.chooseVrr = function (a) {
            l.vName = a.name, l.vId = a._id, a._id ? (l.irr = [], l.irr = l.irr.concat(a.items), l.iName = "全部", l.iId = "", p()) : m(), l.selectVenueFlag = !1
        }, l.chooseItem = function (a) {
            l.itemName = a.name, l._item = a._id, l.itemFlag = !1
        }, l.chooseIrr = function (a) {
            l.iName = a.name, l.iId = a._id, l.selectItemFlag = !1, p()
        }, l.edit = function (a, b) {
            if (b) {
                var c = {
                    isActive: !a.isActive
                };
                g.update({
                    id: a._id
                }, c, function (a) {
                    l.close(), l.succeedFlag = !0, p()
                }, function (a) {
                    l.errorFlag = !0, l.err = a.data.data
                })
            } else {
                l.editFlag = !0, _.each(l.venues, function (b) {
                    b._id == a._venue._id && (l.venueName = b.name, l._venue = b._id, l.items = b.items, _.each(b.items, function (b) {
                        b._id == a._item._id && (l.itemName = b.name, l._item = b._id)
                    }))
                }), l._id = a._id, l.name = a.name, l.price = a.price, l.value = a.value, l.oneFlag = a.daylimit > 1 ? !1 : !0, l.limit = a.limit, l.bail = a.bail, l.des = a.description, l.cardcost = a.cardCost;
                var c = {
                    _venue: l._venue
                };
                k.index(c, function (b) {
                    l.tags = b.data.serviceTags, _.each(l.tags, function (b) {
                        _.each(a.serviceTags, function (a) {
                            b._id == a._serviceTag && (b.select = !0)
                        })
                    })
                }, function (a) {}), l.addFlag = !0
            }
        }, l.chooseTag = function (a) {
            a.select = !a.select
        }, l.finish = function () {
            if (!l.name || isNaN(l.value) || isNaN(l.price) || isNaN(l.cardcost)) return l.errorFlag = !0, void(l.err = "请把资料填充完整");
            var a = [];
            _.each(l.tags, function (b) {
                b.select && a.push(b._id)
            });
            var b = {
                type: "date",
                _venue: l._venue,
                _item: l._item,
                name: l.name,
                value: 1 * l.value,
                daylimit: l.oneFlag ? 1 : 99,
                limit: 1 * l.limit,
                price: 1 * l.price,
                description: l.des,
                bail: 1 * l.bail,
                cardCost: 1 * l.cardcost,
                serviceTags: a
            };
            l.editFlag ? g.update({
                id: l._id
            }, b, function (a) {
                l.close(), p()
            }, function (a) {
                l.errorFlag = !0, l.err = a.data.data
            }) : g.create(b, function (a) {
                l.close(), p()
            }, function (a) {
                l.errorFlag = !0, l.err = a.data.data
            })
        };
        var m = function () {
                i.index({}, function (a) {
                    l.venues = a.data.venues, l.vrr = [], l.venues.length > 0 && (l.venueName = l.venues[0].name, l._venue = l.venues[0]._id, l.items = l.venues[0].items, l.vrr = l.c.concat(l.venues), l.venues[0].items.length > 0 ? (l.itemName = l.venues[0].items[0].name, l._item = l.venues[0].items[0]._id) : (l.itemName = "暂无", l._item = "")), o(), n()
                }, function (a) {})
            },
            n = function () {
                j.index({}, function (a) {
                    l.items = a.data.items, l.irr = [], l.irr = l.c.concat(l.items), p()
                }, function (a) {})
            },
            o = function () {
                var a = {
                    _venue: l._venue
                };
                k.index(a, function (a) {
                    l.tags = a.data.serviceTags
                }, function (a) {})
            },
            p = function () {
                var a = {
                    type: "date",
                    page: l.pagination.page,
                    itemsPerPage: l.pagination.itemsPerPage,
                    _venue: l.vId,
                    _item: l.iId,
                    isActive: "all"
                };
                g.index(a, function (a) {
                    l.services = a.data.services, l.pagination.totalItems = a.data.count, l.pagination.numPages = a.data.count / l.itemsPerPage
                }, function (a) {
                    l.errorFlag = !0, l.err = a.data.data
                })
            },
            q = function () {
                l.c = [{
                    name: "全部",
                    _id: ""
                }], m()
            };
        q()
    }
    angular.module("fieldApp").controller("FmDateCardCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "Service", "$location", "Venue", "Item", "ServiceTag"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.marginTop = {
            "margin-top": "38px"
        }, l.flagOn = !0, l.flagOpen = !0, l.flagEdit = !1, l.vId = "", l.arr = [], l.h = "height:" + (window.screen.height - 500) + "px", l.close = function () {
            l.oFlag = !1, l.nameFlag = !1, l.flagOpen = !0, l.flagOn = !0, l.addFlag = !1, l.arr = [], l.name = "", l.sureFlag = !1, l.editFlag = !1, l.closeFlag = !1, l.chooseVenueFlag = !1, l.closeDate = "", l.closeFlag2 = !1, l.closeDate2 = "", l.deleteFlag = !1, l.showEditFlag = !1, l.editAllFlag = !1
        }, l.chooseOn = function (a) {
            l.flagOn = a, l.flagOn || (l.flagOpen = !1), l.closeDate || (l.closeDate = new Date((new Date).getTime() + 864e5), l.closeFlag = !0)
        }, l.chooseOrder = function (a) {
            l.orderOn = a
        }, l.chooseRemark = function (a) {
            l.remarkOn = a
        }, l.chooseEdit = function (a) {
            l.flagEdit = a
        }, l.chooseOpen = function (a) {
            l.flagOpen = a
        }, l.showEdit = function (a) {
            l.editFlag = !0, l.fId = a._id, l.name = a.name, l.flagOn = a.isUsed, a.closeOpen_endDate ? (l.closeFlag = !0, l.closeFlag2 = !0, l.closeDate = a.closeOpen_startDate, l.closeDate2 = a.closeOpen_endDate) : a.closeOpen_startDate && (l.closeFlag = !0, l.closeDate = a.closeOpen_startDate), l.flagOn && !l.flagOpen && (l.closeDate2 = a.closeDate_open, l.closeFlag2 = !0)
        }, l.judge = function (a) {
            switch (a) {
            case "name":
                l.name ? l.nameFlag = !1 : l.nameFlag = !0
            }
        }, l.chooseVenue = function (a) {
            l.venueName = a.name, l.vId = a._id, l.chooseVenueFlag = !1, l.venue = a, l.closeItems = a.closeItems, m()
        }, l.edit = function () {
            if (l.name ? l.nameFlag = !1 : l.nameFlag = !0, l.closeFlag || l.closeFlag2) {
                if (!l.closeFlag && l.closeFlag2) return void(l.longTimeFlag = !0);
                if (l.closeFlag2) {
                    var a = new Date(l.closeDate2).getTime();
                    l.flagOpen = !1
                } else {
                    var a = "";
                    l.flagOpen = !1
                }
            } else l.flagOpen = !0; if (!l.nameFlag) {
                l.cItems = [], l.cItems.push(l.item._id);
                var b = {
                    name: l.name,
                    isUsed: l.flagOn,
                    closeDate: (new Date).getTime(),
                    closeOpen_startDate: new Date(l.closeDate).getTime(),
                    closeOpen_endDate: a,
                    isOpen: l.flagOpen,
                    items: l.cItems,
                    _venue: l.vId
                };
                k.update({
                    id: l.fId
                }, b, function (a) {
                    l.close(), l.getField(l.item)
                }, function (a) {
                    l.errorFlag = !0, 400 == a.data.code ? l.err = "请在‘输入天数’这栏输入数字" : 500 == a.data.code && (l.err = "该场地名称已被使用")
                })
            }
        }, l.finish = function () {
            if (l.name ? l.nameFlag = !1 : l.nameFlag = !0, !l.nameFlag) {
                l.cItems = [], l.cItems.push(l.item._id);
                var a = {
                    name: l.name,
                    isUsed: !0,
                    isOpen: !0,
                    items: l.cItems,
                    _venue: l.vId,
                    closeDate_open: new Date(l.closeDate2).getTime()
                };
                k.create(a, function (a) {
                    l.close(), l.getField(l.item)
                }, function (a) {
                    l.errorFlag = !0, 400 == a.data.code ? l.err = "请在‘输入天数’这栏输入数字" : 500 == a.data.code && (l.err = "该场地名称已被使用")
                })
            }
        }, l.showStopEdit = function (a) {
            l.fields = a.fields, l.showEditFlag = !0, l.editItemId = a._id, l.flagOn = a.isUsed, l.flagOn ? (l.closeFlag = !1, l.closeDate = "", l.flagEdit = !1) : (l.closeFlag = !0, l.closeDate = a.closeDate, l.flagEdit = !0)
        }, l.finishEdit = function () {
            if (l.flagEdit && !l.closeFlag) return void(l.oFlag = !0);
            var a = {
                _venue: l.vId,
                _item: l.editItemId,
                state: l.flagOn ? "open" : "close",
                closeDate: new Date(l.closeDate).getTime()
            };
            k.updateFields({}, a, function (a) {
                l.close(), m()
            }, function (a) {
                l.errorFlag = !0, l.err = a.data.data
            }), l.showEditFlag = !1
        }, l.select = function (a) {
            for (var b = 0; b < l.fields.length; b++) l.fields[b].select = a, l.selectFlag = a;
            for (var b = 0; b < l.fields.length; b++)
                if (l.fields[b].select) return void(l.editAllFlag = !0);
            l.editAllFlag = !1
        }, l.changeField = function (a) {
            a.select = !a.select;
            for (var b = 0; b < l.fields.length; b++)
                if (l.fields[b].select) return void(l.editAllFlag = !0);
            l.editAllFlag = !1
        }, l["delete"] = function () {
            k["delete"]({
                id: l.fId
            }, {}, function (a) {
                l.close(), l.getField(l.item)
            }, function (a) {})
        }, l.getNowFormatDate = function (a) {
            var b = "-",
                c = a.getMonth() + 1,
                d = a.getDate();
            c >= 1 && 9 >= c && (c = "0" + c), d >= 0 && 9 >= d && (d = "0" + d);
            var e = a.getFullYear() + b + c + b + d;
            return e
        }, l.getField = function (a) {
            var b = {
                _venue: l.vId,
                _item: a._id,
                sortValue: "asc"
            };
            l.item = a, l.orderFlag = !0, l.remarkFlag = !0, _.each(l.closeItems, function (b) {
                b._item == a._id && (l.orderFlag = !b.closeOpen, l.remarkFlag = b.showRemark)
            });
            var c = new Date;
            k.index(b, function (a) {
                l.fields = a.data.fields, _.each(l.fields, function (a) {
                    a.closeOpen_startDate ? a.closeOpen_endDate ? c < new Date(a.closeOpen_startDate).getTime() ? (a.isOpen = !0, a.warn = l.getNowFormatDate(new Date(a.closeOpen_startDate)) + "至" + l.getNowFormatDate(new Date(a.closeOpen_endDate)) + "不可订") : c > new Date(a.closeOpen_endDate).getTime() ? (a.isOpen = !0, a.warn = "") : (a.isOpen = !1, a.warn = l.getNowFormatDate(new Date(a.closeOpen_startDate)) + "至" + l.getNowFormatDate(new Date(a.closeOpen_endDate)) + "不可订") : (c < new Date(a.closeOpen_startDate).getTime() ? a.isOpen = !0 : a.isOpen = !1, a.warn = l.getNowFormatDate(new Date(a.closeOpen_startDate)) + "后不可订") : a.isOpen = !0
                })
            }, function (a) {})
        }, l.editVenueItem = function (a) {
            "orderFlag" == a ? (l.orderFlag = !l.orderFlag, l.orderFlag && (l.remarkFlag = !0)) : l.remarkFlag = !l.remarkFlag;
            var b = {
                    _item: l.item._id,
                    closeOpen: !l.orderFlag,
                    showRemark: l.remarkFlag,
                    remark: ""
                },
                c = [];
            c.push(b);
            var d = {
                closeItems: c
            };
            i.update({
                id: l.vId
            }, d, function (a) {
                l.closeItems = a.data.venue.closeItems, i.index({
                    isUsed: !0
                }, function (a) {
                    l.venues = a.data.venues;
                    for (var b = 0; b < l.venues.length; b++) _.each(l.venues[b].items, function (a) {
                        a.orderFlag = !0
                    }), _.each(l.venues[b].closeItems, function (a) {
                        _.each(l.venues[b].items, function (b) {
                            a._item == b._id && (b.orderFlag = !a.closeOpen, b.remarkFlag = a.showRemark)
                        })
                    })
                }, function (a) {})
            }, function (a) {
                l.errorFlag = !0, l.err = a.data.data
            })
        };
        var m = function () {
                i.index({
                    isUsed: !0
                }, function (a) {
                    l.venues = a.data.venues;
                    for (var b = 0; b < l.venues.length; b++) _.each(l.venues[b].items, function (a) {
                        a.orderFlag = !0
                    }), _.each(l.venues[b].closeItems, function (a) {
                        _.each(l.venues[b].items, function (b) {
                            a._item == b._id && (b.orderFlag = !a.closeOpen, b.remarkFlag = a.showRemark)
                        })
                    });
                    l.venues.length > 0 && (l.vId || (l.venueName = l.venues[0].name, l.vId = l.venues[0]._id, l.venue = l.venues[0], l.closeItems = l.venues[0].closeItems), l.venue.items.length > 0 && (l.orderFlag = l.venue.items[0].orderFlag, l.remarkFlag = l.venue.items[0].remarkFlag, l.venue.items[0].select = !0, l.venue.items[l.venue.items.length - 1].endSelect = !0, l.item = l.venue.items[0], l.getField(l.venue.items[0])))
                }, function (a) {})
            },
            n = function () {
                m()
            };
        n()
    }
    angular.module("fieldApp").controller("FmFieldRegisterCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue", "Item", "Field"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this;
        j.isUsed = !0, j.weekAs = "1", j.page = 1, j.itemsPerPage = 10, j.pagination = {
            page: j.page,
            itemsPerPage: j.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, j.showEdit = function (a) {
            j.hId = a._id, j.addFlag = !0, j.editFlag = !0, j.name = a.name, j.startShowFlag = !0, j.endShowFlag = !0, j.remark = a.remark, j.startDate = a.startDate, j.endDate = a.endDate, j.weekAs = a.weekAs, "1" == a.weekAs ? (j.useStateArr[0].image = "singleChoose_imageYes", j.useStateArr[1].image = "singleChoose_imageNo", j.useStateArr[2].image = "singleChoose_imageNo") : "6" == a.weekAs ? (j.useStateArr[0].image = "singleChoose_imageNo", j.useStateArr[1].image = "singleChoose_imageYes", j.useStateArr[2].image = "singleChoose_imageNo") : (j.useStateArr[0].image = "singleChoose_imageNo", j.useStateArr[1].image = "singleChoose_imageNo", j.useStateArr[2].image = "singleChoose_imageYes")
        }, j.chooseState = function (a) {
            _.each(j.useStateArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", "工作日" == a.isUsed ? j.weekAs = "1" : "周末" == a.isUsed ? j.weekAs = "6" : j.weekAs = "7"
        }, j.useStateArr = [{
            name: "工作日方案",
            image: "singleChoose_imageYes",
            isUsed: "工作日"
        }, {
            name: "周末方案",
            image: "singleChoose_imageNo",
            isUsed: "周末"
        }, {
            name: "节假日方案",
            image: "singleChoose_imageNo",
            isUsed: "节假日"
        }];
        var k = function () {
                l()
            },
            l = function () {
                i.index({}, function (a) {
                    j.holidaies = a.data.speDays
                }, function (a) {})
            };
        j["delete"] = function () {
            i["delete"]({
                id: j.hId
            }, {}, function (a) {
                l(), j.deleteFlag = !1
            }, function (a) {})
        }, j.create = function () {
            if (j.name ? j.nFlag = !1 : j.nFlag = !0, j.startShowFlag ? j.sFlag = !1 : j.sFlag = !0, j.endShowFlag ? j.eFlag = !1 : j.eFlag = !0, !(j.nFlag || j.sFlag || j.eFlag)) {
                var a = {
                    name: j.name,
                    startDate: new Date(j.startDate).getTime(),
                    endDate: new Date(j.endDate).getTime(),
                    remark: j.remark,
                    weekAs: j.weekAs
                };
                return j.editFlag ? void i.update({
                    id: j.hId
                }, a, function (a) {
                    j.close(), l()
                }, function (a) {
                    j.promptERR = !0, j.wordERR = a.data.data
                }) : void i.create(a, function (a) {
                    j.close(), l()
                }, function (a) {
                    j.promptERR = !0, j.wordERR = a.data.data
                })
            }
        }, j.pageChanged = function () {
            loadProducts()
        }, j.close = function () {
            j.addFlag = !1, j.name = "", j.remark = "", j.startFlag = !1, j.endFlag = !1, j.startDate = "", j.endDate = ""
        }, k()
    }
    angular.module("fieldApp").controller("FmSettingHolidayCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Holiday"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.itemName = "", k.close = function () {
            k.itemName = "", k.addFlag = !1, k.editFlag = !1, k.deleteFlag = !1, k.flagOn = !1, k.discount = ""
        }, k["delete"] = function () {
            i["delete"]({
                id: k.iId
            }, {}, function (a) {
                k.close(), l()
            }, function (a) {})
        }, k.showEdit = function (a) {
            k.editFlag = !0, k.iId = a._id, k.itemName = a.name, a.discount < 0 ? (k.flagOn = !1, k.discount = "") : (k.discount = a.discount, k.flagOn = !0)
        }, k.edit = function () {
            if ("" == k.itemName ? (k.itemFlag = !0, k.err = "此项为必填项") : k.itemFlag = !1, k.flagOn && !k.discount ? k.discountFlag = !0 : k.discountFlag = !1, k.flagOn || (k.discount = -1), !k.itemFlag && !k.discountFlag) {
                var a = {
                    name: k.itemName,
                    isUsed: !0,
                    discount: 1 * k.discount
                };
                i.update({
                    id: k.iId
                }, a, function (a) {
                    k.close(), l()
                }, function (a) {
                    k.errorFlag = !0, k.err = a.data.data
                })
            }
        }, k.judge = function (a) {
            switch (a) {
            case "item":
                "" == k.itemName ? k.itemFlag = !0 : k.itemFlag = !1
            }
        }, k.finish = function () {
            if ("" == k.itemName ? (k.itemFlag = !0, k.err = "此项为必填项") : k.itemFlag = !1, k.flagOn && !k.discount ? k.discountFlag = !0 : k.discountFlag = !1, k.flagOn || (k.discount = -1), !k.itemFlag & !k.discountFlag) {
                var a = {
                    name: k.itemName,
                    isUsed: !0,
                    discount: 1 * k.discount
                };
                i.create(a, function (a) {
                    k.close(), l()
                }, function (a) {
                    k.errorFlag = !0, k.err = a.data.data
                })
            }
        }, k.move = function (a, b) {
            if ("up" == a) var c = {
                _first: b._id,
                _second: k.items[b.order - 2]._id
            };
            else var c = {
                _first: b._id,
                _second: k.items[b.order]._id
            };
            i.move(c, function (a) {
                l()
            }, function (a) {})
        }, k.chooseOn = function (a) {
            k.flagOn = a
        };
        var l = function () {
                i.index({
                    isUsed: !0
                }, function (a) {
                    k.items = a.data.items;
                    for (var b = 0; b < k.items.length; b++) k.items[b].order = b + 1;
                    k.length = k.items.length, i.index({
                        isUsed: !1
                    }, function (a) {
                        k.items2 = a.data.items;
                        for (var b = 0; b < k.items2.length; b++) k.items2[b].order = b + 1 + k.items.length;
                        k.items = k.items.concat(k.items2)
                    }, function (a) {})
                }, function (a) {})
            },
            m = function () {
                l()
            };
        m()
    }
    angular.module("fieldApp").controller("FmSettingItemCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Item", "$timeout"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this;
        j.close = function () {
            j.succeedFlag = !1, j.errorFlag = !1
        }, j.save = function () {
            var a = {
                oldPassword: j.oldPassword,
                newPassword: j.newPassword
            };
            e.updatePassword(a, function (a) {
                j.oldPassword = "", j.newPassword = "", j.succeedFlag = !0, i(function () {
                    j.succeedFlag = !1
                }, 1e3)
            }, function (a) {
                j.errorFlag = !0, i(function () {
                    j.errorFlag = !1
                }, 1e3)
            })
        }, j.judge = function () {
            j.oldPassword && j.newPassword ? j.saveFlag = !0 : j.saveFlag = !1
        };
        var k = function () {
            e.get({}, function (a) {
                j.account = a.data.user.account
            }, function () {})
        };
        j.logout = d.logout;
        var l = function () {
            k()
        };
        l()
    }
    angular.module("fieldApp").controller("FmSettingPersonCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "$timeout"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.marginTop = {
            "margin-top": "38px"
        }, l.flagOn = !0, l.vId = "", l.arr = [], l.close = function () {
            l.flagOn = !0, l.addFlag = !1, l.editFlag = !1, l.closeFlag = !1, l.startShowFlag = !1, l.endShowFlag = !1, l.chooseVenueFlag = !1, l.pFlag = !1, l.price = ""
        }, l.chooseOn = function (a) {
            l.flagOn = a
        }, l.showAdd = function (a, b, c, d) {
            l.vId = a._venue, l.iId = a._item, l.startDateHours = a.startDateHours, l.startDateMins = a.startDateMins, l.endDateHours = a.endDateHours, l.endDateMins = a.endDateMins, l.addFlag = !0, l.state = b, l.flagOn = a.isUsed, l.tId = a._id, l.priceArr = a.priceArr, l.order = c.order, l.item = c, d && (l.price = d, "week" == b ? "hours" == l.priceArr[1].unit ? l.flagOn = !0 : l.flagOn = !1 : "weekend" == b ? "hours" == l.priceArr[6].unit ? l.flagOn = !0 : l.flagOn = !1 : "hours" == l.priceArr[8].unit ? l.flagOn = !0 : l.flagOn = !1)
        }, l.judge = function (a) {
            switch (a) {
            case "price":
                l.price ? l.priceFlag = !1 : (l.priceFlag = !0, l.pFlag = !0)
            }
        }, l.chooseVenue = function (a) {
            l.venueName = a.name, l.vId = a._id, l.chooseVenueFlag = !1, l.venue = a, n()
        }, l.finish = function () {
            if (l.price || (l.pFlag = !0), l.flagOn ? l.unit = "hours" : l.unit = "sign", l.price) {
                var a = [];
                if ("week" == l.state)
                    for (var b = 0; b < l.priceArr.length; b++) l.priceArr[b].week > 0 && l.priceArr[b].week < 6 && (l.priceArr[b].price = 1 * l.price, l.priceArr[b].unit = l.unit, a.push(l.priceArr[b]));
                else if ("weekend" == l.state)
                    for (var b = 0; b < l.priceArr.length; b++)(6 == l.priceArr[b].week || 0 == l.priceArr[b].week) && (l.priceArr[b].price = 1 * l.price, l.priceArr[b].unit = l.unit, a.push(l.priceArr[b]));
                else
                    for (var b = 0; b < l.priceArr.length; b++) 7 == l.priceArr[b].week && (l.priceArr[b].price = 1 * l.price, l.priceArr[b].unit = l.unit, a.push(l.priceArr[b]));
                var c = {
                    startDateHours: 1 * l.startDateHours,
                    startDateMins: 1 * l.startDateMins,
                    endDateHours: 1 * l.endDateHours,
                    endDateMins: 1 * l.endDateMins,
                    isUsed: !0,
                    closeDate: (new Date).getTime(),
                    _item: l.iId,
                    _venue: l.vId,
                    priceArr: a
                };
                k.update({
                    id: l.tId
                }, c, function (a) {
                    l.close(), m(l.iId, l.order, l.item, !0)
                }, function (a) {})
            }
        };
        var m = function (a, b, c) {
                var d = {
                    _venue: l.vId,
                    _item: a,
                    sortBy: "startDate"
                };
                k.index(d, function (a) {
                    for (var d = [], e = 0; e < a.data.times.length; e++) {
                        0 == e ? a.data.times[e].flag = !0 : a.data.times[e].flag = !1;
                        var f = new Date;
                        f.setHours(a.data.times[e].startDateHours), f.setMinutes(a.data.times[e].startDateMins), a.data.times[e].sd = f;
                        var g = new Date;
                        if (g.setHours(a.data.times[e].endDateHours), g.setMinutes(a.data.times[e].endDateMins), a.data.times[e].ed = g, d.push(a.data.times[e]), e != a.data.times.length - 1) {
                            if (a.data.times[e].endDate != a.data.times[e + 1].startDate) {
                                var h = {
                                    sd: a.data.times[e].ed,
                                    emptyFlag: !0
                                };
                                d.push(h)
                            }
                        } else {
                            var h = {
                                sd: a.data.times[e].ed,
                                endFlag: !0
                            };
                            d.push(h)
                        }
                        _.each(a.data.times[e].priceArr, function (a) {
                            "sign" == a.unit ? a.u = "场" : a.u = "h"
                        })
                    }
                    l.venue.items[b].clocks = d, l.venue.items[b].times = a.data.times, c || b + 1 < l.venue.items.length && m(l.venue.items[b + 1]._id, b + 1)
                }, function (a) {})
            },
            n = function () {
                i.index({}, function (a) {
                    if (l.venues = a.data.venues, l.venues.length > 0 && (l.vId || (l.venueName = l.venues[0].name, l.vId = l.venues[0]._id, l.venue = l.venues[0]), l.venue.items.length > 0)) {
                        for (var b = 0; b < l.venue.items.length; b++) l.venue.items[b].order = b, l.venue.items[b].page = 1, l.venue.items[b].itemsPerPage = 5;
                        m(l.venue.items[0]._id, 0)
                    }
                }, function (a) {})
            },
            o = function () {
                n()
            };
        o()
    }
    angular.module("fieldApp").controller("FmPriceRegisterCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue", "Item", "Time"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.categoryName = "", l.supplyName = "", l.state = !0, l.stateArr = [{
            name: "上架",
            image: "singleChoose_imageYes",
            value: !0
        }, {
            name: "下架",
            image: "singleChoose_imageNo",
            value: !1
        }], l.page = 1, l.itemsPerPage = 10, l.pagination = {
            page: l.page,
            itemsPerPage: l.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, l.close = function () {
            l.addFlag = !1, l.deleteFlag = !1, l.name = "", l.price = "", l.unit = "", l.shopProductCategories.length > 0 && (l.categoryName = l.shopProductCategories[0].name, l.cId = l.shopProductCategories[0]._id), l.supplies.length > 0 && (l.supplyName = l.supplies[0].supplyName, l._supply = l.supplies[0]._id), l.misCode = "", l.editFlag = !1
        }, l.chooseState = function (a) {
            _.each(l.stateArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", l.state = a.value
        }, l.chooseCreateCategory = function (a) {
            l.categoryName = a.name, l.cId = a._id, l.chooseProductFlag = !1
        }, l.chooseSupply = function (a) {
            l.supplyName = a.supplyName, l._supply = a._id, l.chooseSupplyFlag = !1
        }, l.pageChanged = function () {
            m()
        };
        var m = function () {
                var a = {
                    page: l.pagination.page,
                    itemsPerPage: l.pagination.itemsPerPage
                };
                j.index(a, function (a) {
                    l.products = a.data.shopBasics;
                    var b = a.data.count;
                    l.pagination.totalItems = b, l.pagination.numPages = b / l.itemsPerPage
                }, function (a) {})
            },
            n = function () {
                i.index({}, function (a) {
                    l.shopProductCategories = a.data.shopProductCategories, l.shopProductCategories.length > 0 && (l.categoryName = l.shopProductCategories[0].name, l.cId = l.shopProductCategories[0]._id)
                }, function (a) {})
            },
            o = function () {
                k.index({
                    isUsed: !0
                }, function (a) {
                    l.supplies = a.data.supplies, l.supplies.length > 0 && (l.supplyName = l.supplies[0].supplyName, l._supply = l.supplies[0]._id)
                }, function (a) {})
            };
        l.showEdit = function (a) {
            l.addFlag = !0, l.name = a.name, l.unit = a.unit, l.price = a.price, l.state = a.isUsed, l.misCode = a.misCode, l.categoryName = a.categoryName, l.cId = a._category, l.supplyName = a.supplyName, l._supply = a._supply, l.state ? (l.stateArr[0].image = "singleChoose_imageYes", l.stateArr[1].image = "singleChoose_imageNo") : (l.stateArr[0].image = "singleChoose_imageNo", l.stateArr[1].image = "singleChoose_imageYes"), l.pId = a._id, l.editFlag = !0
        }, l.edit = function () {
            var a = {
                name: l.name,
                _category: l.cId,
                _supply: l._supply,
                unit: l.unit,
                price: parseFloat(l.price),
                misCode: "" == l.misCode ? void 0 : l.misCode
            };
            j.update({
                id: l.pId
            }, a, function (a) {
                l.close(), m()
            }, function (a) {
                l.promptERR = !0, l.wordERR = a.data.data
            })
        }, l.create = function () {
            if (l.name ? l.nameFlag = !1 : l.nameFlag = !0, l.unit ? l.unitFlag = !1 : l.unitFlag = !0, l.price ? l.priceFlag = !1 : l.priceFlag = !0, l.misCode ? l.misCodeFlag = !1 : l.misCodeFlag = !0, l.name && l.unit && l.price && l.misCode) {
                if (l.editFlag) return void l.edit();
                var a = {
                    name: l.name,
                    unit: l.unit,
                    _supply: l._supply,
                    _category: l.cId,
                    price: parseFloat(l.price),
                    misCode: "" == l.misCode ? void 0 : l.misCode
                };
                j.create(a, function (a) {
                    l.close(), m()
                }, function (a) {})
            }
        };
        var p = function () {
            m(), n(), o()
        };
        l.closePrompt = function () {
            l.promptERR = !1, l.promptOK = !1, l.promptWARN = !1
        }, p()
    }
    angular.module("fieldApp").controller("FmProductInfoCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Type", "ShopBasic", "Supply"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.flagOn = !0, k.saveFlag = !1, k.isSave = function () {
            k.orderLimit && k.orderRule ? k.saveFlag = !0 : k.saveFlag = !1
        }, k.chooseOn = function (a) {
            k.flagOn = a
        }, k.close = function () {
            k.addFlag = !1, k.hour = "", k.price = "", k.succeedFlag = !1, k.editFlag = !1, k.deleteFlag = !1
        }, k["delete"] = function () {
            i["delete"]({
                id: k.rId
            }, {}, function (a) {
                k.close(), l()
            }, function () {})
        }, k.save = function () {
            if (k.startShowFlag) var a = new Date(k.startDate).getTime();
            else var a = "";
            var b = {
                name: k.name,
                limit: 1 * k.orderLimit,
                description: k.orderRule,
                openTime: a
            };
            e.updateMe(b, function (a) {
                k.succeedFlag = !0, j(function () {
                    k.succeedFlag = !1
                }, 1e3)
            }, function (a) {})
        }, k.judge = function (a) {
            switch (a) {
            case "hour":
                k.hour ? k.hourFlag = !1 : k.hourFlag = !0;
                break;
            case "price":
                k.price ? k.priceFlag = !1 : k.priceFlag = !0
            }
        }, k.finish = function () {
            if (k.hour ? k.hourFlag = !1 : k.hourFlag = !0, k.price ? k.priceFlag = !1 : k.priceFlag = !0, !k.hourFlag && !k.priceFlag) {
                k.flagOn ? k.state = "before" : k.state = "after";
                var a = {
                    status: k.state,
                    hours: 100 * k.hour * .01,
                    costPrecent: 1 * k.price
                };
                i.create(a, function (a) {
                    k.close(), l()
                }, function () {})
            }
        }, k.showEdit = function (a) {
            "after" == a.status ? k.flagOn = !1 : k.flagOn = !0, k.hour = a.hours, k.price = a.costPrecent, k.rId = a._id, k.editFlag = !0
        }, k.edit = function () {
            k.flagOn ? k.state = "before" : k.state = "after";
            var a = {
                status: k.state,
                hours: 100 * k.hour * .01,
                costPrecent: 1 * k.price
            };
            i.update({
                id: k.rId
            }, a, function (a) {
                k.close(), l()
            }, function () {})
        };
        var l = function () {
                i.index({}, function (a) {
                    k.rules = a.data.unsubscribeRules;
                    for (var b = 0; b < k.rules.length; b++) "after" == k.rules[b].status ? k.rules[b].state = "开场后" + k.rules[b].hours + "小时" : k.rules[b].state = "开场前" + k.rules[b].hours + "小时", 0 == k.rules[b].costPrecent ? k.rules[b].p = "不扣费" : k.rules[b].p = "扣" + 100 * k.rules[b].costPrecent + "%"
                }, function () {})
            },
            m = function () {
                e.get({}, function (a) {
                    e.getOrgInfo({
                        id: a.data.user._organization
                    }, function (a) {
                        k.orderLimit = a.data.user.limit, k.orderRule = a.data.user.description, a.data.user.openTime ? (k.startDate = a.data.user.openTime, k.startShowFlag = !0) : k.startShowFlag = !1, k.orderLimit && k.orderRule ? k.saveFlag = !0 : k.saveFlag = !1
                    }, function () {})
                }, function () {})
            },
            n = function () {
                m(), l()
            };
        n()
    }
    angular.module("fieldApp").controller("FmSettingRuleCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Unsubrcriberules", "$timeout"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.flagOn = !0, k.arr = [], k.page = 1, k.itemsPerPage = 10, k.pagination = {
            page: k.page,
            itemsPerPage: k.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, k.pageChanged = function () {
            m()
        }, k.close = function () {
            k.name = "", k.venueFlag = !1, k.deleteFlag = !1, k.addFlag = !1, k.editFlag = !1, k.startShowFlag = !1, k.endShowFlag = !1
        }, k.showEdit = function (a) {
            k.addFlag = !0, k.name = a.name, k.venueName = a.venueName, k._venue = a._venue, k.editFlag = !0, k.tId = a._id, k.startDate = (new Date).setHours(parseInt(a.startMins / 60)), k.startDate = new Date(k.startDate).setMinutes(parseInt(a.startMins % 60)), k.endDate = (new Date).setHours(parseInt(a.endMins / 60)), k.endDate = new Date(k.endDate).setMinutes(parseInt(a.endMins % 60)), k.startShowFlag = !0, k.endShowFlag = !0
        }, k.marginTop = {
            "margin-top": "38px"
        }, k.create = function () {
            if (k.name) {
                var a = {
                    name: k.name,
                    _venue: k._venue,
                    startMins: 60 * new Date(k.startDate).getHours() + new Date(k.startDate).getMinutes(),
                    endMins: 60 * new Date(k.endDate).getHours() + new Date(k.endDate).getMinutes()
                };
                if (k.editFlag) return void j.update({
                    id: k.tId
                }, a, function (a) {
                    k.close(), m()
                }, function (a) {
                    k.promptERR = !0, k.wordERR = a.data.data
                });
                j.create(a, function (a) {
                    k.close(), m()
                }, function (a) {
                    k.promptERR = !0, k.wordERR = a.data.data
                })
            } else k.nameFlag = !0, k.errName = "此项为必填项"
        }, k["delete"] = function () {
            j["delete"]({
                id: k.tId
            }, {}, function (a) {
                m(), k.close()
            }, function (a) {})
        };
        var l = function () {
                i.index({}, function (a) {
                    k.venues = a.data.venues, k.venues.length > 0 && (k._venue = k.venues[0]._id, k.venueName = k.venues[0].name)
                }, function (a) {})
            },
            m = function () {
                var a = {
                    page: k.pagination.page,
                    itemsPerPage: k.pagination.itemsPerPage
                };
                j.index(a, function (a) {
                    k.tags = a.data.serviceTags, _.each(k.tags, function (a) {
                        var b = parseInt(a.startMins / 60),
                            c = parseInt(a.startMins % 60),
                            d = parseInt(a.endMins / 60),
                            e = parseInt(a.endMins % 60);
                        a.time = b + ":" + c + "--" + d + ":" + e
                    }), k.pagination.totalItems = a.data.count, k.pagination.numPages = a.data.count / k.itemsPerPage
                }, function (a) {})
            };
        k.chooseVenue = function (a) {
            k._venue = a._id, k.venueName = a.name, k.venueFlag = !1
        };
        var n = function () {
            l(), m()
        };
        n()
    }
    angular.module("fieldApp").controller("FmDateServiceTagCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "Service", "$location", "Venue", "ServiceTag"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.isUsed = !0;
        var m = function () {
                i.index({}, function (a) {
                    l.searchArr = [{
                        name: "全部",
                        _id: ""
                    }].concat(a.data.productcategories)
                }, function () {})
            },
            n = function (a) {
                k.index({}, function (a) {
                    l.venues = [{
                        name: "全部",
                        _id: null
                    }].concat(a.data.venues), l.product.venueName = l.venues[0].name, l.product._venue = l.venues[0]._id
                }, function () {})
            },
            o = function (a) {
                l.secondCategories = a.secondCategories
            },
            p = function () {
                l.searchVenueId = "", l.searchItemId = "", l.showItemName = "选择项目", l.showVenueName = "选择场馆", l.searchType = "选择一级分类", l.searchSecondType = "选择二级分类", l.product = {
                    name: "",
                    _item: "",
                    itemName: "选择项目",
                    _venue: "",
                    venueName: "选择场馆",
                    isUsed: !0
                }, l.useStateArr = [{
                    name: "启用",
                    image: "singleChoose_imageYes",
                    isUsed: !0
                }, {
                    name: "停用",
                    image: "singleChoose_imageNo",
                    isUsed: !1
                }], l.page = 1, l.itemsPerPage = 10, l.pagination = {
                    page: l.page,
                    itemsPerPage: l.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            q = function () {
                l.page = 1, l.itemsPerPage = 10, l.pagination = {
                    page: l.page,
                    itemsPerPage: l.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            r = function () {
                var a = {
                    name: l.searchName,
                    page: l.pagination.page,
                    itemsPerPage: l.pagination.itemsPerPage
                };
                l.searchVenueId && (a = _.merge(a, {
                    _venue: l.searchVenueId
                })), l.sfId && (a = _.merge(a, {
                    _firstCategory: l.sfId
                })), l._searchSecond && (a = _.merge(a, {
                    _secondCategory: l._searchSecond
                })), j.index(a, function (a) {
                    l.products = a.data.products;
                    var b = a.data.count;
                    l.pagination.totalItems = b, l.pagination.numPages = b / l.itemsPerPage
                }, function () {})
            };
        l.page = 1, l.itemsPerPage = 10, l.pagination = {
            page: l.page,
            itemsPerPage: l.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        };
        var s = function () {
            p(), n(), m(), r()
        };
        l.pageChanged = function () {
            r()
        }, l.chooseSearch = function (a) {
            l.searchType = a.name, l.sfId = a._id, l.searchFlag = !1, l.secondCategories = [], l.searchSecondType = "选择二级分类", l._searchSecond = "", r(), o(a)
        }, l.chooseSecondSearch = function (a) {
            l.searchSecondType = a.name, l._searchSecond = a._id, l.searchSecondFlag = !1, r()
        }, l.chooseVenueName = function (a, b) {
            b && "search" == b ? (l.showChooseVenueBoxIndex = !1, l.showVenueName = a.name, l.searchVenueId = a._id, q(), r()) : (l.showChooseVenueBox = !1, l.items = a.items, l.product.venueName = a.name, l.product._venue = a._id)
        }, l.chooseProductCategory = function (a) {
            l.firstType = a.name, l.fId = a._id, l.firstFlag = !1, l.secondArr = a.secondCategories, l.secondArr.length > 0 ? (l.second = l.secondArr[0].name, l.sId = l.secondArr[0]._id) : (l.second = "", l.sId = "")
        }, l.chooseSecond = function (a) {
            l.secondFlag = !1, l.second = a.name, l.sId = a._id
        }, l.chooseState = function (a) {
            _.each(l.useStateArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", l.isUsed = a.isUsed
        }, l.useStateArr = [{
            name: "启用",
            image: "singleChoose_imageYes",
            isUsed: !0
        }, {
            name: "停用",
            image: "singleChoose_imageNo",
            isUsed: !1
        }], l["delete"] = function () {
            j["delete"]({
                id: l.pId
            }, {}, function (a) {
                r(), l.deleteFlag = !1
            }, function (a) {
                l.promptERR = !0, l.wordERR = a.data.data
            })
        }, l.showEdit = function (a) {
            l.editFlag = !0, l.addFlag = !0, l.name = a.name, l.pId = a._id, l.product.venueName = a._venue.name, l.product._venue = a._venue._id, a._firstCategory && (l.fId = a._firstCategory._id, l.firstType = a._firstCategory.name, _.each(l.productcategories, function (b) {
                    b._id == a._firstCategory._id && (l.secondArr = b.secondCategories)
                })), l.remark = a.remark, l.isUsed = a.isUsed, l.isUsed ? (l.useStateArr[0].image = "singleChoose_imageYes", l.useStateArr[1].image = "singleChoose_imageNo") : (l.useStateArr[1].image = "singleChoose_imageYes", l.useStateArr[0].image = "singleChoose_imageNo"),
                a._secondCategory && (l.sId = a._secondCategory._id, l.second = a._secondCategory.name)
        }, l.create = function () {
            if (!l.name) return void(l.nameFlag = !0);
            if (l.editFlag) {
                var a = {
                    name: l.name,
                    _firstCategory: l.fId,
                    _secondCategory: l.sId,
                    _venue: l.product._venue,
                    remark: l.remark,
                    isUsed: l.isUsed
                };
                return void j.update({
                    id: l.pId
                }, a, function (a) {
                    r(), l.close()
                }, function (a) {
                    l.promptERR = !0, l.wordERR = a.data.data
                })
            }
            var a = {
                name: l.name,
                _firstCategory: l.fId,
                _secondCategory: l.sId,
                _venue: l.product._venue,
                remark: l.remark,
                isUsed: l.isUsed
            };
            j.create(a, function (a) {
                r(), l.close()
            }, function (a) {
                l.promptERR = !0, l.wordERR = a.data.data
            })
        }, l.close = function () {
            l.secondFlag = !1, l.firstFlag = !1, l.addFlag = !1, l.remark = "", l.name = "", l.nameFlag = !1, l.editFlag = !1
        }, s()
    }
    angular.module("fieldApp").controller("FmSettingServiceCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Productcategory", "Product", "Venue"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this;
        j.useStateArr = [{
            name: "开通",
            image: "singleChoose_imageNo",
            isUsed: !0
        }, {
            name: "不开通",
            image: "singleChoose_imageYes",
            isUsed: !1
        }], j.chooseState = function (a) {
            _.each(j.useStateArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", j.isUsed = a.isUsed
        }, j.close = function () {
            j.addFlag = !1, j.discount = ""
        }, j.showEdit = function (a) {
            j.addFlag = !0, j.vId = a._id, j.chooseState(a.openSpe ? j.useStateArr[0] : j.useStateArr[1]), j.discount = a.discount
        }, j.update = function () {
            var a = {
                openSpe: j.isUsed,
                discount: 1 * j.discount
            };
            i.update({
                id: j.vId
            }, a, function (a) {
                j.close(), k()
            }, function (a) {
                j.errorFlag = !0, j.errrr = a.data.data
            })
        };
        var k = function () {
                i.index({}, function (a) {
                    j.venues = a.data.venues
                }, function (a) {})
            },
            l = function () {
                k()
            };
        l()
    }
    angular.module("fieldApp").controller("FmSettingSpecialCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.close = function () {
            l.addFlag = !1, l.tel = "", l.supplyName = "", l.workerName = "", l.supplyNameFlag = !1, l.workerNameFlag = !1, l.telFlag = !1, l.deleteFlag = !1, l.editFlag = !1, l.addTypeFlag = !1, l.deleteTypeFlag = !1, l.typeFlag = !1, l.type = "", l.editTypeFlag = !1
        }, l.page = 1, l.itemsPerPage = 10, l.pagination = {
            page: l.page,
            itemsPerPage: l.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, l.stateArr = [{
            name: "启用",
            image: "singleChoose_imageYes",
            value: !0
        }, {
            name: "不启用",
            image: "singleChoose_imageNo",
            value: !1
        }], l.chooseState = function (a) {
            _.each(l.stateArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", l.state = a.value
        }, l.create = function () {
            if (l.supplyName ? l.supplyNameFlag = !1 : l.supplyNameFlag = !0, l.workerName ? l.workerNameFlag = !1 : l.workerNameFlag = !0, l.tel ? l.telFlag = !1 : l.telFlag = !0, l.supplyName && l.tel && l.workerName) {
                if (l.editFlag) return void l.edit();
                var a = {
                    supplyName: l.supplyName,
                    tel: l.tel,
                    workerName: l.workerName,
                    isUsed: l.state ? l.state : !0
                };
                j.create(a, function (a) {
                    l.close(), m()
                }, function (a) {})
            }
        }, l.createType = function () {
            if (!l.type) return void(l.typeFlag = !0);
            if (l.typeFlag = !1, l.editTypeFlag) return void l.editType();
            var a = {
                name: l.type
            };
            k.create(a, function (a) {
                l.close(), n()
            }, function (a) {})
        }, l.edit = function () {
            var a = {
                supplyName: l.supplyName,
                tel: l.tel,
                workerName: l.workerName,
                isUsed: l.state
            };
            j.update({
                id: l.sId
            }, a, function (a) {
                l.close(), m()
            }, function (a) {})
        }, l.editType = function () {
            var a = {
                name: l.type
            };
            k.update({
                id: l.tId
            }, a, function (a) {
                l.close(), o()
            }, function (a) {})
        }, l.showEdit = function (a) {
            l.supplyName = a.supplyName, l.tel = a.tel, l.workerName = a.workerName, _.each(l.stateArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.isUsed ? (l.state = !0, l.stateArr[0].image = "singleChoose_imageYes") : (l.state = !1, l.stateArr[1].image = "singleChoose_imageYes"), l.sId = a._id, l.editFlag = !0, l.addFlag = !0
        }, l.showTypeEdit = function (a) {
            l.addTypeFlag = !0, l.type = a.name, l.editTypeFlag = !0, l.tId = a._id
        }, l.pageChanged = function () {
            m()
        };
        var m = function () {
                var a = {
                    page: l.pagination.page,
                    itemsPerPage: l.pagination.itemsPerPage
                };
                j.index(a, function (a) {
                    l.supplies = a.data.supplies;
                    var b = a.data.count;
                    l.pagination.totalItems = b, l.pagination.numPages = b / l.itemsPerPage
                }, function (a) {})
            },
            n = function () {
                k.index({}, function (a) {
                    l.shopProductCategories = a.data.shopProductCategories
                }, function (a) {})
            };
        l.deleteSupply = function () {
            j["delete"]({}, {
                _id: l._supplyId
            }, function () {
                l.deleteFlag = !1, m(), l.promptOK = !0, l.wordOK = "删除成功", setTimeout(function () {
                    a.$apply(function () {
                        l.promptOK = !1
                    })
                }, 1e3)
            }, function () {})
        };
        var o = function () {
            m(), n()
        };
        l.closePrompt = function () {
            l.promptERR = !1, l.promptOK = !1, l.promptWARN = !1
        }, o()
    }
    angular.module("fieldApp").controller("FmSupplyCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue", "Supply", "Type"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.flagOn = !0, l.arr = [], l.page = 1, l.itemsPerPage = 10, l.pagination = {
            page: l.page,
            itemsPerPage: l.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, l.pageChanged = function () {
            n()
        }, l.close = function () {
            l.name = "", l.venueFlag = !1, l.deleteFlag = !1, l.addFlag = !1, l.editFlag = !1
        }, l.showEdit = function (a) {
            l.addFlag = !0, l.name = a.name, l.venueName = a.venueName, l._venue = a._venue, l.editFlag = !0, l.tId = a._id
        }, l.marginTop = {
            "margin-top": "38px"
        }, l.create = function () {
            if (l.name) {
                var a = {
                    name: l.name,
                    _venue: l._venue
                };
                if (l.editFlag) return void k.update({
                    id: l.tId
                }, a, function (a) {
                    l.close(), n()
                }, function (a) {
                    l.promptERR = !0, l.wordERR = a.data.data
                });
                k.create(a, function (a) {
                    l.close(), n()
                }, function (a) {
                    l.promptERR = !0, l.wordERR = a.data.data
                })
            } else l.nameFlag = !0, l.errName = "此项为必填项"
        }, l["delete"] = function () {
            k["delete"]({
                id: l.tId
            }, {}, function (a) {
                n(), l.close()
            }, function (a) {})
        };
        var m = function () {
                i.index({}, function (a) {
                    l.venues = a.data.venues, l.venues.length > 0 && (l._venue = l.venues[0]._id, l.venueName = l.venues[0].name)
                }, function (a) {})
            },
            n = function () {
                var a = {
                    page: l.pagination.page,
                    itemsPerPage: l.pagination.itemsPerPage
                };
                k.index(a, function (a) {
                    l.tags = a.data.tags, l.pagination.totalItems = a.data.count, l.pagination.numPages = a.data.count / l.itemsPerPage
                }, function (a) {})
            };
        l.chooseVenue = function (a) {
            l._venue = a._id, l.venueName = a.name, l.venueFlag = !1
        };
        var o = function () {
            m(), n()
        };
        o()
    }
    angular.module("fieldApp").controller("FmSettingTagCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue", "Item", "Tag"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.flagOn = !0, l.arr = [], l.close = function () {
            l.itemFlag = !1, l.venueFlag = !1, l.price = "", l.deleteFlag = !1, l.addFlag = !1, l.editFlag = !1, _.each(l.payments, function (a) {
                a.isChoose = !1
            })
        }, l.add = function (a) {
            l.type = a, l.addFlag = !0
        }, l.payments = [{
            name: "储值卡",
            value: "member",
            isChoose: !1
        }, {
            name: "现金",
            value: "cash",
            isChoose: !1
        }, {
            name: "支付宝",
            value: "alipay",
            isChoose: !1
        }, {
            name: "微信",
            value: "wx",
            isChoose: !1
        }, {
            name: "POS机",
            value: "pos",
            isChoose: !1
        }, {
            name: "银行转账",
            value: "card",
            isChoose: !1
        }, {
            name: "支票",
            value: "check",
            isChoose: !1
        }], l.choosePayment = function (a) {
            a.isChoose ? a.isChoose = !1 : a.isChoose = !0
        }, l.showEdit = function (a) {
            l.addFlag = !0, l.venueName = a.venueName, l.itemName = a.itemName, l._venue = a._venue, l._item = a._item, l.price = a.price, l.type = a.type, l.editFlag = !0, l.fId = a._id, a.payment && _.each(l.payments, function (b) {
                _.each(a.payment, function (a) {
                    b.value == a && (b.isChoose = !0)
                })
            })
        }, l.marginTop = {
            "margin-top": "38px"
        }, l.create = function () {
            if (!l.price) return void(l.priceFlag = !0);
            if (l.priceFlag = !1, !l.priceFlag) {
                var a = [];
                _.each(l.payments, function (b) {
                    b.isChoose && a.push(b.value)
                }), "overtime" == l.type && (a = "");
                var b = {
                    price: 1 * l.price,
                    _venue: l._venue,
                    _item: l._item,
                    type: l.type,
                    payment: a
                };
                if (l.editFlag) return void k.update({
                    id: l.fId
                }, b, function (a) {
                    l.close(), n(), o()
                }, function (a) {
                    l.promptERR = !0, l.wordERR = a.data.data
                });
                k.create(b, function (a) {
                    l.close(), n(), o(), _.each(l.payments, function (a) {
                        a.isChoose = !1
                    })
                }, function (a) {
                    l.promptERR = !0, l.wordERR = a.data.data
                })
            }
        }, l["delete"] = function () {
            k["delete"]({
                id: l.fId
            }, {}, function (a) {
                n(), o(), l.close()
            }, function (a) {})
        };
        var m = function () {
                i.index({}, function (a) {
                    l.venues = a.data.venues, l.venues.length > 0 && (l._venue = l.venues[0]._id, l.venueName = l.venues[0].name, l.getItem(l.venues[0]))
                }, function (a) {})
            },
            n = function () {
                var a = {
                    type: "overtime"
                };
                k.index(a, function (a) {
                    l.overtimes = a.data.fixedamounts
                }, function (a) {})
            },
            o = function () {
                var a = {
                    type: "deposit"
                };
                k.index(a, function (a) {
                    l.deposits = a.data.fixedamounts
                }, function (a) {})
            };
        l.getItem = function (a) {
            l.items = a.items, l.items.length > 0 && (l._item = l.items[0]._id, l.itemName = l.items[0].name)
        }, l.chooseVenue = function (a) {
            l._venue = a._id, l.venueName = a.name, l.venueFlag = !1, l.getItem(a)
        }, l.chooseItem = function (a) {
            l._item = a._id, l.itemName = a.name, l.itemFlag = !1
        };
        var p = function () {
            m(), n(), o()
        };
        p()
    }
    angular.module("fieldApp").controller("FmSettingTicketCashCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue", "Item", "Fiexdamounts"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l) {
        var m = this;
        m.flagOn = !0, m.arr = [], m.page = 1, m.itemsPerPage = 10, m.pagination = {
            page: m.page,
            itemsPerPage: m.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, m.pageChanged = function () {
            p()
        }, m.close = function () {
            m.name = "", m.itemFlag = "", m.venueFlag = !1, m.price = "", m.limit = "", m.startShowFlag = !1, m.endShowFlag = !1, m.deleteFlag = !1, m.addFlag = !1, m.editFlag = !1, n()
        }, m.showEdit = function (a) {
            m.addFlag = !0, m.name = a.name, m.venueName = a._venue.name, m.itemName = a._item.name, m._venue = a._venue._id, m._item = a._item._id, m.limit = a.limit, m.price = a.price, m.startShowFlag = !0, m.endShowFlag = !0, m.startDate = (new Date).setHours(a.startDateHours), m.startDate = new Date(m.startDate).setMinutes(a.startDateMins), m.endDate = (new Date).setHours(a.endDateHours), m.endDate = new Date(m.endDate).setMinutes(a.endDateMins), m.editFlag = !0, m.tId = a._id;
            var b = {
                _venue: m._venue
            };
            l.index(b, function (b) {
                m.tags = b.data.tags, _.each(m.tags, function (b) {
                    _.each(a.tags, function (a) {
                        b._id == a._tag && (b.select = !0)
                    })
                })
            }, function (a) {})
        }, m.marginTop = {
            "margin-top": "38px"
        }, m.create = function () {
            if (m.name ? m.nameFlag = !1 : (m.nameFlag = !0, m.errName = "此项为必填项"), !m.price && 0 != m.price) return void(m.priceFlag = !0);
            if (m.priceFlag = !1, !m.nameFlag && !m.priceFlag && m.startShowFlag && m.endShowFlag) {
                var a = [];
                _.each(m.tags, function (b) {
                    if (b.select) {
                        var c = {
                            _tag: b._id
                        };
                        a.push(c)
                    }
                });
                var b = {
                    name: m.name,
                    price: 1 * m.price,
                    _venue: m._venue,
                    _item: m._item,
                    limit: 1 * m.limit,
                    startDateHours: new Date(m.startDate).getHours(),
                    startDateMins: new Date(m.startDate).getMinutes(),
                    endDateHours: new Date(m.endDate).getHours(),
                    endDateMins: new Date(m.endDate).getMinutes(),
                    tags: a
                };
                if (m.editFlag) return void k.update({
                    id: m.tId
                }, b, function (a) {
                    m.close(), p()
                }, function (a) {
                    m.promptERR = !0, m.wordERR = a.data.data
                });
                k.create(b, function (a) {
                    m.close(), p()
                }, function (a) {
                    m.promptERR = !0, m.wordERR = a.data.data
                })
            }
        }, m["delete"] = function () {
            k["delete"]({
                id: m.tId
            }, {}, function (a) {
                p(), m.close()
            }, function (a) {})
        };
        var n = function () {
                i.index({}, function (a) {
                    m.venues = a.data.venues, m.venues.length > 0 && (m._venue = m.venues[0]._id, m.venueName = m.venues[0].name, m.getItem(m.venues[0]), o(m.venues[0]))
                }, function (a) {})
            },
            o = function (a) {
                var b = {
                    _venue: a._id
                };
                l.index(b, function (a) {
                    m.tags = a.data.tags, _.each(m.tags, function (a) {
                        a.select = !1
                    })
                }, function (a) {})
            },
            p = function () {
                var a = {
                    page: m.pagination.page,
                    itemsPerPage: m.pagination.itemsPerPage
                };
                k.index(a, function (a) {
                    m.tickets = a.data.tickets, m.pagination.totalItems = a.data.count, m.pagination.numPages = a.data.count / m.itemsPerPage
                }, function (a) {})
            };
        m.chooseTag = function (a) {
            a.select = !a.select
        }, m.getItem = function (a) {
            m.items = a.items, m.items.length > 0 && (m._item = m.items[0]._id, m.itemName = m.items[0].name)
        }, m.chooseVenue = function (a) {
            m._venue = a._id, m.venueName = a.name, m.venueFlag = !1, m.getItem(a), o(a)
        }, m.chooseItem = function (a) {
            m._item = a._id, m.itemName = a.name, m.itemFlag = !1
        };
        var q = function () {
            n(), p()
        };
        q()
    }
    angular.module("fieldApp").controller("FmSettingTicketCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue", "Item", "Ticket", "Tag"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.vName = "全部", l.vId = "", l.iName = "全部", l.iId = "", l.oneFlag = !1, l.marginTop = {
            "margin-top": "38px"
        }, l.page = 1, l.itemsPerPage = 10, l.pagination = {
            page: l.page,
            itemsPerPage: l.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, l.pageChanged = function () {
            p()
        }, l.close = function () {
            l.addFlag = !1, l.editFlag = !1, l.deleteFlag = !1, l.name = "", l.value = "", l.price = "", l.daylimit = "", l.limit = "", l.des = "", l.timeValue = "", l.bail = ""
        }, l["delete"] = function () {
            g["delete"]({
                id: l._id
            }, {}, function (a) {
                p(), l.close()
            }, function (a) {
                l.errorFlag = !0, l.err = a.data.data
            })
        }, l.chooseVenue = function (a) {
            l.venueName = a.name, l._venue = a._id, l.items = a.items, a.items.length > 0 ? (l.itemName = a.items[0].name, l._item = a.items[0]._id) : (l.itemName = "暂无", l._item = ""), l.venueFlag = !1, o()
        }, l.chooseVrr = function (a) {
            l.vName = a.name, l.vId = a._id, a._id ? (l.irr = [], l.irr = l.irr.concat(a.items), l.iName = "全部", l.iId = "", p()) : m(), l.selectVenueFlag = !1
        }, l.chooseItem = function (a) {
            l.itemName = a.name, l._item = a._id, l.itemFlag = !1
        }, l.chooseIrr = function (a) {
            l.iName = a.name, l.iId = a._id, l.selectItemFlag = !1, p()
        }, l.edit = function (a, b) {
            if (b) {
                var c = {
                    isActive: !a.isActive
                };
                g.update({
                    id: a._id
                }, c, function (a) {
                    l.close(), l.succeedFlag = !0, p()
                }, function (a) {
                    l.errorFlag = !0, l.err = a.data.data
                })
            } else {
                l.editFlag = !0, _.each(l.venues, function (b) {
                    b._id == a._venue._id && (l.venueName = b.name, l._venue = b._id, l.items = b.items, _.each(b.items, function (b) {
                        b._id == a._item._id && (l.itemName = b.name, l._item = b._id)
                    }))
                }), l.timeValue = a.timeValue, l._id = a._id, l.name = a.name, l.price = a.price, l.value = a.value, l.oneFlag = a.daylimit > 1 ? !1 : !0, l.limit = a.limit, l.bail = a.bail, l.des = a.description, l.cardcost = a.cardCost;
                var c = {
                    _venue: l._venue
                };
                k.index(c, function (b) {
                    l.tags = b.data.serviceTags, _.each(l.tags, function (b) {
                        _.each(a.serviceTags, function (a) {
                            b._id == a._serviceTag && (b.select = !0)
                        })
                    })
                }, function (a) {}), l.addFlag = !0
            }
        }, l.finish = function () {
            if (!l.name || isNaN(l.value) || isNaN(l.price) || isNaN(l.cardcost) || isNaN(l.timeValue)) return l.errorFlag = !0, void(l.err = "请把资料填充完整");
            var a = [];
            _.each(l.tags, function (b) {
                b.select && a.push(b._id)
            });
            var b = {
                type: "time",
                _venue: l._venue,
                _item: l._item,
                name: l.name,
                value: 1 * l.value,
                daylimit: l.oneFlag ? 1 : 99,
                limit: 1 * l.limit,
                price: 1 * l.price,
                description: l.des,
                timeValue: 1 * l.timeValue,
                bail: 1 * l.bail,
                cardCost: 1 * l.cardcost,
                serviceTags: a,
                isActive: l.isActive
            };
            l.editFlag ? g.update({
                id: l._id
            }, b, function (a) {
                l.close(), p()
            }, function (a) {
                l.errorFlag = !0, l.err = a.data.data
            }) : g.create(b, function (a) {
                l.close(), p()
            }, function (a) {
                l.errorFlag = !0, l.err = a.data.data
            })
        }, l.chooseTag = function (a) {
            a.select = !a.select
        };
        var m = function () {
                i.index({}, function (a) {
                    l.venues = a.data.venues, l.vrr = [], l.venues.length > 0 && (l.venueName = l.venues[0].name, l._venue = l.venues[0]._id, l.items = l.venues[0].items, l.vrr = l.c.concat(l.venues), l.venues[0].items.length > 0 ? (l.itemName = l.venues[0].items[0].name, l._item = l.venues[0].items[0]._id) : (l.itemName = "暂无", l._item = "")), o(), n()
                }, function (a) {})
            },
            n = function () {
                j.index({}, function (a) {
                    l.items = a.data.items, l.irr = [], l.irr = l.c.concat(l.items), p()
                }, function (a) {})
            },
            o = function () {
                var a = {
                    _venue: l._venue
                };
                k.index(a, function (a) {
                    l.tags = a.data.serviceTags
                }, function (a) {})
            },
            p = function () {
                var a = {
                    type: "time",
                    page: l.pagination.page,
                    itemsPerPage: l.pagination.itemsPerPage,
                    _venue: l.vId,
                    _item: l.iId,
                    isActive: "all"
                };
                g.index(a, function (a) {
                    l.services = a.data.services, l.pagination.totalItems = a.data.count, l.pagination.numPages = a.data.count / l.itemsPerPage
                }, function (a) {
                    l.errorFlag = !0, l.err = a.data.data
                })
            },
            q = function () {
                l.c = [{
                    name: "全部",
                    _id: ""
                }], m()
            };
        q()
    }
    angular.module("fieldApp").controller("FmTimeCardCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "Service", "$location", "Venue", "Item", "ServiceTag"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.marginTop = {
            "margin-top": "38px"
        }, l.flagOn = !0, l.flagOpen = !0, l.vId = "", l.arr = [], l.h = "height:" + (window.screen.height - 450) + "px", l.close = function () {
            l.flagOn = !0, l.addFlag = !1, l.editFlag = !1, l.closeFlag = !1, l.startShowFlag = !1, l.endShowFlag = !1, l.chooseVenueFlag = !1, l.sFlag = !1, l.eFlag = !1, l.closeDate = "", l.closeFlag2 = !1, l.closeDate2 = "", l.deleteFlag = !1, l.errorFlag = !1
        }, l.chooseOpen = function (a) {
            l.flagOpen = a
        }, l.chooseOn = function (a) {
            l.flagOn = a, l.closeDate || (l.closeDate = new Date((new Date).getTime() + 864e5), l.closeFlag = !0)
        }, l.showEdit = function (a) {
            l.editFlag = !0, l.tId = a._id, l.flagOn = a.isUsed, l.flagOn || (l.closeDate = a.closeDate, l.closeFlag = !0), a.close_endDate ? (l.closeFlag = !0, l.closeFlag2 = !0, l.closeDate = a.close_startDate, l.closeDate2 = a.close_endDate) : a.close_startDate && (l.closeFlag = !0, l.closeDate = a.close_startDate);
            var b = new Date,
                c = new Date;
            b.setHours(a.startDateHours), b.setMinutes(a.startDateMins), l.startDate = b, c.setHours(a.endDateHours), c.setMinutes(a.endDateMins), l.endDate = c, l.startShowFlag = !0, l.endShowFlag = !0
        }, l.judge = function (a) {
            switch (a) {
            case "name":
                l.name ? l.nameFlag = !1 : l.nameFlag = !0
            }
        }, l.chooseVenue = function (a) {
            l.venueName = a.name, l.vId = a._id, l.chooseVenueFlag = !1, l.venue = a, m()
        }, l["delete"] = function () {
            k["delete"]({
                id: l.tId
            }, {}, function (a) {
                l.close(), l.getTime(l.iId)
            }, function (a) {})
        }, l.edit = function () {
            if (l.startShowFlag || (l.sFlag = !0), l.endShowFlag || (l.eFlag = !0), l.closeFlag || l.closeFlag2) {
                if (!l.closeFlag && l.closeFlag2) return void(l.longTimeFlag = !0);
                if (l.closeFlag2) {
                    l.closeDate2 = new Date(l.closeDate2), l.closeDate2.setHours(23);
                    var a = new Date(l.closeDate2).getTime();
                    l.flagOpen = !1
                } else {
                    var a = "";
                    l.flagOpen = !1
                }
            } else l.flagOpen = !0; if (l.startShowFlag & l.endShowFlag) {
                l.cItems = [], l.cItems.push(l.iId), l.closeDate = new Date(l.closeDate), l.closeDate.setHours(1);
                var b = {
                    startDateHours: new Date(l.startDate).getHours(),
                    startDateMins: new Date(l.startDate).getMinutes(),
                    endDateHours: new Date(l.endDate).getHours(),
                    endDateMins: new Date(l.endDate).getMinutes(),
                    isUsed: !0,
                    closeDate: (new Date).getTime(),
                    close_startDate: new Date(l.closeDate).getTime(),
                    close_endDate: a,
                    isOpen: l.flagOpen,
                    items: l.iId,
                    _venue: l.vId
                };
                k.update({
                    id: l.tId
                }, b, function (a) {
                    l.close(), l.getTime(l.iId)
                }, function (a) {
                    l.errorFlag = !0
                })
            }
        }, l.finish = function () {
            if (l.startShowFlag || (l.sFlag = !0), l.endShowFlag || (l.eFlag = !0), l.startShowFlag & l.endShowFlag) {
                var a = {
                    startDateHours: new Date(l.startDate).getHours(),
                    startDateMins: new Date(l.startDate).getMinutes(),
                    endDateHours: new Date(l.endDate).getHours(),
                    endDateMins: new Date(l.endDate).getMinutes(),
                    isUsed: !0,
                    _item: l.iId,
                    _venue: l.vId
                };
                k.create(a, function (a) {
                    l.close(), l.getTime(l.iId)
                }, function (a) {
                    l.errorFlag = !0
                })
            }
        }, l.select = function (a) {
            for (var b = 0; b < l.times.length; b++) l.times[b].select = a, l.selectFlag = a;
            for (var b = 0; b < l.times.length; b++)
                if (l.times[b].select) return void(l.editAllFlag = !0);
            l.editAllFlag = !1
        }, l.changeTime = function (a) {
            a.select = !a.select;
            for (var b = 0; b < l.times.length; b++)
                if (l.times[b].select) return void(l.editAllFlag = !0);
            l.editAllFlag = !1
        }, l.getNowFormatDate = function (a) {
            var b = "-",
                c = a.getMonth() + 1,
                d = a.getDate();
            c >= 1 && 9 >= c && (c = "0" + c), d >= 0 && 9 >= d && (d = "0" + d);
            var e = a.getFullYear() + b + c + b + d;
            return e
        }, l.getTime = function (a) {
            var b = {
                _venue: l.vId,
                _item: a,
                sortBy: "startDate"
            };
            l.iId = a;
            var c = (new Date).getTime();
            k.index(b, function (a) {
                l.times = a.data.times, _.each(l.times, function (a) {
                    if (a.startDateHours < 10) var b = "0" + a.startDateHours;
                    else var b = a.startDateHours; if (a.startDateMins < 10) var d = "0" + a.startDateMins;
                    else var d = a.startDateMins; if (a.endDateHours < 10) var e = "0" + a.endDateHours;
                    else var e = a.endDateHours; if (a.endDateMins < 10) var f = "0" + a.endDateMins;
                    else var f = a.endDateMins;
                    a.showDate = b + ":" + d + "--" + e + ":" + f, a.close_startDate ? a.close_endDate ? c < new Date(a.close_startDate).getTime() ? (a.isUsed = !0, a.warn = l.getNowFormatDate(new Date(a.close_startDate)) + "至" + l.getNowFormatDate(new Date(a.close_endDate)) + "不可订") : c > new Date(a.close_endDate).getTime() ? (a.isUsed = !0, a.warn = "") : (a.isUsed = !1, a.warn = l.getNowFormatDate(new Date(a.close_startDate)) + "至" + l.getNowFormatDate(new Date(a.close_endDate)) + "不可订") : (c < new Date(a.close_startDate).getTime() ? a.isUsed = !0 : a.isUsed = !1, a.warn = l.getNowFormatDate(new Date(a.close_startDate)) + "后不可订") : a.isUsed = !0
                })
            }, function (a) {})
        };
        var m = function () {
                i.index({}, function (a) {
                    l.venues = a.data.venues, l.venues.length > 0 && (l.vId || (l.venueName = l.venues[0].name, l.vId = l.venues[0]._id, l.venue = l.venues[0]), l.venue.items.length > 0 && (l.venue.items[0].select = !0, l.venue.items[l.venue.items.length - 1].endSelect = !0, l.getTime(l.venue.items[0]._id)))
                }, function (a) {})
            },
            n = function () {
                m()
            };
        n()
    }
    angular.module("fieldApp").controller("FmTimeRegisterCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue", "Item", "Time"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this,
            m = function () {
                var a = {
                    page: l.pagination.page,
                    itemsPerPage: l.pagination.itemsPerPage
                };
                j.index(a, function (a) {
                    l.productcategories = a.data.productcategories, _.each(l.productcategories, function (a) {
                        for (var b = 0; b < a.secondCategories.length; b++) 0 == b ? a.second = a.secondCategories[b].name : a.second = a.second + "," + a.secondCategories[b].name
                    });
                    var b = a.data.count;
                    l.pagination.totalItems = b, l.pagination.numPages = b / l.itemsPerPage
                }, function () {})
            };
        l.page = 1, l.itemsPerPage = 10, l.pagination = {
            page: l.page,
            itemsPerPage: l.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, l["delete"] = function (a) {
            var b = [];
            _.each(l.secondTypes, function (c) {
                c.order != a && b.push(c)
            }), l.secondTypes = b
        }, l.judge = function () {
            if (l.inputFlag2 = !1, l.name1) {
                if (0 == l.secondTypes.length) var a = 1;
                else var a = l.secondTypes[l.secondTypes.length - 1].order + 1;
                var b = {
                    name: l.name1,
                    order: a
                };
                l.secondTypes.push(b), l.name1 = "", document.getElementById("type").focus()
            }
        }, l.showEdit = function (a) {
            l.pId = a._id, l.editFlag = !0, l.addFlag = !0;
            for (var b = 0; b < a.secondCategories.length; b++) a.secondCategories[b].order = b + 1;
            l.secondTypes = a.secondCategories, l.firstName = a.name
        }, l.create = function () {
            if (!l.firstName) return void(l.firstFlag = !0);
            if (l.name1) {
                if (0 == l.secondTypes.length) var a = 1;
                else var a = l.secondTypes[l.secondTypes.length - 1].order + 1;
                var b = {
                    name: l.name1,
                    order: a
                };
                l.secondTypes.push(b), l.name1 = ""
            }
            if (l.editFlag) {
                var c = {
                    name: l.firstName,
                    secondArr: l.secondTypes
                };
                return void j.update({
                    id: l.pId
                }, c, function (a) {
                    m(), l.close()
                }, function (a) {
                    l.promptERR = !0, l.wordERR = a.data.data
                })
            }
            var c = {
                name: l.firstName,
                secondArr: l.secondTypes
            };
            j.create(c, function (a) {
                m(), l.close()
            }, function (a) {
                l.promptERR = !0, l.wordERR = a.data.data
            })
        }, l.deleteProductCategory = function () {
            j["delete"]({
                id: l.pId
            }, function (a) {
                m(), l.close()
            }, function (a) {
                l.promptERR = !0, l.wordERR = a.data.data
            })
        };
        var n = function () {
            l.secondTypes = [], l.inputFlag1 = !0, l.inputFlag2 = !1, m()
        };
        l.pageChanged = function () {
            m()
        }, l.close = function () {
            l.addFlag = !1, l.secondTypes = [], l.inputFlag1 = !0, l.inputFlag2 = !1, l.firstName = "", l.editFlag = !1, l.deleteFlag = !1, l.firstFlag = !1
        }, n()
    }
    angular.module("fieldApp").controller("FmSettingTypeCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Item", "Productcategory", "Product"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.flagOn = !0, k.arr = [], k.close = function () {
            k.flagOn = !0, k.addFlag = !1, k.name = "", k.day = "", k.arr = [], k.sureFlag = !1, k.editFlag = !1, k.closeFlag = !1, k.closeDate = "", k.closeFlag2 = !1, k.closeDate2 = "", k.deleteFlag = !1, k.longTimeFlag = !1;
            for (var a = 0; a < k.items.length; a++) k.items[a].select = !1
        }, k.showEdit = function (a) {
            k.editFlag = !0, k.name = a.name, k.day = a.orderDay, k.flagOn = a.isUsed, k.flagOpen = a.isOpen, k.vId = a._id, a.closeOpen_endDate ? (k.closeFlag = !0, k.closeFlag2 = !0, k.closeDate = a.closeOpen_startDate, k.closeDate2 = a.closeOpen_endDate) : a.closeOpen_startDate && (k.closeFlag = !0, k.closeDate = a.closeOpen_startDate);
            for (var b = 0; b < k.items.length; b++)
                for (var c = 0; c < a.items.length; c++) k.items[b]._id == a.items[c]._id && (k.items[b].select = !0, k.arr.push(k.items[b]))
        }, k.chooseState = function (a) {
            _.each(k.useStateArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", k.isUsed = a.isUsed
        }, k.useStateArr = [{
            name: "开通",
            image: "singleChoose_imageYes",
            isUsed: !0
        }, {
            name: "不开通",
            image: "singleChoose_imageNo",
            isUsed: !1
        }], k.marginTop = {
            "margin-top": "38px"
        }, k.judge = function (a) {
            switch (a) {
            case "name":
                k.name ? k.nameFlag = !1 : k.nameFlag = !0;
                break;
            case "day":
                k.day ? k.dayFlag = !1 : k.dayFlag = !0
            }
        }, k.chooseOn = function (a) {
            k.flagOn = a, k.closeDate || (k.closeDate = new Date((new Date).getTime() + 864e5), k.closeFlag = !0)
        }, k.chooseOpen = function (a) {
            k.flagOpen = a
        }, k.finish = function () {
            if (k.name ? k.nameFlag = !1 : (k.nameFlag = !0, k.errName = "此项为必填项"), !(k.arr.length > 0)) return void(k.iFlag = !0);
            if (k.iFlag = !1, !k.nameFlag && !k.dayFlag) {
                k.cItems = [];
                for (var a = 0; a < k.arr.length; a++) k.cItems.push(k.arr[a]._id);
                var b = {
                    name: k.name,
                    orderDay: 1,
                    isUsed: !0,
                    isOpen: !0,
                    items: k.cItems
                };
                i.create(b, function (a) {
                    k.close(), l()
                }, function (a) {
                    400 == a.data.code ? (k.dayFlag = !0, k.errDay = "请在‘输入天数’这栏输入数字") : 500 == a.data.code && (k.nameFlag = !0, k.errName = "该场馆名称已被使用")
                })
            }
        }, k.edit = function () {
            if (k.name ? k.nameFlag = !1 : (k.nameFlag = !0, k.errName = "此项为必填项"), k.closeFlag || k.closeFlag2) {
                if (!k.closeFlag && k.closeFlag2) return void(k.longTimeFlag = !0);
                if (k.closeFlag2) {
                    var a = new Date(k.closeDate2).getTime();
                    k.flagOpen = !1
                } else {
                    var a = "";
                    k.flagOpen = !1
                }
            } else k.flagOpen = !0; if (!k.nameFlag && !k.dayFlag) {
                k.cItems = [];
                for (var b = 0; b < k.arr.length; b++) k.cItems.push(k.arr[b]._id);
                var c = {
                    name: k.name,
                    orderDay: 1,
                    isUsed: k.flagOn,
                    closeDate: (new Date).getTime(),
                    isOpen: k.flagOpen,
                    items: k.cItems,
                    closeOpen_startDate: new Date(k.closeDate).getTime(),
                    closeOpen_endDate: a
                };
                i.update({
                    id: k.vId
                }, c, function (a) {
                    k.close(), l()
                }, function (a) {
                    402 == a.data.code ? (k.dayFlag = !0, k.errDay = "请在‘输入天数’这栏输入数字") : 500 == a.data.code && (k.nameFlag = !0, k.errName = "该场馆名称已被使用")
                })
            }
        }, k["delete"] = function () {
            i["delete"]({
                id: k.vId
            }, {}, function (a) {
                l(), k.close()
            }, function (a) {})
        }, k.getNowFormatDate = function (a) {
            var b = "-",
                c = a.getMonth() + 1,
                d = a.getDate();
            c >= 1 && 9 >= c && (c = "0" + c), d >= 0 && 9 >= d && (d = "0" + d);
            var e = a.getFullYear() + b + c + b + d;
            return e
        }, k.move = function (a, b) {
            if ("up" == a) var c = {
                _first: b._id,
                _second: k.venues[b.order - 2]._id
            };
            else var c = {
                _first: b._id,
                _second: k.venues[b.order]._id
            };
            i.move(c, function (a) {
                l()
            }, function (a) {})
        };
        var l = function () {
                i.index({}, function (a) {
                    k.venues = a.data.venues;
                    for (var b = 0; b < k.venues.length; b++) k.venues[b].order = b + 1;
                    var c = (new Date).getTime();
                    _.each(k.venues, function (a) {
                        a.closeOpen_startDate ? a.closeOpen_endDate ? c < new Date(a.closeOpen_startDate).getTime() ? (a.isOpen = !0, a.warn = k.getNowFormatDate(new Date(a.closeOpen_startDate)) + "至" + k.getNowFormatDate(new Date(a.closeOpen_endDate)) + "不可订") : c > new Date(a.closeOpen_endDate).getTime() ? (a.isOpen = !0, a.warn = "") : (a.isOpen = !1, a.warn = k.getNowFormatDate(new Date(a.closeOpen_startDate)) + "至" + k.getNowFormatDate(new Date(a.closeOpen_endDate)) + "不可订") : (c < new Date(a.closeOpen_startDate).getTime() ? a.isOpen = !0 : a.isOpen = !1, a.warn = k.getNowFormatDate(new Date(a.closeOpen_startDate)) + "后不可订") : a.isOpen = !0
                    })
                }, function (a) {})
            },
            m = function () {
                j.index({}, function (a) {
                    k.items = [];
                    for (var b = 0; b < a.data.items.length; b++) a.data.items[b].isUsed && k.items.push(a.data.items[b]);
                    for (var b = 0; b < k.items.length; b++) k.items[b].select = !1
                }, function (a) {})
            };
        k.chooseItem = function (a) {
            k.arr = [], a.select = !a.select;
            for (var b = 0; b < k.items.length; b++) k.items[b].select && k.arr.push(k.items[b])
        };
        var n = function () {
            l(), m()
        };
        n()
    }
    angular.module("fieldApp").controller("FmVenueRegisterCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue", "Item"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l) {
        var m = this;
        m.close = function () {
            m.name = "", m.price = "", m.totalPrice = "", m.addFlag = !1, m.editFlag = !1, m.sureFlag = !1, m.nameFlag = !1, m.addMemberFlag = !1, m.editMember = !1, m.sureFlag = !1, m.addLevelFlag = !1, m.mtFlag = !1, m.lFlag = !1, m.discount = "", m.level = "", m.info = ""
        }, m.judge = function (a) {
            switch (a) {
            case "name":
                m.name ? m.nameFlag = !1 : m.nameFlag = !0;
                break;
            case "price":
                m.price ? m.priceFlag = !1 : m.priceFlag = !0;
                break;
            case "discount":
                m.discount ? m.discountFlag = !1 : m.discountFlag = !0;
                break;
            case "level":
                m.level ? m.levelFlag = !1 : m.levelFlag = !0;
                break;
            case "info":
                m.info ? m.infoFlag = !1 : m.infoFlag = !0;
                break;
            case "totalPrice":
                m.totalPrice ? m.totalPriceFlag = !1 : m.totalPriceFlag = !0
            }
        }, m.finishMember = function () {
            if (m.name ? m.nameFlag = !1 : m.nameFlag = !0, m.discount ? m.discount > 1 || m.discount <= 0 ? (m.discountFlag = !0, m.discountErr = "请输入正确的数值") : m.discountFlag = !1 : (m.discountFlag = !0, m.discountErr = "此项为必填项"), !m.nameFlag && !m.discountFlag) {
                var a = {
                    name: m.name,
                    discount: 1 * m.discount
                };
                if (m.editMember) return void k.update({
                    id: m.mId
                }, a, function (a) {
                    m.close(), n()
                }, function (a) {
                    m.errorFlag = !0, 402 == a.data.code && (m.err = "请在折扣处输入一个0到1的数")
                });
                k.create(a, function (a) {
                    m.close(), n()
                }, function (a) {
                    m.errorFlag = !0, 402 == a.data.code && (m.err = "请在折扣处输入一个0到1的数")
                })
            }
        }, m["delete"] = function (a) {
            return m.mtFlag ? void k["delete"]({
                id: m.mId
            }, function (a) {
                m.close(), n()
            }, function (a) {}) : m.lFlag ? void l["delete"]({
                id: m.lId
            }, function (a) {
                m.close(), getLevel()
            }, function (a) {}) : void i["delete"]({
                id: m.cId
            }, function (a) {
                m.close(), getCard()
            }, function (a) {})
        }, m.showEditMember = function (a) {
            m.editMember = !0, m.addMemberFlag = !0, m.name = a.name, m.discount = a.discount, m.mId = a._id
        };
        var n = function () {
                k.index({}, function (a) {
                    m.membertypes = a.data.membertypes, m.membertypes.length > 0 && (m.membertypeName = m.membertypes[0].name, m.chooseMid = m.membertypes[0]._id)
                }, function (a) {})
            },
            o = function () {
                e.get({}, function (a) {
                    var b = a.data.user._organization ? a.data.user._organization : a.data.user._id;
                    e.getOrgInfo({
                        id: b
                    }, function (a) {
                        m.money = a.data.user.cardCost, m.rule = a.data.user.depositDes
                    }, function () {})
                }, function () {})
            },
            p = function () {
                o(), n()
            };
        p()
    }
    angular.module("fieldApp").controller("FmSettingVipCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Card", "$timeout", "Membertype", "Level"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.titleState = f.params.state || "stock", k.close = function () {
            k.enterFlag = !1, k.changePriceFlag = !1, k.name = "", k.supplier = "", k.num = "", k.price = "", k.salePrice = "", k.typeFlag = !1, k.searchProductName = ""
        };
        var l = function () {
                var a = {
                    name: k.searchProductName
                };
                i.index(a, function (a) {
                    k.products = a.data.shopProducts, k.products.length > 0 && (k.productName = k.products[0].name, k.pId = k.products[0]._id), k.close()
                }, function (a) {})
            },
            m = function () {
                j.index({}, function (a) {
                    k.supplies = a.data.supplies, k.supplies.length > 0 && (k.supply = k.supplies[0].supplyName, k.sId = k.supplies[0]._id)
                }, function (a) {})
            };
        k.search = function () {
            l()
        }, k.chooseProduct = function (a) {
            k.productName = a.name, k.pId = a._id, k.chooseNameFlag = !1
        }, k.chooseSupply = function (a) {
            k.supply = a.supplyName, k.sId = a._id, k.chooseSupplyFlag = !1
        }, k.enter = function () {
            var a = {
                _shopProduct: k.pId,
                quantity: 1 * k.num,
                _supply: k.sId,
                price: 1 * k.price
            };
            i.enter(a, function (a) {
                k.close(), l()
            }, function (a) {})
        }, k.changeTitle = function (a) {
            switch (k.titleState = "", k.close(), a) {
            case "stock":
                k.titleState = "stock", f.go("fm-inventory.stock", {
                    state: "stock"
                });
                break;
            default:
                k.titleState = "record", f.go("fm-inventory.record", {
                    state: "record"
                })
            }
            n()
        };
        var n = function () {
            l(), m()
        };
        n()
    }
    angular.module("fieldApp").controller("FmInventoryCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "ShopProduct", "Supply"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q) {
        var r, s = this;
        s.titleState = f.params.state || "sale", s.paymentArr = [{
            name: "支付宝",
            value: "alipay",
            image: "singleChoose_imageYes"
        }, {
            name: "微信",
            value: "wx",
            image: "singleChoose_imageNo"
        }, {
            name: "余额",
            value: "member",
            image: "singleChoose_imageNo"
        }, {
            name: "现金",
            value: "cash",
            image: "singleChoose_imageNo"
        }], s.paymentArr2 = [{
            name: "支付宝",
            value: "alipay",
            image: "singleChoose_imageYes"
        }, {
            name: "微信",
            value: "wx",
            image: "singleChoose_imageNo"
        }], s.refundArr = [{
            name: "现金",
            image: "singleChoose_imageYes",
            value: "cash"
        }, {
            name: "会员卡",
            value: "card",
            image: "singleChoose_imageNo"
        }], s.page = 1, s.itemsPerPage = 10, s.pagination = {
            page: s.page,
            itemsPerPage: s.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, s.buyProduct = [], s.total = 0, s.showCodeBox = !0, s._member = "", s.wxFlag = !0, s.buyPayment = "alipay", s.startDate = new Date, s.closeDate = new Date, s.close = function () {
            s.sellFlag = !1, s.refundFlag = !1, s.payFlag = !1, s.total = 0, s.showCodeBox = !0, s.wxFlag = !0, s.auth_code = "", s.moneySelect = !1, s.continueFlag = !1, s.buyProduct = []
        }, s.judgePay = function (a) {
            s.payFlag = !0
        }, s.getNowFormatDate = function (a) {
            var b = "-",
                c = ":",
                d = a.getMonth() + 1,
                e = a.getDate();
            d >= 1 && 9 >= d && (d = "0" + d), e >= 0 && 9 >= e && (e = "0" + e);
            var f = a.getFullYear() + b + d + b + e + " " + a.getHours() + c + a.getMinutes() + c + a.getSeconds();
            return f
        }, s.print = function (a) {
            for (var b = '<div><div><h3 style="font-size:20px">欢迎光临</h3><h3 style="font-size:20px">购买商品消费小票</h3>操作员：' + s.admin + '</h3></div><span>**********************************</span><div><div style="border-bottom: 1px solid #DADADA;"><table style="width: 100%;"><thead><tr><td width="50%">商品名称</td><td width="20%">数量</td><td width="30%">单价</td></tr></thead>', c = 0; c < s.buyProduct.length; c++) b = 0 == c ? b + "<tbody><tr><td>" + s.buyProduct[c].name + "</td><td>" + s.buyProduct[c].num + "</td><td>" + s.buyProduct[c].price + "</td></tr>" : b + "<tr><td>" + s.buyProduct[c].name + "</td><td>" + s.buyProduct[c].num + "</td><td>" + s.buyProduct[c].price + "</td></tr>",
                c == s.buyProduct.length - 1 && (b = b + "<tr><td>合计</td><td>" + s.total + "</td><td></td></tr></tbody></table></div><span>**********************************</span>");
            if (s.members.cards.length > 0) var d = "" + s.members.cards[0].total;
            else var d = "0"; if (s.members.virtualAccount.expires_in) var e = s.getNowFormatDate(new Date(s.members.virtualAccount.expires_in));
            else var e = "";
            b = b + "<div>消费方式:" + a + "</div><div>现金账户余额:￥" + d + "</div><div>虚拟账户余额:￥" + s.members.virtualAccount.total + "</div><div>有效期:" + e, b = b + "</div><div>消费日期:" + s.getNowFormatDate(new Date) + "</div><span>**********************************</span><div>客户签名:</div>";
            var f = getLodop();
            f.PRINT_INIT(""), f.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), f.SET_PRINTER_INDEXA(-1), f.SET_PRINT_PAGESIZE(3, 800, 100, ""), f.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", b), f.PRINT(), s.close()
        }, s.print1 = function (a) {
            for (var b = '<div><div><h3 style="font-size:20px">欢迎光临</h3><h3 style="font-size:20px">购买商品消费小票</h3>操作员：' + s.admin + '</h3></div><span>**********************************</span><div><div style="border-bottom: 1px solid #DADADA;"><table style="width: 100%;"><thead><tr><td width="50%">商品名称</td><td width="20%">数量</td><td width="30%">单价</td></tr></thead>', c = 0; c < s.buyProduct.length; c++) b = 0 == c ? b + "<tbody><tr><td>" + s.buyProduct[c].name + "</td><td>" + s.buyProduct[c].num + "</td><td>" + s.buyProduct[c].price + "</td></tr>" : b + "<tr><td>" + s.buyProduct[c].name + "</td><td>" + s.buyProduct[c].num + "</td><td>" + s.buyProduct[c].price + "</td></tr>", c == s.buyProduct.length - 1 && (b = b + "<tr><td>合计</td><td>" + s.total + "</td><td></td></tr></tbody></table></div><span>**********************************</span>");
            b = b + "<div>消费方式:" + a + "</div>", b = b + "<div>消费日期:" + s.getNowFormatDate(new Date) + "</div><span>**********************************</span><div>客户签名:</div>";
            var d = getLodop();
            d.PRINT_INIT(""), d.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), d.SET_PRINTER_INDEXA(-1), d.SET_PRINT_PAGESIZE(3, 800, 100, ""), d.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", b), d.PRINT(), s.close()
        }, s.auth_codeCreate = function (a) {
            if (s.promptWARN = !0, s.wordWARN = "支付中", 13 == a.keyCode) switch (s.buyPayment) {
            case "wx":
                var b = {
                    shopProductArr: s.brr,
                    auth_code: s.auth_code,
                    spbill_create_ip: "0.0.0.0"
                };
                j.buyWx(b, function (a) {
                    s.showAuth_codeBox = !1, s.promptOK = !0, s.promptWARN = !1, s.wordOK = "购买成功", clearInterval(s.setIntervalId), s.print1("微信支付"), o(function () {
                        s.promptOK = !1
                    }, 1e3)
                }, function (a) {
                    s.promptERR = !0, s.promptWARN = !1, clearInterval(s.setIntervalId), s.wordERR = a.data.data
                });
                break;
            case "alipay":
                var b = {
                    auth_code: s.auth_code,
                    shopProductArr: s.brr
                };
                l.payProduct(b, function (a) {
                    s.showAuth_codeBox = !1, s.promptOK = !0, s.promptWARN = !1, s.wordOK = "购买成功", clearInterval(s.setIntervalId), s.print1("支付宝支付"), o(function () {
                        s.promptOK = !1
                    }, 1e3)
                }, function (a) {
                    s.promptWARN = !1, s.promptERR = !0, clearInterval(s.setIntervalId), s.wordERR = a.data.data + ",请更新支付码再支付"
                });
                break;
            case "member":
                ;
                n.index({
                    id: "today"
                }, function (a) {
                    r = a.data;
                    var b = t(s.auth_code);
                    if (b) {
                        var c = {
                            _member: b,
                            payment: "member",
                            shopProductArr: s.brr
                        };
                        j.buyProduct(c, function (a) {
                            s.showAuth_codeBox = !1, s.promptWARN = !1, s.promptOK = !0, o(function () {
                                s.promptOK = !1
                            }, 1e3), s.wordOK = "购买成功", i.index({
                                id: b
                            }, function (a) {
                                s.members = a.data.member, s.print("余额支付")
                            }, function (a) {
                                "找不到对象：member" == a.data.data && (s.showMemberInfo = !1, s.promptERR = !0, s.wordERR = "会员不存在")
                            })
                        }, function (a) {
                            s.promptWARN = !1, s.promptERR = !0, s.wordERR = a.data.data
                        })
                    } else c = {
                        cardNo: s.auth_code
                    }, i.indexBycard(c, function (a) {
                        s.members = a.data.member;
                        var b = {
                            _member: a.data.member._id,
                            payment: "member",
                            shopProductArr: s.brr
                        };
                        j.buyProduct(b, function (a) {
                            s.showAuth_codeBox = !1, s.promptWARN = !1, s.promptOK = !0, s.wordOK = "购买成功", s.print("余额支付"), o(function () {
                                s.promptOK = !1
                            }, 1e3)
                        }, function (a) {
                            s.promptWARN = !1, s.promptERR = !0, s.wordERR = a.data.data
                        })
                    }, function (a) {
                        s.promptERR = !0, s.wordERR = "会员不存在"
                    })
                })
            }
        }, s.shut = function () {
            s.showAuth_codeBox = !1, clearInterval(s.setIntervalId), s.brr = [], document.getElementById("auth_code").blur()
        }, s.create = function () {
            s.brr = [];
            for (var a = 0; a < s.buyProduct.length; a++) {
                var b = {
                    _shopProduct: s.buyProduct[a]._id,
                    quantity: 1 * s.buyProduct[a].num
                };
                s.brr.push(b)
            }
            switch (s.buyPayment) {
            case "wx":
            case "alipay":
            case "member":
                s.showAuth_codeBox = !0, s.setIntervalId = setInterval(function () {
                    document.getElementById("auth_code").focus()
                }, 100);
                break;
            case "cash":
                var c = {
                    shopProductArr: s.brr,
                    payment: "cash"
                };
                j.buyProduct(c, function (a) {
                    s.promptWARN = !1, s.promptOK = !0, s.wordOK = "购买成功", s.print1("现金支付"), o(function () {
                        s.promptOK = !1
                    }, 1e3)
                }, function (a) {
                    s.promptWARN = !1, s.promptERR = !0, s.wordERR = a.data.data
                })
            }
        }, s.checkMember = function (a, b, c) {
            if (!s.memberTelOrCard && !c) return s.promptERR = !0, void(s.wordERR = "请填写会员卡号/手机号");
            if (c) i.show({
                id: c
            }, function (a) {
                s.members = a.data.member, s.showMemberInfo = !0, s._member = s.members._id
            }, function (a) {});
            else {
                var d = {};
                n.index({
                    id: "today"
                }, function (c) {
                    r = c.data;
                    var e = t(s.memberTelOrCard);
                    e ? i.index({
                        id: e
                    }, function (c) {
                        s.members = c.data.member, s._member = e, s.showMemberInfo = !0, s.isReal = c.data.member.isReal, s.name = c.data.member.name, s.phone = c.data.member.tel, a && s.print(b)
                    }, function (a) {
                        "找不到对象：member" == a.data.data && (s.showMemberInfo = !1, s.promptERR = !0, s.wordERR = "会员不存在")
                    }) : (d = {
                        cardNo: s.memberTelOrCard
                    }, i.indexBycard(d, function (c) {
                        s.members = c.data.member, s._member = s.members._id, s.showMemberInfo = !0, s.isReal = c.data.member.isReal, s.name = c.data.member.name, s.phone = c.data.member.tel, a && s.print(b)
                    }, function (a) {
                        "找不到对象：member" == a.data.data && (s.showMemberInfo = !1, s.promptERR = !0, s.wordERR = "会员不存在")
                    }))
                })
            }
        }, s.resert = function () {
            s.memberTelOrCard = "", s.members = null, document.getElementById("code").focus()
        }, s.getShopProduct = function () {
            s.pName ? s.selectFlag = !0 : s.selectFlag = !1;
            var a = {
                mix: s.pName
            };
            j.index(a, function (a) {
                s.products = a.data.shopProducts
            }, function (a) {})
        }, s.refund = function () {
            var a = {
                total: 1 * s.refundPrice
            };
            j.refund({
                controller: s.rId
            }, a, function (a) {
                s.close(), s.promptOK = !0, o(function () {
                    s.promptOK = !1
                }, 1e3), s.wordOK = "退款成功", s.getRecord()
            }, function (a) {})
        }, s.pageChanged = function () {
            s.getRecord()
        }, s.getRecord = function () {
            o(function () {
                s.startDateFlag = !1, s.closeDateFlag = !1;
                var a = {
                    page: s.pagination.page,
                    itemsPerPage: s.pagination.itemsPerPage,
                    statuses: ["buyShopProduct", "refundShopProduct"],
                    startDate: s.startDate.getTime(),
                    endDate: s.closeDate.getTime()
                };
                s.searchProductName && (a = _.merge(a, {
                    shopProductName: s.searchProductName
                })), k.index(a, function (a) {
                    s.records = a.data.records, s.recordTotal = 0, _.each(s.records, function (a) {
                        "refundShopProduct" == a.status ? s.recordTotal = s.recordTotal - a.cost : "buyShopProduct" == a.status && (s.recordTotal = s.recordTotal + a.cost)
                    }), s.recordTotal = s.recordTotal.toFixed(2);
                    var b = a.data.count;
                    s.pagination.totalItems = b, s.pagination.numPages = b / s.itemsPerPage
                })
            }, 100)
        }, s.addListByDown = function (a) {
            if (13 == a.keyCode) {
                var b = {
                    mix: s.pName
                };
                j.index(b, function (a) {
                    s.products = a.data.shopProducts, s.products && 1 == s.products.length && s.products[0].isUsed && s.add(s.products[0])
                }, function (a) {})
            }
        }, s.addList = function () {
            s.pName ? s.selectFlag = !0 : s.selectFlag = !1;
            var a = {
                mix: s.pName
            };
            j.index(a, function (a) {
                s.products = a.data.shopProducts, s.products && 1 == s.products.length && s.products[0].isUsed && s.add(s.products[0])
            }, function (a) {})
        }, s.getPrByCode = function () {}, s.changeNum = function (a, b) {
            if (a.num = 1 * a.num, "add" == b) a.num = a.num + 1, s.total = s.total + 1 * a.price, a.tot = Math.floor(a.num * a.price * 100) / 100;
            else if (s.total = s.total - 1 * a.price, s.arr = [], 1 == a.num) {
                for (var c = 0; c < s.buyProduct.length; c++) a._id != s.buyProduct[c]._id && s.arr.push(s.buyProduct[c]);
                s.buyProduct = s.arr
            } else a.num = a.num - 1, a.tot = Math.floor(a.num * a.price * 100) / 100;
            s.total = s.dealNumber(s.total)
        }, s.dealNumber = function (a, b) {
            var c = a.toFixed(3);
            return b ? c.substring(0, c.lastIndexOf(".") + 3) : parseFloat(c.substring(0, c.lastIndexOf(".") + 3))
        }, s.calPrice = function (a) {
            s.total = 0;
            for (var b = 0; b < s.buyProduct.length; b++) s.buyProduct[b]._id == a._id ? s.buyProduct[b].num && (s.total = s.total + s.buyProduct[b].num * s.buyProduct[b].price, s.buyProduct[b].tot = Math.floor(s.buyProduct[b].num * s.buyProduct[b].price * 100) / 100) : s.total = s.total + s.buyProduct[b].num * s.buyProduct[b].price;
            s.total = s.dealNumber(s.total)
        }, s.canPrice = function (a) {
            if (s.total = 0, s.arr = [], !a.num || 0 == a.num) {
                for (var b = 0; b < s.buyProduct.length; b++) a._id != s.buyProduct[b]._id && s.arr.push(s.buyProduct[b]);
                s.buyProduct = s.arr
            }
            for (var b = 0; b < s.buyProduct.length; b++) s.total = s.total + s.buyProduct[b].num * s.buyProduct[b].price;
            s.total = s.dealNumber(s.total)
        }, s.add = function (a) {
            s.selectFlag = !1, s.pName = "";
            for (var b = 0; b < s.buyProduct.length; b++)
                if (s.buyProduct[b]._id == a._id) return void s.changeNum(s.buyProduct[b], "add");
            s.total = s.total + 1 * a.price, a.num = 1, a.tot = Math.floor(a.num * a.price * 100) / 100, s.buyProduct.push(a), s.total = s.dealNumber(s.total)
        }, s.choosePayment = function (a) {
            _.each(s.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", s.buyPayment = a.value, "alipay" == s.buyPayment || "wx" == s.buyPayment ? s.showCodeBox = !0 : s.showCodeBox = !1
        }, s.choosePayment2 = function (a) {
            _.each(s.paymentArr2, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", s.buyPayment = a.value, "alipay" == s.buyPayment || "wx" == s.buyPayment ? s.showCodeBox = !0 : s.showCodeBox = !1
        }, s.chooseRefund = function (a) {
            _.each(s.refundArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", s.refund = a.value
        }, s.changeTitle = function (a) {
            switch (s.titleState = "", a) {
            case "sale":
                s.titleState = "sale", f.go("fm-sell.sale", {
                    state: "sale"
                });
                break;
            default:
                s.titleState = "record", f.go("fm-sell.record", {
                    state: "record"
                })
            }
            w()
        };
        var t = function (a) {
                var b = a.split("|");
                if (3 != b.length) return !1;
                var a = b[0],
                    c = b[1].split(""),
                    d = b[2],
                    e = d,
                    f = parseInt(r / 6e4).toString().split("");
                if (c.length < f.length) return !1;
                for (var g = 0; g < f.length; g++) d = d.replace(f[g], c[g]);
                return d == a ? e : !1
            },
            u = function () {
                e.get({}, function (a) {
                    s.admin = a.data.user.name
                }, function () {})
            };
        s.choose = function (a) {
            a.select = !0, s.choosedCardFlag = !1, s.cardId = a._id, s.cardName = a.name + "(" + a.price + "元)", s.realPrice = a.realPrice
        }, s.chooseType = function (a) {
            for (var b = 0; b < s.types.length; b++) s.types[b].select = !1;
            a.select = !0, s.choosedTypeFlag = !1, s.typeName = a.name
        };
        var v = function () {
            var a = {
                state: "all",
                _org: s._id,
                sortBy: "realPrice"
            };
            m.index(a, function (a) {
                a.data.cards.length > 0 && (a.data.cards[0].select = !0, s.cardName = a.data.cards[0].name + "(" + a.data.cards[0].price + "元)", s.cardId = a.data.cards[0]._id, a.data.cards[0].flag = !0, s.realPrice = a.data.cards[0].realPrice), s.cards = a.data.cards
            })
        };
        s.finish = function () {
            return s.needFlag && !s.cardNum ? void(s.cardFlag = !0) : (s.payFlag = !0, s.defindFlag = !1, void(s.moneyFlag = !0))
        };
        s.waySelect = function (a) {
            s.chargeVenue = "", "money" == a ? (s.moneySelect = !0, s.cardSelect = !1, s.speSelect = !1) : "card" == a ? (s.moneySelect = !1, s.cardSelect = !0, s.speSelect = !1) : "speCard" == a && (s.moneySelect = !1, s.cardSelect = !1, s.speSelect = !0, p.index({
                isUsed: !0
            }, function (a) {
                s.venues_clone = a.data.venues, _.each(s.venues_clone, function (a) {
                    a.image = "singleChoose_imageNo2"
                }), s.chargeVenue = s.venues_clone[0], s.venues_clone[0].image = "singleChoose_imageYes2"
            }, function () {}))
        }, s.openShowRechargeBox = function (a) {
            s.needIdCard = a, s.continueFlag = !0, s.paymentArr2 = [{
                name: "支付宝",
                value: "alipay",
                image: "singleChoose_imageYes"
            }, {
                name: "微信",
                value: "wx",
                image: "singleChoose_imageNo"
            }, {
                name: "现金",
                value: "cash",
                image: "singleChoose_imageNo"
            }, {
                name: "支票",
                value: "check",
                image: "singleChoose_imageNo"
            }], s.buyPayment = "alipay", s.cardName = s.cards[0].name + "(" + s.cards[0].price + "元)", s.cardId = s.cards[0]._id, s.moneySelect = !0, s.cardSelect = !1, s.speSelect = !1, s.chargeCardNum = "", s.chargeCardPassword = ""
        }, s.chooseChargeVenue = function (a) {
            s.chargeVenue ? s.chargeVenue._id == a._id ? (s.chargeVenue.image = "singleChoose_imageNo2", s.chargeVenue = "") : (s.chargeVenue.image = "singleChoose_imageNo2", s.chargeVenue = a, s.chargeVenue.image = "singleChoose_imageYes2") : (s.chargeVenue = a, s.chargeVenue.image = "singleChoose_imageYes2")
        };
        var w = function () {
            s.getRecord(), u(), v()
        };
        s.searchProduct = function () {
            s.getRecord()
        }, s.enterCheck = function (a) {
            13 == a.keyCode && s.checkMember()
        }, w()
    }
    angular.module("fieldApp").controller("FmSellCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "ShopProduct", "Record", "Alipay", "Card", "Time", "$timeout", "Venue", "Tucard"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this;
        j.identity = "场馆管理员", j.state = !0, j.selectRole = "所有角色类型", j.selectRoleFlag = !1, j.role = "", j.arr = [], j.marginTop = {
            "margin-top": "38px"
        }, j.close = function () {
            j.addFlag = !1, j.chooseIdentityFlag = !1, j.state = !0, j.accountFlag = !1, j.passwordFlag = !1, j.nameFlag = !1, j.sureFlag = !1, j.telFlag = !1, j.account = "", j.password = "", j.name = "", j.editFlag = !1, j.tel = "", l(), j.arr = [], j.cvFlag = !1, j.staffToVenue = !1
        }, j.page = 1, j.itemsPerPage = 10, j.pagination = {
            page: j.page,
            itemsPerPage: j.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, j.showEdit = function (a) {
            j.editFlag = !0, j.account = a.account, j.password = a.showPassword, j.name = a.name, j.tel = a.tel, j.uId = a._id, j.arr = [], j._staffToVenueId = a._venue ? a._venue : j.venues[0]._id;
            var b = _.findWhere(j.venues, {
                _id: j._staffToVenueId
            });
            j.venueName = b.name, "前台柜员" == a.role ? (j.state = "checkStand", j.cvFlag = !0, j.staffToVenue = !0) : "场工" == a.role ? (j.state = "fieldWorker", j.cvFlag = !0, j.staffToVenue = !0) : "场馆管理员" == a.role ? (j.state = "fieldManger", j.cvFlag = !0, j.staffToVenue = !0) : "卡务管理员" == a.role ? (j.state = "cardManager", j.cvFlag = !0, j.staffToVenue = !1) : "财务管理员" == a.role && (j.state = "financeManager", j.cvFlag = !0, j.staffToVenue = !1), console.log(j.staffToVenue);
            for (var c = 0; c < a.venues.length; c++)
                for (var d = 0; d < j.venues.length; d++) a.venues[c]._id == j.venues[d]._id && (j.venues[d].select = !0, j.arr.push(j.venues[d]))
        }, j.edit = function () {
            j.cArr = [];
            for (var a = 0; a < j.arr.length; a++) j.cArr.push(j.arr[a]._id);
            var b = {
                account: j.account,
                name: j.name,
                venues: j.cArr,
                tel: j.tel,
                _venue: j._staffToVenueId
            };
            e.update({
                id: j.uId
            }, b, function (a) {
                var b = {
                    newPassword: j.password
                };
                e.updatePassword({
                    id: j.uId
                }, b, function (a) {
                    j.close(), k()
                }, function () {})
            }, function (a) {
                j.promptERR = !0, j.wordERR = a.data.data
            })
        }, j["delete"] = function (a) {
            e["delete"]({
                id: j.uId
            }, function (a) {
                j.close(), k()
            }, function () {})
        }, j.showSelect = function (a) {
            switch (a) {
            case "identity":
                j.chooseIdentityFlag = !j.chooseIdentityFlag;
                break;
            case "role":
                j.selectRoleFlag = !j.selectRoleFlag
            }
        }, j.chooseRole = function (a, b) {
            j.selectRoleFlag = !1, j.selectRole = b, j.role = a, k()
        }, j.chooseIdentity = function (a) {
            switch (j.chooseIdentityFlag = !1, j.state = a, a) {
            case "fieldManager":
                j.identity = "场馆管理员", j.cvFlag = !0, j.staffToVenue = !0;
                break;
            case "checkStand":
                j.identity = "前台柜员", j.cvFlag = !0, j.staffToVenue = !0;
                break;
            case "fieldWorker":
                j.identity = "场工", j.cvFlag = !0, j.staffToVenue = !0;
                break;
            case "cardManager":
                j.identity = "卡务管理员", j.cvFlag = !0, j.staffToVenue = !1;
                break;
            case "financeManager":
                j.identity = "财务管理员", j.cvFlag = !0, j.staffToVenue = !1
            }
        }, j.judge = function (a) {
            switch (a) {
            case "account":
                j.account ? j.accountFlag = !1 : j.accountFlag = !0;
                break;
            case "password":
                j.password ? j.passwordFlag = !1 : j.passwordFlag = !0;
                break;
            case "name":
                j.name ? j.nameFlag = !1 : j.nameFlag = !0
            }
        }, j.finish = function () {
            if (j.account ? j.accountFlag = !1 : j.accountFlag = !0, j.password ? j.passwordFlag = !1 : j.passwordFlag = !0, j.name ? j.nameFlag = !1 : j.nameFlag = !0, j.tel ? j.telFlag = !1 : j.telFlag = !0, !(j.accountFlag || j.passwordFlag || j.nameFlag || j.telFlag)) {
                j.cArr = [];
                for (var a = 0; a < j.arr.length; a++) j.cArr.push(j.arr[a]._id);
                var b = {
                    account: j.account,
                    password: j.password,
                    name: j.name,
                    venues: j.cArr,
                    tel: j.tel,
                    _venue: j._staffToVenueId || null
                };
                "fieldManager" == j.state ? e.createField(b, function (a) {
                    j.close(), k()
                }, function (a) {
                    j.promptERR = !0, j.wordERR = a.data.data
                }) : "fieldWorker" == j.state ? e.createWorker(b, function (a) {
                    j.close(), k()
                }, function (a) {
                    j.promptERR = !0, j.wordERR = a.data.data
                }) : "checkStand" == j.state ? e.createCheck(b, function (a) {
                    j.close(), k()
                }, function (a) {
                    j.promptERR = !0, j.wordERR = a.data.data
                }) : "cardManager" == j.state ? e.createCard(b, function (a) {
                    j.close(), k()
                }, function (a) {
                    j.promptERR = !0, j.wordERR = a.data.data
                }) : "financeManager" == j.state && e.createFinance(b, function (a) {
                    j.close(), k()
                }, function (a) {
                    j.promptERR = !0, j.wordERR = a.data.data
                })
            }
        }, j.pageChanged = function () {
            k()
        };
        var k = function () {
                var a = {
                    role: j.role,
                    page: j.pagination.page,
                    itemsPerPage: j.pagination.itemsPerPage
                };
                e.index(a, function (a) {
                    j.users = a.data.users, _.each(j.users, function (a) {
                        switch (a.role) {
                        case "organization":
                            a.role = "超级管理员";
                            break;
                        case "fieldManager":
                            a.role = "场馆管理员";
                            break;
                        case "checkStand":
                            a.role = "前台柜员";
                            break;
                        case "fieldWorker":
                            a.role = "场工";
                            break;
                        case "cardManager":
                            a.role = "卡务管理员";
                            break;
                        case "financeManager":
                            a.role = "财务管理员"
                        }
                    });
                    var b = a.data.count;
                    j.pagination.totalItems = b, j.pagination.numPages = b / j.itemsPerPage
                }, function () {})
            },
            l = function () {
                i.index({}, function (a) {
                    j.venues = a.data.venues;
                    for (var b = 0; b < j.venues.length; b++) j.venues[b].select = !1;
                    j.venueName = j.venues[0].name, j._staffToVenueId = j.venues[0]._id
                }, function (a) {})
            };
        j.chooseVenueName = function (a) {
            j.showChooseVenueBox = !1, j.venueName = a.name, j._staffToVenueId = a._id
        }, j.chooseVenue = function (a) {
            a.select = !a.select, j.arr = [];
            for (var b = 0; b < j.venues.length; b++) j.venues[b].select && j.arr.push(j.venues[b])
        };
        var m = function () {
            k(), l()
        };
        m()
    }
    angular.module("fieldApp").controller("FmStaffCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this,
            k = function () {
                j.page = 1, j.itemsPerPage = 10, j.pagination = {
                    page: j.page,
                    itemsPerPage: j.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            l = function () {
                j.startDate = new Date((new Date).setDate(1)), j.closeDate = new Date
            },
            m = function () {
                var a = {
                    page: j.pagination.page,
                    itemsPerPage: j.pagination.itemsPerPage,
                    startDate: j.startDate.getTime(),
                    endDate: j.closeDate.getTime(),
                    status: "purchase"
                };
                j.searchProductName && (a = _.merge(a, {
                    mix: j.searchProductName
                })), j.orderNo && (a = _.merge(a, {
                    orderNo: j.orderNo
                })), i.index(a, function (a) {
                    j.orders = a.data.records, _.each(j.orders, function (a) {
                        a.cost = dealNumber(100 * a.purchasePrice) * a.quantity / 100, a.isCancel ? (a.state = "已撤销", a.canChange = !1) : a.isCheck ? (a.state = "已确认", a.canChange = !1) : (a.state = "等待确认", a.canChange = !0)
                    });
                    var b = a.data.count;
                    j.pagination.totalItems = b, j.pagination.numPages = b / j.itemsPerPage
                })
            },
            n = function () {
                k(), l(), m()
            };
        j.closeDateBox = function () {
            j.startDateFlag = !1, j.closeDateFlag = !1, setTimeout(function () {
                m()
            }, 100)
        }, j.check = function () {
            k(), m()
        }, j.resert = function () {
            j.orderNo = "", j.searchProductName = "", m()
        }, j.pageChanged = function () {
            m()
        }, j.enterCheck = function (a) {
            13 == a.keyCode && j.checkMember()
        }, j.closePrompt = function () {
            j.promptERR = !1, j.promptOK = !1, j.promptWARN = !1
        }, n()
    }
    angular.module("fieldApp").controller("FmPurchaseRecordCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "PurchaseRecord"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this,
            l = function () {
                k.chooseAll = "manyChoose_imageYes2", k.product = {
                    _shopBasic: "",
                    showName: "",
                    name: "",
                    misCode: "",
                    quantity: "",
                    purchasePrice: "",
                    price: 0,
                    _supply: "",
                    supplyName: ""
                }, k.products = [], k.showProducts = [], k.commiteCount = 0, k.workerName = "请选择柜员"
            },
            m = function () {
                k.showWorkersBox = !1
            },
            n = function () {
                l(), o()
            },
            o = function () {
                e.index({
                    role: "checkStand"
                }, function (a) {
                    k.workers = a.data.users
                }, function () {})
            };
        k.checkProduct = function () {
            i.index({
                mix: k.product.showName
            }, function (a) {
                k.products = a.data.shopBasics, k.products.length > 0 && (k.showProductsBox = !0)
            }, function () {})
        }, k.chooseProduct = function (a) {
            k.showProductsBox = !1, k.product._shopBasic = a._id, k.product.showName = a.name, k.product.name = a.name, k.product.misCode = a.misCode, k.product._supply = a._supply, k.product.supplyName = a.supplyName, k.product.price = a.price
        }, k.resert = function () {
            k.product = {
                _shopBasic: "",
                showName: "",
                name: "",
                misCode: "",
                quantity: "",
                purchasePrice: "",
                price: 0,
                _supply: "",
                supplyName: ""
            }
        }, k.closePrompt = function () {
            k.promptERR = !1, k.promptOK = !1, k.promptWARN = !1
        }, k.addToForm = function () {
            if (isNaN(k.product.quantity) || isNaN(k.product.purchasePrice)) return k.promptERR = !0, void(k.wordERR = "请输入数字");
            var a = {
                _shopBasic: k.product._shopBasic,
                name: k.product.name,
                misCode: k.product.misCode,
                quantity: parseFloat(k.product.quantity),
                purchasePrice: parseFloat(k.product.purchasePrice),
                price: parseFloat(k.product.price),
                _supply: k.product._supply,
                supplyName: k.product.supplyName,
                cost: k.product.purchasePrice * k.product.quantity,
                image: "manyChoose_imageYes2"
            };
            k.showProducts.push(a), k.commiteCount++, k.resert()
        }, k.chooseAllDoc = function () {
            k.commiteCount < k.showProducts.length ? (k.commiteCount = k.showProducts.length, k.chooseAll = "manyChoose_imageYes2", _.each(k.showProducts, function (a) {
                a.image = "manyChoose_imageYes2"
            })) : (k.commiteCount = 0, k.chooseAll = "manyChoose_imageNo2", _.each(k.showProducts, function (a) {
                a.image = "manyChoose_imageNo2"
            }))
        }, k.chooseDoc = function (a) {
            "manyChoose_imageNo2" == a.image ? (a.image = "manyChoose_imageYes2", k.commiteCount++) : (a.image = "manyChoose_imageNo2", k.commiteCount--), k.commiteCount < k.showProducts.length ? k.chooseAll = "manyChoose_imageNo2" : k.chooseAll = "manyChoose_imageYes2"
        }, k.chooseWorker = function (a) {
            k.workerName = a.name, k._toWorker = a._id, k.chooseWorkerFlag = !1
        }, k.create = function () {
            var b = [];
            _.each(k.showProducts, function (a) {
                "manyChoose_imageYes2" == a.image && b.push(a)
            }), j.enter({}, {
                shopArr: b
            }, function () {
                j.transfer({}, {
                    _toWorker: k._toWorker
                }, function () {
                    m(), l(), k.promptOK = !0, k.wordOK = "进货成功", setTimeout(function () {
                        a.$apply(function () {
                            k.promptOK = !1
                        })
                    }, 1e3)
                }, function () {})
            }, function (a) {
                console.log(a), k.promptERR = !0, k.wordERR = a.data.data
            })
        }, k.close = function () {
            m(), l()
        }, k.enterCheck = function (a) {
            13 == a.keyCode && k.checkProduct()
        }, k.closePrompt = function () {
            k.promptERR = !1, k.promptOK = !1, k.promptWARN = !1
        }, n()
    }
    angular.module("fieldApp").controller("FmPurchaseCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "ShopBasic", "ShopProduct"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this,
            k = function () {
                j.page = 1, j.itemsPerPage = 10, j.pagination = {
                    page: j.page,
                    itemsPerPage: j.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            l = function () {
                j.startDate = new Date((new Date).setDate(1)), j.closeDate = new Date
            },
            m = function () {
                var a = {
                    page: j.pagination.page,
                    itemsPerPage: j.pagination.itemsPerPage,
                    startDate: j.startDate.getTime(),
                    endDate: j.closeDate.getTime(),
                    status: "return"
                };
                j.searchProductName && (a = _.merge(a, {
                    mix: j.searchProductName
                })), j.orderNo && (a = _.merge(a, {
                    orderNo: j.orderNo
                })), i.index(a, function (a) {
                    j.orders = a.data.records, _.each(j.orders, function (a) {
                        a.cost = dealNumber(100 * a.purchasePrice) * a.quantity / 100, a.isCancel ? (a.state = "已撤销", a.canChange = !1) : a.isCheck ? (a.state = "已确认", a.canChange = !1) : (a.state = "等待确认", a.canChange = !0)
                    });
                    var b = a.data.count;
                    j.pagination.totalItems = b, j.pagination.numPages = b / j.itemsPerPage
                })
            },
            n = function () {
                k(), l(), m()
            };
        j.closeDateBox = function () {
            j.startDateFlag = !1, j.closeDateFlag = !1, setTimeout(function () {
                m()
            }, 100)
        }, j.check = function () {
            k(), m()
        }, j.resert = function () {
            j.orderNo = "", j.searchProductName = "", m()
        }, j.pageChanged = function () {
            m()
        }, j.enterCheck = function (a) {
            13 == a.keyCode && j.checkMember()
        }, j.closePrompt = function () {
            j.promptERR = !1, j.promptOK = !1, j.promptWARN = !1
        }, n()
    }
    angular.module("fieldApp").controller("FmReturnRecordCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "PurchaseRecord"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this,
            k = function () {
                j.page = 1, j.itemsPerPage = 10, j.pagination = {
                    page: j.page,
                    itemsPerPage: j.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            l = function () {
                j.startDate = new Date((new Date).setDate(1)), j.closeDate = new Date(Date.now() - 864e5)
            },
            m = function () {
                var a = {
                    page: j.pagination.page,
                    itemsPerPage: j.pagination.itemsPerPage,
                    startDate: j.startDate.getTime(),
                    endDate: j.closeDate.getTime()
                };
                i.index(a, function (a) {
                    j.forms = a.data.shopforms;
                    var b = a.data.count;
                    j.pagination.totalItems = b, j.pagination.numPages = b / j.itemsPerPage
                })
            },
            n = function () {
                k(), l(), m()
            };
        j.closeDateBox = function () {
            j.startDateFlag = !1, j.closeDateFlag = !1, setTimeout(function () {
                m()
            }, 100)
        }, j.pageChanged = function () {
            m()
        }, j["export"] = function () {
            var a = {
                all: "all",
                startDate: j.startDate.getTime(),
                endDate: j.closeDate.getTime()
            };
            j.dateName = "", j.dateName += j.startDate.getFullYear() + "年", j.dateName += j.startDate.getMonth() + 1 > 9 ? j.startDate.getMonth() + 1 + "月" : "0" + (j.startDate.getMonth() + 1) + "月", j.dateName += j.startDate.getDate() > 9 ? j.startDate.getDate() + "日-" : "0" + j.startDate.getDate() + "日-", j.dateName += j.closeDate.getFullYear() + "年", j.dateName += j.closeDate.getMonth() + 1 > 9 ? j.closeDate.getMonth() + 1 + "月" : "0" + (j.closeDate.getMonth() + 1) + "月", j.dateName += j.closeDate.getDate() > 9 ? j.closeDate.getDate() + "日" : "0" + j.closeDate.getDate() + "日", i.index(a, function (a) {
                j.exportforms = a.data.shopforms;
                var b = j.dateName + "的库存盘存表";
                setTimeout(function () {
                    execl1("alltable", b)
                }, 100)
            })
        }, j.closePrompt = function () {
            j.promptERR = !1, j.promptOK = !1, j.promptWARN = !1
        }, n()
    }
    angular.module("fieldApp").controller("FmShopFormCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "ShopForm"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this,
            k = function () {
                j.page = 1, j.itemsPerPage = 10, j.pagination = {
                    page: j.page,
                    itemsPerPage: j.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            l = function () {
                j.showWorkerName = "选择柜员", j.searchWorker = "", j.returnQuantity = ""
            },
            m = function () {
                j.showReturnBox = !1
            },
            n = function () {
                var a = {
                    page: j.pagination.page,
                    itemsPerPage: j.pagination.itemsPerPage
                };
                if (j.searchWorker) switch (j.searchWorker) {
                case "all":
                    break;
                case "no":
                    a = _.merge(a, {
                        state: "no"
                    });
                    break;
                default:
                    a = _.merge(a, {
                        _worker: j.searchWorker
                    })
                }
                j.searchProductName && (a = _.merge(a, {
                    mix: j.searchProductName
                })), i.index(a, function (a) {
                    j.products = a.data.shopProducts, _.each(j.products, function (a) {
                        switch (a.status) {
                        case "sale":
                            a.status = "售卖中";
                            break;
                        case "return":
                            a.status = "报废中";
                            break;
                        case "transfer":
                            a.status = "交接中"
                        }
                    });
                    var b = a.data.count;
                    j.pagination.totalItems = b, j.pagination.numPages = b / j.itemsPerPage
                })
            },
            o = function () {
                e.index({
                    role: "checkStand"
                }, function (a) {
                    j.workers = [{
                        name: "全部",
                        _id: "all"
                    }, {
                        name: "暂无柜员",
                        _id: "no"
                    }].concat(a.data.users)
                }, function () {})
            },
            p = function () {
                k(), l(), n(), o()
            };
        j.chooseWorkerName = function (a) {
            j.showChooseWorkerBox = !1, j.showWorkerName = a.name, j.searchWorker = a._id, n()
        }, j.openShowReturnBox = function (a) {
            j._returnProduct = a, j.showReturnBox = !0
        }, j.check = function () {
            if (isNaN(j.returnQuantity)) return j.promptERR = !0, void(j.wordERR = "请输入数字");
            var b = [{
                _shopProduct: j._returnProduct,
                returnQuantity: parseFloat(j.returnQuantity)
            }];
            i.returnGood({}, {
                shopArr: b
            }, function (b) {
                i.returnCheck({}, {
                    orderIds: [b.data.order._id]
                }, function () {
                    l(), m(), j.promptOK = !0, j.wordOK = "报废确认成功", n(), setTimeout(function () {
                        a.$apply(function () {
                            j.promptOK = !1
                        })
                    }, 1e3)
                }, function () {})
            }, function (a) {
                console.log(a), j.promptERR = !0, j.wordERR = a.data.data
            })
        }, j.pageChanged = function () {
            n()
        }, j.searchProduct = function () {
            n()
        }, j.enterCheck = function (a) {
            13 == a.keyCode && n()
        }, j["export"] = function () {
            var a = {
                all: "all"
            };
            if (j.searchWorker) switch (j.searchWorker) {
            case "all":
                break;
            case "no":
                a = _.merge(a, {
                    state: "no"
                });
                break;
            default:
                a = _.merge(a, {
                    _worker: j.searchWorker
                })
            }
            j.searchProductName && (a = _.merge(a, {
                mix: j.searchProductName
            })), i.index(a, function (a) {
                j.exportProducts = a.data.shopProducts;
                var b = "柜员库存表";
                setTimeout(function () {
                    execl1("alltable", b)
                }, 100)
            })
        }, j.close = function () {
            m(), l()
        }, j.closePrompt = function () {
            j.promptERR = !1, j.promptOK = !1, j.promptWARN = !1
        }, p()
    }
    angular.module("fieldApp").controller("FmStockCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "ShopProduct"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        var p = this,
            q = function (a) {
                return a = new Date(1e3 * parseInt(a / 1e3)), a.setHours(0), a.setMinutes(0), a.setSeconds(0), a
            },
            r = function (a) {
                return a = new Date(1e3 * parseInt(a / 1e3)), a.setHours(23), a.setMinutes(59), a.setSeconds(59), a
            },
            s = function () {
                e.get({}, function (a) {
                    p.admin = a.data.user.name, p.user = a.data.user
                }, function () {})
            },
            t = function (a) {
                var b;
                switch (a) {
                case 0:
                    b = "周日";
                    break;
                case 1:
                    b = "周一";
                    break;
                case 2:
                    b = "周二";
                    break;
                case 3:
                    b = "周三";
                    break;
                case 4:
                    b = "周四";
                    break;
                case 5:
                    b = "周五";
                    break;
                case 6:
                    b = "周六"
                }
                return b
            },
            u = function () {
                p.showChooseVenueBox = !1, p.showChooseItemBox = !1, p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1, p.showBasicInfoBox = !1, p.showchooseOnceTypeBox = !1, p.showInfoBox = !1, p.showPaymentBox = !1, p.showMemberInfo = !1, p.showOrderBox = !1, p.showCodeBox = !1, p.showChangeFieldBox = !1
            },
            v = function (a) {
                p.showVenueName = p.venues[0].name, p.searchVenueId = p.venues[0]._id, p.chooseVenue = p.venues[0], p.venues[0].bgColor = "background:#20a0ff;color:#fff;", p.items = p.venues[0].items, p.showItemName = p.items[0].name, p.searchItemId = p.items[0]._id, p.chooseItem = p.items[0], p.items[0].bgColor = "background:#20a0ff;color:#fff;", p.showHours = [], p.memberTel = "", p.nowDate = new Date, p.nowDay = t(p.nowDate.getDay()), p.showFieldName = "", p.changeFieldId = "", p.order = {
                    _member: "",
                    orderDate: null,
                    spbill_create_ip: "",
                    auth_code: "",
                    payment: "alipay",
                    orderArr: {
                        total: 0,
                        fields: []
                    }
                }, p.flexibleOrderPrice = "", p.startTime = "", p.lastTime = "", p.paymentArr = [{
                    name: "支付宝",
                    value: "alipay",
                    image: "singleChoose_imageYes"
                }, {
                    name: "微信",
                    value: "wx",
                    image: "singleChoose_imageNo"
                }, {
                    name: "现金",
                    value: "cash",
                    image: "singleChoose_imageNo"
                }, {
                    name: "余额",
                    value: "member",
                    image: "singleChoose_imageNo"
                }], p.startDate = p.startDate ? p.startDate : new Date, y()
            },
            w = function () {
                x(), s()
            },
            x = function () {
                l.index({
                    isUsed: !0
                }, function (a) {
                    p.venues = a.data.venues, _.each(p.venues, function (a) {
                        a.bgColor = "", _.each(a.items, function (a) {
                            a.bgColor = ""
                        })
                    }), v()
                }, function () {})
            },
            y = function () {
                i.index({
                    _venue: p.searchVenueId,
                    _item: p.searchItemId,
                    isUsed: !0,
                    sortBy: "startDate"
                }, function (a) {
                    p.times = a.data.times;
                    var b = [],
                        c = Date.now();
                    if (_.each(p.times, function (a) {
                        a.isUsed ? b.push(a) : (a.close_startDate > c || a.close_endDate < c) && b.push(a)
                    }), p.times = b, p.times.length > 0) {
                        var d = p.times[0].startDateHours || 0,
                            e = p.times[p.times.length - 1].endDateHours || 0;
                        e = e < p.times[p.times.length - 1].endDate ? e + 1 : e;
                        var f = e - d;
                        p.showHours = [];
                        for (var g = d; e >= g; g++) p.showHours.push({
                            num: 10 > g ? "0" + g : g,
                            fontColor: ""
                        });
                        var h = 72 * f;
                        p.tableWidthB = "width:" + (72 * f + 80 + 20) + "px;", p.tableWidthS = "width:" + 72 * f + "px;";
                        for (var g = 0; g < p.times.length; g++) 0 == g ? p.times[g].marginleft = "margin-left:" + ((p.times[g].startDate - d) / f * h - 1) + "px;" : p.times[g].marginleft = "margin-left:" + ((p.times[g].startDate - p.times[g - 1].endDate) / f * h - 1) + "px;", p.times[g].width = "width:" + (p.times[g].continueHours / f * h + 1) + "px;";
                        z()
                    }
                }, function () {})
            },
            z = function () {
                var a = {
                    _venue: p.searchVenueId,
                    _item: p.searchItemId,
                    sortValue: "asc"
                };
                j.index(a, function (a) {
                    p.fields = a.data.fields, A()
                }, function () {})
            },
            A = function () {
                var a = (new Date).getTime(),
                    b = q(a),
                    c = (r(a), _.clone(p.startDate), p.startDate.getHours()),
                    d = q(p.startDate),
                    e = (r(p.startDate), 0 == (new Date).getDay() ? 6 : (new Date).getDay() - 1, 0);
                _.each(p.fields, function (a) {
                    a.index = e, e++, a.isChoose = !1, a.times = _.cloneDeep(p.times), _.each(a.times, function (e) {
                        a.isUsed || !a.isUsed && new Date(a.closeDate).getTime() > Date.now() ? (e.state = "canbook", e.bgColor = "background:#fff;") : (e.state = "stop", e.bgColor = "background:#8492a6;"), (b.getTime() == d.getTime() && e.startDateHours < c || b.getTime() > p.startDate.getTime()) && (e.state = "cantbook", e.bgColor = "background:#8492a6;"), e.isChoose = !1, e.tel = "", e.name = ""
                    })
                }), B()
            },
            B = function () {
                var a = {
                    _venue: p.searchVenueId,
                    _item: p.searchItemId,
                    orderDateNum: p.startDate.getTime(),
                    state: "all"
                };
                (new Date).getTime();
                k.index(a, function (a) {
                    if (p.orders = a.data.orderLists, _.each(p.orders, function (a) {
                        var b = _.findWhere(p.fields, {
                            _id: a._field
                        });
                        b && _.each(b.times, function (b) {
                            if (a.startHours < b.startDate && a.endHours > b.startDate || a.startHours >= b.startDate && a.startHours < b.endDate) {
                                if ("stop" != b.state && "cantbook" != b.state) {
                                    b.orderId = a._id, b.tel = a.tel || "", b.name = a.name || "";
                                    var c = a.description.substr(0, 6);
                                    "(长包预订)" == c ? (b.bgColor = "background:#F69667;", b.state = "hasbook", b.orderType = "long") : "(培训预订)" == c ? (b.bgColor = "background:#67BDDE;", b.state = "hasbook", b.orderType = "train") : (b.bgColor = "background:#5ED878;", b.state = "hasbook", b.orderType = "once"), C(a) && (b.bgColor = "background:#ff4949;", b.state = "isUsed"), b.code = a.code, b.remark = a.remark
                                } else b.orderId = a._id, b.tel = a.tel || "", b.name = a.name || "", b.bgColor = "background:#9DA4B3;", b.state = "haspass", C(a) && (b.bgColor = "background:#ff4949;", b.state = "isUsed"), b.code = a.code, b.remark = a.remark;
                                delete b.isChoose
                            }
                        })
                    }), p.openOrder) {
                        var b = _.findWhere(p.fields, {
                            _id: p.order._field
                        });
                        b && _.each(b.times, function (a) {
                            (p.order.startHours < a.startDate && p.order.endHours > a.startDate || p.order.startHours >= a.startDate && p.order.startHours < a.endDate) && (a.orderId = p.order._id, a.tel = p.order.tel || "", a.name = p.order.name || "", a.bgColor = "background:#20a0ff;", a.state = "choose", a.fontColor = "color:#fff;")
                        })
                    }
                }, function () {})
            },
            C = function (a) {
                var b = (new Date).getTime(),
                    c = new Date(a.startDate).getTime() - 12e5,
                    d = new Date(a.endDate).getTime();
                return a.isUsed && b >= c && d >= b ? !0 : !1
            };
        p.checkOrder = function () {
            return p.orderCode ? void k.index({
                code: p.orderCode,
                orderDateNum: (new Date).getTime()
            }, function (a) {
                if (p.order = a.data.orderLists[0], !p.order) return p.promptERR = !0,
                    void(p.wordERR = "没有订单信息");
                if (p.order ? p.showOrderInfo = !0 : p.showOrderInfo = !1, p.user.venues.indexOf(p.order._venue) < 0) return p.promptERR = !0, void(p.wordERR = "该订单不属于你负责的场馆");
                if (new Date(p.order.endDate).getTime() < (new Date).getTime()) return p.promptERR = !0, void(p.wordERR = "该订单已过期");
                if (new Date(p.order.startDate).getTime() - 12e5 > (new Date).getTime()) return p.promptERR = !0, void(p.wordERR = "开场前20分钟才可进入");
                if (C(p.order)) return p.promptERR = !0, void(p.wordERR = "场地已经开启");
                p.openOrder = p.order, p.showOpenOrder = !0, p.searchVenueId = p.order._venue, p.chooseVenue.bgColor = "";
                var b = _.findWhere(p.venues, {
                    _id: p.searchVenueId
                });
                b && (b.bgColor = "background:#20a0ff;color:#fff;", p.showVenueName = b.name, p.searchVenueId = b._id, p.chooseVenue = b, p.items = b.items), p.searchItemId = p.order.items[0], p.chooseItem.bgColor = "";
                var c = _.findWhere(p.items, {
                    _id: p.searchItemId
                });
                c && (c.bgColor = "background:#20a0ff;color:#fff;", p.showItemName = c.name, p.searchItemId = c._id, p.chooseItem = c), y()
            }, function () {}) : (p.promptERR = !0, void(p.wordERR = "请填写入场码"))
        }, p.chooseItemName = function (a) {
            p.chooseItem.bgColor = "", a.bgColor = "background:#20a0ff;color:#fff;", p.showItemName = a.name, p.searchItemId = a._id, p.chooseItem = a, y()
        }, p.chooseVenueName = function (a) {
            p.chooseVenue.bgColor = "", p.chooseItem.bgColor = "", a.bgColor = "background:#20a0ff;color:#fff;", p.showVenueName = a.name, p.searchVenueId = a._id, p.chooseVenue = a, p.items = a.items, p.items[0].bgColor = "background:#20a0ff;color:#fff;", p.showItemName = p.items[0].name, p.searchItemId = p.items[0]._id, p.chooseItem = p.items[0], y()
        }, p.openField = function () {
            k.open({
                controller: p.openOrder._id
            }, {}, function () {
                p.promptOK = !0, p.wordOK = "开启成功", p.orderCode = "", p.showOpenOrder = !1, p.openOrder = null, p.showOrderInfo = !1, B()
            }, function () {})
        }, p.chooseChangeOrder = function (a, b) {
            p.changeOrder && (p.changeOrder.bgColor = "background:#ff4949;", p.changeOrder.state = "isUsed", p.changeOrder = null), p.changeOrder = a, p.changeOrder.state = "choose", p.changeOrder.bgColor = "background:#20a0ff;", p.changeOrder.fontColor = "color:#fff;", p.showChangeOrder = !0, p.changeOrderId = a.orderId
        }, p.openShowChangeFieldBox = function () {
            return p.changeOrderId ? void j.findFields({
                controller: p.changeOrderId
            }, function (a) {
                return p.fieldArr = a.data.fields, 0 == p.fieldArr.length ? (p.promptERR = !0, p.wordERR = "没有可更换场地", void(p.open = !1)) : (p.showChangeFieldBox = !0, p.showFieldName = p.fieldArr[0].name, p.changeFieldId = p.fieldArr[0]._id, void 0)
            }, function (a) {}) : (p.promptERR = !0, p.wordERR = "没有订单信息", void(p.open = !1))
        }, p.chooseFieldName = function (a) {
            p.showChooseFieldBox = !1, p.showFieldName = a.name, p.changeFieldId = a._id
        }, p.changeField = function () {
            j.changeField({
                controller: p.changeOrderId
            }, {
                _field: p.changeFieldId
            }, function () {
                p.changeOrder.bgColor = "background:#fff;", p.changeOrder.state = "canbook", p.changeOrder = null, p.showChangeOrder = !1, u(), y()
            }, function () {})
        }, p.close = function () {
            u()
        }, p.closePrompt = function () {
            p.promptERR = !1, p.promptOK = !1, p.promptWARN = !1
        }, p.logout = d.logout, w()
    }
    angular.module("fieldApp").controller("FwkFieldOpenCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Time", "Field", "Orderlist", "Venue", "Item", "Orderlong", "Member"]
}(),
function () {
    "use strict";

    function a(a) {
        a.state("fwk-field-open", {
            params: {
                value: "field"
            },
            url: "/fieldworker/field/open",
            templateUrl: "app/fieldworker/field/field-open.html",
            controller: "FwkFieldOpenCtrl",
            controllerAs: "fwkFieldOpenCtrl"
        })
    }
    angular.module("fieldApp").config(a), a.$inject = ["$stateProvider"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        var p = this;
        p.titleState = f.params.state || "field";
        var q = function () {
                k.index({}, function (a) {
                    p.venues = a.data.venues, _.each(p.venues, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), p.chooseVenueName(p.venues[0])
                }, function () {})
            },
            r = function () {
                e.index({
                    role: "checkStand"
                }, function (a) {
                    s(a.data.users)
                }, function () {})
            },
            s = function (a) {
                e.get({}, function (b) {
                    var c = b.data.user._organization ? b.data.user._organization : b.data.user._id;
                    e.getOrgInfo({
                        id: c
                    }, function (b) {
                        p.workers = [{
                            name: "微信",
                            _id: "wx"
                        }].concat(a), _.each(p.workers, function (a) {
                            a.image = "manyChoose_imageNo"
                        }), q()
                    }, function () {})
                }, function () {})
            },
            t = function () {
                p.hasChooseVenue = [], p.hasChooseItem = [], p.hasChooseWorker = [], _.each(p.items, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseItem.push(a)
                }), _.each(p.venues, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseVenue.push(a)
                }), _.each(p.workers, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseWorker.push(a)
                })
            },
            u = function () {
                t(), p.hasChooseItem.length > 0 && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "item" : 0 == p.hasChooseItem.length && p.hasChooseVenue.length > 0 && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "venue" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && p.hasChooseWorker.length > 0 && !p.whatFirst ? p.whatFirst = "worker" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && (p.whatFirst = ""), 0 == p.hasChooseItem.length && "item" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseVenue.length && "venue" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseWorker.length && "worker" == p.whatFirst && (p.whatFirst = "")
            },
            v = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    _.each(p.venues, function (b) {
                        var d = _.findWhere(b.items, {
                            _id: a._id
                        });
                        return d ? void c.push(b) : void 0
                    })
                }), b(c)
            },
            w = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    a.venues && a.venues.length > 0 ? _.each(p.venues, function (b) {
                        var d = _.findWhere(a.venues, {
                            _id: b._id
                        });
                        if (d) {
                            var e = _.findWhere(c, {
                                _id: d._id
                            });
                            if (!e) return void c.push(b)
                        }
                    }) : c = p.venues
                }), b(c)
            },
            x = function (a, b) {
                var c = [];
                return _.each(a, function (a) {
                    _.each(a.items, function (b) {
                        var d = _.findWhere(c, {
                            _id: b._id
                        });
                        d || (c = c.concat(a.items))
                    })
                }), b ? void b(c) : c
            },
            y = function (a, b) {
                var c = [];
                return _.each(p.workers, function (b) {
                    b.venues && b.venues.length > 0 ? _.each(a, function (a) {
                        var d = _.findWhere(b.venues, {
                            _id: a._id
                        });
                        d && c.indexOf(b) < 0 && c.push(b)
                    }) : b.venues || c.push(b)
                }), b ? void b(c) : c
            };
        p.chooseItemName = function (a) {
            B(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseItem.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseItem.splice(p.hasChooseItem.indexOf(a), 1)), u(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "item" == p.whatFirst && v(p.hasChooseItem, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), y(a, function (a) {
                    _.each(p.workers, function (b) {
                        -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                    })
                })
            }), F()
        }, p.chooseVenueName = function (a) {
            if (B(), "manyChoose_imageNo" == a.image) a.image = "manyChoose_imageYes", p.hasChooseVenue.push(a);
            else {
                if (1 == p.hasChooseVenue.length) return p.promptERR = !0, void(p.wordERR = "必须选择一个场馆");
                a.image = "manyChoose_imageNo", p.hasChooseVenue.splice(p.hasChooseVenue.indexOf(a), 1)
            }
            u(), p.whatFirst || (_.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "venue" == p.whatFirst && (x(p.hasChooseVenue, function (a) {
                _.each(p.items, function (b) {
                    var c = _.findWhere(a, {
                        _id: b._id
                    });
                    c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                })
            }), y(p.hasChooseVenue, function (a) {
                _.each(p.workers, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                })
            })), F()
        }, p.chooseWorkerName = function (a) {
            B(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseWorker.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseWorker.splice(p.hasChooseWorker.indexOf(a), 1)), u(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            })), "worker" == p.whatFirst && w(p.hasChooseWorker, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), x(a, function (a) {
                    _.each(p.items, function (b) {
                        var c = _.findWhere(a, {
                            _id: b._id
                        });
                        c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                    })
                })
            }), F()
        };
        var z = function () {
                A(), r()
            },
            A = function () {
                p.hasChooseItem = [], p.hasChooseVenue = [], p.hasChooseWorker = [], p.searchVenueIdArr = [], p.searchItemIdArr = [], p.searchType = "", p.searchWorkerId = "", p.searchPayment = "", p.searchMemberId = "", p.searchMemberType = "", p.whatFirst = "", p.venueArr = [], p.itemArr = [], p.errState = "add", p.errRecordId = "", p.errPrice = "", p.errRemark = "", p.showTypeName = "类型", p.showWorkerName = "提交人", p.showPaymentName = "支付方式", p.showMemberName = "用户名", p.showMemberTypeName = "类型", p.startDate = new Date, p.endDate = new Date, p.paymentArr = [{
                    name: "全部"
                }, {
                    name: "现金支付",
                    value: "cash"
                }, {
                    name: "微信支付",
                    value: "wx"
                }, {
                    name: "支付宝",
                    value: "alipay"
                }, {
                    name: "转账支付",
                    value: "card"
                }, {
                    name: "支票支付",
                    value: "check"
                }, {
                    name: "POS机支付",
                    value: "pos"
                }], _.each(p.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.venues, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.workers, function (a) {
                    a.image = "manyChoose_imageNo"
                }), p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            B = function () {
                p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            C = function () {
                p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1, p.showChooseItemBox = !1, p.showChooseVenueBox = !1, p.showChooseTypeBox = !1, p.showChooseWorkerBox = !1, p.showChooseMemberBox = !1, p.showChoosePaymentBox = !1, p.showChooseMemberTypeBox = !1, p.showChooseWorkerBox = !1, p.showErrChangeBox = !1, p.showPreview = !1, p.showDetail = !1
            },
            D = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            };
        p.pageChanged = function () {
            G()
        }, p.closeChooseStartDateBox = function () {
            C(), B(), setTimeout(function () {
                F()
            }, 100)
        }, p.closeChooseEndDateBox = function () {
            C(), B(), setTimeout(function () {
                F()
            }, 100)
        }, p.choosePaymentName = function (a) {
            p.showChoosePaymentBox = !1, B(), p.showPaymentName = a.name, p.searchPayment = a.value, G()
        }, p.openErrChangeBox = function (a) {
            C(), p.showErrChangeBox = !0, p.errRecordId = a
        }, p.chooseErrState = function (a) {
            "add" == a ? p.errState = "add" : p.errState = "reduce"
        }, p.changeErrRemark = function () {
            if (!p.errPrice) return p.promptERR = !0, void(p.wordERR = "请填写纠错金额");
            if (!p.errRemark) return p.promptERR = !0, void(p.wordERR = "请填写纠错备注");
            var a = {
                _record: p.errRecordId,
                state: p.errState,
                cost: parseFloat(p.errPrice),
                remark: p.errRemark
            };
            i.create({}, a, function () {
                G()
            }, function () {})
        }, p.closePrompt = function () {
            p.promptOK = !1, p.promptERR = !1, p.promptWARN = !1, p.searchWorkerIdArr = [], p.searchPayment = ""
        };
        var E = function (a) {
                var b = 0;
                return b = D((100 * b + 100 * p.resultType.statuses.ticket[a]) / 100), b = D((100 * b + 100 * p.resultType.statuses.memberService[a]) / 100), b = D((100 * b + 100 * p.resultType.statuses.cardFee[a]) / 100), b = D((100 * b + 100 * p.resultType.statuses.bail[a]) / 100), b = D((100 * b + 100 * p.resultType.statuses.refundBail[a]) / 100)
            },
            F = function () {
                p.promptWARN = !0, p.wordWARN = "统计中";
                var a = {
                        startDate: p.startDate.getTime(),
                        endDate: p.endDate.getTime()
                    },
                    b = {
                        startDate: p.startDate.getTime(),
                        endDate: p.endDate.getTime(),
                        status: "makeCard",
                        all: "all"
                    },
                    c = {
                        startDate: p.startDate.getTime(),
                        endDate: p.endDate.getTime(),
                        state: "realNumber",
                        all: "all"
                    };
                p.dateName = "", p.dateName += p.startDate.getFullYear() + "年", p.dateName += p.startDate.getMonth() + 1 > 9 ? p.startDate.getMonth() + 1 + "月" : "0" + (p.startDate.getMonth() + 1) + "月", p.dateName += p.startDate.getDate() > 9 ? p.startDate.getDate() + "日-" : "0" + p.startDate.getDate() + "日-", p.dateName += p.endDate.getFullYear() + "年", p.dateName += p.endDate.getMonth() + 1 > 9 ? p.endDate.getMonth() + 1 + "月" : "0" + (p.endDate.getMonth() + 1) + "月", p.dateName += p.endDate.getDate() > 9 ? p.endDate.getDate() + "日" : "0" + p.endDate.getDate() + "日";
                var d = [];
                p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                    "manyChoose_imageYes" == a.image && (p.searchVenueIdArr.push(a._id), d.push(a))
                }), p.venueName = "";
                for (var e = 0; e < d.length; e++) p.venueName += (0 == e ? "" : "/") + d[e].name;
                p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                    venues: p.searchVenueIdArr
                }));
                var f = [];
                p.searchWorkerIdArr = [], _.each(p.workers, function (a) {
                    "manyChoose_imageYes" == a.image && (p.searchWorkerIdArr.push(a._id), f.push(a))
                }), p.workerName = "";
                for (var e = 0; e < f.length; e++) p.workerName += (0 == e ? "" : "/") + f[e].name;
                console.log(p.workerName), p.searchWorkerIdArr.length > 0 && (a = _.merge(a, {
                    workers: p.searchWorkerIdArr
                }));
                var g = [];
                o.business(a, function (d) {
                    p.result = d.data.statistic, _.each(p.result, function (a) {
                        "wx" != a._worker && "all" != a._worker && g.push(a._worker)
                    }), b = _.merge(b, {
                        workers: g
                    }), c = _.merge(c, {
                        realWorkers: g
                    }), n.index(b, function (b) {
                        var d = b.data.cardRecords;
                        _.each(d, function (a) {
                            var b = _.findWhere(p.result, {
                                    _worker: a._worker
                                }),
                                c = _.findWhere(p.result, {
                                    _worker: "all"
                                });
                            b && (b.issueCardCount = b.issueCardCount ? b.issueCardCount + 1 : 1, c.issueCardCount = c.issueCardCount ? c.issueCardCount + 1 : 1)
                        }), l.index(c, function (b) {
                            var c = b.data.members;
                            _.each(c, function (a) {
                                var b = _.findWhere(p.result, {
                                        _worker: a._realWorker
                                    }),
                                    c = _.findWhere(p.result, {
                                        _worker: "all"
                                    });
                                b && (b.realMemberCount = b.realMemberCount ? b.realMemberCount + 1 : 1, c.realMemberCount = c.realMemberCount ? c.realMemberCount + 1 : 1)
                            }), a.venues = ["5a1e4774138f87e51c2e79e9"], o.type(a, function (a) {
                                p.resultType = a.data.statistic[a.data.statistic.length - 1], p.resultType.statuses.cardFee.quantity = p.resultType.statuses.cardFee.subtotal / 20, p.resultType.statuses.bail.quantity = p.resultType.statuses.bail.subtotal / 20, p.resultType.statuses.refundBail.quantity = p.resultType.statuses.refundBail.subtotal / -20, p.resultType.wxTotal = E("wx"), p.resultType.alipayTotal = E("alipay"), p.resultType.cashTotal = E("cash"), p.resultType.cardTotal = E("card"), p.resultType.checkTotal = E("check"), p.resultType.posTotal = E("pos"), p.resultType.subtotal = 0, p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.wxTotal) / 100), p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.alipayTotal) / 100), p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.cashTotal) / 100), p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.cardTotal) / 100), p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.checkTotal) / 100), p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.posTotal) / 100), p.searchVenueIdArr.indexOf("5a1e4774138f87e51c2e79e9") > -1 ? p.baoyugang = !0 : p.baoyugang = !1, p.promptWARN = !1
                            }, function () {})
                        }, function () {})
                    }, function () {})
                }, function () {})
            };
        p["export"] = function (a) {
            var b = p.dateName + p.venueName + "的" + p.workerName + "收入汇总表";
            setTimeout(function () {
                execl1(a, b)
            }, 100)
        }, p.initCondition = function (a) {
            a ? "微信" == a ? p.searchWorkerIdArr = ["wx"] : p.searchWorkerName = a : (p.searchWorkerIdArr = [], _.each(p.workers, function (a) {
                "manyChoose_imageYes" == a.image && p.searchWorkerIdArr.push(a._id)
            })), G()
        };
        var G = function () {
            var a = {
                page: p.pagination.page,
                itemsPerPage: p.pagination.itemsPerPage,
                state: "other"
            };
            p.startDate && p.endDate && (a = _.merge(a, {
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            })), p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && p.searchVenueIdArr.push(a._id)
            }), p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: p.searchVenueIdArr
            })), p.searchWorkerIdArr.length > 0 && (a = _.merge(a, {
                workers: p.searchWorkerIdArr
            })), p.searchWorkerName && (a = _.merge(a, {
                workerName: p.searchWorkerName
            })), p.searchPayment && (a = _.merge(a, {
                payments: [p.searchPayment]
            })), i.index(a, function (a) {
                if (p.recordsDetail = a.data.records, !(p.recordsDetail.length > 0)) return p.promptERR = !0, void(p.wordERR = "暂无记录");
                p.showDetail = !0;
                var b = 1;
                _.each(p.recordsDetail, function (a) {
                    if (a.index = b, b++, a.state) a.cost = ("add" == a.state ? "+" : "-") + a.cost;
                    else switch (a.status) {
                    case "pay":
                    case "buy":
                    case "buyProduct":
                    case "buyShopProduct":
                    case "buySpe":
                    case "bindCard":
                        a.cost = "+" + a.cost;
                        break;
                    case "refund":
                    case "cardRefund":
                    case "refundProduct":
                    case "refundShopProduct":
                    case "refundSpe":
                        a.cost = "-" + a.cost
                    }
                    switch (a.payment) {
                    case "wx":
                        a.payment = "微信支付";
                        break;
                    case "card":
                        a.payment = "转账支付";
                        break;
                    case "cash":
                        a.payment = "现金支付";
                        break;
                    case "alipay":
                        a.payment = "支付宝支付";
                        break;
                    case "check":
                        a.payment = "支票支付";
                        break;
                    case "pos":
                        a.payment = "POS机支付";
                        break;
                    default:
                        a.payment = "无"
                    }
                });
                var c = a.data.count;
                p.pagination.totalItems = c, p.pagination.numPages = c / p.itemsPerPage
            }, function () {})
        };
        p.close = function () {
            C(), p.searchWorkerIdArr = [], p.searchPayment = "", B()
        }, z()
    }
    angular.module("fieldApp").controller("FacFinanceCashallCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Record", "Item", "Venue", "Member", "Product", "Cardrecords", "Finance"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
        var q = this;
        q.titleState = f.params.state || "field";
        var r = function () {
                q.items = [], _.each(q.venues, function (a) {
                    _.each(a.items, function (a) {
                        q.items.indexOf(a) < 0 && q.items.push(a)
                    })
                }), _.each(q.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), q.chooseVenueName(q.venues[0])
            },
            s = function () {
                k.index({}, function (a) {
                    q.venues = a.data.venues, _.each(q.venues, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), r()
                }, function () {})
            },
            t = function (a) {
                p.show({
                    id: a
                }, function (a) {
                    q.secondCategories = [{
                        name: "全部",
                        _id: ""
                    }].concat(a.data.productcategory.secondCategories)
                }, function () {})
            },
            u = function (a) {
                m.index({
                    _secondCategory: a
                }, function (a) {
                    q.products = a.data.products
                }, function () {})
            },
            v = function () {
                q.hasChooseVenue = [], q.hasChooseItem = [], q.hasChooseWorker = [], _.each(q.items, function (a) {
                    "manyChoose_imageYes" == a.image && q.hasChooseItem.push(a)
                }), _.each(q.venues, function (a) {
                    "manyChoose_imageYes" == a.image && q.hasChooseVenue.push(a)
                }), _.each(q.workers, function (a) {
                    "manyChoose_imageYes" == a.image && q.hasChooseWorker.push(a)
                })
            },
            w = function () {
                v(), q.hasChooseItem.length > 0 && 0 == q.hasChooseVenue.length && 0 == q.hasChooseWorker.length && !q.whatFirst ? q.whatFirst = "item" : 0 == q.hasChooseItem.length && q.hasChooseVenue.length > 0 && 0 == q.hasChooseWorker.length && !q.whatFirst ? q.whatFirst = "venue" : 0 == q.hasChooseItem.length && 0 == q.hasChooseVenue.length && q.hasChooseWorker.length > 0 && !q.whatFirst ? q.whatFirst = "worker" : 0 == q.hasChooseItem.length && 0 == q.hasChooseVenue.length && 0 == q.hasChooseWorker.length && (q.whatFirst = ""), 0 == q.hasChooseItem.length && "item" == q.whatFirst && (q.whatFirst = ""), 0 == q.hasChooseVenue.length && "venue" == q.whatFirst && (q.whatFirst = ""), 0 == q.hasChooseWorker.length && "worker" == q.whatFirst && (q.whatFirst = "")
            },
            x = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    _.each(q.venues, function (b) {
                        var d = _.findWhere(b.items, {
                            _id: a._id
                        });
                        return d ? void c.push(b) : void 0
                    })
                }), b(c)
            },
            y = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    a.venues && a.venues.length > 0 ? _.each(q.venues, function (b) {
                        var d = _.findWhere(a.venues, {
                            _id: b._id
                        });
                        if (d) {
                            var e = _.findWhere(c, {
                                _id: d._id
                            });
                            if (!e) return void c.push(b)
                        }
                    }) : c = q.venues
                }), b(c)
            },
            z = function (a, b) {
                var c = [];
                return _.each(a, function (a) {
                    _.each(a.items, function (b) {
                        var d = _.findWhere(c, {
                            _id: b._id
                        });
                        d || (c = c.concat(a.items))
                    })
                }), b ? void b(c) : c
            },
            A = function (a, b) {
                var c = [];
                return _.each(q.workers, function (b) {
                    b.venues && b.venues.length > 0 ? _.each(a, function (a) {
                        var d = _.findWhere(b.venues, {
                            _id: a._id
                        });
                        d && c.push(b)
                    }) : c.push(b)
                }), b ? void b(c) : c
            };
        q.chooseItemName = function (a) {
            D(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", q.hasChooseItem.push(a)) : (a.image = "manyChoose_imageNo", q.hasChooseItem.splice(q.hasChooseItem.indexOf(a), 1)), w(), q.whatFirst || (_.each(q.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(q.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "item" == q.whatFirst && x(q.hasChooseItem, function (a) {
                _.each(q.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), A(a, function (a) {
                    _.each(q.workers, function (b) {
                        -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                    })
                })
            }), G()
        }, q.chooseVenueName = function (a) {
            if (D(), "manyChoose_imageNo" == a.image) a.image = "manyChoose_imageYes", q.hasChooseVenue.push(a);
            else {
                if (1 == q.hasChooseVenue.length) return q.promptERR = !0, void(q.wordERR = "必须选择一个场馆");
                a.image = "manyChoose_imageNo", q.hasChooseVenue.splice(q.hasChooseVenue.indexOf(a), 1)
            }
            w(), q.whatFirst || (_.each(q.items, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(q.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "venue" == q.whatFirst && (z(q.hasChooseVenue, function (a) {
                _.each(q.items, function (b) {
                    var c = _.findWhere(a, {
                        _id: b._id
                    });
                    c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                })
            }), A(q.hasChooseVenue, function (a) {
                _.each(q.workers, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                })
            })), G()
        }, q.chooseWorkerName = function (a) {
            D(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", q.hasChooseWorker.push(a)) : (a.image = "manyChoose_imageNo", q.hasChooseWorker.splice(q.hasChooseWorker.indexOf(a), 1)), w(), q.whatFirst || (_.each(q.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(q.items, function (a) {
                a.image = "manyChoose_imageNo"
            })), "worker" == q.whatFirst && y(q.hasChooseWorker, function (a) {
                _.each(q.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), z(a, function (a) {
                    _.each(q.items, function (b) {
                        var c = _.findWhere(a, {
                            _id: b._id
                        });
                        c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                    })
                })
            }), G()
        };
        var B = function () {
                C(), s()
            },
            C = function () {
                q.hasChooseItem = [], q.hasChooseVenue = [], q.hasChooseWorker = [], q.searchVenueIdArr = [], q.searchItemIdArr = [], q.searchType = "", q.searchWorkerId = "", q.searchPayment = "", q.searchMemberId = "", q.searchMemberType = "", q.whatFirst = "", q.venueArr = [], q.itemArr = [], q.errState = "add", q.errRecordId = "", q.errPrice = "", q.errRemark = "", q.showTypeName = "类型", q.showWorkerName = "提交人", q.showPaymentName = "支付方式", q.showMemberName = "用户名", q.showMemberTypeName = "类型", q.startDate = new Date, q.endDate = new Date, q.searchProduct = "选择综合服务", q.searchSecond = "选择二级分类", q.paymentArr = [{
                    name: "全部"
                }, {
                    name: "现金支付",
                    value: "cash"
                }, {
                    name: "微信支付",
                    value: "wx"
                }, {
                    name: "支付宝支付",
                    value: "alipay"
                }, {
                    name: "转账支付",
                    value: "card"
                }, {
                    name: "支票支付",
                    value: "check"
                }, {
                    name: "POS机支付",
                    value: "pos"
                }, {
                    name: "余额支付",
                    value: "member"
                }, {
                    name: "虚拟卡支付",
                    value: "member_vir"
                }, {
                    name: "专用账户支付",
                    value: "member_spe"
                }], _.each(q.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(q.venues, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(q.workers, function (a) {
                    a.image = "manyChoose_imageNo"
                }), q.page = 1, q.itemsPerPage = 10, q.pagination = {
                    page: q.page,
                    itemsPerPage: q.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            D = function () {
                q.page = 1, q.itemsPerPage = 10, q.pagination = {
                    page: q.page,
                    itemsPerPage: q.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            E = function () {
                q.showChooseStartDateBox = !1, q.showChooseEndDateBox = !1, q.showChooseItemBox = !1, q.showChooseVenueBox = !1, q.showChooseTypeBox = !1, q.showChooseWorkerBox = !1, q.showChooseMemberBox = !1, q.showChoosePaymentBox = !1, q.showChooseMemberTypeBox = !1, q.showChooseWorkerBox = !1, q.showErrChangeBox = !1, q.showPreview = !1, q.showDetail = !1
            },
            F = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            };
        q.pageChanged = function () {
            H()
        }, q.closeChooseStartDateBox = function () {
            E(), D(), setTimeout(function () {
                G()
            }, 100)
        }, q.closeChooseEndDateBox = function () {
            E(), D(), setTimeout(function () {
                G()
            }, 100)
        }, q.chooseTypeName = function (a) {
            E(), D(), q.showTypeName = a.name, q.searchType = a.value, H()
        }, q.chooseMemberName = function (a) {
            E(), D(), q.showMemberName = a.name, "tourist" == a.value ? q.searchMemberId = "tourist" : q.searchMemberId = a._id, H()
        }, q.choosePaymentName = function (a) {
            q.showChoosePaymentBox = !1, D(), q.showPaymentName = a.name, q.searchPayment = a.value, H()
        }, q.openErrChangeBox = function (a) {
            E(), q.showErrChangeBox = !0, q.errRecordId = a
        }, q.chooseErrState = function (a) {
            "add" == a ? q.errState = "add" : q.errState = "reduce"
        }, q.changeErrRemark = function () {
            if (!q.errPrice) return q.promptERR = !0, void(q.wordERR = "请填写纠错金额");
            if (!q.errRemark) return q.promptERR = !0, void(q.wordERR = "请填写纠错备注");
            var a = {
                _record: q.errRecordId,
                state: q.errState,
                cost: parseFloat(q.errPrice),
                remark: q.errRemark
            };
            i.create({}, a, function () {
                H()
            }, function () {})
        }, q.closePrompt = function () {
            q.promptOK = !1, q.promptERR = !1, q.promptWARN = !1, q.searchWorkerIdArr = [], q.searchPayment = ""
        };
        var G = function () {
            q.promptWARN = !0, q.wordWARN = "统计中";
            var a = {
                all: "all",
                state: "field",
                startDate: q.startDate.getTime(),
                endDate: q.endDate.getTime()
            };
            q.dateName = "", q.dateName += q.startDate.getFullYear() + "年", q.dateName += q.startDate.getMonth() + 1 > 9 ? q.startDate.getMonth() + 1 + "月" : "0" + (q.startDate.getMonth() + 1) + "月", q.dateName += q.startDate.getDate() > 9 ? q.startDate.getDate() + "日-" : "0" + q.startDate.getDate() + "日-", q.dateName += q.endDate.getFullYear() + "年", q.dateName += q.endDate.getMonth() + 1 > 9 ? q.endDate.getMonth() + 1 + "月" : "0" + (q.endDate.getMonth() + 1) + "月", q.dateName += q.endDate.getDate() > 9 ? q.endDate.getDate() + "日" : "0" + q.endDate.getDate() + "日";
            var b = [];
            q.searchVenueIdArr = [], _.each(q.venues, function (a) {
                "manyChoose_imageYes" == a.image && (q.searchVenueIdArr.push(a._id), b.push(a))
            }), q.venueName = "";
            for (var c = 0; c < b.length; c++) q.venueName += (0 == c ? "" : "/") + b[c].name;
            q.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: q.searchVenueIdArr
            })), q.searchItemIdArr = [], _.each(q.items, function (a) {
                "manyChoose_imageYes" == a.image && q.searchItemIdArr.push(a._id)
            }), q.searchItemIdArr.length > 0 && (a = _.merge(a, {
                items: q.searchItemIdArr
            })), o.income(a, function (a) {
                q.itemAndProduct = a.data.statistic.itemAndProduct, q.firstcategory = a.data.statistic.firstcategory, _.each(q.itemAndProduct, function (a) {
                    a.payment.cashAll = 0, a.payment.cashAll = F(a.payment.cashAll + a.payment.wx + a.payment.alipay + a.payment.cash + a.payment.card + a.payment.check + a.payment.pos)
                }), _.each(q.firstcategory, function (a) {
                    a.payment.cashAll = 0, a.payment.cashAll = F(a.payment.cashAll + a.payment.wx + a.payment.alipay + a.payment.cash + a.payment.card + a.payment.check + a.payment.pos)
                }), q.all = _.findWhere(q.itemAndProduct, {
                    _ip: "all"
                });
                for (var b = 0, c = !0, d = 0, e = 0; e < q.itemAndProduct.length; e++) "product" == q.itemAndProduct[e].state && (c && (b = e, c = !1), d++);
                q.itemAndProduct.splice(q.itemAndProduct.indexOf(q.all), 1), 0 == q.searchItemIdArr.length && q.itemAndProduct.splice(b, d), q.promptWARN = !1
            }, function () {})
        };
        q["export"] = function () {
            var a = q.dateName + q.venueName + "的消费汇总表";
            setTimeout(function () {
                execl1("alltable", a)
            }, 100)
        }, q.changeStatus = function (a) {
            D(), q.searchStatus = a, H()
        }, q.initCondition = function (a) {
            if ("item" == a.state) q.searchItemId2 = a._ip;
            else if ("product" == a.state) q.searchStatus = "other", q.searchProductId = a._ip;
            else if ("firstcategory" == a.state) {
                q.searchStatus = "other", q.searchFirstCategoryId = a._ip;
                var b = [];
                _.each(q.venues, function (a) {
                    "manyChoose_imageYes" == a.image && b.push(a)
                }), q.secondCategories = [], q.searchSecond = "选择二级分类", q._searchSecond = "", q.products = [], q.searchProduct = "选择综合服务", q._searchProduct = "", t(q.searchFirstCategoryId)
            }
            H()
        }, q.chooseSecond = function (a) {
            q.openShowSearchSecond = !1, q.searchSecond = a.name, q._searchSecond = a._id, q.products = [], q.searchProduct = "选择综合服务", q._searchProduct = "", H(), u(q._searchSecond)
        }, q.chooseProduct = function (a) {
            q.openShowSearchProduct = !1, q.searchProduct = a.name, q._searchProduct = a._id, H()
        }, q.searchDetail = function () {
            D(), H()
        }, q.exportDetail = function () {
            var a = {
                all: "all",
                state: "field"
            };
            q.startDate && q.endDate && (a = _.merge(a, {
                startDate: q.startDate.getTime(),
                endDate: q.endDate.getTime()
            })), q.searchVenueIdArr = [], _.each(q.venues, function (a) {
                "manyChoose_imageYes" == a.image && q.searchVenueIdArr.push(a._id)
            }), q.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: q.searchVenueIdArr
            })), q.searchItemId2 ? a = _.merge(a, {
                items: [q.searchItemId2]
            }) : q.searchProductId ? a = _.merge(a, {
                _product: q.searchProductId
            }) : q.searchFirstCategoryId && (a = _.merge(a, {
                _firstCategory: q.searchFirstCategoryId
            })), q.searchPayment && (a = _.merge(a, {
                payments: [q.searchPayment]
            })), q.searchRecordRemark && (a = _.merge(a, {
                description: q.searchRecordRemark
            })), q._searchProduct && (a = _.merge(a, {
                _product: q._searchProduct
            })), q._searchSecond && (a = _.merge(a, {
                _secondCategory: q._searchSecond
            })), a = "other" == q.searchStatus ? _.merge(a, {
                statuses: ["buyProduct", "refundProduct", "buyTicket"]
            }) : _.merge(a, {
                statuses: ["pay", "refund"],
                sortBy: "checkDate"
            }), i.index(a, function (a) {
                q.exportRecordsDetail = a.data.records, _.each(q.exportRecordsDetail, function (a) {
                    if (a.state) a.cost = ("add" == a.state ? "+" : "-") + a.cost;
                    else switch (a.status) {
                    case "pay":
                    case "buy":
                    case "buyProduct":
                    case "buyShopProduct":
                    case "buySpe":
                    case "bindCard":
                        a.cost = "+" + a.cost;
                        break;
                    case "refund":
                    case "cardRefund":
                    case "refundProduct":
                    case "refundShopProduct":
                    case "refundSpe":
                        a.cost = "-" + a.cost
                    }
                    switch (a.payment) {
                    case "wx":
                        a.payment = "微信支付";
                        break;
                    case "card":
                        a.payment = "转账支付";
                        break;
                    case "cash":
                        a.payment = "现金支付";
                        break;
                    case "alipay":
                        a.payment = "支付宝支付";
                        break;
                    case "check":
                        a.payment = "支票支付";
                        break;
                    case "pos":
                        a.payment = "POS机支付";
                        break;
                    case "member":
                        a.payment = "余额支付";
                        break;
                    case "member_vir":
                        a.payment = "虚拟卡支付";
                        break;
                    case "member_spe":
                        a.payment = "专用账户支付";
                        break;
                    default:
                        a.payment = "无"
                    }
                });
                var b = "明细表";
                setTimeout(function () {
                    execl1("alltable2", b)
                }, 100)
            }, function () {})
        };
        var H = function () {
            var a = {
                page: q.pagination.page,
                itemsPerPage: q.pagination.itemsPerPage,
                state: "field"
            };
            q.startDate && q.endDate && (a = _.merge(a, {
                startDate: q.startDate.getTime(),
                endDate: q.endDate.getTime()
            })), q.searchVenueIdArr = [], _.each(q.venues, function (a) {
                "manyChoose_imageYes" == a.image && q.searchVenueIdArr.push(a._id)
            }), q.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: q.searchVenueIdArr
            })), q.searchItemId2 ? a = _.merge(a, {
                items: [q.searchItemId2]
            }) : q.searchProductId ? a = _.merge(a, {
                _product: q.searchProductId
            }) : q.searchFirstCategoryId && (a = _.merge(a, {
                _firstCategory: q.searchFirstCategoryId
            })), q.searchPayment && (a = _.merge(a, {
                payments: [q.searchPayment]
            })), q.searchRecordRemark && (a = _.merge(a, {
                description: q.searchRecordRemark
            })), q.searchProductContacts && (a = _.merge(a, {
                productContacts: q.searchProductContacts
            })), q._searchProduct && (a = _.merge(a, {
                _product: q._searchProduct
            })), q._searchSecond && (a = _.merge(a, {
                _secondCategory: q._searchSecond
            })), a = "other" == q.searchStatus ? _.merge(a, {
                statuses: ["buyProduct", "refundProduct", "buyTicket"]
            }) : _.merge(a, {
                statuses: ["pay", "refund"],
                sortBy: "checkDate"
            }), i.index(a, function (b) {
                q.recordsDetail = b.data.records, q.showDetail = !0, _.each(q.recordsDetail, function (a) {
                    if (a.state) a.cost = ("add" == a.state ? "+" : "-") + a.cost;
                    else switch (a.status) {
                    case "pay":
                    case "buyProduct":
                        a.cost = "+" + a.cost;
                        break;
                    case "refund":
                    case "refundProduct":
                        a.cost = "-" + a.cost
                    }
                    switch (a.payment) {
                    case "wx":
                        a.payment = "微信支付";
                        break;
                    case "card":
                        a.payment = "转账支付";
                        break;
                    case "cash":
                        a.payment = "现金支付";
                        break;
                    case "alipay":
                        a.payment = "支付宝支付";
                        break;
                    case "check":
                        a.payment = "支票支付";
                        break;
                    case "pos":
                        a.payment = "POS机支付";
                        break;
                    case "member":
                        a.payment = "余额支付";
                        break;
                    case "member_vir":
                        a.payment = "虚拟卡支付";
                        break;
                    case "member_spe":
                        a.payment = "专用账户支付";
                        break;
                    default:
                        a.payment = "无"
                    }
                });
                var c = b.data.count;
                q.pagination.totalItems = c, q.pagination.numPages = c / q.itemsPerPage, a = _.merge(a, {
                    all: "total"
                }), i.index(a, function (a) {
                    q.cost = a.data.total
                }, function () {})
            }, function () {})
        };
        q.close = function () {
            E(), q.searchItemId2 = "", q.searchProductId = "", q.searchFirstCategoryId = "", q.searchPayment = "", q.searchStatus = "field", q.showPaymentName = "支付方式", q.searchPayment = "", q.searchProduct = "选择综合服务", q._searchProduct = "", D()
        }, B()
    }
    angular.module("fieldApp").controller("FacFinanceFieldCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Record", "Item", "Venue", "Member", "Product", "Cardrecords", "Finance", "Productcategory"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        var p = this,
            q = function () {
                k.index({}, function (a) {
                    p.venues = a.data.venues, _.each(p.venues, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), p.chooseVenueName(p.venues[0])
                }, function () {})
            },
            r = function () {
                e.index({
                    role: "checkStand"
                }, function (a) {
                    p.workers = [{
                        name: "微信",
                        _id: "wx"
                    }].concat(a.data.users), _.each(p.workers, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), q()
                }, function () {})
            },
            s = function () {
                p.hasChooseVenue = [], p.hasChooseItem = [], p.hasChooseWorker = [], _.each(p.items, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseItem.push(a)
                }), _.each(p.venues, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseVenue.push(a)
                }), _.each(p.workers, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseWorker.push(a)
                })
            },
            t = function () {
                s(), p.hasChooseItem.length > 0 && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "item" : 0 == p.hasChooseItem.length && p.hasChooseVenue.length > 0 && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "venue" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && p.hasChooseWorker.length > 0 && !p.whatFirst ? p.whatFirst = "worker" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && (p.whatFirst = ""), 0 == p.hasChooseItem.length && "item" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseVenue.length && "venue" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseWorker.length && "worker" == p.whatFirst && (p.whatFirst = "");
            },
            u = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    _.each(p.venues, function (b) {
                        var d = _.findWhere(b.items, {
                            _id: a._id
                        });
                        return d ? void c.push(b) : void 0
                    })
                }), b(c)
            },
            v = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    a.venues && a.venues.length > 0 ? _.each(p.venues, function (b) {
                        var d = _.findWhere(a.venues, {
                            _id: b._id
                        });
                        if (d) {
                            var e = _.findWhere(c, {
                                _id: d._id
                            });
                            if (!e) return void c.push(b)
                        }
                    }) : c = p.venues
                }), b(c)
            },
            w = function (a, b) {
                var c = [];
                return _.each(a, function (a) {
                    _.each(a.items, function (b) {
                        var d = _.findWhere(c, {
                            _id: b._id
                        });
                        d || (c = c.concat(a.items))
                    })
                }), b ? void b(c) : c
            },
            x = function (a, b) {
                var c = [];
                return _.each(p.workers, function (b) {
                    b.venues && b.venues.length > 0 ? _.each(a, function (a) {
                        var d = _.findWhere(b.venues, {
                            _id: a._id
                        });
                        d && c.push(b)
                    }) : c.push(b)
                }), b ? void b(c) : c
            };
        p.chooseItemName = function (a) {
            A(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseItem.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseItem.splice(p.hasChooseItem.indexOf(a), 1)), t(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "item" == p.whatFirst && u(p.hasChooseItem, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), x(a, function (a) {
                    _.each(p.workers, function (b) {
                        -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                    })
                })
            }), D()
        }, p.chooseVenueName = function (a) {
            if (A(), "manyChoose_imageNo" == a.image) a.image = "manyChoose_imageYes", p.hasChooseVenue.push(a);
            else {
                if (1 == p.hasChooseVenue.length) return p.promptERR = !0, void(p.wordERR = "必须选择一个场馆");
                a.image = "manyChoose_imageNo", p.hasChooseVenue.splice(p.hasChooseVenue.indexOf(a), 1)
            }
            t(), p.whatFirst || (_.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "venue" == p.whatFirst && (w(p.hasChooseVenue, function (a) {
                _.each(p.items, function (b) {
                    var c = _.findWhere(a, {
                        _id: b._id
                    });
                    c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                })
            }), x(p.hasChooseVenue, function (a) {
                _.each(p.workers, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                })
            })), D()
        }, p.chooseWorkerName = function (a) {
            A(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseWorker.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseWorker.splice(p.hasChooseWorker.indexOf(a), 1)), t(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            })), "worker" == p.whatFirst && v(p.hasChooseWorker, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), w(a, function (a) {
                    _.each(p.items, function (b) {
                        var c = _.findWhere(a, {
                            _id: b._id
                        });
                        c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                    })
                })
            }), D()
        };
        var y = function () {
                z(), r()
            },
            z = function () {
                p.hasChooseItem = [], p.hasChooseVenue = [], p.hasChooseWorker = [], p.searchVenueIdArr = [], p.searchItemIdArr = [], p.searchType = "", p.searchWorkerId = "", p.searchPayment = "", p.searchMemberId = "", p.searchMemberType = "", p.whatFirst = "", p.venueArr = [], p.itemArr = [], p.errState = "add", p.errRecordId = "", p.errPrice = "", p.errRemark = "", p.showTypeName = "类型", p.showWorkerName = "提交人", p.showPaymentName = "支付方式", p.showMemberName = "用户名", p.showMemberTypeName = "类型", p.startDate = new Date, p.endDate = new Date, p.paymentArr = [{
                    name: "全部"
                }, {
                    name: "微信支付",
                    value: "wx"
                }, {
                    name: "支付宝支付",
                    value: "alipay"
                }], _.each(p.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.venues, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.workers, function (a) {
                    a.image = "manyChoose_imageNo"
                }), p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            A = function () {
                p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            B = function () {
                p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1, p.showChooseItemBox = !1, p.showChooseVenueBox = !1, p.showChooseTypeBox = !1, p.showChooseWorkerBox = !1, p.showChooseMemberBox = !1, p.showChoosePaymentBox = !1, p.showChooseMemberTypeBox = !1, p.showChooseWorkerBox = !1, p.showErrChangeBox = !1, p.showPreview = !1, p.showDetail = !1
            },
            C = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            };
        p.pageChanged = function () {
            E()
        }, p.closeChooseStartDateBox = function () {
            B(), A(), setTimeout(function () {
                D()
            }, 100)
        }, p.closeChooseEndDateBox = function () {
            B(), A(), setTimeout(function () {
                D()
            }, 100)
        }, p.choosePaymentName = function (a) {
            p.showChoosePaymentBox = !1, A(), p.showPaymentName = a.name, p.searchPayment = a.value, E()
        }, p.openErrChangeBox = function (a) {
            B(), p.showErrChangeBox = !0, p.errRecordId = a
        }, p.chooseErrState = function (a) {
            "add" == a ? p.errState = "add" : p.errState = "reduce"
        }, p.changeErrRemark = function () {
            if (!p.errPrice) return p.promptERR = !0, void(p.wordERR = "请填写纠错金额");
            if (!p.errRemark) return p.promptERR = !0, void(p.wordERR = "请填写纠错备注");
            var a = {
                _record: p.errRecordId,
                state: p.errState,
                cost: parseFloat(p.errPrice),
                remark: p.errRemark
            };
            Record.create({}, a, function () {
                E()
            }, function () {})
        }, p.closePrompt = function () {
            p.promptOK = !1, p.promptERR = !1, p.promptWARN = !1, p.searchWorkerIdArr = [], p.searchPayment = ""
        };
        var D = function () {
            p.promptWARN = !0, p.wordWARN = "统计中";
            var a = {
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            };
            p.dateName = "", p.dateName += p.startDate.getFullYear() + "年", p.dateName += p.startDate.getMonth() + 1 > 9 ? p.startDate.getMonth() + 1 + "月" : "0" + (p.startDate.getMonth() + 1) + "月", p.dateName += p.startDate.getDate() > 9 ? p.startDate.getDate() + "日-" : "0" + p.startDate.getDate() + "日-", p.dateName += p.endDate.getFullYear() + "年", p.dateName += p.endDate.getMonth() + 1 > 9 ? p.endDate.getMonth() + 1 + "月" : "0" + (p.endDate.getMonth() + 1) + "月", p.dateName += p.endDate.getDate() > 9 ? p.endDate.getDate() + "日" : "0" + p.endDate.getDate() + "日";
            var b = [];
            p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && (p.searchVenueIdArr.push(a._id), b.push(a))
            }), p.venueName = "";
            for (var c = 0; c < b.length; c++) p.venueName += (0 == c ? "" : "/") + b[c].name;
            p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: p.searchVenueIdArr
            })), p.searchWorkerIdArr = [], _.each(p.workers, function (a) {
                "manyChoose_imageYes" == a.image && p.searchWorkerIdArr.push(a._id)
            }), p.searchWorkerIdArr.length > 0 && (a = _.merge(a, {
                workers: p.searchWorkerIdArr
            }));
            o.prepIncome(a, function (a) {
                p.result = a.data.statistic, p.promptWARN = !1
            }, function () {})
        };
        p["export"] = function () {
            var a = p.dateName + p.venueName + "的微信支付宝收入汇总表";
            setTimeout(function () {
                execl1("alltable", a)
            }, 100)
        }, p.initCondition = function (a) {
            a && ("微信" == a ? p.searchWorkerIdArr = ["wx"] : "合计" == a ? p.searchWorkerName = void 0 : p.searchWorkerName = a), E()
        };
        var E = function () {
            var a = {
                page: p.pagination.page,
                itemsPerPage: p.pagination.itemsPerPage,
                state: "shop"
            };
            p.startDate && p.endDate && (a = _.merge(a, {
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            })), p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && p.searchVenueIdArr.push(a._id)
            }), p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: p.searchVenueIdArr
            })), 1 == p.searchWorkerIdArr.length && (a = _.merge(a, {
                _worker: p.searchWorkerIdArr[0]
            })), p.searchWorkerName && (a = _.merge(a, {
                workerName: p.searchWorkerName
            })), p.searchPayment && (a = _.merge(a, {
                payment: p.searchPayment
            })), i.index(a, function (a) {
                if (p.prepordersDetail = a.data.preporders, !(p.prepordersDetail.length > 0)) return p.promptERR = !0, void(p.wordERR = "暂无记录");
                p.showDetail = !0, _.each(p.prepordersDetail, function (a) {
                    switch (a.total_fee = C(a.total_fee / 100), a.status) {
                    case "buyMicropay":
                        a.status = "微信扫码购卡充值";
                        break;
                    case "payMicropay":
                        a.status = "微信扫码预订场地";
                        break;
                    case "shopProductMicropay":
                        a.status = "微信扫码购买商品";
                        break;
                    case "productMicropay":
                        a.status = "微信扫码购买综合服务";
                        break;
                    case "bindMicropay":
                        a.status = "微信扫码扣工本费";
                        break;
                    case "buySpeMicropay":
                        a.status = "微信扫码充值专用账户";
                        break;
                    case "buyMicropay&bindMicropay":
                        a.status = "微信扫码购卡充值并扣工本费";
                        break;
                    case "depositMicropay":
                        a.status = "微信扫码充值";
                        break;
                    case "buyServiceMicropay":
                        a.status = "微信扫码购卡购买会员服务", a.bail && (a.status += "并扣保证金");
                        break;
                    case "buyServiceMicropay&bindMicropay":
                        a.status = "微信扫码购卡购买会员服务并扣工本费", a.bail && (a.status += "并扣保证金");
                        break;
                    case "overtimeMicropay":
                        a.status = "微信扫码支付超时费用";
                        break;
                    case "bailMicropay":
                        a.status = "微信扫码支付押金";
                        break;
                    case "buyalipay":
                        a.status = "支付宝扫码购卡充值";
                        break;
                    case "payalipay":
                        a.status = "支付宝扫码预订场地";
                        break;
                    case "shopProductalipay":
                        a.status = "支付宝扫码购买商品";
                        break;
                    case "productalipay":
                        a.status = "支付宝扫码购买综合服务";
                        break;
                    case "bindalipay":
                        a.status = "支付宝扫码扣工本费";
                        break;
                    case "buySpeAlipay":
                        a.status = "支付宝扫码充值专用账户";
                        break;
                    case "bindalipay&buyalipay":
                        a.status = "支付宝扫码购卡充值并扣工本费";
                        break;
                    case "depositAlipay":
                        a.status = "支付宝扫码充值";
                        break;
                    case "buyServiceAlipay":
                        a.status = "支付宝扫码购卡购买会员服务", a.bail && (a.status += "并扣保证金");
                        break;
                    case "buyServiceAlipay&bindAlipay":
                        a.status = "支付宝扫码购卡购买会员服务并扣工本费", a.bail && (a.status += "并扣保证金");
                        break;
                    case "overtimeAlipay":
                        a.status = "支付宝扫码支付超时费用";
                        break;
                    case "bailAlipay":
                        a.status = "支付宝扫码支付押金";
                        break;
                    case "buy":
                        a.status = "微信用户线上购卡充值", a.payment = "微信公众号支付", a.workerName = "微信用户";
                        break;
                    case "buyTicket":
                        "wx" == a.payment ? a.status = "微信扫码购买门票" : a.status = "支付宝扫码购买门票"
                    }
                    switch (a.payment) {
                    case "wx":
                        a.payment = "微信支付";
                        break;
                    case "alipay":
                        a.payment = "支付宝支付"
                    }
                });
                var b = a.data.count;
                p.pagination.totalItems = b, p.pagination.numPages = b / p.itemsPerPage
            }, function () {})
        };
        p.close = function () {
            B(), p.searchWorkerIdArr = [], p.searchPayment = "", A()
        }, y()
    }
    angular.module("fieldApp").controller("FacFinancePrepCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Preporder", "Item", "Venue", "Member", "Product", "Cardrecords", "Finance"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        var p = this,
            q = function () {
                k.index({}, function (a) {
                    p.venues = a.data.venues, _.each(p.venues, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), p.chooseVenueName(p.venues[0])
                }, function () {})
            },
            r = function () {
                e.index({
                    role: "checkStand"
                }, function (a) {
                    p.workers = a.data.users, _.each(p.workers, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), q()
                }, function () {})
            },
            s = function () {
                p.hasChooseVenue = [], p.hasChooseItem = [], p.hasChooseWorker = [], _.each(p.items, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseItem.push(a)
                }), _.each(p.venues, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseVenue.push(a)
                }), _.each(p.workers, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseWorker.push(a)
                })
            },
            t = function () {
                s(), p.hasChooseItem.length > 0 && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "item" : 0 == p.hasChooseItem.length && p.hasChooseVenue.length > 0 && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "venue" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && p.hasChooseWorker.length > 0 && !p.whatFirst ? p.whatFirst = "worker" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && (p.whatFirst = ""), 0 == p.hasChooseItem.length && "item" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseVenue.length && "venue" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseWorker.length && "worker" == p.whatFirst && (p.whatFirst = "")
            },
            u = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    _.each(p.venues, function (b) {
                        var d = _.findWhere(b.items, {
                            _id: a._id
                        });
                        return d ? void c.push(b) : void 0
                    })
                }), b(c)
            },
            v = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    a.venues && a.venues.length > 0 ? _.each(p.venues, function (b) {
                        var d = _.findWhere(a.venues, {
                            _id: b._id
                        });
                        if (d) {
                            var e = _.findWhere(c, {
                                _id: d._id
                            });
                            if (!e) return void c.push(b)
                        }
                    }) : c = p.venues
                }), b(c)
            },
            w = function (a, b) {
                var c = [];
                return _.each(a, function (a) {
                    _.each(a.items, function (b) {
                        var d = _.findWhere(c, {
                            _id: b._id
                        });
                        d || (c = c.concat(a.items))
                    })
                }), b ? void b(c) : c
            },
            x = function (a, b) {
                var c = [];
                return _.each(p.workers, function (b) {
                    b.venues && b.venues.length > 0 ? _.each(a, function (a) {
                        var d = _.findWhere(b.venues, {
                            _id: a._id
                        });
                        d && c.push(b)
                    }) : c.push(b)
                }), b ? void b(c) : c
            };
        p.chooseItemName = function (a) {
            A(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseItem.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseItem.splice(p.hasChooseItem.indexOf(a), 1)), t(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "item" == p.whatFirst && u(p.hasChooseItem, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), x(a, function (a) {
                    _.each(p.workers, function (b) {
                        -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                    })
                })
            }), D()
        }, p.chooseVenueName = function (a) {
            if (A(), "manyChoose_imageNo" == a.image) a.image = "manyChoose_imageYes", p.hasChooseVenue.push(a);
            else {
                if (1 == p.hasChooseVenue.length) return p.promptERR = !0, void(p.wordERR = "必须选择一个场馆");
                a.image = "manyChoose_imageNo", p.hasChooseVenue.splice(p.hasChooseVenue.indexOf(a), 1)
            }
            t(), p.whatFirst || (_.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "venue" == p.whatFirst && (w(p.hasChooseVenue, function (a) {
                _.each(p.items, function (b) {
                    var c = _.findWhere(a, {
                        _id: b._id
                    });
                    c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                })
            }), x(p.hasChooseVenue, function (a) {
                _.each(p.workers, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                })
            })), D()
        }, p.chooseWorkerName = function (a) {
            A(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseWorker.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseWorker.splice(p.hasChooseWorker.indexOf(a), 1)), t(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            })), "worker" == p.whatFirst && v(p.hasChooseWorker, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), w(a, function (a) {
                    _.each(p.items, function (b) {
                        var c = _.findWhere(a, {
                            _id: b._id
                        });
                        c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                    })
                })
            }), D()
        };
        var y = function () {
                z(), r()
            },
            z = function () {
                p.hasChooseItem = [], p.hasChooseVenue = [], p.hasChooseWorker = [], p.searchVenueIdArr = [], p.searchItemIdArr = [], p.searchType = "", p.searchWorkerId = "", p.searchPayment = "", p.searchMemberId = "", p.searchMemberType = "", p.whatFirst = "", p.venueArr = [], p.itemArr = [], p.errState = "add", p.errRecordId = "", p.errPrice = "", p.errRemark = "", p.showTypeName = "类型", p.showWorkerName = "提交人", p.showPaymentName = "支付方式", p.showMemberName = "用户名", p.showMemberTypeName = "类型", p.startDate = new Date, p.endDate = new Date, p.paymentArr = [{
                    name: "全部"
                }, {
                    name: "微信支付",
                    value: "wx"
                }, {
                    name: "现金支付",
                    value: "cash"
                }, {
                    name: "余额支付",
                    value: "member"
                }, {
                    name: "支付宝支付",
                    value: "alipay"
                }], _.each(p.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.venues, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.workers, function (a) {
                    a.image = "manyChoose_imageNo"
                }), p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            A = function () {
                p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            B = function () {
                p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1, p.showChooseItemBox = !1, p.showChooseVenueBox = !1, p.showChooseTypeBox = !1, p.showChooseWorkerBox = !1, p.showChooseMemberBox = !1, p.showChoosePaymentBox = !1, p.showChooseMemberTypeBox = !1, p.showChooseWorkerBox = !1, p.showErrChangeBox = !1, p.showPreview = !1, p.showDetail = !1
            },
            C = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            };
        p.pageChanged = function () {
            E()
        }, p.closeChooseStartDateBox = function () {
            B(), A(), setTimeout(function () {
                D()
            }, 100)
        }, p.closeChooseEndDateBox = function () {
            B(), A(), setTimeout(function () {
                D()
            }, 100)
        }, p.choosePaymentName = function (a) {
            p.showChoosePaymentBox = !1, A(), p.showPaymentName = a.name, p.searchPayment = a.value, E()
        }, p.openErrChangeBox = function (a) {
            B(), p.showErrChangeBox = !0, p.errRecordId = a
        }, p.chooseErrState = function (a) {
            "add" == a ? p.errState = "add" : p.errState = "reduce"
        }, p.changeErrRemark = function () {
            if (!p.errPrice) return p.promptERR = !0, void(p.wordERR = "请填写纠错金额");
            if (!p.errRemark) return p.promptERR = !0, void(p.wordERR = "请填写纠错备注");
            var a = {
                _record: p.errRecordId,
                state: p.errState,
                cost: parseFloat(p.errPrice),
                remark: p.errRemark
            };
            i.create({}, a, function () {
                E()
            }, function () {})
        }, p.closePrompt = function () {
            p.promptOK = !1, p.promptERR = !1, p.promptWARN = !1, p.searchWorkerIdArr = [], p.searchPayment = ""
        };
        var D = function () {
            p.promptWARN = !0, p.wordWARN = "统计中";
            var a = {
                all: "all",
                state: "shop",
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            };
            p.dateName = "", p.dateName += p.startDate.getFullYear() + "年", p.dateName += p.startDate.getMonth() + 1 > 9 ? p.startDate.getMonth() + 1 + "月" : "0" + (p.startDate.getMonth() + 1) + "月", p.dateName += p.startDate.getDate() > 9 ? p.startDate.getDate() + "日-" : "0" + p.startDate.getDate() + "日-", p.dateName += p.endDate.getFullYear() + "年", p.dateName += p.endDate.getMonth() + 1 > 9 ? p.endDate.getMonth() + 1 + "月" : "0" + (p.endDate.getMonth() + 1) + "月", p.dateName += p.endDate.getDate() > 9 ? p.endDate.getDate() + "日" : "0" + p.endDate.getDate() + "日";
            var b = [];
            p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && (p.searchVenueIdArr.push(a._id), b.push(a))
            }), p.venueName = "";
            for (var c = 0; c < b.length; c++) p.venueName += (0 == c ? "" : "/") + b[c].name;
            p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: p.searchVenueIdArr
            })), p.searchWorkerIdArr = [], _.each(p.workers, function (a) {
                "manyChoose_imageYes" == a.image && p.searchWorkerIdArr.push(a._id)
            }), p.searchWorkerIdArr.length > 0 && (a = _.merge(a, {
                workers: p.searchWorkerIdArr
            })), o.shop(a, function (a) {
                p.records = a.data.statistic, p.promptWARN = !1
            }, function () {})
        };
        p["export"] = function (a) {
            var b;
            b = a ? p.dateName + p.workerName + "的" + p.venueName + "的小卖部消费明细表" : p.dateName + p.venueName + "的小卖部消费汇总表", setTimeout(function () {
                execl1(a ? a : "alltable", b)
            }, 100)
        }, p.initCondition = function (a, b) {
            a && (p.searchWorkerIdArr = [a]), E(b)
        };
        var E = function (a) {
            p.workerName = a;
            var b = {
                state: "shop",
                all: "all"
            };
            p.startDate && p.endDate && (b = _.merge(b, {
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            })), p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && p.searchVenueIdArr.push(a._id)
            }), p.searchVenueIdArr.length > 0 && (b = _.merge(b, {
                venues: p.searchVenueIdArr
            })), p.searchWorkerIdArr.length > 0 && (b = _.merge(b, {
                workers: p.searchWorkerIdArr
            })), p.searchPayment && (b = _.merge(b, {
                payments: [p.searchPayment]
            })), i.index(b, function (a) {
                if (p.recordsDetail = a.data.records, !(p.recordsDetail.length > 0)) return p.promptERR = !0, void(p.wordERR = "暂无记录");
                p.showDetail = !0, p.shopDetails = [];
                var b = 1,
                    c = 0,
                    d = 0,
                    e = 0,
                    f = 0;
                _.each(p.recordsDetail, function (a) {
                    switch (a.index = b, b++, a.status) {
                    case "refundShopProduct":
                        a.cost = -1 * a.cost, a.quantity = -1 * a.quantity
                    }
                    a.state && (a.quantity = 0), "reduce" == a.state && (a.cost = -1 * a.cost);
                    var c = _.findWhere(p.shopDetails, {
                        _id: a._shopProduct
                    });
                    if (c) c.quantity += a.quantity, c.subTotal += a.cost, "member" == a.payment ? c.member = C((100 * c.member + 100 * a.cost) / 100) : c.noMember = C((100 * c.noMember + 100 * a.cost) / 100);
                    else {
                        var d = {
                            _id: a._shopProduct,
                            name: a.shopProductName,
                            member: 0,
                            noMember: 0,
                            quantity: a.quantity,
                            subTotal: a.cost
                        };
                        "member" == a.payment ? d.member = C((100 * d.member + 100 * a.cost) / 100) : d.noMember = C((100 * d.noMember + 100 * a.cost) / 100), p.shopDetails.push(d)
                    }
                }), _.each(p.shopDetails, function (a) {
                    c += a.quantity, d = C((100 * a.subTotal + 100 * d) / 100), e = C((100 * e + 100 * a.member) / 100), f = C((100 * f + 100 * a.noMember) / 100)
                }), p.shopDetails.push({
                    name: "合计",
                    quantity: c,
                    subTotal: d,
                    member: e,
                    noMember: f
                })
            }, function () {})
        };
        p.close = function () {
            B(), p.searchWorkerIdArr = [], p.searchPayment = "", A()
        }, y()
    }
    angular.module("fieldApp").controller("FacFinanceShopCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Record", "Item", "Venue", "Member", "Product", "Cardrecords", "Finance"]
}(),
function () {
    "use strict";

    function a(a) {
        a.state("fac-finance-cashall", {
            params: {
                value: "finance"
            },
            url: "/fac/finance/cashall",
            templateUrl: "app/financemanager/finance/cashall/finance-cashall.html",
            controller: "FacFinanceCashallCtrl",
            controllerAs: "facFinanceCashallCtrl"
        }).state("fac-finance-field", {
            params: {
                value: "finance"
            },
            url: "/fac/finance/field",
            templateUrl: "app/financemanager/finance/field/finance-field.html",
            controller: "FacFinanceFieldCtrl",
            controllerAs: "facFinanceFieldCtrl"
        }).state("fac-finance-shop", {
            params: {
                value: "finance"
            },
            url: "/fac/finance/shop",
            templateUrl: "app/financemanager/finance/shop/finance-shop.html",
            controller: "FacFinanceShopCtrl",
            controllerAs: "facFinanceShopCtrl"
        }).state("fac-finance-prep", {
            params: {
                value: "finance"
            },
            url: "/fac/finance/prep",
            templateUrl: "app/financemanager/finance/preporder/finance-preporder.html",
            controller: "FacFinancePrepCtrl",
            controllerAs: "facFinancePrepCtrl"
        }).state("fac-setting-person", {
            params: {
                value: "setting",
                sencond: "person"
            },
            url: "/fac/setting/person",
            templateUrl: "app/financemanager/setting/setting-person.html",
            controller: "FacSettingPersonCtrl",
            controllerAs: "facSettingPersonCtrl"
        })
    }
    angular.module("fieldApp").config(a), a.$inject = ["$stateProvider"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this;
        j.close = function () {
            j.succeedFlag = !1, j.errorFlag = !1
        }, j.save = function () {
            var a = {
                oldPassword: j.oldPassword,
                newPassword: j.newPassword
            };
            e.updatePassword(a, function (a) {
                j.oldPassword = "", j.newPassword = "", j.succeedFlag = !0, i(function () {
                    j.succeedFlag = !1
                }, 1e3)
            }, function (a) {
                j.errorFlag = !0, i(function () {
                    j.errorFlag = !1
                }, 1e3)
            })
        }, j.judge = function () {
            j.oldPassword && j.newPassword ? j.saveFlag = !0 : j.saveFlag = !1
        };
        var k = function () {
            e.get({}, function (a) {
                j.account = a.data.user.account
            }, function () {})
        };
        j.logout = d.logout;
        var l = function () {
            k()
        };
        l()
    }
    angular.module("fieldApp").controller("FacSettingPersonCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "$timeout"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e) {
        self.state = c.state;
        var f = {},
            g = navigator.platform;
        f.win = 0 == g.indexOf("Win"), f.mac = 0 == g.indexOf("Mac"), f.x11 = "X11" == g || 0 == g.indexOf("Linux");
        var h = function () {
            e.isAdmin() ? (console.log("admin"), d.go("adm")) : e.isOrganization() ? (console.log("org"), d.go("org-field-book.once")) : e.isFieldManager() ? (console.log("fieldManager"), d.go("fm-field-book.once")) : e.isNormalCheckStand() ? (console.log("normalCheckSatnd"), d.go("csd-field-book.once")) : e.isSwimCheckStand() ? (console.log("swimCheckSatnd"), d.go("org-index")) : e.isFieldWorker() ? (console.log("fieldWorker"), d.go("fwk-field-open")) : e.isCardManager() ? (console.log("cardManager"), d.go("crd-member")) : e.isFinanceManager() ? (console.log("financeManager"), d.go("fac-finance-cashall")) : (console.log("未登录"), d.go("login"))
        };
        !e.isLoggedIn() && e.getToken() ? e.setCurrentUser(function (a) {
            h()
        }) : h()
    }
    angular.module("fieldApp").controller("MainCtrl", a), a.$inject = ["$scope", "$http", "$stateParams", "$state", "Auth"]
}(),
function () {
    "use strict";

    function a(a) {
        a.state("main", {
            url: "/",
            templateUrl: "app/main/main.html",
            controller: "MainCtrl"
        })
    }
    angular.module("fieldApp").config(a), a.$inject = ["$stateProvider"]
}(),
function () {
    "use strict";

    function a(a) {
        function b() {
            return a.get("/api/things")
        }

        function c(b) {
            return a.post("/api/things", b)
        }

        function d(b) {
            return a["delete"]("/api/things/" + b)
        }
        this.getThings = b, this.addThing = c, this.deleteThing = d
    }
    angular.module("fieldApp").service("MainSvc", a), a.$inject = ["$http"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this,
            l = function (a) {
                return a = new Date(1e3 * parseInt(a / 1e3)), a.setHours(0), a.setMinutes(0), a.setSeconds(0), a
            };
        k.userName = "操作人员", k.startDate = l((new Date).setDate(1)), k.endDate = new Date, k.close = function () {
            k.cardFlag = !1, k.reFlag = !1, k.objectFlag = !1, k.num = "", k.promptERR = !1
        }, k.page = 1, k.itemsPerPage = 10, k.pagination = {
            page: k.page,
            itemsPerPage: k.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, k.cardFunction = function (a) {
            switch (k.cardFlag = !0, k.st = a, a) {
            case "enter":
                k.title = "卡入库", k.state = "add", k.wordOK = "入库成功";
                break;
            case "send":
                k.title = "卡发放", k.state = "pickout", k.object = "发放对象", k.objectFlag = !0, k.wordOK = "卡发放成功";
                break;
            case "re":
                k.title = "卡回收", k.state = "recovery", k.object = "回收对象", k.objectFlag = !0, k.wordOK = "卡回收成功";
                break;
            case "bad":
                k.title = "卡报销", k.state = "cancel", k.wordOK = "卡报销成功"
            }
        }, k.finish = function () {
            switch (k.st) {
            case "enter":
                k.describtion = "卡入库" + k.num + "张";
                break;
            case "send":
                k.title = "卡发放", k.describtion = "向" + k.objectName + "发放卡" + k.num + "张";
                break;
            case "re":
                k.title = "卡回收", k.describtion = "向" + k.objectName + "回收卡" + k.num + "张";
                break;
            case "bad":
                k.title = "卡报销", k.describtion = "卡报销" + k.num + "张"
            }
            var a = {
                status: k.state,
                editNum: k.num,
                describtion: k.describtion,
                _toUser: k._id
            };
            i.create(a, function (a) {
                k.getRecord(), k.close(), k.promptOK = !0, j(function () {
                    k.promptOK = !1
                }, 1e3)
            }, function (a) {
                k.promptERR = !0, k.wordERR = a.data.data
            })
        }, k.chooseObject = function (a) {
            k.objectName = a.name, k.chooseObjectFlag = !1, k._id = a._id
        }, k.pageChanged = function () {
            k.getRecord()
        }, k.getRecord = function () {
            j(function () {
                k.showChooseEndDateBox = !1, k.showChooseStartDateBox = !1;
                var a = {
                    page: k.pagination.page,
                    itemsPerPage: k.pagination.itemsPerPage,
                    workers: k.urr,
                    startDate: k.startDate.getTime(),
                    endDate: k.endDate.getTime()
                };
                i.index(a, function (a) {
                    k.records = a.data.cardRecords, k.records.length > 0 ? k.number = k.records[0].total : k.number = 0;
                    var b = a.data.count;
                    k.pagination.totalItems = b, k.pagination.numPages = b / k.itemsPerPage
                }, function (a) {})
            }, 100)
        }, k.getSinRecord = function (a) {
            k.userName = a.name, k.rr = [], a._id ? k.rr.push(a._id) : k.rr = k.urr;
            var b = {
                page: k.pagination.page,
                itemsPerPage: k.pagination.itemsPerPage,
                workers: k.rr
            };
            i.index(b, function (a) {
                k.records = a.data.cardRecords, k.records.length > 0 ? k.number = k.records[0].total : k.number = 0, k.userFlag = !1;
                var b = a.data.count;
                k.pagination.totalItems = b, k.pagination.numPages = b / k.itemsPerPage
            }, function (a) {})
        };
        var m = function () {
                var a = {
                    role: "checkStand"
                };
                e.index(a, function (a) {
                    k.users = a.data.users, k.brr = [];
                    var b = {
                        name: "全部人员",
                        _id: ""
                    };
                    k.brr.push(b), k.urr = [], _.each(k.users, function (a) {
                        k.urr.push(a._id), k.brr.push(a)
                    }), k.getRecord()
                }, function () {})
            },
            n = function () {
                m()
            };
        n()
    }
    angular.module("fieldApp").controller("OrgBankaCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Cardrecords", "$timeout"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this;
        j.close = function () {}, j.page = 1, j.itemsPerPage = 10, j.pagination = {
            page: j.page,
            itemsPerPage: j.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, j.pageChanged = function () {
            k()
        };
        var k = function () {
                var a = {
                    role: "checkStand",
                    page: j.pagination.page,
                    itemsPerPage: j.pagination.itemsPerPage
                };
                e.index(a, function (a) {
                    j.users = a.data.users, j.users.length > 0 && (j.objectName = j.users[0].name);
                    var b = a.data.count;
                    j.pagination.totalItems = b, j.pagination.numPages = b / j.itemsPerPage
                }, function () {})
            },
            l = function () {
                k()
            };
        l()
    }
    angular.module("fieldApp").controller("OrgEntityCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Cardrecords"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.close = function () {
            k.cardFlag = !1, k.reFlag = !1, k.objectFlag = !1, k.num = "", k.promptERR = !1
        }, k.page = 1, k.itemsPerPage = 10, k.pagination = {
            page: k.page,
            itemsPerPage: k.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, k.cardFunction = function (a) {
            switch (k.cardFlag = !0, k.st = a, a) {
            case "enter":
                k.title = "卡入库", k.state = "add", k.wordOK = "入库成功";
                break;
            case "send":
                k.title = "卡发放", k.state = "pickout", k.object = "发放对象", k.objectFlag = !0, k.wordOK = "卡发放成功";
                break;
            case "re":
                k.title = "卡回收", k.state = "recovery", k.object = "回收对象", k.objectFlag = !0, k.wordOK = "卡回收成功";
                break;
            case "bad":
                k.title = "卡报销", k.state = "cancel", k.wordOK = "卡报销成功"
            }
        }, k.finish = function () {
            switch (k.st) {
            case "enter":
                k.describtion = "卡入库" + k.num + "张";
                break;
            case "send":
                k.title = "卡发放", k.describtion = "向" + k.objectName + "发放卡" + k.num + "张";
                break;
            case "re":
                k.title = "卡回收", k.describtion = "向" + k.objectName + "回收卡" + k.num + "张";
                break;
            case "bad":
                k.title = "卡报销", k.describtion = "卡报销" + k.num + "张"
            }
            var a = {
                status: k.state,
                editNum: k.num,
                describtion: k.describtion,
                _toUser: k._id
            };
            i.create(a, function (a) {
                m(), k.close(), k.promptOK = !0, j(function () {
                    k.promptOK = !1
                }, 1e3)
            }, function (a) {
                k.promptERR = !0, k.wordERR = a.data.data
            })
        }, k.chooseObject = function (a) {
            k.objectName = a.name, k.chooseObjectFlag = !1, k._id = a._id
        }, k.pageChanged = function () {
            m()
        };
        var l = function () {
                var a = {
                    role: "checkStand"
                };
                e.index(a, function (a) {
                    k.users = a.data.users, k.users.length > 0 && (k.objectName = k.users[0].name, k._id = k.users[0]._id)
                }, function () {})
            },
            m = function () {
                var a = {
                    page: k.pagination.page,
                    itemsPerPage: k.pagination.itemsPerPage,
                    workers: k.urr
                };
                i.index(a, function (a) {
                    k.records = a.data.cardRecords, k.records.length > 0 ? k.number = k.records[0].total : k.number = 0;
                    var b = a.data.count;
                    k.pagination.totalItems = b, k.pagination.numPages = b / k.itemsPerPage
                }, function (a) {})
            },
            n = function () {
                var a = {
                    role: "cardManager"
                };
                e.index(a, function (a) {
                    k.users = a.data.users, k.urr = [], _.each(k.users, function (a) {
                        k.urr.push(a._id)
                    }), m()
                }, function () {})
            },
            o = function () {
                n(), l()
            };
        o()
    }
    angular.module("fieldApp").controller("OrgCardCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Cardrecords", "$timeout"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this,
            l = function (a) {
                return a = new Date(1e3 * parseInt(a / 1e3)), a.setHours(0), a.setMinutes(0), a.setSeconds(0), a
            };
        k.startDate = l((new Date).setDate(1)), k.endDate = new Date, k.page = 1, k.itemsPerPage = 10, k.pagination = {
            page: k.page,
            itemsPerPage: k.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, k.pageChanged = function () {
            k.getRecord()
        }, k.getRecord = function () {
            j(function () {
                k.showChooseEndDateBox = !1, k.showChooseStartDateBox = !1;
                var a = {
                    page: k.pagination.page,
                    itemsPerPage: k.pagination.itemsPerPage,
                    statuses: ["chargeCard"],
                    name: k.searchName
                };
                i.index(a, function (a) {
                    k.records = a.data.records;
                    var b = a.data.count;
                    k.pagination.totalItems = b, k.pagination.numPages = b / k.itemsPerPage
                }, function (a) {})
            }, 100)
        };
        var m = function () {
            k.getRecord()
        };
        m()
    }
    angular.module("fieldApp").controller("OrgChongzhiCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Record", "$timeout"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n) {
        var o = this;
        o.titleState = f.params.state || "normal", o.page = 1, o.itemsPerPage = 10, o.pagination = {
            page: o.page,
            itemsPerPage: o.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, o.buyProduct = [], o.total = 0, o.showCodeBox = !0, o._member = "", o.wxFlag = !0, o.eMembers = [], o.type = "会员类型", o.close = function () {
            o.payFlag = !1, o.price = "", o.noFlag = !1
        }, o.sure = function () {
            if (!o.price) return o.promptERR = !0, void(o.wordERR = "请把数据填充完整");
            for (var a = [], b = 0; b < o.members.length; b++)
                if (o.members[b].select) {
                    var c = {
                        name: o.members[b].name,
                        tel: o.members[b].tel,
                        total: 1 * o.price
                    };
                    a.push(c)
                }
            var c = {
                docs: a
            };
            l.create(c, function (a) {
                o.close(), o.getMember(), o.promptOK = !0, n(function () {
                    o.promptOK = !1
                }, 1e3), o.wordOK = "充值成功", o.selectFlag = !1
            }, function (a) {
                o.promptERR = !0, o.deleteFlag = !1, (a.data.code = 409) ? o.wordERR = "数据有错误，请检查" : o.wordERR = a.data.data
            })
        }, o.changeTitle = function (a) {
            switch (o.titleState = "", o.pagination = {
                page: o.page,
                itemsPerPage: o.itemsPerPage,
                maxSize: 5,
                numPages: null,
                totalItems: null
            }, a) {
            case "normal":
                o.titleState = "normal", f.go("org-dummy.normal", {
                    state: "normal"
                }), o.getMember();
                break;
            case "enter":
                o.titleState = "enter", f.go("org-dummy.enter", {
                    state: "enter"
                });
                break;
            default:
                o.titleState = "record", f.go("org-dummy.record", {
                    state: "record"
                }), p()
            }
            q()
        }, o.pageChanged = function () {
            "normal" == o.titleState ? o.getMember() : p()
        }, o.select = function (a) {
            for (var b = 0; b < o.members.length; b++) o.members[b].select = a;
            o.selectFlag = a, o.applyFlag = a
        }, o.selectE = function (a) {
            for (var b = 0; b < o.eMembers.length; b++) o.eMembers[b].select = a;
            o.selectFlagE = a, o.applyFlagE = a
        }, o.changeSelect = function (a) {
            a.select = !a.select, o.applyFlag = !1;
            for (var b = 0; b < o.members.length; b++) o.members[b].select && (o.applyFlag = !0)
        }, o.changeSelectE = function (a) {
            a.select = !a.select, o.applyFlagE = !1;
            for (var b = 0; b < o.eMembers.length; b++) o.eMembers[b].select && (o.applyFlagE = !0)
        }, o.getMemberCard = function () {
            o.getMember()
        }, o.getMember = function (a) {
            a && (o.type = a), "全部" == a && (a = "");
            var b = {
                page: o.pagination.page,
                itemsPerPage: o.pagination.itemsPerPage,
                mix: o.searchName,
                type: a
            };
            i.index(b, function (a) {
                if (o.members = a.data.members, o.member) {
                    o.members.push(o.member);
                    var b = 1
                } else var b = 0;
                for (var c = 0; c < o.members.length; c++) o.members[c].cards.length > 0 ? o.members[c].p = o.members[c].cards[0].total : o.members[c].p = "0";
                o.downFlag = !1;
                var d = a.data.count + b;
                o.pagination.totalItems = d, o.pagination.numPages = d / o.itemsPerPage
            })
        }, o.changePrice = function (a) {
            o.tel = a.tel, o.payFlag = !0
        }, o.edit = function () {
            if (!o.cp) return o.promptERR = !0, void(o.wordERR = "请把数据填充完整");
            o.t = 0;
            for (var a = 0; a < o.eMembers.length; a++) o.eMembers[a].tel == o.tel && (o.eMembers[a].total = parseInt(o.cp), o.payFlag = !1, 1 == o.promptOK, n(function () {
                o.promptOK = !1;
            }, 1e3), o.wordOK = "修改成功"), o.t = o.t + o.eMembers[a].total
        }, o.toastPay = function () {
            return o.eMembers.length < 1 ? (o.promptWARN = !0, void(o.wordWARN = "请导入数据")) : (o.deleteFlag = !0, o.pFlag = !0, o.pWord = "是否确认充值？", void 0)
        }, o.judgePay = function () {
            for (var a = [], b = 0; b < o.eMembers.length; b++)
                if (o.eMembers[b].select) {
                    var c = {
                        name: o.eMembers[b].name,
                        tel: o.eMembers[b].tel,
                        total: o.eMembers[b].total
                    };
                    a.push(c)
                }
            var c = {
                docs: a
            };
            l.create(c, function (a) {
                o.eMembers = [], _.each(a.data.failArr, function (a) {
                    a.flag = !0, o.eMembers.push(a)
                }), o.eMembers.length > 0 ? o.oneF = !0 : o.oneF = !1, _.each(a.data.successArr, function (a) {
                    a.flag = !1, o.eMembers.push(a)
                }), o.close(), o.promptOK = !0, n(function () {
                    o.promptOK = !1
                }, 1e3), o.oneF ? o.wordOK = "部分账号充值成功" : o.wordOK = "充值成功", o.selectFlag = !1, o.selectFlagE = !1, o.deleteFlag = !1, o.t = 0;
                for (var b = 0; b < o.eMembers.length; b++) o.eMembers[b].select = !1, o.t = o.t + o.eMembers[b].total
            }, function (a) {
                o.promptERR = !0, o.deleteFlag = !1, (a.data.code = 409) ? o.wordERR = "数据有错误，请检查" : o.wordERR = a.data.data
            })
        }, o["delete"] = function (a) {
            a ? o.eMembers = o.timeRR : o.eMembers = o.eMembers.concat(o.timeRR), o.deleteFlag = !1
        }, o.uploadExcel = function () {
            var a = Math.pow(2, 32),
                b = 1;
            if (o.execlFile) {
                var c = o.execlFile,
                    d = (new Date).getTime(),
                    e = d.toString(),
                    f = (Math.floor(Math.random() * (a - b)) + b).toString(),
                    g = f.toString(),
                    h = e + "_" + g + "_" + c.name.replace(/[^0-9a-z\.]+/gi, "");
                m.upload({
                    method: "POST",
                    url: "api/upload",
                    data: {
                        file: c,
                        filename: h
                    }
                }).then(function (a) {
                    if (console.log("Success " + a.config.data.file.name + "uploaded. Response: " + a.data), o.eMembers.length > 0) return o.timeRR = a.data.data, o.deleteFlag = !0, o.pFlag = !1, void(o.pWord = "是否删除原来的列表内容?");
                    o.eMembers = a.data.data, o.t = 0;
                    for (var b = 0; b < o.eMembers.length; b++) o.t = o.t + o.eMembers[b].total
                }, function (a) {
                    console.log("Error status: " + a.status), o.promptERR = !0, o.wordERR = "表单格式有错误，请上传正确的表单"
                }, function (a) {
                    var b = parseInt(100 * a.loaded / a.total);
                    console.log("progress: " + b + "% " + a.config.data.file.name)
                })
            }
        }, o.cancel = function (a) {
            o.noFlag = !0, o.rId = a._id
        }, o.no = function () {
            var a = {
                id: o.rId
            };
            l.cancel(a, function (a) {
                o.promptOK = !0, o.noFlag = !1, n(function () {
                    o.promptOK = !1
                }, 1e3), o.wordOK = "撤销成功", p()
            })
        };
        var p = function () {
            var a = {
                page: o.pagination.page,
                itemsPerPage: o.pagination.itemsPerPage
            };
            l.index(a, function (a) {
                o.records = a.data.records;
                for (var b = 0; b < o.records.length; b++) {
                    for (var c = "", d = 0, e = 0; e < o.records[b].detail.length; e++) d += o.records[b].detail[e].total, c = 0 == e ? o.records[b].detail[e].name + "(" + o.records[b].detail[e].total + ")" : c + "," + o.records[b].detail[e].name + "(" + o.records[b].detail[e].total + ")";
                    o.records[b].name = c, o.records[b].p = d
                }
                var f = a.data.count;
                o.pagination.totalItems = f, o.pagination.numPages = f / o.itemsPerPage
            })
        };
        o.types = [{
            name: "全部"
        }, {
            name: "会员卡"
        }, {
            name: "外来卡"
        }, {
            name: "员工卡"
        }, {
            name: "领导金卡"
        }, {
            name: "保安卡"
        }];
        var q = function () {
            "normal" == o.titleState ? o.getMember() : p()
        };
        q()
    }
    angular.module("fieldApp").controller("OrgDummyCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "ShopProduct", "Record", "Virrecord", "Upload", "$timeout"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
        var q = this;
        q.titleState = f.params.state || "once", q.searchVenueId, q.searchItemId, q.searchPayment;
        var r = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            },
            s = function (a) {
                return a = new Date(1e3 * parseInt(a / 1e3)), a.setHours(0), a.setMinutes(0), a.setSeconds(0), a
            },
            t = function () {
                q.showChooseVenueBox = !1, q.showChooseItemBox = !1, q.showChooseStartDateBox = !1, q.showChooseEndDateBox = !1, q.showBasicInfoBox = !1, q.showchooseOnceTypeBox = !1, q.deleteFlag = !1, q.showLongRefundBox = !1, q.showInfoBox = !1, q.showPaymentBox = !1, q.showChooseFieldBox = !1, q.showRefundPrice = !1, q.promptDELETE = !1, q.showChoosePageBox = !1
            },
            u = function () {
                q.showVenueName = "选择场馆", q.showItemName = "选择项目", q.showFieldName = "选择场地", q.showPageName = "10", q.searchVenueId = "", q.searchItemId = "", q.searchFieldId = "", q.searchPageValue = "", q.cancelOrderIdArr = [], q.refundPrice = 0, q.sendNum = "", q.allImage = "manyChoose_imageNo2", q.nowImage = "manyChoose_imageNo2", q.refundTypes = [{
                    name: "按退款规则",
                    image: "singleChoose_imageYes"
                }, {
                    name: "自定义退款金额",
                    image: "singleChoose_imageNo"
                }], q.refundType = "按退款规则", q.states = [{
                    name: "全部",
                    value: "all"
                }, {
                    name: "未消费",
                    value: "noOpen"
                }, {
                    name: "已消费",
                    value: "hasOpen"
                }, {
                    name: "正常撤销",
                    value: "hasCancel"
                }, {
                    name: "违约撤销",
                    value: "noPromiseCancel"
                }, {
                    name: "售后撤销",
                    value: "afterSaleCancel"
                }], q.showStateName = "订单状态", q.searchStateValue = "", q.froms = [{
                    name: "全部",
                    value: "all"
                }, {
                    name: "普通(柜员)",
                    value: "once_worker"
                }, {
                    name: "普通(微信)",
                    value: "once_wx"
                }, {
                    name: "长包预订",
                    value: "long"
                }, {
                    name: "培训预订",
                    value: "train"
                }], q.showFromName = "订单来源", q.searchFromValue = "", q.sortByKey = "timeUp", q.pageArr = [{
                    name: "10",
                    value: 10
                }, {
                    name: "20",
                    value: 20
                }, {
                    name: "50",
                    value: 50
                }, {
                    name: "100",
                    value: 100
                }], q.searchPageValue = 10, setTimeout(function () {
                    q.startDate = new Date(new Date), q.endDate = new Date(new Date)
                }, 100)
            },
            v = function () {
                q.page = 1, q.itemsPerPage = q.searchPageValue ? q.searchPageValue : 10, q.pagination = {
                    page: q.page,
                    itemsPerPage: q.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            };
        q.chooseObject = function (a) {
            q.objectName = a.name, q.chooseObjectFlag = !1, q._user = a._id
        }, q.send = function () {
            var b = {
                _user: q._user,
                _orderlist: q.cancelOrderId
            };
            p.send(b, function (b) {
                q.sendToFlag = !1, q.promptOK = !0, q.wordOK = "发送成功", setTimeout(function () {
                    a.$apply(function () {
                        q.promptOK = !1
                    })
                }, 1e3)
            }, function (a) {
                q.promptERR = !0, q.wordERR = a.data.data
            })
        };
        var w = function () {
                var a = {
                    role: "fieldManager"
                };
                e.index(a, function (a) {
                    q.users = a.data.users, q.users.length > 0 && (q.objectName = q.users[0].name, q._user = q.users[0]._id)
                }, function () {})
            },
            x = function () {
                e.get({}, function (a) {
                    "organization" == a.data.user.role ? q.organization = a.data.user : e.getOrgInfo({
                        id: a.data.user._organization
                    }, function (a) {
                        q.organization = a.data.user
                    }, function () {})
                }, function () {})
            },
            y = function () {
                u(), v(), z(), A(), C(), w(), x()
            },
            z = function () {
                m.index({
                    isUsed: !0
                }, function (a) {
                    q.items = [{
                        name: "全部"
                    }].concat(a.data.items)
                }, function () {})
            },
            A = function (a) {
                l.index({
                    isUsed: !0
                }, function (a) {
                    q.venues = [{
                        name: "全部"
                    }].concat(a.data.venues)
                }, function () {})
            },
            B = function () {
                var a = {
                    _venue: q.searchVenueId,
                    _item: q.searchItemId,
                    sortValue: "asc"
                };
                j.index(a, function (a) {
                    q.fields = [{
                        name: "全部"
                    }].concat(a.data.fields)
                }, function () {})
            };
        q.sortBy = function (a) {
            q.sortByKey = a, C()
        };
        var C = function () {
                var a = {
                    page: q.pagination.page,
                    itemsPerPage: q.pagination.itemsPerPage,
                    isCancel: "all"
                };
                q.searchStateValue && (a = _.merge(a, {
                    status: q.searchStateValue
                })), q.searchStateSpeValue && (a = _.merge(a, {
                    statusSpe: q.searchStateSpeValue
                })), q.searchFromValue && (a = _.merge(a, {
                    from: q.searchFromValue
                })), "timeUp" == q.sortByKey && (a = _.merge(a, {
                    sort: "startDate",
                    sortValue: "asc"
                })), "timeDown" == q.sortByKey && (a = _.merge(a, {
                    sort: "startDate"
                })), "orderUp" == q.sortByKey && (a = _.merge(a, {
                    sort: "createDate",
                    sortValue: "asc"
                })), "orderDown" == q.sortByKey && (a = _.merge(a, {
                    sort: "createDate"
                })), a = q.startDate ? _.merge(a, {
                    startDate: q.startDate.getTime()
                }) : _.merge(a, {
                    startDate: (new Date).getTime()
                }), q.endDate && "结束时间" != q.endDate && (a = _.merge(a, {
                    endDate: q.endDate.getTime()
                })), q.searchOrderName && (a = _.merge(a, {
                    mix: q.searchOrderName
                })), q.searchOrderRemark && (a = _.merge(a, {
                    remark: q.searchOrderRemark
                })), q.searchVenueId && (a = _.merge(a, {
                    _venue: q.searchVenueId
                })), q.searchItemId && (a = _.merge(a, {
                    _item: q.searchItemId
                })), q.searchFieldId && (a = _.merge(a, {
                    _field: q.searchFieldId
                })), k.index(a, function (a) {
                    q.orders = a.data.orderLists;
                    var b = s((new Date).getTime());
                    _.each(q.orders, function (a) {
                        if (a._worker) {
                            var c = /^\(长包预订\).*/,
                                d = /^\(培训预订\).*/,
                                e = /^201.*/;
                            c.test(a.description) && (a.form = "长包预订"), d.test(a.description) && (a.form = "培训预订"), e.test(a.description) && (a.form = "普通(柜员)")
                        } else a.form = "普通(微信)";
                        a.image = "manyChoose_imageNo2", new Date(a.startDate).getTime() < b.getTime() ? (a.refundState = "cant", a.state = "未消费", a.openDate || (a.penalty = r(a.cost - a.refund))) : (a.refundState = "can", a.state = "未消费", a.isCancel && (a.penalty = r(a.cost - a.refund))), 0 != a.cost ? a.sendFlag = !0 : a.sendFlag = !1, (new Date).getTime() >= new Date(a.startDate).getTime() - 24e5 && (new Date).getTime() < new Date(a.endDate).getTime() && (a.openState = "canOpen"), (a.openDate || !a.openDate && !a.isCancel && new Date(a.endDate).getTime() < Date.now()) && (a.state = "已消费"), a.isCancel && (a.state = "已撤销")
                    });
                    var c = a.data.count;
                    q.pagination.totalItems = c, q.pagination.numPages = c / q.itemsPerPage
                }, function () {})
            },
            D = function (a, b) {
                var c = {
                    isUsed: !0,
                    _item: a
                };
                l.index(c, function (a) {
                    var c = [{
                        name: "全部"
                    }].concat(a.data.venues);
                    b(c)
                }, function () {})
            },
            E = function (a, b) {
                var c = [{
                    name: "全部"
                }].concat(a.items);
                b(c)
            },
            F = function () {
                q.searchItemId && !q.searchVenueId ? q.whatFirst = "item" : !q.searchItemId && q.searchVenueId ? q.whatFirst = "venue" : q.searchItemId || q.searchVenueId || (q.whatFirst = "")
            };
        q.chooseItemName = function (a) {
            t(), q.showItemName = a.name, q.searchItemId = a._id, q.times = [], F(), "item" == q.whatFirst ? (q.searchVenueId = "", q.showVenueName = "选择场馆", D(q.searchItemId, function (a) {
                q.venues = a
            })) : A(), B(), v(), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2", C()
        }, q.chooseVenueName = function (a) {
            t(), q.showVenueName = a.name, q.searchVenueId = a._id, q.times = [], F(), "venue" == q.whatFirst ? (q.searchItemId = "", q.showItemName = "选择项目", E(a, function (a) {
                q.items = a
            })) : z(), B(), v(), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2", C()
        }, q.chooseFieldName = function (a) {
            t(), q.showFieldName = a.name, q.searchFieldId = a._id, v(), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2", C()
        }, q.choosePageName = function (a) {
            t(), q.showPageName = a.name, q.searchPageValue = a.value, v(), C()
        }, q.chooseStateName = function (a) {
            q.showChooseStateBox = !1, q.showStateName = a.name, q.searchStateValue = a.value, "all" == a.value && (q.searchStateValue = ""), C()
        }, q.chooseFromName = function (a) {
            v(), q.showChooseFromBox = !1, q.showFromName = a.name, q.searchFromValue = a.value, "all" == a.value && (q.searchFromValue = ""), C()
        }, q.chooseNowOrderList = function () {
            "manyChoose_imageNo2" == q.nowImage ? (q.nowImage = "manyChoose_imageYes2", q.searchStateSpeValue = "nowCanOpen", q.startDate = new Date, q.endDate = new Date) : (q.searchStateSpeValue = "", q.nowImage = "manyChoose_imageNo2", q.searchStateValue = "all"), C()
        }, q.closeChooseStartDateBox = function () {
            q.showChooseStartDateBox = !1, setTimeout(function () {
                v(), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2", C()
            }, 100)
        }, q.closeChooseEndDateBox = function () {
            q.showChooseEndDateBox = !1, setTimeout(function () {
                v(), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2", C()
            }, 100)
        }, q.searchOrder = function () {
            v(), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2", C()
        }, q.page = 1, q.itemsPerPage = 10, q.pagination = {
            page: q.page,
            itemsPerPage: q.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, q.close = function () {
            t(), u()
        }, q.closePrompt = function () {
            q.promptERR = !1, q.promptOK = !1, q.promptWARN = !1, q.promptDELETE = !1
        }, q.pageChanged = function () {
            C(), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2"
        }, q.openCancelOnce = function (a) {
            q.cancelOrderId = a._id, q.showBasicInfoBox = !0, q.sendFlag = a.sendFlag
        }, q.query = function (a) {
            q._id = a._id;
            var b = {
                state: "query"
            };
            k.cancelOnce({
                controller: q._id
            }, b, function (b) {
                q.rPriceFlag = !0, b.data.rule ? "before" == b.data.rule.status ? q.rPrice = a.cost * (1 - 1 * b.data.rule.costPrecent) : q.rPrice = a.cost * (1 - 1 * b.data.rule.costPrecent) : q.rPrice = a.cost, q.refundFlag = !0
            }, function (a) {
                q.rPriceFlag = !1
            })
        }, q.chooseRefundType = function (a) {
            _.each(q.refundTypes, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", "自定义退款金额" == a.name ? (q.refundType = "自定义退款金额", q.showRefundPrice = !0) : (q.refundType = "按退款规则", q.showRefundPrice = !1)
        }, q.cancelOnce = function () {
            var b = {};
            if ("自定义退款金额" == q.refundType) {
                if (!q.refundPrice && 0 != q.refundPrice) return q.promptERR = !0, void(q.wordERR = "金额未输入");
                b.price = parseFloat(q.refundPrice)
            } else b.useRule = !0; if (q.sendFlag) {
                if (!q.sendNum) return q.promptERR = !0, void(q.wordERR = "验证码未输入");
                b.code = q.sendNum
            }
            k.cancelOnce({
                controller: q.cancelOrderId
            }, b, function () {
                t(), C(), q.refundTypes = [{
                    name: "按退款规则",
                    image: "singleChoose_imageYes"
                }, {
                    name: "自定义退款金额",
                    image: "singleChoose_imageNo"
                }], q.refundType = "按退款规则", q.refundPrice = 0, q.promptOK = !0, q.wordOK = "撤销成功", setTimeout(function () {
                    a.$apply(function () {
                        q.promptOK = !1
                    })
                }, 1e3)
            }, function (a) {
                a.data.data && (q.promptERR = !0, q.wordERR = a.data.data)
            })
        }, q.drawBill = function (b) {
            k.drawBill({
                controller: b._id
            }, {}, function () {
                C(), q.promptOK = !0, q.wordOK = "开票成功", setTimeout(function () {
                    a.$apply(function () {
                        q.promptOK = !1
                    })
                }, 1e3)
            }, function () {})
        }, q.chooseCancelOrder = function (a) {
            "manyChoose_imageYes2" == a.image ? (a.image = "manyChoose_imageNo2", q.cancelOrderIdArr.splice(q.cancelOrderIdArr.indexOf(a._id), 1)) : (a.image = "manyChoose_imageYes2", q.cancelOrderIdArr.push(a._id))
        }, q.chooseCancelOrderAll = function () {
            q.cancelOrderIdArr.length > 0 ? (_.each(q.orders, function (a) {
                a.image = "manyChoose_imageNo2"
            }), q.cancelOrderIdArr = [], q.allImage = "manyChoose_imageNo2") : (_.each(q.orders, function (a) {
                a.image = "manyChoose_imageYes2", q.cancelOrderIdArr.push(a._id)
            }), q.allImage = "manyChoose_imageYes2")
        }, q.openCancelOrders = function () {
            q.promptDELETE = !0, q.wordDELETE = "退订为不可逆操作，是否继续？"
        }, q.cancelOrders = function () {
            k.cancelOrders({}, {
                ids: q.cancelOrderIdArr
            }, function () {
                t(), C(), u(), q.promptOK = !0, q.wordOK = "撤销成功", setTimeout(function () {
                    a.$apply(function () {
                        q.promptOK = !1
                    })
                }, 1e3)
            }, function (a) {
                a.data.data && (q.promptDELETE = !1, q.promptERR = !0, q.wordERR = a.data.data)
            })
        }, q.openField = function (b) {
            k.open({
                controller: b._id
            }, {}, function () {
                q.promptOK = !0, q.wordOK = "开启成功", setTimeout(function () {
                    a.$apply(function () {
                        q.promptOK = !1
                    })
                }, 1e3), C()
            }, function () {})
        }, q.openChooseFieldWork = function () {
            return 0 == q.users.length ? (q.promptERR = !0, void(q.wordERR = "暂无场地管理员")) : void(1 == q.users.length ? (q.objectName = q.users[0].name, q._user = q.users[0]._id, q.send()) : q.sendToFlag = !0)
        }, q.printOrder = function (a) {
            for (var b = "", c = 0; c < a.tel.length; c++) b += "3" == c || "4" == c || "5" == c || "6" == c ? "*" : a.tel[c];
            a.tel = b;
            var d = '<div style="width: 250px;padding:0;margin: 0;"><div>';
            d += '<div style="font-size: 20px;font-weight: bold;">欢迎光临', d += q.organization.name, d += '</div><div style="font-size: 20px;font-weight: bold;margin-top: 10px;">场地订单小票</div></div>', d += '<div style="margin-top: 10px;">**************************************</div>', d += '<div><div style="font-size: 16px;margin-top: 10px;">场馆名称：', d += a.venueName, d += '</div><div style="font-size: 16px;margin-top: 10px;">场地名称：', d += a.fieldName, d += '</div><div style="font-size: 16px;margin-top: 10px;">日期：', d += new Date(a.startDate).getFullYear() + "年" + (new Date(a.startDate).getMonth() + 1) + "月" + new Date(a.startDate).getDate() + "日", d += '</div><div style="font-size: 16px;margin-top: 10px;">场次时间：', d += a.showDate, d += '</div><div style="font-size: 16px;margin-top: 10px;">预订人：', d += a.name, d += '</div><div style="font-size: 16px;margin-top: 10px;">联系方式：', d += a.tel, d += '</div><div style="font-size: 16px;margin-top: 10px;">预订金额：', d += a.cost, d += '</div><div style="font-size: 16px;margin-top: 10px;">验证码：', d += a.code, d += '</div><div style="font-size: 16px;margin-top: 10px;">备注：请在消费后的一个月内开票，逾期作废', d += "</div></div></div>";
            var e = getLodop();
            e.PRINT_INIT(""), e.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), e.SET_PRINTER_INDEXA(-1), e.SET_PRINT_PAGESIZE(3, 800, 100, ""), e.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", d), e.PRINT()
        }, q.openShowOrderRemark = function (a) {
            q.showOrderRemark = !0, q.order = {
                _id: a._id,
                remark: a.remark || void 0
            }
        }, q.updateRemark = function () {
            k.updateRemark({
                controller: q.order._id
            }, q.order, function () {
                q.showOrderRemark = !1, C(), q.promptOK = !0, q.wordOK = "修改成功", setTimeout(function () {
                    a.$apply(function () {
                        q.promptOK = !1
                    })
                }, 1e3)
            }, function () {})
        }, y()
    }
    angular.module("fieldApp").controller("OrgFieldCancelBookCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Time", "Field", "Orderlist", "Venue", "Item", "Orderlong", "Member", "Smscode"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        var p = this;
        p.titleState = f.params.state || "once", p.searchVenueId, p.searchItemId, p.searchPayment;
        var q = function (a) {
                return a = new Date(1e3 * parseInt(a / 1e3)), a.setHours(0), a.setMinutes(0), a.setSeconds(0), a
            },
            r = function (a) {
                return a = new Date(1e3 * parseInt(a / 1e3)), a.setHours(23), a.setMinutes(59), a.setSeconds(59), a
            },
            s = function () {
                p.showChooseVenueBox = !1, p.showChooseItemBox = !1, p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1, p.showBasicInfoBox = !1, p.showchooseOnceTypeBox = !1, p.deleteFlag = !1, p.showLongRefundBox = !1, p.showInfoBox = !1, p.showPaymentBox = !1, p.showAddTimeBox = !1, p.showEditTimeBox = !1
            };
        p.close = function () {
            s(), A(), B()
        };
        var t = function () {
            u(), v(), B()
        };
        p.closePrompt = function () {
            p.promptERR = !1, p.promptOK = !1, p.promptWARN = !1
        };
        var u = function () {
                m.index({
                    isUsed: !0
                }, function (a) {
                    p.items = [{
                        name: "全部"
                    }].concat(a.data.items)
                }, function () {})
            },
            v = function (a) {
                l.index({
                    isUsed: !0
                }, function (a) {
                    p.venues = [{
                        name: "全部"
                    }].concat(a.data.venues)
                }, function () {})
            },
            w = function () {
                i.index({
                    _venue: p.searchVenueId,
                    _item: p.searchItemId,
                    isUsed: !0,
                    sortBy: "startDate"
                }, function (a) {
                    var b = (new Date).getTime(),
                        c = q(b),
                        d = r(b),
                        e = (_.clone(p.startDate), p.startDate.getHours()),
                        f = q(p.startDate),
                        g = (r(p.startDate), []);
                    c.getTime() == f.getTime() ? _.each(a.data.times, function (a) {
                        a.endDateHours > e && g.push(a)
                    }) : d.getTime() < p.startDate.getTime() && (g = a.data.times), p.times = [];
                    for (var h = g[0].startDateHours; h <= g[g.length - 1].endDateHours; h++) p.times.push({
                        showDate: h + ":00",
                        value: h
                    })
                }, function () {})
            },
            x = function (a, b) {
                var c = {
                    isUsed: !0,
                    _item: a
                };
                l.index(c, function (a) {
                    var c = [{
                        name: "全部"
                    }].concat(a.data.venues);
                    b(c)
                }, function () {})
            },
            y = function (a, b) {
                var c = [{
                    name: "全部"
                }].concat(a.items);
                b(c)
            },
            z = function () {
                p.searchItemId && !p.searchVenueId ? p.whatFirst = "item" : !p.searchItemId && p.searchVenueId ? p.whatFirst = "venue" : p.searchItemId || p.searchVenueId || (p.whatFirst = "")
            };
        p.chooseItemName = function (a) {
            s(), p.showStartTime = "选择开始时间", p.showEndTime = "选择结束时间", p.showTimesArr = [{
                startDateHours: 0,
                startDateMins: 0,
                endDateHours: 0,
                endDateMins: 0
            }], p.showItemName = a.name, p.searchItemId = a._id, p.times = [], z(), "item" == p.whatFirst ? (p.searchVenueId = "", p.showVenueName = "选择场馆", x(p.searchItemId, function (a) {
                p.venues = a
            })) : v(), p.searchItemId && p.searchVenueId && w()
        }, p.chooseVenueName = function (a) {
            s(), p.showStartTime = "选择开始时间", p.showEndTime = "选择结束时间", p.showTimesArr = [{
                startDateHours: 0,
                startDateMins: 0,
                endDateHours: 0,
                endDateMins: 0
            }], p.showVenueName = a.name, p.searchVenueId = a._id, p.times = [], z(), "venue" == p.whatFirst ? (p.searchItemId = "", p.showItemName = "选择项目", y(a, function (a) {
                p.items = a
            })) : u(), p.searchItemId && p.searchVenueId && w()
        };
        var A = function () {
                p.BlongFirst = !1, p.BlongSecond = !1, p.BlongThird = !1, p.BlongFouth = !1, p.showChooseWeekDayBox = !1, p.showChooseMonthDayBox = !1, p.showChooseTimesSelect = !1, p.showchooseLongTypeBox = !1, p.showLongRefundDateBox = !1
            },
            B = function (a) {
                if (!a) {
                    p.showVenueName = "选择场馆", p.showItemName = "选择项目", p.showTypeName = "选择类型", p.showStartTime = "选择开始时间", p.showEndTime = "选择结束时间", p.long_weekDays = [{
                        name: "周一",
                        value: 1,
                        image: ""
                    }, {
                        name: "周二",
                        value: 2,
                        image: ""
                    }, {
                        name: "周三",
                        value: 3,
                        image: ""
                    }, {
                        name: "周四",
                        value: 4,
                        image: ""
                    }, {
                        name: "周五",
                        value: 5,
                        image: ""
                    }, {
                        name: "周六",
                        value: 6,
                        image: ""
                    }, {
                        name: "周日",
                        value: 0,
                        image: ""
                    }], p.long_monthDays = [];
                    for (var b = 1; 32 > b; b++) p.long_monthDays.push({
                        value: b,
                        image: ""
                    });
                    p.long_values = [{
                        name: "每周",
                        value: "week"
                    }, {
                        name: "每月",
                        value: "month"
                    }, {
                        name: "每天",
                        value: "day"
                    }], p.long_orderTypeArr = [{
                        name: "长包",
                        image: "singleChoose_imageYes"
                    }, {
                        name: "培训",
                        image: "singleChoose_imageNo"
                    }], p.long_orderType = "", p.showWeekDayName = "请选择星期几", p.showMonthDayName = "请选择日期", p.showChooseWeekDayBox = !1, p.showChooseMonthDayBox = !1, p.showTimesArr = [{
                        startDateHours: 0,
                        startDateMins: 0,
                        endDateHours: 0,
                        endDateMins: 0
                    }], p.searchKey = "week", p.showValueName = "每周", p.showChooseWeekDayBox = !0, p.long_name = "", p.long_tel = "", p.long_remark = "", p.searchValueArr = []
                }
                p.specialArr = [], p.chooseAll = "manyChoose_imageNo2", p.showResult = [], p.cancelDocArr = []
            };
        p.long_closeChooseStartDateBox = function (a) {
            p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1, a || w()
        }, p.long_closeChooseEndDateBox = function () {
            p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1
        }, p.long_chooseValue = function (a) {
            switch (p.showChooseValueBox = !1, p.showChooseWeekDayBox = !1, p.showChooseMonthDayBox = !1, p.searchValueArr = [], p.showWeekDayName = "请选择星期几", p.showMonthDayName = "请选择日期", p.showValueName = a.name, a.name) {
            case "每周":
                p.searchKey = "week", p.showChooseWeekDayBox = !0;
                break;
            case "每月":
                p.searchKey = "month", p.showChooseMonthDayBox = !0;
                break;
            default:
                p.searchKey = "day"
            }
        }, p.chooseWeekDay = function (a) {
            p.searchKey = "week";
            var b = p.searchValueArr.indexOf(a.value);
            0 > b ? (p.searchValueArr.push(a.value), a.image = "background:url(../../assets/images/ok.png) no-repeat 170px 13.5px;") : (p.searchValueArr.splice(b, 1), a.image = ""), p.showWeekDayName = "";
            for (var c = 0; c < p.searchValueArr.length; c++) {
                var d = p.searchValueArr[c],
                    a = _.findWhere(p.long_weekDays, {
                        value: d
                    });
                0 == c ? p.showWeekDayName = a.name : p.showWeekDayName += "," + a.name
            }
            p.showChooseWeekDaySelect = !1
        }, p.chooseMonthDay = function (a) {
            p.searchKey = "month";
            var b = p.searchValueArr.indexOf(a.value);
            0 > b ? (p.searchValueArr.push(a.value), a.image = "background:url(../../assets/images/ok.png) no-repeat 170px 13.5px;") : (p.searchValueArr.splice(b, 1), a.image = ""), p.showMonthDayName = "";
            for (var c = 0; c < p.searchValueArr.length; c++) {
                var d = p.searchValueArr[c];
                0 == c ? p.showMonthDayName = d : p.showMonthDayName += "," + d
            }
            p.showChooseMonthDaySelect = !1
        }, p.chooseStartTime = function (a) {
            p.showStartTime = a.showDate, p.showTimesArr[0].startDateHours = a.value, p.showStartTimeBox = !1
        }, p.chooseEndTime = function (a) {
            p.showEndTime = a.showDate, p.showTimesArr[0].endDateHours = a.value, p.showEndTimeBox = !1
        }, p.long_chooseOrderType = function (a) {
            switch (p.showTypeName = a.name, p.showChooseTypeBox = !1, a.name) {
            case "长包":
                p.long_orderType = "long";
                break;
            case "培训":
                p.long_orderType = "train"
            }
        }, p.checkField = function () {
            if (p.showTimesArr.length < 1) return p.promptWARN = !0, void(p.wordWARN = "请选择场次");
            if (p.showTimesArr[0].startDateHours > p.showTimesArr[0].endDateHours) return p.promptERR = !0, void(p.wordERR = "场次开始时间不能大于结束时间");
            var a = {
                _venue: p.searchVenueId,
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime(),
                defindTimes: p.showTimesArr,
                key: p.searchKey,
                valueArr: p.searchValueArr,
                check: "check",
                _item: p.searchItemId
            };
            k.createLong({}, a, function (a) {
                p.BlongFirst = !0, p.longFields = a.result
            }, function (a) {
                "时间区间内没有需要预定的场次" == a.data.data && (p.promptWARN = !0, p.wordWARN = "请重新选择时间范围"), "时间段不能重叠" == a.data.data && (p.promptWARN = !0, p.wordWARN = "时间段不能重叠")
            })
        }, p.openBlongSecond = function (a) {
            p.backstate = "flexible", p.long_field = a;
            var b = {
                name: p.long_name,
                _field: p.long_field._id,
                _venue: p.searchVenueId,
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime(),
                defindTimes: p.showTimesArr,
                key: p.searchKey,
                valueArr: p.searchValueArr,
                tel: p.long_tel || null,
                remark: p.long_remark || null,
                cost: p.long_price,
                state: "flexible"
            };
            k.createLong({}, b, function (a) {
                p.BlongFirst = !1, p.BlongSecond = !0, p.replaceFields = a.result, _.each(p.replaceFields, function (a) {
                    return "没有推荐场地" == a.recommendField ? (p.promptERR = !0, p.wordERR = "没有推荐场地", A(), void B("create")) : (a.replaceFieldName = a.recommendField[0].name, void p.specialArr.push({
                        startDate: a.conflictField.startDate,
                        endDate: a.conflictField.endDate,
                        name: a.recommendField[0].name,
                        replaceFieldId: a.recommendField[0]._id,
                        orderDateNum: a.conflictField.orderDateNum,
                        startHours: a.conflictField.startHours,
                        endHours: a.conflictField.endHours
                    }))
                })
            }, function () {})
        }, p.backToFirst = function () {
            p.backstate = "", p.BlongSecond = !1, p.BlongFirst = !0, p.specialArr = []
        }, p.chooseReplaceField = function (a, b) {
            b.showChooseReplaceFieldBox = !1, b.replaceFieldName = a.name;
            var c = _.findWhere(p.specialArr, {
                startDate: b.conflictField.startDate,
                endDate: b.conflictField.endDate
            });
            c ? (c.replaceFieldId = a._id, c.name = a.name) : p.specialArr.push({
                startDate: b.conflictField.startDate,
                endDate: b.conflictField.endDate,
                name: a.name,
                replaceFieldId: a._id,
                orderDateNum: b.conflictField.orderDateNum,
                startHours: b.conflictField.startHours,
                endHours: b.conflictField.endHours
            })
        }, p.backToSecond = function () {
            p.BlongFouth = !1, p.backstate && "flexible" == p.backstate ? p.BlongSecond = !0 : (p.BlongFirst = !0, p.backstate = "")
        }, p.openBlongFouth = function (a) {
            a && (p.long_field = a), p.BlongFirst = !1, p.BlongSecond = !1, p.BlongFouth = !0
        }, p.getResult = function () {
            var a = {
                name: p.long_name,
                _field: p.long_field._id,
                _venue: p.searchVenueId,
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime(),
                defindTimes: p.showTimesArr,
                getResult: "getResult",
                key: p.searchKey,
                valueArr: p.searchValueArr,
                tel: p.long_tel || null,
                remark: p.long_remark || null,
                cost: p.long_price,
                orderType: p.long_orderType
            };
            p.specialArr.length > 0 && (a = _.merge(a, {
                specialArr: p.specialArr
            })), k.createLong({}, a, function (a) {
                p.showResult = a.result, p.cancelDocArr = [], p.BlongFouth = !1, p.chooseAll = "manyChoose_imageYes2", _.each(p.showResult, function (a) {
                    a.choose = "manyChoose_imageYes2"
                })
            }, function () {})
        }, p.changeAllChoose = function () {
            p.cancelDocArr.length > 0 ? (p.cancelDocArr = [], p.chooseAll = "manyChoose_imageYes2", _.each(p.showResult, function (a) {
                a.choose = "manyChoose_imageYes2"
            })) : (p.cancelDocArr = _.cloneDeep(p.showResult), p.chooseAll = "manyChoose_imageNo2", _.each(p.showResult, function (a) {
                a.choose = "manyChoose_imageNo2"
            }))
        }, p.changeChoose = function (a) {
            if ("manyChoose_imageNo2" == a.choose) {
                var b = p.cancelDocArr.indexOf(a);
                b > -1 && p.cancelDocArr.splice(b, 1), a.choose = "manyChoose_imageYes2"
            } else p.cancelDocArr.push(a), a.choose = "manyChoose_imageNo2"
        }, p.deleteDoc = function () {
            p.showResult = [], p.cancelDocArr = [], p.chooseAll = "manyChoose_imageNo2"
        }, p.createLong = function () {
            var b = {
                name: p.long_name,
                _field: p.long_field._id,
                _venue: p.searchVenueId,
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime(),
                defindTimes: p.showTimesArr,
                key: p.searchKey,
                valueArr: p.searchValueArr,
                tel: p.long_tel || null,
                remark: p.long_remark || null,
                cost: p.long_price,
                orderType: p.long_orderType
            };
            p.specialArr.length > 0 && (b = _.merge(b, {
                specialArr: p.specialArr
            })), p.cancelDocArr.length > 0 && (b = _.merge(b, {
                cancelArr: p.cancelDocArr
            })), k.createLong({}, b, function (b) {
                p.showResult = b.result, p.BlongFouth = !1, _.each(p.showResult, function (a) {
                    a.choose = !1
                }), A(), B("create"), v(), p.showChooseWeekDayBox = !0, p.promptOK = !0, p.wordOK = "预订成功", setTimeout(function () {
                    a.$apply(function () {
                        p.promptOK = !1
                    })
                }, 1e3)
            }, function (a) {
                console.log(a), p.promptERR = !0, p.wordERR = a.data.data
            })
        }, t()
    }
    angular.module("fieldApp").controller("OrgFieldLongBookCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Time", "Field", "Orderlist", "Venue", "Item", "Orderlong", "Member"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r) {
        var s, t = this,
            u = 0,
            v = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            },
            w = function (a) {
                return a = new Date(1e3 * parseInt(a / 1e3)), a.setHours(0), a.setMinutes(0), a.setSeconds(0), a
            },
            x = function (a) {
                return a = new Date(1e3 * parseInt(a / 1e3)), a.setHours(23), a.setMinutes(59), a.setSeconds(59), a
            },
            y = function (a) {
                var b;
                switch (a) {
                case 0:
                    b = "周日";
                    break;
                case 1:
                    b = "周一";
                    break;
                case 2:
                    b = "周二";
                    break;
                case 3:
                    b = "周三";
                    break;
                case 4:
                    b = "周四";
                    break;
                case 5:
                    b = "周五";
                    break;
                case 6:
                    b = "周六"
                }
                return b
            },
            z = function () {
                t.showChooseVenueBox = !1, t.showChooseItemBox = !1, t.showChooseStartDateBox = !1, t.showChooseEndDateBox = !1, t.showBasicInfoBox = !1, t.showchooseOnceTypeBox = !1, t.showInfoBox = !1, t.showPaymentBox = !1, t.showMemberInfo = !1, t.showOrderBox = !1, t.showCodeBox = !1, t.showCreateMember = !1, t.showAuth_codeBox = !1, t.showRechargeBox = !1, clearInterval(t.setIntervalId)
            },
            A = function (a) {
                if (a) t.members = null;
                else {
                    t.showVenueName = "选择场馆", t.showItemName = "选择项目", t.searchVenueId = "", t.searchItemId = "", t.showHours = [], t.dateArr = [];
                    for (var b = Date.now(), c = b; b + 6912e5 > c; c += 864e5) t.dateArr.push({
                        date: new Date(c),
                        week: y(new Date(c).getDay()),
                        bgColor: "color:#99a9bf;",
                        isChoose: !1
                    });
                    t.dateArr[0].isChoose = !0, t.dateArr[0].bgColor = "background:#20a0ff;color:#fff;", t.startDate = new Date
                }
                t.memberTelOrCard = "", t.today = new Date, t.rechargeType = "cash", t.chooseCardId = "", t.rechargePayment = "", t.order = {
                    _member: "",
                    orderDate: null,
                    spbill_create_ip: "",
                    auth_code: "",
                    payment: "member",
                    subtotal: 0,
                    total: 0,
                    orderArr: []
                }, t.member = {
                    name: "",
                    tel: "",
                    idCard: ""
                }, t.flexibleOrderPrice = "", t.startTime = "点击场次获取", t.lastTime = "", t.paymentArr = [{
                    name: "余额",
                    value: "member",
                    image: "singleChoose_imageYes"
                }, {
                    name: "支付宝",
                    value: "alipay",
                    image: "singleChoose_imageNo"
                }, {
                    name: "微信",
                    value: "wx",
                    image: "singleChoose_imageNo"
                }, {
                    name: "现金",
                    value: "cash",
                    image: "singleChoose_imageNo"
                }, {
                    name: "支票",
                    value: "check",
                    image: "singleChoose_imageNo"
                }, {
                    name: "转账",
                    value: "card",
                    image: "singleChoose_imageNo"
                }, {
                    name: "POS机",
                    value: "pos",
                    image: "singleChoose_imageNo"
                }]
            },
            B = function () {
                A(), D(), E(), C()
            },
            C = function () {
                r.index({
                    sortBy: "discount"
                }, function (a) {
                    t.cards = a.data.membertypes
                }, function () {})
            },
            D = function () {
                m.index({
                    isUsed: !0
                }, function (a) {
                    t.items = [{
                        name: "全部"
                    }].concat(a.data.items)
                }, function () {})
            },
            E = function () {
                l.index({
                    isUsed: !0
                }, function (a) {
                    t.venues = [{
                        name: "全部"
                    }].concat(a.data.venues), 0 == u && a.data.venues.length > 0 && t.chooseVenueName(t.venues[1])
                }, function () {})
            },
            F = function () {
                t.order = {
                    _member: t.members ? t.members[0]._id : "",
                    orderDate: null,
                    spbill_create_ip: "",
                    auth_code: "",
                    payment: "member",
                    subtotal: 0,
                    total: 0,
                    orderArr: []
                }, t.startTime = "点击场次获取", t.lastTime = "", i.index({
                    _venue: t.searchVenueId,
                    _item: t.searchItemId,
                    isUsed: !0,
                    sortBy: "startDate",
                    orderDate: t.startDate.getTime()
                }, function (a) {
                    t.times = a.data.times, t.speDay = a.data.speDay;
                    var b = [],
                        c = Date.now();
                    if (_.each(t.times, function (a) {
                        a.isUsed ? b.push(a) : (a.close_startDate > c || a.close_endDate < c) && b.push(a)
                    }), t.times = b, "org-field-book.flexible" == f.current.name) {
                        var b = [];
                        _.each(t.times, function (a) {
                            if (a.continueHours > 1)
                                for (var c = a.startDate; c < a.endDate; c++) {
                                    var d = _.cloneDeep(a);
                                    d.continueHours = 1, d.startDate = c, d.startDateHours = parseInt(c), d.startDateMins = c % 1 * 60, d.endDate = c + 1, d.endDateHours = parseInt(d.endDate), d.endDateMins = d.endDate % 1 * 60, d.showDate = "" + d.startDateHours + ":", d.showDate += d.startDateMins > 10 ? d.startDateMins : "0" + d.startDateMins, d.showDate += "--" + d.endDateHours + ":", d.showDate += d.endDateMins > 10 ? d.endDateMins : "0" + d.endDateMins, b.push(d)
                                } else b.push(a)
                        }), t.times = b
                    }
                    if (t.times.length > 0) {
                        var d = t.times[0].startDateHours || 0,
                            e = t.times[t.times.length - 1].endDateHours || 0;
                        e = e < t.times[t.times.length - 1].endDate ? e + 1 : e;
                        var g = e - d;
                        t.showHours = [];
                        for (var h = d; e >= h; h++) t.showHours.push({
                            num: 10 > h ? "0" + h : h,
                            fontColor: ""
                        });
                        var i = document.getElementsByTagName("html")[0].offsetWidth / 1320;
                        i = 10 * (i > 1 ? i : 1);
                        var j = 6 * g;
                        t.tableWidthB = "width:" + (6 * g + 16) + "rem;", t.tableWidthS = "width:" + 6 * g + "rem;";
                        for (var h = 0; h < t.times.length; h++) 0 == h ? t.times[h].marginleft = "margin-left:" + ((t.times[h].startDate - d) / g * j - 1 / i) + "rem;" : t.times[h].marginleft = "margin-left:" + ((t.times[h].startDate - t.times[h - 1].endDate) / g * j - 1 / i) + "rem;", t.times[h].width = "width:" + (t.times[h].continueHours / g * j + 1 / i) + "rem;";
                        G()
                    }
                }, function () {})
            },
            G = function () {
                var a = {
                    _venue: t.searchVenueId,
                    _item: t.searchItemId,
                    sortValue: "asc"
                };
                j.index(a, function (a) {
                    t.fields = a.data.fields, H()
                }, function () {})
            },
            H = function () {
                var a = Date.now(),
                    b = w(a),
                    c = (x(a), _.clone(t.startDate)),
                    d = t.startDate.getHours() + t.startDate.getMinutes() / 60,
                    e = w(t.startDate),
                    g = (x(t.startDate), t.speDay ? t.speDay.weekAs : 0 == c.getDay() ? 6 : c.getDay() - 1),
                    h = 0;
                _.each(t.fields, function (c) {
                    c.index = h, h++, c.isChoose = !1, c.fontColor = "", c.times = _.cloneDeep(t.times), _.each(c.times, function (h) {
                        switch (c.isUsed || !c.isUsed && new Date(c.closeDate).getTime() > a ? (h.state = "canbook", h.bgColor = "background:#fff;", "csd-field-book.once" == f.current.name ? (b.getTime() == e.getTime() && h.startDate < d || b.getTime() > t.startDate.getTime()) && (h.state = "cantbook", h.bgColor = "background:#e5e9f2;") : (b.getTime() == e.getTime() && h.endDate < d || b.getTime() > t.startDate.getTime()) && (h.state = "cantbook", h.bgColor = "background:#e5e9f2;")) : (h.state = "stop", h.bgColor = "background:#e5e9f2;"), h.isChoose = !1, h.tel = "", h.name = "", h.priceArr[g].unit) {
                        case "sign":
                            h.price = "￥" + v(h.priceArr[g].price);
                            break;
                        case "hours":
                            h.price = "￥" + v(h.priceArr[g].price * h.continueHours);
                            break;
                        default:
                            h.price = "No"
                        }
                    })
                }), I()
            },
            I = function () {
                var a = {
                    _venue: t.searchVenueId,
                    _item: t.searchItemId,
                    orderDateNum: t.startDate.getTime(),
                    state: "all"
                };
                k.index(a, function (a) {
                    t.orders = a.data.orderLists, _.each(t.orders, function (a) {
                        var b = _.findWhere(t.fields, {
                            _id: a._field
                        });
                        b && _.each(b.times, function (b) {
                            if (a.startHours < b.startDate && a.endHours > b.startDate || a.startHours >= b.startDate && a.startHours < b.endDate) {
                                if ("stop" != b.state && "cantbook" != b.state) {
                                    b.orderId = a._id, b.tel = a.tel || "", b.name = a.name || "";
                                    var c = a.description.substr(0, 6);
                                    "(长包预订)" == c ? (b.bgColor = "background:#F69667;", b.state = "hasbook", b.orderType = "long") : "(培训预订)" == c ? (b.bgColor = "background:#67BDDE;", b.state = "hasbook", b.orderType = "train") : (b.bgColor = "background:#5ED878;", b.state = "hasbook", b.orderType = "once"), M(a) && (b.bgColor = "background:#ff4949;", b.state = "isUsed"), b.code = a.code, b.remark = a.remark
                                } else b.orderId = a._id, b.tel = a.tel || "", b.name = a.name || "", b.bgColor = "background:#99a9bf;", b.state = "haspass", M(a) && (b.bgColor = "background:#ff4949;", b.state = "isUsed"), b.code = a.code, b.remark = a.remark;
                                delete b.isChoose
                            }
                        })
                    })
                }, function () {})
            },
            J = function (a, b) {
                var c = {
                    isUsed: !0,
                    _item: a
                };
                l.index(c, function (a) {
                    var c = [{
                        name: "全部"
                    }].concat(a.data.venues);
                    b(c)
                }, function () {})
            },
            K = function (a, b) {
                var c = [{
                    name: "全部"
                }].concat(a.items);
                b(c)
            },
            L = function () {
                t.searchItemId && !t.searchVenueId ? t.whatFirst = "item" : !t.searchItemId && t.searchVenueId ? t.whatFirst = "venue" : t.searchItemId || t.searchVenueId || (t.whatFirst = "")
            },
            M = function (a) {
                var b = (new Date).getTime(),
                    c = new Date(a.endDate).getTime();
                return a.isUsed && c >= b ? !0 : !1
            },
            N = function (a) {
                var b = a.split("|");
                if (3 != b.length) return !1;
                var a = b[0],
                    c = b[1].split(""),
                    d = b[2],
                    e = d,
                    f = parseInt(s / 6e4).toString().split("");
                if (c.length < f.length) return !1;
                for (var g = 0; g < f.length; g++) d = d.replace(f[g], c[g]);
                return d == a ? e : !1
            };
        t.changeTitle = function (a) {
            u = 0, E();
            var b = t.memberTelOrCard;
            z(), A(), t.memberTelOrCard = b, t.members && (t.showMemberInfo = !0, t.order._member = t.members[0]._id), "once" == a ? f.go("org-field-book.once") : f.go("org-field-book.flexible")
        }, t.checkMember = function (a) {
            return t.memberTelOrCard || a ? void(a ? n.show({
                id: a
            }, function (a) {
                t.members = [a.data.member], t.showMemberInfo = !0, t.order._member = t.members[0]._id
            }, function (a) {
                "找不到对象：member" == a.data.data && (t.showMemberInfo = !1, t.order = {
                    _member: "",
                    orderDate: null,
                    spbill_create_ip: "",
                    auth_code: "",
                    payment: "member",
                    total: 0,
                    orderArr: []
                }, t.promptERR = !0, t.wordERR = "会员不存在")
            }) : i.index({
                id: "today"
            }, function (a) {
                s = a.data;
                var b = N(t.memberTelOrCard);
                if (b) n.show({
                    id: b
                }, function (a) {
                    t.members = [a.data.member], t.showMemberInfo = !0, t.order._member = t.members[0]._id
                }, function (a) {
                    "找不到对象：member" == a.data.data && (t.showMemberInfo = !1, t.order = {
                        _member: "",
                        orderDate: null,
                        spbill_create_ip: "",
                        auth_code: "",
                        payment: "member",
                        total: 0,
                        orderArr: []
                    }, t.promptERR = !0, t.wordERR = "会员不存在")
                });
                else {
                    var c = {
                        cardNo: t.memberTelOrCard
                    };
                    n.indexBycard(c, function (a) {
                        t.members = [a.data.member], t.showMemberInfo = !0, t.order._member = t.members[0]._id
                    }, function (a) {
                        "找不到对象：member" == a.data.data && (t.showMemberInfo = !1, t.order = {
                            _member: "",
                            orderDate: null,
                            spbill_create_ip: "",
                            auth_code: "",
                            payment: "member",
                            total: 0,
                            orderArr: []
                        }, t.promptERR = !0, t.wordERR = "会员不存在")
                    })
                }
            })) : (t.promptERR = !0, void(t.wordERR = "请读取会员卡号/二维码"))
        }, t.chooseItemName = function (a) {
            t.showChooseItemBox = !1, t.showItemName = a.name, t.searchItemId = a._id, t.times = [], L(), "item" == t.whatFirst ? (t.searchVenueId = "", t.showVenueName = "选择场馆", J(t.searchItemId, function (a) {
                t.venues = a
            })) : E(), t.searchItemId && t.searchVenueId && F()
        }, t.chooseVenueName = function (a) {
            t.showChooseVenueBox = !1, t.showVenueName = a.name, t.searchVenueId = a._id, t.times = [], L(), "venue" == t.whatFirst ? (t.searchItemId = "", t.showItemName = "选择项目", K(a, function (a) {
                t.items = a
            })) : D(), 0 == u && t.items.length > 0 ? (u++, t.chooseItemName(t.items[1])) : t.searchItemId && t.searchVenueId && F()
        }, t.closeChooseStartDateBox = function () {
            setTimeout(function () {
                t.showChooseStartDateBox = !1, F()
            }, 100)
        }, t.changeDate = function (a) {
            _.each(t.dateArr, function (a) {
                a.bgColor = "color:#99a9bf;", a.isChoose = !1
            }), a.bgColor = "background:#20a0ff;color:#fff;", a.isChoose = !0, t.startDate = a.date, t.searchItemId && t.searchVenueId && F()
        };
        var O = function () {
            _.each(t.showHours, function (a) {
                a.fontColor = ""
            }), _.each(t.fields, function (a) {
                a.fontColor = ""
            }), _.each(t.order.orderArr, function (a) {
                for (var b = a.startDateHours; b <= a.endDateHours; b++) {
                    b = 10 > b ? "0" + b : b;
                    var c = _.findWhere(t.showHours, {
                        num: b
                    });
                    c.fontColor = "color:#ff4949;font-weight:bold;"
                }
                var d = _.findWhere(t.fields, {
                    _id: a._field
                });
                d.fontColor = "color:#ff4949;font-weight:bold;"
            })
        };
        t.chooseField = function (a, b) {
            if (!t.order._member) return t.promptERR = !0, void(t.wordERR = "请先查找会员信息");
            if ("No" == b.price) return t.promptERR = !0, void(t.wordERR = "未设置单位场次不可预订");
            var c, d = t.speDay ? parseInt(t.speDay.weekAs) : t.startDate.getDay(),
                e = 0,
                f = 0;
            c = a.itemDiscount ? a.itemDiscount : t.members[0].cards.length > 0 ? t.members[0].cards[0].discount : 1;
            var g = _.findWhere(b.priceArr, {
                week: d
            });
            if ("sign" == g.unit ? (e = g.price, f = g.price * c) : "hours" == g.unit && (e = g.price * b.continueHours, f = g.price * b.continueHours * c), f = Math.ceil(parseInt(1e3 * f) / 10) / 100, e = Math.ceil(parseInt(1e3 * e) / 10) / 100, b.isChoose) {
                b.isChoose = !1, b.bgColor = "background:#fff;", b.state = "canbook", b.fontColor = "";
                var a = _.findWhere(t.order.orderArr, {
                    date: t.startDate,
                    _field: a._id,
                    _time: b._id
                });
                if (a) {
                    var h = t.order.orderArr.indexOf(a);
                    t.order.total = v((100 * t.order.total - 100 * f) / 100), t.order.subtotal = v((100 * t.order.subtotal - 100 * e) / 100), t.order.orderArr.splice(h, 1)
                }
            } else {
                if (9 == t.order.orderArr.length) return t.promptERR = !0, void(t.wordERR = "一次最多选择9场");
                b.isChoose = !0, b.bgColor = "background:#20a0ff;", b.fontColor = "color:#fff;", b.state = "choose", t.order.total = v((100 * t.order.total + 100 * f) / 100), t.order.subtotal = v((100 * t.order.subtotal + 100 * e) / 100), t.order.orderArr.push({
                    date: t.startDate,
                    _field: a._id,
                    fieldName: a.name,
                    _time: b._id,
                    timeShowDate: b.showDate,
                    startDateHours: b.startDateHours,
                    endDateHours: b.endDateHours,
                    itmeName: t.showItemName,
                    venueName: t.showVenueName,
                    week: y(t.startDate.getDay())
                })
            }
            O()
        }, t.deleteField = function (a) {
            var b, c = _.findWhere(t.fields, {
                    _id: a._field
                }),
                d = _.findWhere(c.times, {
                    _id: a._time
                }),
                e = t.speDay ? parseInt(t.speDay.weekAs) : t.startDate.getDay(),
                f = 0,
                g = 0;
            b = a.itemDiscount ? a.itemDiscount : t.members[0].cards.length > 0 ? t.members[0].cards[0].discount : 1;
            var h = _.findWhere(d.priceArr, {
                week: e
            });
            "sign" == h.unit ? (f = h.price, g = h.price * b) : "hours" == h.unit && (f = h.price * d.continueHours, g = h.price * d.continueHours * b), g = Math.ceil(parseInt(1e3 * g) / 10) / 100, f = Math.ceil(parseInt(1e3 * f) / 10) / 100, d.bgColor = "background:#fff;", d.fontColor = "color:#000;", d.isChoose = !1, t.order.subtotal = v((100 * t.order.subtotal - 100 * f) / 100), t.order.total = v((100 * t.order.total - 100 * g) / 100), t.order.orderArr.splice(t.order.orderArr.indexOf(a), 1), O()
        }, t.create = function () {
            switch (t.order.orderDate = new Date(t.startDate).getTime(), t.order.payment) {
            case "wx":
            case "alipay":
                t.order.spbill_create_ip = "122.224.134.196", t.showAuth_codeBox = !0, t.setIntervalId = setInterval(function () {
                    document.getElementById("auth_code").focus()
                }, 100);
                break;
            case "cash":
            case "card":
            case "pos":
            case "check":
            case "member":
                t.showOrderBox = !1, t.promptWARN = !0, t.wordWARN = "支付中", k.createOrders({}, t.order, function () {
                    t.promptWARN = !1, t.promptOK = !0, t.wordOK = "预订成功，请凭验证码入场", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), F(), z(), A("afterCreate")
                }, function (a) {
                    return t.promptWARN = !1, a.data.data ? (t.promptERR = !0, void(t.wordERR = a.data.data)) : void 0
                })
            }
        }, t.auth_codeCreate = function (b) {
            if (t.promptWARN = !0, t.wordWARN = "支付中", 13 == b.keyCode) switch (clearInterval(t.setIntervalId), t.order.payment) {
            case "wx":
                var c = /^[1][0,1,2,3,4,5][0-9]{16}$/;
                if (!c.test(t.order.auth_code)) return t.order.auth_code = "", t.promptWARN = !1, t.promptERR = !0, void(t.wordERR = "支付码错误，重新扫码");
                k.createOrdersMicropay({}, t.order, function (b) {
                    t.order.auth_code = "", t.promptWARN = !1, t.promptOK = !0, t.wordOK = "预订成功，请凭验证码入场", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), F(), z(), A("afterCreate")
                }, function (a) {
                    return t.promptWARN = !1, a.data.data ? (t.promptERR = !0, void(t.wordERR = a.data.data)) : void 0
                });
                break;
            case "alipay":
                var c = /^[25,26,27,28,29,30][0-9]{14,22}$/;
                if (!c.test(t.order.auth_code)) return t.order.auth_code = "", t.promptWARN = !1, t.promptERR = !0, void(t.wordERR = "支付码错误，重新扫码");
                o.createOrders({}, t.order, function (b) {
                    t.order.auth_code = "", t.promptWARN = !1, t.promptOK = !0, t.wordOK = "预订成功，请凭验证码入场", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), F(), z(), A("afterCreate")
                }, function (a) {
                    return t.promptWARN = !1, a.data.data ? (t.promptERR = !0, void(t.wordERR = a.data.data)) : void 0
                })
            }
        }, t.openShowOrderBox = function () {
            t.showOrderBox = !0, t.showOrderBox = !0, t.order.auth_code = "", ("alipay" == t.order.payment || "wx" == t.order.payment) && (t.showCodeBox = !0)
        }, t.choosePayment = function (a) {
            _.each(t.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), t.order.auth_code = "", a.image = "singleChoose_imageYes", t.order.payment = a.value, "alipay" == a.value || "wx" == a.value ? t.showCodeBox = !0 : t.showCodeBox = !1
        }, t.close = function () {
            z()
        }, t.resert = function () {
            z(), A(), t.memberTelOrCard = "", t.members = null, document.getElementById("cardNoBox").focus()
        }, t.closePrompt = function () {
            t.promptERR = !1, t.promptOK = !1, t.promptWARN = !1, t.showAuth_codeBox = !1, clearInterval(t.setIntervalId)
        }, t.chooseFieldFiexible = function (a, b) {
            if (!t.order._member) return t.promptERR = !0, void(t.wordERR = "请先查找会员信息");
            var c = !1;
            if (_.each(t.times, function (a) {
                var b = _.findWhere(a.priceArr, {
                    week: (new Date).getDay()
                });
                return b.unit ? void 0 : (t.promptERR = !0, t.wordERR = "有场次未设置单位,不可订", c = !0, !1)
            }), !c) {
                t.itemDiscount, a.itemDiscount ? t.itemDiscount = a.itemDiscount : t.itemDiscount = t.members[0].cards.length > 0 ? t.members[0].cards[0].discount : 1, t.chooseStartField && (t.chooseStartField.time.bgColor = ""), t.chooseStartField = {
                    field: a,
                    time: b
                }, t.chooseStartField.time.bgColor = "background:#20a0ff;color:#fff;", t.order.orderArr = [];
                var d = new Date,
                    e = d.getHours(),
                    f = d.getMinutes(),
                    g = 60 * e + f;
                g >= 60 * b.startDate && g <= 60 * b.endDate ? f > 30 ? t.order.orderArr.push({
                    date: t.startDate,
                    _field: a._id,
                    startDateHours: e + 1,
                    startDateMins: 0,
                    endDateHours: e + 1,
                    endDateMins: 0
                }) : 30 > f && f > 0 ? t.order.orderArr.push({
                    date: t.startDate,
                    _field: a._id,
                    startDateHours: e,
                    startDateMins: 30,
                    endDateHours: e,
                    endDateMins: 30
                }) : t.order.orderArr.push({
                    date: t.startDate,
                    _field: a._id,
                    startDateHours: e,
                    startDateMins: f,
                    endDateHours: e,
                    endDateMins: f
                }) : (b.startDateMins > 0 && b.startDateMins < 30 ? b.startDateMins = 30 : b.startDateMins > 30 && b.startDateMins < 60 && (b.startDateMins = 0, b.startDateHours++), t.order.orderArr.push({
                    date: t.startDate,
                    _field: a._id,
                    startDateHours: b.startDateHours,
                    startDateMins: b.startDateMins,
                    endDateHours: b.startDateHours,
                    endDateMins: b.startDateMins
                }));
                var h = t.order.orderArr[0];
                t.startTime = h.startDateHours + ":" + (h.startDateMins < 10 ? "0" + h.startDateMins : h.startDateMins), t.lastTime = 0, h = _.merge(h, {
                    _field: a._id,
                    fieldName: a.name,
                    itmeName: t.showItemName,
                    venueName: t.showVenueName,
                    week: y(t.startDate.getDay())
                }), console.log(new Date(t.startDate))
            }
        }, t.openShowFiexibleOrderBox = function () {
            var a = t.order.orderArr[0];
            a = _.merge(a, {
                timeShowDate: a.startDateHours + ":" + (a.startDateMins >= 10 ? a.startDateMins : "0" + a.startDateMins) + "--" + a.endDateHours + ":" + (a.endDateMins >= 10 ? a.endDateMins : "0" + a.endDateMins)
            }), t.showOrderBox = !0, t.showOrderBox = !0, t.order.auth_code = "", ("alipay" == t.order.payment || "wx" == t.order.payment) && (t.showCodeBox = !0)
        };
        var P = function (a) {
                var b = _.cloneDeep(t.order.orderArr[0]),
                    c = parseInt(t.lastTime / 1),
                    d = t.lastTime % 1 * 60,
                    e = [],
                    f = w(Date.now()),
                    g = x(Date.now());
                if (t.startDate.getTime() > f && t.startDate.getTime() < g)
                    for (var h = (new Date).getHours(); h < t.showHours[t.showHours.length - 1].num + 1; h++) e.push(h);
                else if (t.startDate.getTime() > g)
                    for (var h = t.showHours[0].num; h < t.showHours[t.showHours.length - 1].num + 1; h++) e.push(h);
                switch (a) {
                case "startAdd":
                    30 == b.startDateMins ? (b.startDateMins = 0, b.startDateHours += 1) : b.startDateMins = 30;
                    break;
                case "startReduce":
                    30 == b.startDateMins ? b.startDateMins = 0 : (b.startDateMins = 30, b.startDateHours -= 1);
                    break;
                case "lastAdd":
                    30 == d ? (d = 0, c += 1) : d = 30;
                    break;
                case "lastReduce":
                    30 == d ? d = 0 : (d = 30, c -= 1)
                }
                b.startDateMins + d == 60 ? (b.endDateMins = 0, b.endDateHours = b.startDateHours + c + 1) : b.startDateMins + d == 0 ? (b.endDateMins = 0, b.endDateHours = b.startDateHours + c) : (b.endDateMins = 30, b.endDateHours = b.startDateHours + c);
                var i = b.startDateHours == e[0] - 1 && 30 == b.startDateMins,
                    j = b.startDateHours == e[e.length - 1] && 0 == b.startDateMins,
                    k = b.endDateHours == e[e.length - 1] && 30 == b.endDateMins;
                return i || j || k ? !0 : !1
            },
            Q = function () {
                var a = t.order.orderArr[0],
                    b = a.startDateHours + a.startDateMins / 60,
                    c = a.endDateHours + a.endDateMins / 60,
                    d = 0,
                    e = 0,
                    f = t.itemDiscount,
                    g = [];
                _.each(t.times, function (a) {
                    (a.startDate >= b && a.startDate <= c || a.endDate >= b && a.endDate <= c || a.startDate < b && a.endDate > c) && g.push(a)
                });
                for (var h = 0; h < g.length; h++) {
                    var i, j = g[h],
                        k = t.speDay ? parseInt(t.speDay.weekAs) : t.startDate.getDay(),
                        l = _.findWhere(j.priceArr, {
                            week: k
                        });
                    switch (j.startDate < b && j.endDate > b && j.endDate <= c ? "hours" == l.unit && (i = j.endDate - b) : j.startDate >= b && j.endDate <= c ? "hours" == l.unit && (i = j.continueHours) : j.startDate >= b && j.startDate < c && j.endDate > c ? "hours" == l.unit && (i = c - j.startDate) : j.startDate < b && j.endDate > c ? "hours" == l.unit && (i = c - b) : "hours" == l.unit && (i = 0), l.unit) {
                    case "sign":
                        d += 100 * l.price, e += 100 * l.price;
                        break;
                    case "hours":
                        i % 1 > 0 && .5 > i % 1 ? i = parseInt(i / 1) + .5 : i % 1 > .5 && 1 > i % 1 && (i = parseInt(i / 1) + 1), d += l.price * i * f * 100, e += l.price * i * 100
                    }
                    t.order.total = v(d / 100), t.order.subtotal = v(e / 100)
                }
            };
        t.changeStartTime = function (a) {
            if (!t.startTime || "点击场次获取" == t.startTime) return t.promptERR = !0, void(t.wordERR = "先点击场次获取开始时间");
            var b = t.order.orderArr[0];
            if ("add" == a) {
                if (P("startAdd")) return t.promptERR = !0, void(t.wordERR = "超出范围不可选");
                30 == b.startDateMins ? (b.startDateMins = 0, b.startDateHours += 1) : b.startDateMins = 30
            } else {
                if (P("startReduce")) return t.promptERR = !0, void(t.wordERR = "超出范围不可选");
                30 == b.startDateMins ? b.startDateMins = 0 : (b.startDateMins = 30, b.startDateHours -= 1)
            }
            var c = b.startDateMins / 60 + b.startDateHours + t.lastTime;
            c % 1 > 0 && .5 >= c % 1 ? (b.endDateMins = 30, b.endDateHours = parseInt(c / 1)) : c % 1 > .5 && 1 > c % 1 ? (b.endDateMins = 0, b.endDateHours = parseInt(c / 1) + 1) : (b.endDateMins = 0, b.endDateHours = parseInt(c / 1)), t.startTime = b.startDateHours + ":" + (b.startDateMins < 10 ? "0" + b.startDateMins : b.startDateMins), Q()
        }, t.changeLastTime = function (a) {
            if (!t.startTime || "点击场次获取" == t.startTime) return t.promptERR = !0, void(t.wordERR = "先点击场次获取开始时间");
            var b = t.order.orderArr[0];
            if ("add" == a) {
                if (P("lastAdd")) return t.promptERR = !0, void(t.wordERR = "超出范围不可选");
                30 == b.endDateMins ? (b.endDateHours++, b.endDateMins = 0) : b.endDateMins = 30, t.lastTime += .5
            } else {
                if (P("lastReduce")) return t.promptERR = !0, void(t.wordERR = "超出范围不可选");
                if (b.startDateHours == b.endDateHours && b.startDateMins == b.endDateMins) return;
                30 == b.endDateMins ? b.endDateMins = 0 : (b.endDateHours--, b.endDateMins = 30), t.lastTime -= .5
            }
            Q()
        }, t.createFlexible = function () {
            switch (t.order.orderArr[0].price = parseFloat(t.order.subtotal), t.order.orderDate || (t.order.orderDate = t.startDate), t.order.orderDate = new Date(t.order.orderDate).getTime(), t.order.payment) {
            case "wx":
            case "alipay":
                t.order.spbill_create_ip = "122.224.134.196", t.showAuth_codeBox = !0, document.getElementById("auth_code").focus();
                break;
            case "cash":
            case "card":
            case "pos":
            case "check":
            case "member":
                t.showOrderBox = !1, t.promptWARN = !0, t.wordWARN = "支付中", k.createOrders({}, t.order, function (b) {
                    t.promptWARN = !1, t.promptOK = !0, t.wordOK = "预订成功，请凭验证码入场", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), F(), z(), A("afterCreate")
                }, function (a) {
                    return t.promptWARN = !1, a.data.data ? (t.promptERR = !0, void(t.wordERR = a.data.data)) : void 0
                })
            }
        };
        t.createMember = function () {
            return t.member.name ? t.member.tel ? void n.create({}, t.member, function (a) {
                var b = t.memberTelOrCard;
                z(), A(), t.members = [a.data.member], t.members.length > 0 && (t.showMemberInfo = !0, t.order._member = t.members[0]._id), t.memberTelOrCard = b
            }, function (a) {
                return "ValidationError: 该号码已被使用." == a.data.data ? (t.promptERR = !0, void(t.wordERR = "该号码已被使用")) : "数据错误：手机格式错误" == a.data.data ? (t.promptERR = !0, void(t.wordERR = "手机格式错误")) : void 0
            }) : (t.promptERR = !0, void(t.wordERR = "请填写手机号")) : (t.promptERR = !0, void(t.wordERR = "请填写名称"))
        }, t.changeRechargeType = function (a) {
            t.chargeCardNum = "", t.chargeCardPassword = "", t.rechargeType = a, "speCard" == a && l.index({
                isUsed: !0
            }, function (a) {
                t.venues_clone = a.data.venues, _.each(t.venues_clone, function (a) {
                    a.image = "singleChoose_imageNo2"
                }), t.chargeVenue = t.venues_clone[0], t.venues_clone[0].image = "singleChoose_imageYes2"
            }, function () {})
        }, t.openShowRechargeBox = function (a) {
            t.needIdCard = a, t.showRechargeBox = !0, t.paymentArr = [{
                name: "支付宝",
                value: "alipay",
                image: "singleChoose_imageYes"
            }, {
                name: "微信",
                value: "wx",
                image: "singleChoose_imageNo"
            }, {
                name: "现金",
                value: "cash",
                image: "singleChoose_imageNo"
            }, {
                name: "支票",
                value: "check",
                image: "singleChoose_imageNo"
            }, {
                name: "转账",
                value: "card",
                image: "singleChoose_imageNo"
            }, {
                name: "POS机",
                value: "pos",
                image: "singleChoose_imageNo"
            }], t.rechargePayment = "alipay", t.showCardName = t.cards[0].name + "(" + t.cards[0].price + "元)", t.chooseCardId = t.cards[0]._id, t.rechargeType = "cash"
        }, t.chooseCard = function (a) {
            t.openChooseCardBox = !1, t.showCardName = a.name + "(" + a.price + "元)", t.chooseCardId = a._id
        }, t.chooseRechargePayment = function (a) {
            _.each(t.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", t.rechargePayment = a.value
        }, t.recharge = function () {
            if ("idCard" == t.needIdCard) {
                if (!t.idCard) return t.promptERR = !0, void(t.wordERR = "请输入身份证号");
                n.update({
                    id: t.members[0]._id
                }, {
                    idCard: t.idCard
                }, function () {
                    t.showRechargeBox = !1, t.promptOK = !0, t.wordOK = "认证成功", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), t.idCard = "", t.checkMember(t.members[0]._id)
                }, function () {})
            } else if ("cash" == t.rechargeType) switch (t.rechargePayment) {
            case "wx":
            case "alipay":
                t.showAuth_codeBox = !0, t.rechargeAuth_code = "", t.rechargeSpbill_create_ip = "122.224.134.196", t.setIntervalId = setInterval(function () {
                    document.getElementById("rechargeAuth_code").focus()
                }, 100);
                break;
            case "cash":
            case "check":
            case "card":
            case "pos":
                t.showRechargeBox = !1, t.promptWARN = !0, t.wordWARN = "支付中";
                var b = {
                    _card: t.chooseCardId,
                    payment: t.rechargePayment
                };
                n.addCard({
                    id: t.members[0]._id
                }, b, function (b) {
                    t.promptWARN = !1, t.promptOK = !0, t.wordOK = "充值成功", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), t.idCard = "", t.checkMember(t.members[0]._id)
                }, function (a) {})
            } else {
                if (!t.chargeCardNum) return t.promptERR = !0, void(t.wordERR = "请输入充值卡卡号");
                if (!t.chargeCardPassword) return t.promptERR = !0, void(t.wordERR = "请输入充值卡密码");
                var c = {
                    cardNum: t.chargeCardNum,
                    password: t.chargeCardPassword
                };
                t.chargeVenue && "speCard" == t.rechargeType && (c = _.merge(c, {
                    _venue: t.chargeVenue._id
                })), q.charge({
                    id: t.members[0]._id
                }, c, function (b) {
                    t.showRechargeBox = !1, t.promptOK = !0, t.wordOK = b.data.data, setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), t.checkMember(t.members[0]._id), t.chargeVenue = "", t.chargeCardNum = "", t.chargeCardPassword = "", t.rechargeType = "cash"
                }, function (a) {
                    "找不到对象：card" == a.data.data ? (t.promptERR = !0, t.wordERR = "充值卡不存在或已使用") : (t.promptERR = !0, t.wordERR = a.data.data)
                })
            }
        }, t.rechargeAuth_codeCreate = function (b) {
            if (t.promptWARN = !0, t.wordWARN = "支付中", 13 == b.keyCode) switch (t.showRechargeBox = !1, t.showAuth_codeBox = !1, clearInterval(t.setIntervalId), t.rechargePayment) {
            case "wx":
                var c = /^[1][0,1,2,3,4,5][0-9]{16}$/;
                if (!c.test(t.rechargeAuth_code)) return t.rechargeAuth_code = "", t.promptWARN = !1, t.promptERR = !0, void(t.wordERR = "支付码错误，重新扫码");
                var d = {
                    _member: t.members[0]._id,
                    _card: t.chooseCardId,
                    auth_code: t.rechargeAuth_code,
                    spbill_create_ip: t.rechargeSpbill_create_ip,
                    payment: "wx"
                };
                p.pay(d, function (b) {
                    t.rechargeAuth_code = "", t.promptWARN = !1, t.promptOK = !0, t.wordOK = "充值成功", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), t.idCard = "", t.checkMember(t.members[0]._id)
                }, function (a) {
                    return t.promptWARN = !1, a.data.data ? (t.promptERR = !0, void(t.wordERR = a.data.data)) : void 0
                });
                break;
            case "alipay":
                var c = /^[25,26,27,28,29,30][0-9]{14,22}$/;
                if (!c.test(t.rechargeAuth_code)) return t.rechargeAuth_code = "", t.promptWARN = !1, t.promptERR = !0, void(t.wordERR = "支付码错误，重新扫码");
                var d = {
                    _member: t.members[0]._id,
                    _card: t.chooseCardId,
                    auth_code: t.rechargeAuth_code,
                    payment: "alipay"
                };
                o.pay(d, function (b) {
                    t.rechargeAuth_code = "", t.promptWARN = !1, t.promptOK = !0, t.wordOK = "充值成功", setTimeout(function () {
                        a.$apply(function () {
                            t.promptOK = !1
                        })
                    }, 1e3), t.idCard = "", t.checkMember(t.members[0]._id)
                }, function (a) {
                    return t.promptWARN = !1, a.data.data ? (t.promptERR = !0, void(t.wordERR = a.data.data)) : void 0
                })
            }
        }, t.chooseChargeVenue = function (a) {
            t.chargeVenue ? t.chargeVenue._id == a._id ? (t.chargeVenue.image = "singleChoose_imageNo2", t.chargeVenue = "") : (t.chargeVenue.image = "singleChoose_imageNo2", t.chargeVenue = a, t.chargeVenue.image = "singleChoose_imageYes2") : (t.chargeVenue = a, t.chargeVenue.image = "singleChoose_imageYes2")
        }, t.enterCheck = function (a) {
            13 == a.keyCode && t.checkMember()
        }, B()
    }
    angular.module("fieldApp").controller("OrgFieldBookCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Time", "Field", "Orderlist", "Venue", "Item", "Member", "Alipay", "Card", "Tucard", "Membertype"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q) {
        var r, s = this;
        s.titleState = f.params.state || "sale", s.paymentArr = [{
            name: "现金",
            value: "cash",
            image: "singleChoose_imageYes"
        }, {
            name: "支付宝",
            value: "alipay",
            image: "singleChoose_imageNo"
        }, {
            name: "微信",
            value: "wx",
            image: "singleChoose_imageNo"
        }, {
            name: "余额",
            value: "member",
            image: "singleChoose_imageNo"
        }], s.page = 1, s.itemsPerPage = 10, s.pagination = {
            page: s.page,
            itemsPerPage: s.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, s.startDate = new Date, s.startDate.setDate(1), s.closeDate = new Date, s.buyPayment = "cash", s.close = function () {
            s.payFlag = !1, s.total = 0, s.auth_code = "", s.resert(), s.tickets = [], "所有场馆" == s.vName ? u() : s.getTicket()
        }, s.judgePay = function (a) {
            if (0 == a.num) s.promptERR = !0, s.wordERR = "请先设置门票数量";
            else {
                s.payFlag = !0, s.total = a.num * a.price, s.buyTickets = [];
                var b = {
                    _ticket: a._id,
                    count: a.num,
                    _venue: a._venue,
                    _item: a._item,
                    showDate: a.showDate
                };
                s._vId = a._venue._id, s.num = a.num, s.ticketName = a.name, s.price = a.price, s.buyTickets.push(b), s.showDate = s.buyTickets[0].showDate, s.venueName = s.buyTickets[0]._venue.name, s.itemName = s.buyTickets[0]._item.name
            }
        }, s.create = function () {
            switch (s.buyPayment) {
            case "cash":
                var a = {
                    payment: s.buyPayment,
                    tickets: s.buyTickets
                };
                q.buy(a, function (a) {
                    s.promptOK = !0, s.wordOK = "购买成功", n(function () {
                        s.promptOK = !1
                    }, 1e3), s.print()
                }, function (a) {
                    s.promptERR = !1, s.wordERR = a.data.data
                });
                break;
            case "wx":
            case "alipay":
            case "member":
                s.showAuth_codeBox = !0, s.setIntervalId = setInterval(function () {
                    document.getElementById("auth_code").focus()
                }, 100)
            }
        }, s.auth_codeCreate = function (a) {
            if (s.promptWARN = !0, s.wordWARN = "支付中", 13 == a.keyCode) switch (console.log(s.buyPayment), s.buyPayment) {
            case "wx":
                var b = {
                    _venue: s._vId,
                    shopProductArr: s.brr,
                    auth_code: s.auth_code,
                    spbill_create_ip: "0.0.0.0",
                    tickets: s.buyTickets
                };
                q.wxBuy(b, function (a) {
                    s.showAuth_codeBox = !1, s.promptOK = !0, s.promptWARN = !1, s.wordOK = "购买成功", clearInterval(s.setIntervalId), s.print(), n(function () {
                        s.promptOK = !1
                    }, 1e3)
                }, function (a) {
                    s.promptERR = !0, s.promptWARN = !1, clearInterval(s.setIntervalId), s.wordERR = a.data.data
                });
                break;
            case "alipay":
                var b = {
                    _venue: s._vId,
                    auth_code: s.auth_code,
                    tickets: s.buyTickets
                };
                l.payTicket(b, function (a) {
                    s.showAuth_codeBox = !1, s.promptOK = !0, s.promptWARN = !1, s.wordOK = "购买成功", clearInterval(s.setIntervalId), s.print(), n(function () {
                        s.promptOK = !1
                    }, 1e3)
                }, function (a) {
                    s.promptWARN = !1, s.promptERR = !0, clearInterval(s.setIntervalId), s.wordERR = a.data.data + ",请更新支付码再支付"
                });
                break;
            case "member":
                var c = {};
                m.index({
                    id: "today"
                }, function (a) {
                    r = a.data;
                    var b = t(s.auth_code);
                    console.log(b), b ? i.index({
                        id: b
                    }, function (a) {
                        var c = {
                            _member: b,
                            payment: s.buyPayment,
                            tickets: s.buyTickets
                        };
                        q.buy(c, function (a) {
                            s.showAuth_codeBox = !1, s.promptOK = !0, n(function () {
                                s.promptOK = !1
                            }, 1e3), s.promptWARN = !1, s.wordOK = "购买成功", clearInterval(s.setIntervalId), s.print()
                        }, function (a) {
                            s.promptERR = !1, s.wordERR = a.data.data
                        })
                    }, function (a) {
                        s.promptERR = !0, s.wordERR = "会员不存在"
                    }) : (c = {
                        cardNo: s.auth_code
                    }, i.indexBycard(c, function (a) {
                        var b = {
                            _member: a.data.member._id,
                            payment: s.buyPayment,
                            tickets: s.buyTickets
                        };
                        q.buy(b, function (a) {
                            s.showAuth_codeBox = !1, s.promptOK = !0, n(function () {
                                s.promptOK = !1
                            }, 1e3), s.promptWARN = !1, s.wordOK = "购买成功", clearInterval(s.setIntervalId), s.print()
                        }, function (a) {
                            s.promptERR = !1, s.wordERR = a.data.data
                        })
                    }, function (a) {
                        s.promptERR = !0, s.wordERR = "会员不存在"
                    }))
                })
            }
        }, s.getNowFormatDate = function (a) {
            var b = "-",
                c = ":",
                d = a.getMonth() + 1,
                e = a.getDate();
            d >= 1 && 9 >= d && (d = "0" + d), e >= 0 && 9 >= e && (e = "0" + e);
            var f = a.getFullYear() + b + d + b + e + " " + a.getHours() + c + a.getMinutes() + c + a.getSeconds();
            return f
        }, s.print = function (a) {
            var b = '<div><div><h3 style="font-size:20px">欢迎光临</h3><h3 style="font-size:20px">购买门票消费小票</h3>操作员：' + s.admin + '</h3></div><span>**********************************</span><div><div style="border-bottom: 1px solid #DADADA;"><table style="width: 100%;"><thead><tr><td width="50%">商品名称</td><td width="20%">数量</td><td width="30%">单价</td></tr></thead>';
            b = b + '<tbody><tr><td style="font-size:36px">' + s.ticketName + "</td><td>" + s.num + "</td><td>" + s.price + "</td></tr>", b = b + "<tr><td>合计</td><td>" + s.total + "</td><td></td></tr></tbody></table></div><span>**********************************</span>", b = b + "<div>时间段:" + s.showDate + "</div><div>场馆:" + s.venueName + "</div><div>项目:" + s.itemName + "</div>", b = b + "<div>消费日期:" + s.getNowFormatDate(new Date) + "</div><span>**********************************</span><div>客户签名:</div>";
            var c = getLodop();
            c.PRINT_INIT(""), c.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), c.SET_PRINTER_INDEXA(-1), c.SET_PRINT_PAGESIZE(3, 800, 100, ""), c.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", b), c.PRINT(), s.close()
        }, s.resert = function () {
            s.showMemberInfo = !1, s.memberTelOrCard = "", s.members = []
        }, s.pageChanged = function () {
            s.getRecord()
        }, s.getRecord = function () {
            n(function () {
                s.startDateFlag = !1, s.closeDateFlag = !1;
                var a = {
                    page: s.pagination.page,
                    itemsPerPage: s.pagination.itemsPerPage,
                    statuses: ["buyTicket"],
                    startDate: s.startDate.getTime(),
                    endDate: s.closeDate.getTime(),
                    name: s.searchName
                };
                k.index(a, function (a) {
                    s.records = a.data.records;
                    var b = a.data.count;
                    s.pagination.totalItems = b, s.pagination.numPages = b / s.itemsPerPage
                })
            }, 100)
        }, s.dealNumber = function (a, b) {
            var c = a.toFixed(3);
            return b ? c.substring(0, c.lastIndexOf(".") + 3) : parseFloat(c.substring(0, c.lastIndexOf(".") + 3))
        }, s.choosePayment = function (a) {
            _.each(s.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", s.buyPayment = a.value
        }, s.changeTitle = function (a) {
            switch (s.titleState = "", a) {
            case "sale":
                s.titleState = "sale", f.go("org-ticket.ticket", {
                    state: "sale"
                });
                break;
            default:
                s.titleState = "record", f.go("org-ticket.record", {
                    state: "record"
                })
            }
            x()
        };
        var t = function (a) {
            var b = a.split("|");
            if (3 != b.length) return !1;
            var a = b[0],
                c = b[1].split(""),
                d = b[2],
                e = d,
                f = parseInt(r / 6e4).toString().split("");
            if (c.length < f.length) return !1;
            for (var g = 0; g < f.length; g++) d = d.replace(f[g], c[g]);
            return d == a ? e : !1
        };
        s.changeNum = function (a, b) {
            if ("add" == b) a.num = 1 * a.num + 1;
            else {
                if (0 == a.num) return;
                a.num = 1 * a.num - 1
            }
        }, s.chooseItem = function (a) {
            s.iId = a._id, s.iName = a.name, s.selectItemFlag = !1, s.tickets = [], "所有场馆" == s.vName ? u() : s.getTicket()
        }, s.chooseVenue = function (a) {
            s.vId = a._id, s.vName = a.name, s.selectVenueFlag = !1, s.tickets = [], "所有场馆" == s.vName ? u() : s.getTicket()
        }, s.getTicket = function () {
            var a = {
                sortBy: "startDate",
                sortValue: "asc",
                _item: s.iId,
                _venue: s.vId
            };
            q.index(a, function (a) {
                _.each(a.data.tickets, function (a) {
                    a.num = 0, s.tickets.push(a)
                }), "所有场馆" == s.vName && s.venues.length > s.i + 1 && (s.i = s.i + 1, s.vId = s.venues[s.i]._id, s.getTicket(s.venues[s.i]))
            }, function () {})
        };
        var u = function () {
                o.index({}, function (a) {
                    s.venues = a.data.venues, s.vrr = [];
                    var b = {
                        name: "所有场馆",
                        _id: ""
                    };
                    s.vName = "所有场馆", s.vId = "", s.vrr.push(b), _.each(s.venues, function (a) {
                        s.vrr.push(a)
                    }), s.tickets = [], s.venues.length > 0 && (s.i = 0, s.vId = s.venues[0]._id, s.getTicket(s.venues[0]))
                }, function () {})
            },
            v = function () {
                j.index({
                    isUsed: !0
                }, function (a) {
                    s.items = a.data.items, s.irr = [];
                    var b = {
                        name: "所有项目",
                        _id: ""
                    };
                    s.iName = "所有项目", s.iId = "", s.irr.push(b), _.each(s.items, function (a) {
                        s.irr.push(a)
                    }), u()
                }, function (a) {})
            };
        s.finish = function () {
            return s.needFlag && !s.cardNum ? void(s.cardFlag = !0) : (s.payFlag = !0, s.defindFlag = !1, void(s.moneyFlag = !0))
        };
        var w = function () {
                e.get({}, function (a) {
                    s.admin = a.data.user.name
                }, function () {})
            },
            x = function () {
                s.getRecord(), v(), w()
            };
        x()
    }
    angular.module("fieldApp").controller("OrgTicketCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "Item", "Record", "Alipay", "Time", "$timeout", "Venue", "Tucard", "Ticket"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        var p = this;
        p.titleState = f.params.state || "field";
        var q = function () {
                k.index({}, function (a) {
                    p.venues = a.data.venues, _.each(p.venues, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), p.chooseVenueName(p.venues[0])
                }, function () {})
            },
            r = function () {
                e.index({
                    role: "checkStand"
                }, function (a) {
                    s(a.data.users)
                }, function () {})
            },
            s = function (a) {
                e.get({}, function (b) {
                    var c = b.data.user._organization ? b.data.user._organization : b.data.user._id;
                    e.getOrgInfo({
                        id: c
                    }, function (b) {
                        p.workers = [{
                            name: "微信",
                            _id: "wx"
                        }].concat(a), _.each(p.workers, function (a) {
                            a.image = "manyChoose_imageNo"
                        }), q()
                    }, function () {})
                }, function () {})
            },
            t = function () {
                p.hasChooseVenue = [], p.hasChooseItem = [], p.hasChooseWorker = [], _.each(p.items, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseItem.push(a)
                }), _.each(p.venues, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseVenue.push(a)
                }), _.each(p.workers, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseWorker.push(a)
                })
            },
            u = function () {
                t(), p.hasChooseItem.length > 0 && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "item" : 0 == p.hasChooseItem.length && p.hasChooseVenue.length > 0 && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "venue" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && p.hasChooseWorker.length > 0 && !p.whatFirst ? p.whatFirst = "worker" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && (p.whatFirst = ""), 0 == p.hasChooseItem.length && "item" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseVenue.length && "venue" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseWorker.length && "worker" == p.whatFirst && (p.whatFirst = "")
            },
            v = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    _.each(p.venues, function (b) {
                        var d = _.findWhere(b.items, {
                            _id: a._id
                        });
                        return d ? void c.push(b) : void 0
                    })
                }), b(c)
            },
            w = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    a.venues && a.venues.length > 0 ? _.each(p.venues, function (b) {
                        var d = _.findWhere(a.venues, {
                            _id: b._id
                        });
                        if (d) {
                            var e = _.findWhere(c, {
                                _id: d._id
                            });
                            if (!e) return void c.push(b)
                        }
                    }) : c = p.venues
                }), b(c)
            },
            x = function (a, b) {
                var c = [];
                return _.each(a, function (a) {
                    _.each(a.items, function (b) {
                        var d = _.findWhere(c, {
                            _id: b._id
                        });
                        d || (c = c.concat(a.items))
                    })
                }), b ? void b(c) : c
            },
            y = function (a, b) {
                var c = [];
                return _.each(p.workers, function (b) {
                    b.venues && b.venues.length > 0 ? _.each(a, function (a) {
                        var d = _.findWhere(b.venues, {
                            _id: a._id
                        });
                        d && c.indexOf(b) < 0 && c.push(b)
                    }) : b.venues || c.push(b)
                }), b ? void b(c) : c
            };
        p.chooseItemName = function (a) {
            B(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseItem.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseItem.splice(p.hasChooseItem.indexOf(a), 1)), u(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "item" == p.whatFirst && v(p.hasChooseItem, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), y(a, function (a) {
                    _.each(p.workers, function (b) {
                        -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                    })
                })
            }), F()
        }, p.chooseVenueName = function (a) {
            if (B(), "manyChoose_imageNo" == a.image) a.image = "manyChoose_imageYes", p.hasChooseVenue.push(a);
            else {
                if (1 == p.hasChooseVenue.length) return p.promptERR = !0, void(p.wordERR = "必须选择一个场馆");
                a.image = "manyChoose_imageNo", p.hasChooseVenue.splice(p.hasChooseVenue.indexOf(a), 1)
            }
            u(), p.whatFirst || (_.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "venue" == p.whatFirst && (x(p.hasChooseVenue, function (a) {
                _.each(p.items, function (b) {
                    var c = _.findWhere(a, {
                        _id: b._id
                    });
                    c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                })
            }), y(p.hasChooseVenue, function (a) {
                _.each(p.workers, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                })
            })), F()
        }, p.chooseWorkerName = function (a) {
            B(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseWorker.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseWorker.splice(p.hasChooseWorker.indexOf(a), 1)), u(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            })), "worker" == p.whatFirst && w(p.hasChooseWorker, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), x(a, function (a) {
                    _.each(p.items, function (b) {
                        var c = _.findWhere(a, {
                            _id: b._id
                        });
                        c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                    })
                })
            }), F()
        };
        var z = function () {
                A(), r()
            },
            A = function () {
                p.hasChooseItem = [], p.hasChooseVenue = [], p.hasChooseWorker = [], p.searchVenueIdArr = [], p.searchItemIdArr = [], p.searchType = "", p.searchWorkerId = "", p.searchPayment = "", p.searchMemberId = "", p.searchMemberType = "", p.whatFirst = "", p.venueArr = [], p.itemArr = [], p.errState = "add", p.errRecordId = "", p.errPrice = "", p.errRemark = "", p.showTypeName = "类型", p.showWorkerName = "提交人", p.showPaymentName = "支付方式", p.showMemberName = "用户名", p.showMemberTypeName = "类型", p.startDate = new Date, p.endDate = new Date, p.paymentArr = [{
                    name: "全部"
                }, {
                    name: "现金支付",
                    value: "cash"
                }, {
                    name: "微信支付",
                    value: "wx"
                }, {
                    name: "支付宝",
                    value: "alipay"
                }, {
                    name: "转账支付",
                    value: "card"
                }, {
                    name: "支票支付",
                    value: "check"
                }, {
                    name: "POS机支付",
                    value: "pos"
                }], _.each(p.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.venues, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.workers, function (a) {
                    a.image = "manyChoose_imageNo"
                }), p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            B = function () {
                p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            C = function () {
                p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1, p.showChooseItemBox = !1, p.showChooseVenueBox = !1, p.showChooseTypeBox = !1, p.showChooseWorkerBox = !1, p.showChooseMemberBox = !1, p.showChoosePaymentBox = !1, p.showChooseMemberTypeBox = !1, p.showChooseWorkerBox = !1, p.showErrChangeBox = !1, p.showPreview = !1, p.showDetail = !1
            },
            D = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            };
        p.pageChanged = function () {
            G()
        }, p.closeChooseStartDateBox = function () {
            C(), B(), setTimeout(function () {
                F()
            }, 100)
        }, p.closeChooseEndDateBox = function () {
            C(), B(), setTimeout(function () {
                F()
            }, 100)
        }, p.choosePaymentName = function (a) {
            p.showChoosePaymentBox = !1, B(), p.showPaymentName = a.name, p.searchPayment = a.value, G()
        }, p.openErrChangeBox = function (a) {
            C(), p.showErrChangeBox = !0, p.errRecordId = a
        }, p.chooseErrState = function (a) {
            "add" == a ? p.errState = "add" : p.errState = "reduce"
        }, p.changeErrRemark = function () {
            if (!p.errPrice) return p.promptERR = !0, void(p.wordERR = "请填写纠错金额");
            if (!p.errRemark) return p.promptERR = !0, void(p.wordERR = "请填写纠错备注");
            var a = {
                _record: p.errRecordId,
                state: p.errState,
                cost: parseFloat(p.errPrice),
                remark: p.errRemark
            };
            i.create({}, a, function () {
                G()
            }, function () {})
        }, p.closePrompt = function () {
            p.promptOK = !1, p.promptERR = !1, p.promptWARN = !1, p.searchWorkerIdArr = [], p.searchPayment = ""
        };
        var E = function (a) {
                var b = 0;
                return b = D((100 * b + 100 * p.resultType.statuses.ticket[a]) / 100), b = D((100 * b + 100 * p.resultType.statuses.memberService[a]) / 100), b = D((100 * b + 100 * p.resultType.statuses.cardFee[a]) / 100), b = D((100 * b + 100 * p.resultType.statuses.bail[a]) / 100), b = D((100 * b + 100 * p.resultType.statuses.refundBail[a]) / 100)
            },
            F = function () {
                p.promptWARN = !0, p.wordWARN = "统计中";
                var a = {
                        startDate: p.startDate.getTime(),
                        endDate: p.endDate.getTime()
                    },
                    b = {
                        startDate: p.startDate.getTime(),
                        endDate: p.endDate.getTime(),
                        status: "makeCard",
                        all: "all"
                    },
                    c = {
                        startDate: p.startDate.getTime(),
                        endDate: p.endDate.getTime(),
                        state: "realNumber",
                        all: "all"
                    };
                p.dateName = "", p.dateName += p.startDate.getFullYear() + "年", p.dateName += p.startDate.getMonth() + 1 > 9 ? p.startDate.getMonth() + 1 + "月" : "0" + (p.startDate.getMonth() + 1) + "月", p.dateName += p.startDate.getDate() > 9 ? p.startDate.getDate() + "日-" : "0" + p.startDate.getDate() + "日-", p.dateName += p.endDate.getFullYear() + "年", p.dateName += p.endDate.getMonth() + 1 > 9 ? p.endDate.getMonth() + 1 + "月" : "0" + (p.endDate.getMonth() + 1) + "月", p.dateName += p.endDate.getDate() > 9 ? p.endDate.getDate() + "日" : "0" + p.endDate.getDate() + "日";
                var d = [];
                p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                    "manyChoose_imageYes" == a.image && (p.searchVenueIdArr.push(a._id), d.push(a))
                }), p.venueName = "";
                for (var e = 0; e < d.length; e++) p.venueName += (0 == e ? "" : "/") + d[e].name;
                p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                    venues: p.searchVenueIdArr
                }));
                var f = [];
                p.searchWorkerIdArr = [], _.each(p.workers, function (a) {
                    "manyChoose_imageYes" == a.image && (p.searchWorkerIdArr.push(a._id), f.push(a))
                }), p.workerName = "";
                for (var e = 0; e < f.length; e++) p.workerName += (0 == e ? "" : "/") + f[e].name;
                console.log(p.workerName), p.searchWorkerIdArr.length > 0 && (a = _.merge(a, {
                    workers: p.searchWorkerIdArr
                }));
                var g = [];
                o.business(a, function (d) {
                    p.result = d.data.statistic, _.each(p.result, function (a) {
                        "wx" != a._worker && "all" != a._worker && g.push(a._worker)
                    }), b = _.merge(b, {
                        workers: g
                    }), c = _.merge(c, {
                        realWorkers: g
                    }), n.index(b, function (b) {
                        var d = b.data.cardRecords;
                        _.each(d, function (a) {
                            var b = _.findWhere(p.result, {
                                    _worker: a._worker
                                }),
                                c = _.findWhere(p.result, {
                                    _worker: "all"
                                });
                            b && (b.issueCardCount = b.issueCardCount ? b.issueCardCount + 1 : 1, c.issueCardCount = c.issueCardCount ? c.issueCardCount + 1 : 1)
                        }), l.index(c, function (b) {
                            var c = b.data.members;
                            _.each(c, function (a) {
                                var b = _.findWhere(p.result, {
                                        _worker: a._realWorker
                                    }),
                                    c = _.findWhere(p.result, {
                                        _worker: "all"
                                    });
                                b && (b.realMemberCount = b.realMemberCount ? b.realMemberCount + 1 : 1, c.realMemberCount = c.realMemberCount ? c.realMemberCount + 1 : 1)
                            }), a.venues = ["5a1e4774138f87e51c2e79e9"], o.type(a, function (a) {
                                p.resultType = a.data.statistic[a.data.statistic.length - 1], p.resultType.statuses.cardFee.quantity = p.resultType.statuses.cardFee.subtotal / 20, p.resultType.statuses.bail.quantity = p.resultType.statuses.bail.subtotal / 20, p.resultType.statuses.refundBail.quantity = p.resultType.statuses.refundBail.subtotal / -20, p.resultType.wxTotal = E("wx"), p.resultType.alipayTotal = E("alipay"), p.resultType.cashTotal = E("cash"), p.resultType.cardTotal = E("card"), p.resultType.checkTotal = E("check"), p.resultType.posTotal = E("pos"), p.resultType.subtotal = 0, p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.wxTotal) / 100), p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.alipayTotal) / 100), p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.cashTotal) / 100), p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.cardTotal) / 100), p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.checkTotal) / 100), p.resultType.subtotal = D((100 * p.resultType.subtotal + 100 * p.resultType.posTotal) / 100), p.searchVenueIdArr.indexOf("5a1e4774138f87e51c2e79e9") > -1 ? p.baoyugang = !0 : p.baoyugang = !1, p.promptWARN = !1
                            }, function () {})
                        }, function () {})
                    }, function () {})
                }, function () {})
            };
        p["export"] = function (a) {
            var b = p.dateName + p.venueName + "的" + p.workerName + "收入汇总表";
            setTimeout(function () {
                execl1(a, b)
            }, 100)
        }, p.initCondition = function (a) {
            a ? "微信" == a ? p.searchWorkerIdArr = ["wx"] : p.searchWorkerName = a : (p.searchWorkerIdArr = [], _.each(p.workers, function (a) {
                "manyChoose_imageYes" == a.image && p.searchWorkerIdArr.push(a._id)
            })), G()
        };
        var G = function () {
            var a = {
                page: p.pagination.page,
                itemsPerPage: p.pagination.itemsPerPage,
                state: "other"
            };
            p.startDate && p.endDate && (a = _.merge(a, {
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            })), p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && p.searchVenueIdArr.push(a._id)
            }), p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: p.searchVenueIdArr
            })), p.searchWorkerIdArr.length > 0 && (a = _.merge(a, {
                workers: p.searchWorkerIdArr
            })), p.searchWorkerName && (a = _.merge(a, {
                workerName: p.searchWorkerName
            })), p.searchPayment && (a = _.merge(a, {
                payments: [p.searchPayment]
            })), i.index(a, function (a) {
                if (p.recordsDetail = a.data.records, !(p.recordsDetail.length > 0)) return p.promptERR = !0, void(p.wordERR = "暂无记录");
                p.showDetail = !0;
                var b = 1;
                _.each(p.recordsDetail, function (a) {
                    if (a.index = b, b++, a.state) a.cost = ("add" == a.state ? "+" : "-") + a.cost;
                    else switch (a.status) {
                    case "pay":
                    case "buy":
                    case "buyProduct":
                    case "buyShopProduct":
                    case "buySpe":
                    case "bindCard":
                        a.cost = "+" + a.cost;
                        break;
                    case "refund":
                    case "cardRefund":
                    case "refundProduct":
                    case "refundShopProduct":
                    case "refundSpe":
                        a.cost = "-" + a.cost
                    }
                    switch (a.payment) {
                    case "wx":
                        a.payment = "微信支付";
                        break;
                    case "card":
                        a.payment = "转账支付";
                        break;
                    case "cash":
                        a.payment = "现金支付";
                        break;
                    case "alipay":
                        a.payment = "支付宝支付";
                        break;
                    case "check":
                        a.payment = "支票支付";
                        break;
                    case "pos":
                        a.payment = "POS机支付";
                        break;
                    default:
                        a.payment = "无"
                    }
                });
                var c = a.data.count;
                p.pagination.totalItems = c, p.pagination.numPages = c / p.itemsPerPage
            }, function () {})
        };
        p.close = function () {
            C(), p.searchWorkerIdArr = [], p.searchPayment = "", B()
        }, z()
    }
    angular.module("fieldApp").controller("OrgFinanceCashallCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Record", "Item", "Venue", "Member", "Product", "Cardrecords", "Finance"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
        var q = this;
        q.titleState = f.params.state || "field";
        var r = function () {
                q.items = [], _.each(q.venues, function (a) {
                    _.each(a.items, function (a) {
                        q.items.indexOf(a) < 0 && q.items.push(a)
                    })
                }), _.each(q.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), q.chooseVenueName(q.venues[0])
            },
            s = function () {
                k.index({}, function (a) {
                    q.venues = a.data.venues, _.each(q.venues, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), r()
                }, function () {})
            },
            t = function (a) {
                p.show({
                    id: a
                }, function (a) {
                    q.secondCategories = [{
                        name: "全部",
                        _id: ""
                    }].concat(a.data.productcategory.secondCategories)
                }, function () {})
            },
            u = function (a) {
                m.index({
                    _secondCategory: a
                }, function (a) {
                    q.products = a.data.products
                }, function () {})
            },
            v = function () {
                q.hasChooseVenue = [], q.hasChooseItem = [], q.hasChooseWorker = [], _.each(q.items, function (a) {
                    "manyChoose_imageYes" == a.image && q.hasChooseItem.push(a)
                }), _.each(q.venues, function (a) {
                    "manyChoose_imageYes" == a.image && q.hasChooseVenue.push(a)
                }), _.each(q.workers, function (a) {
                    "manyChoose_imageYes" == a.image && q.hasChooseWorker.push(a)
                })
            },
            w = function () {
                v(), q.hasChooseItem.length > 0 && 0 == q.hasChooseVenue.length && 0 == q.hasChooseWorker.length && !q.whatFirst ? q.whatFirst = "item" : 0 == q.hasChooseItem.length && q.hasChooseVenue.length > 0 && 0 == q.hasChooseWorker.length && !q.whatFirst ? q.whatFirst = "venue" : 0 == q.hasChooseItem.length && 0 == q.hasChooseVenue.length && q.hasChooseWorker.length > 0 && !q.whatFirst ? q.whatFirst = "worker" : 0 == q.hasChooseItem.length && 0 == q.hasChooseVenue.length && 0 == q.hasChooseWorker.length && (q.whatFirst = ""), 0 == q.hasChooseItem.length && "item" == q.whatFirst && (q.whatFirst = ""), 0 == q.hasChooseVenue.length && "venue" == q.whatFirst && (q.whatFirst = ""), 0 == q.hasChooseWorker.length && "worker" == q.whatFirst && (q.whatFirst = "")
            },
            x = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    _.each(q.venues, function (b) {
                        var d = _.findWhere(b.items, {
                            _id: a._id
                        });
                        return d ? void c.push(b) : void 0
                    })
                }), b(c)
            },
            y = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    a.venues && a.venues.length > 0 ? _.each(q.venues, function (b) {
                        var d = _.findWhere(a.venues, {
                            _id: b._id
                        });
                        if (d) {
                            var e = _.findWhere(c, {
                                _id: d._id
                            });
                            if (!e) return void c.push(b)
                        }
                    }) : c = q.venues
                }), b(c)
            },
            z = function (a, b) {
                var c = [];
                return _.each(a, function (a) {
                    _.each(a.items, function (b) {
                        var d = _.findWhere(c, {
                            _id: b._id
                        });
                        d || (c = c.concat(a.items))
                    })
                }), b ? void b(c) : c
            },
            A = function (a, b) {
                var c = [];
                return _.each(q.workers, function (b) {
                    b.venues && b.venues.length > 0 ? _.each(a, function (a) {
                        var d = _.findWhere(b.venues, {
                            _id: a._id
                        });
                        d && c.push(b)
                    }) : c.push(b)
                }), b ? void b(c) : c
            };
        q.chooseItemName = function (a) {
            D(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", q.hasChooseItem.push(a)) : (a.image = "manyChoose_imageNo", q.hasChooseItem.splice(q.hasChooseItem.indexOf(a), 1)), w(), q.whatFirst || (_.each(q.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(q.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "item" == q.whatFirst && x(q.hasChooseItem, function (a) {
                _.each(q.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), A(a, function (a) {
                    _.each(q.workers, function (b) {
                        -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                    })
                })
            }), G()
        }, q.chooseVenueName = function (a) {
            if (D(), "manyChoose_imageNo" == a.image) a.image = "manyChoose_imageYes", q.hasChooseVenue.push(a);
            else {
                if (1 == q.hasChooseVenue.length) return q.promptERR = !0, void(q.wordERR = "必须选择一个场馆");
                a.image = "manyChoose_imageNo", q.hasChooseVenue.splice(q.hasChooseVenue.indexOf(a), 1)
            }
            w(), q.whatFirst || (_.each(q.items, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(q.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "venue" == q.whatFirst && (z(q.hasChooseVenue, function (a) {
                _.each(q.items, function (b) {
                    var c = _.findWhere(a, {
                        _id: b._id
                    });
                    c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                })
            }), A(q.hasChooseVenue, function (a) {
                _.each(q.workers, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                })
            })), G()
        }, q.chooseWorkerName = function (a) {
            D(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", q.hasChooseWorker.push(a)) : (a.image = "manyChoose_imageNo", q.hasChooseWorker.splice(q.hasChooseWorker.indexOf(a), 1)), w(), q.whatFirst || (_.each(q.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(q.items, function (a) {
                a.image = "manyChoose_imageNo"
            })), "worker" == q.whatFirst && y(q.hasChooseWorker, function (a) {
                _.each(q.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), z(a, function (a) {
                    _.each(q.items, function (b) {
                        var c = _.findWhere(a, {
                            _id: b._id
                        });
                        c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                    })
                })
            }), G()
        };
        var B = function () {
                C(), s()
            },
            C = function () {
                q.hasChooseItem = [], q.hasChooseVenue = [], q.hasChooseWorker = [], q.searchVenueIdArr = [], q.searchItemIdArr = [], q.searchType = "", q.searchWorkerId = "", q.searchPayment = "", q.searchMemberId = "", q.searchMemberType = "", q.whatFirst = "", q.venueArr = [], q.itemArr = [], q.errState = "add", q.errRecordId = "", q.errPrice = "", q.errRemark = "", q.showTypeName = "类型", q.showWorkerName = "提交人", q.showPaymentName = "支付方式", q.showMemberName = "用户名", q.showMemberTypeName = "类型", q.startDate = new Date, q.endDate = new Date, q.searchProduct = "选择综合服务", q.searchSecond = "选择二级分类", q.paymentArr = [{
                    name: "全部"
                }, {
                    name: "现金支付",
                    value: "cash"
                }, {
                    name: "微信支付",
                    value: "wx"
                }, {
                    name: "支付宝支付",
                    value: "alipay"
                }, {
                    name: "转账支付",
                    value: "card"
                }, {
                    name: "支票支付",
                    value: "check"
                }, {
                    name: "POS机支付",
                    value: "pos"
                }, {
                    name: "余额支付",
                    value: "member"
                }, {
                    name: "虚拟卡支付",
                    value: "member_vir"
                }, {
                    name: "专用账户支付",
                    value: "member_spe"
                }], _.each(q.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(q.venues, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(q.workers, function (a) {
                    a.image = "manyChoose_imageNo"
                }), q.page = 1, q.itemsPerPage = 10, q.pagination = {
                    page: q.page,
                    itemsPerPage: q.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            D = function () {
                q.page = 1, q.itemsPerPage = 10, q.pagination = {
                    page: q.page,
                    itemsPerPage: q.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            E = function () {
                q.showChooseStartDateBox = !1, q.showChooseEndDateBox = !1, q.showChooseItemBox = !1, q.showChooseVenueBox = !1, q.showChooseTypeBox = !1, q.showChooseWorkerBox = !1, q.showChooseMemberBox = !1, q.showChoosePaymentBox = !1, q.showChooseMemberTypeBox = !1, q.showChooseWorkerBox = !1, q.showErrChangeBox = !1, q.showPreview = !1, q.showDetail = !1
            },
            F = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            };
        q.pageChanged = function () {
            H()
        }, q.closeChooseStartDateBox = function () {
            E(), D(), setTimeout(function () {
                G()
            }, 100)
        }, q.closeChooseEndDateBox = function () {
            E(), D(), setTimeout(function () {
                G()
            }, 100)
        }, q.chooseTypeName = function (a) {
            E(), D(), q.showTypeName = a.name, q.searchType = a.value, H()
        }, q.chooseMemberName = function (a) {
            E(), D(), q.showMemberName = a.name, "tourist" == a.value ? q.searchMemberId = "tourist" : q.searchMemberId = a._id, H()
        }, q.choosePaymentName = function (a) {
            q.showChoosePaymentBox = !1, D(), q.showPaymentName = a.name, q.searchPayment = a.value, H()
        }, q.openErrChangeBox = function (a) {
            E(), q.showErrChangeBox = !0, q.errRecordId = a
        }, q.chooseErrState = function (a) {
            "add" == a ? q.errState = "add" : q.errState = "reduce"
        }, q.changeErrRemark = function () {
            if (!q.errPrice) return q.promptERR = !0, void(q.wordERR = "请填写纠错金额");
            if (!q.errRemark) return q.promptERR = !0, void(q.wordERR = "请填写纠错备注");
            var a = {
                _record: q.errRecordId,
                state: q.errState,
                cost: parseFloat(q.errPrice),
                remark: q.errRemark
            };
            i.create({}, a, function () {
                H()
            }, function () {})
        }, q.closePrompt = function () {
            q.promptOK = !1, q.promptERR = !1, q.promptWARN = !1, q.searchWorkerIdArr = [], q.searchPayment = ""
        };
        var G = function () {
            q.promptWARN = !0, q.wordWARN = "统计中";
            var a = {
                all: "all",
                state: "field",
                startDate: q.startDate.getTime(),
                endDate: q.endDate.getTime()
            };
            q.dateName = "", q.dateName += q.startDate.getFullYear() + "年", q.dateName += q.startDate.getMonth() + 1 > 9 ? q.startDate.getMonth() + 1 + "月" : "0" + (q.startDate.getMonth() + 1) + "月", q.dateName += q.startDate.getDate() > 9 ? q.startDate.getDate() + "日-" : "0" + q.startDate.getDate() + "日-", q.dateName += q.endDate.getFullYear() + "年", q.dateName += q.endDate.getMonth() + 1 > 9 ? q.endDate.getMonth() + 1 + "月" : "0" + (q.endDate.getMonth() + 1) + "月", q.dateName += q.endDate.getDate() > 9 ? q.endDate.getDate() + "日" : "0" + q.endDate.getDate() + "日";
            var b = [];
            q.searchVenueIdArr = [], _.each(q.venues, function (a) {
                "manyChoose_imageYes" == a.image && (q.searchVenueIdArr.push(a._id), b.push(a))
            }), q.venueName = "";
            for (var c = 0; c < b.length; c++) q.venueName += (0 == c ? "" : "/") + b[c].name;
            q.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: q.searchVenueIdArr
            })), q.searchItemIdArr = [], _.each(q.items, function (a) {
                "manyChoose_imageYes" == a.image && q.searchItemIdArr.push(a._id)
            }), q.searchItemIdArr.length > 0 && (a = _.merge(a, {
                items: q.searchItemIdArr
            })), o.income(a, function (a) {
                q.itemAndProduct = a.data.statistic.itemAndProduct, q.firstcategory = a.data.statistic.firstcategory, _.each(q.itemAndProduct, function (a) {
                    a.payment.cashAll = 0, a.payment.cashAll = F(a.payment.cashAll + a.payment.wx + a.payment.alipay + a.payment.cash + a.payment.card + a.payment.check + a.payment.pos)
                }), _.each(q.firstcategory, function (a) {
                    a.payment.cashAll = 0, a.payment.cashAll = F(a.payment.cashAll + a.payment.wx + a.payment.alipay + a.payment.cash + a.payment.card + a.payment.check + a.payment.pos)
                }), q.all = _.findWhere(q.itemAndProduct, {
                    _ip: "all"
                });
                for (var b = 0, c = !0, d = 0, e = 0; e < q.itemAndProduct.length; e++) "product" == q.itemAndProduct[e].state && (c && (b = e, c = !1), d++);
                q.itemAndProduct.splice(q.itemAndProduct.indexOf(q.all), 1), 0 == q.searchItemIdArr.length && q.itemAndProduct.splice(b, d), q.promptWARN = !1
            }, function () {})
        };
        q["export"] = function () {
            var a = q.dateName + q.venueName + "的消费汇总表";
            setTimeout(function () {
                execl1("alltable", a)
            }, 100)
        }, q.changeStatus = function (a) {
            D(), q.searchStatus = a, H()
        }, q.initCondition = function (a) {
            if ("item" == a.state) q.searchItemId2 = a._ip;
            else if ("product" == a.state) q.searchStatus = "other", q.searchProductId = a._ip;
            else if ("firstcategory" == a.state) {
                q.searchStatus = "other", q.searchFirstCategoryId = a._ip;
                var b = [];
                _.each(q.venues, function (a) {
                    "manyChoose_imageYes" == a.image && b.push(a)
                }), q.secondCategories = [], q.searchSecond = "选择二级分类", q._searchSecond = "", q.products = [], q.searchProduct = "选择综合服务", q._searchProduct = "", t(q.searchFirstCategoryId)
            }
            H()
        }, q.chooseSecond = function (a) {
            q.openShowSearchSecond = !1, q.searchSecond = a.name, q._searchSecond = a._id, q.products = [], q.searchProduct = "选择综合服务", q._searchProduct = "", H(), u(q._searchSecond)
        }, q.chooseProduct = function (a) {
            q.openShowSearchProduct = !1, q.searchProduct = a.name, q._searchProduct = a._id, H()
        }, q.searchDetail = function () {
            D(), H()
        }, q.exportDetail = function () {
            var a = {
                all: "all",
                state: "field"
            };
            q.startDate && q.endDate && (a = _.merge(a, {
                startDate: q.startDate.getTime(),
                endDate: q.endDate.getTime()
            })), q.searchVenueIdArr = [], _.each(q.venues, function (a) {
                "manyChoose_imageYes" == a.image && q.searchVenueIdArr.push(a._id)
            }), q.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: q.searchVenueIdArr
            })), q.searchItemId2 ? a = _.merge(a, {
                items: [q.searchItemId2]
            }) : q.searchProductId ? a = _.merge(a, {
                _product: q.searchProductId
            }) : q.searchFirstCategoryId && (a = _.merge(a, {
                _firstCategory: q.searchFirstCategoryId
            })), q.searchPayment && (a = _.merge(a, {
                payments: [q.searchPayment]
            })), q.searchRecordRemark && (a = _.merge(a, {
                description: q.searchRecordRemark
            })), q._searchProduct && (a = _.merge(a, {
                _product: q._searchProduct
            })), q._searchSecond && (a = _.merge(a, {
                _secondCategory: q._searchSecond
            })), a = "other" == q.searchStatus ? _.merge(a, {
                statuses: ["buyProduct", "refundProduct", "buyTicket"]
            }) : _.merge(a, {
                statuses: ["pay", "refund"],
                sortBy: "checkDate"
            }), i.index(a, function (a) {
                q.exportRecordsDetail = a.data.records, _.each(q.exportRecordsDetail, function (a) {
                    if (a.state) a.cost = ("add" == a.state ? "+" : "-") + a.cost;
                    else switch (a.status) {
                    case "pay":
                    case "buy":
                    case "buyProduct":
                    case "buyShopProduct":
                    case "buySpe":
                    case "bindCard":
                        a.cost = "+" + a.cost;
                        break;
                    case "refund":
                    case "cardRefund":
                    case "refundProduct":
                    case "refundShopProduct":
                    case "refundSpe":
                        a.cost = "-" + a.cost
                    }
                    switch (a.payment) {
                    case "wx":
                        a.payment = "微信支付";
                        break;
                    case "card":
                        a.payment = "转账支付";
                        break;
                    case "cash":
                        a.payment = "现金支付";
                        break;
                    case "alipay":
                        a.payment = "支付宝支付";
                        break;
                    case "check":
                        a.payment = "支票支付";
                        break;
                    case "pos":
                        a.payment = "POS机支付";
                        break;
                    case "member":
                        a.payment = "余额支付";
                        break;
                    case "member_vir":
                        a.payment = "虚拟卡支付";
                        break;
                    case "member_spe":
                        a.payment = "专用账户支付";
                        break;
                    default:
                        a.payment = "无"
                    }
                });
                var b = "明细表";
                setTimeout(function () {
                    execl1("alltable2", b)
                }, 100)
            }, function () {})
        };
        var H = function () {
            var a = {
                page: q.pagination.page,
                itemsPerPage: q.pagination.itemsPerPage,
                state: "field"
            };
            q.startDate && q.endDate && (a = _.merge(a, {
                startDate: q.startDate.getTime(),
                endDate: q.endDate.getTime()
            })), q.searchVenueIdArr = [], _.each(q.venues, function (a) {
                "manyChoose_imageYes" == a.image && q.searchVenueIdArr.push(a._id)
            }), q.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: q.searchVenueIdArr
            })), q.searchItemId2 ? a = _.merge(a, {
                items: [q.searchItemId2]
            }) : q.searchProductId ? a = _.merge(a, {
                _product: q.searchProductId
            }) : q.searchFirstCategoryId && (a = _.merge(a, {
                _firstCategory: q.searchFirstCategoryId
            })), q.searchPayment && (a = _.merge(a, {
                payments: [q.searchPayment]
            })), q.searchRecordRemark && (a = _.merge(a, {
                description: q.searchRecordRemark
            })), q.searchProductContacts && (a = _.merge(a, {
                productContacts: q.searchProductContacts
            })), q._searchProduct && (a = _.merge(a, {
                _product: q._searchProduct
            })), q._searchSecond && (a = _.merge(a, {
                _secondCategory: q._searchSecond
            })), a = "other" == q.searchStatus ? _.merge(a, {
                statuses: ["buyProduct", "refundProduct", "buyTicket"]
            }) : _.merge(a, {
                statuses: ["pay", "refund"],
                sortBy: "checkDate"
            }), i.index(a, function (b) {
                q.recordsDetail = b.data.records, q.showDetail = !0, _.each(q.recordsDetail, function (a) {
                    if (a.state) a.cost = ("add" == a.state ? "+" : "-") + a.cost;
                    else switch (a.status) {
                    case "pay":
                    case "buyProduct":
                        a.cost = "+" + a.cost;
                        break;
                    case "refund":
                    case "refundProduct":
                        a.cost = "-" + a.cost
                    }
                    switch (a.payment) {
                    case "wx":
                        a.payment = "微信支付";
                        break;
                    case "card":
                        a.payment = "转账支付";
                        break;
                    case "cash":
                        a.payment = "现金支付";
                        break;
                    case "alipay":
                        a.payment = "支付宝支付";
                        break;
                    case "check":
                        a.payment = "支票支付";
                        break;
                    case "pos":
                        a.payment = "POS机支付";
                        break;
                    case "member":
                        a.payment = "余额支付";
                        break;
                    case "member_vir":
                        a.payment = "虚拟卡支付";
                        break;
                    case "member_spe":
                        a.payment = "专用账户支付";
                        break;
                    default:
                        a.payment = "无"
                    }
                });
                var c = b.data.count;
                q.pagination.totalItems = c, q.pagination.numPages = c / q.itemsPerPage, a = _.merge(a, {
                    all: "total"
                }), i.index(a, function (a) {
                    q.cost = a.data.total
                }, function () {})
            }, function () {})
        };
        q.close = function () {
            E(), q.searchItemId2 = "", q.searchProductId = "", q.searchFirstCategoryId = "", q.searchPayment = "", q.searchStatus = "field", q.showPaymentName = "支付方式", q.searchPayment = "", q.searchProduct = "选择综合服务", q._searchProduct = "", D()
        }, B()
    }
    angular.module("fieldApp").controller("OrgFinanceFieldCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Record", "Item", "Venue", "Member", "Product", "Cardrecords", "Finance", "Productcategory"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        var p = this,
            q = function () {
                k.index({}, function (a) {
                    p.venues = a.data.venues, _.each(p.venues, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), p.chooseVenueName(p.venues[0])
                }, function () {})
            },
            r = function () {
                e.index({
                    role: "checkStand"
                }, function (a) {
                    p.workers = [{
                        name: "微信",
                        _id: "wx"
                    }].concat(a.data.users), _.each(p.workers, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), q()
                }, function () {})
            },
            s = function () {
                p.hasChooseVenue = [], p.hasChooseItem = [], p.hasChooseWorker = [], _.each(p.items, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseItem.push(a)
                }), _.each(p.venues, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseVenue.push(a)
                }), _.each(p.workers, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseWorker.push(a)
                })
            },
            t = function () {
                s(), p.hasChooseItem.length > 0 && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "item" : 0 == p.hasChooseItem.length && p.hasChooseVenue.length > 0 && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "venue" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && p.hasChooseWorker.length > 0 && !p.whatFirst ? p.whatFirst = "worker" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && (p.whatFirst = ""), 0 == p.hasChooseItem.length && "item" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseVenue.length && "venue" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseWorker.length && "worker" == p.whatFirst && (p.whatFirst = "")
            },
            u = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    _.each(p.venues, function (b) {
                        var d = _.findWhere(b.items, {
                            _id: a._id
                        });
                        return d ? void c.push(b) : void 0
                    })
                }), b(c)
            },
            v = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    a.venues && a.venues.length > 0 ? _.each(p.venues, function (b) {
                        var d = _.findWhere(a.venues, {
                            _id: b._id
                        });
                        if (d) {
                            var e = _.findWhere(c, {
                                _id: d._id
                            });
                            if (!e) return void c.push(b)
                        }
                    }) : c = p.venues
                }), b(c)
            },
            w = function (a, b) {
                var c = [];
                return _.each(a, function (a) {
                    _.each(a.items, function (b) {
                        var d = _.findWhere(c, {
                            _id: b._id
                        });
                        d || (c = c.concat(a.items))
                    })
                }), b ? void b(c) : c
            },
            x = function (a, b) {
                var c = [];
                return _.each(p.workers, function (b) {
                    b.venues && b.venues.length > 0 ? _.each(a, function (a) {
                        var d = _.findWhere(b.venues, {
                            _id: a._id
                        });
                        d && c.push(b)
                    }) : c.push(b)
                }), b ? void b(c) : c
            };
        p.chooseItemName = function (a) {
            A(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseItem.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseItem.splice(p.hasChooseItem.indexOf(a), 1)), t(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "item" == p.whatFirst && u(p.hasChooseItem, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), x(a, function (a) {
                    _.each(p.workers, function (b) {
                        -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                    })
                })
            }), D()
        }, p.chooseVenueName = function (a) {
            if (A(), "manyChoose_imageNo" == a.image) a.image = "manyChoose_imageYes", p.hasChooseVenue.push(a);
            else {
                if (1 == p.hasChooseVenue.length) return p.promptERR = !0, void(p.wordERR = "必须选择一个场馆");
                a.image = "manyChoose_imageNo", p.hasChooseVenue.splice(p.hasChooseVenue.indexOf(a), 1)
            }
            t(), p.whatFirst || (_.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "venue" == p.whatFirst && (w(p.hasChooseVenue, function (a) {
                _.each(p.items, function (b) {
                    var c = _.findWhere(a, {
                        _id: b._id
                    });
                    c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                })
            }), x(p.hasChooseVenue, function (a) {
                _.each(p.workers, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                })
            })), D()
        }, p.chooseWorkerName = function (a) {
            A(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseWorker.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseWorker.splice(p.hasChooseWorker.indexOf(a), 1)), t(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            })), "worker" == p.whatFirst && v(p.hasChooseWorker, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), w(a, function (a) {
                    _.each(p.items, function (b) {
                        var c = _.findWhere(a, {
                            _id: b._id
                        });
                        c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                    })
                })
            }), D()
        };
        var y = function () {
                z(), r()
            },
            z = function () {
                p.hasChooseItem = [], p.hasChooseVenue = [], p.hasChooseWorker = [], p.searchVenueIdArr = [], p.searchItemIdArr = [], p.searchType = "", p.searchWorkerId = "", p.searchPayment = "", p.searchMemberId = "", p.searchMemberType = "", p.whatFirst = "", p.venueArr = [], p.itemArr = [], p.errState = "add", p.errRecordId = "", p.errPrice = "", p.errRemark = "", p.showTypeName = "类型", p.showWorkerName = "提交人", p.showPaymentName = "支付方式", p.showMemberName = "用户名", p.showMemberTypeName = "类型", p.startDate = new Date, p.endDate = new Date, p.paymentArr = [{
                    name: "全部"
                }, {
                    name: "微信支付",
                    value: "wx"
                }, {
                    name: "支付宝支付",
                    value: "alipay"
                }], _.each(p.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.venues, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.workers, function (a) {
                    a.image = "manyChoose_imageNo"
                }), p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            A = function () {
                p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            B = function () {
                p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1, p.showChooseItemBox = !1, p.showChooseVenueBox = !1, p.showChooseTypeBox = !1, p.showChooseWorkerBox = !1, p.showChooseMemberBox = !1, p.showChoosePaymentBox = !1, p.showChooseMemberTypeBox = !1, p.showChooseWorkerBox = !1, p.showErrChangeBox = !1, p.showPreview = !1, p.showDetail = !1
            },
            C = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            };
        p.pageChanged = function () {
            E()
        }, p.closeChooseStartDateBox = function () {
            B(), A(), setTimeout(function () {
                D()
            }, 100)
        }, p.closeChooseEndDateBox = function () {
            B(), A(), setTimeout(function () {
                D()
            }, 100)
        }, p.choosePaymentName = function (a) {
            p.showChoosePaymentBox = !1, A(), p.showPaymentName = a.name, p.searchPayment = a.value, E()
        }, p.openErrChangeBox = function (a) {
            B(), p.showErrChangeBox = !0, p.errRecordId = a
        }, p.chooseErrState = function (a) {
            "add" == a ? p.errState = "add" : p.errState = "reduce"
        }, p.changeErrRemark = function () {
            if (!p.errPrice) return p.promptERR = !0, void(p.wordERR = "请填写纠错金额");
            if (!p.errRemark) return p.promptERR = !0, void(p.wordERR = "请填写纠错备注");
            var a = {
                _record: p.errRecordId,
                state: p.errState,
                cost: parseFloat(p.errPrice),
                remark: p.errRemark
            };
            Record.create({}, a, function () {
                E()
            }, function () {})
        }, p.closePrompt = function () {
            p.promptOK = !1, p.promptERR = !1, p.promptWARN = !1, p.searchWorkerIdArr = [], p.searchPayment = ""
        };
        var D = function () {
            p.promptWARN = !0, p.wordWARN = "统计中";
            var a = {
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            };
            p.dateName = "", p.dateName += p.startDate.getFullYear() + "年", p.dateName += p.startDate.getMonth() + 1 > 9 ? p.startDate.getMonth() + 1 + "月" : "0" + (p.startDate.getMonth() + 1) + "月", p.dateName += p.startDate.getDate() > 9 ? p.startDate.getDate() + "日-" : "0" + p.startDate.getDate() + "日-", p.dateName += p.endDate.getFullYear() + "年", p.dateName += p.endDate.getMonth() + 1 > 9 ? p.endDate.getMonth() + 1 + "月" : "0" + (p.endDate.getMonth() + 1) + "月", p.dateName += p.endDate.getDate() > 9 ? p.endDate.getDate() + "日" : "0" + p.endDate.getDate() + "日";
            var b = [];
            p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && (p.searchVenueIdArr.push(a._id), b.push(a))
            }), p.venueName = "";
            for (var c = 0; c < b.length; c++) p.venueName += (0 == c ? "" : "/") + b[c].name;
            p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: p.searchVenueIdArr
            })), p.searchWorkerIdArr = [], _.each(p.workers, function (a) {
                "manyChoose_imageYes" == a.image && p.searchWorkerIdArr.push(a._id)
            }), p.searchWorkerIdArr.length > 0 && (a = _.merge(a, {
                workers: p.searchWorkerIdArr
            }));
            o.prepIncome(a, function (a) {
                p.result = a.data.statistic, p.promptWARN = !1
            }, function () {})
        };
        p["export"] = function () {
            var a = p.dateName + p.venueName + "的微信支付宝收入汇总表";
            setTimeout(function () {
                execl1("alltable", a)
            }, 100)
        }, p.initCondition = function (a) {
            a && ("微信" == a ? p.searchWorkerIdArr = ["wx"] : "合计" == a ? p.searchWorkerName = void 0 : p.searchWorkerName = a), E()
        };
        var E = function () {
            var a = {
                page: p.pagination.page,
                itemsPerPage: p.pagination.itemsPerPage,
                state: "shop"
            };
            p.startDate && p.endDate && (a = _.merge(a, {
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            })), p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && p.searchVenueIdArr.push(a._id)
            }), p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: p.searchVenueIdArr
            })), 1 == p.searchWorkerIdArr.length && (a = _.merge(a, {
                _worker: p.searchWorkerIdArr[0]
            })), p.searchWorkerName && (a = _.merge(a, {
                workerName: p.searchWorkerName
            })), p.searchPayment && (a = _.merge(a, {
                payment: p.searchPayment
            })), i.index(a, function (a) {
                if (p.prepordersDetail = a.data.preporders, !(p.prepordersDetail.length > 0)) return p.promptERR = !0, void(p.wordERR = "暂无记录");
                p.showDetail = !0, _.each(p.prepordersDetail, function (a) {
                    switch (a.total_fee = C(a.total_fee / 100), a.status) {
                    case "buyMicropay":
                        a.status = "微信扫码购卡充值";
                        break;
                    case "payMicropay":
                        a.status = "微信扫码预订场地";
                        break;
                    case "shopProductMicropay":
                        a.status = "微信扫码购买商品";
                        break;
                    case "productMicropay":
                        a.status = "微信扫码购买综合服务";
                        break;
                    case "bindMicropay":
                        a.status = "微信扫码扣工本费";
                        break;
                    case "buySpeMicropay":
                        a.status = "微信扫码充值专用账户";
                        break;
                    case "buyMicropay&bindMicropay":
                        a.status = "微信扫码购卡充值并扣工本费";
                        break;
                    case "depositMicropay":
                        a.status = "微信扫码充值";
                        break;
                    case "buyServiceMicropay":
                        a.status = "微信扫码购卡购买会员服务", a.bail && (a.status += "并扣保证金");
                        break;
                    case "buyServiceMicropay&bindMicropay":
                        a.status = "微信扫码购卡购买会员服务并扣工本费", a.bail && (a.status += "并扣保证金");
                        break;
                    case "overtimeMicropay":
                        a.status = "微信扫码支付超时费用";
                        break;
                    case "bailMicropay":
                        a.status = "微信扫码支付押金";
                        break;
                    case "buyalipay":
                        a.status = "支付宝扫码购卡充值";
                        break;
                    case "payalipay":
                        a.status = "支付宝扫码预订场地";
                        break;
                    case "shopProductalipay":
                        a.status = "支付宝扫码购买商品";
                        break;
                    case "productalipay":
                        a.status = "支付宝扫码购买综合服务";
                        break;
                    case "bindalipay":
                        a.status = "支付宝扫码扣工本费";
                        break;
                    case "buySpeAlipay":
                        a.status = "支付宝扫码充值专用账户";
                        break;
                    case "bindalipay&buyalipay":
                        a.status = "支付宝扫码购卡充值并扣工本费";
                        break;
                    case "depositAlipay":
                        a.status = "支付宝扫码充值";
                        break;
                    case "buyServiceAlipay":
                        a.status = "支付宝扫码购卡购买会员服务", a.bail && (a.status += "并扣保证金");
                        break;
                    case "buyServiceAlipay&bindAlipay":
                        a.status = "支付宝扫码购卡购买会员服务并扣工本费", a.bail && (a.status += "并扣保证金");
                        break;
                    case "overtimeAlipay":
                        a.status = "支付宝扫码支付超时费用";
                        break;
                    case "bailAlipay":
                        a.status = "支付宝扫码支付押金";
                        break;
                    case "buy":
                        a.status = "微信用户线上购卡充值", a.payment = "微信公众号支付", a.workerName = "微信用户";
                        break;
                    case "buyTicket":
                        "wx" == a.payment ? a.status = "微信扫码购买门票" : a.status = "支付宝扫码购买门票"
                    }
                    switch (a.payment) {
                    case "wx":
                        a.payment = "微信支付";
                        break;
                    case "alipay":
                        a.payment = "支付宝支付"
                    }
                });
                var b = a.data.count;
                p.pagination.totalItems = b, p.pagination.numPages = b / p.itemsPerPage
            }, function () {})
        };
        p.close = function () {
            B(), p.searchWorkerIdArr = [], p.searchPayment = "", A()
        }, y()
    }
    angular.module("fieldApp").controller("OrgFinancePrepCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Preporder", "Item", "Venue", "Member", "Product", "Cardrecords", "Finance"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this,
            k = function () {
                j.startDate = new Date, j.endDate = new Date
            },
            l = function () {
                j.page = 1, j.itemsPerPage = 10, j.pagination = {
                    page: j.page,
                    itemsPerPage: j.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            m = function () {
                var a = {
                    page: j.pagination.page,
                    itemsPerPage: j.pagination.itemsPerPage,
                    statuses: ["prepPay", "refundPrepPay"],
                    payments: ["cash"]
                };
                j.startDate && j.endDate && (a = _.merge(a, {
                    startDate: j.startDate.getTime(),
                    endDate: j.endDate.getTime()
                })), i.index(a, function (b) {
                    j.records = b.data.records;
                    var c = b.data.count;
                    j.pagination.totalItems = c, j.pagination.numPages = c / j.itemsPerPage, a = _.merge(a, {
                        all: "all"
                    }), i.index(a, function (a) {
                        var b = a.data.records;
                        j.cost = 0, j.inCost = 0, j.outCost = 0, _.each(b, function (a) {
                            if (a.state) a.cost = ("add" == a.state ? 1 : -1) * a.cost;
                            else switch (a.status) {
                            case "refundPrepPay":
                                j.outCost = dealNumber((100 * j.outCost + 100 * a.cost) / 100), a.cost = -1 * a.cost;
                                break;
                            case "prepPay":
                                j.inCost = dealNumber((100 * j.inCost + 100 * a.cost) / 100)
                            }
                            j.cost = dealNumber((100 * j.cost + 100 * a.cost) / 100)
                        })
                    }, function () {})
                }, function () {})
            },
            n = function () {
                k(), l(), m()
            };
        j.pageChanged = function () {
            m()
        }, j.closeChooseBox = function () {
            j.showChooseStartDateBox = !1, j.showChooseEndDateBox = !1, setTimeout(function () {
                l(), m()
            }, 100)
        }, n()
    }
    angular.module("fieldApp").controller("OrgFinancePreppayCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Record"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        var p = this;
        p.titleState = f.params.state || "field";
        var q = function () {
                k.index({}, function (a) {
                    p.venues = a.data.venues, _.each(p.venues, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), p.chooseVenueName(p.venues[0])
                }, function () {})
            },
            r = function () {
                e.index({
                    role: "checkStand"
                }, function (a) {
                    s(a.data.users)
                }, function () {})
            },
            s = function (a) {
                e.get({}, function (b) {
                    var c = b.data.user._organization ? b.data.user._organization : b.data.user._id;
                    e.getOrgInfo({
                        id: c
                    }, function (b) {
                        p.workers = [{
                            name: "微信",
                            _id: "wx"
                        }].concat(a), _.each(p.workers, function (a) {
                            a.image = "manyChoose_imageNo"
                        }), q()
                    }, function () {})
                }, function () {})
            },
            t = function () {
                p.hasChooseVenue = [], p.hasChooseItem = [], p.hasChooseWorker = [], _.each(p.items, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseItem.push(a)
                }), _.each(p.venues, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseVenue.push(a)
                }), _.each(p.workers, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseWorker.push(a)
                })
            },
            u = function () {
                t(), p.hasChooseItem.length > 0 && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "item" : 0 == p.hasChooseItem.length && p.hasChooseVenue.length > 0 && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "venue" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && p.hasChooseWorker.length > 0 && !p.whatFirst ? p.whatFirst = "worker" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && (p.whatFirst = ""), 0 == p.hasChooseItem.length && "item" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseVenue.length && "venue" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseWorker.length && "worker" == p.whatFirst && (p.whatFirst = "")
            },
            v = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    _.each(p.venues, function (b) {
                        var d = _.findWhere(b.items, {
                            _id: a._id
                        });
                        return d ? void c.push(b) : void 0
                    })
                }), b(c)
            },
            w = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    a.venues && a.venues.length > 0 ? _.each(p.venues, function (b) {
                        var d = _.findWhere(a.venues, {
                            _id: b._id
                        });
                        if (d) {
                            var e = _.findWhere(c, {
                                _id: d._id
                            });
                            if (!e) return void c.push(b)
                        }
                    }) : c = p.venues
                }), b(c)
            },
            x = function (a, b) {
                var c = [];
                return _.each(a, function (a) {
                    _.each(a.items, function (b) {
                        var d = _.findWhere(c, {
                            _id: b._id
                        });
                        d || (c = c.concat(a.items))
                    })
                }), b ? void b(c) : c
            },
            y = function (a, b) {
                var c = [];
                return _.each(p.workers, function (b) {
                    b.venues && b.venues.length > 0 ? _.each(a, function (a) {
                        var d = _.findWhere(b.venues, {
                            _id: a._id
                        });
                        d && c.indexOf(b) < 0 && c.push(b)
                    }) : b.venues || c.push(b)
                }), b ? void b(c) : c
            };
        p.chooseItemName = function (a) {
            B(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseItem.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseItem.splice(p.hasChooseItem.indexOf(a), 1)), u(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "item" == p.whatFirst && v(p.hasChooseItem, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), y(a, function (a) {
                    _.each(p.workers, function (b) {
                        -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                    })
                })
            }), D()
        }, p.chooseVenueName = function (a) {
            if (B(), "manyChoose_imageNo" == a.image) a.image = "manyChoose_imageYes", p.hasChooseVenue.push(a);
            else {
                if (1 == p.hasChooseVenue.length) return p.promptERR = !0, void(p.wordERR = "必须选择一个场馆");
                a.image = "manyChoose_imageNo", p.hasChooseVenue.splice(p.hasChooseVenue.indexOf(a), 1)
            }
            u(), p.whatFirst || (_.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "venue" == p.whatFirst && (x(p.hasChooseVenue, function (a) {
                _.each(p.items, function (b) {
                    var c = _.findWhere(a, {
                        _id: b._id
                    });
                    c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                })
            }), y(p.hasChooseVenue, function (a) {
                _.each(p.workers, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                })
            })), D()
        }, p.chooseWorkerName = function (a) {
            B(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseWorker.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseWorker.splice(p.hasChooseWorker.indexOf(a), 1)), u(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            })), "worker" == p.whatFirst && w(p.hasChooseWorker, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), x(a, function (a) {
                    _.each(p.items, function (b) {
                        var c = _.findWhere(a, {
                            _id: b._id
                        });
                        c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                    })
                })
            }), D()
        };
        var z = function () {
                A(), r()
            },
            A = function () {
                p.hasChooseItem = [], p.hasChooseVenue = [], p.hasChooseWorker = [], p.searchVenueIdArr = [], p.searchItemIdArr = [], p.searchType = "", p.searchWorkerId = "", p.searchPayment = "", p.searchMemberId = "", p.searchMemberType = "", p.whatFirst = "", p.venueArr = [], p.itemArr = [], p.errState = "add", p.errRecordId = "", p.errPrice = "", p.errRemark = "", p.showTypeName = "类型", p.showWorkerName = "提交人", p.showPaymentName = "支付方式", p.showMemberName = "用户名", p.showMemberTypeName = "类型", p.startDate = new Date, p.endDate = new Date, p.paymentArr = [{
                    name: "全部"
                }, {
                    name: "现金支付",
                    value: "cash"
                }, {
                    name: "微信支付",
                    value: "wx"
                }, {
                    name: "支付宝",
                    value: "alipay"
                }, {
                    name: "转账支付",
                    value: "card"
                }, {
                    name: "支票支付",
                    value: "check"
                }, {
                    name: "POS机支付",
                    value: "pos"
                }], _.each(p.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.venues, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.workers, function (a) {
                    a.image = "manyChoose_imageNo"
                }), p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            B = function () {
                p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            C = function () {
                p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1, p.showChooseItemBox = !1, p.showChooseVenueBox = !1, p.showChooseTypeBox = !1, p.showChooseWorkerBox = !1, p.showChooseMemberBox = !1, p.showChoosePaymentBox = !1, p.showChooseMemberTypeBox = !1, p.showChooseWorkerBox = !1, p.showErrChangeBox = !1, p.showPreview = !1, p.showDetail = !1
            };
        p.pageChanged = function () {
            E()
        }, p.closeChooseStartDateBox = function () {
            C(), B(), setTimeout(function () {
                D()
            }, 100)
        }, p.closeChooseEndDateBox = function () {
            C(), B(), setTimeout(function () {
                D()
            }, 100)
        }, p.choosePaymentName = function (a) {
            p.showChoosePaymentBox = !1, B(), p.showPaymentName = a.name, p.searchPayment = a.value, E()
        }, p.openErrChangeBox = function (a) {
            C(), p.showErrChangeBox = !0, p.errRecordId = a
        }, p.chooseErrState = function (a) {
            "add" == a ? p.errState = "add" : p.errState = "reduce"
        }, p.changeErrRemark = function () {
            if (!p.errPrice) return p.promptERR = !0, void(p.wordERR = "请填写纠错金额");
            if (!p.errRemark) return p.promptERR = !0, void(p.wordERR = "请填写纠错备注");
            var a = {
                _record: p.errRecordId,
                state: p.errState,
                cost: parseFloat(p.errPrice),
                remark: p.errRemark
            };
            i.create({}, a, function () {
                E()
            }, function () {})
        }, p.closePrompt = function () {
            p.promptOK = !1, p.promptERR = !1, p.promptWARN = !1, p.searchWorkerIdArr = [], p.searchPayment = ""
        };
        var D = function () {
            p.promptWARN = !0, p.wordWARN = "统计中";
            var a = {
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            };
            p.dateName = "", p.dateName += p.startDate.getFullYear() + "年", p.dateName += p.startDate.getMonth() + 1 > 9 ? p.startDate.getMonth() + 1 + "月" : "0" + (p.startDate.getMonth() + 1) + "月", p.dateName += p.startDate.getDate() > 9 ? p.startDate.getDate() + "日-" : "0" + p.startDate.getDate() + "日-", p.dateName += p.endDate.getFullYear() + "年", p.dateName += p.endDate.getMonth() + 1 > 9 ? p.endDate.getMonth() + 1 + "月" : "0" + (p.endDate.getMonth() + 1) + "月", p.dateName += p.endDate.getDate() > 9 ? p.endDate.getDate() + "日" : "0" + p.endDate.getDate() + "日";
            var b = [];
            p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && (p.searchVenueIdArr.push(a._id), b.push(a))
            }), p.venueName = "";
            for (var c = 0; c < b.length; c++) p.venueName += (0 == c ? "" : "/") + b[c].name;
            p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: p.searchVenueIdArr
            }));
            var d = {
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime(),
                _venue: "5a1e4774138f87e51c2e79e9"
            };
            o.count(d, function (a) {
                p.useCount = a.data, p.promptWARN = !1
            }, function () {})
        };
        p["export"] = function (a) {
            var b = p.dateName + "包玉刚运动人数明细表";
            setTimeout(function () {
                execl1(a, b)
            }, 100)
        }, p.initCondition = function (a) {
            a ? "微信" == a ? p.searchWorkerIdArr = ["wx"] : p.searchWorkerName = a : (p.searchWorkerIdArr = [], _.each(p.workers, function (a) {
                "manyChoose_imageYes" == a.image && p.searchWorkerIdArr.push(a._id)
            })), E()
        };
        var E = function () {
            var a = {
                page: p.pagination.page,
                itemsPerPage: p.pagination.itemsPerPage,
                state: "other"
            };
            p.startDate && p.endDate && (a = _.merge(a, {
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            })), p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && p.searchVenueIdArr.push(a._id)
            }), p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: p.searchVenueIdArr
            })), p.searchWorkerIdArr.length > 0 && (a = _.merge(a, {
                workers: p.searchWorkerIdArr
            })), p.searchWorkerName && (a = _.merge(a, {
                workerName: p.searchWorkerName
            })), p.searchPayment && (a = _.merge(a, {
                payments: [p.searchPayment]
            })), i.index(a, function (a) {
                if (p.recordsDetail = a.data.records, !(p.recordsDetail.length > 0)) return p.promptERR = !0, void(p.wordERR = "暂无记录");
                p.showDetail = !0;
                var b = 1;
                _.each(p.recordsDetail, function (a) {
                    if (a.index = b, b++, a.state) a.cost = ("add" == a.state ? "+" : "-") + a.cost;
                    else switch (a.status) {
                    case "pay":
                    case "buy":
                    case "buyProduct":
                    case "buyShopProduct":
                    case "buySpe":
                    case "bindCard":
                        a.cost = "+" + a.cost;
                        break;
                    case "refund":
                    case "cardRefund":
                    case "refundProduct":
                    case "refundShopProduct":
                    case "refundSpe":
                        a.cost = "-" + a.cost
                    }
                    switch (a.payment) {
                    case "wx":
                        a.payment = "微信支付";
                        break;
                    case "card":
                        a.payment = "转账支付";
                        break;
                    case "cash":
                        a.payment = "现金支付";
                        break;
                    case "alipay":
                        a.payment = "支付宝支付";
                        break;
                    case "check":
                        a.payment = "支票支付";
                        break;
                    case "pos":
                        a.payment = "POS机支付";
                        break;
                    default:
                        a.payment = "无"
                    }
                });
                var c = a.data.count;
                p.pagination.totalItems = c, p.pagination.numPages = c / p.itemsPerPage
            }, function () {})
        };
        p.close = function () {
            C(), p.searchWorkerIdArr = [], p.searchPayment = "", B()
        }, z()
    }
    angular.module("fieldApp").controller("OrgServiceCountCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Record", "Item", "Venue", "Member", "Product", "Cardrecords", "Voucher"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        var p = this,
            q = function () {
                k.index({}, function (a) {
                    p.venues = a.data.venues, _.each(p.venues, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), p.chooseVenueName(p.venues[0])
                }, function () {})
            },
            r = function () {
                e.index({
                    role: "checkStand"
                }, function (a) {
                    p.workers = a.data.users, _.each(p.workers, function (a) {
                        a.image = "manyChoose_imageNo"
                    }), q()
                }, function () {})
            },
            s = function () {
                p.hasChooseVenue = [], p.hasChooseItem = [], p.hasChooseWorker = [], _.each(p.items, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseItem.push(a)
                }), _.each(p.venues, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseVenue.push(a)
                }), _.each(p.workers, function (a) {
                    "manyChoose_imageYes" == a.image && p.hasChooseWorker.push(a)
                })
            },
            t = function () {
                s(), p.hasChooseItem.length > 0 && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "item" : 0 == p.hasChooseItem.length && p.hasChooseVenue.length > 0 && 0 == p.hasChooseWorker.length && !p.whatFirst ? p.whatFirst = "venue" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && p.hasChooseWorker.length > 0 && !p.whatFirst ? p.whatFirst = "worker" : 0 == p.hasChooseItem.length && 0 == p.hasChooseVenue.length && 0 == p.hasChooseWorker.length && (p.whatFirst = ""), 0 == p.hasChooseItem.length && "item" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseVenue.length && "venue" == p.whatFirst && (p.whatFirst = ""), 0 == p.hasChooseWorker.length && "worker" == p.whatFirst && (p.whatFirst = "")
            },
            u = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    _.each(p.venues, function (b) {
                        var d = _.findWhere(b.items, {
                            _id: a._id
                        });
                        return d ? void c.push(b) : void 0
                    })
                }), b(c)
            },
            v = function (a, b) {
                var c = [];
                a && _.each(a, function (a) {
                    a.venues && a.venues.length > 0 ? _.each(p.venues, function (b) {
                        var d = _.findWhere(a.venues, {
                            _id: b._id
                        });
                        if (d) {
                            var e = _.findWhere(c, {
                                _id: d._id
                            });
                            if (!e) return void c.push(b)
                        }
                    }) : c = p.venues
                }), b(c)
            },
            w = function (a, b) {
                var c = [];
                return _.each(a, function (a) {
                    _.each(a.items, function (b) {
                        var d = _.findWhere(c, {
                            _id: b._id
                        });
                        d || (c = c.concat(a.items))
                    })
                }), b ? void b(c) : c
            },
            x = function (a, b) {
                var c = [];
                return _.each(p.workers, function (b) {
                    b.venues && b.venues.length > 0 ? _.each(a, function (a) {
                        var d = _.findWhere(b.venues, {
                            _id: a._id
                        });
                        d && c.push(b)
                    }) : c.push(b)
                }), b ? void b(c) : c
            };
        p.chooseItemName = function (a) {
            A(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseItem.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseItem.splice(p.hasChooseItem.indexOf(a), 1)), t(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "item" == p.whatFirst && u(p.hasChooseItem, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), x(a, function (a) {
                    _.each(p.workers, function (b) {
                        -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                    })
                })
            }), D()
        }, p.chooseVenueName = function (a) {
            if (A(), "manyChoose_imageNo" == a.image) a.image = "manyChoose_imageYes", p.hasChooseVenue.push(a);
            else {
                if (1 == p.hasChooseVenue.length) return p.promptERR = !0, void(p.wordERR = "必须选择一个场馆");
                a.image = "manyChoose_imageNo", p.hasChooseVenue.splice(p.hasChooseVenue.indexOf(a), 1)
            }
            t(), p.whatFirst || (_.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.workers, function (a) {
                a.image = "manyChoose_imageNo"
            })), "venue" == p.whatFirst && (w(p.hasChooseVenue, function (a) {
                _.each(p.items, function (b) {
                    var c = _.findWhere(a, {
                        _id: b._id
                    });
                    c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                })
            }), x(p.hasChooseVenue, function (a) {
                _.each(p.workers, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                })
            })), D()
        }, p.chooseWorkerName = function (a) {
            A(), "manyChoose_imageNo" == a.image ? (a.image = "manyChoose_imageYes", p.hasChooseWorker.push(a)) : (a.image = "manyChoose_imageNo", p.hasChooseWorker.splice(p.hasChooseWorker.indexOf(a), 1)), t(), p.whatFirst || (_.each(p.venues, function (a) {
                a.image = "manyChoose_imageNo"
            }), _.each(p.items, function (a) {
                a.image = "manyChoose_imageNo"
            })), "worker" == p.whatFirst && v(p.hasChooseWorker, function (a) {
                _.each(p.venues, function (b) {
                    -1 == a.indexOf(b) ? b.image = "manyChoose_imageG" : "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo")
                }), w(a, function (a) {
                    _.each(p.items, function (b) {
                        var c = _.findWhere(a, {
                            _id: b._id
                        });
                        c ? "manyChoose_imageG" == b.image && (b.image = "manyChoose_imageNo") : b.image = "manyChoose_imageG"
                    })
                })
            }), D()
        };
        var y = function () {
                z(), r()
            },
            z = function () {
                p.hasChooseItem = [], p.hasChooseVenue = [], p.hasChooseWorker = [], p.searchVenueIdArr = [], p.searchItemIdArr = [], p.searchType = "", p.searchWorkerId = "", p.searchPayment = "", p.searchMemberId = "", p.searchMemberType = "", p.whatFirst = "", p.venueArr = [], p.itemArr = [], p.errState = "add", p.errRecordId = "", p.errPrice = "", p.errRemark = "", p.showTypeName = "类型", p.showWorkerName = "提交人", p.showPaymentName = "支付方式", p.showMemberName = "用户名", p.showMemberTypeName = "类型", p.startDate = new Date, p.endDate = new Date, p.paymentArr = [{
                    name: "全部"
                }, {
                    name: "微信支付",
                    value: "wx"
                }, {
                    name: "现金支付",
                    value: "cash"
                }, {
                    name: "余额支付",
                    value: "member"
                }, {
                    name: "支付宝支付",
                    value: "alipay"
                }], _.each(p.items, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.venues, function (a) {
                    a.image = "manyChoose_imageNo"
                }), _.each(p.workers, function (a) {
                    a.image = "manyChoose_imageNo"
                }), p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            A = function () {
                p.page = 1, p.itemsPerPage = 10, p.pagination = {
                    page: p.page,
                    itemsPerPage: p.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            B = function () {
                p.showChooseStartDateBox = !1, p.showChooseEndDateBox = !1, p.showChooseItemBox = !1, p.showChooseVenueBox = !1, p.showChooseTypeBox = !1, p.showChooseWorkerBox = !1, p.showChooseMemberBox = !1, p.showChoosePaymentBox = !1, p.showChooseMemberTypeBox = !1, p.showChooseWorkerBox = !1, p.showErrChangeBox = !1, p.showPreview = !1, p.showDetail = !1
            },
            C = function (a) {
                var b = a.toFixed(3);
                return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
            };
        p.pageChanged = function () {
            E()
        }, p.closeChooseStartDateBox = function () {
            B(), A(), setTimeout(function () {
                D()
            }, 100)
        }, p.closeChooseEndDateBox = function () {
            B(), A(), setTimeout(function () {
                D()
            }, 100)
        }, p.choosePaymentName = function (a) {
            p.showChoosePaymentBox = !1, A(), p.showPaymentName = a.name, p.searchPayment = a.value, E()
        }, p.openErrChangeBox = function (a) {
            B(), p.showErrChangeBox = !0, p.errRecordId = a
        }, p.chooseErrState = function (a) {
            "add" == a ? p.errState = "add" : p.errState = "reduce"
        }, p.changeErrRemark = function () {
            if (!p.errPrice) return p.promptERR = !0, void(p.wordERR = "请填写纠错金额");
            if (!p.errRemark) return p.promptERR = !0, void(p.wordERR = "请填写纠错备注");
            var a = {
                _record: p.errRecordId,
                state: p.errState,
                cost: parseFloat(p.errPrice),
                remark: p.errRemark
            };
            i.create({}, a, function () {
                E()
            }, function () {})
        }, p.closePrompt = function () {
            p.promptOK = !1, p.promptERR = !1, p.promptWARN = !1, p.searchWorkerIdArr = [], p.searchPayment = ""
        };
        var D = function () {
            p.promptWARN = !0, p.wordWARN = "统计中";
            var a = {
                all: "all",
                state: "shop",
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            };
            p.dateName = "", p.dateName += p.startDate.getFullYear() + "年", p.dateName += p.startDate.getMonth() + 1 > 9 ? p.startDate.getMonth() + 1 + "月" : "0" + (p.startDate.getMonth() + 1) + "月", p.dateName += p.startDate.getDate() > 9 ? p.startDate.getDate() + "日-" : "0" + p.startDate.getDate() + "日-", p.dateName += p.endDate.getFullYear() + "年", p.dateName += p.endDate.getMonth() + 1 > 9 ? p.endDate.getMonth() + 1 + "月" : "0" + (p.endDate.getMonth() + 1) + "月", p.dateName += p.endDate.getDate() > 9 ? p.endDate.getDate() + "日" : "0" + p.endDate.getDate() + "日";
            var b = [];
            p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && (p.searchVenueIdArr.push(a._id), b.push(a))
            }), p.venueName = "";
            for (var c = 0; c < b.length; c++) p.venueName += (0 == c ? "" : "/") + b[c].name;
            p.searchVenueIdArr.length > 0 && (a = _.merge(a, {
                venues: p.searchVenueIdArr
            })), p.searchWorkerIdArr = [], _.each(p.workers, function (a) {
                "manyChoose_imageYes" == a.image && p.searchWorkerIdArr.push(a._id)
            }), p.searchWorkerIdArr.length > 0 && (a = _.merge(a, {
                workers: p.searchWorkerIdArr
            })), o.shop(a, function (a) {
                p.records = a.data.statistic, p.promptWARN = !1
            }, function () {})
        };
        p["export"] = function (a) {
            var b;
            b = a ? p.dateName + p.workerName + "的" + p.venueName + "的小卖部消费明细表" : p.dateName + p.venueName + "的小卖部消费汇总表", setTimeout(function () {
                execl1(a ? a : "alltable", b)
            }, 100)
        }, p.initCondition = function (a, b) {
            a && (p.searchWorkerIdArr = [a], p.searchWorkerName = b), E(b)
        };
        var E = function (a) {
            p.workerName = a;
            var b = {
                state: "shop",
                all: "all"
            };
            p.startDate && p.endDate && (b = _.merge(b, {
                startDate: p.startDate.getTime(),
                endDate: p.endDate.getTime()
            })), p.searchVenueIdArr = [], _.each(p.venues, function (a) {
                "manyChoose_imageYes" == a.image && p.searchVenueIdArr.push(a._id)
            }), p.searchVenueIdArr.length > 0 && (b = _.merge(b, {
                venues: p.searchVenueIdArr
            })), p.searchWorkerName && (b = _.merge(b, {
                workerName: p.searchWorkerName
            })), p.searchPayment && (b = _.merge(b, {
                payments: [p.searchPayment]
            })), i.index(b, function (a) {
                if (p.recordsDetail = a.data.records, !(p.recordsDetail.length > 0)) return p.promptERR = !0, void(p.wordERR = "暂无记录");
                p.showDetail = !0, p.shopDetails = [];
                var b = 1,
                    c = 0,
                    d = 0,
                    e = 0,
                    f = 0;
                _.each(p.recordsDetail, function (a) {
                    switch (a.index = b, b++, a.status) {
                    case "refundShopProduct":
                        a.cost = -1 * a.cost, a.quantity = -1 * a.quantity
                    }
                    a.state && (a.quantity = 0), "reduce" == a.state && (a.cost = -1 * a.cost);
                    var c = _.findWhere(p.shopDetails, {
                        _id: a._shopProduct
                    });
                    if (c) c.quantity += a.quantity, c.subTotal += a.cost, "member" == a.payment ? c.member = C((100 * c.member + 100 * a.cost) / 100) : c.noMember = C((100 * c.noMember + 100 * a.cost) / 100);
                    else {
                        var d = {
                            _id: a._shopProduct,
                            name: a.shopProductName,
                            member: 0,
                            noMember: 0,
                            quantity: a.quantity,
                            subTotal: a.cost
                        };
                        "member" == a.payment ? d.member = C((100 * d.member + 100 * a.cost) / 100) : d.noMember = C((100 * d.noMember + 100 * a.cost) / 100), p.shopDetails.push(d)
                    }
                }), _.each(p.shopDetails, function (a) {
                    c += a.quantity, d = C((100 * a.subTotal + 100 * d) / 100), e = C((100 * e + 100 * a.member) / 100), f = C((100 * f + 100 * a.noMember) / 100)
                }), p.shopDetails.push({
                    name: "合计",
                    quantity: c,
                    subTotal: d,
                    member: e,
                    noMember: f
                })
            }, function () {})
        };
        p.close = function () {
            B(), p.searchWorkerIdArr = [], p.searchPayment = "", A()
        }, y()
    }
    angular.module("fieldApp").controller("OrgFinanceShopCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Record", "Item", "Venue", "Member", "Product", "Cardrecords", "Finance"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h) {
        var i = this,
            j = function () {
                e.get({}, function (a) {
                    i.admin = a.data.user.name
                }, function () {})
            };
        i.logout = d.logout;
        var k = function () {
            j()
        };
        k()
    }
    angular.module("fieldApp").controller("HeadCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l) {
        var m = this;
        m.id = g.id, m.searchName = g.searchName, m.searchName ? c.searchName = m.searchName : c.searchName = "";
        var n = function () {
            i.index({
                id: m.id
            }, function (a) {
                m.member = a.data.member, m.name = m.member.name, m.tel = m.member.tel, m.member.idCard ? m.idCard = m.member.idCard : m.idCard = "暂无", m.typeName = m.member.type, m.name1 = m.member.name, m.tel1 = m.member.tel, m.idCard1 = m.member.idCard, m.typeName1 = m.member.type, m.speAccount = m.member.specialAccount, m.judge()
            })
        };
        m.update = function () {
            var a = {
                name: m.name,
                tel: m.tel,
                idCard: m.idCard,
                type: m.typeName
            };
            i.update({
                id: m.id
            }, a, function (a) {
                n(), m.toastFlag = !0, k(function () {
                    m.toastFlag = !1
                }, 1e3)
            }, function (a) {
                m.promptERR = !0, m.wordERR = a.data.data, "ValidationError: 该号码已被使用." == m.wordERR && (m.wordERR = "该号码已被使用")
            })
        }, m.chooseType = function (a) {
            m.chooseTypeFlag = !1;
            for (var b = 0; b < m.types.length; b++) m.types[b].select = !1;
            a.select = !0, m.typeName = a.name, m.judge()
        }, m.types = [{
            name: "会员卡",
            select: !0
        }, {
            name: "外来卡",
            select: !1
        }, {
            name: "员工卡",
            select: !1
        }, {
            name: "领导金卡",
            select: !1
        }, {
            name: "保安卡",
            select: !1
        }], m.close = function () {
            m.refundFlag = !1, m.price = "", m.priceFlag = !1, m.promptERR = !1
        }, m.chooseObject = function (a) {
            m.objectName = a.name, m.telS = a.tel, m._user = a._id, m.chooseObjectFlag = !1
        }, m.sendSms = function () {
            var a = {
                tel: m.telS,
                _member: m.member._id,
                _user: m._user
            };
            l.resms(a, function (a) {
                m.sendFlag = !0, m.sendToFlag = !1, k(function () {
                    m.sendFlag = !1
                }, 1e3)
            }, function (a) {
                m.promptERR = !0, m.wordERR = a.data.data
            })
        }, m.refund = function () {
            if (!m.price) return void(m.priceFlag = !0);
            var a = {
                refind: 1 * m.price,
                _member: m.member._id,
                code: m.code
            };
            i.refind(a, function (a) {
                m.promptOK = !0, m.close(), n(), p()
            }, function (a) {
                m.promptERR = !0, m.wordERR = a.data.data
            })
        }, m.page = 1, m.itemsPerPage = 10, m.pagination = {
            page: m.page,
            itemsPerPage: m.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, m.judge = function () {
            m.name != m.name1 || m.tel != m.tel1 || m.idCard != m.idCard1 || m.typeName != m.typeName1 ? m.judgeFlag = !0 : m.judgeFlag = !1
        };
        var o = function () {
                var a = {
                    role: "fieldManager"
                };
                e.index(a, function (a) {
                    m.users = a.data.users, m.users.length > 0 && (m.objectName = m.users[0].name, m.telS = m.users[0].tel, m._user = m.users[0]._id)
                }, function () {})
            },
            p = function () {
                var a = {
                    _member: m.id,
                    page: m.pagination.page,
                    itemsPerPage: m.pagination.itemsPerPage
                };
                j.index(a, function (a) {
                    m.records = a.data.records;
                    for (var b = 0; b < m.records.length; b++) {
                        switch (m.records[b].payment) {
                        case "wx":
                            m.records[b].pm = "微信支付";
                            break;
                        case "cash":
                            m.records[b].pm = "现金支付";
                            break;
                        case "alipay":
                            m.records[b].pm = "支付宝支付";
                            break;
                        case "member":
                            m.records[b].pm = "余额支付";
                            break;
                        case "member_vir":
                            m.records[b].pm = "虚拟卡支付";
                            break;
                        case "card":
                            m.records[b].pm = "转账支付";
                            break;
                        case "pos":
                            m.records[b].pm = "pos机支付";
                            break;
                        case "check":
                            m.records[b].pm = "支票支付";
                            break;
                        case "member_spe":
                            m.records[b].pm = "专用账户支付";
                            break;
                        default:
                            m.records[b].pm = "无"
                        }
                        switch (m.records[b].status) {
                        case "refund":
                        case "buy":
                        case "refundPrepPay":
                            m.records[b].price = "+" + m.records[b].cost;
                            break;
                        case "pay":
                        case "cardRefund":
                        case "refundProduct":
                        case "refundShopProduct":
                        case "buyTicket":
                        case "buyProduct":
                        case "buyShopProduct":
                        case "prepPay":
                        case "buyService":
                        case "overtime":
                        case "bindCard":
                            m.records[b].price = "-" + m.records[b].cost
                        }
                    }
                    var c = a.data.count;
                    m.pagination.totalItems = c, m.pagination.numPages = c / m.itemsPerPage
                })
            };
        m.pageChanged = function () {
            q()
        };
        var q = function () {
            n(), p(), o()
        };
        q()
    }
    angular.module("fieldApp").controller("OrgMemberDetailCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "Record", "$timeout", "Smscode"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l) {
        var m = this;
        m.page = 1, m.itemsPerPage = 10, m.pagination = {
            page: m.page,
            itemsPerPage: m.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, m.getRecord = function () {
            var a = {
                mix: m.mix,
                page: m.pagination.page,
                itemsPerPage: m.pagination.itemsPerPage
            };
            l.index(a, {
                _org: m._org
            }, function (a) {
                m.events = a.data.events, _.each(m.events, function (a) {
                    switch (a.status) {
                    case "move":
                        a.status = "过户";
                        break;
                    case "updateTel":
                        a.status = "更改绑定手机号";
                        break;
                    case "freeze":
                        a.status = "冻结";
                        break;
                    case "cancelFreeze":
                        a.status = "解除冻结"
                    }
                });
                var b = a.data.count;
                m.pagination.totalItems = b, m.pagination.numPages = b / m.itemsPerPage
            })
        };
        var n = function () {
            e.get({}, function (a) {
                m._org = a.data.user._organization ? a.data.user._organization : a.data.user._id, m.getRecord()
            }, function () {})
        };
        m.pageChanged = function () {
            o()
        };
        var o = function () {
            n()
        };
        o()
    }
    angular.module("fieldApp").controller("OrgDocordCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "Record", "$timeout", "Event"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        var p = this;
        p.addFlag = !1, p.chooseCardFlag = !1, p.idCard = "", p.showCodeBox = !0, p.wxFlag = !0, p.typeName = "会员卡", p.moneySelect = !0, p.oneSelect = !1, p.cardSelect = !1, p.isUsed = !0, p.isBk = !1, p.isAccount = !1, p.printFlag = !0, p.levelDes = "", p.idType = "id", p.zhengName = "身份证", c.searchName && (p.mix = c.searchName, p.searchName = c.searchName), $("#search").keydown(function (a) {
            13 == a.keyCode && p.search()
        }), p.cardBlue = {
            padding: "10px",
            background: "#00a1ff",
            color: "#fff",
            "border-radius": "4px",
            margin: "0 10px 10px 0",
            border: "1px solid #00a1ff"
        }, p.cardGray = {
            padding: "10px",
            background: "#fff",
            color: "#000",
            "border-radius": "4px",
            margin: "0 10px 10px 0",
            border: "1px solid #ddd"
        }, p.types = [{
            name: "会员卡",
            select: !0
        }, {
            name: "外来卡",
            select: !1
        }, {
            name: "员工卡",
            select: !1
        }, {
            name: "领导金卡",
            select: !1
        }, {
            name: "保安卡",
            select: !1
        }], p.order = {
            _member: "",
            orderDate: null,
            spbill_create_ip: "",
            auth_code: "",
            payment: "alipay",
            orderArr: {
                total: 0,
                fields: []
            }
        }, p.paymentArr = [{
            name: "支付宝",
            value: "alipay",
            image: "singleChoose_imageYes"
        }, {
            name: "微信",
            value: "wx",
            image: "singleChoose_imageNo"
        }, {
            name: "现金",
            value: "cash",
            image: "singleChoose_imageNo"
        }, {
            name: "支票",
            value: "check",
            image: "singleChoose_imageNo"
        }, {
            name: "转账",
            value: "card",
            image: "singleChoose_imageNo"
        }, {
            name: "POS机",
            value: "pos",
            image: "singleChoose_imageNo"
        }], c.mPage ? p.page = c.mPage : (p.page = 1, c.mPage = p.page), p.itemsPerPage = 10, p.pagination = {
            page: c.mPage,
            itemsPerPage: p.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, p.close = function () {
            p.addFlag = !1, p.chooseCardFlag = !1, p.nameFlag = !1, p.phoneFlag = !1, p.sureFlag = !1, p.cardFlag = !1, p.selfFlag = !1, p.idFlag = !1, p.answerFlag = !1, p.changeAccFlag = !1, p.name = "", p.tel = "", p.phone = "", p.iderr = "", p.iFlag = !1, p.pFlag = !1, p.continueFlag = !1, p.idCard = "", p.cardFlag = !1, p.cardNum = "", p.needFlag = !1, p.cFlag = !1, p.payFlag = !1, p.auth_code = "", p.wxFlag = !0, p.defindFlag = !1, p.moneySelect = !0, p.oneSelect = !1, p.cardSelect = !1, p.choosedCardFlag = !1, p.showAuth_codeBox = !1, p.add = !1, p.lengthFlag = !1, p.isReal = "", p.isFreeze = "", r(), p.price = "", p.printFlag = !0, _.each(p.vrr, function (a) {
                a.select = !1
            }), p.chargeVenue = "", p.chargeCardNum = "", p.chargeCardPassword = "", p.moneySelect = !0, p.oneSelect = !1, p.cardSelect = !1, p.speSelect = !1
        }, p.closePrompt = function () {
            p.promptERR = !1, p.toastFlag = !1, p.promptWARN = !1, p.showAuth_codeBox = !1, clearInterval(p.setIntervalId)
        }, p.judgeLength = function () {
            11 == p.phone.length ? (p.lengthFlag = !0, p.codeTel()) : p.lengthFlag = !1
        }, p.chooseIdType = function (a) {
            p.choosedZhengFlag = !1, "id" == a ? (p.idType = "id", p.zhengName = "身份证") : (p.idType = "other", p.zhengName = "其他")
        }, p.defind = function (a) {
            p.addFlag = !0, p.defindFlag = !0, p.memTitle = "实名认证", p.name = a.name, p.phone = a.tel, p.mId = a._id, a.idType && "other" == a.idType ? (p.zhengName = "其他", p.idType = "other") : (p.zhengName = "身份证", p.idType = "id")
        }, p.chVenue = function (a) {
            _.each(p.vrr, function (a) {
                a.select = !1
            }), a.select = !0
        }, p.newAdd = function () {
            p.addFlag = !0, p.memTitle = "新增会员", _.each(p.cards, function (a) {
                a.select = !1, a.flag = !1
            }), p.cards.length > 0 && (p.cards[0].select = !0, p.cardName = p.cards[0].name + "(" + p.cards[0].price + "元)", p.cardId = p.cards[0]._id, p.cards[0].flag = !0, p.realPrice = p.cards[0].realPrice)
        }, p.chongzhi = function (a) {
            p.mId = a._id, p.continueFlag = !0, p.cCards = [], a.isReal ? p.cCards = p.cards : _.each(p.cards, function (a) {
                a.select = !1, a.flag = !1, a.price <= 100 && p.cCards.push(a)
            });
            var b = {
                price: "自定义充值",
                select: !1,
                flag: !1
            };
            p.cCards.push(b), p.cCards.length > 0 && (p.cCards[0].select = !0, p.cardName = p.cCards[0].name + "(" + p.cCards[0].price + "元)", p.cardId = p.cCards[0]._id, p.cCards[0].flag = !0, p.realPrice = p.cCards[0].realPrice), a.cards.length > 0 && (p.tot = a.cards[0].total), a.virtualAccount.expires_in ? p.xd = p.getNowFormatDate(new Date(a.virtualAccount.expires_in)) : p.xd = "", p.vPrice = a.virtualAccount.total
        }, p.auth_codeCreateC = function (a) {
            if (p.promptWARN = !0, p.wordWARN = "支付中", 13 == a.keyCode) switch (p.order.payment) {
            case "wx":
                var b = /^[1][0,1,2,3,4,5][0-9]{16}$/;
                if (!b.test(p.auth_code)) return p.auth_code = "", p.promptWARN = !1, p.promptERR = !0, void(p.wordERR = "支付码错误，重新扫码");
                if (p.selfFlag) {
                    var c = {
                        total: p.price,
                        auth_code: p.auth_code,
                        spbill_create_ip: "0.0.0.0"
                    };
                    return void i.randomWx({
                        id: p.mId
                    }, c, function (a) {
                        p.printFlag && (p.tot = 1 * p.tot + 1 * p.price, p.print("微信充值")), p.close(), p.promptWARN = !1, p.getMember(), p.toastFlag = !0, p.wordOK = "充值成功", k(function () {
                            p.toastFlag = !1
                        }, 1e3)
                    }, function (a) {
                        p.promptWARN = !1, p.promptERR = !0, p.wordERR = a.data.data, p.wxFlag = !1, p.getMember()
                    })
                }
                if (p.oneSelect) return void _.each(p.mrr, function (a) {
                    var b = {
                        _venue: a,
                        total: p.price,
                        auth_code: p.auth_code,
                        spbill_create_ip: "0.0.0.0"
                    };
                    i.wxSpeAccount({
                        id: p.mId
                    }, b, function (a) {
                        p.printFlag && (p.tot = 1 * p.tot + 1 * p.price, p.print("专用账户充值")), p.close(), p.promptWARN = !1, p.getMember(), p.toastFlag = !0, p.wordOK = "充值成功", k(function () {
                            p.toastFlag = !1
                        }, 1e3)
                    }, function (a) {
                        p.promptWARN = !1, p.promptERR = !0, p.wordERR = a.data.data, p.wxFlag = !1, p.getMember()
                    })
                });
                var d = {
                    _member: p.mId,
                    _card: p.cardId,
                    auth_code: p.auth_code,
                    spbill_create_ip: "0.0.0.0",
                    payment: "wx"
                };
                j.pay(d, function (a) {
                    p.printFlag && (p.price = p.realPrice, p.tot = 1 * p.tot + 1 * p.price, p.print("微信充值")), p.close(), p.promptWARN = !1, p.toastFlag = !0, p.wordOK = "充值成功", p.showAuth_codeBox = !1, p.auth_code = "", clearInterval(p.setIntervalId), k(function () {
                        p.toastFlag = !1
                    }, 1e3), p.getMember()
                }, function (a) {
                    p.showAuth_codeBox = !1, p.promptWARN = !1, p.auth_code = "", p.deleteFlag = !0, p.payWarn = a.data.data, p.wxFlag = !1, clearInterval(p.setIntervalId), p.getMember()
                });
                break;
            case "alipay":
                var b = /^[25,26,27,28,29,30][0-9]{14,22}$/;
                if (!b.test(p.auth_code)) return p.auth_code = "", p.promptWARN = !1, p.promptERR = !0, void(p.wordERR = "支付码错误，重新扫码");
                if (p.selfFlag) {
                    var c = {
                        total: p.price,
                        auth_code: p.auth_code,
                        _member: p.mId
                    };
                    return void l.randomAlipay(c, function (a) {
                        p.printFlag && (p.tot = 1 * p.tot + 1 * p.price, p.print("支付宝充值")), p.close(), p.promptWARN = !1, p.getMember(), p.toastFlag = !0, p.wordOK = "充值成功", k(function () {
                            p.toastFlag = !1
                        }, 1e3)
                    }, function (a) {
                        p.promptWARN = !1, p.promptERR = !0, p.wordERR = a.data.data, p.wxFlag = !1, p.getMember()
                    })
                }
                if (p.oneSelect) return void _.each(p.mrr, function (a) {
                    var b = {
                        _venue: a,
                        total: p.price,
                        auth_code: p.auth_code
                    };
                    l.aliSpeAccount({
                        way: p.mId
                    }, b, function (a) {
                        p.printFlag && (p.tot = p.tot + p.price, p.print("专用账户充值")), p.close(), p.promptWARN = !1, p.getMember(), p.toastFlag = !0, p.wordOK = "充值成功", k(function () {
                            p.toastFlag = !1
                        }, 1e3)
                    }, function (a) {
                        p.promptWARN = !1, p.promptERR = !0, p.wordERR = a.data.data, p.wxFlag = !1, p.getMember()
                    })
                });
                var d = {
                    _member: p.mId,
                    _card: p.cardId,
                    auth_code: p.auth_code,
                    payment: "alipay"
                };
                l.pay(d, function (a) {
                    p.printFlag && (p.price = p.realPrice, p.tot = p.tot + p.price, p.print("支付宝充值")), p.close(), p.toastFlag = !0, p.wordOK = "充值成功", p.promptWARN = !1, p.showAuth_codeBox = !1, p.auth_code = "", clearInterval(p.setIntervalId), k(function () {
                        p.toastFlag = !1
                    }, 1e3), p.getMember()
                }, function (a) {
                    p.showAuth_codeBox = !1, p.promptWARN = !1, p.deleteFlag = !0, p.auth_code = "", p.payWarn = a.data.data, p.wxFlag = !1, clearInterval(p.setIntervalId), p.getMember()
                })
            }
        }, p.banka = function (a) {
            p.cFlag = !0, p.mId = a._id
        }, p.waySelect = function (a) {
            if (p.chargeVenue = "", "money" == a) p.moneySelect = !0, p.oneSelect = !1, p.cardSelect = !1, p.speSelect = !1;
            else if ("one" == a) {
                if (0 == p.vrr.length) return p.promptERR = !0, void(p.wordERR = "暂无专用场馆，请设置");
                p.moneySelect = !1, p.oneSelect = !0, p.cardSelect = !1, p.speSelect = !1
            } else "card" == a ? (p.moneySelect = !1, p.oneSelect = !1, p.cardSelect = !0, p.speSelect = !1) : "speCard" == a && (p.moneySelect = !1, p.oneSelect = !1, p.cardSelect = !1, p.speSelect = !0, m.index({
                isUsed: !0
            }, function (a) {
                p.venues_clone = a.data.venues, _.each(p.venues_clone, function (a) {
                    a.image = "singleChoose_imageNo2"
                }), p.chargeVenue = p.venues_clone[0], p.venues_clone[0].image = "singleChoose_imageYes2"
            }, function () {}))
        }, p.surePay = function () {
            switch (p.order.payment) {
            case "wx":
            case "alipay":
                p.sureFlag = !1, p.showAuth_codeBox = !0, p.setIntervalId = setInterval(function () {
                    document.getElementById("auth_codeC").focus()
                }, 100);
                break;
            case "cash":
            case "check":
            case "card":
            case "pos":
                var a = {
                    total: p.price,
                    payment: p.order.payment
                };
                i.randomPay({
                    id: p.mId
                }, a, function (a) {
                    p.printFlag && (p.tot = a.data.member.cards[0].total, a.data.member.virtualAccount.expires_in ? p.xd = p.getNowFormatDate(new Date(a.data.member.virtualAccount.expires_in)) : p.xd = "", p.vPrice = a.data.member.virtualAccount.total, p.print("现金充值")), p.close(), p.getMember(), p.toastFlag = !0, p.wordOK = "充值成功", k(function () {
                        p.toastFlag = !1
                    }, 1e3)
                }, function (a) {
                    p.promptWARN = !1, p.promptERR = !0, p.wordERR = a.data.data, p.wxFlag = !1, p.getMember()
                })
            }
        }, p["continue"] = function () {
            if (p.moneySelect && p.selfFlag) return void(p.price > 1e4 ? (p.promptERR = !0, p.wordERR = "只能输入10000以下的数字") : (p.sureFlag = !0, p.sureWarn = "您确定要充值" + p.price + "元吗？"));
            if (p.moneySelect || p.oneSelect) {
                if (p.oneSelect) {
                    p.mrr = [], _.each(p.vrr, function (a) {
                        a.select && p.mrr.push(a._id)
                    });
                    var b = {
                        venues: p.mrr
                    };
                    if (0 == p.mrr.length ? p.iFlag = !0 : p.iFlag = !1, p.price ? p.pFlag = !1 : p.pFlag = !0, p.iFlag || p.pFlag) return;
                    return void i.speAccount({
                        id: p.mId
                    }, b, function (a) {
                        switch (p.order.payment) {
                        case "wx":
                        case "alipay":
                            p.showAuth_codeBox = !0, p.setIntervalId = setInterval(function () {
                                document.getElementById("auth_codeC").focus()
                            }, 100);
                            break;
                        case "cash":
                        case "check":
                        case "card":
                        case "pos":
                            _.each(p.mrr, function (a) {
                                var b = {
                                    _venue: a,
                                    total: p.price,
                                    payment: p.order.payment
                                };
                                i.spePay({
                                    id: p.mId
                                }, b, function (a) {
                                    p.printFlag && (p.tot = a.data.member.cards[0].total, a.data.member.virtualAccount.expires_in ? p.xd = p.getNowFormatDate(new Date(a.data.member.virtualAccount.expires_in)) : p.xd = "", p.vPrice = a.data.member.virtualAccount.total, p.print("专用账户充值")), p.close(), p.promptWARN = !1, p.getMember(), p.toastFlag = !0, p.wordOK = "充值成功", k(function () {
                                        p.toastFlag = !1
                                    }, 1e3)
                                }, function (a) {
                                    p.promptWARN = !1, p.promptERR = !0, p.wordERR = a.data.data, p.wxFlag = !1, p.getMember()
                                })
                            })
                        }
                    }, function (a) {
                        p.promptWARN = !1, p.promptERR = !0, p.wordERR = a.data.data, p.wxFlag = !1, p.getMember()
                    })
                }
                switch (p.order.payment) {
                case "wx":
                case "alipay":
                    p.showAuth_codeBox = !0, p.setIntervalId = setInterval(function () {
                        document.getElementById("auth_codeC").focus()
                    }, 100);
                    break;
                case "cash":
                case "check":
                case "card":
                case "pos":
                    if (p.moneySelect) {
                        var b = {
                            _card: p.cardId,
                            payment: p.order.payment
                        };
                        i.addCard({
                            id: p.mId
                        }, b, function (a) {
                            p.printFlag && (p.tot = a.data.member.cards[0].total, a.data.member.virtualAccount.expires_in ? p.xd = p.getNowFormatDate(new Date(a.data.member.virtualAccount.expires_in)) : p.xd = "", p.vPrice = a.data.member.virtualAccount.total, p.price = p.realPrice, p.print("现金充值")), p.close(), p.promptWARN = !1, p.getMember(), p.toastFlag = !0, p.wordOK = "充值成功", k(function () {
                                p.toastFlag = !1
                            }, 1e3)
                        }, function (a) {
                            p.promptWARN = !1, p.promptERR = !0, p.wordERR = a.data.data, p.wxFlag = !1, p.getMember()
                        })
                    }
                }
            } else {
                if (!p.chargeCardNum) return p.promptERR = !0, void(p.wordERR = "请输入充值卡卡号");
                if (!p.chargeCardPassword) return p.promptERR = !0, void(p.wordERR = "请输入充值卡密码");
                var c = {
                    cardNum: p.chargeCardNum,
                    password: p.chargeCardPassword
                };
                p.chargeVenue && p.speSelect && (c = _.merge(c, {
                    _venue: p.chargeVenue._id
                })), n.charge({
                    id: p.mId
                }, c, function (b) {
                    p.printFlag && (p.tot = b.data.member.cards[0].total, b.data.member.virtualAccount.expires_in ? p.xd = p.getNowFormatDate(new Date(b.data.member.virtualAccount.expires_in)) : p.xd = "", p.vPrice = b.data.member.virtualAccount.total, p.print("充值卡充值")), p.continueFlag = !1, p.toastFlag = !0, p.wordOK = "充值成功", p.wordOK = b.data.data, setTimeout(function () {
                        a.$apply(function () {
                            p.toastFlag = !1
                        })
                    }, 1e3), p.getMember(), p.chargeVenue = "", p.chargeCardNum = "", p.chargeCardPassword = "", p.moneySelect = !0, p.oneSelect = !1, p.cardSelect = !1, p.speSelect = !1
                }, function (a) {
                    "找不到对象：card" == a.data.data ? (p.promptERR = !0, p.wordERR = "充值卡不存在或已使用") : (p.promptERR = !0, p.wordERR = a.data.data)
                })
            }
        }, p.print = function (a) {
            var b = '<div><div><h3 style="font-size:20px">欢迎光临</h3><h3 style="font-size:20px">充值消费小票</h3>操作员：' + p.admin + "</h3></div><span>**********************************</span><div>";
            b = b + "<div>充值方式:" + a + "</div><div>充值金额:" + p.price + "</div><div>现金账户余额:￥" + p.tot + "</div><div>虚拟账户余额:￥" + p.vPrice + "</div><div>有效期:" + p.xd, b = b + "</div><div>消费日期:" + p.getNowFormatDate(new Date) + "</div><span>**********************************</span><div>客户签名:</div>";
            var c = getLodop();
            c.PRINT_INIT(""), c.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), c.SET_PRINTER_INDEXA(-1), c.SET_PRINT_PAGESIZE(3, 800, 100, ""), c.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", b), c.PRINT()
        }, p.getNowFormatDate = function (a) {
            var b = "-",
                c = ":",
                d = a.getMonth() + 1,
                e = a.getDate();
            d >= 1 && 9 >= d && (d = "0" + d), e >= 0 && 9 >= e && (e = "0" + e);
            var f = a.getFullYear() + b + d + b + e + " " + a.getHours() + c + a.getMinutes() + c + a.getSeconds();
            return f
        }, p.showSelect = function (a) {
            switch (a) {
            case "card":
                p.chooseCardFlag = !p.chooseCardFlag
            }
        }, p.freeze = function (a) {
            var b = {
                _member: a._id
            };
            i.freeze(b, function (a) {
                p.toastFlag = !0, p.wordOK = "冻结成功", k(function () {
                    p.toastFlag = !1
                }, 1e3), p.getMember()
            }, function (a) {
                p.phoneFlag = !0, p.errPhone = a.data.data
            })
        }, p.cfreeze = function (a) {
            var b = {
                _member: a._id
            };
            i.cfreeze(b, function (a) {
                p.toastFlag = !0, p.wordOK = "解除冻结成功", k(function () {
                    p.toastFlag = !1
                }, 1e3), p.getMember()
            }, function (a) {
                p.phoneFlag = !0, p.errPhone = a.data.data
            })
        }, p.choosePayment = function (a) {
            _.each(p.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), p.order.auth_code = "", a.image = "singleChoose_imageYes", p.order.payment = a.value, "alipay" == a.value || "wx" == a.value ? p.showCodeBox = !0 : p.showCodeBox = !1
        }, p.chooseState = function (a) {
            _.each(p.useStateArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", p.isBk = a.isUsed
        }, p.useStateArr = [{
            name: "需要",
            image: "singleChoose_imageNo",
            isUsed: !0
        }, {
            name: "不需要",
            image: "singleChoose_imageYes",
            isUsed: !1
        }], p.auth_codeCreate = function (a) {
            if (p.promptWARN = !0, p.wordWARN = "支付中", 13 == a.keyCode) switch (p.order.payment) {
            case "wx":
                var b = /^[1][0,1,2,3,4,5][0-9]{16}$/;
                if (!b.test(p.auth_code)) return p.auth_code = "", p.promptWARN = !1, p.promptERR = !0, void(p.wordERR = "支付码错误，重新扫码");
                if (p.defindFlag) {
                    p.needFlag && p.isBk ? p.isBk = !0 : p.isBk = !1, p.wxFlag = !0;
                    var c = {
                        idCard: p.idCard,
                        tel: p.phone,
                        name: p.name,
                        idType: p.idType
                    };
                    return i.update({
                        id: p.mId
                    }, c, function (a) {
                        var b = {
                            _member: p.mId,
                            _card: p.cardId,
                            auth_code: p.auth_code,
                            spbill_create_ip: "0.0.0.0",
                            isCost: p.isBk,
                            cardNo: p.cardNum
                        };
                        j.pay(b, function (a) {
                            p.close(), p.toastFlag = !0, p.wordOK = "支付成功", p.auth_code = "", k(function () {
                                p.toastFlag = !1
                            }, 1e3), p.getMember()
                        }, function (a) {
                            p.auth_code = "", p.deleteFlag = !0, p.payWarn = a.data.data, p.wxFlag = !1, p.getMember()
                        })
                    }, function (a) {
                        p.auth_code = "", p.deleteFlag = !0, p.payWarn = a.data.data, p.wxFlag = !1
                    }), p.promptWARN = !1, clearInterval(p.setIntervalId), void(p.showAuth_codeBox = !1)
                }
                var d = {
                    name: p.name,
                    tel: p.phone,
                    _card: "",
                    idCard: p.idCard,
                    type: p.typeName,
                    payment: "wx",
                    idType: p.idType
                };
                i.create(d, function (a) {
                    p.mId = a.data.member._id, p.needFlag && p.isBk ? p.isBk = !0 : p.isBk = !1, p.wxFlag = !0;
                    var b = {
                        _member: a.data.member._id,
                        _card: p.cardId,
                        auth_code: p.auth_code,
                        spbill_create_ip: "0.0.0.0",
                        isCost: p.isBk,
                        cardNo: p.cardNum
                    };
                    j.pay(b, function (a) {
                        clearInterval(p.setIntervalId), p.close(), p.toastFlag = !0, p.wordOK = "支付成功", p.promptWARN = !1, p.showAuth_codeBox = !1, p.auth_code = "", k(function () {
                            p.toastFlag = !1
                        }, 1e3), p.getMember()
                    }, function (a) {
                        clearInterval(p.setIntervalId), p.auth_code = "", p.showAuth_codeBox = !1, p.promptWARN = !1, p.deleteFlag = !0, p.payWarn = a.data.data, p.wxFlag = !1, p.getMember()
                    })
                }, function (a) {
                    clearInterval(p.setIntervalId), p.promptWARN = !1, p.showAuth_codeBox = !1, 402 == a.data.code ? (p.phoneFlag = !0, p.errPhone = "手机号码格式错误") : 500 == a.data.code && (p.phoneFlag = !0, p.errPhone = "该手机号已被使用", p.payFlag = !1, p.addFlag = !0)
                });
                break;
            case "alipay":
                var b = /^[25,26,27,28,29,30][0-9]{14,22}$/;
                if (!b.test(p.auth_code)) return p.auth_code = "", p.promptWARN = !1, p.promptERR = !0, void(p.wordERR = "支付码错误，重新扫码");
                if (p.defindFlag) {
                    p.needFlag && p.isBk ? p.isBk = !0 : p.isBk = !1, p.wxFlag = !0;
                    var c = {
                        idCard: p.idCard,
                        tel: p.phone,
                        name: p.name,
                        idType: p.idType
                    };
                    return i.update({
                        id: p.mId
                    }, c, function (a) {
                        var b = {
                            _member: p.mId,
                            _card: p.cardId,
                            auth_code: p.auth_code,
                            isCost: p.isBk,
                            cardNo: p.cardNum
                        };
                        l.pay(b, function (a) {
                            p.close(), p.toastFlag = !0, p.wordOK = "支付成功", p.auth_code = "", k(function () {
                                p.toastFlag = !1
                            }, 1e3), p.getMember()
                        }, function (a) {
                            p.getMember(), p.deleteFlag = !0, p.auth_code = "", p.payWarn = a.data.data, p.wxFlag = !1
                        })
                    }, function (a) {
                        p.deleteFlag = !0, p.auth_code = "", p.payWarn = a.data.data
                    }), clearInterval(p.setIntervalId), p.showAuth_codeBox = !1, void(p.promptWARN = !1)
                }
                var d = {
                    name: p.name,
                    tel: p.phone,
                    _card: "",
                    idCard: p.idCard,
                    type: p.typeName,
                    payment: "alipay",
                    idType: p.idType
                };
                i.create(d, function (a) {
                    p.mId = a.data.member._id, p.needFlag && p.isBk ? p.isBk = !0 : p.isBk = !1, p.wxFlag = !0;
                    var b = {
                        _member: p.mId,
                        _card: p.cardId,
                        auth_code: p.auth_code,
                        isCost: p.isBk,
                        cardNo: p.cardNum
                    };
                    l.pay(b, function (a) {
                        clearInterval(p.setIntervalId), p.close(), p.toastFlag = !0, p.wordOK = "支付成功", p.promptWARN = !1, p.showAuth_codeBox = !1, p.auth_code = "", k(function () {
                            p.toastFlag = !1
                        }, 1e3), p.getMember()
                    }, function (a) {
                        clearInterval(p.setIntervalId), p.getMember(), p.promptWARN = !1, p.auth_code = "", p.deleteFlag = !0, p.showAuth_codeBox = !1, p.payWarn = a.data.data, p.wxFlag = !1
                    })
                }, function (a) {
                    clearInterval(p.setIntervalId), p.promptWARN = !1, p.showAuth_codeBox = !1, 402 == a.data.code ? (p.phoneFlag = !0, p.errPhone = "手机号码格式错误") : 500 == a.data.code && (p.phoneFlag = !0, p.errPhone = "该手机号已被使用", p.payFlag = !1, p.addFlag = !0)
                })
            }
        }, p.create = function () {
            if (p.defindFlag) return void p.deFun();
            switch (p.order.orderDate || (p.order.orderDate = new Date), p.order.orderDate = new Date(p.order.orderDate).getTime(), p.order.payment) {
            case "wx":
            case "alipay":
                p.showAuth_codeBox = !0, p.setIntervalId = setInterval(function () {
                    document.getElementById("auth_code").focus()
                }, 100);
                break;
            case "cash":
            case "check":
            case "card":
            case "pos":
                var a = {
                    name: p.name,
                    tel: p.phone,
                    idCard: p.idCard,
                    type: p.typeName,
                    idType: p.idType,
                    payment: p.order.payment,
                    levelDes: p.membertypeName
                };
                i.create(a, function (a) {
                    if (p.needFlag) {
                        var b = {
                            _member: a.data.member._id,
                            cardNo: p.cardNum
                        };
                        p.isUsed && (b = _.merge(b, {
                            isCost: !0,
                            payment: p.order.payment
                        })), i.cardBind(b, function (a) {
                            q()
                        }, function (a) {
                            p.phoneFlag = !0, p.errPhone = a.data.data
                        })
                    }
                    p.promptWARN = !1, p.close(), p.getMember()
                }, function (a) {
                    p.promptWARN = !1, 402 == a.data.code ? (p.phoneFlag = !0, p.errPhone = "手机号码格式错误") : 500 == a.data.code && (p.phoneFlag = !0, p.errPhone = "该手机号已被使用", p.payFlag = !1, p.addFlag = !0)
                })
            }
        }, p.chooseCard = function (a) {
            p.chooseCardFlag = !1, p.cardName = a.name, p.cardId = a._id, p.realPrice = a.realPrice
        }, p.judge = function (a) {
            switch (a) {
            case "name":
                p.name ? p.nameFlag = !1 : p.nameFlag = !0;
                break;
            case "phone":
                p.phone ? p.phoneFlag = !1 : p.phoneFlag = !0;
                break;
            case "tel":
                if (11 == p.tel.length) {
                    var b = {
                        mix: p.tel
                    };
                    i.index(b, function (a) {
                        p.answerFlag = !0, 1 == a.data.members.length ? (p.jFlag = !0, p.name = a.data.members[0].name, p.toId = a.data.members[0]._id) : p.jFlag = !1
                    }, function (a) {
                        p.promptERR = !0, p.wordERR = a.data.data
                    })
                }
            }
        }, p.move = function () {
            if (11 != p.tel.length) return p.promptERR = !0, void(p.wordERR = "请填写正确手机号");
            var a = {
                move_from: p.fromId,
                move_to: p.toId
            };
            i.move(a, function (a) {
                p.toastFlag = !0, p.wordOK = "账户过户成功", p.getMember(), k(function () {
                    p.toastFlag = !1
                }, 1e3), p.close()
            }, function (a) {
                p.promptERR = !0, p.wordERR = a.data.data
            })
        }, p.bk = function (a) {
            if (p.promptWARN = !0, p.wordWARN = "支付中", 13 == a.keyCode) switch (p.order.payment) {
            case "wx":
                var b = /^[1][0,1,2,3,4,5][0-9]{16}$/;
                if (!b.test(p.auth_code)) return p.auth_code = "", p.promptWARN = !1, p.promptERR = !0, void(p.wordERR = "支付码错误，重新扫码");
                p.wxFlag = !0;
                var c = {
                    _member: p.mId,
                    cardNo: p.cardNum,
                    auth_code: p.auth_code,
                    spbill_create_ip: "0.0.0.0"
                };
                i.wxPayBind(c, function (a) {
                    if (p.defindFlag) {
                        var b = {
                            idCard: p.idCard,
                            tel: p.phone,
                            name: p.name,
                            idType: p.idType
                        };
                        i.update({
                            id: p.mId
                        }, b, function (a) {
                            p.close(), p.toastFlag = !0, p.wordOK = "支付成功", p.promptWARN = !1, p.showAuth_codeBox = !1, p.auth_code = "", clearInterval(p.setIntervalId), k(function () {
                                p.toastFlag = !1
                            }, 1e3), p.getMember()
                        }, function (a) {
                            p.deleteFlag = !0, p.payWarn = a.data.data
                        })
                    } else p.close(), p.toastFlag = !0, p.wordOK = "支付成功", p.promptWARN = !1, p.showAuth_codeBox = !1, p.auth_code = "", clearInterval(p.setIntervalId), k(function () {
                        p.toastFlag = !1
                    }, 1e3), p.getMember()
                }, function (a) {
                    p.auth_code = "", p.showAuth_codeBox = !1, p.promptWARN = !1, p.deleteFlag = !0, p.payWarn = a.data.data, clearInterval(p.setIntervalId), p.wxFlag = !1, p.getMember()
                });
                break;
            case "alipay":
                var b = /^[25,26,27,28,29,30][0-9]{14,22}$/;
                if (!b.test(p.auth_code)) return p.auth_code = "", p.promptWARN = !1, p.promptERR = !0, void(p.wordERR = "支付码错误，重新扫码");
                var c = {
                    _member: p.mId,
                    cardNo: p.cardNum,
                    auth_code: p.auth_code
                };
                l.payBind(c, function (a) {
                    if (p.defindFlag) {
                        var b = {
                            idCard: p.idCard,
                            tel: p.phone,
                            name: p.name,
                            idType: p.idType
                        };
                        i.update({
                            id: p.mId
                        }, b, function (a) {
                            p.close(), p.toastFlag = !0, p.wordOK = "支付成功", p.promptWARN = !1, p.showAuth_codeBox = !1, p.auth_code = "", clearInterval(p.setIntervalId), k(function () {
                                p.toastFlag = !1
                            }, 1e3), p.getMember()
                        }, function (a) {
                            p.deleteFlag = !0, p.payWarn = a.data.data
                        })
                    } else p.close(), p.toastFlag = !0, p.wordOK = "支付成功", p.promptWARN = !1, p.showAuth_codeBox = !1, p.auth_code = "", clearInterval(p.setIntervalId), k(function () {
                        p.toastFlag = !1
                    }, 1e3), p.getMember()
                }, function (a) {
                    p.auth_code = "", p.showAuth_codeBox = !1, p.promptWARN = !1, p.deleteFlag = !0, p.payWarn = a.data.data, clearInterval(p.setIntervalId), p.wxFlag = !1, p.getMember()
                })
            }
        }, p.deFun = function () {
            switch (p.order.payment) {
            case "wx":
            case "alipay":
                p.showAuth_codeBox = !0, p.setIntervalId = setInterval(function () {
                    document.getElementById("bk").focus()
                }, 100);
                break;
            case "cash":
            case "check":
            case "card":
            case "pos":
                var a = {
                    _member: p.mId,
                    cardNo: p.cardNum,
                    isCost: !0,
                    payment: p.order.payment
                };
                i.cardBind(a, function (a) {
                    var b = {
                        idCard: p.idCard,
                        tel: p.phone,
                        name: p.name,
                        idType: p.idType
                    };
                    i.update({
                        id: p.mId
                    }, b, function (a) {
                        p.close(), p.toastFlag = !0, p.wordOK = "支付成功", k(function () {
                            p.toastFlag = !1
                        }, 1e3), p.getMember(), q()
                    }, function (a) {
                        p.deleteFlag = !0, p.payWarn = a.data.data
                    })
                }, function (a) {
                    p.phoneFlag = !0, p.errPhone = a.data.data
                })
            }
        }, p.bind = function () {
            if (!p.cardNum) return void(p.cardFlag = !0);
            if (p.isBk) switch (p.order.payment) {
            case "wx":
            case "alipay":
                p.showAuth_codeBox = !0, p.setIntervalId = setInterval(function () {
                    document.getElementById("fillCard").focus()
                }, 100);
                break;
            case "cash":
            case "check":
            case "card":
            case "pos":
                var a = {
                    _member: p.mId,
                    cardNo: p.cardNum,
                    isCost: !0,
                    payment: p.order.payment
                };
                i.cardBind(a, function (a) {
                    p.close(), p.toastFlag = !0, p.wordOK = "支付成功", k(function () {
                        p.toastFlag = !1
                    }, 1e3), p.getMember(), p.printCard(), q()
                }, function (a) {
                    p.phoneFlag = !0, p.errPhone = a.data.data
                })
            } else {
                var a = {
                    _member: p.mId,
                    cardNo: p.cardNum
                };
                i.cardBind(a, function (a) {
                    p.close(), p.wordOK = "绑定成功", p.toastFlag = !0, k(function () {
                        p.toastFlag = !1
                    }, 1e3), p.getMember(), q(), p.printCard()
                }, function (a) {
                    p.phoneFlag = !0, p.errPhone = a.data.data
                })
            }
        }, p.printCard = function () {
            var a = '<div><div><h3 style="font-size:20px">欢迎光临</h3><h3 style="font-size:20px">办卡消费小票</h3>操作员：' + p.admin + "</h3></div><span>**********************************</span><div>";
            a = a + "<div>办卡金额:" + p.cardCost + "元</div>", a = a + "<div>办卡日期:" + p.getNowFormatDate(new Date) + "</div><span>**********************************</span><div>客户签名:</div>";
            var b = getLodop();
            b.PRINT_INIT(""), b.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), b.SET_PRINTER_INDEXA(-1), b.SET_PRINT_PAGESIZE(3, 800, 100, ""), b.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", a), b.PRINT()
        }, p.finish = function () {
            if (p.name ? p.nameFlag = !1 : p.nameFlag = !0, p.phone) {
                var a = /^(((13[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(14[0-9]{1})|(18[0-9]{1}))+\d{8})$/;
                a.test(p.phone) ? p.phoneFlag = !1 : (p.errPhone = "请输入有效的手机号码！", p.phoneFlag = !0)
            } else p.errPhone = "此项为必填项", p.phoneFlag = !0; if (!p.nameFlag && !p.phoneFlag)
                if (p.defindFlag) {
                    if (!p.needFlag) {
                        if (!p.idCard) return void(p.idFlag = !0);
                        var b = {
                            idCard: p.idCard,
                            tel: p.phone,
                            name: p.name,
                            idType: p.idType
                        };
                        return void i.update({
                            id: p.mId
                        }, b, function (a) {
                            p.close(), p.toastFlag = !0, p.wordOK = "认证成功", k(function () {
                                p.toastFlag = !1
                            }, 1e3), p.getMember()
                        }, function (a) {
                            p.deleteFlag = !0, p.payWarn = a.data.data
                        })
                    }
                    if (!p.cardNum) return void(p.cardFlag = !0);
                    if (!p.isBk) {
                        var b = {
                            idCard: p.idCard,
                            tel: p.phone,
                            name: p.name,
                            idType: p.idType
                        };
                        return void i.update({
                            id: p.mId
                        }, b, function (a) {
                            var b = {
                                _member: p.mId,
                                cardNo: p.cardNum
                            };
                            i.cardBind(b, function (a) {
                                p.close(), p.toastFlag = !0, p.wordOK = "认证成功", k(function () {
                                    p.toastFlag = !1
                                }, 1e3), p.getMember(), q()
                            }, function (a) {
                                p.phoneFlag = !0, p.errPhone = a.data.data
                            })
                        }, function (a) {
                            p.deleteFlag = !0, p.payWarn = a.data.data
                        })
                    }
                    p.payFlag = !0, p.addFlag = !1, p.rp = p.cardCost
                } else if (p.addFlag = !1, p.isBk && p.needFlag) p.payFlag = !0, p.rp = p.cardCost, p.add = !0;
            else {
                var c = {
                    name: p.name,
                    tel: p.phone,
                    idCard: p.idCard,
                    type: p.typeName,
                    idType: p.idType,
                    levelDes: p.membertypeName
                };
                i.create(c, function (a) {
                    if (p.needFlag) {
                        var b = {
                            _member: a.data.member._id,
                            cardNo: p.cardNum
                        };
                        i.cardBind(b, function (a) {
                            q()
                        }, function (a) {
                            p.phoneFlag = !0, p.errPhone = a.data.data
                        })
                    }
                    p.promptWARN = !1, p.close(), p.getMember()
                }, function (a) {
                    p.promptWARN = !1, 402 == a.data.code ? (p.phoneFlag = !0, p.errPhone = "手机号码格式错误") : 500 == a.data.code && (p.phoneFlag = !0, p.errPhone = "该手机号已被使用", p.payFlag = !1, p.addFlag = !0)
                })
            }
        };
        var q = function () {
                e.get({}, function (a) {
                    var b = a.data.user._organization ? a.data.user._organization : a.data.user._id;
                    p.cardCount = a.data.user.cardNum, e.getOrgInfo({
                        id: b
                    }, function (a) {
                        p._id = a.data.user._id, p.cardCost = a.data.user.cardCost, p.admin = a.data.user.name, r()
                    }, function () {})
                }, function () {})
            },
            r = function () {
                var a = {
                    state: "all",
                    _org: p._id,
                    sortBy: "realPrice"
                };
                j.index(a, function (a) {
                    a.data.cards.length > 0 && (a.data.cards[0].select = !0, p.cardName = a.data.cards[0].name + "(" + a.data.cards[0].price + "元)", p.cardId = a.data.cards[0]._id, a.data.cards[0].flag = !0, p.realPrice = a.data.cards[0].realPrice), p.cards = a.data.cards
                })
            };
        p.chooseNewCard = function (a) {
            p.choosedCardFlag = !1, p.cardId = a._id, p.cardName = a.name + "(" + a.price + "元)", p.realPrice = a.realPrice
        }, p.choose = function (a) {
            _.each(p.cCards, function (a) {
                a.select = !1
            }), a.select = !0, "自定义充值" == a.price ? p.selfFlag = !0 : (p.cardId = a._id, p.selfFlag = !1, p.realPrice = a.realPrice)
        }, p.chooseMembertype = function (a) {
            for (var b = 0; b < p.membertypes.length; b++) p.membertypes[b].select = !1;
            a.select = !0, p.choosedMembertypeFlag = !1, p.membertypeName = a.name
        }, p.chooseType = function (a) {
            for (var b = 0; b < p.types.length; b++) p.types[b].select = !1;
            a.select = !0, p.choosedTypeFlag = !1, p.typeName = a.name
        }, p.pageChanged = function () {
            c.mPage = p.pagination.page, p.mix = p.searchName, p.getMember()
        }, p.search = function () {
            p.pagination.page = 1, p.pagination.itemsPerPage = 10, p.mix = p.searchName, p.getMember()
        }, p.getMember = function () {
            k(function () {
                p.levelFlag = !1, p.realFlag = !1, p.freezeFlag = !1;
                var a = {
                    isFreezed: p.isFreeze,
                    isReal: p.isReal,
                    levelDes: p.levelDes,
                    page: p.pagination.page,
                    itemsPerPage: p.pagination.itemsPerPage,
                    mix: p.mix,
                    state: p.state
                };
                i.index(a, function (a) {
                    p.mix = "", p.members = a.data.members;
                    for (var b = 0; b < p.members.length; b++) p.members[b].cardNo && p.members[b].cardNo.length > 9 && (p.members[b].cardNo = p.members[b].cardNo.substring(p.members[b].cardNo.length - 9, p.members[b].cardNo.length)), p.members[b].memberNo && p.members[b].memberNo.length > 9 && (p.members[b].memberNo = p.members[b].memberNo.substring(p.members[b].memberNo.length - 9, p.members[b].memberNo.length)), p.members[b].virtualAccount.expires_in && ((new Date).getTime() > new Date(p.members[b].virtualAccount.expires_in).getTime() ? p.members[b].virFlag = !0 : p.members[b].virFlag = !1), p.members[b].cards.length > 0 ? p.members[b].p = p.members[b].cards[0].total : p.members[b].p = "0", _.each(p.members[b].specialAccount, function (a) {
                        "5a1e4774138f87e51c2e79e9" == a._venue ? (p.members[b].accFlag = !0, p.members[b].accTot = a.total) : (p.members[b].accFlag = !1, p.members[b].accTot = 0)
                    });
                    var c = a.data.count;
                    p.pagination.totalItems = c, p.pagination.numPages = c / p.itemsPerPage
                })
            }, 100)
        }, p.initEmpty = function () {
            p.order = {
                _member: "",
                spbill_create_ip: "",
                auth_code: "",
                payment: "alipay",
                _card: ""
            }
        }, p.codeTel = function () {
            var a = {
                tel: p.phone,
                _org: p._id
            };
            i.judge(a, function (a) {
                a.data.isValued && (p.promptERR = !0, p.wordERR = "该手机号已被使用")
            }, function (a) {
                p.promptERR = !0, p.wordERR = a.data.data
            })
        };
        var s = function () {
                m.index({}, function (a) {
                    p.venues = a.data.venues, p.vrr = [], _.each(p.venues, function (a) {
                        a.openSpe && p.vrr.push(a)
                    })
                }, function (a) {})
            },
            t = function () {
                o.index({}, function (a) {
                    p.membertypes = a.data.membertypes, p.membertypeName = p.membertypes[0] ? p.membertypes[0].name : "暂无"
                }, function (a) {})
            },
            u = function () {
                q(), p.getMember(), r(), s(), t()
            };
        p.chooseChargeVenue = function (a) {
            p.chargeVenue ? p.chargeVenue._id == a._id ? (p.chargeVenue.image = "singleChoose_imageNo2", p.chargeVenue = "") : (p.chargeVenue.image = "singleChoose_imageNo2", p.chargeVenue = a, p.chargeVenue.image = "singleChoose_imageYes2") : (p.chargeVenue = a, p.chargeVenue.image = "singleChoose_imageYes2")
        }, u()
    }
    angular.module("fieldApp").controller("OrgMemberCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "Card", "$timeout", "Alipay", "Venue", "Tucard", "Membertype"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r) {
        var s = this;
        window.addEventListener("popstate", function (a) {
            clearInterval(s.setIntervalId)
        }, !1);
        var t = function () {
                s.page = 1, s.itemsPerPage = s.searchPageValue ? s.searchPageValue : 10, s.pagination = {
                    page: s.page,
                    itemsPerPage: s.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            u = function () {
                var a = {
                    page: s.pagination.page,
                    itemsPerPage: s.pagination.itemsPerPage,
                    isValued: "all"
                };
                s.mix && (a = _.merge(a, {
                    mix: s.mix
                })), r.getIndex(a, function (a) {
                    s.memberServices = a.data.memberServices;
                    for (var b = 0; b < s.memberServices.length; b++) s.memberServices[b].freezeDate && new Date(s.memberServices[b].freezeDate) > new Date ? s.memberServices[b].isFreeze = !0 : s.memberServices[b].isFreeze = !1, s.memberServices[b].endDate ? s.memberServices[b].isActive = !0 : s.memberServices[b].isActive = !1, "date" == s.memberServices[b].service.serviceType ? s.memberServices[b].endDate && new Date(s.memberServices[b].endDate) < new Date ? s.memberServices[b].isEnd = !0 : s.memberServices[b].isEnd = !1 : s.memberServices[b].endDate && new Date(s.memberServices[b].endDate) < new Date || s.memberServices[b].valueLeft <= 0 ? s.memberServices[b].isEnd = !0 : s.memberServices[b].isEnd = !1;
                    var c = a.data.count;
                    s.pagination.totalItems = c, s.pagination.numPages = c / s.itemsPerPage
                }, function () {})
            },
            v = function () {
                s.showMemberService = {
                    _memberService: void 0,
                    value: void 0,
                    name: void 0,
                    tel: void 0,
                    date: void 0,
                    cardNo: void 0,
                    _toMember: void 0,
                    _toMemberName: void 0,
                    isCost: !1,
                    payment: "cash",
                    spbill_create_ip: "1.1.1.1",
                    auth_code: void 0
                }
            },
            w = function () {
                s.payments = [{
                    img: "chooseImgTrue",
                    name: "现金",
                    value: "cash"
                }, {
                    img: "chooseImgFalse",
                    name: "支付宝",
                    value: "alipay"
                }, {
                    img: "chooseImgFalse",
                    name: "微信",
                    value: "wx"
                }, {
                    img: "chooseImgFalse",
                    name: "转账",
                    value: "card"
                }, {
                    img: "chooseImgFalse",
                    name: "支票",
                    value: "check"
                }, {
                    img: "chooseImgFalse",
                    name: "POS机",
                    value: "pos"
                }]
            },
            x = function () {
                s.showChangeDate = "请选择冻结到哪天"
            },
            y = function () {
                s.menberBg = !1, s.postponeCard = !1, s.edit = !1, s.changeCard = !1, s.freezeCard = !1, s.changeName = !1, s.againCheckBox = !1
            },
            z = function () {
                return payCodeCheck(s.auth_code, "wx") ? (s.showMemberService.auth_code = s.auth_code, void i.wxPayBind({}, s.showMemberService, function (a) {
                    s.auth_code = void 0, s.close(), C("ok", "换卡成功"), u()
                }, function (a) {
                    s.auth_code = void 0, C("err", a.data.data)
                })) : void C("err", "支付码错误，重新扫码")
            },
            A = function () {
                return payCodeCheck(s.auth_code, "alipay") ? (s.showMemberService.auth_code = s.auth_code, void l.payBind({}, s.showMemberService, function (a) {
                    s.auth_code = void 0, s.close(), C("ok", "换卡成功"), u()
                }, function (a) {
                    s.auth_code = void 0, C("err", a.data.data)
                })) : void C("err", "支付码错误，重新扫码")
            },
            B = function () {
                t(), u(), v(), w(), y(), x()
            };
        s.mySearch = function () {
            s.pagination.page = 1, u()
        }, s.enterCheck = function (a) {
            13 == a.keyCode && (console.log("键盘回车查询数据"), s.mySearch())
        }, s.showPostponeCard = function (a) {
            s.menberBg = !0, s.postponeCard = !0, s.showMemberService._memberService = a
        }, s.postponeCardSure = function () {
            return isNaN(s.showMemberService.value) ? void C("err", "请输入数字") : parseInt(s.showMemberService.value) < 0 ? void C("err", "请输入大于0的数字") : (s.showMemberService.value = parseInt(s.showMemberService.value), void r.postpone({}, s.showMemberService, function () {
                s.close(), C("ok", "延期成功"), u()
            }, function (a) {
                C("ok", a.data.data)
            }))
        }, s.showEdit = function (a) {
            s.menberBg = !0, s.edit = !0, s.showMemberService._memberService = a._id, s.showMemberService.name = a.name, s.showMemberService.tel = a.tel
        }, s.update = function () {
            r.update({
                id: s.showMemberService._memberService
            }, s.showMemberService, function () {
                s.close(), C("ok", "编辑信息成功"), u()
            }, function (a) {
                C("err", a.data.data)
            })
        }, s.showChangeCard = function (a) {
            s.menberBg = !0, s.changeCard = !0, s.showMemberService._memberService = a
        }, s.choosePayment = function (a) {
            for (var b = 0; b < s.payments.length; b++) s.payments[b].img = "chooseImgFalse";
            a.img = "chooseImgTrue", s.showMemberService.payment = a.value
        }, s.changeBtnSure = function () {
            s.showMemberService.isCost ? "alipay" == s.showMemberService.payment || "wx" == s.showMemberService.payment ? (s.promptPay = !0, s.wordPay = "请扫描用户二维码", s.auth_code = "", s.setIntervalId = setInterval(function () {
                document.getElementById("auth_code").focus()
            }, 100)) : s.againCheckBox = !0 : s.otherPay()
        }, s.otherPay = function () {
            r.changeCard({}, s.showMemberService, function () {
                s.close(), C("ok", "换卡成功"), u()
            }, function (a) {
                C("err", a.data.data)
            })
        }, s.auth_codePay = function (a) {
            if (13 == a.keyCode) switch (s.closePrompt(), s.promptWARN = !0, s.wordWARN = "支付中", s.showMemberService.payment) {
            case "wx":
                z();
                break;
            case "alipay":
                A()
            }
        }, s.showFreezeCard = function (a) {
            s.menberBg = !0, s.freezeCard = !0, s.showMemberService._memberService = a
        }, s.closeChangeDateBox = function () {
            s.changeDateBox = !1, setTimeout(function () {
                s.showChangeDate = s.changeDate, a.$apply()
            }, 100)
        }, s.dongBtn = function () {
            return "请选择冻结到哪天" == s.showChangeDate ? void C("err", "请选择日期") : (s.showMemberService.date = new Date(s.showChangeDate).getTime(), void r.freeze({}, s.showMemberService, function (a) {
                s.close(), C("ok", "冻结成功"), u()
            }, function (a) {
                C("err", a.data.data)
            }))
        }, s.showChangeName = function (a) {
            s.menberBg = !0, s.changeName = !0, s.showMemberService._memberService = a
        }, s.searchMember = function () {
            isTel(s.showMemberService.tel) && i.indexByTel({
                tel: s.showMemberService.tel
            }, function (a) {
                s.showMemberService._toMember = a.data.member._id, s.showMemberService._toMemberName = a.data.member.name
            }, function (a) {
                s.showMemberService.tel = void 0, C("err", "手机号输入不正确")
            })
        }, s.transferCard = function () {
            r.change({}, s.showMemberService, function (a) {
                s.close(), C("ok", "过户成功"), u()
            }, function (a) {
                C("err", a.data.data)
            })
        }, s.close = function () {
            y(), v(), w(), x()
        }, s.pageChanged = function () {
            u()
        }, s.closePrompt = function () {
            s.promptPay = !1, clearInterval(s.setIntervalId)
        };
        var C = function (b, c) {
            switch (s.promptOK = !1, s.promptERR = !1, s.promptWARN = !1, b) {
            case "ok":
                s.promptOK = !0, s.wordOK = c;
                break;
            case "err":
                s.promptERR = !0, s.wordERR = c
            }
            setTimeout(function () {
                s.promptOK = !1, s.promptERR = !1, a.$apply()
            }, 1500)
        };
        B()
    }
    angular.module("fieldApp").controller("OrgVipTableCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "Item", "Record", "Alipay", "Time", "$timeout", "Venue", "Tucard", "Ticket", "MemberService"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this;
        j.titleState = "member", j.canEdit = !1, j.cardNo = "请选择账号", j.telArr = [], j.close = function () {
            j.addFlag = !1, j.cardNo = "请选择账号", j.name = "", j.idCard = "", j.phone = "", j.noFlag = !1, j.nameFlag = !1, j.idFlag = !1, j.phoneFlag = !1
        }, j.showInfo = function (a) {
            j.name = a.name, j.tel = a.tel, j.cardNo = a.memberNo, j.merges = a.merge, j.infoFlag = !0
        }, j.page = 1, j.itemsPerPage = 10, j.pagination = {
            page: j.page,
            itemsPerPage: j.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, j.pageChanged = function () {
            j.getHistory()
        };
        j.search = function () {
            if (!j.searchNum) return j.promptERR = !0, void(j.wordERR = "请填写会员卡号/手机号");
            var a = {
                tel: j.searchNum
            };
            i.judgeAdd(a, function (a) {
                a.data.needMerge ? (j.members = a.data.members, _.each(j.members, function (a) {
                    a.cards[0] ? a.xPrice = a.cards[0].total : a.xPrice = 0, a.fPrice = a.virtualAccount.total
                })) : (j.promptERR = !0, j.wordERR = "该账号唯一，不需要合并")
            }, function (a) {
                var b = {
                    cardNo: j.searchNum
                };
                i.judgeAdd(b, function (a) {
                    a.data.needMerge ? (j.members = a.data.members, _.each(j.members, function (a) {
                        a.cards[0] ? a.xPrice = a.cards[0].total : a.xPrice = 0, a.fPrice = a.virtualAccount.total
                    })) : (j.promptERR = !0, j.wordERR = "该账号唯一，不需要合并")
                }, function (a) {
                    j.wordERR = a.data.data, j.promptERR = !0
                })
            })
        }, j.changeM = function (a) {
            j.canEdit = !1, a.selectFlag = !a.selectFlag, _.each(j.members, function (a) {
                return a.selectFlag ? void(j.canEdit = !0) : void 0
            })
        }, j.toAdd = function () {
            j.addFlag = !0, j.chooseMembers = [];
            for (var a = 0; a < j.members.length; a++) j.members[a].selectFlag && j.chooseMembers.push(j.members[a])
        }, j.choose = function (a) {
            j.chooseId = a._id, j.cardNo = a.cardNo, j.name = a.name, j.idCard = a.idCard, _.each(j.members, function (a) {
                a.oneSelect = !1
            }), a.oneSelect = !0, j.choosedMemberFlag = !1
        }, j.finish = function () {
            if (j.jFlag = !1, "请选择账号" == j.cardNo ? j.noFlag = !0 : j.noFlag = !1, j.name ? j.nameFlag = !1 : j.nameFlag = !0, j.idCard ? j.idFlag = !1 : j.idFlag = !0, j.phone ? j.phoneFlag = !1 : j.phoneFlag = !0, !(j.noFlag || j.nameFlag || j.idFlag || j.phoneFlag)) {
                if (_.each(j.telArr, function (a) {
                    a == j.phone && (j.jFlag = !0)
                }), j.jFlag) return j.wordERR = "该号码已被使用", void(j.promptERR = !0);
                var a = {
                    tel: j.phone,
                    name: j.name,
                    idCard: j.idCard,
                    cardNo: j.cardNo,
                    xPrice: 0,
                    fPrice: 0,
                    rFlag: !0,
                    nMembers: j.chooseMembers,
                    memberArr: []
                };
                _.each(j.chooseMembers, function (b) {
                    if (a.xPrice = a.xPrice + b.xPrice, a.fPrice = a.fPrice + b.fPrice, b.oneSelect) var c = {
                        id: b._id,
                        tel: j.phone,
                        name: j.name,
                        idCard: j.idCard,
                        option: "mergeAs"
                    };
                    else var c = {
                        id: b._id,
                        tel: "13333333333",
                        name: "xx",
                        idCard: "333333333333333",
                        option: "merge",
                        mergeTo: j.chooseId
                    };
                    a.memberArr.push(c)
                });
                var b = [];
                b.push(a), _.each(j.members, function (a) {
                    a.selectFlag || b.push(a)
                }), j.members = b, j.telArr.push(j.phone), j.close()
            }
        }, j.re = function (a) {
            var b = [],
                c = [];
            _.each(a.nMembers, function (a) {
                b.push(a)
            }), _.each(j.members, function (c) {
                c.cardNo != a.cardNo && b.push(c)
            }), j.members = b, _.each(j.telArr, function (b) {
                b != a.tel && j.brr.push[b]
            }), j.telArr = c
        }, j.sure = function () {
            var a = !1;
            return _.each(j.members, function (b) {
                b.rFlag || (a = !0)
            }), a ? void(j.deleteFlag = !0) : void j.submit()
        }, j.submit = function () {
            var a = {
                tel: j.searchNum,
                memberArr: []
            };
            _.each(j.members, function (b) {
                if (b.rFlag) _.each(b.memberArr, function (b) {
                    a.memberArr.push(b)
                });
                else {
                    var c = {
                        id: b._id,
                        tel: "13333333333",
                        name: "22",
                        idCard: "22",
                        option: "delete"
                    };
                    a.memberArr.push(c)
                }
            }), i.add(a, function (a) {
                j.wordOK = "合并成功", j.promptOK = !0, j.deleteFlag = !1, j.members = [], j.telArr = []
            }, function (a) {
                j.wordERR = a.data.data, j.promptERR = !0
            })
        }, j.changeTitle = function (a) {
            switch (j.titleState = "", a) {
            case "member":
                j.titleState = "member", f.go("csd-old.member", {
                    state: "member"
                });
                break;
            default:
                j.titleState = "record", f.go("csd-old.record", {
                    state: "record"
                })
            }
            k()
        };
        var k = function () {
            j.getHistory()
        };
        j.getHistory = function () {
            var a = {
                tel: j.searchN,
                page: j.pagination.page,
                itemsPerPage: j.pagination.itemsPerPage
            };
            i.mergeHistory(a, function (a) {
                j.historyMembers = a.data.members, _.each(a.data.members, function (a) {
                    if (a.rr = [], a.memberNo) var b = a.memberNo;
                    else var b = "暂无";
                    a.des = a.name + "会员号:" + b + "余额:" + a.cards[0].total, a.rr.push(a.des), _.each(a.merge, function (b) {
                        if (b.memberNo) var c = b.memberNo;
                        else var c = "暂无";
                        a.des = a.des + ";" + b.name + "会员号:" + c + "余额:" + b.cards[0].total;
                        var d = b.name + "会员号:" + c + "余额:" + b.cards[0].total;
                        a.rr.push(d)
                    })
                });
                var b = a.data.count;
                j.pagination.totalItems = b, j.pagination.numPages = b / j.itemsPerPage
            }, function (a) {
                var b = {
                    cardNo: j.searchN
                };
                i.mergeHistory(b, function (a) {
                    _.each(a.data.members, function (a) {
                        if (a.rr = [], a.memberNo) var b = a.memberNo;
                        else var b = "暂无";
                        a.des = a.name + "会员号:" + b + "余额:" + a.cards[0].total, a.rr.push(a.des), _.each(a.merge, function (b) {
                            if (b.memberNo) var c = b.memberNo;
                            else var c = "暂无";
                            a.des = a.des + ";" + b.name + "会员号:" + c + "余额:" + b.cards[0].total;
                            var d = b.name + "会员号:" + c + "余额:" + b.cards[0].total;
                            a.rr.push(d)
                        })
                    }), j.historyMembers = a.data.members;
                    var b = a.data.count;
                    j.pagination.totalItems = b, j.pagination.numPages = b / j.itemsPerPage
                }, function (a) {
                    j.wordERR = a.data.data, j.promptERR = !0
                })
            })
        }, j.enterCheck = function (a) {
            13 == a.keyCode && j.checkMember()
        }, k()
    }
    angular.module("fieldApp").controller("OrgOldCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member"]
}(),
function () {
    "use strict";

    function a(a) {
        a.state("org-field-book", {
            params: {
                value: "field",
                sencond: "book"
            },
            url: "/org/field/book",
            templateUrl: "app/organization/field/once/field-book.html",
            controller: "OrgFieldBookCtrl",
            controllerAs: "orgFieldBookCtrl",
            "abstract": !0
        }).state("org-field-book.once", {
            url: "/once?state",
            templateUrl: "app/organization/field/once/field-book-once.html"
        }).state("org-field-book.flexible", {
            url: "/flexible?state",
            templateUrl: "app/organization/field/once/field-book-flexible.html"
        }).state("org-field-longbook", {
            params: {
                value: "field",
                sencond: "book"
            },
            url: "/org/field/longbook",
            templateUrl: "app/organization/field/long/field-book-long.html",
            controller: "OrgFieldLongBookCtrl",
            controllerAs: "orgFieldLongBookCtrl"
        }).state("org-field-cancelbook", {
            params: {
                value: "field",
                sencond: "book"
            },
            url: "/org/field/cancelbook",
            templateUrl: "app/organization/field/cancel/field-book-cancel.html",
            controller: "OrgFieldCancelBookCtrl",
            controllerAs: "orgFieldCancelBookCtrl"
        }).state("org-ticket", {
            params: {
                value: "field",
                sencond: "ticket"
            },
            url: "/org/ticket",
            templateUrl: "app/organization/field/ticket/ticket.html",
            controller: "OrgTicketCtrl",
            controllerAs: "orgTicketCtrl",
            "abstract": !0
        }).state("org-ticket.ticket", {
            url: "/sale?state",
            templateUrl: "app/organization/field/ticket/ticket-sale.html"
        }).state("org-ticket.record", {
            url: "/record?state",
            templateUrl: "app/organization/field/ticket/ticket-record.html"
        }).state("org-product", {
            params: {
                value: "field",
                sencond: "product"
            },
            url: "/org/product",
            templateUrl: "app/organization/product/product.html",
            controller: "OrgProductCtrl",
            controllerAs: "orgProductCtrl",
            "abstract": !0
        }).state("org-product.sale", {
            url: "/sale?state",
            templateUrl: "app/organization/product/product-sale.html"
        }).state("org-product.record", {
            url: "/record?state",
            templateUrl: "app/organization/product/product-record.html"
        }).state("org-finance-cashall", {
            params: {
                value: "finance"
            },
            url: "/org/finance/cashall",
            templateUrl: "app/organization/finance/cashall/finance-cashall.html",
            controller: "OrgFinanceCashallCtrl",
            controllerAs: "orgFinanceCashallCtrl"
        }).state("org-finance-field", {
            params: {
                value: "finance"
            },
            url: "/org/finance/field",
            templateUrl: "app/organization/finance/field/finance-field.html",
            controller: "OrgFinanceFieldCtrl",
            controllerAs: "orgFinanceFieldCtrl"
        }).state("org-finance-shop", {
            params: {
                value: "finance"
            },
            url: "/org/finance/shop",
            templateUrl: "app/organization/finance/shop/finance-shop.html",
            controller: "OrgFinanceShopCtrl",
            controllerAs: "orgFinanceShopCtrl"
        }).state("org-finance-prep", {
            params: {
                value: "finance"
            },
            url: "/org/finance/prep",
            templateUrl: "app/organization/finance/preporder/finance-preporder.html",
            controller: "OrgFinancePrepCtrl",
            controllerAs: "orgFinancePrepCtrl"
        }).state("org-service-count", {
            params: {
                value: "finance"
            },
            url: "/org/service/count",
            templateUrl: "app/organization/finance/service/service-count.html",
            controller: "OrgServiceCountCtrl",
            controllerAs: "orgServiceCountCtrl"
        }).state("org-finance-preppay", {
            params: {
                value: "finance"
            },
            url: "/org/finance/preppay",
            templateUrl: "app/organization/finance/preppay/preppay-view.html",
            controller: "OrgFinancePreppayCtrl",
            controllerAs: "orgFinancePreppayCtrl"
        }).state("org-member", {
            params: {
                value: "member",
                sencond: "member"
            },
            url: "/org/member",
            templateUrl: "app/organization/member/member.html",
            controller: "OrgMemberCtrl",
            controllerAs: "orgMemberCtrl"
        }).state("org-docord", {
            params: {
                value: "member"
            },
            url: "/org/docord",
            templateUrl: "app/organization/member/member-docord.html",
            controller: "OrgDocordCtrl",
            controllerAs: "orgDocordCtrl"
        }).state("org-old", {
            params: {
                value: "member"
            },
            url: "/org/old",
            templateUrl: "app/organization/member/old-record.html",
            controller: "OrgOldCtrl",
            controllerAs: "orgOldCtrl"
        }).state("org-chongzhi", {
            params: {
                value: "card",
                sencond: "chongzhi"
            },
            url: "/org/chongzhi",
            templateUrl: "app/organization/card/chongzhi.html",
            controller: "OrgChongzhiCtrl",
            controllerAs: "orgChongzhiCtrl"
        }).state("org-card", {
            params: {
                value: "card",
                sencond: "entity"
            },
            url: "/org/cardrecord",
            templateUrl: "app/organization/card/card.html",
            controller: "OrgCardCtrl",
            controllerAs: "orgCardCtrl"
        }).state("org-banka", {
            params: {
                value: "card",
                sencond: "entity"
            },
            url: "/org/banka",
            templateUrl: "app/organization/card/banka.html",
            controller: "OrgBankaCtrl",
            controllerAs: "orgBankaCtrl"
        }).state("org-entity", {
            params: {
                value: "card",
                sencond: "entity"
            },
            url: "/org/entity",
            templateUrl: "app/organization/card/card-entity.html",
            controller: "OrgEntityCtrl",
            controllerAs: "orgEntityCtrl"
        }).state("org-test", {
            params: {
                value: "test",
                sencond: "test"
            },
            url: "/org/swim/test",
            templateUrl: "app/organization/swim/test.html",
            controller: "OrgTestCtrl",
            controllerAs: "orgTestCtrl"
        }).state("org-show", {
            params: {
                value: "test",
                sencond: "test"
            },
            url: "/org/swim/show",
            templateUrl: "app/organization/swim/show.html",
            controller: "OrgShowCtrl",
            controllerAs: "orgShowCtrl"
        }).state("org-index", {
            params: {
                value: "index",
                sencond: "index"
            },
            url: "/org/swim/index",
            templateUrl: "app/organization/swim/index.html",
            controller: "OrgIndexCtrl",
            controllerAs: "orgIndexCtrl"
        }).state("org-singal", {
            params: {
                value: "singal",
                sencond: "singal"
            },
            url: "/org/swim/singal",
            templateUrl: "app/organization/swim/singal.html",
            controller: "OrgSingalCtrl",
            controllerAs: "orgSingalCtrl"
        }).state("org-muti", {
            params: {
                value: "muti",
                sencond: "muti"
            },
            url: "/org/swim/muti",
            templateUrl: "app/organization/swim/muti.html",
            controller: "OrgMutiCtrl",
            controllerAs: "orgMutiCtrl"
        }).state("org-enter", {
            params: {
                value: "enter",
                sencond: "enter"
            },
            url: "/org/swim/enter",
            templateUrl: "app/organization/swim/enter.html",
            controller: "OrgEnterCtrl",
            controllerAs: "orgEnterCtrl"
        }).state("org-deal", {
            params: {
                value: "deal",
                sencond: "deal"
            },
            url: "/org/swim/deal",
            templateUrl: "app/organization/swim/deal.html",
            controller: "OrgDealCtrl",
            controllerAs: "orgDealCtrl"
        }).state("org-check", {
            params: {
                value: "check",
                sencond: "check"
            },
            url: "/org/swim/check",
            templateUrl: "app/organization/swim/check.html",
            controller: "OrgCheckCtrl",
            controllerAs: "orgCheckCtrl"
        }).state("csd-vip-table", {
            params: {
                value: "viptable",
                sencond: "viptable"
            },
            url: "/csd/swim/vip/table",
            templateUrl: "app/organization/swim/membership-card.html",
            controller: "CsdVipTableCtrl",
            controllerAs: "csdVipTableCtrl"
        }).state("org-change", {
            params: {
                value: "change",
                sencond: "change"
            },
            url: "/org/swim/change",
            templateUrl: "app/organization/swim/change.html",
            controller: "OrgChangeCtrl",
            controllerAs: "orgChangeCtrl"
        }).state("org-ring", {
            params: {
                value: "ring",
                sencond: "ring"
            },
            url: "/org/swim/ring",
            templateUrl: "app/organization/swim/ring.html",
            controller: "OrgRingCtrl",
            controllerAs: "orgRingCtrl"
        }).state("org-shop", {
            params: {
                value: "shop",
                sencond: "shop"
            },
            url: "/org/swim/shop",
            templateUrl: "app/organization/swim/shop.html",
            controller: "OrgShopCtrl",
            controllerAs: "orgShopCtrl"
        }).state("org-inventory", {
            params: {
                value: "inventory"
            },
            url: "/org/inventory",
            templateUrl: "app/organization/shop/inventory.html",
            controller: "OrgInventoryCtrl",
            controllerAs: "orgInventoryCtrl",
            "abstract": !0
        }).state("org-inventory.stock", {
            url: "/stock?state",
            templateUrl: "app/organization/shop/inventory-stock.html"
        }).state("org-inventory.record", {
            url: "/record?state",
            templateUrl: "app/organization/shop/inventory-record.html"
        }).state("org-sell", {
            params: {
                value: "sell",
                sencond: "stock"
            },
            url: "/org/sell",
            templateUrl: "app/organization/shop/sell.html",
            controller: "OrgSellCtrl",
            controllerAs: "orgSellCtrl",
            "abstract": !0
        }).state("org-sell.sale", {
            url: "/sale?state",
            templateUrl: "app/organization/shop/sell-sale.html"
        }).state("org-sell.record", {
            url: "/record?state",
            templateUrl: "app/organization/shop/sell-record.html"
        }).state("org-purchase", {
            params: {
                value: "sell",
                sencond: "purchase"
            },
            url: "/org/purchase",
            templateUrl: "app/organization/stock/purchase.html",
            controller: "OrgPurchaseCtrl",
            controllerAs: "orgPurchaseCtrl"
        }).state("org-stock", {
            params: {
                value: "sell",
                sencond: "purchase"
            },
            url: "/org/stock",
            templateUrl: "app/organization/stock/stock.html",
            controller: "OrgStockCtrl",
            controllerAs: "orgStockCtrl"
        }).state("org-shop-form", {
            params: {
                value: "sell",
                sencond: "stock"
            },
            url: "/org/shop/form",
            templateUrl: "app/organization/stock/shop-form.html",
            controller: "OrgShopFormCtrl",
            controllerAs: "orgShopFormCtrl"
        }).state("org-purchase-record", {
            params: {
                value: "sell",
                sencond: "stock"
            },
            url: "/org/purchase/record",
            templateUrl: "app/organization/stock/purchase-record.html",
            controller: "OrgPurchaseRecordCtrl",
            controllerAs: "orgPurchaseRecordCtrl"
        }).state("org-return-record", {
            params: {
                value: "sell",
                sencond: "stock"
            },
            url: "/org/return/record",
            templateUrl: "app/organization/stock/return-record.html",
            controller: "OrgReturnRecordCtrl",
            controllerAs: "orgReturnRecordCtrl"
        }).state("org-dummy", {
            params: {
                value: "card",
                sencond: "virtual"
            },
            url: "/org/dummy",
            templateUrl: "app/organization/card/dummy.html",
            controller: "OrgDummyCtrl",
            controllerAs: "orgDummyCtrl",
            "abstract": !0
        }).state("org-dummy.normal", {
            url: "/normal?state",
            templateUrl: "app/organization/card/dummy-normal.html"
        }).state("org-dummy.enter", {
            url: "/enter?state",
            templateUrl: "app/organization/card/dummy-enter.html"
        }).state("org-dummy.record", {
            url: "/record?state",
            templateUrl: "app/organization/card/dummy-record.html"
        }).state("org-member-detail", {
            params: {
                value: "member"
            },
            url: "/org/member/:id?searchName",
            templateUrl: "app/organization/member/member-detail.html",
            controller: "OrgMemberDetailCtrl",
            controllerAs: "orgMemberDetailCtrl",
            "abstract": !0
        }).state("org-member-detail.info", {
            url: "/member/detail/info?state",
            templateUrl: "app/organization/member/member-detail-info.html"
        }).state("org-member-detail.record", {
            url: "/member/detail/record",
            templateUrl: "app/organization/member/member-detail-record.html"
        }).state("org-vip-table", {
            params: {
                value: "member",
                sencond: "memberservice"
            },
            url: "/org/swim/vip/table",
            templateUrl: "app/organization/member/membership-card.html",
            controller: "OrgVipTableCtrl",
            controllerAs: "orgVipTableCtrl"
        }).state("org-staff", {
            params: {
                value: "staff"
            },
            url: "/org/staff",
            templateUrl: "app/organization/staff/staff.html",
            controller: "OrgStaffCtrl",
            controllerAs: "orgStaffCtrl",
            "abstract": !0
        }).state("org-staff.all", {
            url: "/all",
            templateUrl: "app/organization/staff/staff-all.html"
        }).state("org-staff.explain", {
            url: "/explain",
            templateUrl: "app/organization/staff/staff-explain.html"
        }).state("org-setting-person", {
            params: {
                value: "setting",
                sencond: "person"
            },
            url: "/org/setting/person",
            templateUrl: "app/organization/setting/setting-person.html",
            controller: "OrgSettingPersonCtrl",
            controllerAs: "orgSettingPersonCtrl"
        }).state("org-setting-item", {
            params: {
                value: "setting",
                sencond: "item"
            },
            url: "/org/setting/item",
            templateUrl: "app/organization/setting/setting-item.html",
            controller: "OrgSettingItemCtrl",
            controllerAs: "orgSettingItemCtrl"
        }).state("org-setting-voucher", {
            params: {
                value: "setting",
                sencond: "voucher"
            },
            url: "/org/setting/voucher",
            templateUrl: "app/organization/setting/setting-voucher.html",
            controller: "OrgSettingVoucherCtrl",
            controllerAs: "orgSettingVoucherCtrl"
        }).state("org-setting-vip", {
            params: {
                value: "setting",
                sencond: "vip",
                third: "vip"
            },
            url: "/org/setting/vip",
            templateUrl: "app/organization/setting/setting-vip.html",
            controller: "OrgSettingVipCtrl",
            controllerAs: "orgSettingVipCtrl"
        }).state("org-setting-special", {
            params: {
                value: "setting",
                sencond: "vip",
                third: "special"
            },
            url: "/org/setting/special",
            templateUrl: "app/organization/setting/setting-special.html",
            controller: "OrgSettingSpecialCtrl",
            controllerAs: "orgSettingSpecialCtrl"
        }).state("org-setting-card", {
            params: {
                value: "setting",
                sencond: "vip",
                third: "card"
            },
            url: "/org/setting/card",
            templateUrl: "app/organization/setting/setting-card.html",
            controller: "OrgSettingCardCtrl",
            controllerAs: "orgSettingCardCtrl"
        }).state("org-setting-time-card", {
            params: {
                value: "setting",
                sencond: "vip",
                third: "timecard"
            },
            url: "/org/setting/timecard",
            templateUrl: "app/organization/setting/setting-time-card.html",
            controller: "OrgTimeCardCtrl",
            controllerAs: "orgTimeCardCtrl"
        }).state("org-setting-date-card", {
            params: {
                value: "setting",
                sencond: "vip",
                third: "datecard"
            },
            url: "/org/setting/datecard",
            templateUrl: "app/organization/setting/setting-date-card.html",
            controller: "OrgDateCardCtrl",
            controllerAs: "orgDateCardCtrl"
        }).state("org-setting-service-tag", {
            params: {
                value: "setting",
                sencond: "vip",
                third: "servicetag"
            },
            url: "/org/setting/servicetag",
            templateUrl: "app/organization/setting/setting-service-tag.html",
            controller: "OrgServiceTagCtrl",
            controllerAs: "orgServiceTagCtrl"
        }).state("org-setting-venue-register", {
            params: {
                value: "setting",
                sencond: "venue",
                third: "venue"
            },
            url: "/org/setting/venue/register",
            templateUrl: "app/organization/setting/setting-venue-register.html",
            controller: "OrgVenueRegisterCtrl",
            controllerAs: "orgVenueRegisterCtrl"
        }).state("org-setting-field-register", {
            params: {
                value: "setting",
                sencond: "field",
                third: "field"
            },
            url: "/org/setting/field/register",
            templateUrl: "app/organization/setting/setting-field-register.html",
            controller: "OrgFieldRegisterCtrl",
            controllerAs: "orgFieldRegisterCtrl"
        }).state("org-setting-time-register", {
            params: {
                value: "setting",
                sencond: "field",
                third: "time"
            },
            url: "/org/setting/time/register",
            templateUrl: "app/organization/setting/setting-time-register.html",
            controller: "OrgTimeRegisterCtrl",
            controllerAs: "orgTimeRegisterCtrl"
        }).state("org-setting-price-register", {
            params: {
                value: "setting",
                sencond: "field",
                third: "price"
            },
            url: "/org/setting/price/register",
            templateUrl: "app/organization/setting/setting-price-register.html",
            controller: "OrgPriceRegisterCtrl",
            controllerAs: "orgPriceRegisterCtrl"
        }).state("org-setting-holiday", {
            params: {
                value: "setting",
                sencond: "field",
                third: "holiday"
            },
            url: "/org/setting/holiday",
            templateUrl: "app/organization/setting/setting-holiday.html",
            controller: "OrgSettingHolidayCtrl",
            controllerAs: "orgSettingHolidayCtrl"
        }).state("org-setting-supply", {
            params: {
                value: "sell",
                sencond: "sale"
            },
            url: "/org/setting/shop/supply",
            templateUrl: "app/organization/setting/setting-supply.html",
            controller: "OrgSupplyCtrl",
            controllerAs: "orgSupplyCtrl"
        }).state("org-setting-product-info", {
            params: {
                value: "sell",
                sencond: "sale"
            },
            url: "/org/setting/shop/info",
            templateUrl: "app/organization/setting/setting-product-info.html",
            controller: "OrgProductInfoCtrl",
            controllerAs: "orgProductInfoCtrl"
        }).state("org-setting-service", {
            params: {
                value: "setting",
                sencond: "service"
            },
            url: "/org/setting/service",
            templateUrl: "app/organization/setting/setting-service.html",
            controller: "OrgSettingServiceCtrl",
            controllerAs: "orgSettingServiceCtrl"
        }).state("org-setting-type", {
            params: {
                value: "setting",
                sencond: "service"
            },
            url: "/org/setting/type",
            templateUrl: "app/organization/setting/setting-type.html",
            controller: "OrgSettingTypeCtrl",
            controllerAs: "orgSettingTypeCtrl"
        }).state("org-setting-ticket", {
            params: {
                value: "setting",
                sencond: "ticket"
            },
            url: "/org/setting/ticket",
            templateUrl: "app/organization/setting/setting-ticket.html",
            controller: "OrgSettingTicketCtrl",
            controllerAs: "orgSettingTicketCtrl"
        }).state("org-setting-tag", {
            params: {
                value: "setting",
                sencond: "tag"
            },
            url: "/org/setting/tag",
            templateUrl: "app/organization/setting/setting-tag.html",
            controller: "OrgSettingTagCtrl",
            controllerAs: "orgSettingTagCtrl"
        }).state("org-setting-ticket-cash", {
            params: {
                value: "setting",
                sencond: "ticket"
            },
            url: "/org/setting/ticketcash",
            templateUrl: "app/organization/setting/setting-ticket-cash.html",
            controller: "OrgSettingTicketCashCtrl",
            controllerAs: "orgSettingTicketCashCtrl"
        }).state("org-setting-rule", {
            params: {
                value: "setting",
                sencond: "rule"
            },
            url: "/org/setting/rule",
            templateUrl: "app/organization/setting/setting-rule.html",
            controller: "OrgSettingRuleCtrl",
            controllerAs: "orgSettingRuleCtrl"
        })
    }
    angular.module("fieldApp").config(a), a.$inject = ["$stateProvider"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
        var q = this;
        q.titleState = f.params.state || "sale";
        var r, s = function () {
                k.index({
                    isUsed: !0
                }, function (a) {
                    q.venues = [{
                        name: "全部"
                    }].concat(a.data.venues)
                }, function () {})
            },
            t = function () {
                n.index({}, function (a) {
                    q.productCategories = [{
                        name: "全部"
                    }].concat(a.data.productcategories)
                }, function () {})
            },
            u = function () {
                e.index({}, function (a) {
                    q.workers = a.data.users, v()
                }, function () {})
            },
            v = function () {
                e.get({}, function (a) {
                    q.me = [], q.me.push(a.data.user), q.workers = [{
                        name: "全部"
                    }].concat(q.me.concat(q.workers)), "organization" == q.me[0].role ? q.organization = q.me[0] : e.getOrgInfo({
                        id: q.me[0]._organization
                    }, function (a) {
                        q.organization = a.data.user
                    }, function () {})
                }, function () {})
            },
            w = function () {
                var a = {
                    page: q.pagination.page,
                    itemsPerPage: q.pagination.itemsPerPage,
                    statuses: ["buyProduct", "refundProduct"]
                };
                q.searchFirstId && (a = _.merge(a, {
                    _firstCategory: q.searchFirstId
                })), q.searchSecondId && (a = _.merge(a, {
                    _secondCategory: q.searchSecondId
                })), q.searchVenueId && (a = _.merge(a, {
                    venues: [q.searchVenueId]
                })), q.searchPayment && (a = _.merge(a, {
                    payment: q.searchPayment
                })), i.index(a, function (a) {
                    q.records = a.data.records, _.each(q.records, function (a) {
                        if (a.state) a.cost = ("add" == a.state ? "+" : "-") + a.cost;
                        else switch (a.status) {
                        case "buyProduct":
                            a.cost = "+" + a.cost;
                            break;
                        case "refundProduct":
                            a.cost = "-" + a.cost
                        }
                        switch (a.payment) {
                        case "wx":
                            a.payment = "微信支付";
                            break;
                        case "card":
                            a.payment = "转账支付";
                            break;
                        case "cash":
                            a.payment = "现金支付";
                            break;
                        case "member":
                            a.payment = "储值卡支付";
                            break;
                        case "member_vir":
                            a.payment = "虚拟卡支付";
                            break;
                        case "alipay":
                            a.payment = "支付宝支付";
                            break;
                        case "check":
                            a.payment = "支票支付";
                            break;
                        case "pos":
                            a.payment = "POS机支付";
                            break;
                        default:
                            a.payment = "无"
                        }
                    });
                    var b = a.data.count;
                    q.pagination.totalItems = b, q.pagination.numPages = b / q.itemsPerPage
                }, function () {})
            },
            x = function () {
                q.searchVenueId = "", q.searchItemId = "", q.searchFirstId = "", q.searchSecondId = "", q.searchWorkerId = "", q.searchPayment = "", q.showItemName = "选择项目", q.showVenueName = "选择场馆", q.showFirstName = "选择一级类目", q.showSecondName = "选择二级类目", q.showWorkerName = "提交人", q.showPaymentName = "支付方式", q.searchProductName = "", q.buyPayment = "alipay", q.buyProduct = "", q.name = "", q.price = "", q.remark = "", q.errState = "add", q.errRecordId = "", q.errPrice = "", q.errRemark = "", q.paymentArr = [{
                    name: "支付宝",
                    image: "singleChoose_imageYes",
                    value: "alipay"
                }, {
                    name: "微信",
                    image: "singleChoose_imageNo",
                    value: "wx"
                }, {
                    name: "现金",
                    image: "singleChoose_imageNo",
                    value: "cash"
                }, {
                    name: "转账",
                    image: "singleChoose_imageNo",
                    value: "card"
                }, {
                    name: "支票",
                    image: "singleChoose_imageNo",
                    value: "check"
                }, {
                    name: "POS机",
                    image: "singleChoose_imageNo",
                    value: "pos"
                }, {
                    name: "余额支付",
                    image: "singleChoose_imageNo",
                    value: "member"
                }], q.page = 1, q.itemsPerPage = 10, q.pagination = {
                    page: q.page,
                    itemsPerPage: q.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            y = function () {
                q.page = 1, q.itemsPerPage = 10, q.pagination = {
                    page: q.page,
                    itemsPerPage: q.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            z = function () {
                q.showChooseVenueBox = !1, q.showChooseItemBox = !1, q.showBuyProduct = !1, q.showChooseWorkerBox = !1, q.showChoosePaymentBox = !1, q.showErrChangeBox = !1, q.showAuth_codeBox = !1, clearInterval(q.setIntervalId)
            },
            A = function () {
                var a = {
                    page: q.pagination.page,
                    itemsPerPage: q.pagination.itemsPerPage
                };
                q.searchFirstId && (a = _.merge(a, {
                    _firstCategory: q.searchFirstId
                })), q.searchSecondId && (a = _.merge(a, {
                    _secondCategory: q.searchSecondId
                })), q.searchProductName && (a = _.merge(a, {
                    name: q.searchProductName
                })), q.searchVenueId && (a = _.merge(a, {
                    _venue: q.searchVenueId
                })), l.index(a, function (a) {
                    q.products = a.data.products;
                    var b = a.data.count;
                    q.pagination.totalItems = b, q.pagination.numPages = b / q.itemsPerPage
                }, function () {})
            };
        q.pageChanged = function () {
            "sale" == q.titleState ? A() : w()
        }, q.changeTitle = function (a) {
            switch (z(), x(), q.titleState = "", a) {
            case "sale":
                q.titleState = "sale", f.go("org-product.sale", {
                    state: "sale"
                }), A();
                break;
            default:
                q.titleState = "record", f.go("org-product.record", {
                    state: "record"
                }), w()
            }
        };
        var B = function () {
                x(), s(), u(), t(), "record" == f.params.state ? w() : A()
            },
            C = function (a) {
                var b = a.split("|");
                if (3 != b.length) return !1;
                var a = b[0],
                    c = b[1].split(""),
                    d = b[2],
                    e = d,
                    f = parseInt(r / 6e4).toString().split("");
                if (c.length < f.length) return !1;
                for (var g = 0; g < f.length; g++) d = d.replace(f[g], c[g]);
                return d == a ? e : !1
            };
        q.checkMember = function () {
            return q.memberTelOrCard ? void p.index({
                id: "today"
            }, function (a) {
                r = a.data;
                var b = C(q.memberTelOrCard);
                if (b) o.show({
                    id: b
                }, function (a) {
                    q.member = a.data.member, q.showMemberInfo = !0, q.memberId = q.member._id
                }, function (a) {
                    "找不到对象：member" == a.data.data && (q.showMemberInfo = !1, q.promptERR = !0, q.wordERR = "会员不存在")
                });
                else {
                    var c = {
                        cardNo: q.memberTelOrCard
                    };
                    o.indexBycard(c, function (a) {
                        q.member = a.data.member, q.showMemberInfo = !0, q.memberId = q.member._id
                    }, function (a) {
                        "找不到对象：member" == a.data.data && (q.showMemberInfo = !1, q.promptERR = !0, q.wordERR = "会员不存在")
                    })
                }
            }) : (q.promptERR = !0, void(q.wordERR = "请读取会员卡号/二维码"))
        }, q.chooseVenueName = function (a, b) {
            q.showChooseVenueBox = !1, q.showVenueName = a.name, q.searchVenueId = a._id, y(), "product" == b ? A() : w()
        }, q.chooseItemName = function (a, b) {
            q.showChooseItemBox = !1, q.showItemName = a.name, q.searchItemId = a._id, y(), "product" == b ? A() : w()
        }, q.chooseFirstName = function (a, b) {
            q.showChooseFirstBox = !1, q.showFirstName = a.name, q.searchFirstId = a._id, "全部" != a.name ? q.secondCategories = [{
                name: "全部"
            }].concat(a.secondCategories) : q.secondCategories = [{
                name: "全部"
            }], q.showSecondName = "全部", q.searchSecondId = "", y(), "product" == b ? A() : w()
        }, q.chooseSecondName = function (a, b) {
            q.showChooseSecondBox = !1, q.showSecondName = a.name, q.searchSecondId = a._id, y(), "product" == b ? A() : w()
        }, q.chooseWorkerName = function (a) {
            z(), y(), q.showWorkerName = a.name, q.searchWorkerId = a._id, w()
        }, q.choosePaymentName = function (a) {
            z(), y(), q.showPaymentName = a.name, q.searchPayment = a.value, w()
        }, q.searchProduct = function () {
            y(), A()
        }, q.choosePayment = function (a) {
            _.each(q.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", q.buyPayment = a.value
        }, q.openBuyProduct = function (a) {
            z(), q.showBuyProduct = !0, q.buyProduct = a
        };
        var D = function (a, b, c) {
            var d = new Date,
                e = '<div style="width: 250px;padding:0;margin: 0;"><div>';
            e += '<div style="font-size: 20px;font-weight: bold;">欢迎光临', e += q.organization.name, e += '</div><div style="font-size: 20px;font-weight: bold;margin-top: 10px;">购买综合服务消费小票</div>', e += '<div style="font-size: 16px;margin-top: 10px;">操作员：', e += q.me[0].name, e += '</div></div><div style="margin-top: 10px;">**************************************</div><div>', e += '<table style="width: 100%;"><tr><td width="60%">综合服务名称</td>', e += '<td width="20%">数量</td><td width="20%">金额</td></tr>', e += '<tr style="margin-top: 10px;"><td>', e += c.name, e += "</td><td>", e += "1", e += "</td><td>", e += a.cost, e += "</td></tr></table></div>", e += '<div style="margin-top: 10px;">**************************************</div><div><div>客户名称：', e += a.name, e += "</div><div>消费方式：", e += b, e += "</div><div>备注：", e += a.remark, e += "</div><div>联系人：", e += a.productContacts, e += "</div><div>消费金额：￥", e += a.cost, q.member && "余额支付" == b && (e += "</div><div>账户余额：￥", e += q.member.cards[0].total - a.cost), q.member && "余额支付" != b && (e += "</div><div>账户余额：￥", e += q.member.cards[0].total), q.member = null, e += "</div><div>消费日期：", e += d.getFullYear() + "-" + (d.getMonth() + 1) + "-" + d.getDate() + " " + d.getHours() + ":" + d.getMinutes(), e += '</div></div><div style="margin-top: 10px;">**************************************</div>', e += '<div style="margin-top: 10px;">客户签名：</div></div>';
            var f = getLodop();
            f.PRINT_INIT(""), f.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), f.SET_PRINTER_INDEXA(-1), f.SET_PRINT_PAGESIZE(3, 800, 100, ""), f.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", e), f.PRINT()
        };
        q.printRecord = function (a) {
            switch (a.payment) {
            case "wx":
                a.payment = "微信支付";
                break;
            case "alipay":
                a.payment = "支付宝支付";
                break;
            case "cash":
                a.payment = "现金支付";
                break;
            case "card":
                a.payment = "转账支付";
                break;
            case "check":
                a.payment = "支票支付";
                break;
            case "pos":
                a.payment = "支POS机支付";
                break;
            case "member":
                a.payment = "余额支付"
            }
            a.createDate = new Date(a.createDate), a.cost = a.cost.substring(1);
            var b = '<div style="width: 250px;padding:0;margin: 0;"><div>';
            b += '<div style="font-size: 20px;font-weight: bold;">欢迎光临', b += '</div><div style="font-size: 20px;font-weight: bold;margin-top: 10px;">购买综合服务消费小票</div>', b += '<div style="font-size: 16px;margin-top: 10px;">操作员：', b += a.workerName, b += '</div></div><div style="margin-top: 10px;">**************************************</div><div>', b += '<table style="width: 100%;"><tr><td width="60%">综合服务名称</td>', b += '<td width="20%">数量</td><td width="20%">金额</td></tr>', b += '<tr style="margin-top: 10px;"><td>', b += a.productName, b += "</td><td>", b += "1", b += "</td><td>", b += a.cost, b += "</td></tr></table></div>", b += '<div style="margin-top: 10px;">**************************************</div><div><div>客户名称：', b += a.name, b += "</div><div>消费方式：", b += a.payment, b += "</div><div>备注：", b += a.remark, b += "</div><div>消费金额：￥", b += a.cost, b += "</div><div>消费日期：", b += a.createDate.getFullYear() + "-" + (a.createDate.getMonth() + 1) + "-" + a.createDate.getDate() + " " + a.createDate.getHours() + ":" + a.createDate.getMinutes(), b += '</div></div><div style="margin-top: 10px;">**************************************</div>', b += '<div style="margin-top: 10px;">客户签名：</div></div>';
            var c = getLodop();
            c.PRINT_INIT(""), c.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), c.SET_PRINTER_INDEXA(-1), c.SET_PRINT_PAGESIZE(3, 800, 100, ""), c.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", b), c.PRINT()
        }, q.buy = function () {
            if (!q.name) return q.promptERR = !0, void(q.wordERR = "请输入客户名称");
            if (!q.price) return q.promptERR = !0, void(q.wordERR = "请填写综合服务金额");
            switch (q.buyPayment) {
            case "wx":
            case "alipay":
                q.spbill_create_ip = "122.224.134.196", q.showAuth_codeBox = !0, q.setIntervalId = setInterval(function () {
                    document.getElementById("auth_code").focus()
                }, 100);
                break;
            case "card":
            case "cash":
            case "check":
            case "pos":
            case "member":
                var b = {
                    _product: q.buyProduct._id,
                    name: q.name,
                    cost: parseFloat(q.price),
                    payment: q.buyPayment,
                    remark: q.remark,
                    productContacts: q.productContacts
                };
                if (q.memberId && (b = _.merge(b, {
                    _member: q.memberId
                })), "member" == q.buyPayment && !q.memberId) return q.promptERR = !0, void(q.wordERR = "请先读取用户信息");
                l.buy({}, b, function () {
                    q.memberTelOrCard = "", q.showMemberInfo = !1, q.memberId = "", q.promptOK = !0, q.wordOK = "购买成功";
                    var c;
                    switch (q.buyPayment) {
                    case "card":
                        c = "转账支付";
                        break;
                    case "cash":
                        c = "现金支付";
                        break;
                    case "check":
                        c = "支票支付";
                        break;
                    case "pos":
                        c = "POS机支付";
                        break;
                    case "member":
                        c = "余额支付"
                    }
                    var d = q.buyProduct;
                    setTimeout(function () {
                        a.$apply(function () {
                            q.promptOK = !1
                        }), D(b, c, d)
                    }, 1e3), z(), A(), x()
                }, function (a) {
                    return q.promptWARN = !1, a.data.data ? (q.promptERR = !0, void(q.wordERR = a.data.data)) : void 0
                })
            }
        }, q.auth_codeCreate = function (b) {
            if (q.promptWARN = !0, q.wordWARN = "支付中", 13 == b.keyCode) {
                var c = {
                    _product: q.buyProduct._id,
                    name: q.name,
                    cost: parseFloat(q.price),
                    payment: q.buyPayment,
                    remark: q.remark,
                    productContacts: q.productContacts,
                    auth_code: q.auth_code,
                    spbill_create_ip: q.spbill_create_ip
                };
                switch (q.memberId && (c = _.merge(c, {
                    _member: q.memberId
                })), q.buyPayment) {
                case "wx":
                    var d = /^[1][0,1,2,3,4,5][0-9]{16}$/;
                    if (!d.test(q.auth_code)) return q.auth_code = "", q.promptWARN = !1, q.promptERR = !0, void(q.wordERR = "支付码错误，重新扫码");
                    l.buyWx({}, c, function (b) {
                        q.memberTelOrCard = "", q.showMemberInfo = !1, q.memberId = "", q.auth_code = "", q.promptWARN = !1, q.promptOK = !0, q.wordOK = "购买成功";
                        var d = q.buyProduct;
                        setTimeout(function () {
                            a.$apply(function () {
                                q.promptOK = !1
                            }), D(c, "微信扫码支付", d)
                        }, 1e3), z(), x()
                    }, function (a) {
                        return q.auth_code = "", q.promptWARN = !1, a.data.data ? (q.promptERR = !0, void(q.wordERR = a.data.data)) : void 0
                    });
                    break;
                case "alipay":
                    var d = /^[25,26,27,28,29,30][0-9]{14,22}$/;
                    if (!d.test(q.auth_code)) return q.auth_code = "", q.promptWARN = !1, q.promptERR = !0, void(q.wordERR = "支付码错误，重新扫码");
                    m.payService({}, c, function (b) {
                        q.memberTelOrCard = "", q.showMemberInfo = !1, q.memberId = "", q.auth_code = "", q.promptWARN = !1, q.promptOK = !0, q.wordOK = "购买成功";
                        var d = q.buyProduct;
                        setTimeout(function () {
                            a.$apply(function () {
                                q.promptOK = !1
                            }), D(c, "支付宝扫码支付", d)
                        }, 1e3), z(), x()
                    }, function (a) {
                        return q.auth_code = "", q.promptWARN = !1, a.data.data ? (q.promptERR = !0, void(q.wordERR = a.data.data)) : void 0
                    })
                }
            }
        }, q.close = function () {
            z(), x()
        }, q.resert = function () {
            q.memberTelOrCard = "", q.memberId = "", q.member = null, q.showMemberInfo = !1, document.getElementById("cardNoBox").focus()
        }, q.closePrompt = function () {
            q.promptERR = !1, q.promptOK = !1, q.promptWARN = !1, q.showAuth_codeBox = !1, clearInterval(q.setIntervalId)
        }, q.openErrChangeBox = function (a) {
            z(), q.showErrChangeBox = !0, q.errRecordId = a
        }, q.chooseErrState = function (a) {
            "add" == a ? q.errState = "add" : q.errState = "reduce"
        }, q.changeErrRemark = function () {
            if (!q.errPrice) return q.promptERR = !0, void(q.wordERR = "请填写纠错金额");
            if (!q.errRemark) return q.promptERR = !0, void(q.wordERR = "请填写纠错备注");
            var a = {
                _record: q.errRecordId,
                state: q.errState,
                cost: parseFloat(q.errPrice),
                remark: q.errRemark
            };
            i.create({}, a, function () {
                z(), x(), w()
            }, function () {})
        }, q.enterCheck = function (a) {
            13 == a.keyCode && q.checkMember()
        }, B()
    }
    angular.module("fieldApp").controller("OrgProductCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Record", "Item", "Venue", "Product", "Alipay", "Productcategory", "Member", "Time"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l) {
        var m = this;
        m.close = function () {
            m.name = "", m.price = "", m.totalPrice = "", m.addFlag = !1, m.editFlag = !1, m.sureFlag = !1, m.nameFlag = !1, m.addMemberFlag = !1, m.editMember = !1, m.sureFlag = !1, m.addLevelFlag = !1, m.mtFlag = !1, m.lFlag = !1, m.discount = "", m.level = "", m.info = ""
        }, m.saveMoney = function () {
            if (!m.money) return m.errorFlag = !0, void(m.err = "请先填写金额");
            var a = {
                cardCost: 1 * m.money
            };
            e.updateMe(a, function (a) {
                m.succeedFlag = !0, j(function () {
                    m.succeedFlag = !1
                }, 1e3)
            }, function (a) {})
        }, m.judge = function (a) {
            switch (a) {
            case "name":
                m.name ? m.nameFlag = !1 : m.nameFlag = !0;
                break;
            case "price":
                m.price ? m.priceFlag = !1 : m.priceFlag = !0;
                break;
            case "discount":
                m.discount ? m.discountFlag = !1 : m.discountFlag = !0;
                break;
            case "level":
                m.level ? m.levelFlag = !1 : m.levelFlag = !0;
                break;
            case "info":
                m.info ? m.infoFlag = !1 : m.infoFlag = !0;
                break;
            case "totalPrice":
                m.totalPrice ? m.totalPriceFlag = !1 : m.totalPriceFlag = !0
            }
        }, m.finish = function () {
            if (m.totalPrice ? m.totalPriceFlag = !1 : m.totalPriceFlag = !0, !m.totalPriceFlag) {
                var a = {
                    name: m.totalPrice + "元充值卡",
                    price: m.totalPrice,
                    realPrice: m.totalPrice,
                    _memberType: m.chooseMid,
                    description: m.info
                };
                if (m.editMember) return void i.update({
                    id: m.cId
                }, a, function (a) {
                    m.close(), n()
                }, function (a) {
                    m.errorFlag = !0, 402 == a.data.code && (m.err = "请在折扣处输入一个0到1的数")
                });
                i.create(a, function (a) {
                    m.close(), n()
                }, function (a) {
                    m.errorFlag = !0, 402 == a.data.code && (m.err = "请在折扣处输入一个0到1的数")
                })
            }
        }, m.finishMember = function () {
            if (m.name ? m.nameFlag = !1 : m.nameFlag = !0, m.discount ? m.discount > 1 || m.discount <= 0 ? (m.discountFlag = !0, m.discountErr = "请输入正确的数值") : m.discountFlag = !1 : (m.discountFlag = !0, m.discountErr = "此项为必填项"), !m.nameFlag && !m.discountFlag) {
                var a = {
                    name: m.name,
                    discount: 1 * m.discount
                };
                if (m.editMember) return void k.update({
                    id: m.mId
                }, a, function (a) {
                    m.close(), p()
                }, function (a) {
                    m.errorFlag = !0, 402 == a.data.code && (m.err = "请在折扣处输入一个0到1的数")
                });
                k.create(a, function (a) {
                    m.close(), p()
                }, function (a) {
                    m.errorFlag = !0, 402 == a.data.code && (m.err = "请在折扣处输入一个0到1的数")
                })
            }
        }, m.finishLevel = function () {
            if (m.lprice ? m.lpriceFlag = !1 : m.lpriceFlag = !0, m.uprice ? m.upriceFlag = !1 : m.upriceFlag = !0, !m.lpriceFlag && !m.upriceFlag) {
                var a = {
                    lower: 1 * m.lprice,
                    upper: 1 * m.uprice,
                    _memberType: m.chooseMid
                };
                if (m.editMember) return void l.update({
                    id: m.lId
                }, a, function (a) {
                    m.close(), o()
                }, function (a) {
                    m.errorFlag = !0, m.err = a.data.data
                });
                l.create(a, function (a) {
                    m.close(), o()
                }, function (a) {
                    m.errorFlag = !0, m.err = a.data.data
                })
            }
        }, m["delete"] = function (a) {
            return m.mtFlag ? void k["delete"]({
                id: m.mId
            }, function (a) {
                m.close(), p()
            }, function (a) {}) : m.lFlag ? void l["delete"]({
                id: m.lId
            }, function (a) {
                m.close(), o()
            }, function (a) {}) : void i["delete"]({
                id: m.cId
            }, function (a) {
                m.close(), n()
            }, function (a) {})
        }, m.showEdit = function (a) {
            m.addFlag = !0, m.totalPrice = a.realPrice, m.cId = a._id, m.info = a.description, m.editMember = !0, _.each(m.membertypes, function (b) {
                a._memberType == b._id && (m.chooseMid = a._memberType, m.membertypeName = b.name)
            })
        }, m.showEditMember = function (a) {
            m.editMember = !0, m.addMemberFlag = !0, m.name = a.name, m.discount = a.discount, m.mId = a._id
        }, m.showEditLevel = function (a) {
            m.editMember = !0, m.addLevelFlag = !0, m.lprice = a.lower, m.uprice = a.upper, m.lId = a._id, _.each(m.membertypes, function (b) {
                a._memberType == b._id && (m.chooseMid = a._memberType, m.membertypeName = b.name)
            })
        }, m.chooseMembertype = function (a) {
            m.membertypeName = a.name, m.chooseMid = a._id, m.chooseFlag = !1
        }, m.saveRule = function () {
            var a = {
                depositDes: m.rule
            };
            e.updateMe(a, function (a) {
                q(), m.succeedFlag = !0, j(function () {
                    m.succeedFlag = !1
                }, 1e3)
            }, function (a) {})
        };
        var n = function () {
                i.index({
                    sortBy: "price"
                }, function (a) {
                    m.cards = a.data.cards
                }, function (a) {})
            },
            o = function () {
                l.index({
                    sortBy: "lower"
                }, function (a) {
                    m.levels = a.data.levels
                }, function (a) {})
            },
            p = function () {
                k.index({}, function (a) {
                    m.membertypes = a.data.membertypes, m.membertypes.length > 0 && (m.membertypeName = m.membertypes[0].name, m.chooseMid = m.membertypes[0]._id)
                }, function (a) {})
            },
            q = function () {
                e.get({}, function (a) {
                    var b = a.data.user._organization ? a.data.user._organization : a.data.user._id;
                    e.getOrgInfo({
                        id: b
                    }, function (a) {
                        m.money = a.data.user.cardCost, m.rule = a.data.user.depositDes
                    }, function () {})
                }, function () {})
            },
            r = function () {
                n(), q(), p(), o()
            };
        r()
    }
    angular.module("fieldApp").controller("OrgSettingCardCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Card", "$timeout", "Membertype", "Level"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.vName = "全部场馆", l.vId = "", l.iName = "全部项目", l.iId = "", l.oneFlag = !0, l.marginTop = {
            "margin-top": "38px"
        }, l.page = 1, l.itemsPerPage = 10, l.pagination = {
            page: l.page,
            itemsPerPage: l.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, l.pageChanged = function () {
            p()
        }, l.close = function () {
            l.addFlag = !1, l.editFlag = !1, l.deleteFlag = !1, l.name = "", l.value = "", l.price = "", l.daylimit = "", l.limit = "", l.des = "", l.bail = ""
        }, l["delete"] = function () {
            g["delete"]({
                id: l._id
            }, {}, function (a) {
                p(), l.close()
            }, function (a) {
                l.errorFlag = !0, l.err = a.data.data
            })
        }, l.chooseVenue = function (a) {
            l.venueName = a.name, l._venue = a._id, l.items = a.items, a.items.length > 0 ? (l.itemName = a.items[0].name, l._item = a.items[0]._id) : (l.itemName = "暂无", l._item = ""), l.venueFlag = !1, o()
        }, l.chooseVrr = function (a) {
            l.vName = a.name, l.vId = a._id, a._id ? (l.irr = [], l.irr = l.irr.concat(a.items), l.iName = "全部", l.iId = "", p()) : m(), l.selectVenueFlag = !1
        }, l.chooseItem = function (a) {
            l.itemName = a.name, l._item = a._id, l.itemFlag = !1
        }, l.chooseIrr = function (a) {
            l.iName = a.name, l.iId = a._id, l.selectItemFlag = !1, p()
        }, l.edit = function (a, b) {
            if (b) {
                var c = {
                    isActive: !a.isActive
                };
                g.update({
                    id: a._id
                }, c, function (a) {
                    l.close(), l.succeedFlag = !0, p()
                }, function (a) {
                    l.errorFlag = !0, l.err = a.data.data
                })
            } else {
                l.editFlag = !0, _.each(l.venues, function (b) {
                    b._id == a._venue._id && (l.venueName = b.name, l._venue = b._id, l.items = b.items, _.each(b.items, function (b) {
                        b._id == a._item._id && (l.itemName = b.name, l._item = b._id)
                    }))
                }), l._id = a._id, l.name = a.name, l.price = a.price, l.value = a.value, l.oneFlag = a.daylimit > 1 ? !1 : !0, l.limit = a.limit, l.bail = a.bail, l.des = a.description, l.cardcost = a.cardCost;
                var c = {
                    _venue: l._venue
                };
                k.index(c, function (b) {
                    l.tags = b.data.serviceTags, _.each(l.tags, function (b) {
                        _.each(a.serviceTags, function (a) {
                            b._id == a._serviceTag && (b.select = !0)
                        })
                    })
                }, function (a) {}), l.addFlag = !0
            }
        }, l.chooseTag = function (a) {
            a.select = !a.select
        }, l.finish = function () {
            if (!l.name || isNaN(l.value) || isNaN(l.price) || isNaN(l.cardcost)) return l.errorFlag = !0, void(l.err = "请把资料填充完整");
            var a = [];
            _.each(l.tags, function (b) {
                b.select && a.push(b._id)
            });
            var b = {
                type: "date",
                _venue: l._venue,
                _item: l._item,
                name: l.name,
                value: 1 * l.value,
                daylimit: l.oneFlag ? 1 : 99,
                limit: 1 * l.limit,
                price: 1 * l.price,
                description: l.des,
                bail: 1 * l.bail,
                cardCost: 1 * l.cardcost,
                serviceTags: a
            };
            l.editFlag ? g.update({
                id: l._id
            }, b, function (a) {
                l.close(), p()
            }, function (a) {
                l.errorFlag = !0, l.err = a.data.data
            }) : g.create(b, function (a) {
                l.close(), p()
            }, function (a) {
                l.errorFlag = !0, l.err = a.data.data
            })
        };
        var m = function () {
                i.index({}, function (a) {
                    l.venues = a.data.venues, l.vrr = [], l.venues.length > 0 && (l.venueName = l.venues[0].name, l._venue = l.venues[0]._id, l.items = l.venues[0].items, l.vrr = l.c.concat(l.venues), l.venues[0].items.length > 0 ? (l.itemName = l.venues[0].items[0].name, l._item = l.venues[0].items[0]._id) : (l.itemName = "暂无", l._item = "")), o(), n()
                }, function (a) {})
            },
            n = function () {
                j.index({}, function (a) {
                    l.items = a.data.items, l.irr = [], l.irr = l.cc.concat(l.items), p()
                }, function (a) {})
            },
            o = function () {
                var a = {
                    _venue: l._venue
                };
                k.index(a, function (a) {
                    l.tags = a.data.serviceTags
                }, function (a) {})
            },
            p = function () {
                var a = {
                    type: "date",
                    page: l.pagination.page,
                    itemsPerPage: l.pagination.itemsPerPage,
                    _venue: l.vId,
                    _item: l.iId,
                    isActive: "all"
                };
                g.index(a, function (a) {
                    l.services = a.data.services, l.pagination.totalItems = a.data.count, l.pagination.numPages = a.data.count / l.itemsPerPage
                }, function (a) {
                    l.errorFlag = !0, l.err = a.data.data
                })
            },
            q = function () {
                l.c = [{
                    name: "全部场馆",
                    _id: ""
                }], l.cc = [{
                    name: "全部项目",
                    _id: ""
                }], m()
            };
        q()
    }
    angular.module("fieldApp").controller("OrgDateCardCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "Service", "$location", "Venue", "Item", "ServiceTag"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.marginTop = {
            "margin-top": "38px"
        }, l.flagOn = !0, l.flagOpen = !0, l.flagEdit = !1, l.vId = "", l.arr = [], l.h = "height:" + (window.screen.height - 500) + "px", l.close = function () {
            l.oFlag = !1, l.nameFlag = !1, l.flagOpen = !0, l.flagOn = !0, l.addFlag = !1, l.arr = [], l.name = "", l.sureFlag = !1, l.editFlag = !1, l.closeFlag = !1, l.chooseVenueFlag = !1, l.closeDate = "", l.closeFlag2 = !1, l.closeDate2 = "", l.deleteFlag = !1, l.showEditFlag = !1, l.editAllFlag = !1
        }, l.chooseOn = function (a) {
            l.flagOn = a, l.flagOn || (l.flagOpen = !1), l.closeDate || (l.closeDate = new Date((new Date).getTime() + 864e5), l.closeFlag = !0)
        }, l.chooseOrder = function (a) {
            l.orderOn = a
        }, l.chooseRemark = function (a) {
            l.remarkOn = a
        }, l.chooseEdit = function (a) {
            l.flagEdit = a
        }, l.chooseOpen = function (a) {
            l.flagOpen = a
        }, l.showEdit = function (a) {
            l.editFlag = !0, l.fId = a._id, l.name = a.name, l.flagOn = a.isUsed, a.closeOpen_endDate ? (l.closeFlag = !0, l.closeFlag2 = !0, l.closeDate = a.closeOpen_startDate, l.closeDate2 = a.closeOpen_endDate) : a.closeOpen_startDate && (l.closeFlag = !0, l.closeDate = a.closeOpen_startDate), l.flagOn && !l.flagOpen && (l.closeDate2 = a.closeDate_open, l.closeFlag2 = !0)
        }, l.judge = function (a) {
            switch (a) {
            case "name":
                l.name ? l.nameFlag = !1 : l.nameFlag = !0
            }
        }, l.chooseVenue = function (a) {
            l.venueName = a.name, l.vId = a._id, l.chooseVenueFlag = !1, l.venue = a, l.closeItems = a.closeItems, m()
        }, l.edit = function () {
            if (l.name ? l.nameFlag = !1 : l.nameFlag = !0, l.closeFlag || l.closeFlag2) {
                if (!l.closeFlag && l.closeFlag2) return void(l.longTimeFlag = !0);
                if (l.closeFlag2) {
                    var a = new Date(l.closeDate2).getTime();
                    l.flagOpen = !1
                } else {
                    var a = "";
                    l.flagOpen = !1
                }
            } else l.flagOpen = !0; if (!l.nameFlag) {
                l.cItems = [], l.cItems.push(l.item._id);
                var b = {
                    name: l.name,
                    isUsed: l.flagOn,
                    closeDate: (new Date).getTime(),
                    closeOpen_startDate: new Date(l.closeDate).getTime(),
                    closeOpen_endDate: a,
                    isOpen: l.flagOpen,
                    items: l.cItems,
                    _venue: l.vId
                };
                k.update({
                    id: l.fId
                }, b, function (a) {
                    l.close(), l.getField(l.item)
                }, function (a) {
                    l.errorFlag = !0, 400 == a.data.code ? l.err = "请在‘输入天数’这栏输入数字" : 500 == a.data.code && (l.err = "该场地名称已被使用")
                })
            }
        }, l.finish = function () {
            if (l.name ? l.nameFlag = !1 : l.nameFlag = !0, !l.nameFlag) {
                l.cItems = [], l.cItems.push(l.item._id);
                var a = {
                    name: l.name,
                    isUsed: !0,
                    isOpen: !0,
                    items: l.cItems,
                    _venue: l.vId,
                    closeDate_open: new Date(l.closeDate2).getTime()
                };
                k.create(a, function (a) {
                    l.close(), l.getField(l.item)
                }, function (a) {
                    l.errorFlag = !0, 400 == a.data.code ? l.err = "请在‘输入天数’这栏输入数字" : 500 == a.data.code && (l.err = "该场地名称已被使用")
                })
            }
        }, l.showStopEdit = function (a) {
            l.fields = a.fields, l.showEditFlag = !0, l.editItemId = a._id, l.flagOn = a.isUsed, l.flagOn ? (l.closeFlag = !1, l.closeDate = "", l.flagEdit = !1) : (l.closeFlag = !0, l.closeDate = a.closeDate, l.flagEdit = !0)
        }, l.finishEdit = function () {
            if (l.flagEdit && !l.closeFlag) return void(l.oFlag = !0);
            var a = {
                _venue: l.vId,
                _item: l.editItemId,
                state: l.flagOn ? "open" : "close",
                closeDate: new Date(l.closeDate).getTime()
            };
            k.updateFields({}, a, function (a) {
                l.close(), m()
            }, function (a) {
                l.errorFlag = !0, l.err = a.data.data
            }), l.showEditFlag = !1
        }, l.select = function (a) {
            for (var b = 0; b < l.fields.length; b++) l.fields[b].select = a, l.selectFlag = a;
            for (var b = 0; b < l.fields.length; b++)
                if (l.fields[b].select) return void(l.editAllFlag = !0);
            l.editAllFlag = !1
        }, l.changeField = function (a) {
            a.select = !a.select;
            for (var b = 0; b < l.fields.length; b++)
                if (l.fields[b].select) return void(l.editAllFlag = !0);
            l.editAllFlag = !1
        }, l["delete"] = function () {
            k["delete"]({
                id: l.fId
            }, {}, function (a) {
                l.close(), l.getField(l.item)
            }, function (a) {})
        }, l.getNowFormatDate = function (a) {
            var b = "-",
                c = a.getMonth() + 1,
                d = a.getDate();
            c >= 1 && 9 >= c && (c = "0" + c), d >= 0 && 9 >= d && (d = "0" + d);
            var e = a.getFullYear() + b + c + b + d;
            return e
        }, l.getField = function (a) {
            var b = {
                _venue: l.vId,
                _item: a._id,
                sortValue: "asc"
            };
            l.item = a, l.orderFlag = !0, l.remarkFlag = !0, _.each(l.closeItems, function (b) {
                b._item == a._id && (l.orderFlag = !b.closeOpen, l.remarkFlag = b.showRemark)
            });
            var c = new Date;
            k.index(b, function (a) {
                l.fields = a.data.fields, _.each(l.fields, function (a) {
                    a.closeOpen_startDate ? a.closeOpen_endDate ? c < new Date(a.closeOpen_startDate).getTime() ? (a.isOpen = !0, a.warn = l.getNowFormatDate(new Date(a.closeOpen_startDate)) + "至" + l.getNowFormatDate(new Date(a.closeOpen_endDate)) + "不可订") : c > new Date(a.closeOpen_endDate).getTime() ? (a.isOpen = !0, a.warn = "") : (a.isOpen = !1, a.warn = l.getNowFormatDate(new Date(a.closeOpen_startDate)) + "至" + l.getNowFormatDate(new Date(a.closeOpen_endDate)) + "不可订") : (c < new Date(a.closeOpen_startDate).getTime() ? a.isOpen = !0 : a.isOpen = !1, a.warn = l.getNowFormatDate(new Date(a.closeOpen_startDate)) + "后不可订") : a.isOpen = !0
                })
            }, function (a) {})
        }, l.editVenueItem = function (a) {
            "orderFlag" == a ? (l.orderFlag = !l.orderFlag, l.orderFlag && (l.remarkFlag = !0)) : l.remarkFlag = !l.remarkFlag;
            var b = {
                    _item: l.item._id,
                    closeOpen: !l.orderFlag,
                    showRemark: l.remarkFlag,
                    remark: ""
                },
                c = [];
            c.push(b);
            var d = {
                closeItems: c
            };
            i.update({
                id: l.vId
            }, d, function (a) {
                l.closeItems = a.data.venue.closeItems, i.index({
                    isUsed: !0
                }, function (a) {
                    l.venues = a.data.venues;
                    for (var b = 0; b < l.venues.length; b++) _.each(l.venues[b].items, function (a) {
                        a.orderFlag = !0
                    }), _.each(l.venues[b].closeItems, function (a) {
                        _.each(l.venues[b].items, function (b) {
                            a._item == b._id && (b.orderFlag = !a.closeOpen, b.remarkFlag = a.showRemark)
                        })
                    })
                }, function (a) {})
            }, function (a) {
                l.errorFlag = !0, l.err = a.data.data
            })
        };
        var m = function () {
                i.index({
                    isUsed: !0
                }, function (a) {
                    l.venues = a.data.venues;
                    for (var b = 0; b < l.venues.length; b++) _.each(l.venues[b].items, function (a) {
                        a.orderFlag = !0
                    }), _.each(l.venues[b].closeItems, function (a) {
                        _.each(l.venues[b].items, function (b) {
                            a._item == b._id && (b.orderFlag = !a.closeOpen, b.remarkFlag = a.showRemark)
                        })
                    });
                    l.venues.length > 0 && (l.vId || (l.venueName = l.venues[0].name, l.vId = l.venues[0]._id, l.venue = l.venues[0], l.closeItems = l.venues[0].closeItems), l.venue.items.length > 0 && (l.orderFlag = l.venue.items[0].orderFlag, l.remarkFlag = l.venue.items[0].remarkFlag, l.venue.items[0].select = !0, l.venue.items[l.venue.items.length - 1].endSelect = !0, l.item = l.venue.items[0], l.getField(l.venue.items[0])))
                }, function (a) {})
            },
            n = function () {
                m()
            };
        n()
    }
    angular.module("fieldApp").controller("OrgFieldRegisterCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue", "Item", "Field"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this;
        j.isUsed = !0, j.weekAs = "1", j.showEdit = function (a) {
            j.hId = a._id, j.addFlag = !0, j.editFlag = !0, j.name = a.name, j.startShowFlag = !0, j.endShowFlag = !0, j.remark = a.remark, j.startDate = a.startDate, j.endDate = a.endDate, j.weekAs = a.weekAs, "1" == a.weekAs ? (j.useStateArr[0].image = "singleChoose_imageYes", j.useStateArr[1].image = "singleChoose_imageNo", j.useStateArr[2].image = "singleChoose_imageNo") : "6" == a.weekAs ? (j.useStateArr[0].image = "singleChoose_imageNo", j.useStateArr[1].image = "singleChoose_imageYes", j.useStateArr[2].image = "singleChoose_imageNo") : (j.useStateArr[0].image = "singleChoose_imageNo", j.useStateArr[1].image = "singleChoose_imageNo", j.useStateArr[2].image = "singleChoose_imageYes")
        }, j.chooseState = function (a) {
            _.each(j.useStateArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", "工作日" == a.isUsed ? j.weekAs = "1" : "周末" == a.isUsed ? j.weekAs = "6" : j.weekAs = "7"
        }, j.useStateArr = [{
            name: "工作日方案",
            image: "singleChoose_imageYes",
            isUsed: "工作日"
        }, {
            name: "周末方案",
            image: "singleChoose_imageNo",
            isUsed: "周末"
        }, {
            name: "节假日方案",
            image: "singleChoose_imageNo",
            isUsed: "节假日"
        }];
        var k = function () {
                l()
            },
            l = function () {
                i.index({}, function (a) {
                    j.holidaies = a.data.speDays
                }, function (a) {})
            };
        j["delete"] = function () {
            i["delete"]({
                id: j.hId
            }, {}, function (a) {
                l(), j.deleteFlag = !1
            }, function (a) {})
        }, j.create = function () {
            if (j.name ? j.nFlag = !1 : j.nFlag = !0, j.startShowFlag ? j.sFlag = !1 : j.sFlag = !0, j.endShowFlag ? j.eFlag = !1 : j.eFlag = !0, !(j.nFlag || j.sFlag || j.eFlag)) {
                var a = {
                    name: j.name,
                    startDate: new Date(j.startDate).getTime(),
                    endDate: new Date(j.endDate).getTime(),
                    remark: j.remark,
                    weekAs: j.weekAs
                };
                return j.editFlag ? void i.update({
                    id: j.hId
                }, a, function (a) {
                    j.close(), l()
                }, function (a) {
                    j.promptERR = !0, j.wordERR = a.data.data
                }) : void i.create(a, function (a) {
                    j.close(), l()
                }, function (a) {
                    j.promptERR = !0, j.wordERR = a.data.data
                })
            }
        }, j.close = function () {
            j.addFlag = !1, j.name = "", j.remark = "", j.startFlag = !1, j.endFlag = !1, j.startDate = "", j.endDate = "", j.editFlag = !1
        }, k()
    }
    angular.module("fieldApp").controller("OrgSettingHolidayCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Holiday"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.itemName = "", k.close = function () {
            k.itemName = "", k.addFlag = !1, k.editFlag = !1, k.deleteFlag = !1, k.flagOn = !1, k.discount = "", k.limit = ""
        }, k["delete"] = function () {
            i["delete"]({
                id: k.iId
            }, {}, function (a) {
                k.close(), l()
            }, function (a) {})
        }, k.showEdit = function (a) {
            k.editFlag = !0, k.iId = a._id, k.itemName = a.name, k.limit = a.limit, a.discount < 0 ? (k.flagOn = !1, k.discount = "") : (k.discount = a.discount, k.flagOn = !0)
        }, k.edit = function () {
            if ("" == k.itemName ? (k.itemFlag = !0, k.err = "此项为必填项") : k.itemFlag = !1, "" == k.limit ? k.limitFlag = !0 : k.limitFlag = !1, k.flagOn && !k.discount ? k.discountFlag = !0 : k.discountFlag = !1, k.flagOn || (k.discount = -1), !k.itemFlag && !k.discountFlag && !k.limitFlag) {
                var a = {
                    name: k.itemName,
                    isUsed: !0,
                    discount: 1 * k.discount,
                    limit: 1 * k.limit
                };
                i.update({
                    id: k.iId
                }, a, function (a) {
                    k.close(), l()
                }, function (a) {
                    k.errorFlag = !0, k.err = a.data.data
                })
            }
        }, k.judge = function (a) {
            switch (a) {
            case "item":
                "" == k.itemName ? k.itemFlag = !0 : k.itemFlag = !1
            }
        }, k.finish = function () {
            if ("" == k.itemName ? (k.itemFlag = !0, k.err = "此项为必填项") : k.itemFlag = !1, "" == k.limit ? k.limitFlag = !0 : k.limitFlag = !1, k.flagOn && !k.discount ? k.discountFlag = !0 : k.discountFlag = !1, k.flagOn || (k.discount = -1), !k.itemFlag & !k.discountFlag && !k.limitFlag) {
                var a = {
                    name: k.itemName,
                    isUsed: !0,
                    discount: 1 * k.discount,
                    limit: 1 * k.limit
                };
                i.create(a, function (a) {
                    k.close(), l()
                }, function (a) {
                    k.errorFlag = !0, k.err = a.data.data
                })
            }
        }, k.move = function (a, b) {
            if ("up" == a) var c = {
                _first: b._id,
                _second: k.items[b.order - 2]._id
            };
            else var c = {
                _first: b._id,
                _second: k.items[b.order]._id
            };
            i.move(c, function (a) {
                l()
            }, function (a) {})
        }, k.chooseOn = function (a) {
            k.flagOn = a
        };
        var l = function () {
                i.index({
                    isUsed: !0
                }, function (a) {
                    k.items = a.data.items;
                    for (var b = 0; b < k.items.length; b++) k.items[b].order = b + 1;
                    k.length = k.items.length, i.index({
                        isUsed: !1
                    }, function (a) {
                        k.items2 = a.data.items;
                        for (var b = 0; b < k.items2.length; b++) k.items2[b].order = b + 1 + k.items.length;
                        k.items = k.items.concat(k.items2)
                    }, function (a) {})
                }, function (a) {})
            },
            m = function () {
                l()
            };
        m()
    }
    angular.module("fieldApp").controller("OrgSettingItemCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Item", "$timeout"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this;
        j.close = function () {
            j.succeedFlag = !1, j.errorFlag = !1
        }, j.save = function () {
            var a = {
                oldPassword: j.oldPassword,
                newPassword: j.newPassword
            };
            e.updatePassword(a, function (a) {
                j.oldPassword = "", j.newPassword = "", j.succeedFlag = !0, i(function () {
                    j.succeedFlag = !1
                }, 1e3)
            }, function (a) {
                j.errorFlag = !0, i(function () {
                    j.errorFlag = !1
                }, 1e3)
            })
        }, j.judge = function () {
            j.oldPassword && j.newPassword ? j.saveFlag = !0 : j.saveFlag = !1
        };
        var k = function () {
            e.get({}, function (a) {
                j.account = a.data.user.account
            }, function () {})
        };
        j.logout = d.logout;
        var l = function () {
            k()
        };
        l()
    }
    angular.module("fieldApp").controller("OrgSettingPersonCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "$timeout"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.marginTop = {
            "margin-top": "38px"
        }, l.flagOn = !0, l.vId = "", l.arr = [], l.close = function () {
            l.flagOn = !0, l.addFlag = !1, l.editFlag = !1, l.closeFlag = !1, l.startShowFlag = !1, l.endShowFlag = !1, l.chooseVenueFlag = !1, l.pFlag = !1, l.price = ""
        }, l.chooseOn = function (a) {
            l.flagOn = a
        }, l.showAdd = function (a, b, c, d) {
            l.vId = a._venue, l.iId = a._item, l.startDateHours = a.startDateHours, l.startDateMins = a.startDateMins, l.endDateHours = a.endDateHours, l.endDateMins = a.endDateMins, l.addFlag = !0, l.state = b, l.flagOn = a.isUsed, l.tId = a._id, l.priceArr = a.priceArr, l.order = c.order, l.item = c, d && (l.price = d, "week" == b ? "hours" == l.priceArr[1].unit ? l.flagOn = !0 : l.flagOn = !1 : "weekend" == b ? "hours" == l.priceArr[6].unit ? l.flagOn = !0 : l.flagOn = !1 : "hours" == l.priceArr[7].unit ? l.flagOn = !0 : l.flagOn = !1)
        }, l.judge = function (a) {
            switch (a) {
            case "price":
                l.price ? l.priceFlag = !1 : (l.priceFlag = !0, l.pFlag = !0)
            }
        }, l.chooseVenue = function (a) {
            l.venueName = a.name, l.vId = a._id, l.chooseVenueFlag = !1, l.venue = a, n()
        }, l.finish = function () {
            if (l.price || (l.pFlag = !0), l.flagOn ? l.unit = "hours" : l.unit = "sign", l.price) {
                var a = [];
                if ("week" == l.state)
                    for (var b = 0; b < l.priceArr.length; b++) l.priceArr[b].week > 0 && l.priceArr[b].week < 6 && (l.priceArr[b].price = 1 * l.price, l.priceArr[b].unit = l.unit, a.push(l.priceArr[b]));
                else if ("weekend" == l.state)
                    for (var b = 0; b < l.priceArr.length; b++)(6 == l.priceArr[b].week || 0 == l.priceArr[b].week) && (l.priceArr[b].price = 1 * l.price, l.priceArr[b].unit = l.unit, a.push(l.priceArr[b]));
                else
                    for (var b = 0; b < l.priceArr.length; b++) 7 == l.priceArr[b].week && (l.priceArr[b].price = 1 * l.price, l.priceArr[b].unit = l.unit, a.push(l.priceArr[b]));
                var c = {
                    startDateHours: 1 * l.startDateHours,
                    startDateMins: 1 * l.startDateMins,
                    endDateHours: 1 * l.endDateHours,
                    endDateMins: 1 * l.endDateMins,
                    isUsed: !0,
                    closeDate: (new Date).getTime(),
                    _item: l.iId,
                    _venue: l.vId,
                    priceArr: a
                };
                k.update({
                    id: l.tId
                }, c, function (a) {
                    l.close(), m(l.iId, l.order, l.item, !0)
                }, function (a) {})
            }
        };
        var m = function (a, b, c) {
                var d = {
                    _venue: l.vId,
                    _item: a,
                    sortBy: "startDate"
                };
                k.index(d, function (a) {
                    for (var d = [], e = 0; e < a.data.times.length; e++) {
                        0 == e ? a.data.times[e].flag = !0 : a.data.times[e].flag = !1;
                        var f = new Date;
                        f.setHours(a.data.times[e].startDateHours), f.setMinutes(a.data.times[e].startDateMins), a.data.times[e].sd = f;
                        var g = new Date;
                        if (g.setHours(a.data.times[e].endDateHours), g.setMinutes(a.data.times[e].endDateMins), a.data.times[e].ed = g, d.push(a.data.times[e]), e != a.data.times.length - 1) {
                            if (a.data.times[e].endDate != a.data.times[e + 1].startDate) {
                                var h = {
                                    sd: a.data.times[e].ed,
                                    emptyFlag: !0
                                };
                                d.push(h)
                            }
                        } else {
                            var h = {
                                sd: a.data.times[e].ed,
                                endFlag: !0
                            };
                            d.push(h)
                        }
                        _.each(a.data.times[e].priceArr, function (a) {
                            "sign" == a.unit ? a.u = "场" : a.u = "h"
                        })
                    }
                    l.venue.items[b].clocks = d, l.venue.items[b].times = a.data.times, c || b + 1 < l.venue.items.length && m(l.venue.items[b + 1]._id, b + 1)
                }, function (a) {})
            },
            n = function () {
                i.index({}, function (a) {
                    if (l.venues = a.data.venues, l.venues.length > 0 && (l.vId || (l.venueName = l.venues[0].name, l.vId = l.venues[0]._id, l.venue = l.venues[0]), l.venue.items.length > 0)) {
                        for (var b = 0; b < l.venue.items.length; b++) l.venue.items[b].order = b, l.venue.items[b].page = 1, l.venue.items[b].itemsPerPage = 5;
                        m(l.venue.items[0]._id, 0)
                    }
                }, function (a) {})
            },
            o = function () {
                n()
            };
        o()
    }
    angular.module("fieldApp").controller("OrgPriceRegisterCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue", "Item", "Time"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.categoryName = "", l.supplyName = "", l.state = !0, l.stateArr = [{
            name: "上架",
            image: "singleChoose_imageYes",
            value: !0
        }, {
            name: "下架",
            image: "singleChoose_imageNo",
            value: !1
        }], l.page = 1, l.itemsPerPage = 10, l.pagination = {
            page: l.page,
            itemsPerPage: l.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, l.close = function () {
            l.addFlag = !1, l.deleteFlag = !1, l.name = "", l.price = "", l.unit = "", l.shopProductCategories.length > 0 && (l.categoryName = l.shopProductCategories[0].name, l.cId = l.shopProductCategories[0]._id), l.supplies.length > 0 && (l.supplyName = l.supplies[0].supplyName, l._supply = l.supplies[0]._id), l.misCode = "", l.editFlag = !1
        }, l.chooseState = function (a) {
            _.each(l.stateArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", l.state = a.value
        }, l.chooseCreateCategory = function (a) {
            l.categoryName = a.name, l.cId = a._id, l.chooseProductFlag = !1
        }, l.chooseSupply = function (a) {
            l.supplyName = a.supplyName, l._supply = a._id, l.chooseSupplyFlag = !1
        }, l.pageChanged = function () {
            m()
        };
        var m = function () {
                var a = {
                    page: l.pagination.page,
                    itemsPerPage: l.pagination.itemsPerPage
                };
                j.index(a, function (a) {
                    l.products = a.data.shopBasics;
                    var b = a.data.count;
                    l.pagination.totalItems = b, l.pagination.numPages = b / l.itemsPerPage
                }, function (a) {})
            },
            n = function () {
                i.index({}, function (a) {
                    l.shopProductCategories = a.data.shopProductCategories, l.shopProductCategories.length > 0 && (l.categoryName = l.shopProductCategories[0].name, l.cId = l.shopProductCategories[0]._id)
                }, function (a) {})
            },
            o = function () {
                k.index({
                    isUsed: !0
                }, function (a) {
                    l.supplies = a.data.supplies, l.supplies.length > 0 && (l.supplyName = l.supplies[0].supplyName, l._supply = l.supplies[0]._id)
                }, function (a) {})
            };
        l.showEdit = function (a) {
            l.addFlag = !0, l.name = a.name, l.unit = a.unit, l.price = a.price, l.state = a.isUsed, l.misCode = a.misCode, l.categoryName = a.categoryName, l.cId = a._category, l.supplyName = a.supplyName, l._supply = a._supply, l.state ? (l.stateArr[0].image = "singleChoose_imageYes", l.stateArr[1].image = "singleChoose_imageNo") : (l.stateArr[0].image = "singleChoose_imageNo", l.stateArr[1].image = "singleChoose_imageYes"), l.pId = a._id, l.editFlag = !0
        }, l.edit = function () {
            var a = {
                name: l.name,
                _category: l.cId,
                _supply: l._supply,
                unit: l.unit,
                price: parseFloat(l.price),
                misCode: "" == l.misCode ? void 0 : l.misCode
            };
            j.update({
                id: l.pId
            }, a, function (a) {
                l.close(), m()
            }, function (a) {
                l.promptERR = !0, l.wordERR = a.data.data
            })
        }, l.create = function () {
            if (l.name ? l.nameFlag = !1 : l.nameFlag = !0, l.unit ? l.unitFlag = !1 : l.unitFlag = !0, l.price ? l.priceFlag = !1 : l.priceFlag = !0, l.misCode ? l.misCodeFlag = !1 : l.misCodeFlag = !0, l.name && l.unit && l.price && l.misCode) {
                if (l.editFlag) return void l.edit();
                var a = {
                    name: l.name,
                    unit: l.unit,
                    _supply: l._supply,
                    _category: l.cId,
                    price: parseFloat(l.price),
                    misCode: "" == l.misCode ? void 0 : l.misCode
                };
                j.create(a, function (a) {
                    l.close(), m()
                }, function (a) {})
            }
        };
        var p = function () {
            m(), n(), o()
        };
        l.closePrompt = function () {
            l.promptERR = !1, l.promptOK = !1, l.promptWARN = !1
        }, p()
    }
    angular.module("fieldApp").controller("OrgProductInfoCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Type", "ShopBasic", "Supply"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.flagOn = !0, k.saveFlag = !1, k.isSave = function () {
            k.orderRule ? k.saveFlag = !0 : k.saveFlag = !1
        }, k.chooseOn = function (a) {
            k.flagOn = a
        }, k.close = function () {
            k.addFlag = !1, k.hour = "", k.price = "", k.succeedFlag = !1, k.editFlag = !1, k.deleteFlag = !1
        }, k["delete"] = function () {
            i["delete"]({
                id: k.rId
            }, {}, function (a) {
                k.close(), l()
            }, function () {})
        }, k.save = function () {
            if (k.startShowFlag) var a = new Date(k.startDate).getTime();
            else var a = "";
            var b = {
                name: k.name,
                limit: 1 * k.orderLimit,
                description: k.orderRule,
                openTime: a
            };
            e.updateMe(b, function (a) {
                k.succeedFlag = !0, j(function () {
                    k.succeedFlag = !1
                }, 1e3)
            }, function (a) {})
        }, k.judge = function (a) {
            switch (a) {
            case "hour":
                k.hour ? k.hourFlag = !1 : k.hourFlag = !0;
                break;
            case "price":
                k.price ? k.priceFlag = !1 : k.priceFlag = !0
            }
        }, k.finish = function () {
            if (k.hour ? k.hourFlag = !1 : k.hourFlag = !0, k.price ? k.priceFlag = !1 : k.priceFlag = !0, !k.hourFlag && !k.priceFlag) {
                k.flagOn ? k.state = "before" : k.state = "after";
                var a = {
                    status: k.state,
                    hours: 100 * k.hour * .01,
                    costPrecent: 1 * k.price
                };
                i.create(a, function (a) {
                    k.close(), l()
                }, function () {})
            }
        }, k.showEdit = function (a) {
            "after" == a.status ? k.flagOn = !1 : k.flagOn = !0, k.hour = a.hours, k.price = a.costPrecent, k.rId = a._id, k.editFlag = !0
        }, k.edit = function () {
            k.flagOn ? k.state = "before" : k.state = "after";
            var a = {
                status: k.state,
                hours: 100 * k.hour * .01,
                costPrecent: 1 * k.price
            };
            i.update({
                id: k.rId
            }, a, function (a) {
                k.close(), l()
            }, function () {})
        };
        var l = function () {
                i.index({}, function (a) {
                    k.rules = a.data.unsubscribeRules;
                    for (var b = 0; b < k.rules.length; b++) "after" == k.rules[b].status ? k.rules[b].state = "开场后" + k.rules[b].hours + "小时内" : k.rules[b].state = "开场前" + k.rules[b].hours + "小时内", 0 == k.rules[b].costPrecent ? k.rules[b].p = "不扣费" : k.rules[b].p = "扣" + 100 * k.rules[b].costPrecent + "%"
                }, function () {})
            },
            m = function () {
                e.get({}, function (a) {
                    var b = a.data.user._organization ? a.data.user._organization : a.data.user._id;
                    e.getOrgInfo({
                        id: b
                    }, function (a) {
                        k.orderLimit = a.data.user.limit, k.orderRule = a.data.user.description, a.data.user.openTime ? (k.startDate = a.data.user.openTime, k.startShowFlag = !0) : k.startShowFlag = !1, k.orderLimit && k.orderRule ? k.saveFlag = !0 : k.saveFlag = !1
                    }, function () {})
                }, function () {})
            },
            n = function () {
                m(), l()
            };
        n()
    }
    angular.module("fieldApp").controller("OrgSettingRuleCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Unsubrcriberules", "$timeout"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.flagOn = !0, k.arr = [], k.page = 1, k.itemsPerPage = 10, k.pagination = {
            page: k.page,
            itemsPerPage: k.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, k.pageChanged = function () {
            m()
        }, k.close = function () {
            k.name = "", k.venueFlag = !1, k.deleteFlag = !1, k.addFlag = !1, k.editFlag = !1, k.startShowFlag = !1, k.endShowFlag = !1
        }, k.showEdit = function (a) {
            k.addFlag = !0, k.name = a.name, k.venueName = a.venueName, k._venue = a._venue, k.editFlag = !0, k.tId = a._id, k.startDate = (new Date).setHours(parseInt(a.startMins / 60)), k.startDate = new Date(k.startDate).setMinutes(parseInt(a.startMins % 60)), k.endDate = (new Date).setHours(parseInt(a.endMins / 60)), k.endDate = new Date(k.endDate).setMinutes(parseInt(a.endMins % 60)), k.startShowFlag = !0, k.endShowFlag = !0
        }, k.marginTop = {
            "margin-top": "38px"
        }, k.create = function () {
            if (k.name) {
                var a = {
                    name: k.name,
                    _venue: k._venue,
                    startMins: 60 * new Date(k.startDate).getHours() + new Date(k.startDate).getMinutes(),
                    endMins: 60 * new Date(k.endDate).getHours() + new Date(k.endDate).getMinutes()
                };
                if (k.editFlag) return void j.update({
                    id: k.tId
                }, a, function (a) {
                    k.close(), m()
                }, function (a) {
                    k.promptERR = !0, k.wordERR = a.data.data
                });
                j.create(a, function (a) {
                    k.close(), m()
                }, function (a) {
                    k.promptERR = !0, k.wordERR = a.data.data
                })
            } else k.nameFlag = !0, k.errName = "此项为必填项"
        }, k["delete"] = function () {
            j["delete"]({
                id: k.tId
            }, {}, function (a) {
                m(), k.close()
            }, function (a) {})
        };
        var l = function () {
                i.index({}, function (a) {
                    k.venues = a.data.venues, k.venues.length > 0 && (k._venue = k.venues[0]._id, k.venueName = k.venues[0].name)
                }, function (a) {})
            },
            m = function () {
                var a = {
                    page: k.pagination.page,
                    itemsPerPage: k.pagination.itemsPerPage
                };
                j.index(a, function (a) {
                    k.tags = a.data.serviceTags, _.each(k.tags, function (a) {
                        var b = parseInt(a.startMins / 60),
                            c = parseInt(a.startMins % 60),
                            d = parseInt(a.endMins / 60),
                            e = parseInt(a.endMins % 60);
                        a.time = b + ":" + c + "--" + d + ":" + e
                    }), k.pagination.totalItems = a.data.count, k.pagination.numPages = a.data.count / k.itemsPerPage
                }, function (a) {})
            };
        k.chooseVenue = function (a) {
            k._venue = a._id, k.venueName = a.name, k.venueFlag = !1
        };
        var n = function () {
            l(), m()
        };
        n()
    }
    angular.module("fieldApp").controller("OrgServiceTagCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "Service", "$location", "Venue", "ServiceTag"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.isUsed = !0;
        var m = function () {
                i.index({}, function (a) {
                    l.searchArr = [{
                        name: "全部",
                        _id: ""
                    }].concat(a.data.productcategories)
                }, function () {})
            },
            n = function (a) {
                k.index({}, function (a) {
                    l.venues = [{
                        name: "全部",
                        _id: null
                    }].concat(a.data.venues), l.product.venueName = l.venues[0].name, l.product._venue = l.venues[0]._id
                }, function () {})
            },
            o = function (a) {
                l.secondCategories = a.secondCategories
            },
            p = function () {
                l.searchVenueId = "", l.searchItemId = "", l.showItemName = "选择项目", l.showVenueName = "选择场馆", l.searchType = "选择一级分类", l.searchSecondType = "选择二级分类", l.product = {
                    name: "",
                    _item: "",
                    itemName: "选择项目",
                    _venue: "",
                    venueName: "选择场馆",
                    isUsed: !0
                }, l.useStateArr = [{
                    name: "启用",
                    image: "singleChoose_imageYes",
                    isUsed: !0
                }, {
                    name: "停用",
                    image: "singleChoose_imageNo",
                    isUsed: !1
                }], l.page = 1, l.itemsPerPage = 10, l.pagination = {
                    page: l.page,
                    itemsPerPage: l.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            q = function () {
                l.page = 1, l.itemsPerPage = 10, l.pagination = {
                    page: l.page,
                    itemsPerPage: l.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            r = function () {
                var a = {
                    name: l.searchName,
                    page: l.pagination.page,
                    itemsPerPage: l.pagination.itemsPerPage
                };
                l.searchVenueId && (a = _.merge(a, {
                    _venue: l.searchVenueId
                })), l.sfId && (a = _.merge(a, {
                    _firstCategory: l.sfId
                })), l._searchSecond && (a = _.merge(a, {
                    _secondCategory: l._searchSecond
                })), j.index(a, function (a) {
                    l.products = a.data.products;
                    var b = a.data.count;
                    l.pagination.totalItems = b, l.pagination.numPages = b / l.itemsPerPage
                }, function () {})
            };
        l.page = 1, l.itemsPerPage = 10, l.pagination = {
            page: l.page,
            itemsPerPage: l.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        };
        var s = function () {
            p(), n(), m(), r()
        };
        l.pageChanged = function () {
            r()
        }, l.chooseSearch = function (a) {
            l.searchType = a.name, l.sfId = a._id, l.searchFlag = !1, l.secondCategories = [], l.searchSecondType = "选择二级分类", l._searchSecond = "", r(), o(a)
        }, l.chooseSecondSearch = function (a) {
            l.searchSecondType = a.name, l._searchSecond = a._id, l.searchSecondFlag = !1, r()
        }, l.chooseVenueName = function (a, b) {
            b && "search" == b ? (l.showChooseVenueBoxIndex = !1, l.showVenueName = a.name, l.searchVenueId = a._id, q(), r()) : (l.showChooseVenueBox = !1, l.items = a.items, l.product.venueName = a.name, l.product._venue = a._id)
        }, l.chooseProductCategory = function (a) {
            l.firstType = a.name, l.fId = a._id, l.firstFlag = !1, l.secondArr = a.secondCategories, l.secondArr.length > 0 ? (l.second = l.secondArr[0].name, l.sId = l.secondArr[0]._id) : (l.second = "", l.sId = "")
        }, l.chooseSecond = function (a) {
            l.secondFlag = !1, l.second = a.name, l.sId = a._id
        }, l.chooseState = function (a) {
            _.each(l.useStateArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", l.isUsed = a.isUsed
        }, l.useStateArr = [{
            name: "启用",
            image: "singleChoose_imageYes",
            isUsed: !0
        }, {
            name: "停用",
            image: "singleChoose_imageNo",
            isUsed: !1
        }], l["delete"] = function () {
            j["delete"]({
                id: l.pId
            }, {}, function (a) {
                r(), l.deleteFlag = !1
            }, function (a) {
                l.promptERR = !0, l.wordERR = a.data.data
            })
        }, l.showEdit = function (a) {
            l.editFlag = !0, l.addFlag = !0, l.name = a.name, l.pId = a._id, l.product.venueName = a._venue.name, l.product._venue = a._venue._id, a._firstCategory && (l.fId = a._firstCategory._id, l.firstType = a._firstCategory.name, _.each(l.productcategories, function (b) {
                b._id == a._firstCategory._id && (l.secondArr = b.secondCategories)
            })), l.remark = a.remark, l.isUsed = a.isUsed, l.isUsed ? (l.useStateArr[0].image = "singleChoose_imageYes", l.useStateArr[1].image = "singleChoose_imageNo") : (l.useStateArr[1].image = "singleChoose_imageYes", l.useStateArr[0].image = "singleChoose_imageNo"), a._secondCategory && (l.sId = a._secondCategory._id, l.second = a._secondCategory.name)
        }, l.create = function () {
            if (!l.name) return void(l.nameFlag = !0);
            if (l.editFlag) {
                var a = {
                    name: l.name,
                    _firstCategory: l.fId,
                    _secondCategory: l.sId,
                    _venue: l.product._venue,
                    remark: l.remark,
                    isUsed: l.isUsed
                };
                return void j.update({
                    id: l.pId
                }, a, function (a) {
                    r(), l.close()
                }, function (a) {
                    l.promptERR = !0, l.wordERR = a.data.data
                })
            }
            var a = {
                name: l.name,
                _firstCategory: l.fId,
                _secondCategory: l.sId,
                _venue: l.product._venue,
                remark: l.remark,
                isUsed: l.isUsed
            };
            j.create(a, function (a) {
                r(), l.close()
            }, function (a) {
                l.promptERR = !0, l.wordERR = a.data.data
            })
        }, l.close = function () {
            l.secondFlag = !1, l.firstFlag = !1, l.addFlag = !1, l.remark = "", l.name = "", l.nameFlag = !1, l.editFlag = !1
        }, s()
    }
    angular.module("fieldApp").controller("OrgSettingServiceCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Productcategory", "Product", "Venue"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this;
        j.useStateArr = [{
            name: "开通",
            image: "singleChoose_imageNo",
            isUsed: !0
        }, {
            name: "不开通",
            image: "singleChoose_imageYes",
            isUsed: !1
        }], j.chooseState = function (a) {
            _.each(j.useStateArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", j.isUsed = a.isUsed
        }, j.close = function () {
            j.addFlag = !1, j.discount = ""
        }, j.showEdit = function (a) {
            j.addFlag = !0, j.vId = a._id, j.chooseState(a.openSpe ? j.useStateArr[0] : j.useStateArr[1]), j.discount = a.discount
        }, j.update = function () {
            var a = {
                openSpe: j.isUsed,
                discount: 1 * j.discount
            };
            i.update({
                id: j.vId
            }, a, function (a) {
                j.close(), k()
            }, function (a) {
                j.errorFlag = !0, j.errrr = a.data.data
            })
        };
        var k = function () {
                i.index({}, function (a) {
                    j.venues = a.data.venues
                }, function (a) {})
            },
            l = function () {
                k()
            };
        l()
    }
    angular.module("fieldApp").controller("OrgSettingSpecialCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.close = function () {
            l.addFlag = !1, l.tel = "", l.supplyName = "", l.workerName = "", l.supplyNameFlag = !1, l.workerNameFlag = !1, l.telFlag = !1, l.deleteFlag = !1, l.editFlag = !1, l.addTypeFlag = !1, l.deleteTypeFlag = !1, l.typeFlag = !1, l.type = "", l.editTypeFlag = !1
        }, l.page = 1, l.itemsPerPage = 10, l.pagination = {
            page: l.page,
            itemsPerPage: l.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, l.stateArr = [{
            name: "启用",
            image: "singleChoose_imageYes",
            value: !0
        }, {
            name: "不启用",
            image: "singleChoose_imageNo",
            value: !1
        }], l.chooseState = function (a) {
            _.each(l.stateArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", l.state = a.value
        }, l.create = function () {
            if (l.supplyName ? l.supplyNameFlag = !1 : l.supplyNameFlag = !0, l.workerName ? l.workerNameFlag = !1 : l.workerNameFlag = !0, l.tel ? l.telFlag = !1 : l.telFlag = !0, l.supplyName && l.tel && l.workerName) {
                if (l.editFlag) return void l.edit();
                var a = {
                    supplyName: l.supplyName,
                    tel: l.tel,
                    workerName: l.workerName,
                    isUsed: l.state ? l.state : !0
                };
                j.create(a, function (a) {
                    l.close(), m()
                }, function (a) {})
            }
        }, l.createType = function () {
            if (!l.type) return void(l.typeFlag = !0);
            if (l.typeFlag = !1, l.editTypeFlag) return void l.editType();
            var a = {
                name: l.type
            };
            k.create(a, function (a) {
                l.close(), n()
            }, function (a) {})
        }, l.edit = function () {
            var a = {
                supplyName: l.supplyName,
                tel: l.tel,
                workerName: l.workerName,
                isUsed: l.state
            };
            j.update({
                id: l.sId
            }, a, function (a) {
                l.close(), m()
            }, function (a) {})
        }, l.editType = function () {
            var a = {
                name: l.type
            };
            k.update({
                id: l.tId
            }, a, function (a) {
                l.close(), o()
            }, function (a) {})
        }, l.showEdit = function (a) {
            l.supplyName = a.supplyName, l.tel = a.tel, l.workerName = a.workerName, _.each(l.stateArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.isUsed ? (l.state = !0, l.stateArr[0].image = "singleChoose_imageYes") : (l.state = !1, l.stateArr[1].image = "singleChoose_imageYes"), l.sId = a._id, l.editFlag = !0, l.addFlag = !0
        }, l.showTypeEdit = function (a) {
            l.addTypeFlag = !0, l.type = a.name, l.editTypeFlag = !0, l.tId = a._id
        }, l.pageChanged = function () {
            m()
        };
        var m = function () {
                var a = {
                    page: l.pagination.page,
                    itemsPerPage: l.pagination.itemsPerPage
                };
                j.index(a, function (a) {
                    l.supplies = a.data.supplies;
                    var b = a.data.count;
                    l.pagination.totalItems = b, l.pagination.numPages = b / l.itemsPerPage
                }, function (a) {})
            },
            n = function () {
                k.index({}, function (a) {
                    l.shopProductCategories = a.data.shopProductCategories
                }, function (a) {})
            };
        l.deleteSupply = function () {
            j["delete"]({}, {
                _id: l._supplyId
            }, function () {
                l.deleteFlag = !1, m(), l.promptOK = !0, l.wordOK = "删除成功", setTimeout(function () {
                    a.$apply(function () {
                        l.promptOK = !1
                    })
                }, 1e3)
            }, function () {})
        };
        var o = function () {
            m(), n()
        };
        l.closePrompt = function () {
            l.promptERR = !1, l.promptOK = !1, l.promptWARN = !1
        }, o()
    }
    angular.module("fieldApp").controller("OrgSupplyCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue", "Supply", "Type"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.flagOn = !0, l.arr = [], l.page = 1, l.itemsPerPage = 10, l.pagination = {
            page: l.page,
            itemsPerPage: l.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, l.pageChanged = function () {
            n()
        }, l.close = function () {
            l.name = "", l.venueFlag = !1, l.deleteFlag = !1, l.addFlag = !1, l.editFlag = !1
        }, l.showEdit = function (a) {
            l.addFlag = !0, l.name = a.name, l.venueName = a.venueName, l._venue = a._venue, l.editFlag = !0, l.tId = a._id
        }, l.marginTop = {
            "margin-top": "38px"
        }, l.create = function () {
            if (l.name) {
                var a = {
                    name: l.name,
                    _venue: l._venue
                };
                if (l.editFlag) return void k.update({
                    id: l.tId
                }, a, function (a) {
                    l.close(), n()
                }, function (a) {
                    l.promptERR = !0, l.wordERR = a.data.data
                });
                k.create(a, function (a) {
                    l.close(), n()
                }, function (a) {
                    l.promptERR = !0, l.wordERR = a.data.data
                })
            } else l.nameFlag = !0, l.errName = "此项为必填项"
        }, l["delete"] = function () {
            k["delete"]({
                id: l.tId
            }, {}, function (a) {
                n(), l.close()
            }, function (a) {})
        };
        var m = function () {
                i.index({}, function (a) {
                    l.venues = a.data.venues, l.venues.length > 0 && (l._venue = l.venues[0]._id, l.venueName = l.venues[0].name)
                }, function (a) {})
            },
            n = function () {
                var a = {
                    page: l.pagination.page,
                    itemsPerPage: l.pagination.itemsPerPage
                };
                k.index(a, function (a) {
                    l.tags = a.data.tags, l.pagination.totalItems = a.data.count, l.pagination.numPages = a.data.count / l.itemsPerPage
                }, function (a) {})
            };
        l.chooseVenue = function (a) {
            l._venue = a._id, l.venueName = a.name, l.venueFlag = !1
        };
        var o = function () {
            m(), n()
        };
        o()
    }
    angular.module("fieldApp").controller("OrgSettingTagCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue", "Item", "Tag"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.flagOn = !0, l.arr = [], l.close = function () {
            l.itemFlag = !1, l.venueFlag = !1, l.price = "", l.deleteFlag = !1, l.addFlag = !1, l.editFlag = !1, _.each(l.payments, function (a) {
                a.isChoose = !1
            })
        }, l.add = function (a) {
            l.type = a, l.addFlag = !0
        }, l.payments = [{
            name: "储值卡",
            value: "member",
            isChoose: !1
        }, {
            name: "现金",
            value: "cash",
            isChoose: !1
        }, {
            name: "支付宝",
            value: "alipay",
            isChoose: !1
        }, {
            name: "微信",
            value: "wx",
            isChoose: !1
        }, {
            name: "POS机",
            value: "pos",
            isChoose: !1
        }, {
            name: "银行转账",
            value: "card",
            isChoose: !1
        }, {
            name: "支票",
            value: "check",
            isChoose: !1
        }], l.choosePayment = function (a) {
            a.isChoose ? a.isChoose = !1 : a.isChoose = !0
        }, l.showEdit = function (a) {
            l.addFlag = !0, l.venueName = a.venueName, l.itemName = a.itemName, l._venue = a._venue, l._item = a._item, l.price = a.price, l.type = a.type, l.editFlag = !0, l.fId = a._id, a.payment && _.each(l.payments, function (b) {
                _.each(a.payment, function (a) {
                    b.value == a && (b.isChoose = !0)
                })
            })
        }, l.marginTop = {
            "margin-top": "38px"
        }, l.create = function () {
            if (!l.price) return void(l.priceFlag = !0);
            if (l.priceFlag = !1, !l.priceFlag) {
                var a = [];
                _.each(l.payments, function (b) {
                    b.isChoose && a.push(b.value)
                }), "overtime" == l.type && (a = "");
                var b = {
                    price: 1 * l.price,
                    _venue: l._venue,
                    _item: l._item,
                    type: l.type,
                    payment: a
                };
                if (l.editFlag) return void k.update({
                    id: l.fId
                }, b, function (a) {
                    l.close(), n(), o()
                }, function (a) {
                    l.promptERR = !0, l.wordERR = a.data.data
                });
                k.create(b, function (a) {
                    l.close(), n(), o(), _.each(l.payments, function (a) {
                        a.isChoose = !1
                    })
                }, function (a) {
                    l.promptERR = !0, l.wordERR = a.data.data
                })
            }
        }, l["delete"] = function () {
            k["delete"]({
                id: l.fId
            }, {}, function (a) {
                n(), o(), l.close()
            }, function (a) {})
        };
        var m = function () {
                i.index({}, function (a) {
                    l.venues = a.data.venues, l.venues.length > 0 && (l._venue = l.venues[0]._id, l.venueName = l.venues[0].name, l.getItem(l.venues[0]))
                }, function (a) {})
            },
            n = function () {
                var a = {
                    type: "overtime"
                };
                k.index(a, function (a) {
                    l.overtimes = a.data.fixedamounts
                }, function (a) {})
            },
            o = function () {
                var a = {
                    type: "deposit"
                };
                k.index(a, function (a) {
                    l.deposits = a.data.fixedamounts
                }, function (a) {})
            };
        l.getItem = function (a) {
            l.items = a.items, l.items.length > 0 && (l._item = l.items[0]._id, l.itemName = l.items[0].name)
        }, l.chooseVenue = function (a) {
            l._venue = a._id, l.venueName = a.name, l.venueFlag = !1, l.getItem(a)
        }, l.chooseItem = function (a) {
            l._item = a._id, l.itemName = a.name, l.itemFlag = !1
        };
        var p = function () {
            m(), n(), o()
        };
        p()
    }
    angular.module("fieldApp").controller("OrgSettingTicketCashCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue", "Item", "Fiexdamounts"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l) {
        var m = this;
        m.flagOn = !0, m.arr = [], m.page = 1, m.itemsPerPage = 10, m.pagination = {
            page: m.page,
            itemsPerPage: m.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, m.pageChanged = function () {
            p()
        }, m.close = function () {
            m.name = "", m.itemFlag = "", m.venueFlag = !1, m.price = "", m.limit = "", m.startShowFlag = !1, m.endShowFlag = !1, m.deleteFlag = !1, m.addFlag = !1, m.editFlag = !1, n()
        }, m.showEdit = function (a) {
            m.addFlag = !0, m.name = a.name, m.venueName = a._venue.name, m.itemName = a._item.name, m._venue = a._venue._id, m._item = a._item._id, m.limit = a.limit, m.price = a.price, m.startShowFlag = !0, m.endShowFlag = !0, m.startDate = (new Date).setHours(a.startDateHours), m.startDate = new Date(m.startDate).setMinutes(a.startDateMins), m.endDate = (new Date).setHours(a.endDateHours), m.endDate = new Date(m.endDate).setMinutes(a.endDateMins), m.editFlag = !0, m.tId = a._id;
            var b = {
                _venue: m._venue
            };
            l.index(b, function (b) {
                m.tags = b.data.tags, _.each(m.tags, function (b) {
                    _.each(a.tags, function (a) {
                        b._id == a._tag && (b.select = !0)
                    })
                })
            }, function (a) {})
        }, m.marginTop = {
            "margin-top": "38px"
        }, m.create = function () {
            if (m.name ? m.nameFlag = !1 : (m.nameFlag = !0, m.errName = "此项为必填项"), !m.price && 0 != m.price) return void(m.priceFlag = !0);
            if (m.priceFlag = !1, !m.nameFlag && !m.priceFlag && m.startShowFlag && m.endShowFlag) {
                var a = [];
                _.each(m.tags, function (b) {
                    if (b.select) {
                        var c = {
                            _tag: b._id
                        };
                        a.push(c)
                    }
                });
                var b = {
                    name: m.name,
                    price: 1 * m.price,
                    _venue: m._venue,
                    _item: m._item,
                    limit: 1 * m.limit,
                    startDateHours: new Date(m.startDate).getHours(),
                    startDateMins: new Date(m.startDate).getMinutes(),
                    endDateHours: new Date(m.endDate).getHours(),
                    endDateMins: new Date(m.endDate).getMinutes(),
                    tags: a
                };
                if (m.editFlag) return void k.update({
                    id: m.tId
                }, b, function (a) {
                    m.close(), p()
                }, function (a) {
                    m.promptERR = !0, m.wordERR = a.data.data
                });
                k.create(b, function (a) {
                    m.close(), p()
                }, function (a) {
                    m.promptERR = !0, m.wordERR = a.data.data
                })
            }
        }, m["delete"] = function () {
            k["delete"]({
                id: m.tId
            }, {}, function (a) {
                p(), m.close()
            }, function (a) {})
        };
        var n = function () {
                i.index({}, function (a) {
                    m.venues = a.data.venues, m.venues.length > 0 && (m._venue = m.venues[0]._id, m.venueName = m.venues[0].name, m.getItem(m.venues[0]), o(m.venues[0]))
                }, function (a) {})
            },
            o = function (a) {
                var b = {
                    _venue: a._id
                };
                l.index(b, function (a) {
                    m.tags = a.data.tags, _.each(m.tags, function (a) {
                        a.select = !1
                    })
                }, function (a) {})
            },
            p = function () {
                var a = {
                    page: m.pagination.page,
                    itemsPerPage: m.pagination.itemsPerPage
                };
                k.index(a, function (a) {
                    m.tickets = a.data.tickets, m.pagination.totalItems = a.data.count, m.pagination.numPages = a.data.count / m.itemsPerPage
                }, function (a) {})
            };
        m.chooseTag = function (a) {
            a.select = !a.select
        }, m.getItem = function (a) {
            m.items = a.items, m.items.length > 0 && (m._item = m.items[0]._id, m.itemName = m.items[0].name)
        }, m.chooseVenue = function (a) {
            m._venue = a._id, m.venueName = a.name, m.venueFlag = !1, m.getItem(a), o(a)
        }, m.chooseItem = function (a) {
            m._item = a._id, m.itemName = a.name, m.itemFlag = !1
        };
        var q = function () {
            n(), p()
        };
        q()
    }
    angular.module("fieldApp").controller("OrgSettingTicketCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue", "Item", "Ticket", "Tag"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.vName = "全部场馆", l.vId = "", l.iName = "全部项目", l.iId = "", l.oneFlag = !1, l.marginTop = {
            "margin-top": "38px"
        }, l.page = 1, l.itemsPerPage = 10, l.pagination = {
            page: l.page,
            itemsPerPage: l.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, l.pageChanged = function () {
            p()
        }, l.close = function () {
            l.addFlag = !1, l.editFlag = !1, l.deleteFlag = !1, l.name = "", l.value = "", l.price = "", l.daylimit = "", l.limit = "", l.des = "", l.timeValue = "", l.bail = ""
        }, l["delete"] = function () {
            g["delete"]({
                id: l._id
            }, {}, function (a) {
                p(), l.close()
            }, function (a) {
                l.errorFlag = !0, l.err = a.data.data
            })
        }, l.chooseVenue = function (a) {
            l.venueName = a.name, l._venue = a._id, l.items = a.items, a.items.length > 0 ? (l.itemName = a.items[0].name, l._item = a.items[0]._id) : (l.itemName = "暂无", l._item = ""), l.venueFlag = !1, o()
        }, l.chooseVrr = function (a) {
            l.vName = a.name, l.vId = a._id, a._id ? (l.irr = [], l.irr = l.irr.concat(a.items), l.iName = "全部", l.iId = "", p()) : m(), l.selectVenueFlag = !1
        }, l.chooseItem = function (a) {
            l.itemName = a.name, l._item = a._id, l.itemFlag = !1
        }, l.chooseIrr = function (a) {
            l.iName = a.name, l.iId = a._id, l.selectItemFlag = !1, p()
        }, l.edit = function (a, b) {
            if (b) {
                var c = {
                    isActive: !a.isActive
                };
                g.update({
                    id: a._id
                }, c, function (a) {
                    l.close(), l.succeedFlag = !0, p()
                }, function (a) {
                    l.errorFlag = !0, l.err = a.data.data
                })
            } else {
                l.editFlag = !0, _.each(l.venues, function (b) {
                    b._id == a._venue._id && (l.venueName = b.name, l._venue = b._id, l.items = b.items, _.each(b.items, function (b) {
                        b._id == a._item._id && (l.itemName = b.name, l._item = b._id)
                    }))
                }), l.timeValue = a.timeValue, l._id = a._id, l.name = a.name, l.price = a.price, l.value = a.value, l.oneFlag = a.daylimit > 1 ? !1 : !0, l.limit = a.limit, l.bail = a.bail, l.des = a.description, l.cardcost = a.cardCost;
                var c = {
                    _venue: l._venue
                };
                k.index(c, function (b) {
                    l.tags = b.data.serviceTags, _.each(l.tags, function (b) {
                        _.each(a.serviceTags, function (a) {
                            b._id == a._serviceTag && (b.select = !0)
                        })
                    })
                }, function (a) {}), l.addFlag = !0
            }
        }, l.finish = function () {
            if (!l.name || isNaN(l.value) || isNaN(l.price) || isNaN(l.cardcost) || isNaN(l.timeValue)) return l.errorFlag = !0, void(l.err = "请把资料填充完整");
            var a = [];
            _.each(l.tags, function (b) {
                b.select && a.push(b._id)
            });
            var b = {
                type: "time",
                _venue: l._venue,
                _item: l._item,
                name: l.name,
                value: 1 * l.value,
                daylimit: l.oneFlag ? 1 : 9999,
                limit: 1 * l.limit,
                price: 1 * l.price,
                description: l.des,
                timeValue: 1 * l.timeValue,
                bail: 1 * l.bail,
                cardCost: 1 * l.cardcost,
                serviceTags: a,
                isActive: l.isActive
            };
            l.editFlag ? g.update({
                id: l._id
            }, b, function (a) {
                l.close(), p()
            }, function (a) {
                l.errorFlag = !0, l.err = a.data.data
            }) : g.create(b, function (a) {
                l.close(), p()
            }, function (a) {
                l.errorFlag = !0, l.err = a.data.data
            })
        }, l.chooseTag = function (a) {
            a.select = !a.select
        };
        var m = function () {
                i.index({}, function (a) {
                    l.venues = a.data.venues, l.vrr = [], l.venues.length > 0 && (l.venueName = l.venues[0].name, l._venue = l.venues[0]._id, l.items = l.venues[0].items, l.vrr = l.c.concat(l.venues), l.venues[0].items.length > 0 ? (l.itemName = l.venues[0].items[0].name, l._item = l.venues[0].items[0]._id) : (l.itemName = "暂无", l._item = "")), o(), n()
                }, function (a) {})
            },
            n = function () {
                j.index({}, function (a) {
                    l.items = a.data.items, l.irr = [], l.irr = l.cc.concat(l.items), p()
                }, function (a) {})
            },
            o = function () {
                var a = {
                    _venue: l._venue
                };
                k.index(a, function (a) {
                    l.tags = a.data.serviceTags
                }, function (a) {})
            },
            p = function () {
                var a = {
                    type: "time",
                    page: l.pagination.page,
                    itemsPerPage: l.pagination.itemsPerPage,
                    _venue: l.vId,
                    _item: l.iId,
                    isActive: "all"
                };
                g.index(a, function (a) {
                    l.services = a.data.services, l.pagination.totalItems = a.data.count, l.pagination.numPages = a.data.count / l.itemsPerPage
                }, function (a) {
                    l.errorFlag = !0, l.err = a.data.data
                })
            },
            q = function () {
                l.c = [{
                    name: "全部场馆",
                    _id: ""
                }], l.cc = [{
                    name: "全部项目",
                    _id: ""
                }], m()
            };
        q()
    }
    angular.module("fieldApp").controller("OrgTimeCardCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "Service", "$location", "Venue", "Item", "ServiceTag"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.marginTop = {
            "margin-top": "38px"
        }, l.flagOn = !0, l.flagOpen = !0, l.vId = "", l.arr = [], l.h = "height:" + (window.screen.height - 450) + "px", l.close = function () {
            l.flagOn = !0, l.addFlag = !1, l.editFlag = !1, l.closeFlag = !1, l.startShowFlag = !1, l.endShowFlag = !1, l.chooseVenueFlag = !1, l.sFlag = !1, l.eFlag = !1, l.closeDate = "", l.closeFlag2 = !1, l.closeDate2 = "", l.deleteFlag = !1, l.errorFlag = !1
        }, l.chooseOpen = function (a) {
            l.flagOpen = a
        }, l.chooseOn = function (a) {
            l.flagOn = a, l.closeDate || (l.closeDate = new Date((new Date).getTime() + 864e5), l.closeFlag = !0)
        }, l.showEdit = function (a) {
            l.editFlag = !0, l.tId = a._id, l.flagOn = a.isUsed, l.flagOn || (l.closeDate = a.closeDate, l.closeFlag = !0), a.close_endDate ? (l.closeFlag = !0, l.closeFlag2 = !0, l.closeDate = a.close_startDate, l.closeDate2 = a.close_endDate) : a.close_startDate && (l.closeFlag = !0, l.closeDate = a.close_startDate);
            var b = new Date,
                c = new Date;
            b.setHours(a.startDateHours), b.setMinutes(a.startDateMins), l.startDate = b, c.setHours(a.endDateHours), c.setMinutes(a.endDateMins), l.endDate = c, l.startShowFlag = !0, l.endShowFlag = !0
        }, l.judge = function (a) {
            switch (a) {
            case "name":
                l.name ? l.nameFlag = !1 : l.nameFlag = !0
            }
        }, l.chooseVenue = function (a) {
            l.venueName = a.name, l.vId = a._id, l.chooseVenueFlag = !1, l.venue = a, m()
        }, l["delete"] = function () {
            k["delete"]({
                id: l.tId
            }, {}, function (a) {
                l.close(), l.getTime(l.iId)
            }, function (a) {})
        }, l.edit = function () {
            if (l.startShowFlag || (l.sFlag = !0), l.endShowFlag || (l.eFlag = !0), l.closeFlag || l.closeFlag2) {
                if (!l.closeFlag && l.closeFlag2) return void(l.longTimeFlag = !0);
                if (l.closeFlag2) {
                    l.closeDate2 = new Date(l.closeDate2), l.closeDate2.setHours(23);
                    var a = new Date(l.closeDate2).getTime();
                    l.flagOpen = !1
                } else {
                    var a = "";
                    l.flagOpen = !1
                }
            } else l.flagOpen = !0; if (l.startShowFlag & l.endShowFlag) {
                if (l.cItems = [], l.cItems.push(l.iId), l.closeDate = new Date(l.closeDate), l.closeDate.setHours(1), l.closeDate) var b = new Date(l.closeDate).getTime() ? new Date(l.closeDate).getTime() : void 0;
                else var b = "";
                var c = {
                    startDateHours: new Date(l.startDate).getHours(),
                    startDateMins: new Date(l.startDate).getMinutes(),
                    endDateHours: new Date(l.endDate).getHours(),
                    endDateMins: new Date(l.endDate).getMinutes(),
                    isUsed: !0,
                    closeDate: (new Date).getTime(),
                    close_startDate: b,
                    close_endDate: a,
                    isOpen: l.flagOpen,
                    items: l.iId,
                    _venue: l.vId
                };
                k.update({
                    id: l.tId
                }, c, function (a) {
                    l.close(), l.getTime(l.iId)
                }, function (a) {
                    l.errorFlag = !0
                })
            }
        }, l.finish = function () {
            if (l.startShowFlag || (l.sFlag = !0), l.endShowFlag || (l.eFlag = !0), l.startShowFlag & l.endShowFlag) {
                var a = {
                    startDateHours: new Date(l.startDate).getHours(),
                    startDateMins: new Date(l.startDate).getMinutes(),
                    endDateHours: new Date(l.endDate).getHours(),
                    endDateMins: new Date(l.endDate).getMinutes(),
                    isUsed: !0,
                    _item: l.iId,
                    _venue: l.vId
                };
                k.create(a, function (a) {
                    l.close(), l.getTime(l.iId)
                }, function (a) {
                    l.errorFlag = !0
                })
            }
        }, l.select = function (a) {
            for (var b = 0; b < l.times.length; b++) l.times[b].select = a, l.selectFlag = a;
            for (var b = 0; b < l.times.length; b++)
                if (l.times[b].select) return void(l.editAllFlag = !0);
            l.editAllFlag = !1
        }, l.changeTime = function (a) {
            a.select = !a.select;
            for (var b = 0; b < l.times.length; b++)
                if (l.times[b].select) return void(l.editAllFlag = !0);
            l.editAllFlag = !1
        }, l.getNowFormatDate = function (a) {
            var b = "-",
                c = a.getMonth() + 1,
                d = a.getDate();
            c >= 1 && 9 >= c && (c = "0" + c), d >= 0 && 9 >= d && (d = "0" + d);
            var e = a.getFullYear() + b + c + b + d;
            return e
        }, l.getTime = function (a) {
            var b = {
                _venue: l.vId,
                _item: a,
                sortBy: "startDate"
            };
            l.iId = a;
            var c = (new Date).getTime();
            k.index(b, function (a) {
                l.times = a.data.times, _.each(l.times, function (a) {
                    if (a.startDateHours < 10) var b = "0" + a.startDateHours;
                    else var b = a.startDateHours; if (a.startDateMins < 10) var d = "0" + a.startDateMins;
                    else var d = a.startDateMins; if (a.endDateHours < 10) var e = "0" + a.endDateHours;
                    else var e = a.endDateHours; if (a.endDateMins < 10) var f = "0" + a.endDateMins;
                    else var f = a.endDateMins;
                    a.showDate = b + ":" + d + "--" + e + ":" + f, a.close_startDate ? a.close_endDate ? c < new Date(a.close_startDate).getTime() ? (a.isUsed = !0, a.warn = l.getNowFormatDate(new Date(a.close_startDate)) + "至" + l.getNowFormatDate(new Date(a.close_endDate)) + "不可订") : c > new Date(a.close_endDate).getTime() ? (a.isUsed = !0, a.warn = "") : (a.isUsed = !1, a.warn = l.getNowFormatDate(new Date(a.close_startDate)) + "至" + l.getNowFormatDate(new Date(a.close_endDate)) + "不可订") : (c < new Date(a.close_startDate).getTime() ? a.isUsed = !0 : a.isUsed = !1, a.warn = l.getNowFormatDate(new Date(a.close_startDate)) + "后不可订") : a.isUsed = !0
                })
            }, function (a) {})
        };
        var m = function () {
                i.index({}, function (a) {
                    l.venues = a.data.venues, l.venues.length > 0 && (l.vId || (l.venueName = l.venues[0].name, l.vId = l.venues[0]._id, l.venue = l.venues[0]), l.venue.items.length > 0 && (l.venue.items[0].select = !0, l.venue.items[l.venue.items.length - 1].endSelect = !0, l.getTime(l.venue.items[0]._id)))
                }, function (a) {})
            },
            n = function () {
                m()
            };
        n()
    }
    angular.module("fieldApp").controller("OrgTimeRegisterCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue", "Item", "Time"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this,
            m = function () {
                var a = {
                    page: l.pagination.page,
                    itemsPerPage: l.pagination.itemsPerPage
                };
                j.index(a, function (a) {
                    l.productcategories = a.data.productcategories, _.each(l.productcategories, function (a) {
                        for (var b = 0; b < a.secondCategories.length; b++) 0 == b ? a.second = a.secondCategories[b].name : a.second = a.second + "," + a.secondCategories[b].name
                    });
                    var b = a.data.count;
                    l.pagination.totalItems = b, l.pagination.numPages = b / l.itemsPerPage
                }, function () {})
            };
        l.page = 1, l.itemsPerPage = 10, l.pagination = {
            page: l.page,
            itemsPerPage: l.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, l["delete"] = function (a) {
            var b = [];
            _.each(l.secondTypes, function (c) {
                c.order != a && b.push(c)
            }), l.secondTypes = b
        }, l.judge = function () {
            if (l.inputFlag2 = !1, l.name1) {
                if (0 == l.secondTypes.length) var a = 1;
                else var a = l.secondTypes[l.secondTypes.length - 1].order + 1;
                var b = {
                    name: l.name1,
                    order: a
                };
                l.secondTypes.push(b), l.name1 = "", document.getElementById("type").focus()
            }
        }, l.showEdit = function (a) {
            l.pId = a._id, l.editFlag = !0, l.addFlag = !0;
            for (var b = 0; b < a.secondCategories.length; b++) a.secondCategories[b].order = b + 1;
            l.secondTypes = a.secondCategories, l.firstName = a.name
        }, l.create = function () {
            if (!l.firstName) return void(l.firstFlag = !0);
            if (l.name1) {
                if (0 == l.secondTypes.length) var a = 1;
                else var a = l.secondTypes[l.secondTypes.length - 1].order + 1;
                var b = {
                    name: l.name1,
                    order: a
                };
                l.secondTypes.push(b), l.name1 = ""
            }
            if (l.editFlag) {
                var c = {
                    name: l.firstName,
                    secondArr: l.secondTypes
                };
                return void j.update({
                    id: l.pId
                }, c, function (a) {
                    m(), l.close()
                }, function (a) {
                    l.promptERR = !0, l.wordERR = a.data.data
                })
            }
            var c = {
                name: l.firstName,
                secondArr: l.secondTypes
            };
            j.create(c, function (a) {
                m(), l.close()
            }, function (a) {
                l.promptERR = !0, l.wordERR = a.data.data
            })
        }, l.deleteProductCategory = function () {
            j["delete"]({
                id: l.pId
            }, function (a) {
                m(), l.close()
            }, function (a) {
                l.promptERR = !0, l.wordERR = a.data.data
            })
        };
        var n = function () {
            l.secondTypes = [], l.inputFlag1 = !0, l.inputFlag2 = !1, m()
        };
        l.pageChanged = function () {
            m()
        }, l.close = function () {
            l.addFlag = !1, l.secondTypes = [], l.inputFlag1 = !0, l.inputFlag2 = !1, l.firstName = "", l.editFlag = !1, l.deleteFlag = !1, l.firstFlag = !1
        }, n()
    }
    angular.module("fieldApp").controller("OrgSettingTypeCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Item", "Productcategory", "Product"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.flagOn = !0, k.arr = [], k.isUsed = !1, k.close = function () {
            k.useStateArr = [{
                name: "开通",
                image: "singleChoose_imageNo",
                isUsed: !0
            }, {
                name: "不开通",
                image: "singleChoose_imageYes",
                isUsed: !1
            }], k.discount = "", k.isUsed = !1, k.flagOn = !0, k.addFlag = !1, k.name = "", k.day = "", k.arr = [], k.sureFlag = !1, k.editFlag = !1, k.closeFlag = !1, k.closeDate = "", k.closeFlag2 = !1, k.closeDate2 = "", k.deleteFlag = !1, k.longTimeFlag = !1, k.nameFlag = !1, k.iFlag = !1, k.discountFlag = !1, k.od = "";
            for (var a = 0; a < k.items.length; a++) k.items[a].select = !1
        }, k.showEdit = function (a) {
            k.editFlag = !0, k.name = a.name, k.day = a.orderDay, k.flagOn = a.isUsed, k.flagOpen = a.isOpen, k.od = a.orderDay, k.vId = a._id, a.openSpe ? (k.isUsed = a.openSpe, k.discount = a.discount, k.useStateArr[0].image = "singleChoose_imageYes", k.useStateArr[1].image = "singleChoose_imageNo") : (k.isUsed = !1, k.useStateArr[0].image = "singleChoose_imageNo", k.useStateArr[1].image = "singleChoose_imageYes"), a.closeOpen_endDate ? (k.closeFlag = !0, k.closeFlag2 = !0, k.closeDate = a.closeOpen_startDate, k.closeDate2 = a.closeOpen_endDate) : a.closeOpen_startDate && (k.closeFlag = !0, k.closeDate = a.closeOpen_startDate);
            for (var b = 0; b < k.items.length; b++)
                for (var c = 0; c < a.items.length; c++) k.items[b]._id == a.items[c]._id && (k.items[b].select = !0, k.arr.push(k.items[b]))
        }, k.chooseState = function (a) {
            _.each(k.useStateArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", k.isUsed = a.isUsed
        }, k.useStateArr = [{
            name: "开通",
            image: "singleChoose_imageNo",
            isUsed: !0
        }, {
            name: "不开通",
            image: "singleChoose_imageYes",
            isUsed: !1
        }], k.marginTop = {
            "margin-top": "38px"
        }, k.judge = function (a) {
            switch (a) {
            case "name":
                k.name ? k.nameFlag = !1 : k.nameFlag = !0;
                break;
            case "day":
                k.day ? k.dayFlag = !1 : k.dayFlag = !0
            }
        }, k.chooseOn = function (a) {
            k.flagOn = a, k.closeDate || (k.closeDate = new Date((new Date).getTime() + 864e5), k.closeFlag = !0)
        }, k.chooseOpen = function (a) {
            k.flagOpen = a
        }, k.finish = function () {
            if (k.name ? k.nameFlag = !1 : (k.nameFlag = !0, k.errName = "此项为必填项"), k.od ? k.odFlag = !1 : k.odFlag = !0, k.arr.length > 0 ? k.iFlag = !1 : k.iFlag = !0, !k.nameFlag && !k.dayFlag && !k.odFlag) {
                k.cItems = [];
                for (var a = 0; a < k.arr.length; a++) k.cItems.push(k.arr[a]._id);
                var b = {
                    name: k.name,
                    orderDay: 1 * k.od,
                    isUsed: !0,
                    isOpen: !0,
                    items: k.cItems
                };
                i.create(b, function (a) {
                    k.close(), l()
                }, function (a) {
                    400 == a.data.code ? (k.dayFlag = !0, k.errDay = "请在‘输入天数’这栏输入数字") : 500 == a.data.code ? (k.nameFlag = !0, k.errName = "该场馆名称已被使用") : 402 == a.data.code && (k.discountFlag = !0, k.errDiscount = "折扣数据错误")
                })
            }
        }, k.edit = function () {
            if (k.name ? k.nameFlag = !1 : (k.nameFlag = !0, k.errName = "此项为必填项"), k.arr.length > 0 ? k.iFlag = !1 : k.iFlag = !0, k.od ? k.odFlag = !1 : k.odFlag = !0, k.closeFlag || k.closeFlag2) {
                if (!k.closeFlag && k.closeFlag2) return void(k.longTimeFlag = !0);
                if (k.closeFlag2) {
                    var a = new Date(k.closeDate2).getTime();
                    k.flagOpen = !1
                } else {
                    var a = "";
                    k.flagOpen = !1
                }
            } else k.flagOpen = !0; if (!k.nameFlag && !k.dayFlag && !k.odFlag) {
                k.cItems = [];
                for (var b = 0; b < k.arr.length; b++) k.cItems.push(k.arr[b]._id);
                var c = {
                    name: k.name,
                    orderDay: 1 * k.od,
                    isUsed: k.flagOn,
                    closeDate: (new Date).getTime(),
                    isOpen: k.flagOpen,
                    items: k.cItems,
                    closeOpen_startDate: new Date(k.closeDate).getTime(),
                    closeOpen_endDate: a
                };
                i.update({
                    id: k.vId
                }, c, function (a) {
                    k.close(), l()
                }, function (a) {
                    k.errorFlag = !0, k.errrr = a.data.data
                })
            }
        }, k["delete"] = function () {
            i["delete"]({
                id: k.vId
            }, {}, function (a) {
                l(), k.close()
            }, function (a) {})
        }, k.getNowFormatDate = function (a) {
            var b = "-",
                c = a.getMonth() + 1,
                d = a.getDate();
            c >= 1 && 9 >= c && (c = "0" + c), d >= 0 && 9 >= d && (d = "0" + d);
            var e = a.getFullYear() + b + c + b + d;
            return e
        }, k.move = function (a, b) {
            if ("up" == a) var c = {
                _first: b._id,
                _second: k.venues[b.order - 2]._id
            };
            else var c = {
                _first: b._id,
                _second: k.venues[b.order]._id
            };
            i.move(c, function (a) {
                l()
            }, function (a) {})
        };
        var l = function () {
                i.index({}, function (a) {
                    k.venues = a.data.venues;
                    for (var b = 0; b < k.venues.length; b++) k.venues[b].order = b + 1;
                    var c = (new Date).getTime();
                    _.each(k.venues, function (a) {
                        a.openSpe && a.discount && (0 != a.discount && 1 != a.discount ? a.discountDes = "(" + 10 * a.discount + "折)" : 1 == a.discount && (a.discountDes = "(不打折)")), a.closeOpen_startDate ? a.closeOpen_endDate ? c < new Date(a.closeOpen_startDate).getTime() ? (a.isOpen = !0, a.warn = k.getNowFormatDate(new Date(a.closeOpen_startDate)) + "至" + k.getNowFormatDate(new Date(a.closeOpen_endDate)) + "不可订") : c > new Date(a.closeOpen_endDate).getTime() ? (a.isOpen = !0, a.warn = "") : (a.isOpen = !1, a.warn = k.getNowFormatDate(new Date(a.closeOpen_startDate)) + "至" + k.getNowFormatDate(new Date(a.closeOpen_endDate)) + "不可订") : (c < new Date(a.closeOpen_startDate).getTime() ? a.isOpen = !0 : a.isOpen = !1, a.warn = k.getNowFormatDate(new Date(a.closeOpen_startDate)) + "后不可订") : a.isOpen = !0
                    })
                }, function (a) {})
            },
            m = function () {
                j.index({}, function (a) {
                    k.items = [];
                    for (var b = 0; b < a.data.items.length; b++) a.data.items[b].isUsed && k.items.push(a.data.items[b]);
                    for (var b = 0; b < k.items.length; b++) k.items[b].select = !1
                }, function (a) {})
            };
        k.chooseItem = function (a) {
            k.arr = [], a.select = !a.select;
            for (var b = 0; b < k.items.length; b++) k.items[b].select && k.arr.push(k.items[b])
        };
        var n = function () {
            l(), m()
        };
        n()
    }
    angular.module("fieldApp").controller("OrgVenueRegisterCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue", "Item"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l) {
        var m = this;
        m.close = function () {
            m.name = "", m.price = "", m.totalPrice = "", m.addFlag = !1, m.editFlag = !1, m.sureFlag = !1, m.nameFlag = !1, m.addMemberFlag = !1, m.editMember = !1, m.sureFlag = !1, m.addLevelFlag = !1, m.mtFlag = !1, m.lFlag = !1, m.discount = "", m.level = "", m.info = ""
        }, m.judge = function (a) {
            switch (a) {
            case "name":
                m.name ? m.nameFlag = !1 : m.nameFlag = !0;
                break;
            case "price":
                m.price ? m.priceFlag = !1 : m.priceFlag = !0;
                break;
            case "discount":
                m.discount ? m.discountFlag = !1 : m.discountFlag = !0;
                break;
            case "level":
                m.level ? m.levelFlag = !1 : m.levelFlag = !0;
                break;
            case "info":
                m.info ? m.infoFlag = !1 : m.infoFlag = !0;
                break;
            case "totalPrice":
                m.totalPrice ? m.totalPriceFlag = !1 : m.totalPriceFlag = !0
            }
        }, m.finishMember = function () {
            if (m.name ? m.nameFlag = !1 : m.nameFlag = !0, m.discount ? m.discount > 1 || m.discount <= 0 ? (m.discountFlag = !0, m.discountErr = "请输入正确的数值") : m.discountFlag = !1 : (m.discountFlag = !0, m.discountErr = "此项为必填项"), !m.nameFlag && !m.discountFlag) {
                var a = {
                    name: m.name,
                    discount: 1 * m.discount
                };
                if (m.editMember) return void k.update({
                    id: m.mId
                }, a, function (a) {
                    m.close(), n()
                }, function (a) {
                    m.errorFlag = !0, 402 == a.data.code && (m.err = "请在折扣处输入一个0到1的数")
                });
                k.create(a, function (a) {
                    m.close(), n()
                }, function (a) {
                    m.errorFlag = !0, 402 == a.data.code && (m.err = "请在折扣处输入一个0到1的数")
                })
            }
        }, m["delete"] = function (a) {
            return m.mtFlag ? void k["delete"]({
                id: m.mId
            }, function (a) {
                m.close(), n()
            }, function (a) {}) : m.lFlag ? void l["delete"]({
                id: m.lId
            }, function (a) {
                m.close(), getLevel()
            }, function (a) {}) : void i["delete"]({
                id: m.cId
            }, function (a) {
                m.close(), getCard()
            }, function (a) {})
        }, m.showEditMember = function (a) {
            m.editMember = !0, m.addMemberFlag = !0, m.name = a.name, m.discount = a.discount, m.mId = a._id
        };
        var n = function () {
                k.index({}, function (a) {
                    m.membertypes = a.data.membertypes, m.membertypes.length > 0 && (m.membertypeName = m.membertypes[0].name, m.chooseMid = m.membertypes[0]._id)
                }, function (a) {})
            },
            o = function () {
                e.get({}, function (a) {
                    var b = a.data.user._organization ? a.data.user._organization : a.data.user._id;
                    e.getOrgInfo({
                        id: b
                    }, function (a) {
                        m.money = a.data.user.cardCost, m.rule = a.data.user.depositDes
                    }, function () {})
                }, function () {})
            },
            p = function () {
                o(), n()
            };
        p()
    }
    angular.module("fieldApp").controller("OrgSettingVipCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Card", "$timeout", "Membertype", "Level"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.itemName = "", l.page = 1, l.itemsPerPage = 10, l.pagination = {
            page: l.page,
            itemsPerPage: l.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, l.close = function () {
            l.addFlag = !1, l.editFlag = !1, l.deleteFlag = !1, l.detailFlag = !1, l.insideCode = "", l.outCode = "", l.ips = "", m()
        }, l.chooseMachine = function (a) {
            a.select = !a.select
        }, l["delete"] = function () {
            k["delete"]({
                id: l.vId
            }, {}, function (a) {
                l.close()
            }, function (a) {})
        }, l.showEdit = function (a) {
            l.editFlag = !0, l.vId = a._id, l.addFlag = !0, l.insideCode = a.voucherNo, l.outCode = a.No, l.ips = "", _.each(a.ips, function (a) {
                l.ips ? l.ips = l.ips + ";" + a : l.ips = a
            }), _.each(a.tags, function (a) {
                _.each(l.tags, function (b) {
                    a._tag == b._id && (b.select = !0)
                })
            })
        }, l.create = function () {
            if (!l.insideCode || !l.outCode) return l.errorFlag = !0, void(l.err = "请把数据填充完整");
            var a = l.ips.split(";"),
                b = [];
            _.each(l.tags, function (a) {
                if (a.select) {
                    var c = {
                        _tag: a._id
                    };
                    b.push(c)
                }
            });
            var c = {
                _venue: l._venue,
                voucherNo: l.insideCode,
                No: l.outCode,
                tags: b,
                ips: a
            };
            l.editFlag ? k.update({
                id: l.vId
            }, c, function (a) {
                n(), l.close()
            }, function (a) {
                l.errorFlag = !0, l.err = a.data.data
            }) : k.create(c, function (a) {
                n(), l.close()
            }, function (a) {
                l.errorFlag = !0, l.err = a.data.data
            })
        }, l.chooseTag = function (a) {
            a.select = !a.select
        }, l.chooseVenue = function (a) {
            l.venueName = a.name, l._venue = a._id, m(a)
        };
        var m = function () {
            var a = {
                _venue: l._venue
            };
            j.index(a, function (a) {
                l.tags = a.data.tags, n()
            }, function (a) {
                l.errorFlag = !0, l.err = a.data.data
            })
        };
        l.pageChanged = function () {
            n()
        }, l.search = function () {
            var a = {
                page: l.pagination.page,
                itemsPerPage: l.pagination.itemsPerPage,
                _venue: l._venue,
                mix: l.searchName
            };
            k.index(a, function (a) {
                l.voucherinfos = a.data.voucherInfos, l.pagination.totalItems = a.data.count, l.pagination.numPages = a.data.count / l.itemsPerPage
            }, function (a) {})
        };
        var n = function () {
                var a = {
                    page: l.pagination.page,
                    itemsPerPage: l.pagination.itemsPerPage,
                    _venue: l._venue
                };
                k.index(a, function (a) {
                    l.voucherinfos = a.data.voucherInfos, l.pagination.totalItems = a.data.count, l.pagination.numPages = a.data.count / l.itemsPerPage
                }, function (a) {})
            },
            o = function () {
                i.index({}, function (a) {
                    l.venues = a.data.venues, l.venues.length > 0 && (l.venueName = l.venues[0].name, l._venue = l.venues[0]._id, m())
                }, function (a) {})
            },
            p = function () {
                l.close(), o()
            };
        p()
    }
    angular.module("fieldApp").controller("OrgSettingVoucherCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue", "Tag", "Voucherinfo"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.titleState = f.params.state || "stock", k.close = function () {
            k.enterFlag = !1, k.changePriceFlag = !1, k.name = "", k.supplier = "", k.num = "", k.price = "", k.salePrice = "", k.typeFlag = !1, k.searchProductName = ""
        };
        var l = function () {
                var a = {
                    name: k.searchProductName
                };
                i.index(a, function (a) {
                    k.products = a.data.shopProducts, k.products.length > 0 && (k.productName = k.products[0].name, k.pId = k.products[0]._id), k.close()
                }, function (a) {})
            },
            m = function () {
                j.index({}, function (a) {
                    k.supplies = a.data.supplies, k.supplies.length > 0 && (k.supply = k.supplies[0].supplyName, k.sId = k.supplies[0]._id)
                }, function (a) {})
            };
        k.search = function () {
            l()
        }, k.chooseProduct = function (a) {
            k.productName = a.name, k.pId = a._id, k.chooseNameFlag = !1
        }, k.chooseSupply = function (a) {
            k.supply = a.supplyName, k.sId = a._id, k.chooseSupplyFlag = !1
        }, k.enter = function () {
            var a = {
                _shopProduct: k.pId,
                quantity: 1 * k.num,
                _supply: k.sId,
                price: 1 * k.price
            };
            i.enter(a, function (a) {
                k.close(), l()
            }, function (a) {})
        }, k.changeTitle = function (a) {
            switch (k.titleState = "", k.close(), a) {
            case "stock":
                k.titleState = "stock", f.go("org-inventory.stock", {
                    state: "stock"
                });
                break;
            default:
                k.titleState = "record", f.go("org-inventory.record", {
                    state: "record"
                })
            }
            n()
        };
        var n = function () {
            l(), m()
        };
        n()
    }
    angular.module("fieldApp").controller("OrgInventoryCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "ShopProduct", "Supply"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q) {
        var r, s = this;
        s.titleState = f.params.state || "sale", s.paymentArr = [{
                name: "支付宝",
                value: "alipay",
                image: "singleChoose_imageYes"
            }, {
                name: "微信",
                value: "wx",
                image: "singleChoose_imageNo"
            }, {
                name: "余额",
                value: "member",
                image: "singleChoose_imageNo"
            }, {
                name: "现金",
                value: "cash",
                image: "singleChoose_imageNo"
            }], s.paymentArr2 = [{
                name: "支付宝",
                value: "alipay",
                image: "singleChoose_imageYes"
            }, {
                name: "微信",
                value: "wx",
                image: "singleChoose_imageNo"
            }], s.refundArr = [{
                name: "现金",
                image: "singleChoose_imageYes",
                value: "cash"
            }, {
                name: "会员卡",
                value: "card",
                image: "singleChoose_imageNo"
            }], s.page = 1, s.itemsPerPage = 10, s.pagination = {
                page: s.page,
                itemsPerPage: s.itemsPerPage,
                maxSize: 5,
                numPages: null,
                totalItems: null
            }, s.buyProduct = [], s.total = 0, s.showCodeBox = !0, s._member = "",
            s.wxFlag = !0, s.buyPayment = "alipay", s.startDate = new Date, s.closeDate = new Date, s.close = function () {
                s.sellFlag = !1, s.refundFlag = !1, s.payFlag = !1, s.total = 0, s.showCodeBox = !0, s.wxFlag = !0, s.auth_code = "", s.moneySelect = !1, s.continueFlag = !1, s.buyProduct = []
            }, s.judgePay = function (a) {
                s.payFlag = !0
            }, s.getNowFormatDate = function (a) {
                var b = "-",
                    c = ":",
                    d = a.getMonth() + 1,
                    e = a.getDate();
                d >= 1 && 9 >= d && (d = "0" + d), e >= 0 && 9 >= e && (e = "0" + e);
                var f = a.getFullYear() + b + d + b + e + " " + a.getHours() + c + a.getMinutes() + c + a.getSeconds();
                return f
            }, s.print = function (a) {
                for (var b = '<div><div><h3 style="font-size:20px">欢迎光临</h3><h3 style="font-size:20px">购买商品消费小票</h3>操作员：' + s.admin + '</h3></div><span>**********************************</span><div><div style="border-bottom: 1px solid #DADADA;"><table style="width: 100%;"><thead><tr><td width="50%">商品名称</td><td width="20%">数量</td><td width="30%">单价</td></tr></thead>', c = 0; c < s.buyProduct.length; c++) b = 0 == c ? b + "<tbody><tr><td>" + s.buyProduct[c].name + "</td><td>" + s.buyProduct[c].num + "</td><td>" + s.buyProduct[c].price + "</td></tr>" : b + "<tr><td>" + s.buyProduct[c].name + "</td><td>" + s.buyProduct[c].num + "</td><td>" + s.buyProduct[c].price + "</td></tr>", c == s.buyProduct.length - 1 && (b = b + "<tr><td>合计</td><td>" + s.total + "</td><td></td></tr></tbody></table></div><span>**********************************</span>");
                if (s.members.cards.length > 0) var d = "" + s.members.cards[0].total;
                else var d = "0"; if (s.members.virtualAccount.expires_in) var e = s.getNowFormatDate(new Date(s.members.virtualAccount.expires_in));
                else var e = "";
                b = b + "<div>消费方式:" + a + "</div><div>现金账户余额:￥" + d + "</div><div>虚拟账户余额:￥" + s.members.virtualAccount.total + "</div><div>有效期:" + e, b = b + "</div><div>消费日期:" + s.getNowFormatDate(new Date) + "</div><span>**********************************</span><div>客户签名:</div>";
                var f = getLodop();
                f.PRINT_INIT(""), f.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), f.SET_PRINTER_INDEXA(-1), f.SET_PRINT_PAGESIZE(3, 800, 100, ""), f.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", b), f.PRINT(), s.close()
            }, s.print1 = function (a) {
                for (var b = '<div><div><h3 style="font-size:20px">欢迎光临</h3><h3 style="font-size:20px">购买商品消费小票</h3>操作员：' + s.admin + '</h3></div><span>**********************************</span><div><div style="border-bottom: 1px solid #DADADA;"><table style="width: 100%;"><thead><tr><td width="50%">商品名称</td><td width="20%">数量</td><td width="30%">单价</td></tr></thead>', c = 0; c < s.buyProduct.length; c++) b = 0 == c ? b + "<tbody><tr><td>" + s.buyProduct[c].name + "</td><td>" + s.buyProduct[c].num + "</td><td>" + s.buyProduct[c].price + "</td></tr>" : b + "<tr><td>" + s.buyProduct[c].name + "</td><td>" + s.buyProduct[c].num + "</td><td>" + s.buyProduct[c].price + "</td></tr>", c == s.buyProduct.length - 1 && (b = b + "<tr><td>合计</td><td>" + s.total + "</td><td></td></tr></tbody></table></div><span>**********************************</span>");
                b = b + "<div>消费方式:" + a + "</div>", b = b + "<div>消费日期:" + s.getNowFormatDate(new Date) + "</div><span>**********************************</span><div>客户签名:</div>";
                var d = getLodop();
                d.PRINT_INIT(""), d.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), d.SET_PRINTER_INDEXA(-1), d.SET_PRINT_PAGESIZE(3, 800, 100, ""), d.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", b), d.PRINT(), s.close()
            }, s.auth_codeCreate = function (a) {
                if (s.promptWARN = !0, s.wordWARN = "支付中", 13 == a.keyCode) switch (s.buyPayment) {
                case "wx":
                    var b = {
                        shopProductArr: s.brr,
                        auth_code: s.auth_code,
                        spbill_create_ip: "0.0.0.0"
                    };
                    j.buyWx(b, function (a) {
                        s.showAuth_codeBox = !1, s.promptOK = !0, s.promptWARN = !1, s.wordOK = "购买成功", clearInterval(s.setIntervalId), s.print1("微信支付"), o(function () {
                            s.promptOK = !1
                        }, 1e3)
                    }, function (a) {
                        s.promptERR = !0, s.promptWARN = !1, clearInterval(s.setIntervalId), s.wordERR = a.data.data
                    });
                    break;
                case "alipay":
                    var b = {
                        auth_code: s.auth_code,
                        shopProductArr: s.brr
                    };
                    l.payProduct(b, function (a) {
                        s.showAuth_codeBox = !1, s.promptOK = !0, s.promptWARN = !1, s.wordOK = "购买成功", clearInterval(s.setIntervalId), s.print1("支付宝支付"), o(function () {
                            s.promptOK = !1
                        }, 1e3)
                    }, function (a) {
                        s.promptWARN = !1, s.promptERR = !0, clearInterval(s.setIntervalId), s.wordERR = a.data.data + ",请更新支付码再支付"
                    });
                    break;
                case "member":
                    ;
                    n.index({
                        id: "today"
                    }, function (a) {
                        r = a.data;
                        var b = t(s.auth_code);
                        if (b) {
                            var c = {
                                _member: b,
                                payment: "member",
                                shopProductArr: s.brr
                            };
                            j.buyProduct(c, function (a) {
                                s.showAuth_codeBox = !1, s.promptWARN = !1, s.promptOK = !0, o(function () {
                                    s.promptOK = !1
                                }, 1e3), s.wordOK = "购买成功", i.index({
                                    id: b
                                }, function (a) {
                                    s.members = a.data.member, s.print("余额支付")
                                }, function (a) {
                                    "找不到对象：member" == a.data.data && (s.showMemberInfo = !1, s.promptERR = !0, s.wordERR = "会员不存在")
                                })
                            }, function (a) {
                                s.promptWARN = !1, s.promptERR = !0, s.wordERR = a.data.data
                            })
                        } else c = {
                            cardNo: s.auth_code
                        }, i.indexBycard(c, function (a) {
                            s.members = a.data.member;
                            var b = {
                                _member: a.data.member._id,
                                payment: "member",
                                shopProductArr: s.brr
                            };
                            j.buyProduct(b, function (a) {
                                s.showAuth_codeBox = !1, s.promptWARN = !1, s.promptOK = !0, s.wordOK = "购买成功", s.print("余额支付"), o(function () {
                                    s.promptOK = !1
                                }, 1e3)
                            }, function (a) {
                                s.promptWARN = !1, s.promptERR = !0, s.wordERR = a.data.data
                            })
                        }, function (a) {
                            s.promptERR = !0, s.wordERR = "会员不存在"
                        })
                    })
                }
            }, s.shut = function () {
                s.showAuth_codeBox = !1, clearInterval(s.setIntervalId), s.brr = [], document.getElementById("auth_code").blur()
            }, s.create = function () {
                s.brr = [];
                for (var a = 0; a < s.buyProduct.length; a++) {
                    var b = {
                        _shopProduct: s.buyProduct[a]._id,
                        quantity: 1 * s.buyProduct[a].num
                    };
                    s.brr.push(b)
                }
                switch (s.buyPayment) {
                case "wx":
                case "alipay":
                case "member":
                    s.showAuth_codeBox = !0, s.setIntervalId = setInterval(function () {
                        document.getElementById("auth_code").focus()
                    }, 100);
                    break;
                case "cash":
                    var c = {
                        shopProductArr: s.brr,
                        payment: "cash"
                    };
                    j.buyProduct(c, function (a) {
                        s.promptWARN = !1, s.promptOK = !0, s.wordOK = "购买成功", s.print1("现金支付"), o(function () {
                            s.promptOK = !1
                        }, 1e3)
                    }, function (a) {
                        s.promptWARN = !1, s.promptERR = !0, s.wordERR = a.data.data
                    })
                }
            }, s.checkMember = function (a, b, c) {
                if (!s.memberTelOrCard && !c) return s.promptERR = !0, void(s.wordERR = "请填写会员卡号/手机号");
                if (c) i.show({
                    id: c
                }, function (a) {
                    s.members = a.data.member, s.showMemberInfo = !0, s._member = s.members._id
                }, function (a) {});
                else {
                    var d = {};
                    n.index({
                        id: "today"
                    }, function (c) {
                        r = c.data;
                        var e = t(s.memberTelOrCard);
                        e ? i.index({
                            id: e
                        }, function (c) {
                            s.members = c.data.member, s._member = e, s.showMemberInfo = !0, s.isReal = c.data.member.isReal, s.name = c.data.member.name, s.phone = c.data.member.tel, a && s.print(b)
                        }, function (a) {
                            "找不到对象：member" == a.data.data && (s.showMemberInfo = !1, s.promptERR = !0, s.wordERR = "会员不存在")
                        }) : (d = {
                            cardNo: s.memberTelOrCard
                        }, i.indexBycard(d, function (c) {
                            s.members = c.data.member, s._member = s.members._id, s.showMemberInfo = !0, s.isReal = c.data.member.isReal, s.name = c.data.member.name, s.phone = c.data.member.tel, a && s.print(b)
                        }, function (a) {
                            "找不到对象：member" == a.data.data && (s.showMemberInfo = !1, s.promptERR = !0, s.wordERR = "会员不存在")
                        }))
                    })
                }
            }, s.resert = function () {
                s.memberTelOrCard = "", s.members = null, document.getElementById("code").focus()
            }, s.getShopProduct = function () {
                s.pName ? s.selectFlag = !0 : s.selectFlag = !1;
                var a = {
                    mix: s.pName
                };
                j.index(a, function (a) {
                    s.products = a.data.shopProducts
                }, function (a) {})
            }, s.refund = function () {
                var a = {
                    total: 1 * s.refundPrice
                };
                j.refund({
                    controller: s.rId
                }, a, function (a) {
                    s.close(), s.promptOK = !0, o(function () {
                        s.promptOK = !1
                    }, 1e3), s.wordOK = "退款成功", s.getRecord()
                }, function (a) {})
            }, s.pageChanged = function () {
                s.getRecord()
            }, s.getRecord = function () {
                o(function () {
                    s.startDateFlag = !1, s.closeDateFlag = !1;
                    var a = {
                        page: s.pagination.page,
                        itemsPerPage: s.pagination.itemsPerPage,
                        statuses: ["buyShopProduct", "refundShopProduct"],
                        startDate: s.startDate.getTime(),
                        endDate: s.closeDate.getTime()
                    };
                    s.searchProductName && (a = _.merge(a, {
                        shopProductName: s.searchProductName
                    })), k.index(a, function (a) {
                        s.records = a.data.records, s.recordTotal = 0, _.each(s.records, function (a) {
                            "refundShopProduct" == a.status ? s.recordTotal = s.recordTotal - a.cost : "buyShopProduct" == a.status && (s.recordTotal = s.recordTotal + a.cost)
                        }), s.recordTotal = s.recordTotal.toFixed(2);
                        var b = a.data.count;
                        s.pagination.totalItems = b, s.pagination.numPages = b / s.itemsPerPage
                    })
                }, 100)
            }, s.addListByDown = function (a) {
                if (13 == a.keyCode) {
                    var b = {
                        mix: s.pName
                    };
                    j.index(b, function (a) {
                        s.products = a.data.shopProducts, s.products && 1 == s.products.length && s.products[0].isUsed && s.add(s.products[0])
                    }, function (a) {})
                }
            }, s.addList = function () {
                s.pName ? s.selectFlag = !0 : s.selectFlag = !1;
                var a = {
                    mix: s.pName
                };
                j.index(a, function (a) {
                    s.products = a.data.shopProducts, s.products && 1 == s.products.length && s.products[0].isUsed && s.add(s.products[0])
                }, function (a) {})
            }, s.getPrByCode = function () {}, s.changeNum = function (a, b) {
                if (a.num = 1 * a.num, "add" == b) a.num = a.num + 1, s.total = s.total + 1 * a.price, a.tot = Math.floor(a.num * a.price * 100) / 100;
                else if (s.total = s.total - 1 * a.price, s.arr = [], 1 == a.num) {
                    for (var c = 0; c < s.buyProduct.length; c++) a._id != s.buyProduct[c]._id && s.arr.push(s.buyProduct[c]);
                    s.buyProduct = s.arr
                } else a.num = a.num - 1, a.tot = Math.floor(a.num * a.price * 100) / 100;
                s.total = s.dealNumber(s.total)
            }, s.dealNumber = function (a, b) {
                var c = a.toFixed(3);
                return b ? c.substring(0, c.lastIndexOf(".") + 3) : parseFloat(c.substring(0, c.lastIndexOf(".") + 3))
            }, s.calPrice = function (a) {
                s.total = 0;
                for (var b = 0; b < s.buyProduct.length; b++) s.buyProduct[b]._id == a._id ? s.buyProduct[b].num && (s.total = s.total + s.buyProduct[b].num * s.buyProduct[b].price, s.buyProduct[b].tot = Math.floor(s.buyProduct[b].num * s.buyProduct[b].price * 100) / 100) : s.total = s.total + s.buyProduct[b].num * s.buyProduct[b].price;
                s.total = s.dealNumber(s.total)
            }, s.canPrice = function (a) {
                if (s.total = 0, s.arr = [], !a.num || 0 == a.num) {
                    for (var b = 0; b < s.buyProduct.length; b++) a._id != s.buyProduct[b]._id && s.arr.push(s.buyProduct[b]);
                    s.buyProduct = s.arr
                }
                for (var b = 0; b < s.buyProduct.length; b++) s.total = s.total + s.buyProduct[b].num * s.buyProduct[b].price;
                s.total = s.dealNumber(s.total)
            }, s.add = function (a) {
                s.selectFlag = !1, s.pName = "";
                for (var b = 0; b < s.buyProduct.length; b++)
                    if (s.buyProduct[b]._id == a._id) return void s.changeNum(s.buyProduct[b], "add");
                s.total = s.total + 1 * a.price, a.num = 1, a.tot = Math.floor(a.num * a.price * 100) / 100, s.buyProduct.push(a), s.total = s.dealNumber(s.total)
            }, s.choosePayment = function (a) {
                _.each(s.paymentArr, function (a) {
                    a.image = "singleChoose_imageNo"
                }), a.image = "singleChoose_imageYes", s.buyPayment = a.value, "alipay" == s.buyPayment || "wx" == s.buyPayment ? s.showCodeBox = !0 : s.showCodeBox = !1
            }, s.choosePayment2 = function (a) {
                _.each(s.paymentArr2, function (a) {
                    a.image = "singleChoose_imageNo"
                }), a.image = "singleChoose_imageYes", s.buyPayment = a.value, "alipay" == s.buyPayment || "wx" == s.buyPayment ? s.showCodeBox = !0 : s.showCodeBox = !1
            }, s.chooseRefund = function (a) {
                _.each(s.refundArr, function (a) {
                    a.image = "singleChoose_imageNo"
                }), a.image = "singleChoose_imageYes", s.refund = a.value
            }, s.changeTitle = function (a) {
                switch (s.titleState = "", a) {
                case "sale":
                    s.titleState = "sale", f.go("org-sell.sale", {
                        state: "sale"
                    });
                    break;
                default:
                    s.titleState = "record", f.go("org-sell.record", {
                        state: "record"
                    })
                }
                w()
            };
        var t = function (a) {
                var b = a.split("|");
                if (3 != b.length) return !1;
                var a = b[0],
                    c = b[1].split(""),
                    d = b[2],
                    e = d,
                    f = parseInt(r / 6e4).toString().split("");
                if (c.length < f.length) return !1;
                for (var g = 0; g < f.length; g++) d = d.replace(f[g], c[g]);
                return d == a ? e : !1
            },
            u = function () {
                e.get({}, function (a) {
                    s.admin = a.data.user.name
                }, function () {})
            };
        s.choose = function (a) {
            a.select = !0, s.choosedCardFlag = !1, s.cardId = a._id, s.cardName = a.name + "(" + a.price + "元)", s.realPrice = a.realPrice
        }, s.chooseType = function (a) {
            for (var b = 0; b < s.types.length; b++) s.types[b].select = !1;
            a.select = !0, s.choosedTypeFlag = !1, s.typeName = a.name
        };
        var v = function () {
            var a = {
                state: "all",
                _org: s._id,
                sortBy: "realPrice"
            };
            m.index(a, function (a) {
                a.data.cards.length > 0 && (a.data.cards[0].select = !0, s.cardName = a.data.cards[0].name + "(" + a.data.cards[0].price + "元)", s.cardId = a.data.cards[0]._id, a.data.cards[0].flag = !0, s.realPrice = a.data.cards[0].realPrice), s.cards = a.data.cards
            })
        };
        s.finish = function () {
            return s.needFlag && !s.cardNum ? void(s.cardFlag = !0) : (s.payFlag = !0, s.defindFlag = !1, void(s.moneyFlag = !0))
        };
        s.waySelect = function (a) {
            s.chargeVenue = "", "money" == a ? (s.moneySelect = !0, s.cardSelect = !1, s.speSelect = !1) : "card" == a ? (s.moneySelect = !1, s.cardSelect = !0, s.speSelect = !1) : "speCard" == a && (s.moneySelect = !1, s.cardSelect = !1, s.speSelect = !0, p.index({
                isUsed: !0
            }, function (a) {
                s.venues_clone = a.data.venues, _.each(s.venues_clone, function (a) {
                    a.image = "singleChoose_imageNo2"
                }), s.chargeVenue = s.venues_clone[0], s.venues_clone[0].image = "singleChoose_imageYes2"
            }, function () {}))
        }, s.openShowRechargeBox = function (a) {
            s.needIdCard = a, s.continueFlag = !0, s.paymentArr2 = [{
                name: "支付宝",
                value: "alipay",
                image: "singleChoose_imageYes"
            }, {
                name: "微信",
                value: "wx",
                image: "singleChoose_imageNo"
            }, {
                name: "现金",
                value: "cash",
                image: "singleChoose_imageNo"
            }, {
                name: "支票",
                value: "check",
                image: "singleChoose_imageNo"
            }], s.buyPayment = "alipay", s.cardName = s.cards[0].name + "(" + s.cards[0].price + "元)", s.cardId = s.cards[0]._id, s.moneySelect = !0, s.cardSelect = !1, s.speSelect = !1, s.chargeCardNum = "", s.chargeCardPassword = ""
        }, s.chooseChargeVenue = function (a) {
            s.chargeVenue ? s.chargeVenue._id == a._id ? (s.chargeVenue.image = "singleChoose_imageNo2", s.chargeVenue = "") : (s.chargeVenue.image = "singleChoose_imageNo2", s.chargeVenue = a, s.chargeVenue.image = "singleChoose_imageYes2") : (s.chargeVenue = a, s.chargeVenue.image = "singleChoose_imageYes2")
        };
        var w = function () {
            s.getRecord(), u(), v()
        };
        s.searchProduct = function () {
            s.getRecord()
        }, s.enterCheck = function (a) {
            13 == a.keyCode && s.checkMember()
        }, w()
    }
    angular.module("fieldApp").controller("OrgSellCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "ShopProduct", "Record", "Alipay", "Card", "Time", "$timeout", "Venue", "Tucard"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this;
        j.identity = "场馆管理员", j.state = !0, j.selectRole = "所有角色类型", j.selectRoleFlag = !1, j.codeFlag = !1, j.role = "", j.arr = [], j.marginTop = {
            "margin-top": "38px"
        }, j.checkTypes = [{
            name: "普通柜员",
            value: "normal"
        }, {
            name: "游泳柜员",
            value: "swim"
        }], j.checkTypeName = "普通柜员", j._checkType = "normal", j.close = function () {
            j.addFlag = !1, j.chooseIdentityFlag = !1, j.state = !0, j.accountFlag = !1, j.passwordFlag = !1, j.nameFlag = !1, j.sureFlag = !1, j.telFlag = !1, j.account = "", j.password = "", j.name = "", j.editFlag = !1, j.tel = "", l(), j.arr = [], j.cvFlag = !1, j.staffToVenue = !1, j.showChooseCheckTypeBox = !1
        }, j.page = 1, j.itemsPerPage = 10, j.pagination = {
            page: j.page,
            itemsPerPage: j.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, j.showEdit = function (a) {
            j.editFlag = !0, j.account = a.account, j.password = a.showPassword, j.name = a.name, j.tel = a.tel, j.uId = a._id, j.arr = [], j._staffToVenueId = a._venue ? a._venue : j.venues[0]._id;
            var b = _.findWhere(j.venues, {
                _id: j._staffToVenueId
            });
            j.venueName = b.name, j.igFlag = !1, "前台柜员" == a.role ? (j.state = "checkStand", j.cvFlag = !0, j.staffToVenue = !0, j.igFlag = !0, j.codeFlag = a.ignoreCode, j.checkTypeName = "normal" == a.type ? "普通柜员" : "游泳柜员", j._checkType = a.type) : "场工" == a.role ? (j.state = "fieldWorker", j.cvFlag = !0, j.staffToVenue = !0) : "场馆管理员" == a.role ? (j.state = "fieldManger", j.cvFlag = !0, j.staffToVenue = !0) : "卡务管理员" == a.role ? (j.state = "cardManager", j.cvFlag = !0, j.staffToVenue = !1) : "财务管理员" == a.role && (j.state = "financeManager", j.cvFlag = !0, j.staffToVenue = !1);
            for (var c = 0; c < a.venues.length; c++)
                for (var d = 0; d < j.venues.length; d++) a.venues[c]._id == j.venues[d]._id && (j.venues[d].select = !0, j.arr.push(j.venues[d]))
        }, j.edit = function () {
            j.cArr = [];
            for (var a = 0; a < j.arr.length; a++) j.cArr.push(j.arr[a]._id);
            "checkStand" == j.state ? j.ignoreCode = j.codeFlag : j.ignoreCode = !1;
            var b = {
                account: j.account,
                name: j.name,
                venues: j.cArr,
                tel: j.tel,
                _venue: j._staffToVenueId,
                ignoreCode: j.ignoreCode
            };
            "checkStand" == j.state && (b = _.merge(b, {
                type: j._checkType
            })), e.update({
                id: j.uId
            }, b, function (a) {
                var b = {
                    newPassword: j.password
                };
                e.updatePassword({
                    id: j.uId
                }, b, function (a) {
                    j.close(), k()
                }, function () {})
            }, function (a) {
                j.promptERR = !0, j.wordERR = a.data.data
            })
        }, j["delete"] = function (a) {
            e["delete"]({
                id: j.uId
            }, function (a) {
                j.close(), k()
            }, function () {})
        }, j.showSelect = function (a) {
            switch (a) {
            case "identity":
                j.chooseIdentityFlag = !j.chooseIdentityFlag;
                break;
            case "role":
                j.selectRoleFlag = !j.selectRoleFlag
            }
        }, j.chooseRole = function (a, b) {
            j.selectRoleFlag = !1, j.selectRole = b, j.role = a, k()
        }, j.chooseIdentity = function (a) {
            switch (j.chooseIdentityFlag = !1, j.state = a, a) {
            case "fieldManager":
                j.identity = "场馆管理员", j.cvFlag = !0, j.staffToVenue = !0, j.igFlag = !1;
                break;
            case "checkStand":
                j.identity = "前台柜员", j.cvFlag = !0, j.staffToVenue = !0, j.igFlag = !0;
                break;
            case "fieldWorker":
                j.identity = "场工", j.cvFlag = !0, j.staffToVenue = !0, j.igFlag = !1;
                break;
            case "cardManager":
                j.identity = "卡务管理员", j.cvFlag = !0, j.staffToVenue = !1, j.igFlag = !1;
                break;
            case "financeManager":
                j.identity = "财务管理员", j.cvFlag = !0, j.staffToVenue = !1, j.igFlag = !1
            }
        }, j.judge = function (a) {
            switch (a) {
            case "account":
                j.account ? j.accountFlag = !1 : j.accountFlag = !0;
                break;
            case "password":
                j.password ? j.passwordFlag = !1 : j.passwordFlag = !0;
                break;
            case "name":
                j.name ? j.nameFlag = !1 : j.nameFlag = !0
            }
        }, j.finish = function () {
            if (j.account ? j.accountFlag = !1 : j.accountFlag = !0, j.password ? j.passwordFlag = !1 : j.passwordFlag = !0, j.name ? j.nameFlag = !1 : j.nameFlag = !0, j.tel ? j.telFlag = !1 : j.telFlag = !0, !(j.accountFlag || j.passwordFlag || j.nameFlag || j.telFlag)) {
                j.cArr = [];
                for (var a = 0; a < j.arr.length; a++) j.cArr.push(j.arr[a]._id);
                "checkStand" == j.state ? j.ignoreCode = j.codeFlag : j.ignoreCode = !1;
                var b = {
                    account: j.account,
                    password: j.password,
                    name: j.name,
                    venues: j.cArr,
                    tel: j.tel,
                    _venue: j._staffToVenueId || null,
                    ignoreCode: j.ignoreCode
                };
                "checkStand" == j.state && (b = _.merge(b, {
                    type: j._checkType
                })), "fieldManager" == j.state ? e.createField(b, function (a) {
                    j.close(), k()
                }, function (a) {
                    j.promptERR = !0, j.wordERR = a.data.data
                }) : "fieldWorker" == j.state ? e.createWorker(b, function (a) {
                    j.close(), k()
                }, function (a) {
                    j.promptERR = !0, j.wordERR = a.data.data
                }) : "checkStand" == j.state ? e.createCheck(b, function (a) {
                    j.close(), k()
                }, function (a) {
                    j.promptERR = !0, j.wordERR = a.data.data
                }) : "cardManager" == j.state ? e.createCard(b, function (a) {
                    j.close(), k()
                }, function (a) {
                    j.promptERR = !0, j.wordERR = a.data.data
                }) : "financeManager" == j.state && e.createFinance(b, function (a) {
                    j.close(), k()
                }, function (a) {
                    j.promptERR = !0, j.wordERR = a.data.data
                })
            }
        }, j.pageChanged = function () {
            k()
        };
        var k = function () {
                var a = {
                    role: j.role,
                    page: j.pagination.page,
                    itemsPerPage: j.pagination.itemsPerPage
                };
                e.index(a, function (a) {
                    j.users = a.data.users, _.each(j.users, function (a) {
                        switch (a.role) {
                        case "organization":
                            a.role = "超级管理员";
                            break;
                        case "fieldManager":
                            a.role = "场馆管理员";
                            break;
                        case "checkStand":
                            a.role = "前台柜员";
                            break;
                        case "fieldWorker":
                            a.role = "场工";
                            break;
                        case "cardManager":
                            a.role = "卡务管理员";
                            break;
                        case "financeManager":
                            a.role = "财务管理员"
                        }
                    });
                    var b = a.data.count;
                    j.pagination.totalItems = b, j.pagination.numPages = b / j.itemsPerPage
                }, function () {})
            },
            l = function () {
                i.index({}, function (a) {
                    j.venues = a.data.venues;
                    for (var b = 0; b < j.venues.length; b++) j.venues[b].select = !1;
                    j.venueName = j.venues[0].name, j._staffToVenueId = j.venues[0]._id
                }, function (a) {})
            };
        j.chooseVenueName = function (a) {
            j.showChooseVenueBox = !1, j.venueName = a.name, j._staffToVenueId = a._id
        }, j.chooseCheckTypeName = function (a) {
            j.showChooseCheckTypeBox = !1, j.checkTypeName = a.name, j._checkType = a.value
        }, j.chooseVenue = function (a) {
            a.select = !a.select, j.arr = [];
            for (var b = 0; b < j.venues.length; b++) j.venues[b].select && j.arr.push(j.venues[b])
        };
        var m = function () {
            k(), l()
        };
        m()
    }
    angular.module("fieldApp").controller("OrgStaffCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Venue"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this,
            k = function () {
                j.page = 1, j.itemsPerPage = 10, j.pagination = {
                    page: j.page,
                    itemsPerPage: j.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            l = function () {
                j.startDate = new Date((new Date).setDate(1)), j.closeDate = new Date
            },
            m = function () {
                var a = {
                    page: j.pagination.page,
                    itemsPerPage: j.pagination.itemsPerPage,
                    startDate: j.startDate.getTime(),
                    endDate: j.closeDate.getTime(),
                    status: "purchase"
                };
                j.searchProductName && (a = _.merge(a, {
                    mix: j.searchProductName
                })), j.orderNo && (a = _.merge(a, {
                    orderNo: j.orderNo
                })), i.index(a, function (a) {
                    j.orders = a.data.records, _.each(j.orders, function (a) {
                        a.cost = dealNumber(100 * a.purchasePrice) * a.quantity / 100, a.isCancel ? (a.state = "已撤销", a.canChange = !1) : a.isCheck ? (a.state = "已确认", a.canChange = !1) : (a.state = "等待确认", a.canChange = !0)
                    });
                    var b = a.data.count;
                    j.pagination.totalItems = b, j.pagination.numPages = b / j.itemsPerPage
                })
            },
            n = function () {
                k(), l(), m()
            };
        j.closeDateBox = function () {
            j.startDateFlag = !1, j.closeDateFlag = !1, setTimeout(function () {
                m()
            }, 100)
        }, j.check = function () {
            k(), m()
        }, j.resert = function () {
            j.orderNo = "", j.searchProductName = "", m()
        }, j.pageChanged = function () {
            m()
        }, j.enterCheck = function (a) {
            13 == a.keyCode && j.checkMember()
        }, j.closePrompt = function () {
            j.promptERR = !1, j.promptOK = !1, j.promptWARN = !1
        }, n()
    }
    angular.module("fieldApp").controller("OrgPurchaseRecordCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "PurchaseRecord"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this,
            l = function () {
                k.chooseAll = "manyChoose_imageYes2", k.product = {
                    _shopBasic: "",
                    showName: "",
                    name: "",
                    misCode: "",
                    quantity: "",
                    purchasePrice: "",
                    price: 0,
                    _supply: "",
                    supplyName: ""
                }, k.products = [], k.showProducts = [], k.commiteCount = 0, k.workerName = "请选择柜员"
            },
            m = function () {
                k.showWorkersBox = !1
            },
            n = function () {
                l(), o()
            },
            o = function () {
                e.index({
                    role: "checkStand"
                }, function (a) {
                    k.workers = a.data.users
                }, function () {})
            };
        k.checkProduct = function () {
            i.index({
                mix: k.product.showName
            }, function (a) {
                k.products = a.data.shopBasics, k.products.length > 0 && (k.showProductsBox = !0)
            }, function () {})
        }, k.chooseProduct = function (a) {
            k.showProductsBox = !1, k.product._shopBasic = a._id, k.product.showName = a.name, k.product.name = a.name, k.product.misCode = a.misCode, k.product._supply = a._supply, k.product.supplyName = a.supplyName, k.product.price = a.price
        }, k.resert = function () {
            k.product = {
                _shopBasic: "",
                showName: "",
                name: "",
                misCode: "",
                quantity: "",
                purchasePrice: "",
                price: 0,
                _supply: "",
                supplyName: ""
            }
        }, k.closePrompt = function () {
            k.promptERR = !1, k.promptOK = !1, k.promptWARN = !1
        }, k.addToForm = function () {
            if (isNaN(k.product.quantity) || isNaN(k.product.purchasePrice)) return k.promptERR = !0, void(k.wordERR = "请输入数字");
            var a = {
                _shopBasic: k.product._shopBasic,
                name: k.product.name,
                misCode: k.product.misCode,
                quantity: parseFloat(k.product.quantity),
                purchasePrice: parseFloat(k.product.purchasePrice),
                price: parseFloat(k.product.price),
                _supply: k.product._supply,
                supplyName: k.product.supplyName,
                cost: dealNumber(k.product.purchasePrice * k.product.quantity),
                image: "manyChoose_imageYes2"
            };
            k.showProducts.push(a), k.commiteCount++, k.resert()
        }, k.chooseAllDoc = function () {
            k.commiteCount < k.showProducts.length ? (k.commiteCount = k.showProducts.length, k.chooseAll = "manyChoose_imageYes2", _.each(k.showProducts, function (a) {
                a.image = "manyChoose_imageYes2"
            })) : (k.commiteCount = 0, k.chooseAll = "manyChoose_imageNo2", _.each(k.showProducts, function (a) {
                a.image = "manyChoose_imageNo2"
            }))
        }, k.chooseDoc = function (a) {
            "manyChoose_imageNo2" == a.image ? (a.image = "manyChoose_imageYes2", k.commiteCount++) : (a.image = "manyChoose_imageNo2", k.commiteCount--), k.commiteCount < k.showProducts.length ? k.chooseAll = "manyChoose_imageNo2" : k.chooseAll = "manyChoose_imageYes2"
        }, k.chooseWorker = function (a) {
            k.workerName = a.name, k._toWorker = a._id, k.chooseWorkerFlag = !1
        }, k.create = function () {
            var b = [];
            _.each(k.showProducts, function (a) {
                "manyChoose_imageYes2" == a.image && b.push(a)
            }), j.enter({}, {
                shopArr: b
            }, function () {
                j.transfer({}, {
                    _toWorker: k._toWorker
                }, function () {
                    m(), l(), k.promptOK = !0, k.wordOK = "进货成功", setTimeout(function () {
                        a.$apply(function () {
                            k.promptOK = !1
                        })
                    }, 1e3)
                }, function () {})
            }, function (a) {
                console.log(a), k.promptERR = !0, k.wordERR = a.data.data
            })
        }, k.close = function () {
            m(), l()
        }, k.enterCheck = function (a) {
            13 == a.keyCode && k.checkProduct()
        }, k.closePrompt = function () {
            k.promptERR = !1, k.promptOK = !1, k.promptWARN = !1
        }, n()
    }
    angular.module("fieldApp").controller("OrgPurchaseCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "ShopBasic", "ShopProduct"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this,
            k = function () {
                j.page = 1, j.itemsPerPage = 10, j.pagination = {
                    page: j.page,
                    itemsPerPage: j.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            l = function () {
                j.startDate = new Date((new Date).setDate(1)), j.closeDate = new Date
            },
            m = function () {
                var a = {
                    page: j.pagination.page,
                    itemsPerPage: j.pagination.itemsPerPage,
                    startDate: j.startDate.getTime(),
                    endDate: j.closeDate.getTime(),
                    status: "return"
                };
                j.searchProductName && (a = _.merge(a, {
                    mix: j.searchProductName
                })), j.orderNo && (a = _.merge(a, {
                    orderNo: j.orderNo
                })), i.index(a, function (a) {
                    j.orders = a.data.records, _.each(j.orders, function (a) {
                        a.cost = dealNumber(100 * a.purchasePrice) * a.quantity / 100, a.isCancel ? (a.state = "已撤销", a.canChange = !1) : a.isCheck ? (a.state = "已确认", a.canChange = !1) : (a.state = "等待确认", a.canChange = !0)
                    });
                    var b = a.data.count;
                    j.pagination.totalItems = b, j.pagination.numPages = b / j.itemsPerPage
                })
            },
            n = function () {
                k(), l(), m()
            };
        j.closeDateBox = function () {
            j.startDateFlag = !1, j.closeDateFlag = !1, setTimeout(function () {
                m()
            }, 100)
        }, j.check = function () {
            k(), m()
        }, j.resert = function () {
            j.orderNo = "", j.searchProductName = "", m()
        }, j.pageChanged = function () {
            m()
        }, j.enterCheck = function (a) {
            13 == a.keyCode && j.checkMember()
        }, j.closePrompt = function () {
            j.promptERR = !1, j.promptOK = !1, j.promptWARN = !1
        }, n()
    }
    angular.module("fieldApp").controller("OrgReturnRecordCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "PurchaseRecord"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this,
            k = function () {
                j.page = 1, j.itemsPerPage = 10, j.pagination = {
                    page: j.page,
                    itemsPerPage: j.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            l = function () {
                j.startDate = new Date((new Date).setDate(1)), j.closeDate = new Date(Date.now() - 864e5)
            },
            m = function () {
                var a = {
                    page: j.pagination.page,
                    itemsPerPage: j.pagination.itemsPerPage,
                    startDate: j.startDate.getTime(),
                    endDate: j.closeDate.getTime()
                };
                i.index(a, function (a) {
                    j.forms = a.data.shopforms;
                    var b = a.data.count;
                    j.pagination.totalItems = b, j.pagination.numPages = b / j.itemsPerPage
                })
            },
            n = function () {
                k(), l(), m()
            };
        j.closeDateBox = function () {
            j.startDateFlag = !1, j.closeDateFlag = !1, setTimeout(function () {
                m()
            }, 100)
        }, j.pageChanged = function () {
            m()
        }, j["export"] = function () {
            var a = {
                all: "all",
                startDate: j.startDate.getTime(),
                endDate: j.closeDate.getTime()
            };
            j.dateName = "", j.dateName += j.startDate.getFullYear() + "年", j.dateName += j.startDate.getMonth() + 1 > 9 ? j.startDate.getMonth() + 1 + "月" : "0" + (j.startDate.getMonth() + 1) + "月", j.dateName += j.startDate.getDate() > 9 ? j.startDate.getDate() + "日-" : "0" + j.startDate.getDate() + "日-", j.dateName += j.closeDate.getFullYear() + "年", j.dateName += j.closeDate.getMonth() + 1 > 9 ? j.closeDate.getMonth() + 1 + "月" : "0" + (j.closeDate.getMonth() + 1) + "月", j.dateName += j.closeDate.getDate() > 9 ? j.closeDate.getDate() + "日" : "0" + j.closeDate.getDate() + "日", i.index(a, function (a) {
                j.exportforms = a.data.shopforms;
                var b = j.dateName + "的库存盘存表";
                setTimeout(function () {
                    execl1("alltable", b)
                }, 100)
            })
        }, j.closePrompt = function () {
            j.promptERR = !1, j.promptOK = !1, j.promptWARN = !1
        }, n()
    }
    angular.module("fieldApp").controller("OrgShopFormCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "ShopForm"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this,
            k = function () {
                j.page = 1, j.itemsPerPage = 10, j.pagination = {
                    page: j.page,
                    itemsPerPage: j.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            l = function () {
                j.showWorkerName = "选择柜员", j.searchWorker = "", j.returnQuantity = ""
            },
            m = function () {
                j.showReturnBox = !1
            },
            n = function () {
                var a = {
                    page: j.pagination.page,
                    itemsPerPage: j.pagination.itemsPerPage
                };
                if (j.searchWorker) switch (j.searchWorker) {
                case "all":
                    break;
                case "no":
                    a = _.merge(a, {
                        state: "no"
                    });
                    break;
                default:
                    a = _.merge(a, {
                        _worker: j.searchWorker
                    })
                }
                j.searchProductName && (a = _.merge(a, {
                    mix: j.searchProductName
                })), i.index(a, function (a) {
                    j.products = a.data.shopProducts, _.each(j.products, function (a) {
                        switch (a.status) {
                        case "sale":
                            a.status = "售卖中";
                            break;
                        case "return":
                            a.status = "报废中";
                            break;
                        case "transfer":
                            a.status = "交接中"
                        }
                    });
                    var b = a.data.count;
                    j.pagination.totalItems = b, j.pagination.numPages = b / j.itemsPerPage
                })
            },
            o = function () {
                e.index({
                    role: "checkStand"
                }, function (a) {
                    j.workers = [{
                        name: "全部",
                        _id: "all"
                    }, {
                        name: "暂无柜员",
                        _id: "no"
                    }].concat(a.data.users)
                }, function () {})
            },
            p = function () {
                k(), l(), n(), o()
            };
        j.chooseWorkerName = function (a) {
            j.showChooseWorkerBox = !1, j.showWorkerName = a.name, j.searchWorker = a._id, n()
        }, j.openShowReturnBox = function (a) {
            j._returnProduct = a, j.showReturnBox = !0
        }, j.check = function () {
            if (isNaN(j.returnQuantity)) return j.promptERR = !0, void(j.wordERR = "请输入数字");
            var b = [{
                _shopProduct: j._returnProduct,
                returnQuantity: parseFloat(j.returnQuantity)
            }];
            i.returnGood({}, {
                shopArr: b
            }, function (b) {
                i.returnCheck({}, {
                    orderIds: [b.data.order._id]
                }, function () {
                    l(), m(), j.promptOK = !0, j.wordOK = "报废确认成功", n(), setTimeout(function () {
                        a.$apply(function () {
                            j.promptOK = !1
                        })
                    }, 1e3)
                }, function () {})
            }, function (a) {
                console.log(a), j.promptERR = !0, j.wordERR = a.data.data
            })
        }, j.pageChanged = function () {
            n()
        }, j.searchProduct = function () {
            n()
        }, j.enterCheck = function (a) {
            13 == a.keyCode && n()
        }, j["export"] = function () {
            var a = {
                all: "all"
            };
            if (j.searchWorker) switch (j.searchWorker) {
            case "all":
                break;
            case "no":
                a = _.merge(a, {
                    state: "no"
                });
                break;
            default:
                a = _.merge(a, {
                    _worker: j.searchWorker
                })
            }
            j.searchProductName && (a = _.merge(a, {
                mix: j.searchProductName
            })), i.index(a, function (a) {
                j.exportProducts = a.data.shopProducts;
                var b = "柜员库存表";
                setTimeout(function () {
                    execl1("alltable", b)
                }, 100)
            })
        }, j.close = function () {
            m(), l()
        }, j.closePrompt = function () {
            j.promptERR = !1, j.promptOK = !1, j.promptWARN = !1
        }, p()
    }
    angular.module("fieldApp").controller("OrgStockCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "ShopProduct"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        function p() {
            r.timeout1 || (document.getElementById("auth_code").focus(), setTimeout(p, 100))
        }
        var q, r = this;
        document.getElementById("voucher").focus();
        var s = function (a) {
            var b = a.split("|");
            if (3 != b.length) return !1;
            var a = b[0],
                c = b[1].split(""),
                d = b[2],
                e = d,
                f = parseInt(q / 6e4).toString().split("");
            if (c.length < f.length) return !1;
            for (var g = 0; g < f.length; g++) d = d.replace(f[g], c[g]);
            return d == a ? e : !1
        };
        r.refund = function () {
            if (!r.oldNo) return r.promptERR = !0, void(r.wordERR = "请放入卡");
            var a = {
                _memberService: r._service,
                cost: 20
            };
            n.refundbind(a, function (a) {
                r.promptWARN = !1, r.promptOK = !0, r.clear()
            }, function (a) {
                r.promptERR = !0, r.wordERR = a.data.data, i(function () {
                    r.promptERR = !1
                }, 2e3)
            })
        }, r.setMemberService = function (a) {
            if (r.name = a.data.memberService.name, r.tel = a.data.memberService.tel, r.cardNo = a.data.memberService.serviceNo, r.cardDate = a.data.memberService.createDate, "date" == a.data.memberService.service.serviceType)
                if (a.data.memberService.endDate) {
                    (new Date).getTime() > new Date(a.data.memberService.endDate).getTime() && (r.promptERR = !0, r.wordERR = "已过期");
                    var b = new Date(a.data.memberService.endDate).getYear(),
                        c = new Date(a.data.memberService.endDate).getMonth(),
                        d = new Date(a.data.memberService.endDate).getDate();
                    b += 1900, 12 == c ? c = 1 : c += 1, r.leftTime = b + "-" + c + "-" + d
                } else {
                    var e = (new Date).getTime() + 3600 * a.data.memberService.service.value * 24e3,
                        b = new Date(e).getYear(),
                        c = new Date(e).getMonth(),
                        d = new Date(e).getDate();
                    b += 1900, 12 == c ? c = 1 : c += 1, r.leftTime = b + "-" + c + "-" + d
                } else r.leftTime = a.data.memberService.valueLeft;
            r.power = "任意用户", r._member = a.data.memberService._member, r.img = a.data.memberService.pic ? a.data.memberService.pic : "assets/images/p1.png", r.cardType = "date" == a.data.memberService.service.serviceType ? "时间卡" : "次数卡", r.limitTime = a.data.memberService.service.limit + "分钟", r._service = a.data.memberService._id, r.photoFlag = a.data.memberService.pic ? !0 : !1
        }, r.choosePayment = function (a) {
            _.each(r.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", r.payment = a.value
        }, document.onkeydown = function (b) {
            var c = b || window.event || arguments.callee.caller.arguments[0];
            if (c && 13 == c.keyCode) {
                if (r.showAuth_codeBox) {
                    switch (r.promptWARN = !0, r.showAuth_codeBox = !1, r.payment) {
                    case "alipay":
                        var d = {
                            _memberService: r._service,
                            cardNo: r.newNo,
                            auth_code: r.auth_code
                        };
                        o.payBind(d, function (a) {
                            r.promptWARN = !1, r.promptOK = !0, r.clear()
                        }, function (a) {
                            r.promptERR = !0, r.wordERR = a.data.data, i(function () {
                                r.promptERR = !1
                            }, 2e3)
                        });
                        break;
                    case "wx":
                        var d = {
                            _memberService: r._service,
                            cardNo: r.newNo,
                            auth_code: r.auth_code,
                            spbill_create_ip: "0.0.0.0"
                        };
                        l.wxPayBind(d, function (a) {
                            r.promptWARN = !1, r.promptOK = !0, r.clear()
                        }, function (a) {
                            r.promptERR = !0, r.wordERR = a.data.data, i(function () {
                                r.promptERR = !1
                            }, 2e3)
                        })
                    }
                    return
                }
                if (!r.oldNo || r.oldNo && "暂无信息" != r.cardType) return;
                a.$apply(function () {
                    m.index({
                        id: "today"
                    }, function (a) {
                        q = a.data;
                        var b = s(r.oldNo);
                        if (b) {
                            var c = {
                                id: b
                            };
                            n.idIndex(c, function (a) {
                                r.setMemberService(a)
                            }, function (a) {
                                r.clear(), r.promptERR = !0, r.wordERR = a.data.data, i(function () {
                                    r.promptERR = !1
                                }, 2e3)
                            })
                        } else {
                            var c = {
                                serviceNo: r.oldNo
                            };
                            n.index(c, function (a) {
                                r.setMemberService(a)
                            }, function (a) {
                                r.clear(), r.promptERR = !0, r.wordERR = a.data.data, i(function () {
                                    r.promptERR = !1
                                }, 2e3)
                            })
                        }
                    })
                })
            }
        }, r.clear = function () {
            r.v = "", r.vNo = "", r.name = "暂无信息", r.tel = "暂无信息", r.cardNo = "暂无信息", r.cardDate = "暂无信息", r.cardType = "暂无信息", r.leftTime = "暂无信息", r.limitTime = "暂无信息", r.payment = "cash", r.oldNo = "", r.newNo = "", r.auth_code = "", r.power = "暂无信息", r.photoFlag = !1, r.img = "assets/images/p1.png", r.isCost = !1, r.timeout1 = !0, r.paymentArr = [{
                name: "现金",
                value: "cash",
                image: "singleChoose_imageYes"
            }, {
                name: "支付宝",
                value: "alipay",
                image: "singleChoose_imageNo"
            }, {
                name: "微信",
                value: "wx",
                image: "singleChoose_imageNo"
            }, {
                name: "转账",
                value: "card",
                image: "singleChoose_imageNo"
            }, {
                name: "支票",
                value: "check",
                image: "singleChoose_imageNo"
            }, {
                name: "POS机",
                value: "pos",
                image: "singleChoose_imageNo"
            }]
        }, r.sure = function () {
            if (!r.oldNo || !r.newNo) return r.promptERR = !0, void(r.wordERR = "请放入卡");
            switch (r.payment) {
            case "alipay":
            case "wx":
                r.showAuth_codeBox = !0, r.timeout1 = !1, p();
                break;
            case "cash":
            case "pos":
            case "card":
            case "check":
                if (!r.oldNo || !r.newNo) return r.promptERR = !0, void(r.wordERR = "请放入卡");
                var a = {
                    _memberService: r._service,
                    cardNo: r.newNo,
                    isCost: r.isCost,
                    payment: r.payment
                };
                n.bindCard(a, function (a) {
                    r.promptOK = !0, r.clear()
                }, function (a) {
                    r.promptERR = !0, r.wordERR = a.data.data, i(function () {
                        r.promptERR = !1
                    }, 2e3)
                })
            }
        };
        var t = function () {
            e.get({}, function (a) {
                r._venue = window.localStorage._venue, r.clear()
            }, function (a) {})
        };
        t()
    }
    angular.module("fieldApp").controller("OrgChangeCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$location", "Ticket", "$timeout", "$interval", "Voucher", "Member", "Time", "MemberService", "Alipay"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        var p = this;
        p.page = 1, p.itemsPerPage = 10, p.tb = {
            backgroung: "#fafafa"
        }, p.fb = {
            background: "#fff"
        }, p.pagination = {
            page: p.page,
            itemsPerPage: p.itemsPerPage,
            maxSize: 5,
            numPages: null,
            totalItems: null
        }, p.dealNumber = function (a, b) {
            var c = a.toFixed(3);
            return b ? c.substring(0, c.lastIndexOf(".") + 3) : parseFloat(c.substring(0, c.lastIndexOf(".") + 3))
        }, p.pageChanged = function () {
            p.getVoucher()
        }, p.showEnter = function (a) {
            p.enterFlag = a, p.getVoucher(), p.pagination.page = 1
        }, p.getVoucher = function () {
            if (p.enterFlag) var a = "noenter";
            else var a = "used";
            n.get({}, function (b) {
                p.nowTime = b.data;
                var c = {
                    page: p.pagination.page,
                    itemsPerPage: p.pagination.itemsPerPage,
                    venueNo: p.venueNo,
                    state: a
                };
                l.index(c, function (a) {
                    p.count = a.data.count, p.vouchers = a.data.vouchers, _.each(p.vouchers, function (a) {
                        switch (a.dep = 0, a.payment) {
                        case "alipay":
                            a.payment = "支付宝支付";
                            break;
                        case "wx":
                            a.payment = "微信支付";
                            break;
                        case "cash":
                            a.payment = "现金支付", a.dep = "20元(现金20元)";
                            break;
                        case "member":
                            a.payment = "储值卡-现金", a.dep = "20元";
                            break;
                        case "member_spe":
                            a.payment = "储值卡-专用", a.dep = "20元";
                            break;
                        case "member_vir":
                            a.payment = "储值卡-虚拟", a.dep = "20元"
                        }
                        a.payment || (a.payment = "time" == a.serviceType ? "次卡消费" : "时间卡消费", a.dep = a._record ? "20元(现金20元)" : 0), a.outDate ? a.time = p.dealNumber((new Date(a.outDate).getTime() - new Date(a.enterDate).getTime()) / 6e4) : a.time = p.dealNumber((p.nowTime - new Date(a.enterDate).getTime()) / 6e4), a.limit && a.time >= a.limit ? a.overFlag = !0 : a.overFlag = !1
                    });
                    for (var b = 0; b < p.vouchers.length; b++) b % 2 == 0 ? p.vouchers[b].select = !0 : p.vouchers[b].select = !1;
                    p.pagination.totalItems = p.count, p.pagination.numPages = p.count / p.itemsPerPage
                }, function (a) {})
            })
        }, p.getCount = function () {
            var a = {
                startDate: (new Date).getTime(),
                endDate: (new Date).getTime(),
                _venue: p._venue
            };
            l.count(a, function (a) {
                p.data = a.data
            }, function (a) {})
        };
        var q = function () {
            e.get({}, function (a) {
                p._venue = window.localStorage._venue, o.indexSpe({
                    id: p._venue
                }, {}, function (a) {
                    p.venueNo = a.data.venue.venueNo, p.getCount(), p.getVoucher()
                }, function (a) {})
            }, function (a) {})
        };
        q()
    }
    angular.module("fieldApp").controller("OrgCheckCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "$timeout", "$interval", "Alipay", "Voucher", "Member", "Time", "Venue"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
        function q() {
            v || (document.getElementById("auth_code").focus(), setTimeout(q, 100))
        }

        function r() {
            w || (document.getElementById("voucher").focus(), setTimeout(r, 100))
        }
        var s, t = this,
            u = 0,
            v = !1,
            w = !1,
            x = !1;
        t.buyPayment = "cash", t.paymentArr = [{
            name: "现金",
            value: "cash",
            image: "singleChoose_imageYes"
        }, {
            name: "支付宝",
            value: "alipay",
            image: "singleChoose_imageNo"
        }, {
            name: "微信",
            value: "wx",
            image: "singleChoose_imageNo"
        }, {
            name: "余额",
            value: "member",
            image: "singleChoose_imageNo"
        }, {
            name: "保证金",
            value: "bail",
            image: "singleChoose_imageNo"
        }];
        var y = function (a) {
            var b = a.split("|");
            if (3 != b.length) return !1;
            var a = b[0],
                c = b[1].split(""),
                d = b[2],
                e = d,
                f = parseInt(s / 6e4).toString().split("");
            if (c.length < f.length) return !1;
            for (var g = 0; g < f.length; g++) d = d.replace(f[g], c[g]);
            return d == a ? e : !1
        };
        t.getNowFormatDate = function (a) {
            var b = "-",
                c = ":",
                d = a.getMonth() + 1,
                e = a.getDate();
            d >= 1 && 9 >= d && (d = "0" + d), e >= 0 && 9 >= e && (e = "0" + e);
            var f = a.getFullYear() + b + d + b + e + " " + a.getHours() + c + a.getMinutes();
            return f
        }, t.dealNumber = function (a, b) {
            var c = a.toFixed(3);
            return b ? c.substring(0, c.lastIndexOf(".") + 3) : parseFloat(c.substring(0, c.lastIndexOf(".") + 3))
        }, t.choosePayment = function (a) {
            t.canPay || (("member_vir" == a || "member_spe" == a) && (a = "member"), _.each(t.paymentArr, function (b) {
                b.image = "singleChoose_imageNo", b.value == a && (b.image = "singleChoose_imageYes", t.buyPayment = b.value)
            }), "bail" == a ? (t.total = t.dealNumber(t.bail - t.overtimePrice), t.total >= 0 ? t.re = "退还现金" : (t.total = -t.total, t.re = "支付")) : t.overFlag && t.judgeOver(t.overtimePrice))
        }, t.succeed = function () {
            t.promptOK = !0, i(function () {
                t.promptOK = !1, t.clear()
            }, 2e3)
        }, t.fail = function (a) {
            t.promptERR = !0, t.wordERR = a, i(function () {
                t.promptERR = !1
            }, 2e3), t.clear()
        }, document.onkeydown = function (b) {
            var c = b || window.event || arguments.callee.caller.arguments[0];
            c && 13 == c.keyCode ? a.$apply(function () {
                if (t.showAuth_codeBox) {
                    var a = {
                        auth_code: t.auth_code,
                        total: t.overPrice,
                        spbill_create_ip: "0.0.0.0"
                    };
                    switch (t.buyPayment) {
                    case "alipay":
                        k.payOver(a, function (a) {
                            t.confirm()
                        }, function (a) {
                            x = !1, t.fail(a.data.data)
                        });
                        break;
                    case "wx":
                        m.overtime(a, function (a) {
                            t.confirm()
                        }, function (a) {
                            x = !1, t.fail(a.data.data)
                        });
                        break;
                    case "member":
                        n.index({
                            id: "today"
                        }, function (b) {
                            s = b.data;
                            var c = y(t.auth_code);
                            if (c) a = _.merge(a, {
                                _vocher: t.ringNum,
                                _member: c,
                                _venue: t._venue,
                                payment: "member"
                            }), m.memberOver(a, function (a) {
                                t.confirm()
                            }, function (a) {
                                x = !1, t.fail(a.data.data)
                            });
                            else {
                                var d = {
                                    cardNo: t.auth_code
                                };
                                m.indexBycard(d, function (b) {
                                    a = _.merge(a, {
                                        _vocher: t.ringNum,
                                        _member: b.data.member._id,
                                        _venue: t._venue,
                                        payment: "member"
                                    }), m.memberOver(a, function (a) {
                                        t.confirm()
                                    }, function (a) {
                                        x = !1, t.fail(a.data.data)
                                    })
                                }, function (a) {
                                    t.fail("会员不存在")
                                })
                            }
                        })
                    }
                } else {
                    if (x) return void(t.vNo = "");
                    var a = {
                        voucherNo: t.vNo,
                        _venue: t._venue
                    };
                    t.clear(), l.show(a, function (a) {
                        w = !0, t.rePayment = a.data.voucher.payment ? a.data.voucher.payment : "cash", t.choosePayment(t.rePayment), a.data.voucher.isUsed || (t.promptERR = !0, t.wordERR = "此卡已结算", i(function () {
                            t.promptERR = !1
                        }, 2e3));
                        var b = {
                            type: "deposit",
                            _venue: a.data.voucher._venue,
                            _item: a.data.voucher._item
                        };
                        o.index(b, function (b) {
                            switch (t.refundPrice = 0 != b.data.fixedamounts.length ? b.data.fixedamounts[0].price : 0, a.data.voucher.payment || a.data.voucher._record || (t.refundPrice = 0), t.total = t.refundPrice, a.data.voucher.serviceType ? (t.payWay = "date" == a.data.voucher.serviceType ? "时间卡" : "次数卡", t.serviceFlag = !0) : t.serviceFlag = !1, a.data.voucher.payment) {
                            case "alipay":
                                t.payWay = "支付宝";
                                break;
                            case "wx":
                                t.payWay = "微信";
                                break;
                            case "member":
                                t.payWay = "余额账户";
                                break;
                            case "member_vir":
                                t.payWay = "虚拟账户";
                                break;
                            case "member_spe":
                                t.payWay = "包玉刚账户";
                                break;
                            case "cash":
                                t.payWay = "现金"
                            }
                            t.ringNum = a.data.voucher.voucherNo, t.No = a.data.voucher.No, t.isUsed = a.data.voucher.isUsed, t.name = a.data.voucher.memberName ? a.data.voucher.memberName : "暂无", t.limitTime = a.data.voucher.limit ? a.data.voucher.limit : 99999999999, t.enterDate = a.data.voucher.enterDate;
                            var c = new Date(a.data.voucher.outDate).getTime(),
                                d = new Date(a.data.voucher.enterDate).getTime();
                            if (t.longTime = t.dealNumber((c - d) / 6e4), t.longTime > t.limitTime) {
                                t.overFlag = !0;
                                var e = {
                                    type: "overtime",
                                    _venue: a.data.voucher._venue,
                                    _item: a.data.voucher._item
                                };
                                o.index(e, function (a) {
                                    t.overtimes = a.data.fixedamounts, t.overtimePrice = 0;
                                    for (var b = 0; b < t.overtimes.length; b++) t.overtimes[b].choose = !1, 0 == b && (t.overtimes[0].choose = !0, t.overtimePrice = t.overtimes[0].price);
                                    t.judgeOver(t.overtimePrice)
                                }, function (a) {})
                            }
                            if (t._memberService = a.data.voucher._memberService ? a.data.voucher._memberService : "", t._memberService) {
                                var e = {
                                    id: t._memberService
                                };
                                p.idIndex(e, function (a) {
                                    t.bail = a.data.memberService.service.bail
                                }, function (a) {})
                            }
                            t._member = a.data.voucher._member ? a.data.voucher._member : "", t.rFlag = a.data.voucher._record ? !0 : !1, t._preporder = a.data.voucher._preporder ? a.data.voucher._preporder : a.data.voucher._record ? a.data.voucher._record : "", t._vocher = a.data.voucher._id
                        }, function (a) {})
                    }, function (a) {
                        t.fail(a.data.data)
                    })
                }
            }) : c && 32 == c.keyCode && a.$apply(function () {
                t.refund()
            })
        }, t.judgeOver = function (a) {
            u++, console.log(t.total, a, "judgeOver index", u), t.total = t.dealNumber(t.refundPrice - 1 * a), t.overPrice = 1 * a, t.total >= 0 ? (t.canPay = !0, t.re = "退还现金") : (t.total = -t.total, t.canPay = !1, t.re = "支付")
        }, t.sureOver = function () {
            t.defindPrice ? (t.overPriceFlag = !0, t.defindFlag = !1, console.log("sureOver judge"), t.judgeOver(t.defindPrice)) : (t.promptERR = !0, t.wordERR = "请填写价格", i(function () {
                t.promptERR = !1
            }, 2e3))
        }, t.refund = function () {
            if (x) return t.promptERR = !0, t.wordERR = "请求已发起，请勿重复点击", void i(function () {
                t.promptERR = !1
            }, 2e3);
            if (x = !0, !t.isUsed) return x = !1, void t.fail("此手环已被结算，或没被使用");
            var a = {
                _vocher: t.ringNum,
                refund_amount: t.refundPrice
            };
            if (!t.overFlag && (t.serviceFlag || !t._preporder)) return void(t._preporder ? (a = _.merge(a, {
                _record: t._preporder
            }), m.memberRefund(a, function (a) {
                t.sureRefund()
            }, function (a) {
                x = !1, t.fail(a.data.data)
            })) : t.confirm());
            if (t.overFlag && (t.serviceFlag || !t._preporder)) return void(t._preporder ? (a = _.merge(a, {
                _record: t._preporder
            }), m.memberRefund(a, function (a) {
                t.sureRefund()
            }, function (a) {
                x = !1, t.fail(a.data.data)
            })) : t.sureRefund());
            switch (t.rePayment) {
            case "alipay":
                a = _.merge(a, {
                    _preporder: t._preporder
                }), k.refund(a, function (a) {
                    t.sureRefund()
                }, function (a) {
                    x = !1, t.fail(a.data.data)
                });
                break;
            case "wx":
                a = _.merge(a, {
                    _preporder: t._preporder
                }), m.wxRefund(a, function (a) {
                    t.sureRefund()
                }, function (a) {
                    x = !1, t.fail(a.data.data)
                });
                break;
            case "member":
            case "cash":
            case "member_vir":
            case "member_spe":
                a = _.merge(a, {
                    _record: t._preporder
                }), m.memberRefund(a, function (a) {
                    t.sureRefund()
                }, function (a) {
                    x = !1, t.fail(a.data.data)
                })
            }
        }, t.confirm = function () {
            var a = {
                voucherNo: t.ringNum,
                _venue: t._venue
            };
            l.confirm(a, function (a) {
                t.overFlag ? t.print() : t.succeed()
            }, function (a) {
                x = !1, t.fail(a.data.data)
            })
        }, t.sureRefund = function () {
            var a = {
                _vocher: t.ringNum,
                total: t.overPrice,
                _venue: t._venue
            };
            t.overFlag ? "cash" == t.buyPayment ? (a = _.merge(a, {
                _member: t._member,
                payment: "cash"
            }), m.memberOver(a, function (a) {
                t.confirm()
            }, function (a) {
                x = !1, t.fail(a.data.data)
            })) : "member" == t.buyPayment && t._preporder ? g.index({
                id: t._preporder
            }, function (b) {
                a = _.merge(a, {
                    _member: b.data.record._member,
                    payment: "member"
                }), m.memberOver(a, function (a) {
                    t.confirm()
                }, function (a) {
                    x = !1, t.fail(a.data.data)
                })
            }, function (a) {
                x = !1, t.fail(a.data.data)
            }) : "bail" == t.buyPayment ? (a = _.merge(a, {
                _member: t._member,
                voucherNo: t.ringNum,
                _memberService: t._memberService
            }), p.bail(a, function (a) {
                t.confirm()
            }, function (a) {
                x = !1, t.fail(a.data.data)
            })) : (t.showAuth_codeBox = !0, v = !1, q()) : t.confirm()
        }, t.print = function () {
            var a = '<div><div><h3 style="font-size:20px">包玉刚游泳场</h3><h3 style="font-size:20px">超时补费小票</h3>操作员：' + t.admin + '</h3></div><span>**********************************</span><div style="border-bottom: 1px solid #DADADA;"><table style="width: 100%;"><thead><tr><td width="30%"><td width="60%"></td></td><td width="10%"></td></tr></thead>';
            a = a + '<tbody><tr><td>进场时间</td><td style="text-align:right">' + t.getNowFormatDate(new Date(t.enterDate)) + "</td></td><td></tr>", a = a + '<tr><td>消费时间</td>><td style="text-align:right">' + t.longTime + "分钟</td><td></td</tr>", a = a + '<tr><td>单次限时</td><td style="text-align:right">' + t.limitTime + "分钟</td><td></td></tr>", a = a + '<tr><td>押金</td><td style="text-align:right">￥' + t.refundPrice + "</td><td></td></tr>", a = a + '<tr><td>超时补费</td><td style="text-align:right">￥' + t.overPrice + "</td><td></td></tr></tbody></table></div>", a = a + "<div>消费日期:" + t.getNowFormatDate(new Date) + "</div><span>**********************************</span><div>客户签名:</div></div>";
            var b = getLodop();
            b.PRINT_INIT(""), b.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), b.SET_PRINTER_INDEXA(-1), b.SET_PRINT_PAGESIZE(3, 800, 100, ""), b.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", a), b.PRINT(), t.succeed()
        }, t.clear = function () {
            t.re = "退还现金", t.refundPrice = 0, t.overPrice = 0, t.total = 0, t.overFlag = !1, t.defindFlag = !1, t.overPriceFlag = !1, t.canPay = !1, t.ringNum = "", t.vNo = "", t._memberService = "", t.bail = "", t._member = "", t.rFlag = !1, w = !1, r(), t.clearPay(), x = !1
        }, t.clearPay = function () {
            t.showAuth_codeBox = !1, t.auth_code = "", v = !0
        }, t.chooseOvertime = function (a) {
            return _.each(t.overtimes, function (a) {
                a.choose = !1
            }), "defind" == a ? void(t.defindFlag = !0) : (t.defindFlag = !1, t.overPriceFlag = !1, a.choose = !0, console.log("chooseOvertime judge"), void t.judgeOver(a.price))
        };
        var z = function () {
            t.clear(), e.get({}, function (a) {
                t._venue = window.localStorage._venue, t.admin = a.data.user.name
            }, function (a) {})
        };
        z()
    }
    angular.module("fieldApp").controller("OrgDealCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "Record", "$location", "$timeout", "$interval", "Alipay", "Voucher", "Member", "Time", "Fiexdamounts", "MemberService"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q) {
        function r() {
            y || (document.getElementById("voucher").focus(), setTimeout(r, 100))
        }

        function s() {
            z || (document.getElementById("ring").focus(), setTimeout(s, 100))
        }

        function t(a) {
            void 0 !== H.mozSrcObject ? H.mozSrcObject = a : H.src = window.URL && window.URL.createObjectURL(a) || a, A = new Audio, B = v(A), B && (A.src = "polaroid." + B, A.play())
        }

        function u(a) {
            alert("Error！" + a)
        }

        function v(a) {
            if (a.canPlayType) {
                if ("" !== a.canPlayType('audio/mp4; codecs="mp4a.40.5"')) return "aac";
                if ("" !== a.canPlayType('audio/ogg; codecs="vorbis"')) return "ogg"
            }
            return !1
        }
        var w, x = this;
        x.payment = "cash", x.paymentArr = [{
            name: "现金",
            value: "cash",
            image: "singleChoose_imageYes"
        }, {
            name: "支付宝",
            value: "alipay",
            image: "singleChoose_imageNo"
        }, {
            name: "微信",
            value: "wx",
            image: "singleChoose_imageNo"
        }], x.div1Width = {
            width: (document.getElementById("fdWorker").clientWidth - 276) / 2 + "px"
        }, x.div2Width = {
            width: (document.getElementById("fdWorker").clientWidth - 276) / 2 - 143 + "px"
        }, x.div3Width = {
            width: (document.getElementById("fdWorker").clientWidth - 276) / 2 - 333 + "px"
        }, x.choosePayment = function (a) {
            _.each(x.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", x.payment = a.value
        }, a.$on("$destroy", function () {
            clearInterval(x.setFocus)
        }), x.pageChanged = function () {
            var a = {
                _memberService: x._service,
                page: x.pagination.page,
                itemsPerPage: x.pagination.itemsPerPage
            };
            p.index(a, function (a) {
                x.voucherHistories = a.data.serviceHistories, x.pagination.totalItems = a.data.count, x.pagination.numPages = a.data.count / x.itemsPerPage
            }, function (a) {
                x.fail(a.data.data)
            })
        };
        var y = !1,
            z = !1;
        r();
        var A, B, C = Math.pow(2, 32),
            D = 1,
            E = {
                expiration: "2020-01-01T12:00:00.000Z",
                conditions: [
                    ["content-length-range", 0, 1048576e3]
                ]
            },
            F = "LTAIPGfNDMFdDR5c",
            G = "HChjvcnbFTe67BSeolSSxVsO6GIMFS",
            H = document.querySelector("video"),
            I = document.getElementById("canvas1"),
            J = I.getContext("2d");
        navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia, window.URL = window.URL || window.webkitURL || window.mozURL || window.msURL;
        var K = [];
        x.getMedia = function () {
            x.sheFlag = !0, x.photoFlag = !1, navigator.getUserMedia ? navigator.getUserMedia({
                video: {
                    optional: [{
                        sourceId: K[1]
                    }]
                },
                audio: !0
            }, t, u) : alert("Native device media streaming (getUserMedia) not supported in this browser.")
        }, x.getPhoto = function () {
            function a(a, b) {
                for (var c = a.split(","), d = c[0].match(/:(.*?);/)[1], e = atob(c[1]), f = e.length, g = new Uint8Array(f); f--;) g[f] = e.charCodeAt(f);
                return new File([g], b, {
                    type: d
                })
            }
            x.cameraFlag = !x.cameraFlag, J.drawImage(H, 0, 0, 400, 400);
            var b = I.toDataURL("image/png"),
                c = (new Date).getTime(),
                d = c.toString(),
                e = (Math.floor(Math.random() * (C - D)) + D).toString(),
                f = e.toString();
            x.filename = d + "_" + f + "_xx.png", x.policyBase64 = Base64.encode(JSON.stringify(E));
            var g = x.policyBase64,
                h = Crypto.HMAC(Crypto.SHA1, g, G, {
                    asBytes: !0
                });
            x.signature = Crypto.util.bytesToBase64(h), x.file = a(b, x.filename)
        };
        var L = function (a) {
            var b = a.split("|");
            if (3 != b.length) return !1;
            var a = b[0],
                c = b[1].split(""),
                d = b[2],
                e = d,
                f = parseInt(w / 6e4).toString().split("");
            if (c.length < f.length) return !1;
            for (var g = 0; g < f.length; g++) d = d.replace(f[g], c[g]);
            return d == a ? e : !1
        };
        x.save = function () {
            o.upload({
                url: "api/upload/pic",
                method: "POST",
                data: {
                    Filename: x.filename,
                    key: x.filename,
                    policy: x.policyBase64,
                    OSSAccessKeyId: F,
                    success_action_status: "200",
                    signature: x.signature,
                    file: x.file,
                    filename: x.filename,
                    "Content-Type": "image/png"
                }
            }).then(function (a) {
                console.log("Success " + a.config.data.file.name + "uploaded. Response: " + a.data), h.update({
                    id: x._service
                }, {
                    pic: x.filename
                }, function (a) {
                    x.enter()
                }, function (a) {
                    x.fail(a.data.data)
                })
            }, function (a) {
                console.log("Error status: " + a.status)
            }, function (a) {
                var b = parseInt(100 * a.loaded / a.total);
                console.log("progress: " + b + "% " + a.config.data.file.name)
            })
        }, x.fail = function (a) {
            x.promptERR = !0, x.wordERR = a, i(function () {
                x.promptERR = !1
            }, 2e3), x.clear()
        }, x.dealMemberService = function (a) {
            if (x.bigFlag = !1, x.name = a.data.memberService.name, x.tel = a.data.memberService.tel, x.cardNo = a.data.memberService.serviceNo ? a.data.memberService.serviceNo : "暂无实体卡", x.cardDate = a.data.memberService.createDate, "date" == a.data.memberService.service.serviceType)
                if (a.data.memberService.endDate) {
                    var b = new Date(a.data.memberService.endDate).getYear(),
                        c = new Date(a.data.memberService.endDate).getMonth(),
                        d = new Date(a.data.memberService.endDate).getDate();
                    b += 1900, 12 == c ? c = 1 : c += 1, x.leftTime = b + "-" + c + "-" + d, x.endDate = a.data.memberService.endDate, (new Date).getTime() >= new Date(a.data.memberService.endDate).getTime() ? (x.overDateFlag = !0, x.threeFlag = !0) : (x.overDateFlag = !1, parseInt((new Date(a.data.memberService.endDate).getTime() - (new Date).getTime()) / 3600 / 24e3) < 4 && (x.threeFlag = !0), x.leftDay = parseInt((new Date(a.data.memberService.endDate).getTime() - (new Date).getTime()) / 3600 / 24e3) + "天")
                } else {
                    x.leftDay = a.data.memberService.service.value + "天", a.data.memberService.service.value < 4 && (x.threeFlag = !0);
                    var e = (new Date).getTime() + 3600 * a.data.memberService.service.value * 24e3,
                        b = new Date(e).getYear(),
                        c = new Date(e).getMonth(),
                        d = new Date(e).getDate();
                    b += 1900, 12 == c ? c = 1 : c += 1, x.leftTime = b + "-" + c + "-" + d, (new Date).getTime() >= e ? x.overDateFlag = !0 : x.overDateFlag = !1
                } else a.data.memberService.endDate && (x.endDate = a.data.memberService.endDate, x.leftDay = parseInt((new Date(a.data.memberService.endDate).getTime() - (new Date).getTime()) / 3600 / 24e3), (new Date).getTime() >= new Date(a.data.memberService.endDate).getTime() ? x.overDateFlag = !0 : x.overDateFlag = !1), x.leftTime = a.data.memberService.valueLeft + "次", a.data.memberService.valueLeft < 4 && (x.threeFlag = !0);
            x.power = "任意用户", x._member = a.data.memberService._member, x.img = a.data.memberService.pic ? "assets/pic/" + a.data.memberService.pic : "assets/images/p1.png", x.cardType = "date" == a.data.memberService.service.serviceType ? "时间卡" : "次数卡", x.limitTime = a.data.memberService.service.limit + "分钟", x.cardName = a.data.memberService.service.name, x._service = a.data.memberService._id, x.photoFlag = a.data.memberService.pic ? !0 : !1, x.codeName = x.name, x.dayLimit = 1 == a.data.memberService.service.daylimit ? "一次" : "不限";
            var f = {
                type: "deposit",
                _venue: a.data.memberService._venue,
                _item: a.data.memberService.service._item
            };
            q.index(f, function (a) {
                x.deposit = a.data.fixedamounts[0].price
            }, function (a) {}), x.bail = a.data.memberService.service.bail, x.pageChanged(), y = !0, a.data.memberService.freezeDate ? (new Date).getTime() > new Date(a.data.memberService.freezeDate).getTime() ? x.freFlag = !1 : (x.freFlag = !0, x.nwFlag = !0) : x.freFlag = !1, !a.data.memberService.hasBail && a.data.memberService.service.bail > 0 ? (x.freezeFlag = !0, x.cFlag = !0, x.wordERR = "该卡没有保证金，请交保证金。") : x.freFlag || (z = !1, s()), a.data.memberService.pic ? i(function () {
                document.getElementById("img").naturalHeight < 160 ? x.smallFlag = !0 : x.bigFlag = !0
            }, 500) : x.bigFlag = !0
        }, x["continue"] = function () {
            z = !1, s(), x.nwFlag = !1
        }, x.banli = function () {
            var a = {
                _memberService: x._service,
                payment: x.payment
            };
            switch (x.payment) {
            case "alipay":
            case "wx":
                x.showAuth_codeBox = !0, x.setIntervalId = setInterval(function () {
                    document.getElementById("auth_code").focus()
                }, 100);
                break;
            case "cash":
            case "pos":
            case "card":
            case "check":
            case "member":
                h.buyBail(a, function (a) {
                    x.promptOK = !0, i(function () {
                        x.promptOK = !1
                    }, 2e3), x.cFlag = !1
                }, function (a) {
                    x.fail(a.data.data)
                })
            }
        }, document.onkeydown = function (b) {
            var c = b || window.event || arguments.callee.caller.arguments[0];
            c && 13 == c.keyCode && a.$apply(function () {
                if (!x.showAuth_codeBox) return x.codeName && x.vNo ? void(x.sheFlag && !x.photoFlag ? x.save() : x.enter()) : void m.index({
                    id: "today"
                }, function (a) {
                    w = a.data;
                    var b = L(x.codeName);
                    if (x.code = x.name, b) {
                        var c = {
                            id: b
                        };
                        h.idIndex(c, function (a) {
                            x.dealMemberService(a)
                        }, function (a) {
                            x.fail(a.data.data)
                        })
                    } else {
                        var c = {
                            serviceNo: x.codeName
                        };
                        h.index(c, function (a) {
                            x.dealMemberService(a)
                        }, function (a) {
                            x.fail(a.data.data)
                        })
                    }
                });
                var a = {
                    _memberService: x._service,
                    auth_code: x.auth_code,
                    spbill_create_ip: "1.0.0.0"
                };
                switch (x.payment) {
                case "alipay":
                    k.bail(a, function (a) {
                        x.showAuth_codeBox = !1, clearInterval(x.setIntervalId), x.promptOK = !0, i(function () {
                            x.promptOK = !1
                        }, 2e3), x.cFlag = !1
                    }, function (a) {
                        x.fail(a.data.data)
                    });
                    break;
                case "wx":
                    h.wxBail(a, function (a) {
                        x.showAuth_codeBox = !1, clearInterval(x.setIntervalId), x.promptOK = !0, i(function () {
                            x.promptOK = !1
                        }, 2e3), x.cFlag = !1
                    }, function (a) {
                        x.fail(a.data.data)
                    })
                }
            })
        }, x.enter = function () {
            var a = {
                    voucherNo: x.vNo,
                    _venue: x._venue
                },
                b = {
                    voucherNo: x.vNo,
                    _memberService: x._service
                };
            x.fFlag && (b = _.merge(b, {
                client_prep_total_fee: x.deposit
            })), n.show(a, function (a) {
                a.data.voucher.isUsed ? (x.promptERR = !0, x.wordERR = "该手环暂未结算，请更换手环", i(function () {
                    x.promptERR = !1
                }, 2e3), x.vNo = "") : h.useWidthVouchers(b, function (a) {
                    x.clear(), x.fFlag = !1, x.ffFlag = !1, x.promptOK = !0, i(function () {
                        x.promptOK = !1
                    }, 2e3)
                }, function (a) {
                    409 == a.data.code ? (x.promptERR = !0, x.wordERR = a.data.data, i(function () {
                        x.promptERR = !1
                    }, 2e3), x.vNo = "") : (x.fFlag = !1, x.ffFlag = !1, x.fail(a.data.data))
                })
            }, function (a) {
                h.useWidthVouchers(b, function (a) {
                    x.clear(), x.fFlag = !1, x.ffFlag = !1, x.promptOK = !0, i(function () {
                        x.promptOK = !1
                    }, 2e3)
                }, function (a) {
                    409 == a.data.code ? (x.promptERR = !0, x.wordERR = a.data.data, i(function () {
                        x.promptERR = !1
                    }, 2e3), x.vNo = "") : (x.fFlag = !1, x.ffFlag = !1, x.fail(a.data.data))
                })
            })
        }, x.clear = function () {
            x.name = "暂无信息", x.v = "", x.vNo = "", x.codeName = "", x.deposit = "", x.nwFlag = !1, x.endDate = "暂无信息", x.dayLimit = "暂无信息", x.valueLeft = "暂无信息", x.leftDay = "暂无信息", x.tel = "暂无信息", x.cardNo = "暂无信息", x.cardName = "暂无信息", x.cardDate = "暂无信息", x.cardType = "暂无信息", x.leftTime = "暂无信息", x.limitTime = "暂无信息", x.power = "暂无信息", x.threeFlag = !1, x.freFlag = !1, x.bail = "", x.photoFlag = !0, x.cameraFlag = !1, x.freezeFlag = !1, x.sheFlag = !1, x.overDateFlag = !1, x.fFlag = !1, x.ffFlag = !1, x.cFlag = !1, x.img = "assets/images/p1.png", x.voucherHistories = [], x.page = 1, x.itemsPerPage = 10, x.showAuth_codeBox = !1, x.smallFlag = !1, x.bigFlag = !0, clearInterval(x.setIntervalId), x.pagination = {
                page: x.page,
                itemsPerPage: x.itemsPerPage,
                maxSize: 5,
                numPages: null,
                totalItems: null
            }, y = !1, z = !0, r()
        };
        var M = function () {
            e.get({}, function (a) {
                x._venue = window.localStorage._venue, x.admin = a.data.user.name
            }, function (a) {
                x.fail(a.data.data)
            }), x.clear()
        };
        M()
    }
    angular.module("fieldApp").controller("OrgEnterCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$location", "MemberService", "$timeout", "$interval", "Alipay", "Member", "Time", "Voucher", "Upload", "ServiceHistory", "Fiexdamounts"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.logout = d.logout, clearInterval(k.setFocus), k.chooseVenue = function (a) {
            window.localStorage._venue = a._id, k.vName = a.name, k.selectVenueFlag = !1
        };
        var l = function () {
            e.get({}, function (a) {
                k.title = a.data.user.organizationName, k.name = a.data.user.name, j.index({}, function (a) {
                    if (window.localStorage._venue) {
                        var b = !1;
                        _.each(a.data.venues, function (a) {
                            a._id == window.localStorage._venue && (window.localStorage._venue = a._id, k.vName = a.name, b = !0)
                        }), b || (window.localStorage._venue = a.data.venues[0]._id, k.vName = a.data.venues[0].name)
                    } else window.localStorage._venue = a.data.venues[0]._id, k.vName = a.data.venues[0].name;
                    k.venues = a.data.venues
                }, function (a) {})
            }, function (a) {})
        };
        l()
    }
    angular.module("fieldApp").controller("OrgIndexCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "$interval", "Venue"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r) {
        var s = this;
        window.addEventListener("popstate", function (a) {
            clearInterval(s.setIntervalId)
        }, !1);
        var t = function () {
                s.page = 1, s.itemsPerPage = s.searchPageValue ? s.searchPageValue : 10, s.pagination = {
                    page: s.page,
                    itemsPerPage: s.itemsPerPage,
                    maxSize: 5,
                    numPages: null,
                    totalItems: null
                }
            },
            u = function () {
                var a = {
                    page: s.pagination.page,
                    itemsPerPage: s.pagination.itemsPerPage,
                    isValued: "all"
                };
                s.mix && (a = _.merge(a, {
                    mix: s.mix
                })), r.getIndex(a, function (a) {
                    s.memberServices = a.data.memberServices;
                    for (var b = 0; b < s.memberServices.length; b++) s.memberServices[b].freezeDate && new Date(s.memberServices[b].freezeDate) > new Date ? s.memberServices[b].isFreeze = !0 : s.memberServices[b].isFreeze = !1, s.memberServices[b].endDate ? s.memberServices[b].isActive = !0 : s.memberServices[b].isActive = !1, "date" == s.memberServices[b].service.serviceType ? s.memberServices[b].endDate && new Date(s.memberServices[b].endDate) < new Date ? s.memberServices[b].isEnd = !0 : s.memberServices[b].isEnd = !1 : s.memberServices[b].endDate && new Date(s.memberServices[b].endDate) < new Date || s.memberServices[b].valueLeft <= 0 ? s.memberServices[b].isEnd = !0 : s.memberServices[b].isEnd = !1;
                    var c = a.data.count;
                    s.pagination.totalItems = c, s.pagination.numPages = c / s.itemsPerPage
                }, function (a) {
                    C("err", a.data.data)
                })
            },
            v = function () {
                s.showMemberService = {
                    _memberService: void 0,
                    value: void 0,
                    name: void 0,
                    tel: void 0,
                    date: void 0,
                    cardNo: void 0,
                    _toMember: void 0,
                    _toMemberName: void 0,
                    isCost: !1,
                    payment: "cash",
                    spbill_create_ip: "1.1.1.1",
                    auth_code: void 0
                }
            },
            w = function () {
                s.payments = [{
                    img: "chooseImgTrue",
                    name: "现金",
                    value: "cash"
                }, {
                    img: "chooseImgFalse",
                    name: "支付宝",
                    value: "alipay"
                }, {
                    img: "chooseImgFalse",
                    name: "微信",
                    value: "wx"
                }, {
                    img: "chooseImgFalse",
                    name: "转账",
                    value: "card"
                }, {
                    img: "chooseImgFalse",
                    name: "支票",
                    value: "check"
                }, {
                    img: "chooseImgFalse",
                    name: "POS机",
                    value: "pos"
                }]
            },
            x = function () {
                s.showChangeDate = "请选择冻结到哪天"
            },
            y = function () {
                s.menberBg = !1, s.postponeCard = !1, s.edit = !1, s.changeCard = !1, s.freezeCard = !1, s.changeName = !1, s.againCheckBox = !1
            },
            z = function () {
                return payCodeCheck(s.auth_code, "wx") ? (s.showMemberService.auth_code = s.auth_code, void i.wxPayBind({}, s.showMemberService, function (a) {
                    s.auth_code = void 0, s.close(), C("ok", "换卡成功"), u()
                }, function (a) {
                    s.auth_code = void 0, C("err", a.data.data)
                })) : void C("err", "支付码错误，重新扫码")
            },
            A = function () {
                return payCodeCheck(s.auth_code, "alipay") ? (s.showMemberService.auth_code = s.auth_code, void l.payBind({}, s.showMemberService, function (a) {
                    s.auth_code = void 0, s.close(), C("ok", "换卡成功"), u()
                }, function (a) {
                    s.auth_code = void 0, C("err", a.data.data)
                })) : void C("err", "支付码错误，重新扫码")
            },
            B = function () {
                t(), u(), v(), w(), y(), x()
            };
        s.mySearch = function () {
            s.pagination.page = 1, u()
        }, s.enterCheck = function (a) {
            13 == a.keyCode && (console.log("键盘回车查询数据"), s.mySearch())
        }, s.showPostponeCard = function (a) {
            s.menberBg = !0, s.postponeCard = !0, s.showMemberService._memberService = a
        }, s.postponeCardSure = function () {
            return isNaN(s.showMemberService.value) ? void C("err", "请输入数字") : parseInt(s.showMemberService.value) < 0 ? void C("err", "请输入大于0的数字") : (s.showMemberService.value = parseInt(s.showMemberService.value), void r.postpone({}, s.showMemberService, function () {
                s.close(), C("ok", "延期成功"), u()
            }, function (a) {
                C("ok", a.data.data)
            }))
        }, s.showEdit = function (a) {
            s.menberBg = !0, s.edit = !0, s.showMemberService._memberService = a._id, s.showMemberService.name = a.name, s.showMemberService.tel = a.tel
        }, s.update = function () {
            r.update({
                id: s.showMemberService._memberService
            }, s.showMemberService, function () {
                s.close(), C("ok", "编辑信息成功"), u()
            }, function (a) {
                C("err", a.data.data)
            })
        }, s.showChangeCard = function (a) {
            s.menberBg = !0, s.changeCard = !0, s.showMemberService._memberService = a
        }, s.choosePayment = function (a) {
            for (var b = 0; b < s.payments.length; b++) s.payments[b].img = "chooseImgFalse";
            a.img = "chooseImgTrue", s.showMemberService.payment = a.value
        }, s.changeBtnSure = function () {
            s.showMemberService.isCost ? "alipay" == s.showMemberService.payment || "wx" == s.showMemberService.payment ? (s.promptPay = !0, s.wordPay = "请扫描用户二维码", s.auth_code = "", s.setIntervalId = setInterval(function () {
                document.getElementById("auth_code").focus()
            }, 100)) : s.againCheckBox = !0 : s.otherPay()
        }, s.otherPay = function () {
            r.changeCard({}, s.showMemberService, function () {
                s.close(), C("ok", "换卡成功"), u()
            }, function (a) {
                C("err", a.data.data)
            })
        }, s.auth_codePay = function (a) {
            if (13 == a.keyCode) switch (s.closePrompt(), s.promptWARN = !0, s.wordWARN = "支付中", s.showMemberService.payment) {
            case "wx":
                z();
                break;
            case "alipay":
                A()
            }
        }, s.showFreezeCard = function (a) {
            s.menberBg = !0, s.freezeCard = !0, s.showMemberService._memberService = a
        }, s.closeChangeDateBox = function () {
            s.changeDateBox = !1, setTimeout(function () {
                s.showChangeDate = s.changeDate, a.$apply()
            }, 100)
        }, s.dongBtn = function () {
            return "请选择冻结到哪天" == s.showChangeDate ? void C("err", "请选择日期") : (s.showMemberService.date = new Date(s.showChangeDate).getTime(), void r.freeze({}, s.showMemberService, function (a) {
                s.close(), C("ok", "冻结成功"), u()
            }, function (a) {
                C("err", a.data.data)
            }))
        }, s.showChangeName = function (a) {
            s.menberBg = !0, s.changeName = !0, s.showMemberService._memberService = a
        }, s.searchMember = function () {
            isTel(s.showMemberService.tel) && i.indexByTel({
                tel: s.showMemberService.tel
            }, function (a) {
                s.showMemberService._toMember = a.data.member._id, s.showMemberService._toMemberName = a.data.member.name
            }, function (a) {
                s.showMemberService.tel = void 0, C("err", "手机号输入不正确")
            })
        }, s.transferCard = function () {
            r.change({}, s.showMemberService, function (a) {
                s.close(), C("ok", "过户成功"), u()
            }, function (a) {
                C("err", a.data.data)
            })
        }, s.close = function () {
            y(), v(), w(), x()
        }, s.pageChanged = function () {
            u()
        }, s.closePrompt = function () {
            s.promptPay = !1, clearInterval(s.setIntervalId)
        };
        var C = function (b, c) {
            switch (s.promptOK = !1, s.promptERR = !1, s.promptWARN = !1, b) {
            case "ok":
                s.promptOK = !0, s.wordOK = c;
                break;
            case "err":
                s.promptERR = !0, s.wordERR = c
            }
            setTimeout(function () {
                s.promptOK = !1, s.promptERR = !1, a.$apply()
            }, 1500)
        };
        B()
    }
    angular.module("fieldApp").controller("CsdVipTableCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Member", "Item", "Record", "Alipay", "Time", "$timeout", "Venue", "Tucard", "Ticket", "MemberService"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        function p() {
            s.timeout1 || (document.getElementById("voucher").focus(), setTimeout(p, 100))
        }

        function q() {
            s.timeout2 || (document.getElementById("auth_code").focus(), setTimeout(q, 100))
        }
        var r, s = this,
            t = !1,
            u = function (a) {
                var b = a.indexOf("|"),
                    c = a.split("|");
                if (3 != c.length) return !1;
                var a = c[0],
                    d = c[1].split(""),
                    e = c[2],
                    f = e,
                    g = parseInt(r / 6e4).toString().split("");
                if (d.length < g.length) return !1;
                for (var h = 0; h < g.length; h++) e = e.replace(g[h], d[h]);
                return e == a ? f : b > 0 ? 1 : !1
            };
        s.succeedBind = function (a) {
            s.succeed(), s.promptOK = !0, j(function () {
                s.promptOK = !1
            }, 3e3), t = !1
        }, s.failBuy = function (a) {
            s.succeed(), s.vNo = "", s.promptERR = !0, j(function () {
                s.promptERR = !1
            }, 2e3), s.wordERR = a
        }, s.buyTicketWay = function (a, b) {
            h.buyTicketsWithVouchers(a, function (a) {
                a.data._record ? s.succeedBind(a.data._record) : s.succeedBind(), b && (s.spePrice = "", i.index({
                    id: s._member
                }, function (a) {
                    s.name = a.data.member.name, s.tot = a.data.member.cards[0].total, s.vTot = a.data.member.virtualAccount.total, _.each(a.data.member.specialAccount, function (a) {
                        "包玉刚游泳馆专用账户" == a.name && (s.spePrice = a.total)
                    }), s.print("余额支付", "member")
                }, function (a) {
                    s.failBuy(a.data.data)
                }))
            }, function (a) {
                s.failBuy(a.data.data)
            })
        }, s.addTicket = function () {
            var a = !1;
            if (_.each(s.buyTickets, function (b) {
                b.vNo == s.vNo && (a = !0)
            }), a) return s.vNo = "", void(t = !1);
            if (t) return void(s.vNo = "");
            var b = {
                _venue: s._venue,
                bindArr: [{
                    voucherNo: s.vNo,
                    _ticket: s._ticket
                }]
            };
            h.check(b, function (a) {
                var b = {
                    order: s.ringNum,
                    name: s.ticketName,
                    vNo: s.vNo,
                    price: s.ticketPrice,
                    fee: s.deposit,
                    time: s.ticketState,
                    select: !0,
                    _ticket: s._ticket,
                    isDiscount: s.isDiscount,
                    fps: s.fps
                };
                s.buyTickets.push(b), s.vNo = "", s.ringNum = s.ringNum + 1, s.payPrice = s.dealNumber(s.payPrice + s.ticketPrice + s.deposit)
            }, function (a) {
                t = !1, s.vNo = "", s.promptERR = !0, j(function () {
                    s.promptERR = !1
                }, 2e3), s.wordERR = a.data.data
            })
        }, document.onkeydown = function (b) {
            var c = b || window.event || arguments.callee.caller.arguments[0];
            if (c && 39 == c.keyCode) {
                for (var d = 0; d < s.tickets.length; d++)
                    if (s.tickets[d].isChoose) {
                        s.tickets[d].isChoose = !1, d == s.tickets.length - 1 ? s.num = 0 : s.num = d + 1, s.getTicket();
                        break
                    }
            } else if (c && 37 == c.keyCode) {
                for (var d = 0; d < s.tickets.length; d++)
                    if (s.tickets[d].isChoose) {
                        s.tickets[d].isChoose = !1, 0 == d ? s.num = s.tickets.length - 1 : s.num = d - 1, s.getTicket();
                        break
                    }
            } else c && 32 == c.keyCode && a.$apply(function () {
                s.sureSale()
            }), c && 13 == c.keyCode && a.$apply(function () {
                if (s.payFlag) {
                    if (0 == s.buyTickets.length) return void(t = !1);
                    s.promptWARN = !0, s.wordWARN = "支付中";
                    var a = {
                        _venue: s._venue,
                        auth_code: s.auth_code,
                        spbill_create_ip: "0.0.0.0",
                        tickets: s.payTickets,
                        prep_total_fee: s.fee
                    };
                    switch (s.buyPayment) {
                    case "wx":
                        h.wxBuy(a, function (a) {
                            a.data._preporder ? s.succeedBind(a.data._preporder) : s.succeedBind()
                        }, function (a) {
                            t = !1, s.failBuy(a.data.data)
                        });
                        break;
                    case "alipay":
                        m.payTicket(a, function (a) {
                            a.data._preporder ? s.succeedBind(a.data._preporder) : s.succeedBind()
                        }, function (a) {
                            t = !1, s.failBuy(a.data.data)
                        });
                        break;
                    case "member":
                        var b = {};
                        k.index({
                            id: "today"
                        }, function (c) {
                            r = c.data;
                            var d = u(s.auth_code);
                            return 1 == d ? (t = !1, void s.failBuy("二维码已过期，请刷新再试")) : void(d ? i.index({
                                id: d
                            }, function (b) {
                                s.members = b.data.member, a = _.merge(a, {
                                    _member: d,
                                    payment: "member"
                                }), s._member = d, s.buyTicketWay(a, "member")
                            }, function (a) {
                                t = !1, s.promptERR = !0, j(function () {
                                    s.promptERR = !1
                                }, 2e3), s.wordERR = a.data.data, s.showAuth_codeBox = !1, s.promptWARN = !1, s.payFlag = !1, s.auth_code = ""
                            }) : (b = {
                                cardNo: s.auth_code
                            }, i.indexBycard(b, function (b) {
                                s.members = b.data.member, a = _.merge(a, {
                                    _member: b.data.member._id,
                                    payment: "member"
                                }), s._member = b.data.member._id, s.buyTicketWay(a, "member")
                            }, function (a) {
                                t = !1, s.promptERR = !0, j(function () {
                                    s.promptERR = !1
                                }, 2e3), s.wordERR = a.data.data, s.showAuth_codeBox = !1, s.promptWARN = !1, s.payFlag = !1, s.auth_code = ""
                            })))
                        })
                    }
                } else {
                    if (!s.vNo) return void(t = !1);
                    var c = {
                        voucherNo: s.vNo,
                        _venue: s._venue
                    };
                    n.show(c, function (a) {
                        a.data.voucher.isUsed ? (t = !1, s.failBuy("该手环暂未结算，请更换手环")) : s.addTicket()
                    }, function (a) {
                        s.addTicket()
                    })
                }
            })
        }, s.getNowFormatDate = function (a) {
            var b = "-",
                c = ":",
                d = a.getMonth() + 1,
                e = a.getDate();
            d >= 1 && 9 >= d && (d = "0" + d), e >= 0 && 9 >= e && (e = "0" + e);
            var f = a.getFullYear() + b + d + b + e + " " + a.getHours() + c + a.getMinutes();
            return f
        }, s.print = function (a, b) {
            var c = '<div><div><h3 style="font-size:20px">包玉刚游泳场</h3><h3 style="font-size:20px">购买门票小票</h3>操作员：' + s.admin + '</h3></div><span>**********************************</span><div><div style="border-bottom: 1px solid #DADADA;"><table style="width: 100%;"><thead><tr><td width="50%">商品名称</td><td width="20%">数量</td><td width="30%">单价</td></tr></thead>';
            if (s.tTotal = 0, "member" == b) {
                for (var d = 0; d < s.bindTickets.length; d++) {
                    var e = s.bindTickets[d].isDiscount ? s.dealNumber(s.bindTickets[d].price * s.members.cards[0].discount) : s.bindTickets[d].price;
                    c = 0 == d ? c + "<tbody><tr><td>" + s.bindTickets[d].name + "</td><td>" + s.bindTickets[d].count + "</td><td>" + e + "</td></tr>" : c + "<tr><td>" + s.bindTickets[d].name + "</td><td>" + s.bindTickets[d].count + "</td><td>" + e + "</td></tr>", s.tTotal = s.tTotal + e, d == s.bindTickets.length - 1 && (c = c + "<tr><td>合计</td><td>" + s.dealNumber(s.tTotal) + "</td><td></td></tr></tbody></table></div><span>**********************************</span>")
                }
                c = c + "<div>现金账户余额:￥" + s.tot + "</div>", c = c + "<div>虚拟账户余额:￥" + s.vTot + "</div>"
            } else
                for (var d = 0; d < s.bindTickets.length; d++) c = 0 == d ? c + "<tbody><tr><td>" + s.bindTickets[d].name + "</td><td>" + s.bindTickets[d].count + "</td><td>" + s.bindTickets[d].price + "</td></tr>" : c + "<tr><td>" + s.bindTickets[d].name + "</td><td>" + s.bindTickets[d].count + "</td><td>" + s.bindTickets[d].price + "</td></tr>", s.tTotal = s.tTotal + s.bindTickets[d].price, d == s.bindTickets.length - 1 && (c = c + "<tr><td>合计</td><td>" + s.tTotal + "</td><td></td></tr></tbody></table></div><span>**********************************</span>");
            s.spePrice && (c = c + "<div>包玉刚专用账户:￥" + s.spePrice + "</div>"), c = c + "<div>用户姓名:" + s.name + "</div>", c = c + "<div>消费方式:" + a + "</div>", c = c + "<div>消费日期:" + s.getNowFormatDate(new Date) + '</div><span>**********************************</span><div style="margin-top:10px">客服电话:0571-96218</div>', c += "<div>微信平台:zj-hlsports</div>", c += '<div style="font-size:10px;margin-top:3px"><span>本系统由</span><span style="margin:0 5px">浙江黄龙呼啦网络科技有限公司</span></span>提供</div>';
            var f = getLodop();
            f.PRINT_INIT(""), f.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), f.SET_PRINTER_INDEXA(-1), f.SET_PRINT_PAGESIZE(3, 800, 100, ""), f.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", c), f.PRINT()
        }, s.sureSale = function () {
            return t ? (s.promptERR = !0, s.wordERR = "请求已发起，请勿重复点击", void j(function () {
                s.promptERR = !1
            }, 2e3)) : (t = !0, 0 == s.buyTickets.length ? void(t = !1) : (s.payFlag = !0, void s.dealPost()))
        }, s.closePay = function () {
            s.showAuth_codeBox = !1, s.payFlag = !1, s.timeout2 = !0, s.timeout1 = !1, p(), s.vNo = "", s.ringNum = 0, t = !1
        }, s.dealPost = function () {
            switch (s.fee = 0, s.payTickets = [], s.bindTickets = [], s.pVou = [], _.each(s.buyTickets, function (a) {
                if (a.select) {
                    s.fee = s.fee + a.fee;
                    var b = !1;
                    s.pVou.push(a.vNo);
                    var c = {
                        _ticket: a._ticket,
                        count: 1,
                        voucherNo: a.vNo
                    };
                    b || s.payTickets.push(c);
                    var d = {
                        _ticket: a._ticket,
                        count: 1
                    };
                    d = _.merge(d, {
                        name: a.name,
                        price: a.price,
                        isDiscount: a.isDiscount
                    }), s.bindTickets.push(d)
                }
            }), s.buyPayment) {
            case "cash":
                var a = {
                    payment: s.buyPayment,
                    tickets: s.payTickets,
                    prep_total_fee: s.fee,
                    _venue: s._venue
                };
                s.buyTicketWay(a);
                break;
            case "wx":
            case "alipay":
            case "member":
                s.timeout1 = !0, s.showAuth_codeBox = !0, s.timeout2 = !1, q()
            }
        }, s.choosePayment = function (a) {
            _.each(s.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", s.buyPayment = a.value
        }, s.dealNumber = function (a, b) {
            var c = a.toFixed(3);
            return b ? c.substring(0, c.lastIndexOf(".") + 3) : parseFloat(c.substring(0, c.lastIndexOf(".") + 3))
        }, s.move = function (a) {
            var b = [];
            _.each(s.buyTickets, function (c) {
                c.order != a.order && b.push(c)
            }), s.buyTickets = b, s.changeSelect()
        }, s.changeSelect = function (a) {
            a && (a.select = !a.select), s.payPrice = 0, _.each(s.buyTickets, function (a) {
                a.select && (s.payPrice = s.dealNumber(s.payPrice + a.price + a.fee))
            })
        }, s.changeAllS = function () {
            s.select = !s.select, _.each(s.buyTickets, function (a) {
                a.select = s.select
            }), s.changeSelect()
        }, s.succeed = function () {
            s.num = 0, s.ringNum = 0, s.payPrice = 0, s.select = !1, s.showAuth_codeBox = !1, s.promptWARN = !1, s.payFlag = !1, s.buyTickets = [], s.auth_code = "", s.timeout2 = !0, s.timeout1 = !1, s.getTicket(), p(), s.buyPayment = "member", s.paymentArr = [{
                name: "余额",
                value: "member",
                image: "singleChoose_imageYes"
            }, {
                name: "现金",
                value: "cash",
                image: "singleChoose_imageNo"
            }]
        }, s.choose = function (a) {
            t = !0, _.each(s.tickets, function (a) {
                a.isChoose = !1
            }), a.isChoose = !0, s.ticketPrice = a.price, s.isDiscount = a.isDiscount, s.ticketState = a.showDate, s.ticketName = a.name, s.ticketLimit = a.limit, s.deposit = 0, _.each(s.deposits, function (b) {
                a._item._id == b._item && (s.deposit = b.price)
            }), s._ticket = a._id, t = !1
        };
        var v = function () {
            var a = {
                type: "deposit",
                _venue: s._venue
            };
            o.index(a, function (a) {
                s.deposits = a.data.fixedamounts, s.succeed()
            }, function (a) {})
        };
        s.getTicket = function () {
            var a = {
                sortBy: "startDate",
                sortValue: "asc",
                _venue: s._venue,
                state: "valid"
            };
            h.index(a, function (a) {
                t = !0, s.tickets = a.data.tickets, s.tickets.length > 0 && (s.tickets[s.num].isChoose = !0, s.ticketPrice = s.tickets[s.num].price, s.isDiscount = s.tickets[s.num].isDiscount, s.ticketState = s.tickets[s.num].showDate, s.ticketName = s.tickets[s.num].name, s.ticketLimit = s.tickets[s.num].limit, s._ticket = s.tickets[s.num]._id, s.deposit = 0, _.each(s.deposits, function (a) {
                    s.tickets[s.num]._item._id == a._item && (s.deposit = a.price)
                })), t = !1
            }, function () {})
        };
        var w = function () {
            e.get({}, function (a) {
                s.admin = a.data.user.name, s._venue = window.localStorage._venue, v()
            }, function (a) {})
        };
        w()
    }
    angular.module("fieldApp").controller("OrgMutiCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$location", "Ticket", "Member", "$timeout", "Time", "$interval", "Alipay", "Voucher", "Fiexdamounts"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l) {
        var m = this;
        document.getElementById("voucher").focus(), document.onkeydown = function (b) {
            var c = b || window.event || arguments.callee.caller.arguments[0];
            c && 13 == c.keyCode && a.$apply(function () {
                if (m.oldNo) {
                    var a = {
                        voucherNo: m.oldNo,
                        _venue: m._venue
                    };
                    k.show(a, function (a) {
                        document.getElementById("voucher2").focus()
                    }, function (a) {
                        m.promptERR = !0, m.wordERR = a.data.data, i(function () {
                            m.promptERR = !1
                        }, 2e3), m.oldNo = ""
                    })
                }
            })
        }, m.sure = function () {
            if (!m.oldNo || !m.newNo) return m.promptERR = !0, void(m.wordERR = "请放入手环");
            var a = {
                voucherNo: m.oldNo,
                _venue: m._venue,
                newVocherNo: m.newNo
            };
            k.change(a, function (a) {
                m.promptOK = !0, m.oldNo = "", m.newNo = ""
            }, function (a) {
                m.promptERR = !0, m.wordERR = a.data.data, i(function () {
                    m.promptERR = !1
                }, 2e3)
            })
        };
        var n = function () {
            e.get({}, function (a) {
                m._venue = window.localStorage._venue
            }, function (a) {})
        };
        n()
    }
    angular.module("fieldApp").controller("OrgRingCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$location", "Ticket", "$timeout", "$interval", "Voucher", "Member"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
        function q(a) {
            void 0 !== D.mozSrcObject ? D.mozSrcObject = a : D.src = window.URL && window.URL.createObjectURL(a) || a, w = new Audio, x = s(w), x && (w.src = "polaroid." + x, w.play())
        }

        function r(a) {
            alert("Error！" + a)
        }

        function s(a) {
            if (a.canPlayType) {
                if ("" !== a.canPlayType('audio/mp4; codecs="mp4a.40.5"')) return "aac";
                if ("" !== a.canPlayType('audio/ogg; codecs="vorbis"')) return "ogg"
            }
            return !1
        }
        var t, u = this;
        u.selectFlag = !0, u.payment = "cash";
        var v = !1;
        u.paymentArr = [{
            name: "现金",
            value: "cash",
            image: "singleChoose_imageYes"
        }, {
            name: "支付宝",
            value: "alipay",
            image: "singleChoose_imageNo"
        }, {
            name: "微信",
            value: "wx",
            image: "singleChoose_imageNo"
        }, {
            name: "转账",
            value: "card",
            image: "singleChoose_imageNo"
        }, {
            name: "支票",
            value: "check",
            image: "singleChoose_imageNo"
        }, {
            name: "POS机",
            value: "pos",
            image: "singleChoose_imageNo"
        }], u.select = {
            background: "#06cae9",
            color: "#fff",
            border: "1px solid #06cae9"
        }, u.unSelect = {
            background: "fff",
            color: "#999",
            border: "1px solid #ddd"
        };
        var w, x, y = Math.pow(2, 32),
            z = 1,
            A = {
                expiration: "2020-01-01T12:00:00.000Z",
                conditions: [
                    ["content-length-range", 0, 1048576e3]
                ]
            },
            B = "LTAIPGfNDMFdDR5c",
            C = "HChjvcnbFTe67BSeolSSxVsO6GIMFS",
            D = document.querySelector("video"),
            E = document.getElementById("canvas1"),
            F = E.getContext("2d");
        navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia, window.URL = window.URL || window.webkitURL || window.mozURL || window.msURL;
        var G = [];
        u.getMedia = function () {
            u.sheFlag = !0, navigator.getUserMedia ? navigator.getUserMedia({
                video: {
                    optional: [{
                        sourceId: G[1]
                    }]
                },
                audio: !0
            }, q, r) : alert("Native device media streaming (getUserMedia) not supported in this browser.")
        }, u.getPhoto = function () {
            function a(a, b) {
                for (var c = a.split(","), d = c[0].match(/:(.*?);/)[1], e = atob(c[1]), f = e.length, g = new Uint8Array(f); f--;) g[f] = e.charCodeAt(f);
                return new File([g], b, {
                    type: d
                })
            }
            u.cameraFlag = !u.cameraFlag, F.drawImage(D, 0, 0, 110, 140);
            var b = E.toDataURL("image/png"),
                c = (new Date).getTime(),
                d = c.toString(),
                e = (Math.floor(Math.random() * (y - z)) + z).toString(),
                f = e.toString();
            u.filename = d + "_" + f + "_xx.png", u.policyBase64 = Base64.encode(JSON.stringify(A));
            var g = u.policyBase64,
                h = Crypto.HMAC(Crypto.SHA1, g, C, {
                    asBytes: !0
                });
            u.signature = Crypto.util.bytesToBase64(h), u.file = a(b, u.filename)
        };
        var H = function (a) {
            var b = a.split("|");
            if (3 != b.length) return !1;
            var a = b[0],
                c = b[1].split(""),
                d = b[2],
                e = d,
                f = parseInt(t / 6e4).toString().split("");
            if (c.length < f.length) return !1;
            for (var g = 0; g < f.length; g++) d = d.replace(f[g], c[g]);
            return d == a ? e : !1
        };
        u.dealNumber = function (a, b) {
            var c = a.toFixed(3);
            return b ? c.substring(0, c.lastIndexOf(".") + 3) : parseFloat(c.substring(0, c.lastIndexOf(".") + 3))
        }, u.closePay = function () {
            v = !1, u.showAuth_codeBox = !1, clearInterval(u.setIntervalId)
        }, u.choosePayment = function (a) {
            _.each(u.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", u.payment = a.value
        }, u.getNowFormatDate = function (a) {
            var b = "-",
                c = ":",
                d = a.getMonth() + 1,
                e = a.getDate();
            d >= 1 && 9 >= d && (d = "0" + d), e >= 0 && 9 >= e && (e = "0" + e);
            var f = a.getFullYear() + b + d + b + e + " " + a.getHours() + c + a.getMinutes();
            return f
        }, u.successBuy = function () {
            v = !1, u.promptWARN = !1, u.promptOK = !0, u.print()
        }, u.print = function (a, b) {
            var c = '<div><div><h3 style="font-size:20px">包玉刚游泳场</h3><h3 style="font-size:20px">购买门票小票</h3>操作员：' + u.admin + '</h3></div><span>**********************************</span><div><div style="border-bottom: 1px solid #DADADA;"><table style="width: 100%;"><thead><tr><td width="50%"></td><td width="20%"></td><td width="30%"></td></tr></thead>';
            u.tTotal = 0, c = c + "<tbody><tr><td>" + u.serviceName + "</td><td></td><td>" + u.total + "</td></tr></tbody></table></div><span>**********************************</span>", c = c + "<div>用户姓名:" + u.name + "</div>", c = c + "<div>消费日期:" + u.getNowFormatDate(new Date) + '</div><span>**********************************</span><div style="margin-top:10px">客服电话:0571-96218</div>', c += "<div>微信平台:zj-hlsports</div>", c += '<div style="font-size:10px;margin-top:3px"><span>本系统由</span><span style="margin:0 5px">浙江黄龙呼啦网络科技有限公司</span></span>提供</div>';
            var d = getLodop();
            d.PRINT_INIT(""), d.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), d.SET_PRINTER_INDEXA(-1), d.SET_PRINT_PAGESIZE(3, 800, 100, ""), d.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", c), d.PRINT(), u.clear()
        }, u.failBuy = function (a, b) {
            u.promptWARN = !1, v = !1, b || u.clear(), u.promptERR = !0, j(function () {
                u.promptERR = !1
            }, 2e3), u.wordERR = a
        }, u.toPay = function () {
            var a = {
                _member: u._member,
                name: u.name,
                tel: u.tel,
                _service: u._service,
                auth_code: u.auth_code,
                spbill_create_ip: "0.0.0.0",
                isCost: !1,
                isBail: u.selectFlag ? !1 : u.isBail
            };
            switch (u.cardNo2 && (a = _.merge(a, {
                serviceNo: u.cardNo2
            })), u.filename && (a = _.merge(a, {
                pic: u.filename
            })), u.xuServiceFlag && (a = _.merge(a, {
                _memberService: u._memberService
            })), u.payment) {
            case "alipay":
                l.aliService(a, function (a) {
                    u.successBuy()
                }, function (a) {
                    u.failBuy(a.data.data)
                });
                break;
            case "wx":
                i.wxService(a, function (a) {
                    u.successBuy()
                }, function (a) {
                    u.failBuy(a.data.data)
                });
                break;
            case "cash":
            case "pos":
            case "card":
            case "check":
            case "member":
                a = _.merge(a, {
                    payment: u.payment
                }), i.buy(a, function (a) {
                    u.successBuy()
                }, function (a) {
                    u.failBuy(a.data.data)
                })
            }
        }, u.judgeMember = function () {
            if (u._member) u.toPay();
            else {
                var a = {
                    mix: u.tel
                };
                m.index(a, function (a) {
                    if (1 == a.data.members.length) u._member = a.data.members[0]._id, u.toPay();
                    else if (0 == a.data.members.length) {
                        var b = {
                            name: u.name,
                            tel: u.tel,
                            idCard: u.idCard,
                            idType: "id"
                        };
                        m.create(b, function (a) {
                            u._member = a.data.member._id, u.toPay()
                        }, function (a) {
                            u.failBuy(a.data.data)
                        })
                    } else v = !1, u.promptERR = !0, j(function () {
                        u.promptERR = !1
                    }, 2e3), u.wordERR = "该手机号存在多个储值卡账户，请先处理"
                }, function (a) {
                    v = !1, u.promptERR = !0, j(function () {
                        u.promptERR = !1
                    }, 2e3), u.wordERR = a.data.data
                })
            }
        }, u.dealMemberService = function (a) {
            if (u.cardNo = a.data.memberService.serviceNo ? a.data.memberService.serviceNo : "暂无实体卡", u._member2 = a.data.memberService._member, u._memberService = a.data.memberService._id, u.img = a.data.memberService.pic ? "assets/pic/" + a.data.memberService.pic : "assets/images/p1.png", u.photoFlag = a.data.memberService.pic ? !0 : !1, u.name = a.data.memberService.name, u.tel = a.data.memberService.tel, u._member = u._member2, u.cardName = a.data.memberService.service.name, u.serviceType = a.data.memberService.service.serviceType, "date" == a.data.memberService.service.serviceType)
                if (a.data.memberService.endDate) u.endDate = a.data.memberService.endDate, (new Date).getTime() <= new Date(a.data.memberService.endDate).getTime() && (u.leftDay = parseInt((new Date(a.data.memberService.endDate).getTime() - (new Date).getTime()) / 3600 / 24e3) + "天");
                else {
                    u.leftDay = a.data.memberService.service.value + "天";
                    var b = (new Date).getTime() + 3600 * a.data.memberService.service.value * 24e3,
                        c = new Date(b).getYear(),
                        d = new Date(b).getMonth(),
                        e = new Date(b).getDate();
                    c += 1900, 12 == d ? d = 1 : d += 1, u.leftTime = c + "-" + d + "-" + e
                } else a.data.memberService.endDate && (u.endDate = a.data.memberService.endDate, u.leftDay = parseInt((new Date(a.data.memberService.endDate).getTime() - (new Date).getTime()) / 3600 / 24e3)), u.leftTime = a.data.memberService.valueLeft + "次";
            u.lockFlag = !0, u.getService(a.data.memberService.service._service, a.data.memberService.service.serviceType), u.xuServiceFlag = !0, 11 != u.tel.length && u.failBuy("手机号不对，请先修改")
        }, document.onkeydown = function (b) {
            var c = b || window.event || arguments.callee.caller.arguments[0];
            c && 13 == c.keyCode && a.$apply(function () {
                return u.isBail && !u.selectFlag ? u.total = u.p + u.bail : u.total = u.p, u.showAuth_codeBox ? (u.promptWARN = !0, void u.judgeMember()) : void(!u._member && u.cardNo && n.index({
                    id: "today"
                }, function (a) {
                    t = a.data;
                    var b = H(u.cardNo);
                    if (b) p.idIndex({
                        id: b
                    }, function (a) {
                        u.dealMemberService(a)
                    }, function (a) {
                        u.failBuy("会员不存在")
                    });
                    else {
                        var c = {
                            serviceNo: u.cardNo
                        };
                        p.index(c, function (a) {
                            u.dealMemberService(a)
                        }, function (a) {
                            u.failBuy("会员不存在")
                        })
                    }
                }))
            })
        }, u.banli = function () {
            if (!v)
                if (v = !0, u.nwFlag = !1, u.xuServiceFlag) u.buyService();
                else {
                    if (!u.cardNo2) return void u.failBuy("请绑定实体卡", "not");
                    if (!u.name || !u.tel || 11 != u.tel.length) return void u.failBuy("请正确填充用户资料", "not");
                    u.buyService()
                }
        }, u.buyService = function () {
            if (u.filename) return void u.banka();
            switch (u.payment) {
            case "alipay":
            case "wx":
                u.showAuth_codeBox = !0, u.setIntervalId = setInterval(function () {
                    document.getElementById("auth_code").focus()
                }, 100);
                break;
            case "cash":
            case "pos":
            case "card":
            case "check":
            case "member":
                u.judgeMember()
            }
        }, u.banka = function () {
            o.upload({
                url: "api/upload/pic",
                method: "POST",
                data: {
                    Filename: u.filename,
                    key: u.filename,
                    policy: u.policyBase64,
                    OSSAccessKeyId: B,
                    success_action_status: "200",
                    signature: u.signature,
                    file: u.file,
                    filename: u.filename,
                    "Content-Type": "image/png"
                }
            }).then(function (a) {
                switch (console.log("Success " + a.config.data.file.name + "uploaded. Response: " + a.data), u.payment) {
                case "alipay":
                case "wx":
                    u.showAuth_codeBox = !0, u.setIntervalId = setInterval(function () {
                        document.getElementById("auth_code").focus()
                    }, 100);
                    break;
                case "cash":
                case "pos":
                case "card":
                case "check":
                case "member":
                    u.judgeMember()
                }
            }, function (a) {
                console.log("Error status: " + a.status), v = !1
            }, function (a) {
                var b = parseInt(100 * a.loaded / a.total);
                console.log("progress: " + b + "% " + a.config.data.file.name), v = !1
            })
        }, u.clear = function (a, b) {
            b && (u.selectFlag = a), u.page = 1, u.itemsPerPage = 4, u.pagination = {
                page: u.page,
                itemsPerPage: u.itemsPerPage,
                maxSize: 5,
                numPages: null,
                totalItems: null
            }, v = !1, u.name = "", u.tel = "", u.idCard = "", u.cardNo = "", u.cardNo2 = "", u._member1 = "", u._member2 = "", u._member = "", u.cardName = "", u.endDate = "", u.leftDay = "", u.leftTime = "", u.auth_code = "", u.type = "", u.nwFlag = !1, u.lFlag = !1, u.rFlag = !1, u.isCost = !0, u.memberFlag = !1, u.sheFlag = !1, u.cameraFlag = !1, u.photoFlag = !1, u.xuServiceFlag = !1, u.isBail = !0, u._memberService = "", u.filename = "", u.total = u.p, u.showAuth_codeBox = !1, u.img = "assets/images/p1.png", u.getService(), u.closePay(), a || (u.isCost = !0), j(function () {
                u.promptOK = !1, u.selectFlag && document.getElementById("cardNo").focus()
            }, 2e3)
        }, u.cal = function (a) {
            u.isBail = !u.isBail, u.selectFlag ? u.total = u.p : u.isBail ? u.total = u.p + u.bail : u.total = u.p
        }, u.chooseCard = function (a) {
            _.each(u.services, function (a) {
                a.choose = !1
            }), a.choose = !0, u._service = a._id, u.cardCost = a.cardCost, u.bail = a.bail, u.serviceName = a.name, u.p = a.price, u.selectFlag ? u.total = a.price : u.isBail ? u.total = a.price + a.bail : u.total = a.price
        }, u.changeService = function (a) {
            "add" == a ? u.pagination.page = u.pagination.page + 1 : u.pagination.page = u.pagination.page - 1, u.getService()
        }, u.getService = function (a, b) {
            var c = {
                _venue: u._venue
            };
            a ? i.index({
                id: a
            }, c, function (a) {
                if (a.data.service.isActive) {
                    u.lFlag = !1, u.rFlag = !1, u.services = [], u.services.push(a.data.service);
                    for (var b = 0; b < u.services.length; b++) 0 == b ? (u.services[b].choose = !0, u._service = u.services[b]._id, u.total = u.services[b].price, u.p = u.total, u.bail = u.services[b].bail, u.cardCost = u.services[b].cardCost, u.serviceName = u.services[b].name, !u.selectFlag && u.isBail && (u.total = u.total + u.bail)) : u.services[b].choose = !1, "date" == u.services[b].type ? (u.services[b].type = "时间卡", u.services[b].value = u.services[b].value + "天", u.services[b].limit = u.services[b].limit + "分钟") : (u.services[b].type = "次数卡", u.services[b].value = u.services[b].value + "次", u.services[b].limit = u.services[b].limit + "分钟")
                } else u.getService("", a.data.service.type);
                u.lockFlag = !1
            }, function (a) {
                u.failBuy(a.data.data)
            }) : (u.type && (c = _.merge(c, {
                type: u.type
            })), b && (c = _.merge(c, {
                type: b
            }), u.type = b), i.index(c, function (a) {
                u.services = a.data.services;
                for (var b = 0; b < u.services.length; b++) 0 == b ? (u.services[b].choose = !0, u._service = u.services[b]._id, u.total = u.services[b].price, u.p = u.total, u.bail = u.services[b].bail, u.cardCost = u.services[b].cardCost, u.serviceName = u.services[b].name, !u.selectFlag && u.isBail && (u.total = u.total + u.bail)) : u.services[b].choose = !1, "date" == u.services[b].type ? (u.services[b].type = "时间卡", u.services[b].value = u.services[b].value + "天", u.services[b].limit = u.services[b].limit + "分钟") : (u.services[b].type = "次数卡", u.services[b].value = u.services[b].value + "次", u.services[b].limit = u.services[b].limit + "分钟");
                u.lockFlag = !1
            }, function (a) {
                u.failBuy(a.data.data)
            }))
        };
        var I = function () {
            u._venue = window.localStorage._venue, u.clear(), e.get({}, function (a) {
                u.admin = a.data.user.name
            }, function (a) {})
        };
        I()
    }
    angular.module("fieldApp").controller("OrgShopCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Service", "$timeout", "$interval", "Alipay", "Member", "Time", "Upload", "MemberService"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this,
            m = function () {
                var a = {
                    startDate: (new Date).getTime(),
                    endDate: (new Date).getTime(),
                    _venue: "5a1e4774138f87e51c2e79e9"
                };
                k.count(a, function (a) {
                    l.data = a.data
                }, function (a) {})
            },
            n = function () {
                setTimeout(function () {
                    n(), m()
                }, 5e3)
            };
        n()
    }
    angular.module("fieldApp").controller("OrgShowCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "$timeout", "$interval", "Voucher"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
        var q, r = this;
        r.num = 0, r.cashFlag = !0, r.ringNum = 0, r.deposit = 0, r.buyPayment = "cash", a.$on("$destroy", function () {
            clearInterval(r.setFocus)
        }), r.setFocus = setInterval(function () {
            document.getElementById("voucher").focus()
        }, 100);
        var s = function (a) {
            var b = a.split("|");
            if (3 != b.length) return !1;
            var a = b[0],
                c = b[1].split(""),
                d = b[2],
                e = d,
                f = parseInt(q / 6e4).toString().split("");
            if (c.length < f.length) return !1;
            for (var g = 0; g < f.length; g++) d = d.replace(f[g], c[g]);
            return d == a ? e : !1
        };
        document.onkeydown = function (b) {
            var c = b || window.event || arguments.callee.caller.arguments[0]; {
                if (!c || 120 != c.keyCode) return c && 119 == c.keyCode ? void a.$apply(function () {
                    r.aliFlag ? (r.aliFlag = !1, r.wxFlag = !0, r.buyPayment = "wx") : r.wxFlag ? (r.wxFlag = !1, r.memberFlag = !0, r.buyPayment = "member") : r.cashFlag ? (r.cashFlag = !1, r.aliFlag = !0, r.buyPayment = "ali") : r.memberFlag && (r.memberFlag = !1, r.cashFlag = !0, r.buyPayment = "cash")
                }) : void(c && 13 == c.keyCode && a.$apply(function () {
                    0 == r.ringNum ? (clearInterval(r.setFocus), r.v = r.vNo, r.ringNum = r.ringNum + 1) : 1 == r.ringNum && r.sureSale()
                }));
                for (var d = 0; d < r.tickets.length; d++)
                    if (r.tickets[d].isChoose) {
                        r.tickets[d].isChoose = !1, d == r.tickets.length - 1 ? r.num = 0 : r.num = d + 1, r.getTicket();
                        break
                    }
            }
        }, r.getNowFormatDate = function (a) {
            var b = "-",
                c = ":",
                d = a.getMonth() + 1,
                e = a.getDate();
            d >= 1 && 9 >= d && (d = "0" + d), e >= 0 && 9 >= e && (e = "0" + e);
            var f = a.getFullYear() + b + d + b + e + " " + a.getHours() + c + a.getMinutes();
            return f
        }, r.dealNumber = function (a, b) {
            var c = a.toFixed(3);
            return b ? c.substring(0, c.lastIndexOf(".") + 3) : parseFloat(c.substring(0, c.lastIndexOf(".") + 3))
        }, r.print = function (a, b) {
            var c = '<div><div><h3 style="font-size:20px">欢迎光临</h3><h3 style="font-size:20px">购买商品消费小票</h3>操作员：' + r.admin + '</h3></div><span>**********************************</span><div><div style="border-bottom: 1px solid #DADADA;"><table style="width: 100%;"><thead><tr><td width="50%">商品名称</td><td width="20%">数量</td><td width="30%">单价</td></tr></thead>';
            if (r.tTotal = 0, "member" == b) {
                for (var d = 0; d < r.buyTickets.length; d++) c = 0 == d ? c + "<tbody><tr><td>" + r.buyTickets[d].name + "</td><td>1</td><td>" + r.dealNumber(r.buyTickets[d].price * r.members.cards[0].discount) + "</td></tr>" : c + "<tr><td>" + r.buyTickets[d].name + "</td><td>1</td><td>" + r.dealNumber(r.buyTickets[d].price * r.members.cards[0].discount) + "</td></tr>", r.tTotal = r.tTotal + r.buyTickets[d].price * r.members.cards[0].discount, d == r.buyTickets.length - 1 && (c = c + "<tr><td>合计</td><td>" + r.dealNumber(r.tTotal) + "</td><td></td></tr></tbody></table></div><span>**********************************</span>");
                if (r.members.cards.length > 0) var e = "" + r.members.cards[0].total;
                else var e = "0";
                c = c + "<div>现金账户余额:￥" + (e - r.tTotal) + "</div>"
            } else
                for (var d = 0; d < r.buyTickets.length; d++) c = 0 == d ? c + "<tbody><tr><td>" + r.buyTickets[d].name + "</td><td>1</td><td>" + r.buyTickets[d].price + "</td></tr>" : c + "<tr><td>" + r.buyTickets[d].name + "</td><td>1</td><td>" + r.buyTickets[d].price + "</td></tr>", d == r.buyTickets.length - 1 && (c = c + "<tr><td>合计</td><td>" + r.total + "</td><td></td></tr></tbody></table></div><span>**********************************</span>");
            c = c + "<div>消费方式:" + a + "</div>", c = c + "<div>消费日期:" + r.getNowFormatDate(new Date) + "</div><span>**********************************</span><div>客户签名:</div>";
            var f = getLodop();
            f.PRINT_INIT(""), f.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), f.SET_PRINTER_INDEXA(-1), f.SET_PRINT_PAGESIZE(3, 800, 100, ""), f.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", c), f.PRINT()
        }, r.sureSale = function () {
            if (r.vNo) {
                if (r.ringNum = r.ringNum + 1, r.v && (r.vNo = r.v), "cash" == r.buyPayment) {
                    var a = {
                        payment: "cash",
                        tickets: r.buyTickets,
                        prep_total_fee: 1 * r.deposit
                    };
                    return void i.buy(a, function (a) {
                        r.promptOK = !0, r.pre = "", a.data._record && (r.pre = a.data._record);
                        var b = {
                            voucherNo: r.vNo,
                            _venue: r._venue,
                            _ticket: r.buyTickets[0]._ticket,
                            _record: r.pre
                        };
                        m.create(b, function (a) {
                            r.vNo = "", r.ringNum = 0
                        }, function (a) {
                            r.promptERR = !0, r.auth_code = "", r.vNo = "", r.ringNum = 0, r.wordERR = a.data.data
                        })
                    }, function (a) {
                        r.vNo = "", r.promptERR = !1, r.wordERR = a.data.data
                    })
                }
                r.showAuth_codeBox = !0, r.setIntervalId = setInterval(function () {
                    document.getElementById("auth_code").focus()
                }, 100)
            }
        }, r.closePay = function () {
            r.showAuth_codeBox = !1, clearInterval(r.setIntervalId), r.setFocus = setInterval(function () {
                document.getElementById("voucher").focus()
            }, 100), r.vNo = "", r.ringNum = 0
        }, r.choosePayment = function (a) {
            _.each(r.paymentArr, function (a) {
                a.image = "singleChoose_imageNo"
            }), a.image = "singleChoose_imageYes", r.buyPayment = a.value
        }, r.succeed = function () {
            r.showAuth_codeBox = !1, r.promptWARN = !1, r.ringNum = 0, r.auth_code = "", clearInterval(r.setIntervalId), k.cancel(r.timerHandler), r.setFocus = setInterval(function () {
                document.getElementById("voucher").focus()
            }, 100)
        }, r.auth_codeCreate = function (a) {
            if (r.promptWARN = !0, r.wordWARN = "支付中", 13 == a.keyCode) switch (r.buyPayment) {
            case "wx":
                var b = {
                    _venue: r._venue,
                    auth_code: r.auth_code,
                    spbill_create_ip: "0.0.0.0",
                    tickets: r.buyTickets,
                    vouchers: [r.vNo]
                };
                i.wxBuy(b, function (a) {
                    r.succeed(), r.promptOK = !0, r.pre = "", a.data._preporder && (r.pre = a.data._preporder);
                    var b = {
                        voucherNo: r.vNo,
                        _venue: r._venue,
                        _ticket: r.buyTickets[0]._ticket,
                        _preporder: r.pre
                    };
                    m.create(b, function (a) {
                        r.vNo = ""
                    }, function (a) {
                        r.promptERR = !0, j(function () {
                            r.promptERR = !1
                        }, 2e3), r.vNo = "", r.wordERR = a.data.data
                    })
                }, function (a) {
                    r.succeed(), r.vNo = "", r.promptERR = !0, j(function () {
                        r.promptERR = !1
                    }, 2e3), r.wordERR = a.data.data
                });
                break;
            case "ali":
                var b = {
                    _venue: r._venue,
                    auth_code: r.auth_code,
                    tickets: r.buyTickets,
                    vouchers: [r.vNo]
                };
                l.payTicket(b, function (a) {
                    r.succeed(), r.promptOK = !0, r.pre = "", a.data._preporder && (r.pre = a.data._preporder);
                    var b = {
                        voucherNo: r.vNo,
                        _venue: r._venue,
                        _ticket: r.buyTickets[0]._ticket,
                        _preporder: r.pre
                    };
                    m.create(b, function (a) {
                        r.vNo = ""
                    }, function (a) {
                        r.promptERR = !0, j(function () {
                            r.promptERR = !1
                        }, 2e3), r.vNo = "", r.wordERR = a.data.data
                    })
                }, function (a) {
                    r.succeed(), r.vNo = "", r.promptERR = !0, j(function () {
                        r.promptERR = !1
                    }, 2e3), r.wordERR = a.data.data + ",请更新支付码再支付"
                });
                break;
            case "member":
                var c = {};
                o.index({
                    id: "today"
                }, function (a) {
                    q = a.data;
                    var b = s(r.auth_code);
                    b ? n.index({
                        id: b
                    }, function (a) {
                        r.members = a.data.member;
                        var c = {
                            _member: b,
                            payment: "member",
                            tickets: r.buyTickets,
                            prep_total_fee: 1 * r.deposit,
                            vouchers: [r.vNo]
                        };
                        i.buy(c, function (a) {
                            r.succeed(), r.promptOK = !0, r.pre = "", a.data._record && (r.pre = a.data._record);
                            var c = {
                                voucherNo: r.vNo,
                                _venue: r._venue,
                                _ticket: r.buyTickets[0]._ticket,
                                _record: r.pre,
                                _member: b
                            };
                            m.create(c, function (a) {
                                r.vNo = "", r.print("余额支付", "member")
                            }, function (a) {
                                r.promptERR = !0, j(function () {
                                    r.promptERR = !1
                                }, 2e3), r.vNo = "", r.wordERR = a.data.data
                            })
                        }, function (a) {
                            r.succeed(), r.vNo = "", r.promptERR = !0, j(function () {
                                r.promptERR = !1
                            }, 2e3), r.wordERR = a.data.data
                        })
                    }, function (a) {
                        r.succeed(), r.vNo = "", r.promptERR = !0, j(function () {
                            r.promptERR = !1
                        }, 2e3), r.wordERR = "会员不存在"
                    }) : (c = {
                        cardNo: r.auth_code
                    }, n.indexBycard(c, function (a) {
                        r.members = a.data.member;
                        var b = {
                            _member: a.data.member._id,
                            payment: "member",
                            tickets: r.buyTickets,
                            prep_total_fee: 1 * r.deposit,
                            vouchers: [r.vNo]
                        };
                        i.buy(b, function (b) {
                            r.succeed(), r.promptOK = !0, r.pre = "", b.data._record && (r.pre = b.data._record);
                            var c = {
                                voucherNo: r.vNo,
                                _venue: r._venue,
                                _ticket: r.buyTickets[0]._ticket,
                                _record: r.pre,
                                _member: a.data.member._id
                            };
                            m.create(c, function (a) {
                                r.vNo = "", r.print("余额支付", "member")
                            }, function (a) {
                                r.promptERR = !0, j(function () {
                                    r.promptERR = !1
                                }, 2e3), r.vNo = "", r.wordERR = a.data.data
                            })
                        }, function (a) {
                            r.succeed(), r.vNo = "", r.promptERR = !0, j(function () {
                                r.promptERR = !1
                            }, 2e3), r.wordERR = a.data.data
                        })
                    }, function (a) {
                        r.succeed(), r.vNo = "", r.promptERR = !0, j(function () {
                            r.promptERR = !1
                        }, 2e3), r.wordERR = "会员不存在"
                    }))
                })
            }
        }, r.choose = function (a) {
            _.each(r.tickets, function (a) {
                a.isChoose = !1
            }), a.isChoose = !0, r.ticketPrice = a.price, r.ticketState = a.showDate, r.ticketLimit = a.limit, r.deposit = 0, _.each(r.deposits, function (b) {
                a._item._id == b._item && (r.deposit = b.price)
            });
            var b = {
                _ticket: a._id,
                name: a.name,
                price: a.price,
                count: 1
            };
            r.total = r.ticketPrice + r.deposit, r.buyTickets = [], r.buyTickets.push(b)
        };
        var t = function () {
            var a = {
                type: "deposit",
                _venue: r._venue
            };
            g.index(a, function (a) {
                r.deposits = a.data.fixedamounts, r.getTicket()
            }, function (a) {})
        };
        r.getTicket = function () {
            var a = {
                sortBy: "startDate",
                sortValue: "asc",
                _venue: r._venue,
                state: "valid"
            };
            i.index(a, function (a) {
                if (r.tickets = a.data.tickets, r.tickets.length > 0) {
                    r.tickets[r.num].isChoose = !0, r.ticketPrice = r.tickets[r.num].price, r.ticketState = r.tickets[r.num].showDate, r.ticketLimit = r.tickets[r.num].limit, r.deposit = 0, _.each(r.deposits, function (a) {
                        r.tickets[r.num]._item._id == a._item && (r.deposit = a.price)
                    });
                    var b = {
                        _ticket: r.tickets[r.num]._id,
                        name: r.tickets[r.num].name,
                        price: r.tickets[r.num].price,
                        count: 1
                    };
                    r.total = r.ticketPrice + r.deposit, r.buyTickets = [], r.buyTickets.push(b)
                }
            }, function () {})
        };
        var u = function () {
            e.get({}, function (a) {
                r.admin = a.data.user.name, r._venue = a.data.user.venues[0], p.show({}, {
                    _venue: a.data.user._venue
                }, function (a) {
                    var b = [{
                        name: "支付宝",
                        value: "alipay",
                        image: "singleChoose_imageYes"
                    }, {
                        name: "微信",
                        value: "wx",
                        image: "singleChoose_imageNo"
                    }, {
                        name: "余额",
                        value: "member",
                        image: "singleChoose_imageNo"
                    }, {
                        name: "现金",
                        value: "cash",
                        image: "singleChoose_imageNo"
                    }, {
                        name: "转账",
                        value: "card",
                        image: "singleChoose_imageNo"
                    }, {
                        name: "支票",
                        value: "check",
                        image: "singleChoose_imageNo"
                    }, {
                        name: "POS机",
                        value: "pos",
                        image: "singleChoose_imageNo"
                    }];
                    if (r.paymentArr = [], a.data.venuePay.ticket.payments.length > 0) {
                        for (var c = 0; c < a.data.venuePay.ticket.payments.length; c++)
                            for (var d = 0; d < b.length; d++)
                                if (a.data.venuePay.ticket.payments[c] == b[d].value) {
                                    var e = {
                                        name: b[d].name,
                                        value: b[d].value,
                                        image: 0 == c ? "singleChoose_imageYes" : "singleChoose_imageNo"
                                    };
                                    0 == c && (r.buyPayment = b[d].value), r.paymentArr.push(e)
                                }
                    } else r.promptERR = !0, r.wordERR = "请先设置支付参数"
                }, function (a) {}), t()
            }, function (a) {})
        };
        u()
    }
    angular.module("fieldApp").controller("CsdSingalCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "Fiexdamounts", "$location", "Ticket", "$timeout", "$interval", "Alipay", "Vouchers", "Member", "Time", "Venuepay"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.enter = function () {
            var a = {
                Card: k.vNo,
                Reader: 0,
                ID: "xE7Fk6B505"
            };
            g.index(a, function (a) {}, function (a) {})
        }, k.out = function () {
            var a = {
                Card: k.vNo,
                Reader: 1,
                ID: "xE7Fk6B505"
            };
            g.index(a, function (a) {}, function (a) {})
        };
        var l = function () {
            e.get({}, function (a) {
                k.title = a.data.user.CsdanizationName, k.name = a.data.user.name
            }, function (a) {})
        };
        l()
    }
    angular.module("fieldApp").controller("OrgTestCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "Accessctr", "$location", "$timeout", "$interval"]
}();
var QRCode;
! function () {
    function a(a) {
        this.mode = j.MODE_8BIT_BYTE, this.data = a, this.parsedData = [];
        for (var b = 0, c = this.data.length; c > b; b++) {
            var d = [],
                e = this.data.charCodeAt(b);
            e > 65536 ? (d[0] = 240 | (1835008 & e) >>> 18, d[1] = 128 | (258048 & e) >>> 12, d[2] = 128 | (4032 & e) >>> 6, d[3] = 128 | 63 & e) : e > 2048 ? (d[0] = 224 | (61440 & e) >>> 12, d[1] = 128 | (4032 & e) >>> 6, d[2] = 128 | 63 & e) : e > 128 ? (d[0] = 192 | (1984 & e) >>> 6, d[1] = 128 | 63 & e) : d[0] = e, this.parsedData.push(d)
        }
        this.parsedData = Array.prototype.concat.apply([], this.parsedData), this.parsedData.length != this.data.length && (this.parsedData.unshift(191), this.parsedData.unshift(187), this.parsedData.unshift(239))
    }

    function b(a, b) {
        this.typeNumber = a, this.errorCorrectLevel = b, this.modules = null, this.moduleCount = 0, this.dataCache = null, this.dataList = []
    }

    function c(a, b) {
        if (void 0 == a.length) throw new Error(a.length + "/" + b);
        for (var c = 0; c < a.length && 0 == a[c];) c++;
        this.num = new Array(a.length - c + b);
        for (var d = 0; d < a.length - c; d++) this.num[d] = a[d + c]
    }

    function d(a, b) {
        this.totalCount = a, this.dataCount = b
    }

    function e() {
        this.buffer = [], this.length = 0
    }

    function f() {
        return "undefined" != typeof CanvasRenderingContext2D
    }

    function g() {
        var a = !1,
            b = navigator.userAgent;
        return /android/i.test(b) && (a = !0, aMat = b.toString().match(/android ([0-9]\.[0-9])/i), aMat && aMat[1] && (a = parseFloat(aMat[1]))), a
    }

    function h(a, b) {
        for (var c = 1, d = i(a), e = 0, f = p.length; f >= e; e++) {
            var g = 0;
            switch (b) {
            case k.L:
                g = p[e][0];
                break;
            case k.M:
                g = p[e][1];
                break;
            case k.Q:
                g = p[e][2];
                break;
            case k.H:
                g = p[e][3]
            }
            if (g >= d) break;
            c++
        }
        if (c > p.length) throw new Error("Too long data");
        return c
    }

    function i(a) {
        var b = encodeURI(a).toString().replace(/\%[0-9a-fA-F]{2}/g, "a");
        return b.length + (b.length != a ? 3 : 0)
    }
    a.prototype = {
        getLength: function (a) {
            return this.parsedData.length
        }, write: function (a) {
            for (var b = 0, c = this.parsedData.length; c > b; b++) a.put(this.parsedData[b], 8)
        }
    }, b.prototype = {
        addData: function (b) {
            var c = new a(b);
            this.dataList.push(c), this.dataCache = null
        }, isDark: function (a, b) {
            if (0 > a || this.moduleCount <= a || 0 > b || this.moduleCount <= b) throw new Error(a + "," + b);
            return this.modules[a][b]
        }, getModuleCount: function () {
            return this.moduleCount
        }, make: function () {
            this.makeImpl(!1, this.getBestMaskPattern())
        }, makeImpl: function (a, c) {
            this.moduleCount = 4 * this.typeNumber + 17, this.modules = new Array(this.moduleCount);
            for (var d = 0; d < this.moduleCount; d++) {
                this.modules[d] = new Array(this.moduleCount);
                for (var e = 0; e < this.moduleCount; e++) this.modules[d][e] = null
            }
            this.setupPositionProbePattern(0, 0), this.setupPositionProbePattern(this.moduleCount - 7, 0), this.setupPositionProbePattern(0, this.moduleCount - 7), this.setupPositionAdjustPattern(), this.setupTimingPattern(), this.setupTypeInfo(a, c), this.typeNumber >= 7 && this.setupTypeNumber(a), null == this.dataCache && (this.dataCache = b.createData(this.typeNumber, this.errorCorrectLevel, this.dataList)), this.mapData(this.dataCache, c)
        }, setupPositionProbePattern: function (a, b) {
            for (var c = -1; 7 >= c; c++)
                if (!(-1 >= a + c || this.moduleCount <= a + c))
                    for (var d = -1; 7 >= d; d++) - 1 >= b + d || this.moduleCount <= b + d || (c >= 0 && 6 >= c && (0 == d || 6 == d) || d >= 0 && 6 >= d && (0 == c || 6 == c) || c >= 2 && 4 >= c && d >= 2 && 4 >= d ? this.modules[a + c][b + d] = !0 : this.modules[a + c][b + d] = !1)
        }, getBestMaskPattern: function () {
            for (var a = 0, b = 0, c = 0; 8 > c; c++) {
                this.makeImpl(!0, c);
                var d = m.getLostPoint(this);
                (0 == c || a > d) && (a = d, b = c)
            }
            return b
        }, createMovieClip: function (a, b, c) {
            var d = a.createEmptyMovieClip(b, c),
                e = 1;
            this.make();
            for (var f = 0; f < this.modules.length; f++)
                for (var g = f * e, h = 0; h < this.modules[f].length; h++) {
                    var i = h * e,
                        j = this.modules[f][h];
                    j && (d.beginFill(0, 100), d.moveTo(i, g), d.lineTo(i + e, g), d.lineTo(i + e, g + e), d.lineTo(i, g + e), d.endFill())
                }
            return d
        }, setupTimingPattern: function () {
            for (var a = 8; a < this.moduleCount - 8; a++) null == this.modules[a][6] && (this.modules[a][6] = a % 2 == 0);
            for (var b = 8; b < this.moduleCount - 8; b++) null == this.modules[6][b] && (this.modules[6][b] = b % 2 == 0)
        }, setupPositionAdjustPattern: function () {
            for (var a = m.getPatternPosition(this.typeNumber), b = 0; b < a.length; b++)
                for (var c = 0; c < a.length; c++) {
                    var d = a[b],
                        e = a[c];
                    if (null == this.modules[d][e])
                        for (var f = -2; 2 >= f; f++)
                            for (var g = -2; 2 >= g; g++) - 2 == f || 2 == f || -2 == g || 2 == g || 0 == f && 0 == g ? this.modules[d + f][e + g] = !0 : this.modules[d + f][e + g] = !1
                }
        }, setupTypeNumber: function (a) {
            for (var b = m.getBCHTypeNumber(this.typeNumber), c = 0; 18 > c; c++) {
                var d = !a && 1 == (b >> c & 1);
                this.modules[Math.floor(c / 3)][c % 3 + this.moduleCount - 8 - 3] = d
            }
            for (var c = 0; 18 > c; c++) {
                var d = !a && 1 == (b >> c & 1);
                this.modules[c % 3 + this.moduleCount - 8 - 3][Math.floor(c / 3)] = d
            }
        }, setupTypeInfo: function (a, b) {
            for (var c = this.errorCorrectLevel << 3 | b, d = m.getBCHTypeInfo(c), e = 0; 15 > e; e++) {
                var f = !a && 1 == (d >> e & 1);
                6 > e ? this.modules[e][8] = f : 8 > e ? this.modules[e + 1][8] = f : this.modules[this.moduleCount - 15 + e][8] = f
            }
            for (var e = 0; 15 > e; e++) {
                var f = !a && 1 == (d >> e & 1);
                8 > e ? this.modules[8][this.moduleCount - e - 1] = f : 9 > e ? this.modules[8][15 - e - 1 + 1] = f : this.modules[8][15 - e - 1] = f
            }
            this.modules[this.moduleCount - 8][8] = !a
        }, mapData: function (a, b) {
            for (var c = -1, d = this.moduleCount - 1, e = 7, f = 0, g = this.moduleCount - 1; g > 0; g -= 2)
                for (6 == g && g--;;) {
                    for (var h = 0; 2 > h; h++)
                        if (null == this.modules[d][g - h]) {
                            var i = !1;
                            f < a.length && (i = 1 == (a[f] >>> e & 1));
                            var j = m.getMask(b, d, g - h);
                            j && (i = !i), this.modules[d][g - h] = i, e--, -1 == e && (f++, e = 7)
                        }
                    if (d += c, 0 > d || this.moduleCount <= d) {
                        d -= c, c = -c;
                        break
                    }
                }
        }
    }, b.PAD0 = 236, b.PAD1 = 17, b.createData = function (a, c, f) {
        for (var g = d.getRSBlocks(a, c), h = new e, i = 0; i < f.length; i++) {
            var j = f[i];
            h.put(j.mode, 4), h.put(j.getLength(), m.getLengthInBits(j.mode, a)), j.write(h)
        }
        for (var k = 0, i = 0; i < g.length; i++) k += g[i].dataCount;
        if (h.getLengthInBits() > 8 * k) throw new Error("code length overflow. (" + h.getLengthInBits() + ">" + 8 * k + ")");
        for (h.getLengthInBits() + 4 <= 8 * k && h.put(0, 4); h.getLengthInBits() % 8 != 0;) h.putBit(!1);
        for (; !(h.getLengthInBits() >= 8 * k) && (h.put(b.PAD0, 8), !(h.getLengthInBits() >= 8 * k));) h.put(b.PAD1, 8);
        return b.createBytes(h, g)
    }, b.createBytes = function (a, b) {
        for (var d = 0, e = 0, f = 0, g = new Array(b.length), h = new Array(b.length), i = 0; i < b.length; i++) {
            var j = b[i].dataCount,
                k = b[i].totalCount - j;
            e = Math.max(e, j), f = Math.max(f, k), g[i] = new Array(j);
            for (var l = 0; l < g[i].length; l++) g[i][l] = 255 & a.buffer[l + d];
            d += j;
            var n = m.getErrorCorrectPolynomial(k),
                o = new c(g[i], n.getLength() - 1),
                p = o.mod(n);
            h[i] = new Array(n.getLength() - 1);
            for (var l = 0; l < h[i].length; l++) {
                var q = l + p.getLength() - h[i].length;
                h[i][l] = q >= 0 ? p.get(q) : 0
            }
        }
        for (var r = 0, l = 0; l < b.length; l++) r += b[l].totalCount;
        for (var s = new Array(r), t = 0, l = 0; e > l; l++)
            for (var i = 0; i < b.length; i++) l < g[i].length && (s[t++] = g[i][l]);
        for (var l = 0; f > l; l++)
            for (var i = 0; i < b.length; i++) l < h[i].length && (s[t++] = h[i][l]);
        return s
    };
    for (var j = {
        MODE_NUMBER: 1,
        MODE_ALPHA_NUM: 2,
        MODE_8BIT_BYTE: 4,
        MODE_KANJI: 8
    }, k = {
        L: 1,
        M: 0,
        Q: 3,
        H: 2
    }, l = {
        PATTERN000: 0,
        PATTERN001: 1,
        PATTERN010: 2,
        PATTERN011: 3,
        PATTERN100: 4,
        PATTERN101: 5,
        PATTERN110: 6,
        PATTERN111: 7
    }, m = {
        PATTERN_POSITION_TABLE: [
            [],
            [6, 18],
            [6, 22],
            [6, 26],
            [6, 30],
            [6, 34],
            [6, 22, 38],
            [6, 24, 42],
            [6, 26, 46],
            [6, 28, 50],
            [6, 30, 54],
            [6, 32, 58],
            [6, 34, 62],
            [6, 26, 46, 66],
            [6, 26, 48, 70],
            [6, 26, 50, 74],
            [6, 30, 54, 78],
            [6, 30, 56, 82],
            [6, 30, 58, 86],
            [6, 34, 62, 90],
            [6, 28, 50, 72, 94],
            [6, 26, 50, 74, 98],
            [6, 30, 54, 78, 102],
            [6, 28, 54, 80, 106],
            [6, 32, 58, 84, 110],
            [6, 30, 58, 86, 114],
            [6, 34, 62, 90, 118],
            [6, 26, 50, 74, 98, 122],
            [6, 30, 54, 78, 102, 126],
            [6, 26, 52, 78, 104, 130],
            [6, 30, 56, 82, 108, 134],
            [6, 34, 60, 86, 112, 138],
            [6, 30, 58, 86, 114, 142],
            [6, 34, 62, 90, 118, 146],
            [6, 30, 54, 78, 102, 126, 150],
            [6, 24, 50, 76, 102, 128, 154],
            [6, 28, 54, 80, 106, 132, 158],
            [6, 32, 58, 84, 110, 136, 162],
            [6, 26, 54, 82, 110, 138, 166],
            [6, 30, 58, 86, 114, 142, 170]
        ],
        G15: 1335,
        G18: 7973,
        G15_MASK: 21522,
        getBCHTypeInfo: function (a) {
            for (var b = a << 10; m.getBCHDigit(b) - m.getBCHDigit(m.G15) >= 0;) b ^= m.G15 << m.getBCHDigit(b) - m.getBCHDigit(m.G15);
            return (a << 10 | b) ^ m.G15_MASK
        }, getBCHTypeNumber: function (a) {
            for (var b = a << 12; m.getBCHDigit(b) - m.getBCHDigit(m.G18) >= 0;) b ^= m.G18 << m.getBCHDigit(b) - m.getBCHDigit(m.G18);
            return a << 12 | b
        }, getBCHDigit: function (a) {
            for (var b = 0; 0 != a;) b++, a >>>= 1;
            return b
        }, getPatternPosition: function (a) {
            return m.PATTERN_POSITION_TABLE[a - 1]
        }, getMask: function (a, b, c) {
            switch (a) {
            case l.PATTERN000:
                return (b + c) % 2 == 0;
            case l.PATTERN001:
                return b % 2 == 0;
            case l.PATTERN010:
                return c % 3 == 0;
            case l.PATTERN011:
                return (b + c) % 3 == 0;
            case l.PATTERN100:
                return (Math.floor(b / 2) + Math.floor(c / 3)) % 2 == 0;
            case l.PATTERN101:
                return b * c % 2 + b * c % 3 == 0;
            case l.PATTERN110:
                return (b * c % 2 + b * c % 3) % 2 == 0;
            case l.PATTERN111:
                return (b * c % 3 + (b + c) % 2) % 2 == 0;
            default:
                throw new Error("bad maskPattern:" + a)
            }
        }, getErrorCorrectPolynomial: function (a) {
            for (var b = new c([1], 0), d = 0; a > d; d++) b = b.multiply(new c([1, n.gexp(d)], 0));
            return b
        }, getLengthInBits: function (a, b) {
            if (b >= 1 && 10 > b) switch (a) {
            case j.MODE_NUMBER:
                return 10;
            case j.MODE_ALPHA_NUM:
                return 9;
            case j.MODE_8BIT_BYTE:
                return 8;
            case j.MODE_KANJI:
                return 8;
            default:
                throw new Error("mode:" + a)
            } else if (27 > b) switch (a) {
            case j.MODE_NUMBER:
                return 12;
            case j.MODE_ALPHA_NUM:
                return 11;
            case j.MODE_8BIT_BYTE:
                return 16;
            case j.MODE_KANJI:
                return 10;
            default:
                throw new Error("mode:" + a)
            } else {
                if (!(41 > b)) throw new Error("type:" + b);
                switch (a) {
                case j.MODE_NUMBER:
                    return 14;
                case j.MODE_ALPHA_NUM:
                    return 13;
                case j.MODE_8BIT_BYTE:
                    return 16;
                case j.MODE_KANJI:
                    return 12;
                default:
                    throw new Error("mode:" + a)
                }
            }
        }, getLostPoint: function (a) {
            for (var b = a.getModuleCount(), c = 0, d = 0; b > d; d++)
                for (var e = 0; b > e; e++) {
                    for (var f = 0, g = a.isDark(d, e), h = -1; 1 >= h; h++)
                        if (!(0 > d + h || d + h >= b))
                            for (var i = -1; 1 >= i; i++) 0 > e + i || e + i >= b || (0 != h || 0 != i) && g == a.isDark(d + h, e + i) && f++;
                    f > 5 && (c += 3 + f - 5)
                }
            for (var d = 0; b - 1 > d; d++)
                for (var e = 0; b - 1 > e; e++) {
                    var j = 0;
                    a.isDark(d, e) && j++, a.isDark(d + 1, e) && j++, a.isDark(d, e + 1) && j++, a.isDark(d + 1, e + 1) && j++, (0 == j || 4 == j) && (c += 3)
                }
            for (var d = 0; b > d; d++)
                for (var e = 0; b - 6 > e; e++) a.isDark(d, e) && !a.isDark(d, e + 1) && a.isDark(d, e + 2) && a.isDark(d, e + 3) && a.isDark(d, e + 4) && !a.isDark(d, e + 5) && a.isDark(d, e + 6) && (c += 40);
            for (var e = 0; b > e; e++)
                for (var d = 0; b - 6 > d; d++) a.isDark(d, e) && !a.isDark(d + 1, e) && a.isDark(d + 2, e) && a.isDark(d + 3, e) && a.isDark(d + 4, e) && !a.isDark(d + 5, e) && a.isDark(d + 6, e) && (c += 40);
            for (var k = 0, e = 0; b > e; e++)
                for (var d = 0; b > d; d++) a.isDark(d, e) && k++;
            var l = Math.abs(100 * k / b / b - 50) / 5;
            return c += 10 * l
        }
    }, n = {
        glog: function (a) {
            if (1 > a) throw new Error("glog(" + a + ")");
            return n.LOG_TABLE[a]
        }, gexp: function (a) {
            for (; 0 > a;) a += 255;
            for (; a >= 256;) a -= 255;
            return n.EXP_TABLE[a]
        }, EXP_TABLE: new Array(256),
        LOG_TABLE: new Array(256)
    }, o = 0; 8 > o; o++) n.EXP_TABLE[o] = 1 << o;
    for (var o = 8; 256 > o; o++) n.EXP_TABLE[o] = n.EXP_TABLE[o - 4] ^ n.EXP_TABLE[o - 5] ^ n.EXP_TABLE[o - 6] ^ n.EXP_TABLE[o - 8];
    for (var o = 0; 255 > o; o++) n.LOG_TABLE[n.EXP_TABLE[o]] = o;
    c.prototype = {
        get: function (a) {
            return this.num[a]
        }, getLength: function () {
            return this.num.length
        }, multiply: function (a) {
            for (var b = new Array(this.getLength() + a.getLength() - 1), d = 0; d < this.getLength(); d++)
                for (var e = 0; e < a.getLength(); e++) b[d + e] ^= n.gexp(n.glog(this.get(d)) + n.glog(a.get(e)));
            return new c(b, 0)
        }, mod: function (a) {
            if (this.getLength() - a.getLength() < 0) return this;
            for (var b = n.glog(this.get(0)) - n.glog(a.get(0)), d = new Array(this.getLength()), e = 0; e < this.getLength(); e++) d[e] = this.get(e);
            for (var e = 0; e < a.getLength(); e++) d[e] ^= n.gexp(n.glog(a.get(e)) + b);
            return new c(d, 0).mod(a)
        }
    }, d.RS_BLOCK_TABLE = [
        [1, 26, 19],
        [1, 26, 16],
        [1, 26, 13],
        [1, 26, 9],
        [1, 44, 34],
        [1, 44, 28],
        [1, 44, 22],
        [1, 44, 16],
        [1, 70, 55],
        [1, 70, 44],
        [2, 35, 17],
        [2, 35, 13],
        [1, 100, 80],
        [2, 50, 32],
        [2, 50, 24],
        [4, 25, 9],
        [1, 134, 108],
        [2, 67, 43],
        [2, 33, 15, 2, 34, 16],
        [2, 33, 11, 2, 34, 12],
        [2, 86, 68],
        [4, 43, 27],
        [4, 43, 19],
        [4, 43, 15],
        [2, 98, 78],
        [4, 49, 31],
        [2, 32, 14, 4, 33, 15],
        [4, 39, 13, 1, 40, 14],
        [2, 121, 97],
        [2, 60, 38, 2, 61, 39],
        [4, 40, 18, 2, 41, 19],
        [4, 40, 14, 2, 41, 15],
        [2, 146, 116],
        [3, 58, 36, 2, 59, 37],
        [4, 36, 16, 4, 37, 17],
        [4, 36, 12, 4, 37, 13],
        [2, 86, 68, 2, 87, 69],
        [4, 69, 43, 1, 70, 44],
        [6, 43, 19, 2, 44, 20],
        [6, 43, 15, 2, 44, 16],
        [4, 101, 81],
        [1, 80, 50, 4, 81, 51],
        [4, 50, 22, 4, 51, 23],
        [3, 36, 12, 8, 37, 13],
        [2, 116, 92, 2, 117, 93],
        [6, 58, 36, 2, 59, 37],
        [4, 46, 20, 6, 47, 21],
        [7, 42, 14, 4, 43, 15],
        [4, 133, 107],
        [8, 59, 37, 1, 60, 38],
        [8, 44, 20, 4, 45, 21],
        [12, 33, 11, 4, 34, 12],
        [3, 145, 115, 1, 146, 116],
        [4, 64, 40, 5, 65, 41],
        [11, 36, 16, 5, 37, 17],
        [11, 36, 12, 5, 37, 13],
        [5, 109, 87, 1, 110, 88],
        [5, 65, 41, 5, 66, 42],
        [5, 54, 24, 7, 55, 25],
        [11, 36, 12],
        [5, 122, 98, 1, 123, 99],
        [7, 73, 45, 3, 74, 46],
        [15, 43, 19, 2, 44, 20],
        [3, 45, 15, 13, 46, 16],
        [1, 135, 107, 5, 136, 108],
        [10, 74, 46, 1, 75, 47],
        [1, 50, 22, 15, 51, 23],
        [2, 42, 14, 17, 43, 15],
        [5, 150, 120, 1, 151, 121],
        [9, 69, 43, 4, 70, 44],
        [17, 50, 22, 1, 51, 23],
        [2, 42, 14, 19, 43, 15],
        [3, 141, 113, 4, 142, 114],
        [3, 70, 44, 11, 71, 45],
        [17, 47, 21, 4, 48, 22],
        [9, 39, 13, 16, 40, 14],
        [3, 135, 107, 5, 136, 108],
        [3, 67, 41, 13, 68, 42],
        [15, 54, 24, 5, 55, 25],
        [15, 43, 15, 10, 44, 16],
        [4, 144, 116, 4, 145, 117],
        [17, 68, 42],
        [17, 50, 22, 6, 51, 23],
        [19, 46, 16, 6, 47, 17],
        [2, 139, 111, 7, 140, 112],
        [17, 74, 46],
        [7, 54, 24, 16, 55, 25],
        [34, 37, 13],
        [4, 151, 121, 5, 152, 122],
        [4, 75, 47, 14, 76, 48],
        [11, 54, 24, 14, 55, 25],
        [16, 45, 15, 14, 46, 16],
        [6, 147, 117, 4, 148, 118],
        [6, 73, 45, 14, 74, 46],
        [11, 54, 24, 16, 55, 25],
        [30, 46, 16, 2, 47, 17],
        [8, 132, 106, 4, 133, 107],
        [8, 75, 47, 13, 76, 48],
        [7, 54, 24, 22, 55, 25],
        [22, 45, 15, 13, 46, 16],
        [10, 142, 114, 2, 143, 115],
        [19, 74, 46, 4, 75, 47],
        [28, 50, 22, 6, 51, 23],
        [33, 46, 16, 4, 47, 17],
        [8, 152, 122, 4, 153, 123],
        [22, 73, 45, 3, 74, 46],
        [8, 53, 23, 26, 54, 24],
        [12, 45, 15, 28, 46, 16],
        [3, 147, 117, 10, 148, 118],
        [3, 73, 45, 23, 74, 46],
        [4, 54, 24, 31, 55, 25],
        [11, 45, 15, 31, 46, 16],
        [7, 146, 116, 7, 147, 117],
        [21, 73, 45, 7, 74, 46],
        [1, 53, 23, 37, 54, 24],
        [19, 45, 15, 26, 46, 16],
        [5, 145, 115, 10, 146, 116],
        [19, 75, 47, 10, 76, 48],
        [15, 54, 24, 25, 55, 25],
        [23, 45, 15, 25, 46, 16],
        [13, 145, 115, 3, 146, 116],
        [2, 74, 46, 29, 75, 47],
        [42, 54, 24, 1, 55, 25],
        [23, 45, 15, 28, 46, 16],
        [17, 145, 115],
        [10, 74, 46, 23, 75, 47],
        [10, 54, 24, 35, 55, 25],
        [19, 45, 15, 35, 46, 16],
        [17, 145, 115, 1, 146, 116],
        [14, 74, 46, 21, 75, 47],
        [29, 54, 24, 19, 55, 25],
        [11, 45, 15, 46, 46, 16],
        [13, 145, 115, 6, 146, 116],
        [14, 74, 46, 23, 75, 47],
        [44, 54, 24, 7, 55, 25],
        [59, 46, 16, 1, 47, 17],
        [12, 151, 121, 7, 152, 122],
        [12, 75, 47, 26, 76, 48],
        [39, 54, 24, 14, 55, 25],
        [22, 45, 15, 41, 46, 16],
        [6, 151, 121, 14, 152, 122],
        [6, 75, 47, 34, 76, 48],
        [46, 54, 24, 10, 55, 25],
        [2, 45, 15, 64, 46, 16],
        [17, 152, 122, 4, 153, 123],
        [29, 74, 46, 14, 75, 47],
        [49, 54, 24, 10, 55, 25],
        [24, 45, 15, 46, 46, 16],
        [4, 152, 122, 18, 153, 123],
        [13, 74, 46, 32, 75, 47],
        [48, 54, 24, 14, 55, 25],
        [42, 45, 15, 32, 46, 16],
        [20, 147, 117, 4, 148, 118],
        [40, 75, 47, 7, 76, 48],
        [43, 54, 24, 22, 55, 25],
        [10, 45, 15, 67, 46, 16],
        [19, 148, 118, 6, 149, 119],
        [18, 75, 47, 31, 76, 48],
        [34, 54, 24, 34, 55, 25],
        [20, 45, 15, 61, 46, 16]
    ], d.getRSBlocks = function (a, b) {
        var c = d.getRsBlockTable(a, b);
        if (void 0 == c) throw new Error("bad rs block @ typeNumber:" + a + "/errorCorrectLevel:" + b);
        for (var e = c.length / 3, f = [], g = 0; e > g; g++)
            for (var h = c[3 * g + 0], i = c[3 * g + 1], j = c[3 * g + 2], k = 0; h > k; k++) f.push(new d(i, j));
        return f
    }, d.getRsBlockTable = function (a, b) {
        switch (b) {
        case k.L:
            return d.RS_BLOCK_TABLE[4 * (a - 1) + 0];
        case k.M:
            return d.RS_BLOCK_TABLE[4 * (a - 1) + 1];
        case k.Q:
            return d.RS_BLOCK_TABLE[4 * (a - 1) + 2];
        case k.H:
            return d.RS_BLOCK_TABLE[4 * (a - 1) + 3];
        default:
            return void 0
        }
    }, e.prototype = {
        get: function (a) {
            var b = Math.floor(a / 8);
            return 1 == (this.buffer[b] >>> 7 - a % 8 & 1)
        }, put: function (a, b) {
            for (var c = 0; b > c; c++) this.putBit(1 == (a >>> b - c - 1 & 1))
        }, getLengthInBits: function () {
            return this.length
        }, putBit: function (a) {
            var b = Math.floor(this.length / 8);
            this.buffer.length <= b && this.buffer.push(0), a && (this.buffer[b] |= 128 >>> this.length % 8), this.length++
        }
    };
    var p = [
            [17, 14, 11, 7],
            [32, 26, 20, 14],
            [53, 42, 32, 24],
            [78, 62, 46, 34],
            [106, 84, 60, 44],
            [134, 106, 74, 58],
            [154, 122, 86, 64],
            [192, 152, 108, 84],
            [230, 180, 130, 98],
            [271, 213, 151, 119],
            [321, 251, 177, 137],
            [367, 287, 203, 155],
            [425, 331, 241, 177],
            [458, 362, 258, 194],
            [520, 412, 292, 220],
            [586, 450, 322, 250],
            [644, 504, 364, 280],
            [718, 560, 394, 310],
            [792, 624, 442, 338],
            [858, 666, 482, 382],
            [929, 711, 509, 403],
            [1003, 779, 565, 439],
            [1091, 857, 611, 461],
            [1171, 911, 661, 511],
            [1273, 997, 715, 535],
            [1367, 1059, 751, 593],
            [1465, 1125, 805, 625],
            [1528, 1190, 868, 658],
            [1628, 1264, 908, 698],
            [1732, 1370, 982, 742],
            [1840, 1452, 1030, 790],
            [1952, 1538, 1112, 842],
            [2068, 1628, 1168, 898],
            [2188, 1722, 1228, 958],
            [2303, 1809, 1283, 983],
            [2431, 1911, 1351, 1051],
            [2563, 1989, 1423, 1093],
            [2699, 2099, 1499, 1139],
            [2809, 2213, 1579, 1219],
            [2953, 2331, 1663, 1273]
        ],
        q = function () {
            var a = function (a, b) {
                this._el = a, this._htOption = b
            };
            return a.prototype.draw = function (a) {
                function b(a, b) {
                    var c = document.createElementNS("http://www.w3.org/2000/svg", a);
                    for (var d in b) b.hasOwnProperty(d) && c.setAttribute(d, b[d]);
                    return c
                }
                var c = this._htOption,
                    d = this._el,
                    e = a.getModuleCount();
                Math.floor(c.width / e), Math.floor(c.height / e);
                this.clear();
                var f = b("svg", {
                    viewBox: "0 0 " + String(e) + " " + String(e),
                    width: "100%",
                    height: "100%",
                    fill: c.colorLight
                });
                f.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:xlink", "http://www.w3.org/1999/xlink"), d.appendChild(f), f.appendChild(b("rect", {
                    fill: c.colorDark,
                    width: "1",
                    height: "1",
                    id: "template"
                }));
                for (var g = 0; e > g; g++)
                    for (var h = 0; e > h; h++)
                        if (a.isDark(g, h)) {
                            var i = b("use", {
                                x: String(g),
                                y: String(h)
                            });
                            i.setAttributeNS("http://www.w3.org/1999/xlink", "href", "#template"), f.appendChild(i)
                        }
            }, a.prototype.clear = function () {
                for (; this._el.hasChildNodes();) this._el.removeChild(this._el.lastChild)
            }, a
        }(),
        r = "svg" === document.documentElement.tagName.toLowerCase(),
        s = r ? q : f() ? function () {
            function a() {
                this._elImage.src = this._elCanvas.toDataURL("image/png"), this._elImage.style.display = "block", this._elCanvas.style.display = "none"
            }

            function b(a, b) {
                var c = this;
                if (c._fFail = b, c._fSuccess = a, null === c._bSupportDataURI) {
                    var d = document.createElement("img"),
                        e = function () {
                            c._bSupportDataURI = !1, c._fFail && _fFail.call(c)
                        },
                        f = function () {
                            c._bSupportDataURI = !0, c._fSuccess && c._fSuccess.call(c)
                        };
                    return d.onabort = e, d.onerror = e, d.onload = f, void(d.src = "data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")
                }
                c._bSupportDataURI === !0 && c._fSuccess ? c._fSuccess.call(c) : c._bSupportDataURI === !1 && c._fFail && c._fFail.call(c)
            }
            if (this._android && this._android <= 2.1) {
                var c = 1 / window.devicePixelRatio,
                    d = CanvasRenderingContext2D.prototype.drawImage;
                CanvasRenderingContext2D.prototype.drawImage = function (a, b, e, f, g, h, i, j, k) {
                    if ("nodeName" in a && /img/i.test(a.nodeName))
                        for (var l = arguments.length - 1; l >= 1; l--) arguments[l] = arguments[l] * c;
                    else "undefined" == typeof j && (arguments[1] *= c, arguments[2] *= c, arguments[3] *= c, arguments[4] *= c);
                    d.apply(this, arguments)
                }
            }
            var e = function (a, b) {
                this._bIsPainted = !1, this._android = g(), this._htOption = b, this._elCanvas = document.createElement("canvas"), this._elCanvas.width = b.width, this._elCanvas.height = b.height, a.appendChild(this._elCanvas), this._el = a, this._oContext = this._elCanvas.getContext("2d"), this._bIsPainted = !1, this._elImage = document.createElement("img"), this._elImage.alt = "Scan me!", this._elImage.style.display = "none", this._el.appendChild(this._elImage), this._bSupportDataURI = null
            };
            return e.prototype.draw = function (a) {
                var b = this._elImage,
                    c = this._oContext,
                    d = this._htOption,
                    e = a.getModuleCount(),
                    f = d.width / e,
                    g = d.height / e,
                    h = Math.round(f),
                    i = Math.round(g);
                b.style.display = "none", this.clear();
                for (var j = 0; e > j; j++)
                    for (var k = 0; e > k; k++) {
                        var l = a.isDark(j, k),
                            m = k * f,
                            n = j * g;
                        c.strokeStyle = l ? d.colorDark : d.colorLight, c.lineWidth = 1, c.fillStyle = l ? d.colorDark : d.colorLight, c.fillRect(m, n, f, g), c.strokeRect(Math.floor(m) + .5, Math.floor(n) + .5, h, i), c.strokeRect(Math.ceil(m) - .5, Math.ceil(n) - .5, h, i)
                    }
                this._bIsPainted = !0
            }, e.prototype.makeImage = function () {
                this._bIsPainted && b.call(this, a)
            }, e.prototype.isPainted = function () {
                return this._bIsPainted
            }, e.prototype.clear = function () {
                this._oContext.clearRect(0, 0, this._elCanvas.width, this._elCanvas.height), this._bIsPainted = !1
            }, e.prototype.round = function (a) {
                return a ? Math.floor(1e3 * a) / 1e3 : a
            }, e
        }() : function () {
            var a = function (a, b) {
                this._el = a, this._htOption = b
            };
            return a.prototype.draw = function (a) {
                for (var b = this._htOption, c = this._el, d = a.getModuleCount(), e = Math.floor(b.width / d), f = Math.floor(b.height / d), g = ['<table style="border:0;border-collapse:collapse;">'], h = 0; d > h; h++) {
                    g.push("<tr>");
                    for (var i = 0; d > i; i++) g.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:' + e + "px;height:" + f + "px;background-color:" + (a.isDark(h, i) ? b.colorDark : b.colorLight) + ';"></td>');
                    g.push("</tr>")
                }
                g.push("</table>"), c.innerHTML = g.join("");
                var j = c.childNodes[0],
                    k = (b.width - j.offsetWidth) / 2,
                    l = (b.height - j.offsetHeight) / 2;
                k > 0 && l > 0 && (j.style.margin = l + "px " + k + "px")
            }, a.prototype.clear = function () {
                this._el.innerHTML = ""
            }, a
        }();
    QRCode = function (a, b) {
        if (this._htOption = {
            width: 256,
            height: 256,
            typeNumber: 4,
            colorDark: "#000000",
            colorLight: "#ffffff",
            correctLevel: k.H
        }, "string" == typeof b && (b = {
            text: b
        }), b)
            for (var c in b) this._htOption[c] = b[c];
        "string" == typeof a && (a = document.getElementById(a)), this._android = g(), this._el = a, this._oQRCode = null, this._oDrawing = new s(this._el, this._htOption), this._htOption.text && this.makeCode(this._htOption.text)
    }, QRCode.prototype.makeCode = function (a) {
        this._oQRCode = new b(h(a, this._htOption.correctLevel), this._htOption.correctLevel), this._oQRCode.addData(a), this._oQRCode.make(), this._el.title = a, this._oDrawing.draw(this._oQRCode), this.makeImage()
    }, QRCode.prototype.makeImage = function () {
        "function" == typeof this._oDrawing.makeImage && (!this._android || this._android >= 3) && this._oDrawing.makeImage()
    }, QRCode.prototype.clear = function () {
        this._oDrawing.clear()
    }, QRCode.CorrectLevel = k
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n) {
        var o, p = this;
        p.alipayFlag = !1, p.wxFlag = !1, p.accountFlag = !0, p._venue = g._venue, p._org = g._org, p.setIntervalId = function () {
            document.getElementById("auth_code").focus()
        }, p.dealNumber = function (a) {
            var b = a.toFixed(3);
            return parseFloat(b.substring(0, b.lastIndexOf(".") + 3))
        }, p.getNowFormatDate = function (a) {
            var b = "-",
                c = ":",
                d = a.getMonth() + 1,
                e = a.getDate();
            d >= 1 && 9 >= d && (d = "0" + d), e >= 0 && 9 >= e && (e = "0" + e);
            var f = a.getFullYear() + b + d + b + e + " " + a.getHours() + c + a.getMinutes() + c + a.getSeconds();
            return f
        };
        var q = function (a) {
            var b = a.split("|");
            if (3 != b.length) return !1;
            var a = b[0],
                c = b[1].split(""),
                d = b[2],
                e = d,
                f = parseInt(o / 6e4).toString().split("");
            if (c.length < f.length) return !1;
            for (var g = 0; g < f.length; g++) d = d.replace(f[g], c[g]);
            return d == a ? e : !1
        };
        p.checkMember = function () {
            return p.auth_code ? void l.index({
                id: "today"
            }, function (a) {
                o = a.data;
                var b = q(p.auth_code);
                if (console.log(b, p.auth_code), b) {
                    var c = {
                        _member: b,
                        payment: "member",
                        tickets: p.buyTickets,
                        _org: p._org
                    };
                    i.buy(c, function (a) {
                        p.payFlag = !1, p.promptOK = !0, p.wordOK = "购买成功", k(function () {
                            p.promptOK = !1
                        }, 3e3), j.show({
                            id: b
                        }, function (a) {
                            p.member = a.data.member, p.member.cards.length > 0 ? p.tot = "" + p.member.cards[0].total : p.tot = "0", p.member.virtualAccount.expires_in ? p.xd = p.getNowFormatDate(new Date(p.member.virtualAccount.expires_in)) : p.xd = "", p.vp = p.member.virtualAccount.total, p.name = p.member.name, p.accTot = 0, _.each(p.member.specialAccount, function (a) {
                                "包玉刚专用账户" == a.name ? p.accTot = a.total : p.accTot = 0
                            }), _.each(p.buyTickets, function (a) {
                                if ("儿童票" == a.name.substring(0, 3))
                                    for (var b = 0; b < a.count; b++) p.printChild(a);
                                else
                                    for (var b = 0; b < a.count; b++) p.print(a)
                            })
                        }, function (a) {
                            p.payFlag = !1, p.promptERR = !0, p.wordERR = err.data.data
                        })
                    }, function (a) {
                        p.payFlag = !1, p.promptERR = !0, p.wordERR = a.data.data
                    })
                } else {
                    var d = {
                        cardNo: p.auth_code,
                        _org: p._org
                    };
                    j.indexBycard(d, function (a) {
                        p._member = a.data.member._id;
                        var b = {
                            _member: p._member,
                            payment: "member",
                            tickets: p.buyTickets,
                            _org: p._org
                        };
                        i.buy(b, function (a) {
                            p.payFlag = !1, p.promptOK = !0, p.wordOK = "购买成功", k(function () {
                                p.promptOK = !1
                            }, 3e3), j.indexBycard(d, function (a) {
                                p.member = a.data.member, p.member.cards.length > 0 ? p.tot = "" + p.member.cards[0].total : p.tot = "0", p.member.virtualAccount.expires_in ? p.xd = p.getNowFormatDate(new Date(p.member.virtualAccount.expires_in)) : p.xd = "", p.vp = p.member.virtualAccount.total, p.name = p.member.name, p.accTot = 0, _.each(p.member.specialAccount, function (a) {
                                    "包玉刚专用账户" == a.name ? p.accTot = a.total : p.accTot = 0
                                }), _.each(p.buyTickets, function (a) {
                                    if ("儿童票" == a.name.substring(0, 3))
                                        for (var b = 0; b < a.count; b++) p.printChild(a);
                                    else
                                        for (var b = 0; b < a.count; b++) p.print(a)
                                })
                            }, function (a) {
                                p.payFlag = !1, p.promptERR = !0, p.wordERR = err.data.data
                            })
                        }, function (a) {
                            p.payFlag = !1, p.promptERR = !0, p.wordERR = a.data.data
                        })
                    }, function (a) {
                        p.payFlag = !1, p.promptERR = !0, p.wordERR = a.data.data
                    })
                }
            }) : void(p.infoFlag = !1)
        }, p.clearInfo = function () {
            p.auth_code = "", p.total = 0, p.codeFlag = !1, p.promptWARN = !1, p.promptERR = !1, p.promptMES = !1, p.canFlag = !1, p.wayFlag = !1, p.wxFlag = !1, p.accountFlag = !0, m.cancel(p.timerHandler), _.each(p.tickets, function (a) {
                a.num = 0, a.singalPrice = 0
            })
        };
        var r = function (a) {
            var b;
            switch (a) {
            case 0:
                b = "周日";
                break;
            case 1:
                b = "周一";
                break;
            case 2:
                b = "周二";
                break;
            case 3:
                b = "周三";
                break;
            case 4:
                b = "周四";
                break;
            case 5:
                b = "周五";
                break;
            case 6:
                b = "周六"
            }
            return b
        };
        p.changeNum = function (a, b) {
            p.total = 0, "add" == a ? b.num = b.num + 1 : b.num >= 1 && (b.num = b.num - 1), b.singalPrice = p.dealNumber(b.num * b.price);
            for (var c = 0; c < p.tickets.length; c++) p.total = p.total + p.tickets[c].num * p.tickets[c].price;
            p.total = p.dealNumber(p.total), 0 == p.total ? p.canFlag = !1 : p.canFlag = !0
        }, p.message = function () {
            if (!p.canBuy) return p.promptERR = !0, void(p.wordERR = "清场前半小时以内无法购买");
            var a = 0;
            return _.each(p.tickets, function (b) {
                a = b.num + a
            }), a > 5 ? (p.promptMES = !0, void(p.wordMES = "最多限购5张")) : (p.promptWARN = !0, p.alipayFlag ? p.wordWARN = "请在自助机左侧扫描支付宝来完成支付。" : p.wxFlag ? p.wordWARN = "请在自助机左侧扫描微信支支付码来完成支付。" : p.accountFlag && (p.wordWARN = "请在自助机左侧扫描用户二维码来完成支付。"), p.setIntervalId(), p.second = 30, void(p.timerHandler = m(function () {
                p.second <= 0 ? p.clearInfo() : p.second--
            }, 1e3)))
        }, p.buy = function () {
            if (p.promptWARN = !1, p.payFlag = !0, p.buyTickets = [], _.each(p.tickets, function (a) {
                if (0 != a.num) {
                    var b = {
                        _ticket: a._id,
                        count: a.num,
                        name: a.name,
                        price: a.price,
                        showDate: a.showDate
                    };
                    p.buyTickets.push(b)
                }
            }), p.alipayFlag) {
                var a = {
                    auth_code: p.auth_code,
                    _venue: p._venue,
                    tickets: p.buyTickets
                };
                n.payTicket(a, function (a) {
                    p.payFlag = !1, p.promptOK = !0, p.wordOK = "购买成功", k(function () {
                        p.promptOK = !1
                    }, 5e3), _.each(p.buyTickets, function (a) {
                        if ("儿童票" == a.name.substring(0, 3))
                            for (var b = 0; b < a.count; b++) p.printChild(a);
                        else
                            for (var b = 0; b < a.count; b++) p.print(a)
                    })
                }, function (a) {
                    p.payFlag = !1, p.promptERR = !0, p.wordERR = a.data.data
                })
            } else if (p.wxFlag) {
                var a = {
                    auth_code: p.auth_code,
                    spbill_create_ip: "0.0.0.0",
                    _venue: p._venue,
                    tickets: p.buyTickets
                };
                i.wxBuy(a, function (a) {
                    p.payFlag = !1, p.promptOK = !0, p.wordOK = "购买成功", k(function () {
                        p.promptOK = !1
                    }, 3e3), _.each(p.buyTickets, function (a) {
                        if ("儿童票" == a.name.substring(0, 3))
                            for (var b = 0; b < a.count; b++) p.printChild(a);
                        else
                            for (var b = 0; b < a.count; b++) p.print(a)
                    })
                }, function (a) {
                    p.payFlag = !1, p.promptERR = !0, p.wordERR = a.data.data
                })
            } else p.accountFlag && p.checkMember()
        }, p.printChild = function (a) {
            if (p.wxFlag) var b = '<div><div><h3 style="font-size:20px">包玉刚游泳场</h3><h3 style="font-size:20px">微信支付</h3></div><span>**********************************</span><div><div style="border-bottom: 1px solid #DADADA;"><table style="width: 100%"><thead><tr><td width="50%">商品名称</td><td width="20%">数量</td><td width="30%">单价</td></tr></thead>';
            else var b = '<div><div><h3 style="font-size:20px">包玉刚游泳场</h3></div><span>**********************************</span><div><div style="border-bottom: 1px solid #DADADA;"><table style="width: 100%"><thead><tr><td width="50%">商品名称</td><td width="20%">数量</td><td width="30%">单价</td></tr></thead>';
            b = b + '<tbody><tr><td style="font-size:40px">' + a.name + "</td><td>1</td><td>" + a.price + "</td></tr>", b += "</tbody></table></div>", b = b + "<div>客户姓名:" + p.name + "</div>", b = b + "<div>消费日期:" + p.getNowFormatDate(new Date) + "</div>", b = b + "<div>现金账户余额:￥" + p.tot + "</div><div>虚拟账户余额:￥" + p.vp + "</div><div>有效期:" + p.xd + "</div><div>包玉刚账户:￥" + p.accTot + "</div>";
            var c = getLodop();
            c.PRINT_INIT(""), c.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), c.SET_PRINTER_INDEXA(-1), c.SET_PRINT_PAGESIZE(3, 800, 100, ""), c.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", b), c.PRINT(), p.clearInfo()
        }, p.print = function (a) {
            if (p.wxFlag) var b = '<div><div><h3 style="font-size:20px">包玉刚游泳场</h3><h3 style="font-size:20px">微信支付</h3></div><span>**********************************</span><div><div style="border-bottom: 1px solid #DADADA;"><table style="width: 100%"><thead><tr><td width="50%">商品名称</td><td width="20%">数量</td><td width="30%">单价</td></tr></thead>';
            else var b = '<div><div><h3 style="font-size:20px">包玉刚游泳场</h3></div><span>**********************************</span><div><div style="border-bottom: 1px solid #DADADA;"><table style="width: 100%"><thead><tr><td width="50%">商品名称</td><td width="20%">数量</td><td width="30%">单价</td></tr></thead>';
            b = b + "<tbody><tr><td>" + a.name + "</td><td>1</td><td>" + a.price + "</td></tr>", b += "</tbody></table></div>", b = b + "<div>客户姓名:" + p.name + "</div>", b = b + "<div>消费日期:" + p.getNowFormatDate(new Date) + "</div>", b = b + "<div>现金账户余额:￥" + p.tot + "</div><div>虚拟账户余额:￥" + p.vp + "</div><div>有效期:" + p.xd + "</div><div>包玉刚账户:￥" + p.accTot + "</div>";
            var c = getLodop();
            c.PRINT_INIT(""), c.SET_PRINT_PAGESIZE(2, 4500, 1600, "证书打印"), c.SET_PRINTER_INDEXA(-1), c.SET_PRINT_PAGESIZE(3, 800, 100, ""), c.ADD_PRINT_HTM(0, 0, "80mm", "BottomMargin:-20mm", b), c.PRINT(), p.clearInfo()
        }, p.getTicket = function () {
            var a = {
                _venue: p._venue,
                _org: p._org,
                isGetNow: !0
            };
            i.index(a, function (a) {
                p.nowDate = new Date, p.nowDay = r(p.nowDate.getDay()), p.showDate = a.data.tickets[0].showDate, p.tickets = a.data.tickets;
                for (var b = 0; b < p.tickets.length; b++) p.tickets[b].num = 0, p.tickets[b].singalPrice = 0, p.tickets[b].order = b + 1;
                var c = new Date;
                if (c.setHours(p.tickets[0].endDateHours), c.setMinutes(p.tickets[0].endDateMins), c.setSeconds(0), (new Date).getHours() <= p.tickets[0].endDateHours) var d = c.getTime() - (new Date).getTime();
                else var d = c.getTime() - (new Date).getTime() + 864e5;
                p.canBuy = !0, k(function () {
                    p.clearInfo(), p.getTicket()
                }, d), 0 == p.tickets[0].price ? p.haveBuy = !1 : p.haveBuy = !0
            }, function () {})
        }, p.select = function (a) {
            "alipay" == a ? (p.alipayFlag = !0, p.wxFlag = !1, p.accountFlag = !1) : "wx" == a ? (p.alipayFlag = !1, p.wxFlag = !0, p.accountFlag = !1) : "account" == a && (p.alipayFlag = !1, p.wxFlag = !1, p.accountFlag = !0)
        };
        var s = function () {
            p.getTicket();
            var a;
            a = m(function () {
                p.dt = new Date
            }, 1e3)
        };
        p.enterCheck = function (a) {
            13 == a.keyCode && p.buy()
        }, s()
    }
    angular.module("fieldApp").controller("SelfHelpCtrl", a), a.$inject = ["$scope", "$http", "$rootScope", "Auth", "User", "$state", "$stateParams", "$location", "Ticket", "Member", "$timeout", "Time", "$interval", "Alipay"]
}(),
function () {
    "use strict";

    function a(a) {
        a.state("self-help", {
            params: {
                value: "self"
            },
            url: "/selfhelp/self?_venue&&_org",
            templateUrl: "app/selfhelp/self/self-help.html",
            controller: "SelfHelpCtrl",
            controllerAs: "selfHelpCtrl"
        })
    }
    angular.module("fieldApp").config(a), a.$inject = ["$stateProvider"]
}(),
function (a) {
    a.base64 = function (b) {
        var c = {
                data: "",
                type: 0,
                unicode: !0
            },
            d = a.extend(c, b),
            e = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
        return UnicodeChr = function () {
            return "00A4,00A7,00A8,00B0,00B1,00B7,00D7,00E0,00E1,00E8,00E9,00EA,00EC,00ED,00F2,00F3,00F7,00F9,00FA,00FC,0101,0113,011B,012B,014D,016B,01CE,01D0,01D2,01D4,01D6,01D8,01DA,01DC,02C7,02C9,0391,0392,0393,0394,0395,0396,0397,0398,0399,039A,039B,039C,039D,039E,039F,03A0,03A1,03A3,03A4,03A5,03A6,03A7,03A8,03A9,03B1,03B2,03B3,03B4,03B5,03B6,03B7,03B8,03B9,03BA,03BB,03BC,03BD,03BE,03BF,03C0,03C1,03C3,03C4,03C5,03C6,03C7,03C8,03C9,0401,0410,0411,0412,0413,0414,0415,0416,0417,0418,0419,041A,041B,041C,041D,041E,041F,0420,0421,0422,0423,0424,0425,0426,0427,0428,0429,042A,042B,042C,042D,042E,042F,0430,0431,0432,0433,0434,0435,0436,0437,0438,0439,043A,043B,043C,043D,043E,043F,0440,0441,0442,0443,0444,0445,0446,0447,0448,0449,044A,044B,044C,044D,044E,044F,0451,2014,2016,2018,2019,201C,201D,2026,2030,2032,2033,203B,2103,2116,2160,2161,2162,2163,2164,2165,2166,2167,2168,2169,216A,216B,2190,2191,2192,2193,2208,220F,2211,221A,221D,221E,2220,2225,2227,2228,2229,222A,222B,222E,2234,2235,2236,2237,223D,2248,224C,2260,2261,2264,2265,226E,226F,2299,22A5,2312,2460,2461,2462,2463,2464,2465,2466,2467,2468,2469,2474,2475,2476,2477,2478,2479,247A,247B,247C,247D,247E,247F,2480,2481,2482,2483,2484,2485,2486,2487,2488,2489,248A,248B,248C,248D,248E,248F,2490,2491,2492,2493,2494,2495,2496,2497,2498,2499,249A,249B,2500,2501,2502,2503,2504,2505,2506,2507,2508,2509,250A,250B,250C,250D,250E,250F,2510,2511,2512,2513,2514,2515,2516,2517,2518,2519,251A,251B,251C,251D,251E,251F,2520,2521,2522,2523,2524,2525,2526,2527,2528,2529,252A,252B,252C,252D,252E,252F,2530,2531,2532,2533,2534,2535,2536,2537,2538,2539,253A,253B,253C,253D,253E,253F,2540,2541,2542,2543,2544,2545,2546,2547,2548,2549,254A,254B,25A0,25A1,25B2,25B3,25C6,25C7,25CB,25CE,25CF,2605,2606,2640,2642,3000,3001,3002,3003,3005,3008,3009,300A,300B,300C,300D,300E,300F,3010,3011,3013,3014,3015,3016,3017,3041,3042,3043,3044,3045,3046,3047,3048,3049,304A,304B,304C,304D,304E,304F,3050,3051,3052,3053,3054,3055,3056,3057,3058,3059,305A,305B,305C,305D,305E,305F,3060,3061,3062,3063,3064,3065,3066,3067,3068,3069,306A,306B,306C,306D,306E,306F,3070,3071,3072,3073,3074,3075,3076,3077,3078,3079,307A,307B,307C,307D,307E,307F,3080,3081,3082,3083,3084,3085,3086,3087,3088,3089,308A,308B,308C,308D,308E,308F,3090,3091,3092,3093,30A1,30A2,30A3,30A4,30A5,30A6,30A7,30A8,30A9,30AA,30AB,30AC,30AD,30AE,30AF,30B0,30B1,30B2,30B3,30B4,30B5,30B6,30B7,30B8,30B9,30BA,30BB,30BC,30BD,30BE,30BF,30C0,30C1,30C2,30C3,30C4,30C5,30C6,30C7,30C8,30C9,30CA,30CB,30CC,30CD,30CE,30CF,30D0,30D1,30D2,30D3,30D4,30D5,30D6,30D7,30D8,30D9,30DA,30DB,30DC,30DD,30DE,30DF,30E0,30E1,30E2,30E3,30E4,30E5,30E6,30E7,30E8,30E9,30EA,30EB,30EC,30ED,30EE,30EF,30F0,30F1,30F2,30F3,30F4,30F5,30F6,3105,3106,3107,3108,3109,310A,310B,310C,310D,310E,310F,3110,3111,3112,3113,3114,3115,3116,3117,3118,3119,311A,311B,311C,311D,311E,311F,3120,3121,3122,3123,3124,3125,3126,3127,3128,3129,3220,3221,3222,3223,3224,3225,3226,3227,3228,3229,4E00,4E01,4E03,4E07,4E08,4E09,4E0A,4E0B,4E0C,4E0D,4E0E,4E10,4E11,4E13,4E14,4E15,4E16,4E18,4E19,4E1A,4E1B,4E1C,4E1D,4E1E,4E22,4E24,4E25,4E27,4E28,4E2A,4E2B,4E2C,4E2D,4E30,4E32,4E34,4E36,4E38,4E39,4E3A,4E3B,4E3D,4E3E,4E3F,4E43,4E45,4E47,4E48,4E49,4E4B,4E4C,4E4D,4E4E,4E4F,4E50,4E52,4E53,4E54,4E56,4E58,4E59,4E5C,4E5D,4E5E,4E5F,4E60,4E61,4E66,4E69,4E70,4E71,4E73,4E7E,4E86,4E88,4E89,4E8B,4E8C,4E8D,4E8E,4E8F,4E91,4E92,4E93,4E94,4E95,4E98,4E9A,4E9B,4E9F,4EA0,4EA1,4EA2,4EA4,4EA5,4EA6,4EA7,4EA8,4EA9,4EAB,4EAC,4EAD,4EAE,4EB2,4EB3,4EB5,4EBA,4EBB,4EBF,4EC0,4EC1,4EC2,4EC3,4EC4,4EC5,4EC6,4EC7,4EC9,4ECA,4ECB,4ECD,4ECE,4ED1,4ED3,4ED4,4ED5,4ED6,4ED7,4ED8,4ED9,4EDD,4EDE,4EDF,4EE1,4EE3,4EE4,4EE5,4EE8,4EEA,4EEB,4EEC,4EF0,4EF2,4EF3,4EF5,4EF6,4EF7,4EFB,4EFD,4EFF,4F01,4F09,4F0A,4F0D,4F0E,4F0F,4F10,4F11,4F17,4F18,4F19,4F1A,4F1B,4F1E,4F1F,4F20,4F22,4F24,4F25,4F26,4F27,4F2A,4F2B,4F2F,4F30,4F32,4F34,4F36,4F38,4F3A,4F3C,4F3D,4F43,4F46,4F4D,4F4E,4F4F,4F50,4F51,4F53,4F55,4F57,4F58,4F59,4F5A,4F5B,4F5C,4F5D,4F5E,4F5F,4F60,4F63,4F64,4F65,4F67,4F69,4F6C,4F6F,4F70,4F73,4F74,4F76,4F7B,4F7C,4F7E,4F7F,4F83,4F84,4F88,4F89,4F8B,4F8D,4F8F,4F91,4F94,4F97,4F9B,4F9D,4FA0,4FA3,4FA5,4FA6,4FA7,4FA8,4FA9,4FAA,4FAC,4FAE,4FAF,4FB5,4FBF,4FC3,4FC4,4FC5,4FCA,4FCE,4FCF,4FD0,4FD1,4FD7,4FD8,4FDA,4FDC,4FDD,4FDE,4FDF,4FE1,4FE3,4FE6,4FE8,4FE9,4FEA,4FED,4FEE,4FEF,4FF1,4FF3,4FF8,4FFA,4FFE,500C,500D,500F,5012,5014,5018,5019,501A,501C,501F,5021,5025,5026,5028,5029,502A,502C,502D,502E,503A,503C,503E,5043,5047,5048,504C,504E,504F,5055,505A,505C,5065,506C,5076,5077,507B,507E,507F,5080,5085,5088,508D,50A3,50A5,50A7,50A8,50A9,50AC,50B2,50BA,50BB,50CF,50D6,50DA,50E6,50E7,50EC,50ED,50EE,50F3,50F5,50FB,5106,5107,510B,5112,5121,513F,5140,5141,5143,5144,5145,5146,5148,5149,514B,514D,5151,5154,5155,5156,515A,515C,5162,5165,5168,516B,516C,516D,516E,5170,5171,5173,5174,5175,5176,5177,5178,5179,517B,517C,517D,5180,5181,5182,5185,5188,5189,518C,518D,5192,5195,5196,5197,5199,519B,519C,51A0,51A2,51A4,51A5,51AB,51AC,51AF,51B0,51B1,51B2,51B3,51B5,51B6,51B7,51BB,51BC,51BD,51C0,51C4,51C6,51C7,51C9,51CB,51CC,51CF,51D1,51DB,51DD,51E0,51E1,51E4,51EB,51ED,51EF,51F0,51F3,51F5,51F6,51F8,51F9,51FA,51FB,51FC,51FD,51FF,5200,5201,5202,5203,5206,5207,5208,520A,520D,520E,5211,5212,5216,5217,5218,5219,521A,521B,521D,5220,5224,5228,5229,522B,522D,522E,5230,5233,5236,5237,5238,5239,523A,523B,523D,523F,5240,5241,5242,5243,524A,524C,524D,5250,5251,5254,5256,525C,525E,5261,5265,5267,5269,526A,526F,5272,527D,527F,5281,5282,5288,5290,5293,529B,529D,529E,529F,52A0,52A1,52A2,52A3,52A8,52A9,52AA,52AB,52AC,52AD,52B1,52B2,52B3,52BE,52BF,52C3,52C7,52C9,52CB,52D0,52D2,52D6,52D8,52DF,52E4,52F0,52F9,52FA,52FE,52FF,5300,5305,5306,5308,530D,530F,5310,5315,5316,5317,5319,531A,531D,5320,5321,5323,5326,532A,532E,5339,533A,533B,533E,533F,5341,5343,5345,5347,5348,5349,534A,534E,534F,5351,5352,5353,5355,5356,5357,535A,535C,535E,535F,5360,5361,5362,5363,5364,5366,5367,5369,536B,536E,536F,5370,5371,5373,5374,5375,5377,5378,537A,537F,5382,5384,5385,5386,5389,538B,538C,538D,5395,5398,539A,539D,539F,53A2,53A3,53A5,53A6,53A8,53A9,53AE,53B6,53BB,53BF,53C1,53C2,53C8,53C9,53CA,53CB,53CC,53CD,53D1,53D4,53D6,53D7,53D8,53D9,53DB,53DF,53E0,53E3,53E4,53E5,53E6,53E8,53E9,53EA,53EB,53EC,53ED,53EE,53EF,53F0,53F1,53F2,53F3,53F5,53F6,53F7,53F8,53F9,53FB,53FC,53FD,5401,5403,5404,5406,5408,5409,540A,540C,540D,540E,540F,5410,5411,5412,5413,5415,5416,5417,541B,541D,541E,541F,5420,5421,5423,5426,5427,5428,5429,542B,542C,542D,542E,542F,5431,5432,5434,5435,5438,5439,543B,543C,543E,5440,5443,5446,5448,544A,544B,5450,5452,5453,5454,5455,5456,5457,5458,5459,545B,545C,5462,5464,5466,5468,5471,5472,5473,5475,5476,5477,5478,547B,547C,547D,5480,5482,5484,5486,548B,548C,548E,548F,5490,5492,5494,5495,5496,5499,549A,549B,549D,54A3,54A4,54A6,54A7,54A8,54A9,54AA,54AB,54AC,54AD,54AF,54B1,54B3,54B4,54B8,54BB,54BD,54BF,54C0,54C1,54C2,54C4,54C6,54C7,54C8,54C9,54CC,54CD,54CE,54CF,54D0,54D1,54D2,54D3,54D4,54D5,54D7,54D9,54DA,54DC,54DD,54DE,54DF,54E5,54E6,54E7,54E8,54E9,54EA,54ED,54EE,54F2,54F3,54FA,54FC,54FD,54FF,5501,5506,5507,5509,550F,5510,5511,5514,551B,5520,5522,5523,5524,5527,552A,552C,552E,552F,5530,5531,5533,5537,553C,553E,553F,5541,5543,5544,5546,5549,554A,5550,5555,5556,555C,5561,5564,5565,5566,5567,556A,556C,556D,556E,5575,5576,5577,5578,557B,557C,557E,5580,5581,5582,5583,5584,5587,5588,5589,558A,558B,558F,5591,5594,5598,5599,559C,559D,559F,55A7,55B1,55B3,55B5,55B7,55B9,55BB,55BD,55BE,55C4,55C5,55C9,55CC,55CD,55D1,55D2,55D3,55D4,55D6,55DC,55DD,55DF,55E1,55E3,55E4,55E5,55E6,55E8,55EA,55EB,55EC,55EF,55F2,55F3,55F5,55F7,55FD,55FE,5600,5601,5608,5609,560C,560E,560F,5618,561B,561E,561F,5623,5624,5627,562C,562D,5631,5632,5634,5636,5639,563B,563F,564C,564D,564E,5654,5657,5658,5659,565C,5662,5664,5668,5669,566A,566B,566C,5671,5676,567B,567C,5685,5686,568E,568F,5693,56A3,56AF,56B7,56BC,56CA,56D4,56D7,56DA,56DB,56DD,56DE,56DF,56E0,56E1,56E2,56E4,56EB,56ED,56F0,56F1,56F4,56F5,56F9,56FA,56FD,56FE,56FF,5703,5704,5706,5708,5709,570A,571C,571F,5723,5728,5729,572A,572C,572D,572E,572F,5730,5733,5739,573A,573B,573E,5740,5742,5747,574A,574C,574D,574E,574F,5750,5751,5757,575A,575B,575C,575D,575E,575F,5760,5761,5764,5766,5768,5769,576A,576B,576D,576F,5773,5776,5777,577B,577C,5782,5783,5784,5785,5786,578B,578C,5792,5793,579B,57A0,57A1,57A2,57A3,57A4,57A6,57A7,57A9,57AB,57AD,57AE,57B2,57B4,57B8,57C2,57C3,57CB,57CE,57CF,57D2,57D4,57D5,57D8,57D9,57DA,57DD,57DF,57E0,57E4,57ED,57EF,57F4,57F8,57F9,57FA,57FD,5800,5802,5806,5807,580B,580D,5811,5815,5819,581E,5820,5821,5824,582A,5830,5835,5844,584C,584D,5851,5854,5858,585E,5865,586B,586C,587E,5880,5881,5883,5885,5889,5892,5893,5899,589A,589E,589F,58A8,58A9,58BC,58C1,58C5,58D1,58D5,58E4,58EB,58EC,58EE,58F0,58F3,58F6,58F9,5902,5904,5907,590D,590F,5914,5915,5916,5919,591A,591C,591F,5924,5925,5927,5929,592A,592B,592D,592E,592F,5931,5934,5937,5938,5939,593A,593C,5941,5942,5944,5947,5948,5949,594B,594E,594F,5951,5954,5955,5956,5957,5958,595A,5960,5962,5965,5973,5974,5976,5978,5979,597D,5981,5982,5983,5984,5986,5987,5988,598A,598D,5992,5993,5996,5997,5999,599E,59A3,59A4,59A5,59A8,59A9,59AA,59AB,59AE,59AF,59B2,59B9,59BB,59BE,59C6,59CA,59CB,59D0,59D1,59D2,59D3,59D4,59D7,59D8,59DA,59DC,59DD,59E3,59E5,59E8,59EC,59F9,59FB,59FF,5A01,5A03,5A04,5A05,5A06,5A07,5A08,5A09,5A0C,5A11,5A13,5A18,5A1C,5A1F,5A20,5A23,5A25,5A29,5A31,5A32,5A34,5A36,5A3C,5A40,5A46,5A49,5A4A,5A55,5A5A,5A62,5A67,5A6A,5A74,5A75,5A76,5A77,5A7A,5A7F,5A92,5A9A,5A9B,5AAA,5AB2,5AB3,5AB5,5AB8,5ABE,5AC1,5AC2,5AC9,5ACC,5AD2,5AD4,5AD6,5AD8,5ADC,5AE0,5AE1,5AE3,5AE6,5AE9,5AEB,5AF1,5B09,5B16,5B17,5B32,5B34,5B37,5B40,5B50,5B51,5B53,5B54,5B55,5B57,5B58,5B59,5B5A,5B5B,5B5C,5B5D,5B5F,5B62,5B63,5B64,5B65,5B66,5B69,5B6A,5B6C,5B70,5B71,5B73,5B75,5B7A,5B7D,5B80,5B81,5B83,5B84,5B85,5B87,5B88,5B89,5B8B,5B8C,5B8F,5B93,5B95,5B97,5B98,5B99,5B9A,5B9B,5B9C,5B9D,5B9E,5BA0,5BA1,5BA2,5BA3,5BA4,5BA5,5BA6,5BAA,5BAB,5BB0,5BB3,5BB4,5BB5,5BB6,5BB8,5BB9,5BBD,5BBE,5BBF,5BC2,5BC4,5BC5,5BC6,5BC7,5BCC,5BD0,5BD2,5BD3,5BDD,5BDE,5BDF,5BE1,5BE4,5BE5,5BE8,5BEE,5BF0,5BF8,5BF9,5BFA,5BFB,5BFC,5BFF,5C01,5C04,5C06,5C09,5C0A,5C0F,5C11,5C14,5C15,5C16,5C18,5C1A,5C1C,5C1D,5C22,5C24,5C25,5C27,5C2C,5C31,5C34,5C38,5C39,5C3A,5C3B,5C3C,5C3D,5C3E,5C3F,5C40,5C41,5C42,5C45,5C48,5C49,5C4A,5C4B,5C4E,5C4F,5C50,5C51,5C55,5C59,5C5E,5C60,5C61,5C63,5C65,5C66,5C6E,5C6F,5C71,5C79,5C7A,5C7F,5C81,5C82,5C88,5C8C,5C8D,5C90,5C91,5C94,5C96,5C97,5C98,5C99,5C9A,5C9B,5C9C,5CA2,5CA3,5CA9,5CAB,5CAC,5CAD,5CB1,5CB3,5CB5,5CB7,5CB8,5CBD,5CBF,5CC1,5CC4,5CCB,5CD2,5CD9,5CE1,5CE4,5CE5,5CE6,5CE8,5CEA,5CED,5CF0,5CFB,5D02,5D03,5D06,5D07,5D0E,5D14,5D16,5D1B,5D1E,5D24,5D26,5D27,5D29,5D2D,5D2E,5D34,5D3D,5D3E,5D47,5D4A,5D4B,5D4C,5D58,5D5B,5D5D,5D69,5D6B,5D6C,5D6F,5D74,5D82,5D99,5D9D,5DB7,5DC5,5DCD,5DDB,5DDD,5DDE,5DE1,5DE2,5DE5,5DE6,5DE7,5DE8,5DE9,5DEB,5DEE,5DEF,5DF1,5DF2,5DF3,5DF4,5DF7,5DFD,5DFE,5E01,5E02,5E03,5E05,5E06,5E08,5E0C,5E0F,5E10,5E11,5E14,5E15,5E16,5E18,5E19,5E1A,5E1B,5E1C,5E1D,5E26,5E27,5E2D,5E2E,5E31,5E37,5E38,5E3B,5E3C,5E3D,5E42,5E44,5E45,5E4C,5E54,5E55,5E5B,5E5E,5E61,5E62,5E72,5E73,5E74,5E76,5E78,5E7A,5E7B,5E7C,5E7D,5E7F,5E80,5E84,5E86,5E87,5E8A,5E8B,5E8F,5E90,5E91,5E93,5E94,5E95,5E96,5E97,5E99,5E9A,5E9C,5E9E,5E9F,5EA0,5EA5,5EA6,5EA7,5EAD,5EB3,5EB5,5EB6,5EB7,5EB8,5EB9,5EBE,5EC9,5ECA,5ED1,5ED2,5ED3,5ED6,5EDB,5EE8,5EEA,5EF4,5EF6,5EF7,5EFA,5EFE,5EFF,5F00,5F01,5F02,5F03,5F04,5F08,5F0A,5F0B,5F0F,5F11,5F13,5F15,5F17,5F18,5F1B,5F1F,5F20,5F25,5F26,5F27,5F29,5F2A,5F2D,5F2F,5F31,5F39,5F3A,5F3C,5F40,5F50,5F52,5F53,5F55,5F56,5F57,5F58,5F5D,5F61,5F62,5F64,5F66,5F69,5F6A,5F6C,5F6D,5F70,5F71,5F73,5F77,5F79,5F7B,5F7C,5F80,5F81,5F82,5F84,5F85,5F87,5F88,5F89,5F8A,5F8B,5F8C,5F90,5F92,5F95,5F97,5F98,5F99,5F9C,5FA1,5FA8,5FAA,5FAD,5FAE,5FB5,5FB7,5FBC,5FBD,5FC3,5FC4,5FC5,5FC6,5FC9,5FCC,5FCD,5FCF,5FD0,5FD1,5FD2,5FD6,5FD7,5FD8,5FD9,5FDD,5FE0,5FE1,5FE4,5FE7,5FEA,5FEB,5FED,5FEE,5FF1,5FF5,5FF8,5FFB,5FFD,5FFE,5FFF,6000,6001,6002,6003,6004,6005,6006,600A,600D,600E,600F,6012,6014,6015,6016,6019,601B,601C,601D,6020,6021,6025,6026,6027,6028,6029,602A,602B,602F,6035,603B,603C,603F,6041,6042,6043,604B,604D,6050,6052,6055,6059,605A,605D,6062,6063,6064,6067,6068,6069,606A,606B,606C,606D,606F,6070,6073,6076,6078,6079,607A,607B,607C,607D,607F,6083,6084,6089,608C,608D,6092,6094,6096,609A,609B,609D,609F,60A0,60A3,60A6,60A8,60AB,60AC,60AD,60AF,60B1,60B2,60B4,60B8,60BB,60BC,60C5,60C6,60CA,60CB,60D1,60D5,60D8,60DA,60DC,60DD,60DF,60E0,60E6,60E7,60E8,60E9,60EB,60EC,60ED,60EE,60EF,60F0,60F3,60F4,60F6,60F9,60FA,6100,6101,6106,6108,6109,610D,610E,610F,6115,611A,611F,6120,6123,6124,6126,6127,612B,613F,6148,614A,614C,614E,6151,6155,615D,6162,6167,6168,6170,6175,6177,618B,618E,6194,619D,61A7,61A8,61A9,61AC,61B7,61BE,61C2,61C8,61CA,61CB,61D1,61D2,61D4,61E6,61F5,61FF,6206,6208,620A,620B,620C,620D,620E,620F,6210,6211,6212,6215,6216,6217,6218,621A,621B,621F,6221,6222,6224,6225,622A,622C,622E,6233,6234,6237,623D,623E,623F,6240,6241,6243,6247,6248,6249,624B,624C,624D,624E,6251,6252,6253,6254,6258,625B,6263,6266,6267,6269,626A,626B,626C,626D,626E,626F,6270,6273,6276,6279,627C,627E,627F,6280,6284,6289,628A,6291,6292,6293,6295,6296,6297,6298,629A,629B,629F,62A0,62A1,62A2,62A4,62A5,62A8,62AB,62AC,62B1,62B5,62B9,62BB,62BC,62BD,62BF,62C2,62C4,62C5,62C6,62C7,62C8,62C9,62CA,62CC,62CD,62CE,62D0,62D2,62D3,62D4,62D6,62D7,62D8,62D9,62DA,62DB,62DC,62DF,62E2,62E3,62E5,62E6,62E7,62E8,62E9,62EC,62ED,62EE,62EF,62F1,62F3,62F4,62F6,62F7,62FC,62FD,62FE,62FF,6301,6302,6307,6308,6309,630E,6311,6316,631A,631B,631D,631E,631F,6320,6321,6322,6323,6324,6325,6328,632A,632B,632F,6332,6339,633A,633D,6342,6343,6345,6346,6349,634B,634C,634D,634E,634F,6350,6355,635E,635F,6361,6362,6363,6367,6369,636D,636E,6371,6376,6377,637A,637B,6380,6382,6387,6388,6389,638A,638C,638E,638F,6390,6392,6396,6398,63A0,63A2,63A3,63A5,63A7,63A8,63A9,63AA,63AC,63AD,63AE,63B0,63B3,63B4,63B7,63B8,63BA,63BC,63BE,63C4,63C6,63C9,63CD,63CE,63CF,63D0,63D2,63D6,63DE,63E0,63E1,63E3,63E9,63EA,63ED,63F2,63F4,63F6,63F8,63FD,63FF,6400,6401,6402,6405,640B,640C,640F,6410,6413,6414,641B,641C,641E,6420,6421,6426,642A,642C,642D,6434,643A,643D,643F,6441,6444,6445,6446,6447,6448,644A,6452,6454,6458,645E,6467,6469,646D,6478,6479,647A,6482,6484,6485,6487,6491,6492,6495,6496,6499,649E,64A4,64A9,64AC,64AD,64AE,64B0,64B5,64B7,64B8,64BA,64BC,64C0,64C2,64C5,64CD,64CE,64D0,64D2,64D7,64D8,64DE,64E2,64E4,64E6,6500,6509,6512,6518,6525,652B,652E,652F,6534,6535,6536,6538,6539,653B,653E,653F,6545,6548,6549,654C,654F,6551,6555,6556,6559,655B,655D,655E,6562,6563,6566,656B,656C,6570,6572,6574,6577,6587,658B,658C,6590,6591,6593,6597,6599,659B,659C,659F,65A1,65A4,65A5,65A7,65A9,65AB,65AD,65AF,65B0,65B9,65BC,65BD,65C1,65C3,65C4,65C5,65C6,65CB,65CC,65CE,65CF,65D2,65D6,65D7,65E0,65E2,65E5,65E6,65E7,65E8,65E9,65EC,65ED,65EE,65EF,65F0,65F1,65F6,65F7,65FA,6600,6602,6603,6606,660A,660C,660E,660F,6613,6614,6615,6619,661D,661F,6620,6625,6627,6628,662D,662F,6631,6634,6635,6636,663C,663E,6641,6643,664B,664C,664F,6652,6653,6654,6655,6656,6657,665A,665F,6661,6664,6666,6668,666E,666F,6670,6674,6676,6677,667A,667E,6682,6684,6687,668C,6691,6696,6697,669D,66A7,66A8,66AE,66B4,66B9,66BE,66D9,66DB,66DC,66DD,66E6,66E9,66F0,66F2,66F3,66F4,66F7,66F9,66FC,66FE,66FF,6700,6708,6709,670A,670B,670D,6710,6714,6715,6717,671B,671D,671F,6726,6728,672A,672B,672C,672D,672F,6731,6734,6735,673A,673D,6740,6742,6743,6746,6748,6749,674C,674E,674F,6750,6751,6753,6756,675C,675E,675F,6760,6761,6765,6768,6769,676A,676D,676F,6770,6772,6773,6775,6777,677C,677E,677F,6781,6784,6787,6789,678B,6790,6795,6797,6798,679A,679C,679D,679E,67A2,67A3,67A5,67A7,67A8,67AA,67AB,67AD,67AF,67B0,67B3,67B5,67B6,67B7,67B8,67C1,67C3,67C4,67CF,67D0,67D1,67D2,67D3,67D4,67D8,67D9,67DA,67DC,67DD,67DE,67E0,67E2,67E5,67E9,67EC,67EF,67F0,67F1,67F3,67F4,67FD,67FF,6800,6805,6807,6808,6809,680A,680B,680C,680E,680F,6811,6813,6816,6817,681D,6821,6829,682A,6832,6833,6837,6838,6839,683C,683D,683E,6840,6841,6842,6843,6844,6845,6846,6848,6849,684A,684C,684E,6850,6851,6853,6854,6855,6860,6861,6862,6863,6864,6865,6866,6867,6868,6869,686B,6874,6876,6877,6881,6883,6885,6886,688F,6893,6897,68A2,68A6,68A7,68A8,68AD,68AF,68B0,68B3,68B5,68C0,68C2,68C9,68CB,68CD,68D2,68D5,68D8,68DA,68E0,68E3,68EE,68F0,68F1,68F5,68F9,68FA,68FC,6901,6905,690B,690D,690E,6910,6912,691F,6920,6924,692D,6930,6934,6939,693D,693F,6942,6954,6957,695A,695D,695E,6960,6963,6966,696B,696E,6971,6977,6978,6979,697C,6980,6982,6984,6986,6987,6988,6989,698D,6994,6995,6998,699B,699C,69A7,69A8,69AB,69AD,69B1,69B4,69B7,69BB,69C1,69CA,69CC,69CE,69D0,69D4,69DB,69DF,69E0,69ED,69F2,69FD,69FF,6A0A,6A17,6A18,6A1F,6A21,6A28,6A2A,6A2F,6A31,6A35,6A3D,6A3E,6A44,6A47,6A50,6A58,6A59,6A5B,6A61,6A65,6A71,6A79,6A7C,6A80,6A84,6A8E,6A90,6A91,6A97,6AA0,6AA9,6AAB,6AAC,6B20,6B21,6B22,6B23,6B24,6B27,6B32,6B37,6B39,6B3A,6B3E,6B43,6B46,6B47,6B49,6B4C,6B59,6B62,6B63,6B64,6B65,6B66,6B67,6B6A,6B79,6B7B,6B7C,6B81,6B82,6B83,6B84,6B86,6B87,6B89,6B8A,6B8B,6B8D,6B92,6B93,6B96,6B9A,6B9B,6BA1,6BAA,6BB3,6BB4,6BB5,6BB7,6BBF,6BC1,6BC2,6BC5,6BCB,6BCD,6BCF,6BD2,6BD3,6BD4,6BD5,6BD6,6BD7,6BD9,6BDB,6BE1,6BEA,6BEB,6BEF,6BF3,6BF5,6BF9,6BFD,6C05,6C06,6C07,6C0D,6C0F,6C10,6C11,6C13,6C14,6C15,6C16,6C18,6C19,6C1A,6C1B,6C1F,6C21,6C22,6C24,6C26,6C27,6C28,6C29,6C2A,6C2E,6C2F,6C30,6C32,6C34,6C35,6C38,6C3D,6C40,6C41,6C42,6C46,6C47,6C49,6C4A,6C50,6C54,6C55,6C57,6C5B,6C5C,6C5D,6C5E,6C5F,6C60,6C61,6C64,6C68,6C69,6C6A,6C70,6C72,6C74,6C76,6C79,6C7D,6C7E,6C81,6C82,6C83,6C85,6C86,6C88,6C89,6C8C,6C8F,6C90,6C93,6C94,6C99,6C9B,6C9F,6CA1,6CA3,6CA4,6CA5,6CA6,6CA7,6CA9,6CAA,6CAB,6CAD,6CAE,6CB1,6CB2,6CB3,6CB8,6CB9,6CBB,6CBC,6CBD,6CBE,6CBF,6CC4,6CC5,6CC9,6CCA,6CCC,6CD0,6CD3,6CD4,6CD5,6CD6,6CD7,6CDB,6CDE,6CE0,6CE1,6CE2,6CE3,6CE5,6CE8,6CEA,6CEB,6CEE,6CEF,6CF0,6CF1,6CF3,6CF5,6CF6,6CF7,6CF8,6CFA,6CFB,6CFC,6CFD,6CFE,6D01,6D04,6D07,6D0B,6D0C,6D0E,6D12,6D17,6D19,6D1A,6D1B,6D1E,6D25,6D27,6D2A,6D2B,6D2E,6D31,6D32,6D33,6D35,6D39,6D3B,6D3C,6D3D,6D3E,6D41,6D43,6D45,6D46,6D47,6D48,6D4A,6D4B,6D4D,6D4E,6D4F,6D51,6D52,6D53,6D54,6D59,6D5A,6D5C,6D5E,6D60,6D63,6D66,6D69,6D6A,6D6E,6D6F,6D74,6D77,6D78,6D7C,6D82,6D85,6D88,6D89,6D8C,6D8E,6D91,6D93,6D94,6D95,6D9B,6D9D,6D9E,6D9F,6DA0,6DA1,6DA3,6DA4,6DA6,6DA7,6DA8,6DA9,6DAA,6DAB,6DAE,6DAF,6DB2,6DB5,6DB8,6DBF,6DC0,6DC4,6DC5,6DC6,6DC7,6DCB,6DCC,6DD1,6DD6,6DD8,6DD9,6DDD,6DDE,6DE0,6DE1,6DE4,6DE6,6DEB,6DEC,6DEE,6DF1,6DF3,6DF7,6DF9,6DFB,6DFC,6E05,6E0A,6E0C,6E0D,6E0E,6E10,6E11,6E14,6E16,6E17,6E1A,6E1D,6E20,6E21,6E23,6E24,6E25,6E29,6E2B,6E2D,6E2F,6E32,6E34,6E38,6E3A,6E43,6E44,6E4D,6E4E,6E53,6E54,6E56,6E58,6E5B,6E5F,6E6B,6E6E,6E7E,6E7F,6E83,6E85,6E86,6E89,6E8F,6E90,6E98,6E9C,6E9F,6EA2,6EA5,6EA7,6EAA,6EAF,6EB1,6EB2,6EB4,6EB6,6EB7,6EBA,6EBB,6EBD,6EC1,6EC2,6EC7,6ECB,6ECF,6ED1,6ED3,6ED4,6ED5,6ED7,6EDA,6EDE,6EDF,6EE0,6EE1,6EE2,6EE4,6EE5,6EE6,6EE8,6EE9,6EF4,6EF9,6F02,6F06,6F09,6F0F,6F13,6F14,6F15,6F20,6F24,6F29,6F2A,6F2B,6F2D,6F2F,6F31,6F33,6F36,6F3E,6F46,6F47,6F4B,6F4D,6F58,6F5C,6F5E,6F62,6F66,6F6D,6F6E,6F72,6F74,6F78,6F7A,6F7C,6F84,6F88,6F89,6F8C,6F8D,6F8E,6F9C,6FA1,6FA7,6FB3,6FB6,6FB9,6FC0,6FC2,6FC9,6FD1,6FD2,6FDE,6FE0,6FE1,6FEE,6FEF,7011,701A,701B,7023,7035,7039,704C,704F,705E,706B,706C,706D,706F,7070,7075,7076,7078,707C,707E,707F,7080,7085,7089,708A,708E,7092,7094,7095,7096,7099,709C,709D,70AB,70AC,70AD,70AE,70AF,70B1,70B3,70B7,70B8,70B9,70BB,70BC,70BD,70C0,70C1,70C2,70C3,70C8,70CA,70D8,70D9,70DB,70DF,70E4,70E6,70E7,70E8,70E9,70EB,70EC,70ED,70EF,70F7,70F9,70FD,7109,710A,7110,7113,7115,7116,7118,7119,711A,7126,712F,7130,7131,7136,7145,714A,714C,714E,715C,715E,7164,7166,7167,7168,716E,7172,7173,7178,717A,717D,7184,718A,718F,7194,7198,7199,719F,71A0,71A8,71AC,71B3,71B5,71B9,71C3,71CE,71D4,71D5,71E0,71E5,71E7,71EE,71F9,7206,721D,7228,722A,722C,7230,7231,7235,7236,7237,7238,7239,723B,723D,723F,7247,7248,724C,724D,7252,7256,7259,725B,725D,725F,7261,7262,7266,7267,7269,726E,726F,7272,7275,7279,727A,727E,727F,7280,7281,7284,728A,728B,728D,728F,7292,729F,72AC,72AD,72AF,72B0,72B4,72B6,72B7,72B8,72B9,72C1,72C2,72C3,72C4,72C8,72CD,72CE,72D0,72D2,72D7,72D9,72DE,72E0,72E1,72E8,72E9,72EC,72ED,72EE,72EF,72F0,72F1,72F2,72F3,72F4,72F7,72F8,72FA,72FB,72FC,7301,7303,730A,730E,7313,7315,7316,7317,731B,731C,731D,731E,7321,7322,7325,7329,732A,732B,732C,732E,7331,7334,7337,7338,7339,733E,733F,734D,7350,7352,7357,7360,736C,736D,736F,737E,7384,7387,7389,738B,738E,7391,7396,739B,739F,73A2,73A9,73AB,73AE,73AF,73B0,73B2,73B3,73B7,73BA,73BB,73C0,73C2,73C8,73C9,73CA,73CD,73CF,73D0,73D1,73D9,73DE,73E0,73E5,73E7,73E9,73ED,73F2,7403,7405,7406,7409,740A,740F,7410,741A,741B,7422,7425,7426,7428,742A,742C,742E,7430,7433,7434,7435,7436,743C,7441,7455,7457,7459,745A,745B,745C,745E,745F,746D,7470,7476,7477,747E,7480,7481,7483,7487,748B,748E,7490,749C,749E,74A7,74A8,74A9,74BA,74D2,74DC,74DE,74E0,74E2,74E3,74E4,74E6,74EE,74EF,74F4,74F6,74F7,74FF,7504,750D,750F,7511,7513,7518,7519,751A,751C,751F,7525,7528,7529,752B,752C,752D,752F,7530,7531,7532,7533,7535,7537,7538,753A,753B,753E,7540,7545,7548,754B,754C,754E,754F,7554,7559,755A,755B,755C,7565,7566,756A,7572,7574,7578,7579,757F,7583,7586,758B,758F,7591,7592,7594,7596,7597,7599,759A,759D,759F,75A0,75A1,75A3,75A4,75A5,75AB,75AC,75AE,75AF,75B0,75B1,75B2,75B3,75B4,75B5,75B8,75B9,75BC,75BD,75BE,75C2,75C3,75C4,75C5,75C7,75C8,75C9,75CA,75CD,75D2,75D4,75D5,75D6,75D8,75DB,75DE,75E2,75E3,75E4,75E6,75E7,75E8,75EA,75EB,75F0,75F1,75F4,75F9,75FC,75FF,7600,7601,7603,7605,760A,760C,7610,7615,7617,7618,7619,761B,761F,7620,7622,7624,7625,7626,7629,762A,762B,762D,7630,7633,7634,7635,7638,763C,763E,763F,7640,7643,764C,764D,7654,7656,765C,765E,7663,766B,766F,7678,767B,767D,767E,7682,7684,7686,7687,7688,768B,768E,7691,7693,7696,7699,76A4,76AE,76B1,76B2,76B4,76BF,76C2,76C5,76C6,76C8,76CA,76CD,76CE,76CF,76D0,76D1,76D2,76D4,76D6,76D7,76D8,76DB,76DF,76E5,76EE,76EF,76F1,76F2,76F4,76F8,76F9,76FC,76FE,7701,7704,7707,7708,7709,770B,770D,7719,771A,771F,7720,7722,7726,7728,7729,772D,772F,7735,7736,7737,7738,773A,773C,7740,7741,7743,7747,7750,7751,775A,775B,7761,7762,7763,7765,7766,7768,776B,776C,7779,777D,777E,777F,7780,7784,7785,778C,778D,778E,7791,7792,779F,77A0,77A2,77A5,77A7,77A9,77AA,77AC,77B0,77B3,77B5,77BB,77BD,77BF,77CD,77D7,77DB,77DC,77E2,77E3,77E5,77E7,77E9,77EB,77EC,77ED,77EE,77F3,77F6,77F8,77FD,77FE,77FF,7800,7801,7802,7809,780C,780D,7811,7812,7814,7816,7817,7818,781A,781C,781D,781F,7823,7825,7826,7827,7829,782C,782D,7830,7834,7837,7838,7839,783A,783B,783C,783E,7840,7845,7847,784C,784E,7850,7852,7855,7856,7857,785D,786A,786B,786C,786D,786E,7877,787C,7887,7889,788C,788D,788E,7891,7893,7897,7898,789A,789B,789C,789F,78A1,78A3,78A5,78A7,78B0,78B1,78B2,78B3,78B4,78B9,78BE,78C1,78C5,78C9,78CA,78CB,78D0,78D4,78D5,78D9,78E8,78EC,78F2,78F4,78F7,78FA,7901,7905,7913,791E,7924,7934,793A,793B,793C,793E,7940,7941,7946,7948,7949,7953,7956,7957,795A,795B,795C,795D,795E,795F,7960,7962,7965,7967,7968,796D,796F,7977,7978,797A,7980,7981,7984,7985,798A,798F,799A,79A7,79B3,79B9,79BA,79BB,79BD,79BE,79C0,79C1,79C3,79C6,79C9,79CB,79CD,79D1,79D2,79D5,79D8,79DF,79E3,79E4,79E6,79E7,79E9,79EB,79ED,79EF,79F0,79F8,79FB,79FD,7A00,7A02,7A03,7A06,7A0B,7A0D,7A0E,7A14,7A17,7A1A,7A1E,7A20,7A23,7A33,7A37,7A39,7A3B,7A3C,7A3D,7A3F,7A46,7A51,7A57,7A70,7A74,7A76,7A77,7A78,7A79,7A7A,7A7F,7A80,7A81,7A83,7A84,7A86,7A88,7A8D,7A91,7A92,7A95,7A96,7A97,7A98,7A9C,7A9D,7A9F,7AA0,7AA5,7AA6,7AA8,7AAC,7AAD,7AB3,7ABF,7ACB,7AD6,7AD9,7ADE,7ADF,7AE0,7AE3,7AE5,7AE6,7AED,7AEF,7AF9,7AFA,7AFD,7AFF,7B03,7B04,7B06,7B08,7B0A,7B0B,7B0F,7B11,7B14,7B15,7B19,7B1B,7B1E,7B20,7B24,7B25,7B26,7B28,7B2A,7B2B,7B2C,7B2E,7B31,7B33,7B38,7B3A,7B3C,7B3E,7B45,7B47,7B49,7B4B,7B4C,7B4F,7B50,7B51,7B52,7B54,7B56,7B58,7B5A,7B5B,7B5D,7B60,7B62,7B6E,7B71,7B72,7B75,7B77,7B79,7B7B,7B7E,7B80,7B85,7B8D,7B90,7B94,7B95,7B97,7B9C,7B9D,7BA1,7BA2,7BA6,7BA7,7BA8,7BA9,7BAA,7BAB,7BAC,7BAD,7BB1,7BB4,7BB8,7BC1,7BC6,7BC7,7BCC,7BD1,7BD3,7BD9,7BDA,7BDD,7BE1,7BE5,7BE6,7BEA,7BEE,7BF1,7BF7,7BFC,7BFE,7C07,7C0B,7C0C,7C0F,7C16,7C1F,7C26,7C27,7C2A,7C38,7C3F,7C40,7C41,7C4D,7C73,7C74,7C7B,7C7C,7C7D,7C89,7C91,7C92,7C95,7C97,7C98,7C9C,7C9D,7C9E,7C9F,7CA2,7CA4,7CA5,7CAA,7CAE,7CB1,7CB2,7CB3,7CB9,7CBC,7CBD,7CBE,7CC1,7CC5,7CC7,7CC8,7CCA,7CCC,7CCD,7CD5,7CD6,7CD7,7CD9,7CDC,7CDF,7CE0,7CE8,7CEF,7CF8,7CFB,7D0A,7D20,7D22,7D27,7D2B,7D2F,7D6E,7D77,7DA6,7DAE,7E3B,7E41,7E47,7E82,7E9B,7E9F,7EA0,7EA1,7EA2,7EA3,7EA4,7EA5,7EA6,7EA7,7EA8,7EA9,7EAA,7EAB,7EAC,7EAD,7EAF,7EB0,7EB1,7EB2,7EB3,7EB5,7EB6,7EB7,7EB8,7EB9,7EBA,7EBD,7EBE,7EBF,7EC0,7EC1,7EC2,7EC3,7EC4,7EC5,7EC6,7EC7,7EC8,7EC9,7ECA,7ECB,7ECC,7ECD,7ECE,7ECF,7ED0,7ED1,7ED2,7ED3,7ED4,7ED5,7ED7,7ED8,7ED9,7EDA,7EDB,7EDC,7EDD,7EDE,7EDF,7EE0,7EE1,7EE2,7EE3,7EE5,7EE6,7EE7,7EE8,7EE9,7EEA,7EEB,7EED,7EEE,7EEF,7EF0,7EF1,7EF2,7EF3,7EF4,7EF5,7EF6,7EF7,7EF8,7EFA,7EFB,7EFC,7EFD,7EFE,7EFF,7F00,7F01,7F02,7F03,7F04,7F05,7F06,7F07,7F08,7F09,7F0B,7F0C,7F0D,7F0E,7F0F,7F11,7F12,7F13,7F14,7F15,7F16,7F17,7F18,7F19,7F1A,7F1B,7F1C,7F1D,7F1F,7F20,7F21,7F22,7F23,7F24,7F25,7F26,7F27,7F28,7F29,7F2A,7F2B,7F2C,7F2D,7F2E,7F2F,7F30,7F31,7F32,7F33,7F34,7F35,7F36,7F38,7F3A,7F42,7F44,7F45,7F50,7F51,7F54,7F55,7F57,7F58,7F5A,7F5F,7F61,7F62,7F68,7F69,7F6A,7F6E,7F71,7F72,7F74,7F79,7F7E,7F81,7F8A,7F8C,7F8E,7F94,7F9A,7F9D,7F9E,7F9F,7FA1,7FA4,7FA7,7FAF,7FB0,7FB2,7FB8,7FB9,7FBC,7FBD,7FBF,7FC1,7FC5,7FCA,7FCC,7FCE,7FD4,7FD5,7FD8,7FDF,7FE0,7FE1,7FE5,7FE6,7FE9,7FEE,7FF0,7FF1,7FF3,7FFB,7FFC,8000,8001,8003,8004,8005,8006,800B,800C,800D,8010,8012,8014,8015,8016,8017,8018,8019,801C,8020,8022,8025,8026,8027,8028,8029,802A,8031,8033,8035,8036,8037,8038,803B,803D,803F,8042,8043,8046,804A,804B,804C,804D,8052,8054,8058,805A,8069,806A,8071,807F,8080,8083,8084,8086,8087,8089,808B,808C,8093,8096,8098,809A,809B,809C,809D,809F,80A0,80A1,80A2,80A4,80A5,80A9,80AA,80AB,80AD,80AE,80AF,80B1,80B2,80B4,80B7,80BA,80BC,80BD,80BE,80BF,80C0,80C1,80C2,80C3,80C4,80C6,80CC,80CD,80CE,80D6,80D7,80D9,80DA,80DB,80DC,80DD,80DE,80E1,80E4,80E5,80E7,80E8,80E9,80EA,80EB,80EC,80ED,80EF,80F0,80F1,80F2,80F3,80F4,80F6,80F8,80FA,80FC,80FD,8102,8106,8109,810A,810D,810E,810F,8110,8111,8112,8113,8114,8116,8118,811A,811E,812C,812F,8131,8132,8136,8138,813E,8146,8148,814A,814B,814C,8150,8151,8153,8154,8155,8159,815A,8160,8165,8167,8169,816D,816E,8170,8171,8174,8179,817A,817B,817C,817D,817E,817F,8180,8182,8188,818A,818F,8191,8198,819B,819C,819D,81A3,81A6,81A8,81AA,81B3,81BA,81BB,81C0,81C1,81C2,81C3,81C6,81CA,81CC,81E3,81E7,81EA,81EC,81ED,81F3,81F4,81FB,81FC,81FE,8200,8201,8202,8204,8205,8206,820C,820D,8210,8212,8214,821B,821C,821E,821F,8221,8222,8223,8228,822A,822B,822C,822D,822F,8230,8231,8233,8234,8235,8236,8237,8238,8239,823B,823E,8244,8247,8249,824B,824F,8258,825A,825F,8268,826E,826F,8270,8272,8273,8274,8279,827A,827D,827E,827F,8282,8284,8288,828A,828B,828D,828E,828F,8291,8292,8297,8298,8299,829C,829D,829F,82A1,82A4,82A5,82A6,82A8,82A9,82AA,82AB,82AC,82AD,82AE,82AF,82B0,82B1,82B3,82B4,82B7,82B8,82B9,82BD,82BE,82C1,82C4,82C7,82C8,82CA,82CB,82CC,82CD,82CE,82CF,82D1,82D2,82D3,82D4,82D5,82D7,82D8,82DB,82DC,82DE,82DF,82E0,82E1,82E3,82E4,82E5,82E6,82EB,82EF,82F1,82F4,82F7,82F9,82FB,8301,8302,8303,8304,8305,8306,8307,8308,8309,830C,830E,830F,8311,8314,8315,8317,831A,831B,831C,8327,8328,832B,832C,832D,832F,8331,8333,8334,8335,8336,8338,8339,833A,833C,8340,8343,8346,8347,8349,834F,8350,8351,8352,8354,835A,835B,835C,835E,835F,8360,8361,8363,8364,8365,8366,8367,8368,8369,836A,836B,836C,836D,836E,836F,8377,8378,837B,837C,837D,8385,8386,8389,838E,8392,8393,8398,839B,839C,839E,83A0,83A8,83A9,83AA,83AB,83B0,83B1,83B2,83B3,83B4,83B6,83B7,83B8,83B9,83BA,83BC,83BD,83C0,83C1,83C5,83C7,83CA,83CC,83CF,83D4,83D6,83D8,83DC,83DD,83DF,83E0,83E1,83E5,83E9,83EA,83F0,83F1,83F2,83F8,83F9,83FD,8401,8403,8404,8406,840B,840C,840D,840E,840F,8411,8418,841C,841D,8424,8425,8426,8427,8428,8431,8438,843C,843D,8446,8451,8457,8459,845A,845B,845C,8461,8463,8469,846B,846C,846D,8471,8473,8475,8476,8478,847A,8482,8487,8488,8489,848B,848C,848E,8497,8499,849C,84A1,84AF,84B2,84B4,84B8,84B9,84BA,84BD,84BF,84C1,84C4,84C9,84CA,84CD,84D0,84D1,84D3,84D6,84DD,84DF,84E0,84E3,84E5,84E6,84EC,84F0,84FC,84FF,850C,8511,8513,8517,851A,851F,8521,852B,852C,8537,8538,8539,853A,853B,853C,853D,8543,8548,8549,854A,8556,8559,855E,8564,8568,8572,8574,8579,857A,857B,857E,8584,8585,8587,858F,859B,859C,85A4,85A8,85AA,85AE,85AF,85B0,85B7,85B9,85C1,85C9,85CF,85D0,85D3,85D5,85DC,85E4,85E9,85FB,85FF,8605,8611,8616,8627,8629,8638,863C,864D,864E,864F,8650,8651,8654,865A,865E,8662,866B,866C,866E,8671,8679,867A,867B,867C,867D,867E,867F,8680,8681,8682,868A,868B,868C,868D,8693,8695,869C,869D,86A3,86A4,86A7,86A8,86A9,86AA,86AC,86AF,86B0,86B1,86B4,86B5,86B6,86BA,86C0,86C4,86C6,86C7,86C9,86CA,86CB,86CE,86CF,86D0,86D1,86D4,86D8,86D9,86DB,86DE,86DF,86E4,86E9,86ED,86EE,86F0,86F1,86F2,86F3,86F4,86F8,86F9,86FE,8700,8702,8703,8707,8708,8709,870A,870D,8712,8713,8715,8717,8718,871A,871C,871E,8721,8722,8723,8725,8729,872E,8731,8734,8737,873B,873E,873F,8747,8748,8749,874C,874E,8753,8757,8759,8760,8763,8764,8765,876E,8770,8774,8776,877B,877C,877D,877E,8782,8783,8785,8788,878B,878D,8793,8797,879F,87A8,87AB,87AC,87AD,87AF,87B3,87B5,87BA,87BD,87C0,87C6,87CA,87CB,87D1,87D2,87D3,87DB,87E0,87E5,87EA,87EE,87F9,87FE,8803,880A,8813,8815,8816,881B,8821,8822,8832,8839,883C,8840,8844,8845,884C,884D,8854,8857,8859,8861,8862,8863,8864,8865,8868,8869,886B,886C,886E,8870,8872,8877,887D,887E,887F,8881,8882,8884,8885,8888,888B,888D,8892,8896,889C,88A2,88A4,88AB,88AD,88B1,88B7,88BC,88C1,88C2,88C5,88C6,88C9,88CE,88D2,88D4,88D5,88D8,88D9,88DF,88E2,88E3,88E4,88E5,88E8,88F0,88F1,88F3,88F4,88F8,88F9,88FC,88FE,8902,890A,8910,8912,8913,8919,891A,891B,8921,8925,892A,892B,8930,8934,8936,8941,8944,895E,895F,8966,897B,897F,8981,8983,8986,89C1,89C2,89C4,89C5,89C6,89C7,89C8,89C9,89CA,89CB,89CC,89CE,89CF,89D0,89D1,89D2,89D6,89DA,89DC,89DE,89E3,89E5,89E6,89EB,89EF,89F3,8A00,8A07,8A3E,8A48,8A79,8A89,8A8A,8A93,8B07,8B26,8B66,8B6C,8BA0,8BA1,8BA2,8BA3,8BA4,8BA5,8BA6,8BA7,8BA8,8BA9,8BAA,8BAB,8BAD,8BAE,8BAF,8BB0,8BB2,8BB3,8BB4,8BB5,8BB6,8BB7,8BB8,8BB9,8BBA,8BBC,8BBD,8BBE,8BBF,8BC0,8BC1,8BC2,8BC3,8BC4,8BC5,8BC6,8BC8,8BC9,8BCA,8BCB,8BCC,8BCD,8BCE,8BCF,8BD1,8BD2,8BD3,8BD4,8BD5,8BD6,8BD7,8BD8,8BD9,8BDA,8BDB,8BDC,8BDD,8BDE,8BDF,8BE0,8BE1,8BE2,8BE3,8BE4,8BE5,8BE6,8BE7,8BE8,8BE9,8BEB,8BEC,8BED,8BEE,8BEF,8BF0,8BF1,8BF2,8BF3,8BF4,8BF5,8BF6,8BF7,8BF8,8BF9,8BFA,8BFB,8BFC,8BFD,8BFE,8BFF,8C00,8C01,8C02,8C03,8C04,8C05,8C06,8C07,8C08,8C0A,8C0B,8C0C,8C0D,8C0E,8C0F,8C10,8C11,8C12,8C13,8C14,8C15,8C16,8C17,8C18,8C19,8C1A,8C1B,8C1C,8C1D,8C1F,8C20,8C21,8C22,8C23,8C24,8C25,8C26,8C27,8C28,8C29,8C2A,8C2B,8C2C,8C2D,8C2E,8C2F,8C30,8C31,8C32,8C33,8C34,8C35,8C36,8C37,8C41,8C46,8C47,8C49,8C4C,8C55,8C5A,8C61,8C62,8C6A,8C6B,8C73,8C78,8C79,8C7A,8C82,8C85,8C89,8C8A,8C8C,8C94,8C98,8D1D,8D1E,8D1F,8D21,8D22,8D23,8D24,8D25,8D26,8D27,8D28,8D29,8D2A,8D2B,8D2C,8D2D,8D2E,8D2F,8D30,8D31,8D32,8D33,8D34,8D35,8D36,8D37,8D38,8D39,8D3A,8D3B,8D3C,8D3D,8D3E,8D3F,8D40,8D41,8D42,8D43,8D44,8D45,8D46,8D47,8D48,8D49,8D4A,8D4B,8D4C,8D4D,8D4E,8D4F,8D50,8D53,8D54,8D55,8D56,8D58,8D59,8D5A,8D5B,8D5C,8D5D,8D5E,8D60,8D61,8D62,8D63,8D64,8D66,8D67,8D6B,8D6D,8D70,8D73,8D74,8D75,8D76,8D77,8D81,8D84,8D85,8D8A,8D8B,8D91,8D94,8D9F,8DA3,8DB1,8DB3,8DB4,8DB5,8DB8,8DBA,8DBC,8DBE,8DBF,8DC3,8DC4,8DC6,8DCB,8DCC,8DCE,8DCF,8DD1,8DD6,8DD7,8DDA,8DDB,8DDD,8DDE,8DDF,8DE3,8DE4,8DE8,8DEA,8DEB,8DEC,8DEF,8DF3,8DF5,8DF7,8DF8,8DF9,8DFA,8DFB,8DFD,8E05,8E09,8E0A,8E0C,8E0F,8E14,8E1D,8E1E,8E1F,8E22,8E23,8E29,8E2A,8E2C,8E2E,8E2F,8E31,8E35,8E39,8E3A,8E3D,8E40,8E41,8E42,8E44,8E47,8E48,8E49,8E4A,8E4B,8E51,8E52,8E59,8E66,8E69,8E6C,8E6D,8E6F,8E70,8E72,8E74,8E76,8E7C,8E7F,8E81,8E85,8E87,8E8F,8E90,8E94,8E9C,8E9E,8EAB,8EAC,8EAF,8EB2,8EBA,8ECE,8F66,8F67,8F68,8F69,8F6B,8F6C,8F6D,8F6E,8F6F,8F70,8F71,8F72,8F73,8F74,8F75,8F76,8F77,8F78,8F79,8F7A,8F7B,8F7C,8F7D,8F7E,8F7F,8F81,8F82,8F83,8F84,8F85,8F86,8F87,8F88,8F89,8F8A,8F8B,8F8D,8F8E,8F8F,8F90,8F91,8F93,8F94,8F95,8F96,8F97,8F98,8F99,8F9A,8F9B,8F9C,8F9E,8F9F,8FA3,8FA8,8FA9,8FAB,8FB0,8FB1,8FB6,8FB9,8FBD,8FBE,8FC1,8FC2,8FC4,8FC5,8FC7,8FC8,8FCE,8FD0,8FD1,8FD3,8FD4,8FD5,8FD8,8FD9,8FDB,8FDC,8FDD,8FDE,8FDF,8FE2,8FE4,8FE5,8FE6,8FE8,8FE9,8FEA,8FEB,8FED,8FEE,8FF0,8FF3,8FF7,8FF8,8FF9,8FFD,9000,9001,9002,9003,9004,9005,9006,9009,900A,900B,900D,900F,9010,9011,9012,9014,9016,9017,901A,901B,901D,901E,901F,9020,9021,9022,9026,902D,902E,902F,9035,9036,9038,903B,903C,903E,9041,9042,9044,9047,904D,904F,9050,9051,9052,9053,9057,9058,905B,9062,9063,9065,9068,906D,906E,9074,9075,907D,907F,9080,9082,9083,9088,908B,9091,9093,9095,9097,9099,909B,909D,90A1,90A2,90A3,90A6,90AA,90AC,90AE,90AF,90B0,90B1,90B3,90B4,90B5,90B6,90B8,90B9,90BA,90BB,90BE,90C1,90C4,90C5,90C7,90CA,90CE,90CF,90D0,90D1,90D3,90D7,90DB,90DC,90DD,90E1,90E2,90E6,90E7,90E8,90EB,90ED,90EF,90F4,90F8,90FD,90FE,9102,9104,9119,911E,9122,9123,912F,9131,9139,9143,9146,9149,914A,914B,914C,914D,914E,914F,9150,9152,9157,915A,915D,915E,9161,9162,9163,9164,9165,9169,916A,916C,916E,916F,9170,9171,9172,9174,9175,9176,9177,9178,9179,917D,917E,917F,9185,9187,9189,918B,918C,918D,9190,9191,9192,919A,919B,91A2,91A3,91AA,91AD,91AE,91AF,91B4,91B5,91BA,91C7,91C9,91CA,91CC,91CD,91CE,91CF,91D1,91DC,9274,928E,92AE,92C8,933E,936A,938F,93CA,93D6,943E,946B,9485,9486,9487,9488,9489,948A,948B,948C,948D,948E,948F,9490,9492,9493,9494,9495,9497,9499,949A,949B,949C,949D,949E,949F,94A0,94A1,94A2,94A3,94A4,94A5,94A6,94A7,94A8,94A9,94AA,94AB,94AC,94AD,94AE,94AF,94B0,94B1,94B2,94B3,94B4,94B5,94B6,94B7,94B8,94B9,94BA,94BB,94BC,94BD,94BE,94BF,94C0,94C1,94C2,94C3,94C4,94C5,94C6,94C8,94C9,94CA,94CB,94CC,94CD,94CE,94D0,94D1,94D2,94D5,94D6,94D7,94D8,94D9,94DB,94DC,94DD,94DE,94DF,94E0,94E1,94E2,94E3,94E4,94E5,94E7,94E8,94E9,94EA,94EB,94EC,94ED,94EE,94EF,94F0,94F1,94F2,94F3,94F4,94F5,94F6,94F7,94F8,94F9,94FA,94FC,94FD,94FE,94FF,9500,9501,9502,9503,9504,9505,9506,9507,9508,9509,950A,950B,950C,950D,950E,950F,9510,9511,9512,9513,9514,9515,9516,9517,9518,9519,951A,951B,951D,951E,951F,9521,9522,9523,9524,9525,9526,9528,9529,952A,952B,952C,952D,952E,952F,9530,9531,9532,9534,9535,9536,9537,9538,9539,953A,953B,953C,953E,953F,9540,9541,9542,9544,9545,9546,9547,9549,954A,954C,954D,954E,954F,9550,9551,9552,9553,9554,9556,9557,9558,9559,955B,955C,955D,955E,955F,9561,9562,9563,9564,9565,9566,9567,9568,9569,956A,956B,956C,956D,956F,9570,9571,9572,9573,9576,957F,95E8,95E9,95EA,95EB,95ED,95EE,95EF,95F0,95F1,95F2,95F3,95F4,95F5,95F6,95F7,95F8,95F9,95FA,95FB,95FC,95FD,95FE,9600,9601,9602,9603,9604,9605,9606,9608,9609,960A,960B,960C,960D,960E,960F,9610,9611,9612,9614,9615,9616,9617,9619,961A,961C,961D,961F,9621,9622,962A,962E,9631,9632,9633,9634,9635,9636,963B,963C,963D,963F,9640,9642,9644,9645,9646,9647,9648,9649,964B,964C,964D,9650,9654,9655,965B,965F,9661,9662,9664,9667,9668,9669,966A,966C,9672,9674,9675,9676,9677,9685,9686,9688,968B,968D,968F,9690,9694,9697,9698,9699,969C,96A7,96B0,96B3,96B6,96B9,96BC,96BD,96BE,96C0,96C1,96C4,96C5,96C6,96C7,96C9,96CC,96CD,96CE,96CF,96D2,96D5,96E0,96E8,96E9,96EA,96EF,96F3,96F6,96F7,96F9,96FE,9700,9701,9704,9706,9707,9708,9709,970D,970E,970F,9713,9716,971C,971E,972A,972D,9730,9732,9738,9739,973E,9752,9753,9756,9759,975B,975E,9760,9761,9762,9765,9769,9773,9774,9776,977C,9785,978B,978D,9791,9792,9794,9798,97A0,97A3,97AB,97AD,97AF,97B2,97B4,97E6,97E7,97E9,97EA,97EB,97EC,97ED,97F3,97F5,97F6,9875,9876,9877,9878,9879,987A,987B,987C,987D,987E,987F,9880,9881,9882,9883,9884,9885,9886,9887,9888,9889,988A,988C,988D,988F,9890,9891,9893,9894,9896,9897,9898,989A,989B,989C,989D,989E,989F,98A0,98A1,98A2,98A4,98A5,98A6,98A7,98CE,98D1,98D2,98D3,98D5,98D8,98D9,98DA,98DE,98DF,98E7,98E8,990D,9910,992E,9954,9955,9963,9965,9967,9968,9969,996A,996B,996C,996D,996E,996F,9970,9971,9972,9974,9975,9976,9977,997A,997C,997D,997F,9980,9981,9984,9985,9986,9987,9988,998A,998B,998D,998F,9990,9991,9992,9993,9994,9995,9996,9997,9998,9999,99A5,99A8,9A6C,9A6D,9A6E,9A6F,9A70,9A71,9A73,9A74,9A75,9A76,9A77,9A78,9A79,9A7A,9A7B,9A7C,9A7D,9A7E,9A7F,9A80,9A81,9A82,9A84,9A85,9A86,9A87,9A88,9A8A,9A8B,9A8C,9A8F,9A90,9A91,9A92,9A93,9A96,9A97,9A98,9A9A,9A9B,9A9C,9A9D,9A9E,9A9F,9AA0,9AA1,9AA2,9AA3,9AA4,9AA5,9AA7,9AA8,9AB0,9AB1,9AB6,9AB7,9AB8,9ABA,9ABC,9AC0,9AC1,9AC2,9AC5,9ACB,9ACC,9AD1,9AD3,9AD8,9ADF,9AE1,9AE6,9AEB,9AED,9AEF,9AF9,9AFB,9B03,9B08,9B0F,9B13,9B1F,9B23,9B2F,9B32,9B3B,9B3C,9B41,9B42,9B43,9B44,9B45,9B47,9B48,9B49,9B4D,9B4F,9B51,9B54,9C7C,9C7F,9C81,9C82,9C85,9C86,9C87,9C88,9C8B,9C8D,9C8E,9C90,9C91,9C92,9C94,9C95,9C9A,9C9B,9C9C,9C9E,9C9F,9CA0,9CA1,9CA2,9CA3,9CA4,9CA5,9CA6,9CA7,9CA8,9CA9,9CAB,9CAD,9CAE,9CB0,9CB1,9CB2,9CB3,9CB4,9CB5,9CB6,9CB7,9CB8,9CBA,9CBB,9CBC,9CBD,9CC3,9CC4,9CC5,9CC6,9CC7,9CCA,9CCB,9CCC,9CCD,9CCE,9CCF,9CD0,9CD3,9CD4,9CD5,9CD6,9CD7,9CD8,9CD9,9CDC,9CDD,9CDE,9CDF,9CE2,9E1F,9E20,9E21,9E22,9E23,9E25,9E26,9E28,9E29,9E2A,9E2B,9E2C,9E2D,9E2F,9E31,9E32,9E33,9E35,9E36,9E37,9E38,9E39,9E3A,9E3D,9E3E,9E3F,9E41,9E42,9E43,9E44,9E45,9E46,9E47,9E48,9E49,9E4A,9E4B,9E4C,9E4E,9E4F,9E51,9E55,9E57,9E58,9E5A,9E5B,9E5C,9E5E,9E63,9E64,9E66,9E67,9E68,9E69,9E6A,9E6B,9E6C,9E6D,9E70,9E71,9E73,9E7E,9E7F,9E82,9E87,9E88,9E8B,9E92,9E93,9E9D,9E9F,9EA6,9EB4,9EB8,9EBB,9EBD,9EBE,9EC4,9EC9,9ECD,9ECE,9ECF,9ED1,9ED4,9ED8,9EDB,9EDC,9EDD,9EDF,9EE0,9EE2,9EE5,9EE7,9EE9,9EEA,9EEF,9EF9,9EFB,9EFC,9EFE,9F0B,9F0D,9F0E,9F10,9F13,9F17,9F19,9F20,9F22,9F2C,9F2F,9F37,9F39,9F3B,9F3D,9F3E,9F44,9F50,9F51,9F7F,9F80,9F83,9F84,9F85,9F86,9F87,9F88,9F89,9F8A,9F8B,9F8C,9F99,9F9A,9F9B,9F9F,9FA0,FF01,FF02,FF03,FF04,FF05,FF06,FF07,FF08,FF09,FF0A,FF0B,FF0C,FF0D,FF0E,FF0F,FF10,FF11,FF12,FF13,FF14,FF15,FF16,FF17,FF18,FF19,FF1A,FF1B,FF1C,FF1D,FF1E,FF1F,FF20,FF21,FF22,FF23,FF24,FF25,FF26,FF27,FF28,FF29,FF2A,FF2B,FF2C,FF2D,FF2E,FF2F,FF30,FF31,FF32,FF33,FF34,FF35,FF36,FF37,FF38,FF39,FF3A,FF3B,FF3C,FF3D,FF3E,FF3F,FF40,FF41,FF42,FF43,FF44,FF45,FF46,FF47,FF48,FF49,FF4A,FF4B,FF4C,FF4D,FF4E,FF4F,FF50,FF51,FF52,FF53,FF54,FF55,FF56,FF57,FF58,FF59,FF5A,FF5B,FF5C,FF5D,FF5E,FFE0,FFE1,FFE3,FFE5";
        }, AnsicodeChr = function () {
            return "A1E8,A1EC,A1A7,A1E3,A1C0,A1A4,A1C1,A8A4,A8A2,A8A8,A8A6,A8BA,A8AC,A8AA,A8B0,A8AE,A1C2,A8B4,A8B2,A8B9,A8A1,A8A5,A8A7,A8A9,A8AD,A8B1,A8A3,A8AB,A8AF,A8B3,A8B5,A8B6,A8B7,A8B8,A1A6,A1A5,A6A1,A6A2,A6A3,A6A4,A6A5,A6A6,A6A7,A6A8,A6A9,A6AA,A6AB,A6AC,A6AD,A6AE,A6AF,A6B0,A6B1,A6B2,A6B3,A6B4,A6B5,A6B6,A6B7,A6B8,A6C1,A6C2,A6C3,A6C4,A6C5,A6C6,A6C7,A6C8,A6C9,A6CA,A6CB,A6CC,A6CD,A6CE,A6CF,A6D0,A6D1,A6D2,A6D3,A6D4,A6D5,A6D6,A6D7,A6D8,A7A7,A7A1,A7A2,A7A3,A7A4,A7A5,A7A6,A7A8,A7A9,A7AA,A7AB,A7AC,A7AD,A7AE,A7AF,A7B0,A7B1,A7B2,A7B3,A7B4,A7B5,A7B6,A7B7,A7B8,A7B9,A7BA,A7BB,A7BC,A7BD,A7BE,A7BF,A7C0,A7C1,A7D1,A7D2,A7D3,A7D4,A7D5,A7D6,A7D8,A7D9,A7DA,A7DB,A7DC,A7DD,A7DE,A7DF,A7E0,A7E1,A7E2,A7E3,A7E4,A7E5,A7E6,A7E7,A7E8,A7E9,A7EA,A7EB,A7EC,A7ED,A7EE,A7EF,A7F0,A7F1,A7D7,A1AA,A1AC,A1AE,A1AF,A1B0,A1B1,A1AD,A1EB,A1E4,A1E5,A1F9,A1E6,A1ED,A2F1,A2F2,A2F3,A2F4,A2F5,A2F6,A2F7,A2F8,A2F9,A2FA,A2FB,A2FC,A1FB,A1FC,A1FA,A1FD,A1CA,A1C7,A1C6,A1CC,A1D8,A1DE,A1CF,A1CE,A1C4,A1C5,A1C9,A1C8,A1D2,A1D3,A1E0,A1DF,A1C3,A1CB,A1D7,A1D6,A1D5,A1D9,A1D4,A1DC,A1DD,A1DA,A1DB,A1D1,A1CD,A1D0,A2D9,A2DA,A2DB,A2DC,A2DD,A2DE,A2DF,A2E0,A2E1,A2E2,A2C5,A2C6,A2C7,A2C8,A2C9,A2CA,A2CB,A2CC,A2CD,A2CE,A2CF,A2D0,A2D1,A2D2,A2D3,A2D4,A2D5,A2D6,A2D7,A2D8,A2B1,A2B2,A2B3,A2B4,A2B5,A2B6,A2B7,A2B8,A2B9,A2BA,A2BB,A2BC,A2BD,A2BE,A2BF,A2C0,A2C1,A2C2,A2C3,A2C4,A9A4,A9A5,A9A6,A9A7,A9A8,A9A9,A9AA,A9AB,A9AC,A9AD,A9AE,A9AF,A9B0,A9B1,A9B2,A9B3,A9B4,A9B5,A9B6,A9B7,A9B8,A9B9,A9BA,A9BB,A9BC,A9BD,A9BE,A9BF,A9C0,A9C1,A9C2,A9C3,A9C4,A9C5,A9C6,A9C7,A9C8,A9C9,A9CA,A9CB,A9CC,A9CD,A9CE,A9CF,A9D0,A9D1,A9D2,A9D3,A9D4,A9D5,A9D6,A9D7,A9D8,A9D9,A9DA,A9DB,A9DC,A9DD,A9DE,A9DF,A9E0,A9E1,A9E2,A9E3,A9E4,A9E5,A9E6,A9E7,A9E8,A9E9,A9EA,A9EB,A9EC,A9ED,A9EE,A9EF,A1F6,A1F5,A1F8,A1F7,A1F4,A1F3,A1F0,A1F2,A1F1,A1EF,A1EE,A1E2,A1E1,A1A1,A1A2,A1A3,A1A8,A1A9,A1B4,A1B5,A1B6,A1B7,A1B8,A1B9,A1BA,A1BB,A1BE,A1BF,A1FE,A1B2,A1B3,A1BC,A1BD,A4A1,A4A2,A4A3,A4A4,A4A5,A4A6,A4A7,A4A8,A4A9,A4AA,A4AB,A4AC,A4AD,A4AE,A4AF,A4B0,A4B1,A4B2,A4B3,A4B4,A4B5,A4B6,A4B7,A4B8,A4B9,A4BA,A4BB,A4BC,A4BD,A4BE,A4BF,A4C0,A4C1,A4C2,A4C3,A4C4,A4C5,A4C6,A4C7,A4C8,A4C9,A4CA,A4CB,A4CC,A4CD,A4CE,A4CF,A4D0,A4D1,A4D2,A4D3,A4D4,A4D5,A4D6,A4D7,A4D8,A4D9,A4DA,A4DB,A4DC,A4DD,A4DE,A4DF,A4E0,A4E1,A4E2,A4E3,A4E4,A4E5,A4E6,A4E7,A4E8,A4E9,A4EA,A4EB,A4EC,A4ED,A4EE,A4EF,A4F0,A4F1,A4F2,A4F3,A5A1,A5A2,A5A3,A5A4,A5A5,A5A6,A5A7,A5A8,A5A9,A5AA,A5AB,A5AC,A5AD,A5AE,A5AF,A5B0,A5B1,A5B2,A5B3,A5B4,A5B5,A5B6,A5B7,A5B8,A5B9,A5BA,A5BB,A5BC,A5BD,A5BE,A5BF,A5C0,A5C1,A5C2,A5C3,A5C4,A5C5,A5C6,A5C7,A5C8,A5C9,A5CA,A5CB,A5CC,A5CD,A5CE,A5CF,A5D0,A5D1,A5D2,A5D3,A5D4,A5D5,A5D6,A5D7,A5D8,A5D9,A5DA,A5DB,A5DC,A5DD,A5DE,A5DF,A5E0,A5E1,A5E2,A5E3,A5E4,A5E5,A5E6,A5E7,A5E8,A5E9,A5EA,A5EB,A5EC,A5ED,A5EE,A5EF,A5F0,A5F1,A5F2,A5F3,A5F4,A5F5,A5F6,A8C5,A8C6,A8C7,A8C8,A8C9,A8CA,A8CB,A8CC,A8CD,A8CE,A8CF,A8D0,A8D1,A8D2,A8D3,A8D4,A8D5,A8D6,A8D7,A8D8,A8D9,A8DA,A8DB,A8DC,A8DD,A8DE,A8DF,A8E0,A8E1,A8E2,A8E3,A8E4,A8E5,A8E6,A8E7,A8E8,A8E9,A2E5,A2E6,A2E7,A2E8,A2E9,A2EA,A2EB,A2EC,A2ED,A2EE,D2BB,B6A1,C6DF,CDF2,D5C9,C8FD,C9CF,CFC2,D8A2,B2BB,D3EB,D8A4,B3F3,D7A8,C7D2,D8A7,CAC0,C7F0,B1FB,D2B5,B4D4,B6AB,CBBF,D8A9,B6AA,C1BD,D1CF,C9A5,D8AD,B8F6,D1BE,E3DC,D6D0,B7E1,B4AE,C1D9,D8BC,CDE8,B5A4,CEAA,D6F7,C0F6,BED9,D8AF,C4CB,BEC3,D8B1,C3B4,D2E5,D6AE,CEDA,D5A7,BAF5,B7A6,C0D6,C6B9,C5D2,C7C7,B9D4,B3CB,D2D2,D8BF,BEC5,C6F2,D2B2,CFB0,CFE7,CAE9,D8C0,C2F2,C2D2,C8E9,C7AC,C1CB,D3E8,D5F9,CAC2,B6FE,D8A1,D3DA,BFF7,D4C6,BBA5,D8C1,CEE5,BEAE,D8A8,D1C7,D0A9,D8BD,D9EF,CDF6,BFBA,BDBB,BAA5,D2E0,B2FA,BAE0,C4B6,CFED,BEA9,CDA4,C1C1,C7D7,D9F1,D9F4,C8CB,D8E9,D2DA,CAB2,C8CA,D8EC,D8EA,D8C6,BDF6,C6CD,B3F0,D8EB,BDF1,BDE9,C8D4,B4D3,C2D8,B2D6,D7D0,CACB,CBFB,D5CC,B8B6,CFC9,D9DA,D8F0,C7AA,D8EE,B4FA,C1EE,D2D4,D8ED,D2C7,D8EF,C3C7,D1F6,D6D9,D8F2,D8F5,BCFE,BCDB,C8CE,B7DD,B7C2,C6F3,D8F8,D2C1,CEE9,BCBF,B7FC,B7A5,D0DD,D6DA,D3C5,BBEF,BBE1,D8F1,C9A1,CEB0,B4AB,D8F3,C9CB,D8F6,C2D7,D8F7,CEB1,D8F9,B2AE,B9C0,D9A3,B0E9,C1E6,C9EC,CBC5,CBC6,D9A4,B5E8,B5AB,CEBB,B5CD,D7A1,D7F4,D3D3,CCE5,BACE,D9A2,D9DC,D3E0,D8FD,B7F0,D7F7,D8FE,D8FA,D9A1,C4E3,D3B6,D8F4,D9DD,D8FB,C5E5,C0D0,D1F0,B0DB,BCD1,D9A6,D9A5,D9AC,D9AE,D9AB,CAB9,D9A9,D6B6,B3DE,D9A8,C0FD,CACC,D9AA,D9A7,D9B0,B6B1,B9A9,D2C0,CFC0,C2C2,BDC4,D5EC,B2E0,C7C8,BFEB,D9AD,D9AF,CEEA,BAEE,C7D6,B1E3,B4D9,B6ED,D9B4,BFA1,D9DE,C7CE,C0FE,D9B8,CBD7,B7FD,D9B5,D9B7,B1A3,D3E1,D9B9,D0C5,D9B6,D9B1,D9B2,C1A9,D9B3,BCF3,D0DE,B8A9,BEE3,D9BD,D9BA,B0B3,D9C2,D9C4,B1B6,D9BF,B5B9,BEF3,CCC8,BAF2,D2D0,D9C3,BDE8,B3AB,D9C5,BEEB,D9C6,D9BB,C4DF,D9BE,D9C1,D9C0,D5AE,D6B5,C7E3,D9C8,BCD9,D9CA,D9BC,D9CB,C6AB,D9C9,D7F6,CDA3,BDA1,D9CC,C5BC,CDB5,D9CD,D9C7,B3A5,BFFE,B8B5,C0FC,B0F8,B4F6,D9CE,D9CF,B4A2,D9D0,B4DF,B0C1,D9D1,C9B5,CFF1,D9D2,C1C5,D9D6,C9AE,D9D5,D9D4,D9D7,CBDB,BDA9,C6A7,D9D3,D9D8,D9D9,C8E5,C0DC,B6F9,D8A3,D4CA,D4AA,D0D6,B3E4,D5D7,CFC8,B9E2,BFCB,C3E2,B6D2,CDC3,D9EE,D9F0,B5B3,B6B5,BEA4,C8EB,C8AB,B0CB,B9AB,C1F9,D9E2,C0BC,B9B2,B9D8,D0CB,B1F8,C6E4,BEDF,B5E4,D7C8,D1F8,BCE6,CADE,BCBD,D9E6,D8E7,C4DA,B8D4,C8BD,B2E1,D4D9,C3B0,C3E1,DAA2,C8DF,D0B4,BEFC,C5A9,B9DA,DAA3,D4A9,DAA4,D9FB,B6AC,B7EB,B1F9,D9FC,B3E5,BEF6,BFF6,D2B1,C0E4,B6B3,D9FE,D9FD,BEBB,C6E0,D7BC,DAA1,C1B9,B5F2,C1E8,BCF5,B4D5,C1DD,C4FD,BCB8,B7B2,B7EF,D9EC,C6BE,BFAD,BBCB,B5CA,DBC9,D0D7,CDB9,B0BC,B3F6,BBF7,DBCA,BAAF,D4E4,B5B6,B5F3,D8D6,C8D0,B7D6,C7D0,D8D7,BFAF,DBBB,D8D8,D0CC,BBAE,EBBE,C1D0,C1F5,D4F2,B8D5,B4B4,B3F5,C9BE,C5D0,C5D9,C0FB,B1F0,D8D9,B9CE,B5BD,D8DA,D6C6,CBA2,C8AF,C9B2,B4CC,BFCC,B9F4,D8DB,D8DC,B6E7,BCC1,CCEA,CFF7,D8DD,C7B0,B9D0,BDA3,CCDE,C6CA,D8E0,D8DE,D8DF,B0FE,BEE7,CAA3,BCF4,B8B1,B8EE,D8E2,BDCB,D8E4,D8E3,C5FC,D8E5,D8E6,C1A6,C8B0,B0EC,B9A6,BCD3,CEF1,DBBD,C1D3,B6AF,D6FA,C5AC,BDD9,DBBE,DBBF,C0F8,BEA2,C0CD,DBC0,CAC6,B2AA,D3C2,C3E3,D1AB,DBC2,C0D5,DBC3,BFB1,C4BC,C7DA,DBC4,D9E8,C9D7,B9B4,CEF0,D4C8,B0FC,B4D2,D0D9,D9E9,DECB,D9EB,D8B0,BBAF,B1B1,B3D7,D8CE,D4D1,BDB3,BFEF,CFBB,D8D0,B7CB,D8D1,C6A5,C7F8,D2BD,D8D2,C4E4,CAAE,C7A7,D8A6,C9FD,CEE7,BBDC,B0EB,BBAA,D0AD,B1B0,D7E4,D7BF,B5A5,C2F4,C4CF,B2A9,B2B7,B1E5,DFB2,D5BC,BFA8,C2AC,D8D5,C2B1,D8D4,CED4,DAE0,CEC0,D8B4,C3AE,D3A1,CEA3,BCB4,C8B4,C2D1,BEED,D0B6,DAE1,C7E4,B3A7,B6F2,CCFC,C0FA,C0F7,D1B9,D1E1,D8C7,B2DE,C0E5,BAF1,D8C8,D4AD,CFE1,D8C9,D8CA,CFC3,B3F8,BEC7,D8CB,DBCC,C8A5,CFD8,C8FE,B2CE,D3D6,B2E6,BCB0,D3D1,CBAB,B7B4,B7A2,CAE5,C8A1,CADC,B1E4,D0F0,C5D1,DBC5,B5FE,BFDA,B9C5,BEE4,C1ED,DFB6,DFB5,D6BB,BDD0,D5D9,B0C8,B6A3,BFC9,CCA8,DFB3,CAB7,D3D2,D8CF,D2B6,BAC5,CBBE,CCBE,DFB7,B5F0,DFB4,D3F5,B3D4,B8F7,DFBA,BACF,BCAA,B5F5,CDAC,C3FB,BAF3,C0F4,CDC2,CFF2,DFB8,CFC5,C2C0,DFB9,C2F0,BEFD,C1DF,CDCC,D2F7,B7CD,DFC1,DFC4,B7F1,B0C9,B6D6,B7D4,BAAC,CCFD,BFD4,CBB1,C6F4,D6A8,DFC5,CEE2,B3B3,CEFC,B4B5,CEC7,BAF0,CEE1,D1BD,DFC0,B4F4,B3CA,B8E6,DFBB,C4C5,DFBC,DFBD,DFBE,C5BB,DFBF,DFC2,D4B1,DFC3,C7BA,CED8,C4D8,DFCA,DFCF,D6DC,DFC9,DFDA,CEB6,BAC7,DFCE,DFC8,C5DE,C9EB,BAF4,C3FC,BED7,DFC6,DFCD,C5D8,D5A6,BACD,BECC,D3BD,B8C0,D6E4,DFC7,B9BE,BFA7,C1FC,DFCB,DFCC,DFD0,DFDB,DFE5,DFD7,DFD6,D7C9,DFE3,DFE4,E5EB,D2A7,DFD2,BFA9,D4DB,BFC8,DFD4,CFCC,DFDD,D1CA,DFDE,B0A7,C6B7,DFD3,BAE5,B6DF,CDDB,B9FE,D4D5,DFDF,CFEC,B0A5,DFE7,DFD1,D1C6,DFD5,DFD8,DFD9,DFDC,BBA9,DFE0,DFE1,DFE2,DFE6,DFE8,D3B4,B8E7,C5B6,DFEA,C9DA,C1A8,C4C4,BFDE,CFF8,D5DC,DFEE,B2B8,BADF,DFEC,DBC1,D1E4,CBF4,B4BD,B0A6,DFF1,CCC6,DFF2,DFED,DFE9,DFEB,DFEF,DFF0,BBBD,DFF3,DFF4,BBA3,CADB,CEA8,E0A7,B3AA,E0A6,E0A1,DFFE,CDD9,DFFC,DFFA,BFD0,D7C4,C9CC,DFF8,B0A1,DFFD,DFFB,E0A2,E0A8,B7C8,C6A1,C9B6,C0B2,DFF5,C5BE,D8C4,DFF9,C4F6,E0A3,E0A4,E0A5,D0A5,E0B4,CCE4,E0B1,BFA6,E0AF,CEB9,E0AB,C9C6,C0AE,E0AE,BAED,BAB0,E0A9,DFF6,E0B3,E0B8,B4AD,E0B9,CFB2,BAC8,E0B0,D0FA,E0AC,D4FB,DFF7,C5E7,E0AD,D3F7,E0B6,E0B7,E0C4,D0E1,E0BC,E0C9,E0CA,E0BE,E0AA,C9A4,E0C1,E0B2,CAC8,E0C3,E0B5,CECB,CBC3,E0CD,E0C6,E0C2,E0CB,E0BA,E0BF,E0C0,E0C5,E0C7,E0C8,E0CC,E0BB,CBD4,E0D5,E0D6,E0D2,E0D0,BCCE,E0D1,B8C2,D8C5,D0EA,C2EF,E0CF,E0BD,E0D4,E0D3,E0D7,E0DC,E0D8,D6F6,B3B0,D7EC,CBBB,E0DA,CEFB,BAD9,E0E1,E0DD,D2AD,E0E2,E0DB,E0D9,E0DF,E0E0,E0DE,E0E4,C6F7,D8AC,D4EB,E0E6,CAC9,E0E5,B8C1,E0E7,E0E8,E0E9,E0E3,BABF,CCE7,E0EA,CFF9,E0EB,C8C2,BDC0,C4D2,E0EC,E0ED,C7F4,CBC4,E0EE,BBD8,D8B6,D2F2,E0EF,CDC5,B6DA,E0F1,D4B0,C0A7,B4D1,CEA7,E0F0,E0F2,B9CC,B9FA,CDBC,E0F3,C6D4,E0F4,D4B2,C8A6,E0F6,E0F5,E0F7,CDC1,CAA5,D4DA,DBD7,DBD9,DBD8,B9E7,DBDC,DBDD,B5D8,DBDA,DBDB,B3A1,DBDF,BBF8,D6B7,DBE0,BEF9,B7BB,DBD0,CCAE,BFB2,BBB5,D7F8,BFD3,BFE9,BCE1,CCB3,DBDE,B0D3,CEEB,B7D8,D7B9,C6C2,C0A4,CCB9,DBE7,DBE1,C6BA,DBE3,DBE8,C5F7,DBEA,DBE9,BFC0,DBE6,DBE5,B4B9,C0AC,C2A2,DBE2,DBE4,D0CD,DBED,C0DD,DBF2,B6E2,DBF3,DBD2,B9B8,D4AB,DBEC,BFD1,DBF0,DBD1,B5E6,DBEB,BFE5,DBEE,DBF1,DBF9,B9A1,B0A3,C2F1,B3C7,DBEF,DBF8,C6D2,DBF4,DBF5,DBF7,DBF6,DBFE,D3F2,B2BA,DBFD,DCA4,DBFB,DBFA,DBFC,C5E0,BBF9,DCA3,DCA5,CCC3,B6D1,DDC0,DCA1,DCA2,C7B5,B6E9,DCA7,DCA6,DCA9,B1A4,B5CC,BFB0,D1DF,B6C2,DCA8,CBFA,EBF3,CBDC,CBFE,CCC1,C8FB,DCAA,CCEE,DCAB,DBD3,DCAF,DCAC,BEB3,CAFB,DCAD,C9CA,C4B9,C7BD,DCAE,D4F6,D0E6,C4AB,B6D5,DBD4,B1DA,DBD5,DBD6,BABE,C8C0,CABF,C8C9,D7B3,C9F9,BFC7,BAF8,D2BC,E2BA,B4A6,B1B8,B8B4,CFC4,D9E7,CFA6,CDE2,D9ED,B6E0,D2B9,B9BB,E2B9,E2B7,B4F3,CCEC,CCAB,B7F2,D8B2,D1EB,BABB,CAA7,CDB7,D2C4,BFE4,BCD0,B6E1,DEC5,DEC6,DBBC,D1D9,C6E6,C4CE,B7EE,B7DC,BFFC,D7E0,C6F5,B1BC,DEC8,BDB1,CCD7,DECA,DEC9,B5EC,C9DD,B0C2,C5AE,C5AB,C4CC,BCE9,CBFD,BAC3,E5F9,C8E7,E5FA,CDFD,D7B1,B8BE,C2E8,C8D1,E5FB,B6CA,BCCB,D1FD,E6A1,C3EE,E6A4,E5FE,E6A5,CDD7,B7C1,E5FC,E5FD,E6A3,C4DD,E6A8,E6A7,C3C3,C6DE,E6AA,C4B7,E6A2,CABC,BDE3,B9C3,E6A6,D0D5,CEAF,E6A9,E6B0,D2A6,BDAA,E6AD,E6AF,C0D1,D2CC,BCA7,E6B1,D2F6,D7CB,CDFE,CDDE,C2A6,E6AB,E6AC,BDBF,E6AE,E6B3,E6B2,E6B6,E6B8,C4EF,C4C8,BEEA,C9EF,E6B7,B6F0,C3E4,D3E9,E6B4,E6B5,C8A2,E6BD,E6B9,C6C5,CDF1,E6BB,E6BC,BBE9,E6BE,E6BA,C0B7,D3A4,E6BF,C9F4,E6C3,E6C4,D0F6,C3BD,C3C4,E6C2,E6C1,E6C7,CFB1,EBF4,E6CA,E6C5,BCDE,C9A9,BCB5,CFD3,E6C8,E6C9,E6CE,E6D0,E6D1,E6CB,B5D5,E6CC,E6CF,C4DB,E6C6,E6CD,E6D2,E6D4,E6D3,E6D5,D9F8,E6D6,E6D7,D7D3,E6DD,E6DE,BFD7,D4D0,D7D6,B4E6,CBEF,E6DA,D8C3,D7CE,D0A2,C3CF,E6DF,BCBE,B9C2,E6DB,D1A7,BAA2,C2CF,D8AB,CAEB,E5EE,E6DC,B7F5,C8E6,C4F5,E5B2,C4FE,CBFC,E5B3,D5AC,D3EE,CAD8,B0B2,CBCE,CDEA,BAEA,E5B5,E5B4,D7DA,B9D9,D6E6,B6A8,CDF0,D2CB,B1A6,CAB5,B3E8,C9F3,BFCD,D0FB,CAD2,E5B6,BBC2,CFDC,B9AC,D4D7,BAA6,D1E7,CFFC,BCD2,E5B7,C8DD,BFED,B1F6,CBDE,BCC5,BCC4,D2FA,C3DC,BFDC,B8BB,C3C2,BAAE,D4A2,C7DE,C4AF,B2EC,B9D1,E5BB,C1C8,D5AF,E5BC,E5BE,B4E7,B6D4,CBC2,D1B0,B5BC,CAD9,B7E2,C9E4,BDAB,CEBE,D7F0,D0A1,C9D9,B6FB,E6D8,BCE2,B3BE,C9D0,E6D9,B3A2,DECC,D3C8,DECD,D2A2,DECE,BECD,DECF,CAAC,D2FC,B3DF,E5EA,C4E1,BEA1,CEB2,C4F2,BED6,C6A8,B2E3,BED3,C7FC,CCEB,BDEC,CEDD,CABA,C6C1,E5EC,D0BC,D5B9,E5ED,CAF4,CDC0,C2C5,E5EF,C2C4,E5F0,E5F8,CDCD,C9BD,D2D9,E1A8,D3EC,CBEA,C6F1,E1AC,E1A7,E1A9,E1AA,E1AF,B2ED,E1AB,B8DA,E1AD,E1AE,E1B0,B5BA,E1B1,E1B3,E1B8,D1D2,E1B6,E1B5,C1EB,E1B7,D4C0,E1B2,E1BA,B0B6,E1B4,BFF9,E1B9,E1BB,E1BE,E1BC,D6C5,CFBF,E1BD,E1BF,C2CD,B6EB,D3F8,C7CD,B7E5,BEFE,E1C0,E1C1,E1C7,B3E7,C6E9,B4DE,D1C2,E1C8,E1C6,E1C5,E1C3,E1C2,B1C0,D5B8,E1C4,E1CB,E1CC,E1CA,EFFA,E1D3,E1D2,C7B6,E1C9,E1CE,E1D0,E1D4,E1D1,E1CD,E1CF,E1D5,E1D6,E1D7,E1D8,E1DA,E1DB,CEA1,E7DD,B4A8,D6DD,D1B2,B3B2,B9A4,D7F3,C7C9,BEDE,B9AE,CED7,B2EE,DBCF,BCBA,D2D1,CBC8,B0CD,CFEF,D9E3,BDED,B1D2,CAD0,B2BC,CBA7,B7AB,CAA6,CFA3,E0F8,D5CA,E0FB,E0FA,C5C1,CCFB,C1B1,E0F9,D6E3,B2AF,D6C4,B5DB,B4F8,D6A1,CFAF,B0EF,E0FC,E1A1,B3A3,E0FD,E0FE,C3B1,C3DD,E1A2,B7F9,BBCF,E1A3,C4BB,E1A4,E1A5,E1A6,B4B1,B8C9,C6BD,C4EA,B2A2,D0D2,E7DB,BBC3,D3D7,D3C4,B9E3,E2CF,D7AF,C7EC,B1D3,B4B2,E2D1,D0F2,C2AE,E2D0,BFE2,D3A6,B5D7,E2D2,B5EA,C3ED,B8FD,B8AE,C5D3,B7CF,E2D4,E2D3,B6C8,D7F9,CDA5,E2D8,E2D6,CAFC,BFB5,D3B9,E2D5,E2D7,C1AE,C0C8,E2DB,E2DA,C0AA,C1CE,E2DC,E2DD,E2DE,DBC8,D1D3,CDA2,BDA8,DEC3,D8A5,BFAA,DBCD,D2EC,C6FA,C5AA,DEC4,B1D7,DFAE,CABD,DFB1,B9AD,D2FD,B8A5,BAEB,B3DA,B5DC,D5C5,C3D6,CFD2,BBA1,E5F3,E5F2,E5F4,CDE4,C8F5,B5AF,C7BF,E5F6,ECB0,E5E6,B9E9,B5B1,C2BC,E5E8,E5E7,E5E9,D2CD,E1EA,D0CE,CDAE,D1E5,B2CA,B1EB,B1F2,C5ED,D5C3,D3B0,E1DC,E1DD,D2DB,B3B9,B1CB,CDF9,D5F7,E1DE,BEB6,B4FD,E1DF,BADC,E1E0,BBB2,C2C9,E1E1,D0EC,CDBD,E1E2,B5C3,C5C7,E1E3,E1E4,D3F9,E1E5,D1AD,E1E6,CEA2,E1E7,B5C2,E1E8,BBD5,D0C4,E2E0,B1D8,D2E4,E2E1,BCC9,C8CC,E2E3,ECFE,ECFD,DFAF,E2E2,D6BE,CDFC,C3A6,E3C3,D6D2,E2E7,E2E8,D3C7,E2EC,BFEC,E2ED,E2E5,B3C0,C4EE,E2EE,D0C3,BAF6,E2E9,B7DE,BBB3,CCAC,CBCB,E2E4,E2E6,E2EA,E2EB,E2F7,E2F4,D4F5,E2F3,C5AD,D5FA,C5C2,B2C0,E2EF,E2F2,C1AF,CBBC,B5A1,E2F9,BCB1,E2F1,D0D4,D4B9,E2F5,B9D6,E2F6,C7D3,E2F0,D7DC,EDA1,E2F8,EDA5,E2FE,CAD1,C1B5,BBD0,BFD6,BAE3,CBA1,EDA6,EDA3,EDA2,BBD6,EDA7,D0F4,EDA4,BADE,B6F7,E3A1,B6B2,CCF1,B9A7,CFA2,C7A1,BFD2,B6F1,E2FA,E2FB,E2FD,E2FC,C4D5,E3A2,D3C1,E3A7,C7C4,CFA4,E3A9,BAB7,E3A8,BBDA,E3A3,E3A4,E3AA,E3A6,CEF2,D3C6,BBBC,D4C3,C4FA,EDA8,D0FC,E3A5,C3F5,E3AD,B1AF,E3B2,BCC2,E3AC,B5BF,C7E9,E3B0,BEAA,CDEF,BBF3,CCE8,E3AF,E3B1,CFA7,E3AE,CEA9,BBDD,B5EB,BEE5,B2D2,B3CD,B1B9,E3AB,B2D1,B5AC,B9DF,B6E8,CFEB,E3B7,BBCC,C8C7,D0CA,E3B8,B3EE,EDA9,D3FA,D3E4,EDAA,E3B9,D2E2,E3B5,D3DE,B8D0,E3B3,E3B6,B7DF,E3B4,C0A2,E3BA,D4B8,B4C8,E3BB,BBC5,C9F7,C9E5,C4BD,EDAB,C2FD,BBDB,BFAE,CEBF,E3BC,BFB6,B1EF,D4F7,E3BE,EDAD,E3BF,BAA9,EDAC,E3BD,E3C0,BAB6,B6AE,D0B8,B0C3,EDAE,EDAF,C0C1,E3C1,C5B3,E3C2,DCB2,EDB0,B8EA,CEEC,EAA7,D0E7,CAF9,C8D6,CFB7,B3C9,CED2,BDE4,E3DE,BBF2,EAA8,D5BD,C6DD,EAA9,EAAA,EAAC,EAAB,EAAE,EAAD,BDD8,EAAF,C2BE,B4C1,B4F7,BBA7,ECE6,ECE5,B7BF,CBF9,B1E2,ECE7,C9C8,ECE8,ECE9,CAD6,DED0,B2C5,D4FA,C6CB,B0C7,B4F2,C8D3,CDD0,BFB8,BFDB,C7A4,D6B4,C0A9,DED1,C9A8,D1EF,C5A4,B0E7,B3B6,C8C5,B0E2,B7F6,C5FA,B6F3,D5D2,B3D0,BCBC,B3AD,BEF1,B0D1,D2D6,CAE3,D7A5,CDB6,B6B6,BFB9,D5DB,B8A7,C5D7,DED2,BFD9,C2D5,C7C0,BBA4,B1A8,C5EA,C5FB,CCA7,B1A7,B5D6,C4A8,DED3,D1BA,B3E9,C3F2,B7F7,D6F4,B5A3,B2F0,C4B4,C4E9,C0AD,DED4,B0E8,C5C4,C1E0,B9D5,BEDC,CDD8,B0CE,CDCF,DED6,BED0,D7BE,DED5,D5D0,B0DD,C4E2,C2A3,BCF0,D3B5,C0B9,C5A1,B2A6,D4F1,C0A8,CAC3,DED7,D5FC,B9B0,C8AD,CBA9,DED9,BFBD,C6B4,D7A7,CAB0,C4C3,B3D6,B9D2,D6B8,EAFC,B0B4,BFE6,CCF4,CDDA,D6BF,C2CE,CECE,CCA2,D0AE,C4D3,B5B2,DED8,D5F5,BCB7,BBD3,B0A4,C5B2,B4EC,D5F1,EAFD,DEDA,CDA6,CDEC,CEE6,DEDC,CDB1,C0A6,D7BD,DEDB,B0C6,BAB4,C9D3,C4F3,BEE8,B2B6,C0CC,CBF0,BCF1,BBBB,B5B7,C5F5,DEE6,DEE3,BEDD,DEDF,B4B7,BDDD,DEE0,C4ED,CFC6,B5E0,B6DE,CADA,B5F4,DEE5,D5C6,DEE1,CCCD,C6FE,C5C5,D2B4,BEF2,C2D3,CCBD,B3B8,BDD3,BFD8,CDC6,D1DA,B4EB,DEE4,DEDD,DEE7,EAFE,C2B0,DEE2,D6C0,B5A7,B2F4,DEE8,DEF2,DEED,DEF1,C8E0,D7E1,DEEF,C3E8,CCE1,B2E5,D2BE,DEEE,DEEB,CED5,B4A7,BFAB,BEBE,BDD2,DEE9,D4AE,DEDE,DEEA,C0BF,DEEC,B2F3,B8E9,C2A7,BDC1,DEF5,DEF8,B2AB,B4A4,B4EA,C9A6,DEF6,CBD1,B8E3,DEF7,DEFA,DEF9,CCC2,B0E1,B4EE,E5BA,D0AF,B2EB,EBA1,DEF4,C9E3,DEF3,B0DA,D2A1,B1F7,CCAF,DEF0,CBA4,D5AA,DEFB,B4DD,C4A6,DEFD,C3FE,C4A1,DFA1,C1CC,DEFC,BEEF,C6B2,B3C5,C8F6,CBBA,DEFE,DFA4,D7B2,B3B7,C1C3,C7CB,B2A5,B4E9,D7AB,C4EC,DFA2,DFA3,DFA5,BAB3,DFA6,C0DE,C9C3,B2D9,C7E6,DFA7,C7DC,DFA8,EBA2,CBD3,DFAA,DFA9,B2C1,C5CA,DFAB,D4DC,C8C1,DFAC,BEF0,DFAD,D6A7,EAB7,EBB6,CAD5,D8FC,B8C4,B9A5,B7C5,D5FE,B9CA,D0A7,F4CD,B5D0,C3F4,BEC8,EBB7,B0BD,BDCC,C1B2,B1D6,B3A8,B8D2,C9A2,B6D8,EBB8,BEB4,CAFD,C7C3,D5FB,B7F3,CEC4,D5AB,B1F3,ECB3,B0DF,ECB5,B6B7,C1CF,F5FA,D0B1,D5E5,CED3,BDEF,B3E2,B8AB,D5B6,EDBD,B6CF,CBB9,D0C2,B7BD,ECB6,CAA9,C5D4,ECB9,ECB8,C2C3,ECB7,D0FD,ECBA,ECBB,D7E5,ECBC,ECBD,C6EC,CEDE,BCC8,C8D5,B5A9,BEC9,D6BC,D4E7,D1AE,D0F1,EAB8,EAB9,EABA,BAB5,CAB1,BFF5,CDFA,EAC0,B0BA,EABE,C0A5,EABB,B2FD,C3F7,BBE8,D2D7,CEF4,EABF,EABC,EAC3,D0C7,D3B3,B4BA,C3C1,D7F2,D5D1,CAC7,EAC5,EAC4,EAC7,EAC6,D6E7,CFD4,EACB,BBCE,BDFA,C9CE,EACC,C9B9,CFFE,EACA,D4CE,EACD,EACF,CDED,EAC9,EACE,CEEE,BBDE,B3BF,C6D5,BEB0,CEFA,C7E7,BEA7,EAD0,D6C7,C1C0,D4DD,EAD1,CFBE,EAD2,CAEE,C5AF,B0B5,EAD4,EAD3,F4DF,C4BA,B1A9,E5DF,EAD5,CAEF,EAD6,EAD7,C6D8,EAD8,EAD9,D4BB,C7FA,D2B7,B8FC,EAC2,B2DC,C2FC,D4F8,CCE6,D7EE,D4C2,D3D0,EBC3,C5F3,B7FE,EBD4,CBB7,EBDE,C0CA,CDFB,B3AF,C6DA,EBFC,C4BE,CEB4,C4A9,B1BE,D4FD,CAF5,D6EC,C6D3,B6E4,BBFA,D0E0,C9B1,D4D3,C8A8,B8CB,E8BE,C9BC,E8BB,C0EE,D0D3,B2C4,B4E5,E8BC,D5C8,B6C5,E8BD,CAF8,B8DC,CCF5,C0B4,D1EE,E8BF,E8C2,BABC,B1AD,BDDC,EABD,E8C3,E8C6,E8CB,E8CC,CBC9,B0E5,BCAB,B9B9,E8C1,CDF7,E8CA,CEF6,D5ED,C1D6,E8C4,C3B6,B9FB,D6A6,E8C8,CAE0,D4E6,E8C0,E8C5,E8C7,C7B9,B7E3,E8C9,BFDD,E8D2,E8D7,E8D5,BCDC,BCCF,E8DB,E8DE,E8DA,B1FA,B0D8,C4B3,B8CC,C6E2,C8BE,C8E1,E8CF,E8D4,E8D6,B9F1,E8D8,D7F5,C4FB,E8DC,B2E9,E8D1,BCED,BFC2,E8CD,D6F9,C1F8,B2F1,E8DF,CAC1,E8D9,D5A4,B1EA,D5BB,E8CE,E8D0,B6B0,E8D3,E8DD,C0B8,CAF7,CBA8,C6DC,C0F5,E8E9,D0A3,E8F2,D6EA,E8E0,E8E1,D1F9,BACB,B8F9,B8F1,D4D4,E8EF,E8EE,E8EC,B9F0,CCD2,E8E6,CEA6,BFF2,B0B8,E8F1,E8F0,D7C0,E8E4,CDA9,C9A3,BBB8,BDDB,E8EA,E8E2,E8E3,E8E5,B5B5,E8E7,C7C5,E8EB,E8ED,BDB0,D7AE,E8F8,E8F5,CDB0,E8F6,C1BA,E8E8,C3B7,B0F0,E8F4,E8F7,B9A3,C9D2,C3CE,CEE0,C0E6,CBF3,CCDD,D0B5,CAE1,E8F3,BCEC,E8F9,C3DE,C6E5,B9F7,B0F4,D7D8,BCAC,C5EF,CCC4,E9A6,C9AD,E9A2,C0E2,BFC3,E8FE,B9D7,E8FB,E9A4,D2CE,E9A3,D6B2,D7B5,E9A7,BDB7,E8FC,E8FD,E9A1,CDD6,D2AC,E9B2,E9A9,B4AA,B4BB,E9AB,D0A8,E9A5,B3FE,E9AC,C0E3,E9AA,E9B9,E9B8,E9AE,E8FA,E9A8,BFAC,E9B1,E9BA,C2A5,E9AF,B8C5,E9AD,D3DC,E9B4,E9B5,E9B7,E9C7,C0C6,E9C5,E9B0,E9BB,B0F1,E9BC,D5A5,E9BE,E9BF,E9C1,C1F1,C8B6,E9BD,E9C2,E9C3,E9B3,E9B6,BBB1,E9C0,BCF7,E9C4,E9C6,E9CA,E9CE,B2DB,E9C8,B7AE,E9CB,E9CC,D5C1,C4A3,E9D8,BAE1,E9C9,D3A3,E9D4,E9D7,E9D0,E9CF,C7C1,E9D2,E9D9,B3C8,E9D3,CFF0,E9CD,B3F7,E9D6,E9DA,CCB4,CFAD,E9D5,E9DC,E9DB,E9DE,E9D1,E9DD,E9DF,C3CA,C7B7,B4CE,BBB6,D0C0,ECA3,C5B7,D3FB,ECA4,ECA5,C6DB,BFEE,ECA6,ECA7,D0AA,C7B8,B8E8,ECA8,D6B9,D5FD,B4CB,B2BD,CEE4,C6E7,CDE1,B4F5,CBC0,BCDF,E9E2,E9E3,D1EA,E9E5,B4F9,E9E4,D1B3,CAE2,B2D0,E9E8,E9E6,E9E7,D6B3,E9E9,E9EA,E9EB,E9EC,ECAF,C5B9,B6CE,D2F3,B5EE,BBD9,ECB1,D2E3,CEE3,C4B8,C3BF,B6BE,D8B9,B1C8,B1CF,B1D1,C5FE,B1D0,C3AB,D5B1,EBA4,BAC1,CCBA,EBA5,EBA7,EBA8,EBA6,EBA9,EBAB,EBAA,EBAC,CACF,D8B5,C3F1,C3A5,C6F8,EBAD,C4CA,EBAE,EBAF,EBB0,B7D5,B7FA,EBB1,C7E2,EBB3,BAA4,D1F5,B0B1,EBB2,EBB4,B5AA,C2C8,C7E8,EBB5,CBAE,E3DF,D3C0,D9DB,CDA1,D6AD,C7F3,D9E0,BBE3,BABA,E3E2,CFAB,E3E0,C9C7,BAB9,D1B4,E3E1,C8EA,B9AF,BDAD,B3D8,CEDB,CCC0,E3E8,E3E9,CDF4,CCAD,BCB3,E3EA,E3EB,D0DA,C6FB,B7DA,C7DF,D2CA,CED6,E3E4,E3EC,C9F2,B3C1,E3E7,C6E3,E3E5,EDB3,E3E6,C9B3,C5E6,B9B5,C3BB,E3E3,C5BD,C1A4,C2D9,B2D7,E3ED,BBA6,C4AD,E3F0,BEDA,E3FB,E3F5,BAD3,B7D0,D3CD,D6CE,D5D3,B9C1,D5B4,D1D8,D0B9,C7F6,C8AA,B2B4,C3DA,E3EE,E3FC,E3EF,B7A8,E3F7,E3F4,B7BA,C5A2,E3F6,C5DD,B2A8,C6FC,C4E0,D7A2,C0E1,E3F9,E3FA,E3FD,CCA9,E3F3,D3BE,B1C3,EDB4,E3F1,E3F2,E3F8,D0BA,C6C3,D4F3,E3FE,BDE0,E4A7,E4A6,D1F3,E4A3,E4A9,C8F7,CFB4,E4A8,E4AE,C2E5,B6B4,BDF2,E4A2,BAE9,E4AA,E4AC,B6FD,D6DE,E4B2,E4AD,E4A1,BBEE,CDDD,C7A2,C5C9,C1F7,E4A4,C7B3,BDAC,BDBD,E4A5,D7C7,B2E2,E4AB,BCC3,E4AF,BBEB,E4B0,C5A8,E4B1,D5E3,BFA3,E4BA,E4B7,E4BB,E4BD,C6D6,BAC6,C0CB,B8A1,E4B4,D4A1,BAA3,BDFE,E4BC,CDBF,C4F9,CFFB,C9E6,D3BF,CFD1,E4B3,E4B8,E4B9,CCE9,CCCE,C0D4,E4B5,C1B0,E4B6,CED0,BBC1,B5D3,C8F3,BDA7,D5C7,C9AC,B8A2,E4CA,E4CC,D1C4,D2BA,BAAD,BAD4,E4C3,B5ED,D7CD,E4C0,CFFD,E4BF,C1DC,CCCA,CAE7,C4D7,CCD4,E4C8,E4C7,E4C1,E4C4,B5AD,D3D9,E4C6,D2F9,B4E3,BBB4,C9EE,B4BE,BBEC,D1CD,CCED,EDB5,C7E5,D4A8,E4CB,D7D5,E4C2,BDA5,E4C5,D3E6,E4C9,C9F8,E4BE,D3E5,C7FE,B6C9,D4FC,B2B3,E4D7,CEC2,E4CD,CEBC,B8DB,E4D6,BFCA,D3CE,C3EC,C5C8,E4D8,CDC4,E4CF,E4D4,E4D5,BAFE,CFE6,D5BF,E4D2,E4D0,E4CE,CDE5,CAAA,C0A3,BDA6,E4D3,B8C8,E4E7,D4B4,E4DB,C1EF,E4E9,D2E7,E4DF,E4E0,CFAA,CBDD,E4DA,E4D1,E4E5,C8DC,E4E3,C4E7,E4E2,E4E1,B3FC,E4E8,B5E1,D7CC,E4E6,BBAC,D7D2,CCCF,EBF8,E4E4,B9F6,D6CD,E4D9,E4DC,C2FA,E4DE,C2CB,C0C4,C2D0,B1F5,CCB2,B5CE,E4EF,C6AF,C6E1,E4F5,C2A9,C0EC,D1DD,E4EE,C4AE,E4ED,E4F6,E4F4,C2FE,E4DD,E4F0,CAFE,D5C4,E4F1,D1FA,E4EB,E4EC,E4F2,CEAB,C5CB,C7B1,C2BA,E4EA,C1CA,CCB6,B3B1,E4FB,E4F3,E4FA,E4FD,E4FC,B3CE,B3BA,E4F7,E4F9,E4F8,C5EC,C0BD,D4E8,E5A2,B0C4,E5A4,E5A3,BCA4,E5A5,E5A1,E4FE,B1F4,E5A8,E5A9,E5A6,E5A7,E5AA,C6D9,E5AB,E5AD,E5AC,E5AF,E5AE,B9E0,E5B0,E5B1,BBF0,ECE1,C3F0,B5C6,BBD2,C1E9,D4EE,BEC4,D7C6,D4D6,B2D3,ECBE,EAC1,C2AF,B4B6,D1D7,B3B4,C8B2,BFBB,ECC0,D6CB,ECBF,ECC1,ECC5,BEE6,CCBF,C5DA,BEBC,ECC6,B1FE,ECC4,D5A8,B5E3,ECC2,C1B6,B3E3,ECC3,CBB8,C0C3,CCFE,C1D2,ECC8,BAE6,C0D3,D6F2,D1CC,BFBE,B7B3,C9D5,ECC7,BBE2,CCCC,BDFD,C8C8,CFA9,CDE9,C5EB,B7E9,D1C9,BAB8,ECC9,ECCA,BBC0,ECCB,ECE2,B1BA,B7D9,BDB9,ECCC,D1E6,ECCD,C8BB,ECD1,ECD3,BBCD,BCE5,ECCF,C9B7,C3BA,ECE3,D5D5,ECD0,D6F3,ECD2,ECCE,ECD4,ECD5,C9BF,CFA8,D0DC,D1AC,C8DB,ECD6,CEF5,CAEC,ECDA,ECD9,B0BE,ECD7,ECD8,ECE4,C8BC,C1C7,ECDC,D1E0,ECDB,D4EF,ECDD,DBC6,ECDE,B1AC,ECDF,ECE0,D7A6,C5C0,EBBC,B0AE,BEF4,B8B8,D2AF,B0D6,B5F9,D8B3,CBAC,E3DD,C6AC,B0E6,C5C6,EBB9,EBBA,EBBB,D1C0,C5A3,EAF2,C4B2,C4B5,C0CE,EAF3,C4C1,CEEF,EAF0,EAF4,C9FC,C7A3,CCD8,CEFE,EAF5,EAF6,CFAC,C0E7,EAF7,B6BF,EAF8,EAF9,EAFA,EAFB,EAF1,C8AE,E1EB,B7B8,E1EC,E1ED,D7B4,E1EE,E1EF,D3CC,E1F1,BFF1,E1F0,B5D2,B1B7,E1F3,E1F2,BAFC,E1F4,B9B7,BED1,C4FC,BADD,BDC6,E1F5,E1F7,B6C0,CFC1,CAA8,E1F6,D5F8,D3FC,E1F8,E1FC,E1F9,E1FA,C0EA,E1FE,E2A1,C0C7,E1FB,E1FD,E2A5,C1D4,E2A3,E2A8,B2FE,E2A2,C3CD,B2C2,E2A7,E2A6,E2A4,E2A9,E2AB,D0C9,D6ED,C3A8,E2AC,CFD7,E2AE,BAEF,E9E0,E2AD,E2AA,BBAB,D4B3,E2B0,E2AF,E9E1,E2B1,E2B2,E2B3,CCA1,E2B4,E2B5,D0FE,C2CA,D3F1,CDF5,E7E0,E7E1,BEC1,C2EA,E7E4,E7E3,CDE6,C3B5,E7E2,BBB7,CFD6,C1E1,E7E9,E7E8,E7F4,B2A3,E7EA,E7E6,E7EC,E7EB,C9BA,D5E4,E7E5,B7A9,E7E7,E7EE,E7F3,D6E9,E7ED,E7F2,E7F1,B0E0,E7F5,C7F2,C0C5,C0ED,C1F0,E7F0,E7F6,CBF6,E8A2,E8A1,D7C1,E7FA,E7F9,E7FB,E7F7,E7FE,E7FD,E7FC,C1D5,C7D9,C5FD,C5C3,C7ED,E8A3,E8A6,E8A5,E8A7,BAF7,E7F8,E8A4,C8F0,C9AA,E8A9,B9E5,D1FE,E8A8,E8AA,E8AD,E8AE,C1A7,E8AF,E8B0,E8AC,E8B4,E8AB,E8B1,E8B5,E8B2,E8B3,E8B7,E8B6,B9CF,F0AC,F0AD,C6B0,B0EA,C8BF,CDDF,CECD,EAB1,EAB2,C6BF,B4C9,EAB3,D5E7,DDF9,EAB4,EAB5,EAB6,B8CA,DFB0,C9F5,CCF0,C9FA,C9FB,D3C3,CBA6,B8A6,F0AE,B1C2,E5B8,CCEF,D3C9,BCD7,C9EA,B5E7,C4D0,B5E9,EEAE,BBAD,E7DE,EEAF,B3A9,EEB2,EEB1,BDE7,EEB0,CEB7,C5CF,C1F4,DBCE,EEB3,D0F3,C2D4,C6E8,B7AC,EEB4,B3EB,BBFB,EEB5,E7DC,EEB6,BDAE,F1E2,CAE8,D2C9,F0DA,F0DB,F0DC,C1C6,B8ED,BECE,F0DE,C5B1,F0DD,D1F1,F0E0,B0CC,BDEA,D2DF,F0DF,B4AF,B7E8,F0E6,F0E5,C6A3,F0E1,F0E2,B4C3,F0E3,D5EE,CCDB,BED2,BCB2,F0E8,F0E7,F0E4,B2A1,D6A2,D3B8,BEB7,C8AC,F0EA,D1F7,D6CC,BADB,F0E9,B6BB,CDB4,C6A6,C1A1,F0EB,F0EE,F0ED,F0F0,F0EC,BBBE,F0EF,CCB5,F0F2,B3D5,B1D4,F0F3,F0F4,F0F6,B4E1,F0F1,F0F7,F0FA,F0F8,F0F5,F0FD,F0F9,F0FC,F0FE,F1A1,CEC1,F1A4,F1A3,C1F6,F0FB,CADD,B4F1,B1F1,CCB1,F1A6,F1A7,F1AC,D5CE,F1A9,C8B3,F1A2,F1AB,F1A8,F1A5,F1AA,B0A9,F1AD,F1AF,F1B1,F1B0,F1AE,D1A2,F1B2,F1B3,B9EF,B5C7,B0D7,B0D9,D4ED,B5C4,BDD4,BBCA,F0A7,B8DE,F0A8,B0A8,F0A9,CDEE,F0AA,F0AB,C6A4,D6E5,F1E4,F1E5,C3F3,D3DB,D6D1,C5E8,D3AF,D2E6,EEC1,B0BB,D5B5,D1CE,BCE0,BAD0,BFF8,B8C7,B5C1,C5CC,CAA2,C3CB,EEC2,C4BF,B6A2,EDEC,C3A4,D6B1,CFE0,EDEF,C5CE,B6DC,CAA1,EDED,EDF0,EDF1,C3BC,BFB4,EDEE,EDF4,EDF2,D5E6,C3DF,EDF3,EDF6,D5A3,D1A3,EDF5,C3D0,EDF7,BFF4,BEEC,EDF8,CCF7,D1DB,D7C5,D5F6,EDFC,EDFB,EDF9,EDFA,EDFD,BEA6,CBAF,EEA1,B6BD,EEA2,C4C0,EDFE,BDDE,B2C7,B6C3,EEA5,D8BA,EEA3,EEA6,C3E9,B3F2,EEA7,EEA4,CFB9,EEA8,C2F7,EEA9,EEAA,DEAB,C6B3,C7C6,D6F5,B5C9,CBB2,EEAB,CDAB,EEAC,D5B0,EEAD,F6C4,DBC7,B4A3,C3AC,F1E6,CAB8,D2D3,D6AA,EFF2,BED8,BDC3,EFF3,B6CC,B0AB,CAAF,EDB6,EDB7,CEF9,B7AF,BFF3,EDB8,C2EB,C9B0,EDB9,C6F6,BFB3,EDBC,C5F8,D1D0,D7A9,EDBA,EDBB,D1E2,EDBF,EDC0,EDC4,EDC8,EDC6,EDCE,D5E8,EDC9,EDC7,EDBE,C5E9,C6C6,C9E9,D4D2,EDC1,EDC2,EDC3,EDC5,C0F9,B4A1,B9E8,EDD0,EDD1,EDCA,EDCF,CEF8,CBB6,EDCC,EDCD,CFF5,EDD2,C1F2,D3B2,EDCB,C8B7,BCEF,C5F0,EDD6,B5EF,C2B5,B0AD,CBE9,B1AE,EDD4,CDEB,B5E2,EDD5,EDD3,EDD7,B5FA,EDD8,EDD9,EDDC,B1CC,C5F6,BCEE,EDDA,CCBC,B2EA,EDDB,C4EB,B4C5,B0F5,EDDF,C0DA,B4E8,C5CD,EDDD,BFC4,EDDE,C4A5,EDE0,EDE1,EDE3,C1D7,BBC7,BDB8,EDE2,EDE4,EDE6,EDE5,EDE7,CABE,ECEA,C0F1,C9E7,ECEB,C6EE,ECEC,C6ED,ECED,ECF0,D7E6,ECF3,ECF1,ECEE,ECEF,D7A3,C9F1,CBEE,ECF4,ECF2,CFE9,ECF6,C6B1,BCC0,ECF5,B5BB,BBF6,ECF7,D9F7,BDFB,C2BB,ECF8,ECF9,B8A3,ECFA,ECFB,ECFC,D3ED,D8AE,C0EB,C7DD,BACC,D0E3,CBBD,CDBA,B8D1,B1FC,C7EF,D6D6,BFC6,C3EB,EFF5,C3D8,D7E2,EFF7,B3D3,C7D8,D1ED,D6C8,EFF8,EFF6,BBFD,B3C6,BDD5,D2C6,BBE0,CFA1,EFFC,EFFB,EFF9,B3CC,C9D4,CBB0,EFFE,B0DE,D6C9,EFFD,B3ED,F6D5,CEC8,F0A2,F0A1,B5BE,BCDA,BBFC,B8E5,C4C2,F0A3,CBEB,F0A6,D1A8,BEBF,C7EE,F1B6,F1B7,BFD5,B4A9,F1B8,CDBB,C7D4,D5AD,F1B9,F1BA,C7CF,D2A4,D6CF,F1BB,BDD1,B4B0,BEBD,B4DC,CED1,BFDF,F1BD,BFFA,F1BC,F1BF,F1BE,F1C0,F1C1,C1FE,C1A2,CAFA,D5BE,BEBA,BEB9,D5C2,BFA2,CDAF,F1B5,BDDF,B6CB,D6F1,F3C3,F3C4,B8CD,F3C6,F3C7,B0CA,F3C5,F3C9,CBF1,F3CB,D0A6,B1CA,F3C8,F3CF,B5D1,F3D7,F3D2,F3D4,F3D3,B7FB,B1BF,F3CE,F3CA,B5DA,F3D0,F3D1,F3D5,F3CD,BCE3,C1FD,F3D6,F3DA,F3CC,B5C8,BDEE,F3DC,B7A4,BFF0,D6FE,CDB2,B4F0,B2DF,F3D8,F3D9,C9B8,F3DD,F3DE,F3E1,F3DF,F3E3,F3E2,F3DB,BFEA,B3EF,F3E0,C7A9,BCF2,F3EB,B9BF,F3E4,B2AD,BBFE,CBE3,F3ED,F3E9,B9DC,F3EE,F3E5,F3E6,F3EA,C2E1,F3EC,F3EF,F3E8,BCFD,CFE4,F3F0,F3E7,F3F2,D7AD,C6AA,F3F3,F3F1,C2A8,B8DD,F3F5,F3F4,B4DB,F3F6,F3F7,F3F8,C0BA,C0E9,C5F1,F3FB,F3FA,B4D8,F3FE,F3F9,F3FC,F3FD,F4A1,F4A3,BBC9,F4A2,F4A4,B2BE,F4A6,F4A5,BCAE,C3D7,D9E1,C0E0,F4CC,D7D1,B7DB,F4CE,C1A3,C6C9,B4D6,D5B3,F4D0,F4CF,F4D1,CBDA,F4D2,D4C1,D6E0,B7E0,C1B8,C1BB,F4D3,BEAC,B4E2,F4D4,F4D5,BEAB,F4D6,F4DB,F4D7,F4DA,BAFD,F4D8,F4D9,B8E2,CCC7,F4DC,B2DA,C3D3,D4E3,BFB7,F4DD,C5B4,F4E9,CFB5,CEC9,CBD8,CBF7,BDF4,D7CF,C0DB,D0F5,F4EA,F4EB,F4EC,F7E3,B7B1,F4ED,D7EB,F4EE,E6F9,BEC0,E6FA,BAEC,E6FB,CFCB,E6FC,D4BC,BCB6,E6FD,E6FE,BCCD,C8D2,CEB3,E7A1,B4BF,E7A2,C9B4,B8D9,C4C9,D7DD,C2DA,B7D7,D6BD,CEC6,B7C4,C5A6,E7A3,CFDF,E7A4,E7A5,E7A6,C1B7,D7E9,C9F0,CFB8,D6AF,D6D5,E7A7,B0ED,E7A8,E7A9,C9DC,D2EF,BEAD,E7AA,B0F3,C8DE,BDE1,E7AB,C8C6,E7AC,BBE6,B8F8,D1A4,E7AD,C2E7,BEF8,BDCA,CDB3,E7AE,E7AF,BEEE,D0E5,CBE7,CCD0,BCCC,E7B0,BCA8,D0F7,E7B1,D0F8,E7B2,E7B3,B4C2,E7B4,E7B5,C9FE,CEAC,C3E0,E7B7,B1C1,B3F1,E7B8,E7B9,D7DB,D5C0,E7BA,C2CC,D7BA,E7BB,E7BC,E7BD,BCEA,C3E5,C0C2,E7BE,E7BF,BCA9,E7C0,E7C1,E7B6,B6D0,E7C2,E7C3,E7C4,BBBA,B5DE,C2C6,B1E0,E7C5,D4B5,E7C6,B8BF,E7C8,E7C7,B7EC,E7C9,B2F8,E7CA,E7CB,E7CC,E7CD,E7CE,E7CF,E7D0,D3A7,CBF5,E7D1,E7D2,E7D3,E7D4,C9C9,E7D5,E7D6,E7D7,E7D8,E7D9,BDC9,E7DA,F3BE,B8D7,C8B1,F3BF,F3C0,F3C1,B9DE,CDF8,D8E8,BAB1,C2DE,EEB7,B7A3,EEB9,EEB8,B0D5,EEBB,D5D6,D7EF,D6C3,EEBD,CAF0,EEBC,EEBE,EEC0,EEBF,D1F2,C7BC,C3C0,B8E1,C1E7,F4C6,D0DF,F4C7,CFDB,C8BA,F4C8,F4C9,F4CA,F4CB,D9FA,B8FE,E5F1,D3F0,F4E0,CECC,B3E1,F1B4,D2EE,F4E1,CFE8,F4E2,C7CC,B5D4,B4E4,F4E4,F4E3,F4E5,F4E6,F4E7,BAB2,B0BF,F4E8,B7AD,D2ED,D2AB,C0CF,BFBC,EBA3,D5DF,EAC8,F1F3,B6F8,CBA3,C4CD,F1E7,F1E8,B8FB,F1E9,BAC4,D4C5,B0D2,F1EA,F1EB,F1EC,F1ED,F1EE,F1EF,F1F1,F1F0,C5D5,F1F2,B6FA,F1F4,D2AE,DEC7,CBCA,B3DC,B5A2,B9A2,C4F4,F1F5,F1F6,C1C4,C1FB,D6B0,F1F7,F1F8,C1AA,C6B8,BEDB,F1F9,B4CF,F1FA,EDB2,EDB1,CBE0,D2DE,CBC1,D5D8,C8E2,C0DF,BCA1,EBC1,D0A4,D6E2,B6C7,B8D8,EBC0,B8CE,EBBF,B3A6,B9C9,D6AB,B7F4,B7CA,BCE7,B7BE,EBC6,EBC7,B0B9,BFCF,EBC5,D3FD,EBC8,EBC9,B7CE,EBC2,EBC4,C9F6,D6D7,D5CD,D0B2,EBCF,CEB8,EBD0,B5A8,B1B3,EBD2,CCA5,C5D6,EBD3,EBD1,C5DF,EBCE,CAA4,EBD5,B0FB,BAFA,D8B7,F1E3,EBCA,EBCB,EBCC,EBCD,EBD6,E6C0,EBD9,BFE8,D2C8,EBD7,EBDC,B8EC,EBD8,BDBA,D0D8,B0B7,EBDD,C4DC,D6AC,B4E0,C2F6,BCB9,EBDA,EBDB,D4E0,C6EA,C4D4,EBDF,C5A7,D9F5,B2B1,EBE4,BDC5,EBE2,EBE3,B8AC,CDD1,EBE5,EBE1,C1B3,C6A2,CCF3,EBE6,C0B0,D2B8,EBE7,B8AF,B8AD,EBE8,C7BB,CDF3,EBEA,EBEB,EBED,D0C8,EBF2,EBEE,EBF1,C8F9,D1FC,EBEC,EBE9,B8B9,CFD9,C4E5,EBEF,EBF0,CCDA,CDC8,B0F2,EBF6,EBF5,B2B2,B8E0,EBF7,B1EC,CCC5,C4A4,CFA5,EBF9,ECA2,C5F2,EBFA,C9C5,E2DF,EBFE,CDCE,ECA1,B1DB,D3B7,D2DC,EBFD,EBFB,B3BC,EAB0,D7D4,F4AB,B3F4,D6C1,D6C2,D5E9,BECA,F4A7,D2A8,F4A8,F4A9,F4AA,BECB,D3DF,C9E0,C9E1,F3C2,CAE6,CCF2,E2B6,CBB4,CEE8,D6DB,F4AD,F4AE,F4AF,F4B2,BABD,F4B3,B0E3,F4B0,F4B1,BDA2,B2D5,F4B6,F4B7,B6E6,B2B0,CFCF,F4B4,B4AC,F4B5,F4B8,F4B9,CDA7,F4BA,F4BB,F4BC,CBD2,F4BD,F4BE,F4BF,F4DE,C1BC,BCE8,C9AB,D1DE,E5F5,DCB3,D2D5,DCB4,B0AC,DCB5,BDDA,DCB9,D8C2,DCB7,D3F3,C9D6,DCBA,DCB6,DCBB,C3A2,DCBC,DCC5,DCBD,CEDF,D6A5,DCCF,DCCD,DCD2,BDE6,C2AB,DCB8,DCCB,DCCE,DCBE,B7D2,B0C5,DCC7,D0BE,DCC1,BBA8,B7BC,DCCC,DCC6,DCBF,C7DB,D1BF,DCC0,DCCA,DCD0,CEAD,DCC2,DCC3,DCC8,DCC9,B2D4,DCD1,CBD5,D4B7,DCDB,DCDF,CCA6,DCE6,C3E7,DCDC,BFC1,DCD9,B0FA,B9B6,DCE5,DCD3,DCC4,DCD6,C8F4,BFE0,C9BB,B1BD,D3A2,DCDA,DCD5,C6BB,DCDE,D7C2,C3AF,B7B6,C7D1,C3A9,DCE2,DCD8,DCEB,DCD4,DCDD,BEA5,DCD7,DCE0,DCE3,DCE4,DCF8,DCE1,DDA2,DCE7,BCEB,B4C4,C3A3,B2E7,DCFA,DCF2,DCEF,DCFC,DCEE,D2F0,B2E8,C8D7,C8E3,DCFB,DCED,DCF7,DCF5,BEA3,DCF4,B2DD,DCF3,BCF6,DCE8,BBC4,C0F3,BCD4,DCE9,DCEA,DCF1,DCF6,DCF9,B5B4,C8D9,BBE7,DCFE,DCFD,D3AB,DDA1,DDA3,DDA5,D2F1,DDA4,DDA6,DDA7,D2A9,BAC9,DDA9,DDB6,DDB1,DDB4,DDB0,C6CE,C0F2,C9AF,DCEC,DDAE,DDB7,DCF0,DDAF,DDB8,DDAC,DDB9,DDB3,DDAD,C4AA,DDA8,C0B3,C1AB,DDAA,DDAB,DDB2,BBF1,DDB5,D3A8,DDBA,DDBB,C3A7,DDD2,DDBC,DDD1,B9BD,BED5,BEFA,BACA,DDCA,DDC5,DDBF,B2CB,DDC3,DDCB,B2A4,DDD5,DDBE,C6D0,DDD0,DDD4,C1E2,B7C6,DDCE,DDCF,DDC4,DDBD,DDCD,CCD1,DDC9,DDC2,C3C8,C6BC,CEAE,DDCC,DDC8,DDC1,DDC6,C2DC,D3A9,D3AA,DDD3,CFF4,C8F8,DDE6,DDC7,DDE0,C2E4,DDE1,DDD7,D6F8,DDD9,DDD8,B8F0,DDD6,C6CF,B6AD,DDE2,BAF9,D4E1,DDE7,B4D0,DDDA,BFFB,DDE3,DDDF,DDDD,B5D9,DDDB,DDDC,DDDE,BDAF,DDE4,DDE5,DDF5,C3C9,CBE2,DDF2,D8E1,C6D1,DDF4,D5F4,DDF3,DDF0,DDEC,DDEF,DDE8,D0EE,C8D8,DDEE,DDE9,DDEA,CBF2,DDED,B1CD,C0B6,BCBB,DDF1,DDF7,DDF6,DDEB,C5EE,DDFB,DEA4,DEA3,DDF8,C3EF,C2FB,D5E1,CEB5,DDFD,B2CC,C4E8,CADF,C7BE,DDFA,DDFC,DDFE,DEA2,B0AA,B1CE,DEAC,DEA6,BDB6,C8EF,DEA1,DEA5,DEA9,DEA8,DEA7,DEAD,D4CC,DEB3,DEAA,DEAE,C0D9,B1A1,DEB6,DEB1,DEB2,D1A6,DEB5,DEAF,DEB0,D0BD,DEB4,CAED,DEB9,DEB8,DEB7,DEBB,BDE5,B2D8,C3EA,DEBA,C5BA,DEBC,CCD9,B7AA,D4E5,DEBD,DEBF,C4A2,DEC1,DEBE,DEC0,D5BA,DEC2,F2AE,BBA2,C2B2,C5B0,C2C7,F2AF,D0E9,D3DD,EBBD,B3E6,F2B0,F2B1,CAAD,BAE7,F2B3,F2B5,F2B4,CBE4,CFBA,F2B2,CAB4,D2CF,C2EC,CEC3,F2B8,B0F6,F2B7,F2BE,B2CF,D1C1,F2BA,F2BC,D4E9,F2BB,F2B6,F2BF,F2BD,F2B9,F2C7,F2C4,F2C6,F2CA,F2C2,F2C0,F2C5,D6FB,F2C1,C7F9,C9DF,F2C8,B9C6,B5B0,F2C3,F2C9,F2D0,F2D6,BBD7,F2D5,CDDC,D6EB,F2D2,F2D4,B8F2,F2CB,F2CE,C2F9,D5DD,F2CC,F2CD,F2CF,F2D3,F2D9,D3BC,B6EA,CAF1,B7E4,F2D7,F2D8,F2DA,F2DD,F2DB,F2DC,D1D1,F2D1,CDC9,CECF,D6A9,F2E3,C3DB,F2E0,C0AF,F2EC,F2DE,F2E1,F2E8,F2E2,F2E7,F2E6,F2E9,F2DF,F2E4,F2EA,D3AC,F2E5,B2F5,F2F2,D0AB,F2F5,BBC8,F2F9,F2F0,F2F6,F2F8,F2FA,F2F3,F2F1,BAFB,B5FB,F2EF,F2F7,F2ED,F2EE,F2EB,F3A6,F3A3,F3A2,F2F4,C8DA,F2FB,F3A5,C3F8,F2FD,F3A7,F3A9,F3A4,F2FC,F3AB,F3AA,C2DD,F3AE,F3B0,F3A1,F3B1,F3AC,F3AF,F2FE,F3AD,F3B2,F3B4,F3A8,F3B3,F3B5,D0B7,F3B8,D9F9,F3B9,F3B7,C8E4,F3B6,F3BA,F3BB,B4C0,EEC3,F3BC,F3BD,D1AA,F4AC,D0C6,D0D0,D1DC,CFCE,BDD6,D1C3,BAE2,E1E9,D2C2,F1C2,B2B9,B1ED,F1C3,C9C0,B3C4,D9F2,CBA5,F1C4,D6D4,F1C5,F4C0,F1C6,D4AC,F1C7,B0C0,F4C1,F4C2,B4FC,C5DB,CCBB,D0E4,CDE0,F1C8,D9F3,B1BB,CFAE,B8A4,F1CA,F1CB,B2C3,C1D1,D7B0,F1C9,F1CC,F1CE,D9F6,D2E1,D4A3,F4C3,C8B9,F4C4,F1CD,F1CF,BFE3,F1D0,F1D4,F1D6,F1D1,C9D1,C5E1,C2E3,B9FC,F1D3,F1D5,B9D3,F1DB,BAD6,B0FD,F1D9,F1D8,F1D2,F1DA,F1D7,C8EC,CDCA,F1DD,E5BD,F1DC,F1DE,F1DF,CFE5,F4C5,BDF3,F1E0,F1E1,CEF7,D2AA,F1FB,B8B2,BCFB,B9DB,B9E6,C3D9,CAD3,EAE8,C0C0,BEF5,EAE9,EAEA,EAEB,EAEC,EAED,EAEE,EAEF,BDC7,F5FB,F5FD,F5FE,F5FC,BDE2,F6A1,B4A5,F6A2,F6A3,ECB2,D1D4,D9EA,F6A4,EEBA,D5B2,D3FE,CCDC,CAC4,E5C0,F6A5,BEAF,C6A9,DAA5,BCC6,B6A9,B8BC,C8CF,BCA5,DAA6,DAA7,CCD6,C8C3,DAA8,C6FD,D1B5,D2E9,D1B6,BCC7,BDB2,BBE4,DAA9,DAAA,D1C8,DAAB,D0ED,B6EF,C2DB,CBCF,B7ED,C9E8,B7C3,BEF7,D6A4,DAAC,DAAD,C6C0,D7E7,CAB6,D5A9,CBDF,D5EF,DAAE,D6DF,B4CA,DAB0,DAAF,D2EB,DAB1,DAB2,DAB3,CAD4,DAB4,CAAB,DAB5,DAB6,B3CF,D6EF,DAB7,BBB0,B5AE,DAB8,DAB9,B9EE,D1AF,D2E8,DABA,B8C3,CFEA,B2EF,DABB,DABC,BDEB,CEDC,D3EF,DABD,CEF3,DABE,D3D5,BBE5,DABF,CBB5,CBD0,DAC0,C7EB,D6EE,DAC1,C5B5,B6C1,DAC2,B7CC,BFCE,DAC3,DAC4,CBAD,DAC5,B5F7,DAC6,C1C2,D7BB,DAC7,CCB8,D2EA,C4B1,DAC8,B5FD,BBD1,DAC9,D0B3,DACA,DACB,CEBD,DACC,DACD,DACE,B2F7,DAD1,DACF,D1E8,DAD0,C3D5,DAD2,DAD3,DAD4,DAD5,D0BB,D2A5,B0F9,DAD6,C7AB,DAD7,BDF7,C3A1,DAD8,DAD9,C3FD,CCB7,DADA,DADB,C0BE,C6D7,DADC,DADD,C7B4,DADE,DADF,B9C8,BBED,B6B9,F4F8,F4F9,CDE3,F5B9,EBE0,CFF3,BBBF,BAC0,D4A5,E1D9,F5F4,B1AA,B2F2,F5F5,F5F7,BAD1,F5F6,C3B2,F5F9,F5F8,B1B4,D5EA,B8BA,B9B1,B2C6,D4F0,CFCD,B0DC,D5CB,BBF5,D6CA,B7B7,CCB0,C6B6,B1E1,B9BA,D6FC,B9E1,B7A1,BCFA,EADA,EADB,CCF9,B9F3,EADC,B4FB,C3B3,B7D1,BAD8,EADD,D4F4,EADE,BCD6,BBDF,EADF,C1DE,C2B8,D4DF,D7CA,EAE0,EAE1,EAE4,EAE2,EAE3,C9DE,B8B3,B6C4,EAE5,CAEA,C9CD,B4CD,E2D9,C5E2,EAE6,C0B5,D7B8,EAE7,D7AC,C8FC,D8D3,D8CD,D4DE,D4F9,C9C4,D3AE,B8D3,B3E0,C9E2,F4F6,BAD5,F4F7,D7DF,F4F1,B8B0,D5D4,B8CF,C6F0,B3C3,F4F2,B3AC,D4BD,C7F7,F4F4,F4F3,CCCB,C8A4,F4F5,D7E3,C5BF,F5C0,F5BB,F5C3,F5C2,D6BA,F5C1,D4BE,F5C4,F5CC,B0CF,B5F8,F5C9,F5CA,C5DC,F5C5,F5C6,F5C7,F5CB,BEE0,F5C8,B8FA,F5D0,F5D3,BFE7,B9F2,F5BC,F5CD,C2B7,CCF8,BCF9,F5CE,F5CF,F5D1,B6E5,F5D2,F5D5,F5BD,F5D4,D3BB,B3EC,CCA4,F5D6,F5D7,BEE1,F5D8,CCDF,F5DB,B2C8,D7D9,F5D9,F5DA,F5DC,F5E2,F5E0,F5DF,F5DD,F5E1,F5DE,F5E4,F5E5,CCE3,E5BF,B5B8,F5E3,F5E8,CCA3,F5E6,F5E7,F5BE,B1C4,F5BF,B5C5,B2E4,F5EC,F5E9,B6D7,F5ED,F5EA,F5EB,B4DA,D4EA,F5EE,B3F9,F5EF,F5F1,F5F0,F5F2,F5F3,C9ED,B9AA,C7FB,B6E3,CCC9,EAA6,B3B5,D4FE,B9EC,D0F9,E9ED,D7AA,E9EE,C2D6,C8ED,BAE4,E9EF,E9F0,E9F1,D6E1,E9F2,E9F3,E9F5,E9F4,E9F6,E9F7,C7E1,E9F8,D4D8,E9F9,BDCE,E9FA,E9FB,BDCF,E9FC,B8A8,C1BE,E9FD,B1B2,BBD4,B9F5,E9FE,EAA1,EAA2,EAA3,B7F8,BCAD,CAE4,E0CE,D4AF,CFBD,D5B7,EAA4,D5DE,EAA5,D0C1,B9BC,B4C7,B1D9,C0B1,B1E6,B1E7,B1E8,B3BD,C8E8,E5C1,B1DF,C1C9,B4EF,C7A8,D3D8,C6F9,D1B8,B9FD,C2F5,D3AD,D4CB,BDFC,E5C2,B7B5,E5C3,BBB9,D5E2,BDF8,D4B6,CEA5,C1AC,B3D9,CCF6,E5C6,E5C4,E5C8,E5CA,E5C7,B5CF,C6C8,B5FC,E5C5,CAF6,E5C9,C3D4,B1C5,BCA3,D7B7,CDCB,CBCD,CACA,CCD3,E5CC,E5CB,C4E6,D1A1,D1B7,E5CD,E5D0,CDB8,D6F0,E5CF,B5DD,CDBE,E5D1,B6BA,CDA8,B9E4,CAC5,B3D1,CBD9,D4EC,E5D2,B7EA,E5CE,E5D5,B4FE,E5D6,E5D3,E5D4,D2DD,C2DF,B1C6,D3E2,B6DD,CBEC,E5D7,D3F6,B1E9,B6F4,E5DA,E5D8,E5D9,B5C0,D2C5,E5DC,E5DE,E5DD,C7B2,D2A3,E5DB,D4E2,D5DA,E5E0,D7F1,E5E1,B1DC,D1FB,E5E2,E5E4,E5E3,E5E5,D2D8,B5CB,E7DF,DAF5,DAF8,DAF6,DAF7,DAFA,D0CF,C4C7,B0EE,D0B0,DAF9,D3CA,BAAA,DBA2,C7F1,DAFC,DAFB,C9DB,DAFD,DBA1,D7DE,DAFE,C1DA,DBA5,D3F4,DBA7,DBA4,DBA8,BDBC,C0C9,DBA3,DBA6,D6A3,DBA9,DBAD,DBAE,DBAC,BAC2,BFA4,DBAB,DBAA,D4C7,B2BF,DBAF,B9F9,DBB0,B3BB,B5A6,B6BC,DBB1,B6F5,DBB2,B1C9,DBB4,DBB3,DBB5,DBB7,DBB6,DBB8,DBB9,DBBA,D3CF,F4FA,C7F5,D7C3,C5E4,F4FC,F4FD,F4FB,BEC6,D0EF,B7D3,D4CD,CCAA,F5A2,F5A1,BAA8,F4FE,CBD6,F5A4,C0D2,B3EA,CDAA,F5A5,F5A3,BDB4,F5A8,F5A9,BDCD,C3B8,BFE1,CBE1,F5AA,F5A6,F5A7,C4F0,F5AC,B4BC,D7ED,B4D7,F5AB,F5AE,F5AD,F5AF,D0D1,C3D1,C8A9,F5B0,F5B1,F5B2,F5B3,F5B4,F5B5,F5B7,F5B6,F5B8,B2C9,D3D4,CACD,C0EF,D6D8,D2B0,C1BF,BDF0,B8AA,BCF8,F6C6,F6C7,F6C8,F6C9,F6CA,F6CC,F6CB,F7E9,F6CD,F6CE,EEC4,EEC5,EEC6,D5EB,B6A4,EEC8,EEC7,EEC9,EECA,C7A5,EECB,EECC,B7B0,B5F6,EECD,EECF,EECE,B8C6,EED0,EED1,EED2,B6DB,B3AE,D6D3,C4C6,B1B5,B8D6,EED3,EED4,D4BF,C7D5,BEFB,CED9,B9B3,EED6,EED5,EED8,EED7,C5A5,EED9,EEDA,C7AE,EEDB,C7AF,EEDC,B2A7,EEDD,EEDE,EEDF,EEE0,EEE1,D7EA,EEE2,EEE3,BCD8,EEE4,D3CB,CCFA,B2AC,C1E5,EEE5,C7A6,C3AD,EEE6,EEE7,EEE8,EEE9,EEEA,EEEB,EEEC,EEED,EEEE,EEEF,EEF0,EEF1,EEF2,EEF4,EEF3,EEF5,CDAD,C2C1,EEF6,EEF7,EEF8,D5A1,EEF9,CFB3,EEFA,EEFB,EEFC,EEFD,EFA1,EEFE,EFA2,B8F5,C3FA,EFA3,EFA4,BDC2,D2BF,B2F9,EFA5,EFA6,EFA7,D2F8,EFA8,D6FD,EFA9,C6CC,EFAA,EFAB,C1B4,EFAC,CFFA,CBF8,EFAE,EFAD,B3FA,B9F8,EFAF,EFB0,D0E2,EFB1,EFB2,B7E6,D0BF,EFB3,EFB4,EFB5,C8F1,CCE0,EFB6,EFB7,EFB8,EFB9,EFBA,D5E0,EFBB,B4ED,C3AA,EFBC,EFBD,EFBE,EFBF,CEFD,EFC0,C2E0,B4B8,D7B6,BDF5,CFC7,EFC3,EFC1,EFC2,EFC4,B6A7,BCFC,BEE2,C3CC,EFC5,EFC6,EFC7,EFCF,EFC8,EFC9,EFCA,C7C2,EFF1,B6CD,EFCB,EFCC,EFCD,B6C6,C3BE,EFCE,EFD0,EFD1,EFD2,D5F2,EFD3,C4F7,EFD4,C4F8,EFD5,EFD6,B8E4,B0F7,EFD7,EFD8,EFD9,EFDA,EFDB,EFDC,EFDD,EFDE,BEB5,EFE1,EFDF,EFE0,EFE2,EFE3,C1CD,EFE4,EFE5,EFE6,EFE7,EFE8,EFE9,EFEA,EFEB,EFEC,C0D8,EFED,C1AD,EFEE,EFEF,EFF0,CFE2,B3A4,C3C5,E3C5,C9C1,E3C6,B1D5,CECA,B4B3,C8F2,E3C7,CFD0,E3C8,BCE4,E3C9,E3CA,C3C6,D5A2,C4D6,B9EB,CEC5,E3CB,C3F6,E3CC,B7A7,B8F3,BAD2,E3CD,E3CE,D4C4,E3CF,E3D0,D1CB,E3D1,E3D2,E3D3,E3D4,D1D6,E3D5,B2FB,C0BB,E3D6,C0AB,E3D7,E3D8,E3D9,E3DA,E3DB,B8B7,DAE2,B6D3,DAE4,DAE3,DAE6,C8EE,DAE5,B7C0,D1F4,D2F5,D5F3,BDD7,D7E8,DAE8,DAE7,B0A2,CDD3,DAE9,B8BD,BCCA,C2BD,C2A4,B3C2,DAEA,C2AA,C4B0,BDB5,CFDE,DAEB,C9C2,B1DD,DAEC,B6B8,D4BA,B3FD,DAED,D4C9,CFD5,C5E3,DAEE,DAEF,DAF0,C1EA,CCD5,CFDD,D3E7,C2A1,DAF1,CBE5,DAF2,CBE6,D2FE,B8F4,DAF3,B0AF,CFB6,D5CF,CBED,DAF4,E3C4,C1A5,F6BF,F6C0,F6C1,C4D1,C8B8,D1E3,D0DB,D1C5,BCAF,B9CD,EFF4,B4C6,D3BA,F6C2,B3FB,F6C3,B5F1,F6C5,D3EA,F6A7,D1A9,F6A9,F6A8,C1E3,C0D7,B1A2,CEED,D0E8,F6AB,CFF6,F6AA,D5F0,F6AC,C3B9,BBF4,F6AE,F6AD,C4DE,C1D8,CBAA,CFBC,F6AF,F6B0,F6B1,C2B6,B0D4,C5F9,F6B2,C7E0,F6A6,BEB8,BEB2,B5E5,B7C7,BFBF,C3D2,C3E6,D8CC,B8EF,BDF9,D1A5,B0D0,F7B0,F7B1,D0AC,B0B0,F7B2,F7B3,F7B4,C7CA,BECF,F7B7,F7B6,B1DE,F7B5,F7B8,F7B9,CEA4,C8CD,BAAB,E8B8,E8B9,E8BA,BEC2,D2F4,D4CF,C9D8,D2B3,B6A5,C7EA,F1FC,CFEE,CBB3,D0EB,E7EF,CDE7,B9CB,B6D9,F1FD,B0E4,CBCC,F1FE,D4A4,C2AD,C1EC,C6C4,BEB1,F2A1,BCD5,F2A2,F2A3,F2A4,D2C3,C6B5,CDC7,F2A5,D3B1,BFC5,CCE2,F2A6,F2A7,D1D5,B6EE,F2A8,F2A9,B5DF,F2AA,F2AB,B2FC,F2AC,F2AD,C8A7,B7E7,ECA9,ECAA,ECAB,ECAC,C6AE,ECAD,ECAE,B7C9,CAB3,E2B8,F7CF,F7D0,B2CD,F7D1,F7D3,F7D2,E2BB,BCA2,E2BC,E2BD,E2BE,E2BF,E2C0,E2C1,B7B9,D2FB,BDA4,CACE,B1A5,CBC7,E2C2,B6FC,C8C4,E2C3,BDC8,B1FD,E2C4,B6F6,E2C5,C4D9,E2C6,CFDA,B9DD,E2C7,C0A1,E2C8,B2F6,E2C9,C1F3,E2CA,E2CB,C2F8,E2CC,E2CD,E2CE,CAD7,D8B8,D9E5,CFE3,F0A5,DCB0,C2ED,D4A6,CDD4,D1B1,B3DB,C7FD,B2B5,C2BF,E6E0,CABB,E6E1,E6E2,BED4,E6E3,D7A4,CDD5,E6E5,BCDD,E6E4,E6E6,E6E7,C2EE,BDBE,E6E8,C2E6,BAA7,E6E9,E6EA,B3D2,D1E9,BFA5,E6EB,C6EF,E6EC,E6ED,E6EE,C6AD,E6EF,C9A7,E6F0,E6F1,E6F2,E5B9,E6F3,E6F4,C2E2,E6F5,E6F6,D6E8,E6F7,E6F8,B9C7,F7BB,F7BA,F7BE,F7BC,BAA1,F7BF,F7C0,F7C2,F7C1,F7C4,F7C3,F7C5,F7C6,F7C7,CBE8,B8DF,F7D4,F7D5,F7D6,F7D8,F7DA,F7D7,F7DB,F7D9,D7D7,F7DC,F7DD,F7DE,F7DF,F7E0,DBCB,D8AA,E5F7,B9ED,BFFD,BBEA,F7C9,C6C7,F7C8,F7CA,F7CC,F7CB,F7CD,CEBA,F7CE,C4A7,D3E3,F6CF,C2B3,F6D0,F6D1,F6D2,F6D3,F6D4,F6D6,B1AB,F6D7,F6D8,F6D9,F6DA,F6DB,F6DC,F6DD,F6DE,CFCA,F6DF,F6E0,F6E1,F6E2,F6E3,F6E4,C0F0,F6E5,F6E6,F6E7,F6E8,F6E9,F6EA,F6EB,F6EC,F6ED,F6EE,F6EF,F6F0,F6F1,F6F2,F6F3,F6F4,BEA8,F6F5,F6F6,F6F7,F6F8,C8FA,F6F9,F6FA,F6FB,F6FC,F6FD,F6FE,F7A1,F7A2,F7A3,F7A4,F7A5,F7A6,F7A7,F7A8,B1EE,F7A9,F7AA,F7AB,F7AC,F7AD,C1DB,F7AE,F7AF,C4F1,F0AF,BCA6,F0B0,C3F9,C5B8,D1BB,F0B1,F0B2,F0B3,F0B4,F0B5,D1BC,D1EC,F0B7,F0B6,D4A7,CDD2,F0B8,F0BA,F0B9,F0BB,F0BC,B8EB,F0BD,BAE8,F0BE,F0BF,BEE9,F0C0,B6EC,F0C1,F0C2,F0C3,F0C4,C8B5,F0C5,F0C6,F0C7,C5F4,F0C8,F0C9,F0CA,F7BD,F0CB,F0CC,F0CD,F0CE,F0CF,BAD7,F0D0,F0D1,F0D2,F0D3,F0D4,F0D5,F0D6,F0D8,D3A5,F0D7,F0D9,F5BA,C2B9,F7E4,F7E5,F7E6,F7E7,F7E8,C2B4,F7EA,F7EB,C2F3,F4F0,F4EF,C2E9,F7E1,F7E2,BBC6,D9E4,CAF2,C0E8,F0A4,BADA,C7AD,C4AC,F7EC,F7ED,F7EE,F7F0,F7EF,F7F1,F7F4,F7F3,F7F2,F7F5,F7F6,EDE9,EDEA,EDEB,F6BC,F6BD,F6BE,B6A6,D8BE,B9C4,D8BB,DCB1,CAF3,F7F7,F7F8,F7F9,F7FB,F7FA,B1C7,F7FC,F7FD,F7FE,C6EB,ECB4,B3DD,F6B3,F6B4,C1E4,F6B5,F6B6,F6B7,F6B8,F6B9,F6BA,C8A3,F6BB,C1FA,B9A8,EDE8,B9EA,D9DF,A3A1,A3A2,A3A3,A1E7,A3A5,A3A6,A3A7,A3A8,A3A9,A3AA,A3AB,A3AC,A3AD,A3AE,A3AF,A3B0,A3B1,A3B2,A3B3,A3B4,A3B5,A3B6,A3B7,A3B8,A3B9,A3BA,A3BB,A3BC,A3BD,A3BE,A3BF,A3C0,A3C1,A3C2,A3C3,A3C4,A3C5,A3C6,A3C7,A3C8,A3C9,A3CA,A3CB,A3CC,A3CD,A3CE,A3CF,A3D0,A3D1,A3D2,A3D3,A3D4,A3D5,A3D6,A3D7,A3D8,A3D9,A3DA,A3DB,A3DC,A3DD,A3DE,A3DF,A3E0,A3E1,A3E2,A3E3,A3E4,A3E5,A3E6,A3E7,A3E8,A3E9,A3EA,A3EB,A3EC,A3ED,A3EE,A3EF,A3F0,A3F1,A3F2,A3F3,A3F4,A3F5,A3F6,A3F7,A3F8,A3F9,A3FA,A3FB,A3FC,A3FD,A1AB,A1E9,A1EA,A3FE,A3A4";
        }, UnicodeToAnsi = function (a) {
            var b = a.toString(16);
            b = "000" + b.toUpperCase(), b = b.substr(b.length - 4);
            var c = UnicodeChr().indexOf(b);
            return -1 != c && (b = AnsicodeChr().substr(c, 4)), parseInt(b, 16)
        }, AnsiToUnicode = function (a) {
            var b = a.toString(16);
            b = "000" + b.toUpperCase(), b = b.substr(b.length - 4);
            var c = AnsicodeChr().indexOf(b);
            return -1 != c && (b = UnicodeChr().substr(c, 4)), parseInt(b, 16)
        }, strUnicode2Ansi = function (a) {
            for (var b = a.length, c = "", d = 0; b > d; d++) {
                var e = a.charCodeAt(d);
                if (0 > e && (e += 65536), e > 127 && (e = UnicodeToAnsi(e)), e > 255) {
                    var f = 65280 & e;
                    f >>= 8;
                    var g = 255 & e;
                    c += String.fromCharCode(f) + String.fromCharCode(g)
                } else c += String.fromCharCode(e)
            }
            return c
        }, strAnsi2Unicode = function (a) {
            for (var b, c = a.length, d = "", e = 0; c > e; e++) {
                var f = a.charCodeAt(e);
                b = f > 127 ? AnsiToUnicode((f << 8) + a.charCodeAt(++e)) : f, d += String.fromCharCode(b)
            }
            return d
        }, encode64 = function (a) {
            var b, c, d, f, g, h = "",
                i = "",
                j = "",
                k = 0;
            do b = a.charCodeAt(k++), c = a.charCodeAt(k++), i = a.charCodeAt(k++), d = b >> 2, f = (3 & b) << 4 | c >> 4, g = (15 & c) << 2 | i >> 6, j = 63 & i, isNaN(c) ? g = j = 64 : isNaN(i) && (j = 64), h = h + e.charAt(d) + e.charAt(f) + e.charAt(g) + e.charAt(j), b = c = i = "", d = f = g = j = ""; while (k < a.length);
            return h
        }, decode64 = function (a) {
            var b, c, d, f, g, h = "",
                i = "",
                j = "",
                k = 0;
            if (a.length % 4 != 0) return "";
            var l = /[^A-Za-z0-9\/+\/\/\/=]/g;
            if (l.exec(a)) return "";
            do d = e.indexOf(a.charAt(k++)), f = e.indexOf(a.charAt(k++)), g = e.indexOf(a.charAt(k++)), j = e.indexOf(a.charAt(k++)), b = d << 2 | f >> 4, c = (15 & f) << 4 | g >> 2, i = (3 & g) << 6 | j, h += String.fromCharCode(b), 64 != g && (h += String.fromCharCode(c)), 64 != j && (h += String.fromCharCode(i)), b = c = i = "", d = f = g = j = ""; while (k < a.length);
            return h
        }, "" == d.data ? !1 : 0 == d.type ? 1 == d.unicode ? encode64(strUnicode2Ansi(d.data)) : encode64(d.data) : 1 == d.unicode ? strAnsi2Unicode(decode64(d.data)) : decode64(d.data)
    }
}(jQuery),
function (a) {
    a.fn.extend({
        tableExport: function (b, c) {
            function d(b, c, d, e) {
                -1 == q.ignoreRow.indexOf(d) && a(b).filter(":visible").find(c).each(function (b) {
                    if (("always" == a(this).data("tableexport-display") || "none" != a(this).css("display") && "hidden" != a(this).css("visibility") && "none" != a(this).data("tableexport-display")) && -1 == q.ignoreColumn.indexOf(b) && "function" == typeof e) {
                        var c = 0;
                        if ("undefined" != typeof u[d] && u[d].length > 0)
                            for (f = 0; b >= f; f++) "undefined" != typeof u[d][f] && (e(null, d, f), delete u[d][f], b++);
                        if (e(this, d, b), a(this).is("[colspan]")) {
                            c = a(this).attr("colspan");
                            for (var f = 0; c - 1 > f; f++) e(null, d, b + f)
                        }
                        if (a(this).is("[rowspan]"))
                            for (var g = parseInt(a(this).attr("rowspan")), h = 1; g > h; h++) {
                                "undefined" == typeof u[d + h] && (u[d + h] = []), u[d + h][b] = "";
                                for (var f = 1; c > f; f++) u[d + h][b + f] = ""
                            }
                    }
                })
            }

            function e(a) {
                if (q.consoleLog === !0 && console.log(a.output()), "string" == q.outputMode) return a.output();
                if ("base64" == q.outputMode) return p(a.output());
                try {
                    var b = a.output("blob");
                    saveAs(b, q.fileName + ".pdf")
                } catch (c) {
                    n(q.fileName + ".pdf", "data:application/pdf;base64," + p(a.output()))
                }
            }

            function f(a) {
                return a.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1")
            }

            function g(a, b, c) {
                return a.replace(new RegExp(f(b), "g"), c)
            }

            function h(a, b, c) {
                var d = "";
                if (null != a) {
                    var e = j(a, b, c),
                        f = null === e || "" == e ? "" : e.toString();
                    e instanceof Date ? d = q.csvEnclosure + e.toLocaleString() + q.csvEnclosure : (d = g(f, q.csvEnclosure, q.csvEnclosure + q.csvEnclosure), (d.indexOf(q.csvSeparator) >= 0 || /[\r\n ]/g.test(d)) && (d = q.csvEnclosure + d + q.csvEnclosure))
                }
                return d
            }

            function i(a) {
                return a = a || "0", a = g(a, q.numbers.html.decimalMark, "."), a = g(a, q.numbers.html.thousandsSeparator, ""), "number" == typeof a || jQuery.isNumeric(a) !== !1 ? a : !1
            }

            function j(b, c, d) {
                var e = "";
                if (null != b) {
                    var f = a(b);
                    if (q.htmlContent === !0) e = f.html().trim();
                    else if (e = f.text().trim().replace(/\u00AD/g, ""), q.numbers.html.decimalMark != q.numbers.output.decimalMark || q.numbers.html.thousandsSeparator != q.numbers.output.thousandsSeparator) {
                        var g = i(e);
                        if (g !== !1) {
                            var h = ("" + g).split(".");
                            1 == h.length && (h[1] = "");
                            var j = h[0].length > 3 ? h[0].length % 3 : 0;
                            e = (0 > g ? "-" : "") + (q.numbers.output.thousandsSeparator ? (j ? h[0].substr(0, j) + q.numbers.output.thousandsSeparator : "") + h[0].substr(j).replace(/(\d{3})(?=\d)/g, "$1" + q.numbers.output.thousandsSeparator) : h[0]) + (h[1].length ? q.numbers.output.decimalMark + h[1] : "")
                        }
                    }
                    q.escape === !0 && (e = escape(e)), "function" == typeof q.onCellData && (e = q.onCellData(f, c, d, e))
                }
                return e
            }

            function k(a, b, c) {
                return b + "-" + c.toLowerCase()
            }

            function l(a, b) {
                try {
                    return window.getComputedStyle ? (b = b.replace(/([a-z])([A-Z])/, k), window.getComputedStyle(a, null).getPropertyValue(b)) : a.currentStyle ? a.currentStyle[b] : a.style[b]
                } catch (c) {}
                return ""
            }

            function m(a, b, c) {
                var d = 100,
                    e = l(a, b),
                    f = e.match(/\d+/);
                if (null !== f) {
                    f = f[0];
                    var g = document.createElement("div");
                    g.style.overflow = "hidden", g.style.visibility = "hidden", a.parentElement.appendChild(g), g.style.width = d + c;
                    var h = d / g.offsetWidth;
                    return a.parentElement.removeChild(g), f * h
                }
                return 0
            }

            function n(a, b) {
                var c = document.createElement("a");
                c && (document.body.appendChild(c), c.download = a, c.href = b, console.log("....chrome has no set!"), document.createEvent ? (null == s && (s = document.createEvent("MouseEvents")), s.initEvent("click", !0, !1), c.dispatchEvent(s)) : document.createEventObject ? c.fireEvent("onclick") : "function" == typeof c.onclick && c.onclick(), document.body.removeChild(c))
            }

            function o(a) {
                a = a.replace(/\x0d\x0a/g, "\n");
                for (var b = "", c = 0; c < a.length; c++) {
                    var d = a.charCodeAt(c);
                    128 > d ? b += String.fromCharCode(d) : d > 127 && 2048 > d ? (b += String.fromCharCode(d >> 6 | 192), b += String.fromCharCode(63 & d | 128)) : (b += String.fromCharCode(d >> 12 | 224), b += String.fromCharCode(d >> 6 & 63 | 128), b += String.fromCharCode(63 & d | 128))
                }
                return b
            }

            function p(a) {
                var b, c, d, e, f, g, h, i = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
                    j = "",
                    k = 0;
                for (a = o(a); k < a.length;) b = a.charCodeAt(k++), c = a.charCodeAt(k++), d = a.charCodeAt(k++), e = b >> 2, f = (3 & b) << 4 | c >> 4, g = (15 & c) << 2 | d >> 6, h = 63 & d, isNaN(c) ? g = h = 64 : isNaN(d) && (h = 64), j = j + i.charAt(e) + i.charAt(f) + i.charAt(g) + i.charAt(h);
                return j
            }
            var q = {
                    consoleLog: !1,
                    csvEnclosure: '"',
                    csvSeparator: ",",
                    csvUseBOM: !0,
                    displayTableName: !1,
                    escape: !1,
                    excelstyles: ["border-bottom", "border-top", "border-left", "border-right"],
                    fileName: c,
                    htmlContent: !1,
                    ignoreColumn: [],
                    ignoreRow: [],
                    jspdf: {
                        orientation: "p",
                        unit: "pt",
                        format: "a4",
                        margins: {
                            left: 20,
                            right: 10,
                            top: 10,
                            bottom: 10
                        },
                        autotable: {
                            padding: 2,
                            lineHeight: 12,
                            fontSize: 8,
                            tableExport: {
                                onAfterAutotable: null,
                                onBeforeAutotable: null,
                                onTable: null
                            }
                        }
                    },
                    numbers: {
                        html: {
                            decimalMark: ".",
                            thousandsSeparator: ","
                        },
                        output: {
                            decimalMark: ".",
                            thousandsSeparator: ","
                        }
                    },
                    onCellData: null,
                    outputMode: "file",
                    tbodySelector: "tr",
                    theadSelector: "tr",
                    tableName: "myTableName",
                    type: "csv",
                    worksheetName: "xlsWorksheetName"
                },
                r = this,
                s = null,
                t = 0,
                u = [],
                v = "";
            if (console.log(r), a.extend(!0, q, b), "csv" == q.type || "txt" == q.type) {
                var w = "";
                if (t = 0, a(r).find("thead").first().find(q.theadSelector).each(function () {
                    v = "", d(this, "th,td", t, function (a, b, c) {
                        v += h(a, b, c) + q.csvSeparator
                    }), v = a.trim(v).substring(0, v.length - 1), v.length > 0 && (w.length > 0 && (w += "\n"), w += v), t++
                }), a(r).find("tbody").first().find(q.tbodySelector).each(function () {
                    v = "", d(this, "td", t, function (a, b, c) {
                        v += h(a, b, c) + q.csvSeparator
                    }), v = a.trim(v).substring(0, v.length - 1), v.length > 0 && (w.length > 0 && (w += "\n"), w += v), t++
                }), w += "\n", q.consoleLog === !0 && console.log(w), "string" === q.outputMode) return w;
                if ("base64" === q.outputMode) return p(w);
                try {
                    var x = new Blob([("csv" == q.type && q.csvUseBOM ? "\ufeff" : "") + w], {
                        type: "text/" + ("csv" == q.type ? "csv" : "plain") + ";charset=utf-8"
                    });
                    saveAs(x, q.fileName + "." + q.type)
                } catch (y) {
                    n(q.fileName + "." + q.type, "data:text/" + ("csv" == q.type ? "csv" : "plain") + ";charset=utf-8," + ("csv" == q.type && q.csvUseBOM ? "\ufeff" : "") + encodeURIComponent(w))
                }
            } else if ("sql" == q.type) {
                t = 0;
                var z = "INSERT INTO `" + q.tableName + "` (";
                if (a(r).find("thead").first().find(q.theadSelector).each(function () {
                    d(this, "th,td", t, function (a, b, c) {
                        z += "'" + j(a, b, c) + "',"
                    }), t++, z = a.trim(z), z = a.trim(z).substring(0, z.length - 1)
                }), z += ") VALUES ", a(r).find("tbody").first().find(q.tbodySelector).each(function () {
                    v = "", d(this, "td", t, function (a, b, c) {
                        v += "'" + j(a, b, c) + "',"
                    }), v.length > 3 && (z += "(" + v, z = a.trim(z).substring(0, z.length - 1), z += "),"), t++
                }), z = a.trim(z).substring(0, z.length - 1), z += ";", q.consoleLog === !0 && console.log(z), "string" == q.outputMode) return z;
                if ("base64" == q.outputMode) return p(z);
                try {
                    var x = new Blob([z], {
                        type: "text/plain;charset=utf-8"
                    });
                    saveAs(x, q.fileName + ".sql")
                } catch (y) {
                    n(q.fileName + ".sql", "data:application/sql;charset=utf-8," + encodeURIComponent(z))
                }
            } else if ("json" == q.type) {
                var A = [];
                a(r).find("thead").first().find(q.theadSelector).each(function () {
                    var a = [];
                    d(this, "th,td", t, function (b, c, d) {
                        a.push(j(b, c, d))
                    }), A.push(a)
                });
                var B = [];
                a(r).find("tbody").first().find(q.tbodySelector).each(function () {
                    var a = [];
                    d(this, "td", t, function (b, c, d) {
                        a.push(j(b, c, d))
                    }), a.length > 0 && (1 != a.length || "" != a[0]) && B.push(a), t++
                });
                var C = [];
                C.push({
                    header: A,
                    data: B
                });
                var D = JSON.stringify(C);
                if (q.consoleLog === !0 && console.log(D), "string" == q.outputMode) return D;
                var E = p(D);
                if ("base64" == q.outputMode) return E;
                try {
                    var x = new Blob([D], {
                        type: "application/json;charset=utf-8"
                    });
                    saveAs(x, q.fileName + ".json")
                } catch (y) {
                    n(q.fileName + ".json", "data:application/json;charset=utf-8;base64," + E)
                }
            } else if ("xml" === q.type) {
                t = 0;
                var F = '<?xml version="1.0" encoding="utf-8"?>';
                F += "<tabledata><fields>", a(r).find("thead").first().find(q.theadSelector).each(function () {
                    d(this, "th,td", t, function (a, b, c) {
                        F += "<field>" + j(a, b, c) + "</field>"
                    }), t++
                }), F += "</fields><data>";
                var G = 1;
                if (a(r).find("tbody").first().find(q.tbodySelector).each(function () {
                    var a = 1;
                    v = "", d(this, "td", t, function (b, c, d) {
                        v += "<column-" + a + ">" + j(b, c, d) + "</column-" + a + ">", a++
                    }), v.length > 0 && "<column-1></column-1>" != v && (F += '<row id="' + G + '">' + v + "</row>", G++), t++
                }), F += "</data></tabledata>", q.consoleLog === !0 && console.log(F), "string" == q.outputMode) return F;
                var E = p(F);
                if ("base64" == q.outputMode) return E;
                try {
                    var x = new Blob([F], {
                        type: "application/xml;charset=utf-8"
                    });
                    saveAs(x, q.fileName + ".xml")
                } catch (y) {
                    n(q.fileName + ".xml", "data:application/xml;charset=utf-8;base64," + E)
                }
            } else if ("excel" == q.type || "doc" == q.type) {
                t = 0;
                var H = "<table>";
                a(r).find("thead").first().find(q.theadSelector).each(function () {
                    v = "", d(this, "th,td", t, function (b, c, d) {
                        if (null != b) {
                            v += "<td style='";
                            for (var e in q.excelstyles) q.excelstyles.hasOwnProperty(e) && (v += q.excelstyles[e] + ": " + a(b).css(q.excelstyles[e]) + ";");
                            v += "'>" + j(b, c, d) + "</td>"
                        }
                    }), v.length > 0 && (H += "<tr>" + v + "</tr>"), t++
                }), a(r).find("tbody").first().find(q.tbodySelector).each(function () {
                    v = "", d(this, "td", t, function (b, c, d) {
                        if (null != b) {
                            v += "<td style='";
                            for (var e in q.excelstyles) q.excelstyles.hasOwnProperty(e) && (v += q.excelstyles[e] + ": " + a(b).css(q.excelstyles[e]) + ";");
                            a(b).is("[colspan]") && (v += "' colspan='" + a(b).attr("colspan")), a(b).is("[rowspan]") && (v += "' rowspan='" + a(b).attr("rowspan")), v += "'>" + j(b, c, d) + "</td>"
                        }
                    }), v.length > 0 && (H += "<tr>" + v + "</tr>"), t++
                }), q.displayTableName && (H += "<tr><td></td></tr><tr><td></td></tr><tr><td>" + j(a("<p>" + q.tableName + "</p>")) + "</td></tr>"), H += "</table>", q.consoleLog === !0 && console.log(H);
                var I = "<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:x='urn:schemas-microsoft-com:office:" + q.type + "' xmlns='http://www.w3.org/TR/REC-html40'>";
                if (I += '<meta http-equiv="content-type" content="application/vnd.ms-' + q.type + '; charset=UTF-8">', I += '<meta http-equiv="content-type" content="application/', I += "excel" === q.type ? "vnd.ms-excel" : "msword", I += '; charset=UTF-8">', I += "<head>", "excel" === q.type && (I += "<!--[if gte mso 9]>", I += "<xml>", I += "<x:ExcelWorkbook>", I += "<x:ExcelWorksheets>", I += "<x:ExcelWorksheet>", I += "<x:Name>", I += q.worksheetName, I += "</x:Name>", I += "<x:WorksheetOptions>", I += "<x:DisplayGridlines/>", I += "</x:WorksheetOptions>", I += "</x:ExcelWorksheet>", I += "</x:ExcelWorksheets>", I += "</x:ExcelWorkbook>", I += "</xml>", I += "<![endif]-->"), I += "</head>", I += "<body>", I += H, I += "</body>", I += "</html>", console.log("there"), "string" == q.outputMode) return I;
                var E = p(I);
                if ("base64" === q.outputMode) return E;
                var J = "excel" === q.type ? "xls" : "doc";
                try {
                    var x = new Blob([I], {
                        type: "application/vnd.ms-" + q.type
                    });
                    saveAs(x, q.fileName + "." + J)
                } catch (y) {
                    n(q.fileName + "." + J, "data:application/vnd.ms-" + q.type + ";base64," + E)
                }
            } else if ("png" == q.type) html2canvas(a(r), {
                onrendered: function (a) {
                    var b = a.toDataURL();
                    b = b.substring(22);
                    for (var c = atob(b), d = new ArrayBuffer(c.length), e = new Uint8Array(d), f = 0; f < c.length; f++) e[f] = c.charCodeAt(f);
                    try {
                        var g = new Blob([d], {
                            type: "image/png"
                        });
                        saveAs(g, q.fileName + ".png")
                    } catch (h) {
                        n(q.fileName + ".png", "data:image/png;base64," + b)
                    }
                }
            });
            else if ("pdf" == q.type)
                if (q.jspdf.autotable === !1) {
                    var K = {
                            dim: {
                                w: m(a(r).first().get(0), "width", "mm"),
                                h: m(a(r).first().get(0), "height", "mm")
                            },
                            pagesplit: !1
                        },
                        L = new jsPDF(q.jspdf.orientation, q.jspdf.unit, q.jspdf.format);
                    L.addHTML(a(r).first(), q.jspdf.margins.left, q.jspdf.margins.top, K, function () {
                        e(L)
                    })
                } else {
                    var M = q.jspdf.autotable.tableExport;
                    if ("string" == typeof q.jspdf.format && "bestfit" === q.jspdf.format.toLowerCase()) {
                        var N = {
                                a0: [2383.94, 3370.39],
                                a1: [1683.78, 2383.94],
                                a2: [1190.55, 1683.78],
                                a3: [841.89, 1190.55],
                                a4: [595.28, 841.89]
                            },
                            O = "",
                            P = "",
                            Q = 0;
                        a(r).filter(":visible").each(function () {
                            if ("none" != a(this).css("display")) {
                                var b = m(a(this).get(0), "width", "pt");
                                if (b > Q) {
                                    b > N.a0[0] && (O = "a0", P = "l");
                                    for (var c in N) N.hasOwnProperty(c) && N[c][1] > b && (O = c, P = "l", N[c][0] > b && (P = "p"));
                                    Q = b
                                }
                            }
                        }), q.jspdf.format = "" == O ? "a4" : O, q.jspdf.orientation = "" == P ? "w" : P
                    }
                    M.doc = new jsPDF(q.jspdf.orientation, q.jspdf.unit, q.jspdf.format), a(r).filter(":visible").each(function () {
                        if ("none" != a(this).css("display")) {
                            var b, c = 0,
                                e = {};
                            if (M.columns = [], M.rows = [], M.rowoptions = {}, "function" == typeof M.onTable && M.onTable(a(this), q) === !1) return !0;
                            Object.keys(q.jspdf.autotable).forEach(function (a) {
                                e[a] = q.jspdf.autotable[a]
                            }), e.margins = {}, a.extend(!0, e.margins, q.jspdf.margins), "function" != typeof e.renderCell && (e.renderCell = function (a, b, c, d, e, f, g, h) {
                                var i = h.tableExport.doc,
                                    j = 0;
                                if (i.setFillColor(g % 2 === 0 ? 245 : 255), i.setTextColor(50), i.rect(a, b, c, d, "F"), b += h.lineHeight / 2 + i.autoTableTextHeight() / 2 - 2.5, "undefined" != typeof h.tableExport.columns[e]) {
                                    var k = h.tableExport.columns[e];
                                    if ("undefined" != typeof k.style) {
                                        var l = k.style.align,
                                            m = h.tableExport.rowoptions[g + 1 + ":" + e];
                                        "undefined" != typeof m && (l = m.style.align), "right" == l ? j = c - i.getStringUnitWidth("" + f) * i.internal.getFontSize() - h.padding : "center" == l && (j = (c - i.getStringUnitWidth("" + f) * i.internal.getFontSize()) / 2)
                                    }
                                }
                                j < h.padding && (j = h.padding), i.text(f, a + j, b)
                            }), a(this).find("thead").find(q.theadSelector).each(function () {
                                b = 0, d(this, "th,td", c, function (a, c, d) {
                                    var e = {
                                        title: j(a, c, d),
                                        key: b++,
                                        style: {
                                            align: l(a, "text-align"),
                                            bcolor: l(a, "background-color")
                                        }
                                    };
                                    M.columns.push(e)
                                }), c++
                            }), a(this).find("tbody").find(q.tbodySelector).each(function () {
                                var a = [],
                                    e = 0;
                                b = 0, d(this, "td", c, function (c, d, f) {
                                    var g = {
                                        style: {
                                            align: l(c, "text-align"),
                                            bcolor: l(c, "background-color")
                                        }
                                    };
                                    M.rowoptions[e + ":" + b++] = g, a.push(j(c, d, f))
                                }), a.length && (M.rows.push(a), e++), c++
                            }), "function" == typeof M.onBeforeAutotable && M.onBeforeAutotable(a(this), M.columns, M.rows, e), M.doc.autoTable(M.columns, M.rows, e), "function" == typeof M.onAfterAutotable && M.onAfterAutotable(a(this), e), q.jspdf.autotable.startY = M.doc.autoTableEndPosY() + e.margins.top
                        }
                    }), e(M.doc), M.columns.length = 0, M.rows.length = 0, delete M.doc, M.doc = null
                }
            return this
        }
    })
}(jQuery),
function (a) {
    function b() {
        for (var a = navigator.userAgent, b = ["Android", "iPhone", "SymbianOS", "Windows Phone", "iPad", "iPod", "Linux x86_64"], c = !0, d = 0; d < b.length; d++)
            if (a.indexOf(b[d]) > 0) {
                c = !1;
                break
            }
        return c
    }
    if (b()) {
        var c = {};
        c.Html = a.getElementsByTagName("html")[0], c.widthProportion = function () {
            var b = (a.body && a.body.clientWidth || c.Html.offsetWidth) / 1320;
            return b > 1 ? b : 1
        }, c.changePage = function () {
            c.Html.setAttribute("style", "font-size:" + 10 * c.widthProportion() + "px !important")
        }, c.changePage(), setInterval(c.changePage, 100)
    } else {
        var c = {};
        c.Html = a.getElementsByTagName("html")[0];
        var d, e = function () {
            setTimeout(function () {
                if (!d) {
                    d = a.getElementById("fdWorker");
                    var b = a.getElementsByClassName("bgGary");
                    if (!d) return void e();
                    for (var f = 0; f < b.length; f++) c.changePage(b[f])
                }
            }, 1e3)
        };
        e(), c.changePage = function (a) {
            a.setAttribute("style", "width:" + d.clientWidth + "px !important;height:" + d.clientHeight + "px !important;")
        }
    }
}(document),
function () {
    "use strict";

    function a(a, b, c, d, e, f) {
        function g(a) {
            return a = a.replace(/\%3A/g, ":"), a = a.replace(/\%2F/g, "/"), a = a.replace(/\%3F/g, "?"), a = a.replace(/\%3D/g, "="), a = a.replace(/\%26/g, "&")
        }!a._org && b._org && (a._org = b._org), a.openid = void 0;
        var h = b.code,
            i = b.state || "login",
            j = isNaN(i.substr(0, 1));
        j || (i = i.substr(1, i.length));
        var k = a.appid,
            l = a.url;
        console.log("authorized"), h ? j ? e.getOpenid({
            code: h
        }, function (b) {
            a.openid = b.data.openid;
            var c = {
                controller: a.openid,
                _org: a._org
            };
            f.wxGet(c, function (b) {
                return a._member = b.data.member._id, a.nickName = b.data.member.wx.wxName, b.data.member.wx.wxPic ? a.headimgurl = b.data.member.wx.wxPic : a.headimgurl = "assets/images/head.png", a.isReal = b.data.member.isReal, b.data.member.cards.length > 0 ? (a.discount = b.data.member.cards[0].discount, a.cardFlag = !0) : (a.discount = 1, a.cardFlag = !1), d.url(g(i))
            }, function (b) {
                window.location.href = "https://open.weixin.qq.com/connect/oauth2/authorize?appid=" + k + "&redirect_uri=http%3a%2f%2f" + l + "%2fauthorized%3f_org%3d" + a._org + "&response_type=code&scope=snsapi_userinfo&state=1" + encodeURIComponent(i) + "#wechat_redirect"
            })
        }, function (b) {
            window.location.href = "https://open.weixin.qq.com/connect/oauth2/authorize?appid=" + k + "&redirect_uri=http%3a%2f%2f" + l + "%2fauthorized%3f_org%3d" + a._org + "&response_type=code&scope=snsapi_userinfo&state=1" + encodeURIComponent(i) + "#wechat_redirect"
        }) : e.getInfo({
            code: h
        }, function (b) {
            a.openid = b.data.info.openid, a.nickName = b.data.info.nickname, b.data.info.headimgurl ? a.headimgurl = b.data.info.headimgurl : a.headimgurl = "assets/images/head.png";
            var c = {
                controller: a.openid,
                _org: a._org
            };
            f.wxGet(c, function (b) {
                return a._member = b.data.member._id, a.isReal = b.data.member.isReal, b.data.member.cards.length > 0 ? (a.discount = b.data.member.cards[0].discount, a.cardFlag = !0) : (a.discount = 1, a.cardFlag = !1), d.url(g(i))
            }, function (b) {
                return a.discount = 1, d.url(g(i))
            })
        }, function (b) {
            window.location.href = "https://open.weixin.qq.com/connect/oauth2/authorize?appid=" + k + "&redirect_uri=http%3a%2f%2f" + l + "%2fauthorized%3f_org%3d" + a._org + "&response_type=code&scope=snsapi_userinfo&state=1" + encodeURIComponent(i) + "#wechat_redirect"
        }) : (alert("页面尚未授权，请重新进入"), window.location.href = "https://open.weixin.qq.com/connect/oauth2/authorize?appid=" + k + "&redirect_uri=http%3a%2f%2f" + l + "%2fauthorized%3f_org%3d" + a._org + "&response_type=code&scope=snsapi_userinfo&state=1" + encodeURIComponent(i) + "#wechat_redirect")
    }
    angular.module("fieldApp").controller("AuthorizedCtrl", a), a.$inject = ["$rootScope", "$stateParams", "$state", "$location", "Wxticket", "Member"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l) {
        var m = this;
        m.state = f.state, m._card = "", h._preporder = null, m.isReal = h.isReal;
        var n = function () {
            $("html,body").animate({
                scrollTop: "0px"
            }, 800)
        };
        n(), m.margin = {
            "margin-top": "0.07rem"
        }, m.background1 = {
            background: "#0099ff",
            color: "#fff",
            border: "0"
        }, m.background2 = {
            background: "#fff",
            color: "#000",
            border: "1px solid #ccc"
        }, m.background3 = {
            background: "#EFF2F7",
            color: "#B7B8B9",
            border: "1px solid #ccc"
        }, m.chooseCard = function (a) {
            !m.isReal && a.realPrice > 100 || m.isReal && a.realPrice <= 100 || (h._preporder = "", _.each(m.cards, function (a) {
                a.chooseFlag = !1
            }), a.chooseFlag = !0, m._card = a._id, m.discount = a.discount, h.price = a.price)
        }, m.turn = function () {
            if ("choose" == m.state) {
                var a = "/wx/order/choose";
                return k.path(a).replace()
            }
            var a = "/wx/me/money";
            return k.path(a).replace()
        }, m.wxPay = function () {
            if (!m.agreeFlag) return m.succeedFlag = !0, void(m.alert = "请先同意充值服务条款");
            if (!m._card) return m.succeedFlag = !0, void(m.alert = "请先选择卡种");
            if (m.discount > h.discount && !m.refundFlag) return void(m.refundFlag = !0);
            var a = {
                _org: h._org,
                _member: h._member,
                orderDate: new Date(m.date).getTime(),
                _card: m._card,
                spbill_create_ip: "0.0.0.0",
                payment: "wx",
                wxid: h.openid
            };
            h._preporder ? m.p() : i.buy(a, function (a) {
                m._preporder = a.data.preporder._id, h._preporder = m._preporder, m.p()
            }, function (a) {
                alert(a.data.data)
            })
        }, m.p = function () {
            var a = {
                _preporder: h._preporder
            };
            j.getPayParams(a, function (a) {
                function b() {
                    var b = {
                        appId: a.data.appId,
                        timeStamp: a.data.timeStamp,
                        nonceStr: a.data.nonceStr,
                        "package": a.data["package"],
                        signType: a.data.signType,
                        paySign: a.data.paySign
                    };
                    WeixinJSBridge.invoke("getBrandWCPayRequest", b, function (a) {
                        if ("get_brand_wcpay_request:ok" == a.err_msg) {
                            var b = [];
                            b.push(f.classId);
                            var c = {
                                _preporder: m._preporder
                            };
                            i.check(c, function (a) {}, function (a) {
                                m.warnFlag = !0, m.wordWarn = a.data.data
                            }), m.succeedFlag = !0, m.alert = "支付成功", m._card = "", m.refundFlag = !1, h.discount = m.discount;
                            var d = "/wx/buy/confirm";
                            return k.path(d).replace()
                        }
                    })
                }
                "undefined" == typeof WeixinJSBridge ? document.addEventListener ? document.addEventListener("WeixinJSBridgeReady", b, !1) : document.attachEvent && (document.attachEvent("WeixinJSBridgeReady", b), document.attachEvent("onWeixinJSBridgeReady", b)) : b()
            })
        };
        var o = function () {
                var a = {
                    _org: h._org,
                    sortBy: "price"
                };
                i.index(a, function (a) {
                    m.cards = a.data.cards;
                    for (var b = 0; b < m.cards.length; b++) h.isReal && m.cards[b].price > 100 ? m.cards[b].canFlag = !0 : !h.isReal && m.cards[b].price <= 100 && (m.cards[b].canFlag = !0), b % 2 == 0 ? m.cards[b].flag = !0 : m.cards[b].flag = !1, !m.judgeFlag && m.cards[b].canFlag && (m.cards[b].chooseFlag = !0, m._card = m.cards[b]._id, m.discount = m.cards[b].discount, h.price = m.cards[b].price, m.judgeFlag = !0);
                    m.cards.length > 0 && (m.height = {
                        height: m.cards.length / 2 * .65 + m.cards.length % 2 / 2 * .65 + .25 + "rem"
                    })
                }, function (a) {})
            },
            p = function () {
                var a = {
                    controller: h.openid,
                    _org: h._org
                };
                l.wxGet(a, function (a) {
                    m.member = a.data.member, m.member.cards.length > 0 ? (m.price = m.member.cards[0].total, m.levelDes = m.member.cards[0].levelDes) : (m.price = 0, m.levelDes = "非实名会员"), m.price = m.price.toFixed(2), m.accTot = 0, _.each(m.member.specialAccount, function (a) {
                        "5a1e4774138f87e51c2e79e9" == a._venue ? m.accTot = a.total : m.accTot = 0
                    })
                }, function (a) {})
            },
            q = function () {
                if (!h._member) {
                    h.key = "me";
                    var a = "/wx/user/new";
                    return k.url(a)
                }
                m.judgeFlag = !1, o(), p()
            };
        q()
    }
    angular.module("fieldApp").controller("WxApplyCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "Card", "Wxticket", "$location", "Member"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        "order" == f.state ? k.state = "order" : k.state = "buy", k.turn = function (a) {
            if (a.realPrice <= 200) {
                var b = "/wx/buy/apply?name=" + a.name + "&price=" + a.realPrice + "&_card=" + a._id + "&state=" + k.state + "&discount=" + a.discount;
                return i.url(b)
            }
            k.ruleFlag = !0
        };
        var l = function () {
                j.index({
                    _org: h._org
                }, function (a) {
                    k.cards = a.data.cards
                }, function (a) {})
            },
            m = function () {
                if (!h._member) {
                    h.key = "me";
                    var a = "/wx/user/new";
                    return i.url(a)
                }
                l()
            };
        m()
    }
    angular.module("fieldApp").controller("WxBuyCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "$location", "Card"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l) {
        var m = this;
        m.price = h.price;
        var n = function () {
            $("html,body").animate({
                scrollTop: "0px"
            }, 800)
        };
        n(), m.p = function () {
            var a = {
                _preporder: h._preporder
            };
            l.check(a, function (a) {}, function (a) {}), h._preporder = null, h.price = "";
            var b = "/wx/order";
            return i.path(b).replace()
        }
    }
    angular.module("fieldApp").controller("WxConfirmCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "$location", "Orderlist", "Member", "Card"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l) {}
    angular.module("fieldApp").controller("WxRuleCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "Card", "Wxticket", "$location", "Member"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.flag = !1, h.brr = "";
        var l = function () {
            $("html,body").animate({
                scrollTop: "0px"
            }, 800)
        };
        l(), k.check = function () {
            var a = {
                cardNo: k.cardNo,
                _org: h._org
            };
            j.oldCheck(a, function (a) {
                k.flag = !0, k.name = a.data.member.name;
                for (var b = "", c = 0; c < k.name.length - 1; c++) b += "*";
                if (b += k.name.substring(k.name.length - 1, k.name.length), k.name = b, a.data.member.idCard) {
                    k.idCard = a.data.member.idCard;
                    for (var b = "", c = 0; c < k.idCard.length - 6; c++) b += "*";
                    b += k.idCard.substring(k.idCard.length - 6, k.idCard.length), k.idCard = b
                } else k.idCard = "暂无";
                k.tel = a.data.member.tel;
                for (var b = "", c = 0; c < k.tel.length - 4; c++) b += "*";
                b += k.tel.substring(k.tel.length - 4, k.tel.length), k.tel = b, 1 == a.data.member.cards.length ? k.rprice = a.data.member.cards[0].total : k.rprice = 0, k.xprice = a.data.member.virtualAccount.total
            }, function (a) {
                k.flag = !1, k.err = a.data.data, k.errorFlag = !0
            })
        };
        var m = function () {};
        m()
    }
    angular.module("fieldApp").controller("WxCheckCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "Smscode", "Member"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.state = f.state, k.order = f.order, console.log(k.order);
        var l = function () {
            $("html,body").animate({
                scrollTop: "0px"
            }, 800)
        };
        l(), k.back = function () {
            e.go("wx-create")
        }, k.chooseOne = function (a) {
            _.each(k.members, function (a) {
                a.num && a.num == k.order && a.oneSelect && (a.num = "", a.oneSelect = !1, a.twoSelect = !1)
            }), a.oneSelect = !0, a.num = k.order, h.brr[k.order - 1].cardNo = a.cardNo, h.brr[k.order - 1].id = a._id, h.brr[k.order - 1].name = a.name, h.brr[k.order - 1].idCard = a.idCard, h.brr[k.order - 1].rPrice = a.cards[0].total, h.brr[k.order - 1].fPrice = a.virtualAccount.total, h.members = k.members
        }, k.chooseTwo = function (a) {
            a.oneSelect || (a.twoSelect = !a.twoSelect, !a.twoSelect && a.num && (a.num = ""), k.irr = [], _.each(k.members, function (a) {
                if (a.twoSelect && (!a.num || a.num && a.num == k.order) && !a.oneSelect) {
                    a.num = k.order;
                    var b = {
                        id: a._id,
                        name: a.name,
                        price: a.cards[0].total + a.virtualAccount.total,
                        rPrice: a.cards[0].total,
                        fPrice: a.virtualAccount.total
                    };
                    k.irr.push(b)
                }
            }), h.brr[k.order - 1].ids = k.irr, h.members = k.members)
        }, k.turn = function (a) {
            e.go("wx-create", {
                state: a.order
            })
        };
        var m = function () {
            if (h.members) {
                for (var a = 0; a < h.members.length; a++) h.members[a].order = a + 1;
                k.members = h.members
            } else {
                var b = {
                    tel: "13067738045",
                    code: "015897",
                    _org: "599ce1e4ae15c5a04b7548c0"
                };
                j.judgeAdd(b, function (a) {
                    if (a.data.needMerge) {
                        h.members = a.data.members;
                        for (var b = 0; b < a.data.members.length; b++) a.data.members[b].order = b + 1;
                        return void(k.members = h.members)
                    }
                }, function (a) {
                    k.err = a.data.data, k.errorFlag = !0
                })
            }
            h.brr[k.order - 1].cardNo && _.each(k.members, function (a) {
                h.brr[k.order - 1].cardNo == a.cardNo && (a.oneSelect = !0)
            })
        };
        m()
    }
    angular.module("fieldApp").controller("WxAccountCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "$location", "Member"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l) {
        var m = this;
        if (m.state = f.state, m.flag = !1, h._member && "choose" == h.key) {
            var n = "/wx/order/choose";
            i.url(n)
        }
        "new" == m.state ? m.newFlag = !0 : m.newFlag = !1, m.send = function () {
            var a = {
                _org: h._org,
                tel: h.tel
            };
            k.create(a, function (a) {}, function (a) {
                402 == a.data.code ? m.err = "请输入正确的手机号" : 409 == a.data.code && (m.err = a.data.data), m.errorFlag = !0
            })
        }, m.sure = function () {
            var a = {
                name: m.name,
                tel: h.tel,
                code: h.code,
                _org: h._org,
                wxid: h.openid,
                wxName: m.name,
                wxPic: h.headimgurl
            };
            "new" == m.state && l.wxCreate(a, function (a) {
                h._member = a.data.member._id, h.nickName = m.name, e.go("wx-order"), m.code = ""
            }, function (a) {
                m.err = a.data.data, m.errorFlag = !0
            })
        }, m.judge = function () {
            m.name ? m.flag = !0 : m.flag = !1
        }
    }
    angular.module("fieldApp").controller("WxCodeCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "$location", "$interval", "Smscode", "Member"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this;
        j.state = f.state;
        var k = function () {
            $("html,body").animate({
                scrollTop: "0px"
            }, 800)
        };
        if (k(), h.brr) j.arr = h.brr, _.each(j.arr, function (a) {
            for (var b = 0; b < a.ids.length; b++) b == a.ids.length - 1 ? a.ids[b].flag = !0 : a.ids[b].flag = !1
        });
        else {
            h.num = 1, j.arr = [];
            var l = {
                order: 1,
                id: "",
                cardNo: "",
                tel: "",
                name: "",
                idCard: "",
                rPrice: "",
                fPrice: "",
                ids: []
            };
            j.arr.push(l), h.brr = j.arr
        }
        j["delete"] = function (a) {
            var b = [],
                c = !1;
            if (h.num = h.num - 1, j.arr.length > 1) {
                for (var d = 0; d < j.arr.length; d++) a.order == d + 1 ? (c = !0, _.each(h.members, function (a) {
                    a.num == j.arr[d].order && (a.num = "")
                })) : (c && (_.each(h.members, function (a) {
                    a.num == j.arr[d].order && (a.num = a.num - 1)
                }), j.arr[d].order = j.arr[d].order - 1), b.push(j.arr[d]));
                j.arr = b
            } else if (1 == j.arr.length) {
                _.each(h.members, function (a) {
                    1 == a.num && (a.num = "")
                });
                var e = {
                    order: 1,
                    id: "",
                    cardNo: "",
                    tel: "",
                    name: "",
                    idCard: "",
                    rPrice: "",
                    fPrice: "",
                    ids: []
                };
                j.arr[0] = e
            }
            _.each(h.members, function (b) {
                a.cardNo == b.cardNo && (b.oneSelect = !1), _.each(a.ids, function (a) {
                    b._id == a.id && (b.twoSelect = !1)
                })
            }), h.brr = j.arr
        }, j.judge = function () {
            j.n = 0, j.nFlag = !1, j.tFlag = !1, _.each(h.brr, function (a) {
                a.id && a.tel && a.name && a.idCard || (j.nFlag = !0), a.id && a.tel && a.name && a.idCard && (j.tFlag = !0), j.n = j.n + 1, _.each(a.ids, function (b) {
                    b.id != a.id && (j.n = j.n + 1)
                })
            });
            for (var a = 0; a < h.brr.length; a++)
                for (var b = 0; b < h.brr.length; b++)
                    if (b != a && h.brr[a].tel == h.brr[b].tel) return j.accountFlag = !0, void(j.wordErr = "您的手机号有重复，请修改");
            return j.tFlag && j.nFlag ? (j.accountFlag = !0, void(j.wordErr = "您还有部分账号的信息没有填充完整，若是继续操作，这些账号下的合并账号将不会被提交并被删除，是否继续？")) : j.tFlag ? void(j.n < h.members.length ? (j.accountFlag = !0, j.wordErr = "您还有账号未被绑定或合并，如果您选择继续操作，您的这些未绑定账号将被删除，是否继续？") : j.sure()) : (j.errorFlag = !0, void(j.err = "您还有部分账号的信息没有填充完整，请填写完整"))
        }, j.add = function () {
            h.num = h.num + 1;
            var a = {
                order: h.num,
                id: "",
                cardNo: "",
                tel: "",
                name: "",
                idCard: "",
                rPrice: "",
                fPrice: "",
                ids: []
            };
            j.arr.push(a), h.brr = j.arr
        }, j.turn = function (a, b) {
            e.go("wx-account", {
                state: a,
                order: b
            })
        }, j.sure = function () {
            e.go("wx-submit")
        };
        var m = function () {};
        m()
    }
    angular.module("fieldApp").controller("WxCreateCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "$location"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = function () {};
        k()
    }
    angular.module("fieldApp").controller("WxInfooCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "Member", "Smscode"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.state = f.state;
        var l = function () {
            $("html,body").animate({
                scrollTop: "0px"
            }, 800)
        };
        l(), k.turn = function (a) {
            e.go("wx-create")
        }, k.bind = function () {
            var a = {
                name: h.nickName,
                tel: h.tel,
                code: h.code,
                _org: h._org,
                wxid: h.openid,
                wxName: h.nickName,
                wxPic: h.headimgurl
            };
            j.wxBind(a, function (a) {
                h._member = a.data.member._id, h.isReal = a.data.member.isReal, e.go("wx-order"), k.code = ""
            }, function (a) {
                k.err = a.data.data, k.errorFlag = !0
            })
        }, k.dealNumber = function (a, b) {
            var c = a.toFixed(3);
            return b ? c.substring(0, c.lastIndexOf(".") + 3) : parseFloat(c.substring(0, c.lastIndexOf(".") + 3))
        };
        var m = function () {
            if ("old" == k.state) {
                var a = {
                    tel: h.tel,
                    _org: h._org
                };
                j.indexByTel(a, function (a) {
                    k.tel = a.data.member.tel, k.name = a.data.member.name, k.p1 = a.data.member.cards[0].total, k.p2 = a.data.member.virtualAccount.total, k.p1 = k.dealNumber(k.p1), k.p2 = k.dealNumber(k.p2), a.data.member.cardNo ? k.cardNo = a.data.member.cardNo : k.cardNo = "暂无"
                }, function (a) {
                    k.err = a.data.data, k.errorFlag = !0
                })
            } else k.members = h.members
        };
        m()
    }
    angular.module("fieldApp").controller("WxMessageCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "$location", "Member"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.flag = !1, h.brr = "";
        var l = function () {
            $("html,body").animate({
                scrollTop: "0px"
            }, 800)
        };
        l(), k.sendCode = function () {
            if (k.tel) {
                var a = {
                    _org: h._org,
                    tel: k.tel
                };
                j.judge(a, function (b) {
                    k.exFlag = b.data.isValued, b.data.isValued ? i.create(a, function (a) {
                        h.tel = k.tel, alert("验证码发送成功")
                    }, function (a) {
                        402 == a.data.code ? (k.errorFlag = !0, k.err = "请输入正确的手机号") : 409 == a.data.code ? (k.errorFlag = !0, k.err = a.data.data) : (k.errorFlag = !0, k.err = a.data.data)
                    }) : i.create(a, function (a) {
                        alert("验证码发送成功")
                    }, function (a) {
                        402 == a.data.code ? (k.err = "请输入正确的手机号", k.errorFlag = !0) : 409 == a.data.code ? (k.err = a.data.data, k.errorFlag = !0) : (k.errorFlag = !0, k.err = a.data.data)
                    })
                }, function (a) {
                    k.errorFlag = !0, k.err = a.data.data
                })
            } else k.err = "请输入手机号", k.errorFlag = !0
        }, k.sure = function () {
            if (k.code) {
                h.code = k.code;
                var a = {
                    tel: k.tel,
                    code: k.code,
                    _org: h._org
                };
                i.check(a, function (b) {
                    return b.data ? void(k.exFlag ? j.judgeAdd(a, function (a) {
                        return a.data.needMerge ? (h.members = a.data.members, void e.go("wx-message", {
                            state: "oldAdd"
                        })) : void e.go("wx-message", {
                            state: "old"
                        })
                    }, function (a) {
                        k.err = a.data.data, k.errorFlag = !0
                    }) : (h.tel = k.tel, e.go("wx-code", {
                        state: "new"
                    }))) : void alert("验证码错误")
                }, function (a) {
                    k.errorFlag = !0, k.err = a.data.data
                })
            } else k.err = "请输入验证码", k.errorFlag = !0
        }, k.judge = function () {
            k.code ? k.flag = !0 : k.flag = !1
        };
        var m = function () {};
        m()
    }
    angular.module("fieldApp").controller("WxNewCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "Smscode", "Member"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.flag = !1, k.sendCode = function () {
            if (k.tel) {
                var a = {
                    _org: h._org,
                    tel: k.tel
                };
                i.judge(a, function (a) {
                    if (a.data.isValued) {
                        var b = {
                            _org: h._org,
                            tel: k.tel
                        };
                        j.create(b, function (a) {
                            h.tel = k.tel, e.go("wx-code", {
                                state: "old"
                            })
                        }, function (a) {
                            402 == a.data.code ? (k.warnFlag = !0, k.error = "请输入正确的手机号") : 409 == a.data.code && (k.warnFlag = !0,
                                k.error = a.data.data)
                        })
                    } else k.warnFlag = !0, k.error = "您不是老用户"
                }, function (a) {
                    k.warnFlag = !0, k.error = a.data.data
                })
            } else k.warnFlag = !0, k.error = "请输入手机号"
        }, k.judge = function () {
            k.tel ? k.flag = !0 : k.flag = !1
        };
        var l = function () {};
        l()
    }
    angular.module("fieldApp").controller("WxOldCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "Member", "Smscode"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.state = f.state;
        var l = function () {
            $("html,body").animate({
                scrollTop: "0px"
            }, 800)
        };
        l(), k.turn = function (a) {
            k.errorFlag = !1, e.go("wx-new")
        };
        var m = (new Date).getTime().toString().split(""),
            n = function (a) {
                function b(a) {
                    for (var b = a || 32, c = "ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678=", d = c.length, e = "", f = 0; b > f; f++) e += c.charAt(Math.floor(Math.random() * d));
                    return e
                }
                var c = b(m.length).split("");
                a += m.join("");
                for (var d = 0; d < m.length; d++) a = a.replace(m[d], c[d]);
                m = m.join(""), k.randomStr = c.join(""), k.sign = a
            };
        k.sure = function () {
            n(m.join(""));
            var a = {
                tel: h.tel,
                code: h.code,
                _org: h._org,
                nowStr: m,
                randomStr: k.randomStr,
                sign: k.sign,
                memberArr: k.sub
            };
            j.add(a, function (a) {
                k.err = "合并成功", k.errorFlag = !0, k.succeedFlag = !0
            }, function (a) {
                k.err = a.data.data, k.errorFlag = !0, k.succeedFlag = !1
            })
        };
        var o = function () {
            k.members = [], k.sub = [], _.each(h.brr, function (a) {
                if (a.id && a.tel && a.name && a.idCard) {
                    var b = {
                            id: a.id,
                            tel: a.tel,
                            name: a.name,
                            idCard: a.idCard,
                            rPrice: a.rPrice,
                            fPrice: a.fPrice,
                            cardNo: a.cardNo
                        },
                        c = {
                            id: a.id,
                            tel: a.tel,
                            name: a.name,
                            idCard: a.idCard,
                            option: "mergeAs"
                        };
                    k.sub.push(c), _.each(a.ids, function (c) {
                        b.rPrice = b.rPrice + c.rPrice, b.fPrice = b.fPrice + c.fPrice;
                        var d = {
                            id: c.id,
                            tel: a.tel,
                            name: a.name,
                            idCard: a.idCard,
                            option: "merge",
                            mergeTo: a.id
                        };
                        k.sub.push(d)
                    }), k.members.push(b)
                }
            }), _.each(h.members, function (a) {
                if (!a.twoSelect && !a.oneSelect) {
                    var b = {
                        id: a._id,
                        tel: "13333333333",
                        name: "22",
                        idCard: "22",
                        option: "delete"
                    };
                    k.sub.push(b)
                }
            })
        };
        o()
    }
    angular.module("fieldApp").controller("WxSubmitCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "$location", "Member"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i) {
        var j = this;
        j.back = function () {
            var a = "/wx/order";
            return i.url(a)
        };
        var k = function () {};
        k()
    }
    angular.module("fieldApp").controller("WxUserCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "$location"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this;
        k.vId = f._venue, k.iId = f._item;
        var l = function () {
            $("html,body").animate({
                scrollTop: "0px"
            }, 800)
        };
        l();
        var m = function () {
                var a = {
                    _org: h._org,
                    _member: h._member,
                    _venue: k.vId,
                    orderDateNum: (new Date).getTime(),
                    _item: k.iId
                };
                i.index(a, function (a) {
                    k.orderlists = a.data.orderLists, k.arr = [], k.brr = [];
                    for (var b = 0; b < k.orderlists.length; b++) {
                        var c = new Date(k.orderlists[b].startDate).getTime() - (new Date).getTime(),
                            d = new Date(k.orderlists[b].startDate).getTime() - new Date(k.orderlists[b].endDate).getTime();
                        9e5 >= c && c >= d ? k.arr.push(k.orderlists[b]) : c > 9e5 && k.brr.push(k.orderlists[b])
                    }
                    0 == k.arr.length ? k.orderFlag = !1 : k.orderFlag = !0
                }, function (a) {})
            },
            n = function () {
                h._member ? m() : k.orderFlag = !1
            };
        n()
    }
    angular.module("fieldApp").controller("WxInfoCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "Orderlist", "$location"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l) {
        var m, n = this;
        n.nickName = h.nickName, n.url = h.headimgurl;
        var o = function () {
            $("html,body").animate({
                scrollTop: "0px"
            }, 800)
        };
        o(), n.getOrderlist = function () {
            var a = {
                _member: h._member,
                _org: h._org
            };
            j.index(a, function (a) {
                n.orderlists = [];
                for (var b = (new Date).getTime(), c = 0; c < a.data.orderLists.length; c++) b <= new Date(a.data.orderLists[c].endDate).getTime() && (a.data.orderLists[c].cancelDate || n.orderlists.push(a.data.orderLists[c]))
            }, function (a) {})
        }, n.cancelbind = function () {
            var a = h._member;
            l.index({
                id: "today"
            }, function (b) {
                function c(a) {
                    for (var b = a || 32, c = "ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678=", d = c.length, e = "", f = 0; b > f; f++) e += c.charAt(Math.floor(Math.random() * d));
                    return e
                }
                m = b.data + "";
                var d = m.split(""),
                    e = c(d.length).split("");
                a += d.join("");
                for (var f = 0; f < d.length; f++) a = a.replace(d[f], e[f]);
                var g = {
                    nowStr: d.join(""),
                    randomStr: e.join(""),
                    sign: a,
                    _org: h._org
                };
                k.cancelBind({
                    id: h._member
                }, g, function (a) {
                    h._member = "", q()
                }, function (a) {
                    alert(a.data.data)
                })
            })
        };
        var p = function () {
                var a = {
                    controller: h.openid,
                    _org: h._org
                };
                k.wxGet(a, function (a) {
                    n.member = a.data.member, n.member.cards.length > 0 ? (n.price = n.member.cards[0].total + a.data.member.virtualAccount.total, "黄金会员" == n.member.cards[0].levelDes ? n.goldFlag = !0 : "白银会员" == n.member.cards[0].levelDes && (n.baiyinFlag = !0)) : n.price = a.data.member.virtualAccount.total, n.price = n.price.toFixed(2)
                }, function (a) {})
            },
            q = function () {
                if (!h._member) {
                    h.key = "me";
                    var a = "/wx/user/new";
                    return i.url(a)
                }
                n.getOrderlist(), p()
            };
        q()
    }
    angular.module("fieldApp").controller("WxMeCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "$location", "Orderlist", "Member", "Time"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l) {
        var m = this;
        m.chooseFlag = !0;
        var n = function () {
            $("html,body").animate({
                scrollTop: "0px"
            }, 800)
        };
        n();
        var o = $(window).height();
        $(document).height();
        window.onscroll = function () {
            o + $(document).scrollTop() >= $(document).height() && setTimeout(function () {
                m.itemsPerPage = m.itemsPerPage + 10, m.getRecord()
            }, 1e3)
        }, m.choose = {
            "border-bottom": "0.03rem solid #00a1ff",
            color: "#00a1ff"
        }, m.unchoose = {
            color: "#999"
        }, m.chooseRecord = function (a) {
            m.chooseFlag = a, a ? m.getRecord("cost") : m.getRecord("buy")
        }, m.turn = function () {
            var a = "/wx/buy/apply?state=me";
            return l.url(a)
        }, m.page = 1, m.itemsPerPage = 10, m.getRecord = function (a) {
            "cost" == a ? m.statuses = ["pay", "refund", "buyShopProduct", "refundShopProduct"] : m.statuses = ["buy", "cardRefund"];
            var b = {
                _member: h._member,
                _org: h._org,
                page: m.page,
                itemsPerPage: m.itemsPerPage
            };
            i.index(b, function (a) {
                m.records = a.data.records;
                for (var b = 0; b < m.records.length; b++) "buy" != m.records[b].status ? "bindCard" == m.records[b].status || "buyService" == m.records[b].status || "buySpe" == m.records[b].status || "buyTicket" == m.records[b].status || "pay" == m.records[b].status || "immediatePay" == m.records[b].status || "buyShopProduct" == m.records[b].status || "prepPay" == m.records[b].status ? (m.records[b].price = "- " + m.records[b].cost, m.records[b]._shopProduct ? m.records[b].des = m.records[b].description : m.records[b].ticket ? (m.records[b].des = m.records[b].description, m.records[b].price = "-" + m.records[b].cost) : m.records[b]._venue ? (m.records[b].des = m.records[b].description, m.records[b].price = "-" + m.records[b].cost) : m.records[b].des = "订" + m.records[b].fieldName + " " + m.records[b].showDate) : (m.records[b].price = "+ " + m.records[b].cost, m.records[b]._shopProduct ? m.records[b].des = m.records[b].description : m.records[b].des = m.records[b].description) : (m.records[b].price = "+" + m.records[b].cost, m.records[b].des = m.records[b].description)
            })
        }, m.money = function () {
            m.rule = "抱歉，暂不支持在线提现。请去场馆前台处退款", m.ruleFlag = !0
        };
        var p = function () {
                var a = {
                    controller: h.openid,
                    _org: h._org
                };
                j.wxGet(a, function (a) {
                    m.member = a.data.member, m.vp = a.data.member.virtualAccount.total, m.vp = m.vp.toFixed(2), 0 == m.vp ? m.dateFlag = !1 : (m.dateFlag = !0, m.date = a.data.member.virtualAccount.expires_in), m.member.cards.length > 0 ? (m.price = m.member.cards[0].total, m.price = m.price.toFixed(2)) : m.price = "0"
                }, function (a) {})
            },
            q = function () {
                k.index({
                    _org: h._org
                }, function (a) {
                    m.cards = a.data.cards
                }, function (a) {})
            },
            r = function () {
                m.getRecord("cost"), p(), q()
            };
        r()
    }
    angular.module("fieldApp").controller("WxMoneyCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "Record", "Member", "Card", "$location"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.chooseFlag = !0;
        var m = function () {
            $("html,body").animate({
                scrollTop: "0px"
            }, 800)
        };
        m(), l.choose = {
            "border-bottom": "0.03rem solid #00a1ff",
            color: "#00a1ff"
        }, l.unchoose = {
            color: "#999"
        }, l.chooseRecord = function (a) {
            l.chooseFlag = a, l.getOrderlist(a)
        }, l.query = function (a) {
            l._id = a._id, k.index({
                id: "today"
            }, function (b) {
                function c(a) {
                    for (var b = a || 32, c = "ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678=", d = c.length, e = "", f = 0; b > f; f++) e += c.charAt(Math.floor(Math.random() * d));
                    return e
                }
                var d = h._member,
                    e = b.data,
                    f = e + "",
                    g = c(f.length).split("");
                d += f, f = f.split("");
                for (var j = 0; j < f.length; j++) d = d.replace(f[j], g[j]);
                var k = {
                    _org: h._org,
                    state: "query",
                    randomStr: g.join(""),
                    sign: d
                };
                i.cancelOnce({
                    controller: l._id
                }, k, function (b) {
                    b.data.rule ? "before" == b.data.rule.status ? l.error = "开场前" + b.data.rule.hours + "小时内退款,需扣除" + 100 * b.data.rule.costPrecent + "%(退款" + a.cost * (1 - 1 * b.data.rule.costPrecent) + "元,退款到余额)" : l.error = "开场后" + b.data.rule.hours + "小时内退款,需扣除" + 100 * b.data.rule.costPrecent + "%(退款" + a.cost * (1 - 1 * b.data.rule.costPrecent) + "元,退款到余额)" : l.error = "可全额退款(" + a.cost + "元,退款到余额)", l.refundFlag = !0
                }, function (a) {
                    l.errorFlag = !0, l.err = a.data.data
                })
            })
        }, l.reFund = function () {
            k.index({
                id: "today"
            }, function (a) {
                function b(a) {
                    for (var b = a || 32, c = "ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678=", d = c.length, e = "", f = 0; b > f; f++) e += c.charAt(Math.floor(Math.random() * d));
                    return e
                }
                var c = h._member,
                    d = a.data,
                    e = d + "",
                    f = b(e.length).split("");
                c += e, e = e.split("");
                for (var g = 0; g < e.length; g++) c = c.replace(e[g], f[g]);
                var j = {
                    _org: h._org,
                    randomStr: f.join(""),
                    sign: c
                };
                i.cancelOnce({
                    controller: l._id
                }, j, function (a) {
                    l.getOrderlist(!0), l.refundFlag = !1
                }, function (a) {
                    l.errorFlag = !0, l.err = a.data.data
                })
            })
        }, l.getOrderlist = function (a) {
            if (a) var b = "asc";
            else var b = "desc";
            var c = {
                _member: h._member,
                _org: h._org,
                sort: "startDate",
                sortValue: b,
                state: "all"
            };
            i.index(c, function (b) {
                l.orderlists = [];
                var c = (new Date).getTime();
                if (a) {
                    for (var d = 0; d < b.data.orderLists.length; d++)
                        if (c <= new Date(b.data.orderLists[d].endDate).getTime()) {
                            switch (new Date(b.data.orderLists[d].startDate).getDay()) {
                            case 0:
                                var e = "周日";
                                break;
                            case 1:
                                var e = "周一";
                                break;
                            case 2:
                                var e = "周二";
                                break;
                            case 3:
                                var e = "周三";
                                break;
                            case 4:
                                var e = "周四";
                                break;
                            case 5:
                                var e = "周五";
                                break;
                            case 6:
                                var e = "周六"
                            }
                            if (b.data.orderLists[d].description) {
                                var f = /^\(.*\).*/;
                                f.test(b.data.orderLists[d].description) ? b.data.orderLists[d].orderFlag = !1 : b.data.orderLists[d].orderFlag = !0
                            } else b.data.orderLists[d].orderFlag = !0;
                            b.data.orderLists[d].week = e, l.orderlists.push(b.data.orderLists[d])
                        }
                } else
                    for (var d = 0; d < b.data.orderLists.length; d++)
                        if (c > new Date(b.data.orderLists[d].endDate).getTime()) {
                            switch (new Date(b.data.orderLists[d].startDate).getDay()) {
                            case 0:
                                var e = "周日";
                                break;
                            case 1:
                                var e = "周一";
                                break;
                            case 2:
                                var e = "周二";
                                break;
                            case 3:
                                var e = "周三";
                                break;
                            case 4:
                                var e = "周四";
                                break;
                            case 5:
                                var e = "周五";
                                break;
                            case 6:
                                var e = "周六"
                            }
                            if (b.data.orderLists[d].description) {
                                var f = /^\(.*\).*/;
                                f.test(b.data.orderLists[d].description) ? b.data.orderLists[d].orderFlag = !1 : b.data.orderLists[d].orderFlag = !0
                            } else b.data.orderLists[d].orderFlag = !0;
                            b.data.orderLists[d].week = e, l.orderlists.push(b.data.orderLists[d])
                        }
            }, function (a) {})
        };
        var n = function () {
                j.index({
                    _org: h._org
                }, function (a) {
                    l.rules = a.data.unsubscribeRules;
                    for (var b = 0; b < l.rules.length; b++) l.rules[b].order = b + 1, "after" == l.rules[b].status ? l.rules[b].des = "开场后" + l.rules[b].hours + "小时内退款，扣" + 100 * l.rules[b].costPrecent + "%" : l.rules[b].des = "开场前" + l.rules[b].hours + "小时内退款，扣" + 100 * l.rules[b].costPrecent + "%";
                    l.ru = "场地开场前5小时撤销不扣费，开场前5小时至2小时扣除20%，开场前2小时至开始扣50%，开场后扣除全额金额"
                }, function () {})
            },
            o = function () {
                n(), l.getOrderlist(!0)
            };
        o()
    }
    angular.module("fieldApp").controller("WxMyvenueCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "Orderlist", "Unsubrcriberules", "Time"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this,
            m = function () {
                $("html,body").animate({
                    scrollTop: "0px"
                }, 800)
            };
        m(), l.finish = function () {
            if (!l.code) return void alert("请先输入验证码");
            var a = {
                wxid: h.openid,
                _org: h._org,
                newTel: l.tel,
                code_old: h.oldcode,
                code_new: l.code
            };
            k.telUpdate(a, function (a) {
                alert("修改成功"), e.go("wx-me")
            }, function (a) {
                alert(a.data.data)
            })
        }, l.send = function () {
            if (!l.tel) return void alert("请先输入手机号");
            var a = {
                tel: l.tel,
                _org: h._org
            };
            j.create(a, function (a) {
                alert("验证码已发送")
            }, function (a) {
                alert(a.data.data)
            })
        }
    }
    angular.module("fieldApp").controller("WxNewtelCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "$location", "Smscode", "Member"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j) {
        var k = this,
            l = function () {
                $("html,body").animate({
                    scrollTop: "0px"
                }, 800)
            };
        l();
        var m = {
            tel: h.tel,
            _org: h._org
        };
        j.create(m, function (a) {
            alert("验证码已发送")
        }, function (a) {
            alert(a.data.data)
        }), k.check = function () {
            if (!k.code) return void alert("请先填写验证码");
            var a = {
                tel: h.tel,
                _org: h._org,
                code: k.code
            };
            j.check(a, function (a) {
                h.oldcode = k.code, e.go("wx-newtel")
            }, function (a) {
                alert(a.data.data)
            })
        }
    }
    angular.module("fieldApp").controller("WxOldtelCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "$location", "Smscode"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this,
            m = function () {
                $("html,body").animate({
                    scrollTop: "0px"
                }, 800)
            };
        m();
        var n = function () {
                var a = {
                    controller: h.openid,
                    _org: h._org
                };
                k.wxGet(a, function (a) {
                    if (l.member = a.data.member, h.tel = l.member.tel, l.member.cards.length > 0 ? l.price = l.member.cards[0].total : l.price = 0, l.price = l.price.toFixed(2), l.accTot = 0, _.each(l.member.specialAccount, function (a) {
                        "5a1e4774138f87e51c2e79e9" == a._venue ? l.accTot = a.total : l.accTot = 0
                    }), a.data.member.idCard) {
                        l.idCard = a.data.member.idCard;
                        var b = "";
                        b += l.idCard.substring(0, l.idCard.length - 6);
                        for (var c = 0; 6 > c; c++) b += "*";
                        l.idCard = b
                    } else l.idCard = "暂无";
                    new Date(a.data.member.virtualAccount.expires_in).getTime() < (new Date).getTime() && (a.data.member.virtualAccount.total = 0)
                }, function (a) {})
            },
            o = function () {
                if (!h._member) {
                    h.key = "me";
                    var a = "/wx/user/new";
                    return i.url(a)
                }
                n()
            };
        o()
    }
    angular.module("fieldApp").controller("WxPerCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "$location", "Orderlist", "Member"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l) {
        var m = this,
            n = function () {
                $("html,body").animate({
                    scrollTop: "0px"
                }, 800)
            };
        n(), m.submit = function () {
            if (!m.content) return void alert("请填写建议");
            var a = {
                _member: h._member,
                content: m.content
            };
            l.create(a, function (a) {
                alert("提交成功"), m.content = ""
            }, function (a) {
                alert(a.data.data)
            })
        };
        var o = function () {};
        o()
    }
    angular.module("fieldApp").controller("WxRemarkCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "$location", "Orderlist", "Member", "Suggest"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m) {
        var n, o = this;
        o.chuUi = {
            height: "3.69rem",
            padding: "0.46rem 0.2rem 0 0.2rem"
        }, o.vipUi = {
            height: "3.54rem",
            padding: "0.71rem 0.2rem 0 0.2rem"
        }, o.h1 = {
            "margin-top": "0.46rem"
        }, o.h2 = {
            "margin-top": "0.7rem"
        }, o.qrcode = new QRCode(document.getElementById("qrcode"), {
            width: 181,
            height: 181
        });
        var p = function () {
            $("html,body").animate({
                scrollTop: "0px"
            }, 800)
        };
        p();
        var q = function (a) {
            function b(a) {
                for (var b = a || 32, c = "ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678=", d = c.length, e = "", f = 0; b > f; f++) e += c.charAt(Math.floor(Math.random() * d));
                return e
            }
            for (var c = a, d = parseInt(n / 6e4).toString().split(""), e = b(d.length).split(""), f = 0; f < d.length; f++) a = a.replace(d[f], e[f]);
            return a += "|" + e.join(""), a += "|" + c
        };
        o.initCode = function () {
            k.index({
                id: "today"
            }, function (a) {
                n = a.data, o.qrcode.clear();
                var b = q(o.code);
                o.qrcode.makeCode(b)
            })
        };
        var p = function () {
            $("html,body").animate({
                scrollTop: "0px"
            }, 800)
        };
        p();
        var r = function () {
            var a = {
                controller: h.openid,
                _org: h._org
            };
            l.wxGet(a, function (a) {
                o.member = a.data.member, o.member.cards.length > 0 ? (o.price = o.member.cards[0].total, o.name = o.member.cards[0].levelDes) : (o.price = 0, o.name = "暂无"), o.levelDes = o.name, o.price = o.price.toFixed(2), new Date(a.data.member.virtualAccount.expires_in).getTime() < (new Date).getTime() && (a.data.member.virtualAccount.total = 0), o.fakePrice = a.data.member.virtualAccount.total.toFixed(2), o.accTot = 0, o.specialAccount = o.member.specialAccount, o.cards = [], m.get({
                    _member: o.member._id,
                    _org: h._org
                }, function (a) {
                    _.each(a.data.memberServices, function (a) {
                        if ("date" == a.service.serviceType)
                            if (a.endDate) {
                                var b = new Date(a.endDate).getTime(),
                                    c = (new Date).getTime();
                                o.leftTime = parseInt((b - c) / 24 / 36e5)
                            } else o.leftTime = a.service.value;
                        else o.leftTime = a.valueLeft;
                        var d = {
                            name: a.service.name,
                            value: o.leftTime,
                            type: a.service.serviceType,
                            id: a._id,
                            select: !1,
                            flag: !1
                        };
                        o.cards.push(d)
                    }), console.log(0 == o.price, o.cards.length), 0 == o.price && o.cards.length > 0 && (console.log("1"), o.changeAcc(!1))
                }, function (a) {})
            }, function (a) {})
        };
        o.changeAcc = function (a) {
            return a || 0 != o.cards.length ? void(!a && o.cards.length > 0 ? (o.code = o.cards[0].id, o.initCode(), o.select = a, o.name = o.cards[0].name, o.left = "剩余" + o.cards[0].value + ("time" == o.cards[0].type ? "次" : "天")) : (o.name = o.levelDes, o.code = h._member, o.initCode(), o.select = a)) : (o.errorFlag = !0, void(o.err = "暂无会员卡"))
        }, o.changeVip = function (a) {
            o.code = a.id, o.initCode(), o.name = a.name, o.left = "剩余" + a.value + ("time" == a.type ? "次" : "天"), o.toastFlag = !1
        };
        var s = function () {
            if (!h._member) {
                h.key = "me";
                var a = "/wx/user/new";
                return j.url(a)
            }
            o.select = !0, o.code = h._member, o.initCode(), o.timerHandler = i(function () {
                (new Date).getSeconds() <= 10 && o.initCode()
            }, 1e4), r()
        };
        s()
    }
    angular.module("fieldApp").controller("WxTwoCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "$interval", "$location", "Time", "Member", "MemberService"]
}(),
function () {
    "use strict";

    function WxChooseCtrl($scope, $http, Auth, User, $state, $stateParams, $filter, $rootScope, Field, Time, Orderlist, $location, Member, Card) {
        var self = this;
        $stateParams.vId && ($rootScope.vId = $stateParams.vId), $stateParams.iId && ($rootScope.iId = $stateParams.iId), $stateParams.limit ? ($rootScope.limit = $stateParams.limit, self.limit = $rootScope.limit) : $rootScope.limit ? self.limit = $rootScope.limit : self.limit = 99, $stateParams.iName && ($rootScope.iName = $stateParams.iName), self.iName = $rootScope.iName, $stateParams.vName && ($rootScope.vName = $stateParams.vName), self.vName = $rootScope.vName, $stateParams.flag && ($rootScope.flag = eval($stateParams.flag.toLowerCase())), self.flag = $rootScope.flag, $stateParams.orderDay ? ($rootScope.orderDay = $stateParams.orderDay, self.orderDay = $stateParams.orderDay) : self.orderDay = $rootScope.orderDay, $rootScope.discount && ($rootScope.discount2 = $rootScope.discount), $stateParams.discount && $stateParams.discount > 0 ? $rootScope.discount = $stateParams.discount : $stateParams.discount && $stateParams.discount < 0 ? $rootScope.discount = $rootScope.discount2 : $rootScope.discount || ($rootScope.discount = 1), self.priceWidth = (window.screen.width - document.getElementById("c").offsetWidth - document.getElementById("a").offsetWidth - 100) / 100 + "rem";
        var scrollTop = function () {
            $("html,body").animate({
                scrollTop: "0px"
            }, 800)
        };
        scrollTop();
        var dd = document.getElementById("hhh"),
            tab = document.getElementById("tab");
        dd.onscroll = function () {
            tab.scrollLeft = dd.scrollLeft
        }, self.choose = !1, self.orderlists = [], self.count = 0, 
        self.dis = 10 * $rootScope.discount, 1 == $rootScope.discount ? self.priceName = "预订价 " : self.priceName = "会员价", self.background = {
            "border-bottom": "#00a1ff 3px solid",
            color: "#00a1ff",
            "padding-top": "0.05rem",
            "font-style": "medium",
            "font-weight": "600"
        }, self.lineHeight = {
            "padding-top": "0.05rem",
            color: "#999"
        }, self.background1 = {
            background: "#fff",
            color: "#999"
        }, self.background2 = {
            background: "#00a1ff",
            color: "#fff"
        }, self.background3 = {
            background: "#e8e8e8",
            color: "#ccc"
        }, self.isUser = function () {
            if ($rootScope._member) {
                var a = "/wx/order/choose/sure";
                $rootScope._preporder = "", $rootScope.payKey = void 0
            } else {
                var a = "/wx/user";
                $rootScope.key = "choose"
            }
            return $location.url(a)
        }, self.chooseVenue = function (a, b) {
            if (!self.zuobi) {
                var c = new Date(self.date).getDay();
                if (self.ct = 0, 
                    self.ct = self.ct + (new Date(b.et).getTime() - new Date(b.st).getTime()) / 36e5, 
                    _.each(self.orderlists, function (a) {
                    var b = new Date(a.time.et).getTime() - new Date(a.time.st).getTime();
                    self.ct = self.ct + b / 36e5
                }), self.ct = self.dealNumber(self.ct), 
                    self.count = self.dealNumber(self.count), a.unit && b.isUsed && a.isOpen && !a.isChoose && self.flag) {
                    if (!a.flag && self.ct + self.count > self.limit) return self.err = "每人每天最多预定" + self.limit + "小时", void(self.errorFlag = !0);
                    self.orderlists = [], self.price = 0, a.flag = !a.flag;
                    for (var d = 0; d < self.times.length; d++)
                        for (var e = 0; e < self.times[d].fields.length; e++)
                            if (self.times[d].fields[e].flag) {
                                6 == c || 0 == c ? "hours" == self.times[d].priceArr[5].unit ? self.p = self.times[d].priceArr[5].price * self.times[d].continueHours : self.p = self.times[d].priceArr[5].price : "hours" == self.times[d].priceArr[0].unit ? self.p = self.times[d].priceArr[0].price * self.times[d].continueHours : self.p = self.times[d].priceArr[0].price,
                                 self.speFlag && ("hours" == self.times[d].priceArr[7].unit ? self.p = self.times[d].priceArr[7].price * self.times[d].continueHours : self.p = self.times[d].priceArr[7].price), 
                                 self.workFlag && ("hours" == self.times[d].priceArr[1].unit ? self.p = self.times[d].priceArr[1].price * self.times[d].continueHours : self.p = self.times[d].priceArr[1].price), 
                                 self.weekFlag && ("hours" == self.times[d].priceArr[5].unit ? self.p = self.times[d].priceArr[5].price * self.times[d].continueHours : self.p = self.times[d].priceArr[5].price), 
                                 self.price = self.price + self.p;
                                var f = {
                                    _field: self.times[d].fields[e]._id,
                                    _time: self.times[d]._id,
                                    fName: self.times[d].fields[e].name,
                                    showDate: self.times[d].showDate,
                                    price: self.p
                                };
                                self.orderlists.push(f), 
                                self.orderlists[self.orderlists.length - 1].field = self.times[d].fields[e], 
                                self.orderlists[self.orderlists.length - 1].time = self.times[d]
                            }
                    if (self.price <= self.fakePrice) {
                        self.dis = 10;
                        for (var d = 0; d < self.orderlists.length; d++) 0 != d && (self.orderlists[d].price = "+" + self.orderlists[d].price)
                    } else {
                        self.dis = 10 * $rootScope.discount, self.price = self.price * $rootScope.discount;
                        for (var d = 0; d < self.orderlists.length; d++) 0 != d ? self.orderlists[d].price = "+" + self.dealNumber(self.orderlists[d].price * $rootScope.discount) : self.orderlists[d].price = self.dealNumber(self.orderlists[d].price * $rootScope.discount)
                    }
                    self.price = self.dealNumber(self.price), $rootScope.orderlists = self.orderlists, $rootScope.price = self.price, self.price > self.realPrice && self.price > self.fakePrice ? self.pFlag = !0 : self.pFlag = !1
                }
            }
        }, self.dealNumber = function (a, b) {
            var c = a.toFixed(3);
            return b ? c.substring(0, c.lastIndexOf(".") + 3) : parseFloat(c.substring(0, c.lastIndexOf(".") + 3))
        }, self.turn = function () {
            var a = "/wx/buy/apply?name=&state=choose";
            return $location.url(a)
        };
        var getCard = function () {
                Card.index({
                    _org: $rootScope._org
                }, function (a) {
                    self.cards = a.data.cards
                }, function (a) {})
            },
            getOrderlist = function () {
                var a = {
                    _org: $rootScope._org,
                    _venue: $rootScope.vId,
                    orderDateNum: new Date(self.date).getTime(),
                    state: "all"
                };
                Orderlist.index(a, function (a) {
                    for (var b = 0; b < self.times.length; b++)
                        for (var c = 0; c < self.times[b].fields.length; c++)
                            for (var d = 0; d < a.data.orderLists.length; d++) a.data.orderLists[d].cancelDate || a.data.orderLists[d]._field != self.times[b].fields[c]._id || (self.times[b].startDateHours >= new Date(a.data.orderLists[d].startDate).getHours() && self.times[b].startDateHours < new Date(a.data.orderLists[d].endDate).getHours() && (self.times[b].fields[c].isChoose = !0), self.times[b].endDateHours > new Date(a.data.orderLists[d].startDate).getHours() && self.times[b].endDateHours <= new Date(a.data.orderLists[d].endDate).getHours() && (self.times[b].fields[c].isChoose = !0));
                    getOrg()
                }, function (a) {})
            },
            getUserOrderlist = function () {
                var a = {
                    _org: $rootScope._org,
                    _member: $rootScope._member,
                    _venue: $rootScope.vId,
                    _item: $rootScope.iId,
                    orderDateNum: new Date(self.date).getTime()
                };
                Orderlist.index(a, function (a) {
                    self.count = 0, _.each(a.data.orderLists, function (a) {
                        var b = new Date(a.endDate).getTime() - new Date(a.startDate).getTime();
                        a.cancelDate || (self.count = self.count + b / 36e5)
                    })
                }, function (a) {})
            },
            getField = function () {
                var a = {
                    _org: $rootScope._org,
                    _venue: $rootScope.vId,
                    _item: $rootScope.iId,
                    sortValue: "asc"
                };
                Field.index(a, function (a) {
                    self.fields = a.data.fields;
                    for (var b = 0; b < self.fields.length; b++) {.12 * self.fields[b].name.length <= .48 ? self.fields[b].width = "0.48rem" : self.fields[b].width = .15 * self.fields[b].name.length + "rem";
                        var c = {
                            width: self.fields[b].width
                        };
                        self.fields[b].w = c
                    }
                    getTime()
                }, function (a) {})
            },
            getTime = function () {
                var a = new Date(self.date).getDay(),
                    b = {
                        _org: $rootScope._org,
                        _venue: $rootScope.vId,
                        _item: $rootScope.iId,
                        sortBy: "startDate",
                        orderDate: new Date(self.date).getTime()
                    };
                Time.index(b, function (b) {
                    if (self.times = [], new Date(self.date).getDate() == (new Date).getDate())
                        for (var c = 0; c < b.data.times.length; c++) {
                            var d = (new Date).getHours();
                            (b.data.times[c].startDateHours > d || b.data.times[c].startDateHours == d && (new Date).getMinutes() <= 15) && self.times.push(b.data.times[c])
                        } else self.times = b.data.times;
                    if (self.trr = [], self.times.length > 0) {
                        var e = self.times[0].startDateHours;
                        self.times[0].startDateMins < 10 ? self.mintime = "0" + self.times[0].startDateMins : self.mintime = self.times[0].startDateMins;
                        var f = e;
                        for (10 > e && (e = "0" + e), self.trr.push(e), e = f; e < self.times[self.times.length - 1].endDate;) {
                            e += 1;
                            var f = e;
                            10 > e && (e = "0" + e), self.trr.push(e), e = f
                        }
                    }
                    for (var g = [], c = 0; c < self.times.length; c++)
                        if (g.push(self.times[c]), self.times.length > 1 && c < self.times.length - 1 && self.times[c].endDate != self.times[c + 1].startDate) {
                            g[g.length - 1].bottomFlag = !0;
                            var h = {
                                continueHours: self.times[c + 1].startDate - self.times[c].endDate,
                                priceArr: self.times[c].priceArr,
                                emptyFlag: !0
                            };
                            g.push(h)
                        }
                    self.times = g;
                    for (var c = 0; c < self.times.length; c++) {
                        var i = new Date;
                        i.setHours(self.times[c].startDateHours), i.setMinutes(self.times[c].startDateMins);
                        var j = new Date;
                        j.setHours(self.times[c].endDateHours), j.setMinutes(self.times[c].endDateMins), self.times[c].st = i, self.times[c].et = j, self.times[c].fields = [];
                        var k = self.date.getTime();
                        self.times[c].close_startDate ? self.times[c].close_endDate ? k <= new Date(self.times[c].close_startDate).getTime() || k >= new Date(self.times[c].close_endDate).getTime() ? self.times[c].isUsed = !0 : self.times[c].isUsed = !1 : k < new Date(self.times[c].close_startDate).getTime() ? self.times[c].isUsed = !0 : self.times[c].isUsed = !1 : self.times[c].isUsed = !0;
                        for (var l = 0; l < self.fields.length; l++) {
                            if (self.fields[l].closeOpen_startDate ? self.fields[l].closeOpen_endDate ? k < new Date(self.fields[l].closeOpen_startDate).getTime() || k > new Date(self.fields[l].closeOpen_endDate).getTime() ? self.fields[l].isOpen = !0 : self.fields[l].isOpen = !1 : k < new Date(self.fields[l].closeOpen_startDate).getTime() ? self.fields[l].isOpen = !0 : self.fields[l].isOpen = !1 : self.fields[l].isOpen = !0, 6 == a || 0 == a || b.data.speDay && "6" == b.data.speDay.weekAs) {
                                var m = self.times[c].priceArr[5].unit;
                                if (self.weekFlag = !0, self.times[c].priceArr[5].unit)
                                    if ("hours" == self.times[c].priceArr[5].unit) var n = self.times[c].priceArr[5].price * self.times[c].continueHours;
                                    else var n = self.times[c].priceArr[5].price;
                                else var n = 0
                            } else {
                                var m = self.times[c].priceArr[0].unit;
                                if (self.weekFlag = !1, self.times[c].priceArr[0].unit)
                                    if ("hours" == self.times[c].priceArr[0].unit) var n = self.times[c].priceArr[0].price * self.times[c].continueHours;
                                    else var n = self.times[c].priceArr[0].price;
                                else var n = 0
                            } if (b.data.speDay && "7" == b.data.speDay.weekAs) {
                                var m = self.times[c].priceArr[7].unit;
                                if (self.times[c].priceArr[7].unit)
                                    if ("hours" == self.times[c].priceArr[7].unit) var n = self.times[c].priceArr[7].price * self.times[c].continueHours;
                                    else var n = self.times[c].priceArr[7].price;
                                else var n = 0;
                                self.speFlag = !0, self.weekFlag = !1
                            } else self.speFlag = !1; if (b.data.speDay && "1" == b.data.speDay.weekAs) {
                                var m = self.times[c].priceArr[1].unit;
                                if (self.times[c].priceArr[1].unit)
                                    if ("hours" == self.times[c].priceArr[1].unit) var n = self.times[c].priceArr[1].price * self.times[c].continueHours;
                                    else var n = self.times[c].priceArr[1].price;
                                else var n = 0;
                                self.workFlag = !0, self.weekFlag = !1
                            } else self.workFlag = !1;
                            var o = parseInt(self.times[c].continueHours / 1);
                            0 == o && (o = 1);
                            var p = .4 * self.times[c].continueHours + .015 * (o - 1),
                                q = {
                                    height: p + "rem",
                                    "line-height": p - .03 + "rem",
                                    width: self.fields[l].width
                                },
                                r = {
                                    order: l + 1,
                                    or: c + 1,
                                    flag: !1,
                                    isOpen: self.fields[l].isOpen,
                                    _id: self.fields[l]._id,
                                    name: self.fields[l].name,
                                    unit: m,
                                    isChoose: !1,
                                    p: n,
                                    height: q
                                };
                            self.times[c].fields.push(r)
                        }
                    }
                    getOrderlist()
                }, function (a) {})
            },
            getOrg = function () {
                Time.index({
                    id: "today"
                }, function (a) {
                    var b = ($rootScope._member, a.data);
                    User.getInfo({
                        id: $rootScope._org
                    }, {}, function (a) {
                        if (self.ooFlag) {
                            var c = new Date(b).getHours(),
                                d = new Date(b).getMinutes(),
                                e = new Date(a.data.user.openTime).getHours(),
                                f = new Date(a.data.user.openTime).getMinutes();
                            c > e || c == e && d >= f ? self.openTimeFlag = !0 : self.openTimeFlag = !1
                        } else self.openTimeFlag = !0;
                        self.zuobi = !1
                    }, function (a) {})
                })
            },
            getMember = function () {
                var a = {
                    controller: $rootScope.openid,
                    _org: $rootScope._org
                };
                Member.wxGet(a, function (a) {
                    self.member = a.data.member, self.member.cards.length > 0 ? (self.realPrice = self.member.cards[0].total, self.realPrice = self.realPrice.toFixed(0)) : self.realPrice = 0, new Date(a.data.member.virtualAccount.expires_in).getTime() < (new Date).getTime() && (a.data.member.virtualAccount.total = 0), a.data.member.virtualAccount ? (self.fakePrice = a.data.member.virtualAccount.total, self.fakePrice = self.fakePrice.toFixed(0)) : self.fakePrice = 0, 0 == self.fakePrice ? self.fakeFlag = !1 : self.fakeFlag = !0
                }, function (a) {})
            };
        self.getWeek2 = function (a) {
            $rootScope.num = a;
            for (var b = [], c = (new Date).getDay(), d = 0; 7 > d; d++) {
                switch (d) {
                case 0:
                    if (0 == c) var e = "日";
                    var f = "日";
                    break;
                case 1:
                    if (1 == c) var e = "一";
                    var f = "一";
                    break;
                case 2:
                    var f = "二";
                    if (2 == c) var e = "二";
                    break;
                case 3:
                    var f = "三";
                    if (3 == c) var e = "三";
                    break;
                case 4:
                    var f = "四";
                    if (4 == c) var e = "四";
                    break;
                case 5:
                    var f = "五";
                    if (5 == c) var e = "五";
                    break;
                case 6:
                    var f = "六";
                    if (6 == c) var e = "六"
                }
                var g = {
                    num: d,
                    week: f
                };
                b.push(g)
            }
            self.showWeeks = [];
            for (var d = 0; 7 > d; d++) {
                if (0 == d) b[c].week = "今天", b[c].date = new Date, self.date = b[c].date, self.week = b[c].week, $rootScope.date = self.date, $rootScope.week = self.week, a == c ? b[c].select = !0 : b[c].select = !1;
                else {
                    switch (b[c].week) {
                    case "日":
                        b[c].week = "周日";
                        break;
                    case "一":
                        b[c].week = "周一";
                        break;
                    case "二":
                        b[c].week = "周二";
                        break;
                    case "三":
                        b[c].week = "周三";
                        break;
                    case "四":
                        b[c].week = "周四";
                        break;
                    case "五":
                        b[c].week = "周五";
                        break;
                    case "六":
                        b[c].week = "周六"
                    }
                    b[c].date = new Date((new Date).getTime() + 24 * d * 36e5), a == c ? (b[c].select = !0, self.week = b[c].week, self.date = b[c].date, $rootScope.date = self.date, $rootScope.week = self.week) : b[c].select = !1
                }
                b[c].cFlag = !0, self.showWeeks.push(b[c]), 6 == c ? c = 0 : c += 1
            }
            var h = {
                num: 7,
                date: new Date((new Date).getTime() + 6048e5),
                week: "周" + e,
                select: !1
            };
            self.showWeeks.push(h), 7 == a && (self.showWeeks[7].select = !0, self.week = self.showWeeks[7].week, self.date = self.showWeeks[7].date, $rootScope.date = self.date, $rootScope.week = self.week);
            var i = (new Date).getDay();
            if (7 == $rootScope.num) var j = 7;
            else if ($rootScope.num - i >= 0) var j = $rootScope.num - i;
            else var j = $rootScope.num + 7 - i;
            j <= self.orderDay ? self.odFlag = !0 : self.odFlag = !1, j == self.orderDay ? self.ooFlag = !0 : self.ooFlag = !1;
            var i = new Date;
            i.setHours(0), j = i.getTime() + 24 * j * 36e5, $stateParams.sd ? $stateParams.ed ? j < new Date($stateParams.sd).getTime() || j > new Date($stateParams.ed).getTime() ? self.isOpen = !0 : self.isOpen = !1 : j < new Date($stateParams.sd).getTime() ? self.isOpen = !0 : self.isOpen = !1 : self.isOpen = !0, getField(), getUserOrderlist(), getMember(), getCard(), self.orderlists = [], $rootScope.orderlists = [], console.log(self.week)
        }, self.getWeek = function (a) {
            self.zuobi = !0, 7 == a ? Time.index({
                id: "todayspe"
            }, function (b) {
                var c = ($rootScope._member, b.data);
                User.getInfo({
                    id: $rootScope._org
                }, {}, function (b) {
                    var d = new Date(c).getHours(),
                        e = new Date(c).getMinutes(),
                        f = new Date(c).getSeconds(),
                        g = new Date(b.data.user.openTime).getHours(),
                        h = new Date(b.data.user.openTime).getMinutes();
                    d > g || d == g && e > h || d == g && e == h && f > 6 ? self.getWeek2(a) : (self.err = "未到放场时间", self.errorFlag = !0)
                }, function (a) {})
            }) : self.getWeek2(a)
        };
        var init = function () {
            $rootScope.num ? self.getWeek($rootScope.num) : self.getWeek((new Date).getDay())
        };
        init()
    }
    angular.module("fieldApp").controller("WxChooseCtrl", WxChooseCtrl), WxChooseCtrl.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "Field", "Time", "Orderlist", "$location", "Member", "Card"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l) {
        var m = this;
        m.w = h.w;
        var n = function () {
            $("html,body").animate({
                scrollTop: "0px"
            }, 800)
        };
        n();
        var o = function () {};
        o()
    }
    angular.module("fieldApp").controller("WxFinishCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "Field", "Time", "Orderlist", "$location"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k) {
        var l = this;
        l.background = {
            background: "#fff",
            color: "#00a1ff",
            "padding-top": "0.05rem",
            "box-shadow": "0 -1px 1px #ddd"
        }, l.lineHeight = {
            "padding-top": "0.05rem",
            color: "#999"
        };
        var m = function () {
            d.getInfo({
                id: h._org
            }, function (a) {
                var b = (new Date).getHours(),
                    c = (new Date).getMinutes(),
                    d = new Date(a.data.user.openTime).getHours(),
                    e = new Date(a.data.user.openTime).getMinutes();
                b > d || b == d && c >= e ? l.openTimeFlag = !0 : l.openTimeFlag = !1
            }, function (a) {})
        };
        l.getVenue = function () {
            i.index({
                _org: h._org
            }, function (a) {
                l.venues = a.data.venues;
                for (var b = (new Date).getTime(), c = 0; c < l.venues.length; c++) l.venues[c].closeOpen_endDate ? b < new Date(l.venues[c].closeOpen_startDate).getTime() || b > new Date(l.venues[c].closeOpen_endDate).getTime() ? l.venues[c].isOpen = !0 : l.venues[c].isOpen = !1 : l.venues[c].closeOpen_startDate && !l.venues[c].closeOpen_endDate ? b < new Date(l.venues[c].closeOpen_startDate).getTime() ? l.venues[c].isOpen = !0 : l.venues[c].isOpen = !1 : l.venues[c].isOpen = !0,
                    _.each(l.venues[c].items, function (a) {
                        a.orderFlag = !0
                    }), _.each(l.venues[c].closeItems, function (a) {
                        _.each(l.venues[c].items, function (b) {
                            a._item == b._id && (b.orderFlag = !a.closeOpen, b.remarkFlag = a.showRemark)
                        })
                    })
            }, function (a) {})
        }, l.getWeek = function (a) {
            h.num = a;
            for (var b = [], c = 0; 7 > c; c++) {
                switch (c) {
                case 0:
                    var d = "日";
                    break;
                case 1:
                    var d = "一";
                    break;
                case 2:
                    var d = "二";
                    break;
                case 3:
                    var d = "三";
                    break;
                case 4:
                    var d = "四";
                    break;
                case 5:
                    var d = "五";
                    break;
                case 6:
                    var d = "六"
                }
                var e = {
                    num: c,
                    week: d
                };
                b.push(e)
            }
            Time.index({
                id: "today"
            }, function (c) {
                var d = (h._member, c.data),
                    e = new Date(d).getDay();
                l.showWeeks = [];
                for (var f = 0; 4 > f; f++) {
                    if (0 == f) b[e].week = "今天", b[e].date = new Date, l.date = b[e].date, l.week = b[e].week, a == e ? b[e].select = !0 : b[e].select = !1;
                    else {
                        switch (b[e].week) {
                        case "日":
                            b[e].week = "周日";
                            break;
                        case "一":
                            b[e].week = "周一";
                            break;
                        case "二":
                            b[e].week = "周二";
                            break;
                        case "三":
                            b[e].week = "周三";
                            break;
                        case "四":
                            b[e].week = "周四";
                            break;
                        case "五":
                            b[e].week = "周五";
                            break;
                        case "六":
                            b[e].week = "周六"
                        }
                        b[e].date = new Date((new Date).getTime() + 24 * f * 36e5), a == e ? (b[e].select = !0, l.week = b[e].week, l.date = b[e].date) : b[e].select = !1
                    }
                    l.showWeeks.push(b[e]), 6 == e ? e = 0 : e += 1
                }
                l.getVenue(a)
            })
        };
        var n = function () {
            if (!h._member) {
                h.key = "me";
                var a = "/wx/user/new";
                return j.url(a)
            }
            h.limit = "", m(), l.getVenue();
            var b = {
                startDate: (new Date).getTime(),
                endDate: (new Date).getTime(),
                _venue: "5a1e4774138f87e51c2e79e9"
            };
            k.count(b, function (a) {
                l.data = a.data
            }, function (a) {})
        };
        n()
    }
    angular.module("fieldApp").controller("WxOrderCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "Venue", "$location", "Voucher"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
        var q, r = this;
        r.price = h.price, r.orderlists = h.orderlists, r.orderlists[r.orderlists.length - 1].flag = !0, r.iName = h.iName, r.vName = h.vName, r.date = h.date, r.week = h.week, r.codeNum = 0, h._preporder = null;
        var s = function () {
            $("html,body").animate({
                scrollTop: "0px"
            }, 800)
        };
        s(), r.wxPay = function () {
            r.ruleFlag = !1;
            var a = "http://chaxun.1616.net/s.php?type=ip&output=json&callback=?&_=" + Math.random();
            $.getJSON(a, function (a) {
                var b = {
                    _org: h._org,
                    _member: h._member,
                    orderDate: new Date(r.date).getTime(),
                    orderArr: r.orderlists,
                    spbill_create_ip: a.Ip,
                    payment: "wx",
                    wxid: h.openid
                };
                h._preporder ? r.p() : j.createOrders(b, function (a) {
                    r._preporder = a.data.preporder._id, h._preporder = r._preporder, r.p()
                }, function (a) {
                    alert(a.data.data)
                })
            })
        }, r.p = function () {
            var a = {
                _preporder: h._preporder
            };
            m.getPayParams(a, function (a) {
                function b() {
                    if (h.payKey) var b = h.payKey;
                    else var b = {
                        appId: a.data.appId,
                        timeStamp: a.data.timeStamp,
                        nonceStr: a.data.nonceStr,
                        "package": a.data["package"],
                        signType: a.data.signType,
                        paySign: a.data.paySign
                    };
                    h.payKey = b, WeixinJSBridge.invoke("getBrandWCPayRequest", b, function (a) {
                        if ("get_brand_wcpay_request:ok" == a.err_msg) {
                            var b = [];
                            b.push(f.classId);
                            var c = {
                                _preporder: r._preporder
                            };
                            j.checkOrders(c, function (a) {}, function (a) {}), h.payKey = void 0, h._preporder = "", r.w = "";
                            for (var d = new Date(r.date).getMonth() + 1 + "-" + new Date(r.date).getDate(), e = 0; e < r.orderlists.length; e++) 0 == e ? r.w = d + r.iName + r.orderlists[e].showDate : r.w = " " + d + r.iName + r.orderlists[e].showDate;
                            h.w = r.w, h.num = "";
                            var g = "/wx/order/finish";
                            return o.url(g)
                        }
                    })
                }
                "undefined" == typeof WeixinJSBridge ? document.addEventListener ? document.addEventListener("WeixinJSBridgeReady", b, !1) : document.attachEvent && (document.attachEvent("WeixinJSBridgeReady", b), document.attachEvent("onWeixinJSBridgeReady", b)) : b()
            })
        };
        r.pay = function () {
            r.promptWARN = !0, n.index({
                id: "today"
            }, function (a) {
                function b(a) {
                    for (var b = a || 32, c = "ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678=", d = c.length, e = "", f = 0;
                     b > f; f++) e += c.charAt(Math.floor(Math.random() * d));
                    return e
                }
                var c = h._member;
                q = a.data;
                var d = q + "",
                    e = b(d.length).split("");
                c += d, d = d.split("");
                for (var f = 0; f < d.length; f++) c = c.replace(d[f], e[f]);
                var g = {
                    _org: h._org,
                    _member: h._member,
                    openid: h.openid,
                    orderDate: new Date(r.date).getTime(),
                    orderArr: r.orderlists,
                    payment: "member",
                    nowStr: parseInt(d.join("")),
                    randomStr: e.join(""),
                    sign: c
                };
                j.createOrders(g, function (a) {
                    r.ruleFlag = !1, r.w = "";
                    for (var b = new Date(r.date).getMonth() + "-" + new Date(r.date).getDate(), c = 0; c < r.orderlists.length; c++) 0 == c ? r.w = " " + b + r.iName + r.orderlists[c].showDate : r.w = r.w + " " + b + r.iName + r.orderlists[c].showDate;
                    r.promptWARN = !1, h.w = r.w, h.num = "";
                    var d = "/wx/order/finish";
                    return o.url(d)
                }, function (a) {
                    return "验签失败" == a.data.data && 0 == r.codeNum ? (r.codeNum = 1, void r.pay()) : "验签失败" == a.data.data && 1 == r.codeNum ? (r.promptWARN = !1, r.ruleFlag = !1, r.errorFlag = !0, r.err = "验签失败，请再次提交", void(0 == r.codeNum)) : (r.promptWARN = !1, r.ruleFlag = !1, r.errorFlag = !0, void(r.err = a.data.data))
                })
            })
        }, r.turn = function (a) {
            if (a.realPrice <= 200) {
                var b = "/wx/buy/apply?name=" + a.name + "&price=" + a.realPrice + "&_card=" + a._id + "&state=order";
                return o.url(b)
            }
            r.warnFlag = !0
        };
        var t = function () {
                p.index({
                    _org: h._org
                }, function (a) {
                    r.cards = a.data.cards
                }, function (a) {})
            },
            u = function () {
                k.index({
                    _org: h._org
                }, function (a) {
                    r.rule = a.data.unsubscribeRules;
                    for (var b = 0, c = 0; c < r.rule.length; c++) "before" == r.rule[c].status && b < r.rule[c].hours && (b = r.rule[c].hours);
                    0 == b ? r.rw = "退场不扣费" : r.rw = "开场" + b + "小时前退场不扣费"
                }, function () {})
            },
            v = function () {
                d.getInfo({
                    id: h._org
                }, {}, function (a) {
                    r.rule = a.data.user.description, r.rules = r.rule.split("\n")
                }, function (a) {})
            },
            w = function () {
                var a = {
                    controller: h.openid,
                    _org: h._org
                };
                i.wxGet(a, function (a) {
                    r.member = a.data.member, r.member.cards.length > 0 ? (r.total = r.member.cards[0].total + a.data.member.virtualAccount.total, r.newWord = r.total + "元") : (r.total = 0, r.newWord = "先购买储值卡，才可预订"), a.data.member.virtualAccount.total >= r.price ? (r.pFlag = !0, r.pw = "将从虚拟账户扣除" + r.price + "元") : r.total >= r.price ? (r.pFlag = !0, r.pw = "将从现金账户扣除" + r.price + "元") : (r.pFlag = !1, r.pw = "单个账户余额不足，请选择购卡充值")
                }, function (a) {})
            },
            x = function () {
                u(), w(), v(), t(), r.t2 = new Date, r.t2.setMinutes(5), r.t2.setSeconds(0), r.t1 = new Date(r.t2);
                var a, b = 300;
                a = l(function () {
                    0 >= b ? (l.cancel(a), b = 299, r.payFlag = !0, r.canClick = !1) : (r.t2 = new Date(new Date(r.t2).getTime() - 1e3), r.t1 = r.t2, r.payFlag = !1, b--, r.canClick = !0)
                }, 1e3)
            };
        x()
    }
    angular.module("fieldApp").controller("WxSureCtrl", a), a.$inject = ["$scope", "$http", "Auth", "User", "$state", "$stateParams", "$filter", "$rootScope", "Member", "Orderlist", "Unsubrcriberules", "$interval", "Wxticket", "Time", "$location", "Card"]
}(),
function () {
    "use strict";

    function a(a) {
        a.state("wx-user", {
            params: {
                value: "login"
            },
            url: "/wx/user",
            templateUrl: "app/wx/login/wx-user.html",
            controller: "WxUserCtrl",
            controllerAs: "wxUserCtrl"
        }).state("wx-rule", {
            params: {
                value: "buy"
            },
            url: "/wx/rule",
            templateUrl: "app/wx/buy/wx-rule.html",
            controller: "WxRuleCtrl",
            controllerAs: "wxRuleCtrl"
        }).state("wx-infoo", {
            params: {
                value: "login"
            },
            url: "/wx/user/infoo?state",
            templateUrl: "app/wx/login/wx-infoo.html",
            controller: "WxInfooCtrl",
            controllerAs: "wxInfooCtrl"
        }).state("wx-old", {
            params: {
                value: "login"
            },
            url: "/wx/user/old",
            templateUrl: "app/wx/login/wx-old.html",
            controller: "WxOldCtrl",
            controllerAs: "wxOldCtrl"
        }).state("wx-new", {
            params: {
                value: "login"
            },
            url: "/wx/user/new",
            templateUrl: "app/wx/login/wx-new.html",
            controller: "WxNewCtrl",
            controllerAs: "wxNewCtrl"
        }).state("wx-code", {
            params: {
                value: "login"
            },
            url: "/wx/user/code?state",
            templateUrl: "app/wx/login/wx-code.html",
            controller: "WxCodeCtrl",
            controllerAs: "wxCodeCtrl"
        }).state("wx-message", {
            params: {
                value: "login"
            },
            url: "/wx/user/message?state",
            templateUrl: "app/wx/login/wx-message.html",
            controller: "WxMessageCtrl",
            controllerAs: "wxMessageCtrl"
        }).state("wx-account", {
            params: {
                value: "login"
            },
            url: "/wx/user/account?state&&order",
            templateUrl: "app/wx/login/wx-account.html",
            controller: "WxAccountCtrl",
            controllerAs: "wxAccountCtrl"
        }).state("wx-submit", {
            params: {
                value: "login"
            },
            url: "/wx/user/submit?state",
            templateUrl: "app/wx/login/wx-submit.html",
            controller: "WxSubmitCtrl",
            controllerAs: "wxSubmitCtrl"
        }).state("wx-create", {
            params: {
                value: "login"
            },
            url: "/wx/user/create?state",
            templateUrl: "app/wx/login/wx-create.html",
            controller: "WxCreateCtrl",
            controllerAs: "wxCreateCtrl"
        }).state("wx-buy", {
            params: {
                value: "buy"
            },
            url: "/wx/buy?state",
            templateUrl: "app/wx/buy/wx-buy.html",
            controller: "WxBuyCtrl",
            controllerAs: "wxBuyCtrl"
        }).state("wx-apply", {
            params: {
                value: "buy"
            },
            url: "/wx/buy/apply?name&price&_card&state&discount",
            templateUrl: "app/wx/buy/wx-apply.html",
            controller: "WxApplyCtrl",
            controllerAs: "wxApplyCtrl"
        }).state("wx-confirm", {
            params: {
                value: "buy"
            },
            url: "/wx/buy/confirm",
            templateUrl: "app/wx/buy/wx-confirm.html",
            controller: "WxConfirmCtrl",
            controllerAs: "wxConfirmCtrl"
        }).state("wx-me", {
            params: {
                value: "me"
            },
            url: "/wx/me",
            templateUrl: "app/wx/my/wx-me.html",
            controller: "WxMeCtrl",
            controllerAs: "wxMeCtrl"
        }).state("wx-money", {
            params: {
                value: "me"
            },
            url: "/wx/me/money",
            templateUrl: "app/wx/my/wx-money.html",
            controller: "WxMoneyCtrl",
            controllerAs: "wxMoneyCtrl"
        }).state("wx-per", {
            params: {
                value: "me"
            },
            url: "/wx/me/per",
            templateUrl: "app/wx/my/wx-per.html",
            controller: "WxPerCtrl",
            controllerAs: "wxPerCtrl"
        }).state("wx-oldtel", {
            params: {
                value: "me"
            },
            url: "/wx/me/oldtel",
            templateUrl: "app/wx/my/wx-oldtel.html",
            controller: "WxOldtelCtrl",
            controllerAs: "wxOldtelCtrl"
        }).state("wx-newtel", {
            params: {
                value: "me"
            },
            url: "/wx/me/newtel",
            templateUrl: "app/wx/my/wx-newtel.html",
            controller: "WxNewtelCtrl",
            controllerAs: "wxNewtelCtrl"
        }).state("wx-remark", {
            params: {
                value: "me"
            },
            url: "/wx/me/remark",
            templateUrl: "app/wx/my/wx-remark.html",
            controller: "WxRemarkCtrl",
            controllerAs: "wxRemarkCtrl"
        }).state("wx-myvenue", {
            params: {
                value: "me"
            },
            url: "/wx/me/myvenue",
            templateUrl: "app/wx/my/wx-myvenue.html",
            controller: "WxMyvenueCtrl",
            controllerAs: "wxMyvenueCtrl"
        }).state("wx-info", {
            params: {
                value: "me"
            },
            url: "/wx/me/info?_venue&_item",
            templateUrl: "app/wx/my/wx-info.html",
            controller: "WxInfoCtrl",
            controllerAs: "wxInfoCtrl"
        }).state("wx-two", {
            params: {
                value: "me"
            },
            url: "/wx/me/two",
            templateUrl: "app/wx/my/wx-two.html",
            controller: "WxTwoCtrl",
            controllerAs: "wxTwoCtrl"
        }).state("wx-choose", {
            params: {
                value: "order"
            },
            url: "/wx/order/choose?vId&&iId&&iName&&vName&&sd&ed&flag&orderDay&discount&limit",
            templateUrl: "app/wx/order/wx-choose.html",
            controller: "WxChooseCtrl",
            controllerAs: "wxChooseCtrl"
        }).state("wx-finish", {
            params: {
                value: "order"
            },
            url: "/wx/order/finish",
            templateUrl: "app/wx/order/wx-finish.html",
            controller: "WxFinishCtrl",
            controllerAs: "wxFinishCtrl"
        }).state("wx-sure", {
            params: {
                value: "order"
            },
            url: "/wx/order/choose/sure",
            templateUrl: "app/wx/order/wx-sure.html",
            controller: "WxSureCtrl",
            controllerAs: "wxSureCtrl"
        }).state("wx-check", {
            params: {
                value: "check"
            },
            url: "/wx/check",
            templateUrl: "app/wx/check/wx-check.html",
            controller: "WxCheckCtrl",
            controllerAs: "wxCheckCtrl"
        }).state("wx-order", {
            params: {
                value: "order"
            },
            url: "/wx/order",
            templateUrl: "app/wx/order/wx-order.html",
            controller: "WxOrderCtrl",
            controllerAs: "wxOrderCtrl"
        }).state("wx-authorized", {
            params: {
                value: "home"
            },
            url: "/authorized?code&state&_org",
            templateUrl: "app/wx/authorized.html",
            controller: "AuthorizedCtrl",
            controllerAs: "authorizedCtrl"
        })
    }
    angular.module("fieldApp").config(a), a.$inject = ["$stateProvider"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/accessctr/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            show: {
                method: "POST",
                params: {
                    id: "show"
                }
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            "delete": {
                method: "DELETE",
                params: {
                    id: "id"
                }
            },
            buy: {
                method: "POST",
                params: {
                    id: "buy"
                }
            },
            cancel: {
                method: "POST",
                params: {
                    id: "cancel"
                }
            },
            index: {
                method: "GET",
                params: {
                    id: "card"
                }
            }
        })
    }
    angular.module("fieldApp").factory("Accessctr", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/alipay/:id/:controller/:way", {
            id: "@_id"
        }, {
            createOrders: {
                method: "POST",
                params: {
                    id: "order"
                }
            },
            payProduct: {
                method: "POST",
                params: {
                    id: "buyProducts",
                    controller: "alipay"
                }
            },
            pay: {
                method: "POST",
                params: {
                    id: "card"
                }
            },
            bail: {
                method: "POST",
                params: {
                    id: "bail"
                }
            },
            refund: {
                method: "POST",
                params: {
                    id: "refund"
                }
            },
            aliService: {
                method: "POST",
                params: {
                    id: "buyservice"
                }
            },
            payTicket: {
                method: "POST",
                params: {
                    id: "buyticket"
                }
            },
            randomAlipay: {
                method: "POST",
                params: {
                    id: "deposit"
                }
            },
            aliSpeAccount: {
                method: "POST",
                params: {
                    id: "buySpe",
                    controller: "alipay",
                    way: "id"
                }
            },
            payBind: {
                method: "POST",
                params: {
                    id: "bind"
                }
            },
            payOver: {
                method: "POST",
                params: {
                    id: "overtime",
                    controller: "alipay"
                }
            },
            payService: {
                method: "POST",
                params: {
                    id: "buy",
                    controller: "alipay"
                }
            }
        })
    }
    angular.module("fieldApp").factory("Alipay", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e, f) {
        function g(a, b) {
            var g = b || angular.noop,
                h = f.defer();
            return c.post("/auth/local", {
                account: a.account,
                password: a.password,
                code: a.code || void 0
            }).success(function (a) {
                return e.put("token", a.data.token), d.get({}, function (a) {
                    x = a.data.user
                }), h.resolve(a.data), g()
            }).error(function (a) {
                return this.logout(), h.reject(a), g(a)
            }.bind(this)), h.promise
        }

        function h() {
            e.remove("token"), x = {}, a.url("/login")
        }

        function i(a, b) {
            var c = b || angular.noop;
            return d.save(a, function (b) {
                return e.put("token", b.data.token), d.get({}, function (a) {
                    x = a.data.user
                }), c(a)
            }, function (a) {
                return this.logout(), c(a)
            }.bind(this)).$promise
        }

        function j(a, b, c) {
            var e = c || angular.noop;
            return d.changePassword({
                id: x._id
            }, {
                oldPassword: a,
                newPassword: b
            }, function (a) {
                return e(a)
            }, function (a) {
                return e(a)
            }).$promise
        }

        function k() {
            return x
        }

        function l() {
            return x.hasOwnProperty("role")
        }

        function m(a) {
            x.hasOwnProperty("$promise") ? x.$promise.then(function () {
                a(!0)
            })["catch"](function () {
                a(!1)
            }) : a(x.hasOwnProperty("role") ? !0 : !1)
        }

        function n() {
            return "admin" === x.role
        }

        function o() {
            return "organization" === x.role
        }

        function p() {
            return "checkStand" === x.role && "normal" === x.type
        }

        function q() {
            return "checkStand" === x.role && "swim" === x.type
        }

        function r() {
            return "fieldManager" === x.role
        }

        function s() {
            return "cardManager" === x.role
        }

        function t() {
            return "financeManager" === x.role
        }

        function u() {
            return "fieldWorker" === x.role
        }

        function v() {
            return e.get("token")
        }

        function w(a) {
            d.get({}, {}, function (b) {
                return x = b.data.user, a(x)
            })
        }
        var x = {};
        return e.get("token") && d.get({}, function (a) {
            x = a.data.user
        }), {
            login: g,
            logout: h,
            createUser: i,
            changePassword: j,
            getCurrentUser: k,
            isLoggedIn: l,
            isLoggedInAsync: m,
            isAdmin: n,
            isOrganization: o,
            isNormalCheckStand: p,
            isSwimCheckStand: q,
            isFieldManager: r,
            isCardManager: s,
            isFinanceManager: t,
            isFieldWorker: u,
            getToken: v,
            setCurrentUser: w
        }
    }
    angular.module("fieldApp").factory("Auth", a), a.$inject = ["$location", "$rootScope", "$http", "User", "$cookieStore", "$q"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/users/:id/:controller", {
            id: "@_id"
        }, {
            changePassword: {
                method: "PUT",
                params: {
                    controller: "password"
                }
            },
            getInfo: {
                method: "GET",
                params: {
                    controller: "org"
                }
            },
            getOrgInfo: {
                method: "GET",
                params: {
                    id: "id",
                    controller: "org"
                }
            },
            get: {
                method: "GET",
                params: {
                    id: "me"
                }
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            "delete": {
                method: "DELETE",
                params: {
                    id: "id"
                }
            },
            updateMe: {
                method: "PUT",
                params: {
                    id: "me"
                }
            },
            updateMId: {
                method: "PUT",
                params: {
                    id: "mchid"
                }
            },
            updateAlipayappid: {
                method: "PUT",
                params: {
                    id: "alipayappid"
                }
            },
            updatePassword: {
                method: "PUT",
                params: {
                    id: "me",
                    controller: "password"
                }
            },
            createField: {
                method: "POST",
                params: {
                    id: "fieldmanager"
                }
            },
            createCheck: {
                method: "POST",
                params: {
                    id: "checkstand"
                }
            },
            createWorker: {
                method: "POST",
                params: {
                    id: "fieldworker"
                }
            },
            createCard: {
                method: "POST",
                params: {
                    id: "cardmanager"
                }
            },
            createFinance: {
                method: "POST",
                params: {
                    id: "financemanager"
                }
            },
            createOrg: {
                method: "POST",
                params: {}
            },
            isCheck: {
                method: "POST",
                params: {
                    id: "ischeck"
                }
            },
            index: {
                method: "GET",
                params: {}
            }
        })
    }
    angular.module("fieldApp").factory("User", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/bails/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            index: {
                method: "GET",
                params: {}
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            wxService: {
                method: "POST",
                params: {
                    id: "buy",
                    controller: "micropay"
                }
            },
            "delete": {
                method: "DELETE",
                params: {
                    id: "id"
                }
            },
            buy: {
                method: "POST",
                params: {
                    id: "buy"
                }
            }
        })
    }
    angular.module("fieldApp").factory("Bail", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/cards/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            pay: {
                method: "POST",
                params: {
                    id: "buy",
                    controller: "micropay"
                }
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            "delete": {
                method: "DELETE",
                params: {
                    id: "id"
                }
            },
            buy: {
                method: "POST",
                params: {
                    id: "buy"
                }
            },
            check: {
                method: "POST",
                params: {
                    id: "check"
                }
            },
            index: {
                method: "GET",
                params: {}
            }
        })
    }
    angular.module("fieldApp").factory("Card", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/cardrecords/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            pay: {
                method: "POST",
                params: {
                    id: "buy",
                    controller: "micropay"
                }
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            "delete": {
                method: "DELETE",
                params: {
                    id: "id"
                }
            },
            buy: {
                method: "POST",
                params: {
                    id: "buy"
                }
            },
            check: {
                method: "POST",
                params: {
                    id: "check"
                }
            },
            index: {
                method: "GET",
                params: {}
            }
        })
    }
    angular.module("fieldApp").factory("Cardrecords", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/events/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            destory: {
                method: "DELETE",
                params: {}
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            index: {
                method: "GET"
            }
        })
    }
    angular.module("fieldApp").factory("Event", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/fields/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            "delete": {
                method: "DELETE",
                params: {
                    id: "id"
                }
            },
            index: {
                method: "GET"
            },
            updateFields: {
                method: "PUT",
                params: {
                    id: "fields"
                }
            },
            findFields: {
                method: "GET",
                params: {
                    id: "findFields"
                }
            },
            changeField: {
                method: "PUT",
                params: {
                    id: "changeField"
                }
            }
        })
    }
    angular.module("fieldApp").factory("Field", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/fixedamounts/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            index: {
                method: "GET",
                params: {}
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            wxService: {
                method: "POST",
                params: {
                    id: "buy",
                    controller: "micropay"
                }
            },
            "delete": {
                method: "DELETE",
                params: {
                    id: "id"
                }
            },
            buy: {
                method: "POST",
                params: {
                    id: "buy"
                }
            }
        })
    }
    angular.module("fieldApp").factory("Fiexdamounts", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/finances/:id/:controller", {
            id: "@_id"
        }, {
            business: {
                method: "POST",
                params: {
                    id: "business"
                }
            },
            income: {
                method: "POST",
                params: {
                    id: "income"
                }
            },
            shop: {
                method: "POST",
                params: {
                    id: "shop"
                }
            },
            prepIncome: {
                method: "POST",
                params: {
                    id: "preporder"
                }
            },
            type: {
                method: "POST",
                params: {
                    id: "type"
                }
            }
        })
    }
    angular.module("fieldApp").factory("Finance", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a, b, c, d, e) {
        var f, g = this,
            h = d.value,
            i = d.sencond,
            j = d.third,
            k = function () {
                $("html,body").animate({
                    scrollTop: "0px"
                }, 800)
            },
            l = function () {
                if (f && (f.bgColor = "", f = null), f = _.findWhere(g.menus, {
                    value: h
                })) {
                    if (g.state = f.state, g.nav = f, f.secondNavs.length > 0) {
                        var a = _.findWhere(f.secondNavs, {
                            value: i || ""
                        });
                        if (a)
                            if ("场地服务" == f.name || "卡务管理" == f.name || "商品管理" == f.name || "会员管理" == f.name) f = a;
                            else if (a.bgColor = "sencondNavhover", a.thirdNavs.length > 0) {
                            var b = _.findWhere(a.thirdNavs, {
                                value: j || ""
                            });
                            b && (a.bgColor = "", b.bgColor = "thirdNavhover")
                        }
                    }
                    f.bgColor = "hover"
                }
            },
            m = function () {
                n(), f && (f.showSecondNav = !1);
                var a = _.findWhere(g.menus, {
                    value: h
                });
                a.showSecondNav = !0
            },
            n = function () {
                _.each(g.menus, function (a) {
                    a.showSecondNav = !1
                })
            },
            o = function (a) {
                switch (a) {
                case "admin":
                case "organization":
                    g.menus = [{
                        name: "场地服务",
                        state: "org-field-book.once({state:'once'})",
                        imgStyle: "imgField",
                        value: "field",
                        showSecondNav: !0,
                        bgColor: "",
                        secondNavs: [{
                            name: "场地预订",
                            state: "org-field-book.once({state:'once'})",
                            value: "book",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "综合服务",
                            state: "org-product.sale",
                            value: "product",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "门票售卖",
                            state: "org-ticket.ticket",
                            value: "ticket",
                            bgColor: "",
                            thirdNavs: []
                        }]
                    }, {
                        name: "会员管理",
                        state: "org-member",
                        imgStyle: "imgMember",
                        value: "member",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: [{
                            name: "储值卡管理",
                            state: "org-member",
                            value: "member",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "会员卡管理",
                            state: "org-vip-table",
                            value: "memberservice",
                            bgColor: "",
                            thirdNavs: []
                        }]
                    }, {
                        name: "财务管理",
                        state: "org-finance-cashall",
                        imgStyle: "imgFinance",
                        value: "finance",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: []
                    }, {
                        name: "商品管理",
                        state: "org-purchase",
                        imgStyle: "imgShop",
                        value: "sell",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: [{
                            name: "日常管理",
                            state: "org-purchase",
                            value: "purchase",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "统计报表",
                            state: "org-shop-form",
                            value: "stock",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "商品设置",
                            state: "org-setting-product-info",
                            value: "sale",
                            bgColor: "",
                            thirdNavs: []
                        }]
                    }, {
                        name: "卡务管理",
                        state: "org-card",
                        imgStyle: "imgCard",
                        value: "card",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: [{
                            name: "实体卡管理",
                            state: "org-card",
                            value: "entity",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "虚拟账户",
                            state: "org-dummy.normal",
                            value: "virtual",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "充值卡记录",
                            state: "org-chongzhi",
                            value: "chongzhi",
                            bgColor: "",
                            thirdNavs: []
                        }]
                    }, {
                        name: "员工管理",
                        state: "org-staff.all",
                        imgStyle: "imgStaff",
                        value: "staff",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: []
                    }, {
                        name: "设置",
                        state: "org-setting-person",
                        imgStyle: "imgSetting",
                        value: "setting",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: [{
                            name: "个人信息",
                            state: "org-setting-person",
                            value: "person",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "项目设置",
                            state: "org-setting-item",
                            value: "item",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "场馆登记",
                            state: "org-setting-venue-register",
                            value: "venue",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "场馆设置",
                            state: "org-setting-field-register",
                            value: "field",
                            bgColor: "",
                            thirdNavs: [{
                                name: "场地登记",
                                state: "org-setting-field-register",
                                value: "field",
                                bgColor: ""
                            }, {
                                name: "场次登记",
                                state: "org-setting-time-register",
                                value: "time",
                                bgColor: ""
                            }, {
                                name: "价格登记",
                                state: "org-setting-price-register",
                                value: "price",
                                bgColor: ""
                            }, {
                                name: "特殊日期设置",
                                state: "org-setting-holiday",
                                value: "holiday",
                                bgColor: ""
                            }]
                        }, {
                            name: "门票设置",
                            state: "org-setting-ticket",
                            value: "ticket",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "手环设置",
                            state: "org-setting-voucher",
                            value: "voucher",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "综合服务设置",
                            state: "org-setting-service",
                            value: "service",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "产品设置",
                            state: "org-setting-vip",
                            value: "vip",
                            bgColor: "",
                            thirdNavs: [{
                                name: "会员设置",
                                state: "org-setting-vip",
                                value: "vip",
                                bgColor: ""
                            }, {
                                name: "通用账户设置",
                                state: "org-setting-card",
                                value: "card",
                                bgColor: ""
                            }, {
                                name: "专用账户设置",
                                state: "org-setting-special",
                                value: "special",
                                bgColor: ""
                            }, {
                                name: "会员卡标签",
                                state: "org-setting-service-tag",
                                value: "servicetag",
                                bgColor: ""
                            }, {
                                name: "次数卡设置",
                                state: "org-setting-time-card",
                                value: "timecard",
                                bgColor: ""
                            }, {
                                name: "时间卡设置",
                                state: "org-setting-date-card",
                                value: "datecard",
                                bgColor: ""
                            }]
                        }, {
                            name: "预退订规则",
                            state: "org-setting-rule",
                            value: "rule",
                            bgColor: "",
                            thirdNavs: []
                        }]
                    }];
                    break;
                case "checkStand":
                    g.menus = [{
                        name: "场地服务",
                        state: "csd-field-book.once({state:'once'})",
                        imgStyle: "imgField",
                        value: "field",
                        showSecondNav: !0,
                        bgColor: "",
                        secondNavs: [{
                            name: "场地预订",
                            state: "csd-field-book.once({state:'once'})",
                            value: "book",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "综合服务",
                            state: "csd-product.sale",
                            value: "product",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "门票售卖",
                            state: "csd-ticket.ticket",
                            value: "ticket",
                            bgColor: "",
                            thirdNavs: []
                        }]
                    }, {
                        name: "商品管理",
                        state: "csd-sell.sale",
                        imgStyle: "imgShop",
                        value: "sell",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: [{
                            name: "商品售卖",
                            state: "csd-sell.sale",
                            value: "sale",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "日常管理",
                            state: "csd-stock-transfer",
                            value: "stock",
                            bgColor: "",
                            thirdNavs: []
                        }]
                    }, {
                        name: "会员管理",
                        state: "csd-member",
                        imgStyle: "imgMember",
                        value: "member",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: []
                    }, {
                        name: "财务管理",
                        state: "csd-finance-cashall",
                        imgStyle: "imgFinance",
                        value: "finance",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: []
                    }, {
                        name: "账号合并",
                        state: "csd-old.member",
                        imgStyle: "imgMerge",
                        value: "old",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: []
                    }, {
                        name: "设置",
                        state: "csd-setting-person",
                        imgStyle: "imgSetting",
                        value: "setting",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: []
                    }];
                    break;
                case "fieldManager":
                    g.menus = [{
                        name: "场地服务",
                        state: "fm-field-book.once({state:'once'})",
                        imgStyle: "imgField",
                        value: "field",
                        showSecondNav: !0,
                        bgColor: "",
                        secondNavs: [{
                            name: "场地预订",
                            state: "fm-field-book.once({state:'once'})",
                            value: "book",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "综合服务",
                            state: "fm-product.sale",
                            value: "product",
                            bgColor: "",
                            thirdNavs: []
                        }]
                    }, {
                        name: "会员管理",
                        state: "fm-member",
                        imgStyle: "imgMember",
                        value: "member",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: [{
                            name: "储值卡管理",
                            state: "fm-member",
                            value: "member",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "会员卡管理",
                            state: "fm-vip-table",
                            value: "memberservice",
                            bgColor: "",
                            thirdNavs: []
                        }]
                    }, {
                        name: "财务管理",
                        state: "fm-finance-cashall",
                        imgStyle: "imgFinance",
                        value: "finance",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: []
                    }, {
                        name: "商品管理",
                        state: "fm-purchase",
                        imgStyle: "imgShop",
                        value: "sell",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: [{
                            name: "日常管理",
                            state: "fm-purchase",
                            value: "purchase",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "统计报表",
                            state: "fm-shop-form",
                            value: "stock",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "商品设置",
                            state: "fm-setting-product-info",
                            value: "sale",
                            bgColor: "",
                            thirdNavs: []
                        }]
                    }, {
                        name: "员工管理",
                        state: "fm-staff.all",
                        imgStyle: "imgStaff",
                        value: "staff",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: []
                    }, {
                        name: "设置",
                        state: "fm-setting-person",
                        imgStyle: "imgSetting",
                        value: "setting",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: [{
                            name: "个人信息",
                            state: "fm-setting-person",
                            value: "person",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "项目设置",
                            state: "fm-setting-item",
                            value: "item",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "场馆登记",
                            state: "fm-setting-venue-register",
                            value: "venue",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "场馆设置",
                            state: "fm-setting-field-register",
                            value: "field",
                            bgColor: "",
                            thirdNavs: [{
                                name: "场地登记",
                                state: "fm-setting-field-register",
                                value: "field",
                                bgColor: ""
                            }, {
                                name: "场次登记",
                                state: "fm-setting-time-register",
                                value: "time",
                                bgColor: ""
                            }, {
                                name: "价格登记",
                                state: "fm-setting-price-register",
                                value: "price",
                                bgColor: ""
                            }, {
                                name: "特殊日期设置",
                                state: "fm-setting-holiday",
                                value: "holiday",
                                bgColor: ""
                            }]
                        }, {
                            name: "门票设置",
                            state: "fm-setting-ticket",
                            value: "ticket",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "综合服务设置",
                            state: "fm-setting-service",
                            value: "service",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "产品设置",
                            state: "fm-setting-vip",
                            value: "vip",
                            bgColor: "",
                            thirdNavs: [{
                                name: "会员设置",
                                state: "fm-setting-vip",
                                value: "vip",
                                bgColor: ""
                            }, {
                                name: "通用账户设置",
                                state: "fm-setting-card",
                                value: "card",
                                bgColor: ""
                            }, {
                                name: "专用账户设置",
                                state: "fm-setting-special",
                                value: "special",
                                bgColor: ""
                            }, {
                                name: "会员卡标签",
                                state: "fm-setting-service-tag",
                                value: "servicetag",
                                bgColor: ""
                            }, {
                                name: "次数卡设置",
                                state: "fm-setting-time-card",
                                value: "timecard",
                                bgColor: ""
                            }, {
                                name: "时间卡设置",
                                state: "fm-setting-date-card",
                                value: "datecard",
                                bgColor: ""
                            }]
                        }, {
                            name: "预退订规则",
                            state: "fm-setting-rule",
                            value: "rule",
                            bgColor: "",
                            thirdNavs: []
                        }]
                    }];
                    break;
                case "cardManager":
                    g.menus = [{
                        name: "会员管理",
                        state: "crd-member",
                        imgStyle: "imgMember",
                        value: "member",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: []
                    }, {
                        name: "财务管理",
                        state: "crd-finance-shop",
                        imgStyle: "imgFinance",
                        value: "finance",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: []
                    }, {
                        name: "商品管理",
                        state: "crd-purchase",
                        imgStyle: "imgShop",
                        value: "sell",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: [{
                            name: "日常管理",
                            state: "crd-purchase",
                            value: "purchase",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "统计报表",
                            state: "crd-shop-form",
                            value: "stock",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "商品设置",
                            state: "crd-setting-product-info",
                            value: "sale",
                            bgColor: "",
                            thirdNavs: []
                        }]
                    }, {
                        name: "卡务管理",
                        state: "crd-card",
                        imgStyle: "imgCard",
                        value: "card",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: [{
                            name: "实体卡管理",
                            state: "crd-card",
                            value: "entity",
                            bgColor: "",
                            thirdNavs: []
                        }, {
                            name: "虚拟账户",
                            state: "crd-dummy.normal",
                            value: "virtual",
                            bgColor: "",
                            thirdNavs: []
                        }]
                    }, {
                        name: "设置",
                        state: "crd-setting-person",
                        imgStyle: "imgSetting",
                        value: "setting",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: []
                    }];
                    break;
                case "financeManager":
                    g.menus = [{
                        name: "财务管理",
                        state: "fac-finance-cashall",
                        imgStyle: "imgFinance",
                        value: "finance",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: []
                    }, {
                        name: "设置",
                        state: "fac-setting-person",
                        imgStyle: "imgSetting",
                        value: "setting",
                        showSecondNav: !1,
                        bgColor: "",
                        secondNavs: []
                    }]
                }
                l(), m()
            },
            p = function () {
                q(), k()
            },
            q = function () {
                e.get({}, function (a) {
                    g.account = a.data.user.name, g.role = a.data.user.role, o(g.role)
                }, function () {})
            };
        g.openSecondNavBox = function (a) {
            var b = a.name;
            if ("organization" == g.role) switch (b) {
            case "场地服务":
                g.menus[0].showSecondNav = !g.menus[0].showSecondNav;
                break;
            case "会员管理":
                g.menus[1].showSecondNav = !g.menus[1].showSecondNav;
                break;
            case "商品管理":
                g.menus[3].showSecondNav = !g.menus[3].showSecondNav;
                break;
            case "卡务管理":
                g.menus[4].showSecondNav = !g.menus[4].showSecondNav
            }
        }, p()
    }
    angular.module("fieldApp").controller("HeaderCtrl", a), a.$inject = ["$rootScope", "$scope", "$http", "$stateParams", "User"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/speday/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            pay: {
                method: "POST",
                params: {
                    id: "buy",
                    controller: "micropay"
                }
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            "delete": {
                method: "DELETE",
                params: {
                    id: "id"
                }
            },
            buy: {
                method: "POST",
                params: {
                    id: "buy"
                }
            },
            check: {
                method: "POST",
                params: {
                    id: "check"
                }
            },
            index: {
                method: "GET",
                params: {}
            }
        })
    }
    angular.module("fieldApp").factory("Holiday", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/items/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            "delete": {
                method: "DELETE",
                params: {}
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            move: {
                method: "PUT",
                params: {
                    id: "move"
                }
            },
            index: {
                method: "GET",
                params: {}
            }
        })
    }
    angular.module("fieldApp").factory("Item", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/levels/:id/:controller/:way", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            "delete": {
                method: "DELETE",
                params: {
                    id: "id"
                }
            },
            index: {
                method: "GET",
                params: {}
            }
        })
    }
    angular.module("fieldApp").factory("Level", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/members/:id/:controller/:way", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            judge: {
                method: "POST",
                params: {
                    id: "valued"
                }
            },
            move: {
                method: "POST",
                params: {
                    id: "move"
                }
            },
            judgeAdd: {
                method: "POST",
                params: {
                    id: "needMerge"
                }
            },
            add: {
                method: "POST",
                params: {
                    id: "merge"
                }
            },
            mergeHistory: {
                method: "GET",
                params: {
                    id: "merge",
                    controller: "history"
                }
            },
            overtime: {
                method: "POST",
                params: {
                    id: "overtime",
                    controller: "micropay"
                }
            },
            pay: {
                method: "POST",
                params: {
                    controller: "deposit"
                }
            },
            randomPay: {
                method: "POST",
                params: {
                    id: "id",
                    controller: "deposit"
                }
            },
            randomWx: {
                method: "POST",
                params: {
                    id: "id",
                    controller: "deposit",
                    way: "micropay"
                }
            },
            memberRefund: {
                method: "POST",
                params: {
                    id: "refund"
                }
            },
            memberOver: {
                method: "POST",
                params: {
                    id: "overtime"
                }
            },
            wxRefund: {
                method: "POST",
                params: {
                    id: "refund",
                    controller: "micropay"
                }
            },
            refind: {
                method: "POST",
                params: {
                    id: "refind"
                }
            },
            wxBind: {
                method: "PUT",
                params: {
                    id: "tel",
                    controller: "bind"
                }
            },
            oldCheck: {
                method: "GET",
                params: {
                    id: "oldno"
                }
            },
            telUpdate: {
                method: "PUT",
                params: {
                    id: "tel",
                    controller: "update"
                }
            },
            speAccount: {
                method: "POST",
                params: {
                    id: "id",
                    controller: "openspe"
                }
            },
            spePay: {
                method: "POST",
                params: {
                    id: "id",
                    controller: "spedeposit"
                }
            },
            cancelBind: {
                method: "PUT",
                params: {
                    controller: "cancelbind"
                }
            },
            addCard: {
                method: "POST",
                params: {
                    controller: "addcard"
                }
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            wxCreate: {
                method: "POST",
                params: {
                    id: "client"
                }
            },
            freeze: {
                method: "POST",
                params: {
                    id: "freeze"
                }
            },
            cfreeze: {
                method: "POST",
                params: {
                    id: "freeze",
                    controller: "cancel"
                }
            },
            wxGet: {
                method: "GET",
                params: {
                    id: "wx"
                }
            },
            "delete": {
                method: "DELETE",
                params: {
                    id: "id"
                }
            },
            cardBind: {
                method: "POST",
                params: {
                    id: "card",
                    controller: "bind"
                }
            },
            wxPayBind: {
                method: "POST",
                params: {
                    id: "card",
                    controller: "bind",
                    way: "micropay"
                }
            },
            wxSpeAccount: {
                method: "POST",
                params: {
                    id: "id",
                    controller: "spedeposit",
                    way: "micropay"
                }
            },
            index: {
                method: "GET",
                params: {}
            },
            show: {
                method: "GET"
            },
            indexBycard: {
                method: "GET",
                params: {
                    id: "cardno"
                }
            },
            indexByTel: {
                method: "GET",
                params: {
                    id: "tel"
                }
            }
        })
    }
    angular.module("fieldApp").factory("Member", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/memberservices/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            get: {
                method: "GET",
                params: {}
            },
            index: {
                method: "GET",
                params: {
                    id: "serviceno"
                }
            },
            update: {
                method: "PUT"
            },
            getIndex: {
                method: "GET"
            },
            idIndex: {
                method: "GET",
                params: {
                    id: "id"
                }
            },
            use: {
                method: "POST",
                params: {
                    id: "use"
                }
            },
            refundbind: {
                method: "POST",
                params: {
                    id: "refund"
                }
            },
            "delete": {
                method: "DELETE",
                params: {}
            },
            buy: {
                method: "POST",
                params: {
                    id: "buy"
                }
            },
            buyBail: {
                method: "POST",
                params: {
                    id: "bail"
                }
            },
            bail: {
                method: "POST",
                params: {
                    id: "overtime",
                    controller: "bail"
                }
            },
            wxBail: {
                method: "POST",
                params: {
                    id: "bail",
                    controller: "micropay"
                }
            },
            changeCard: {
                method: "POST",
                params: {
                    id: "bind"
                }
            },
            bindCard: {
                method: "POST",
                params: {
                    id: "bind"
                }
            },
            freeze: {
                method: "POST",
                params: {
                    id: "freeze"
                }
            },
            change: {
                method: "POST",
                params: {
                    id: "change"
                }
            },
            postpone: {
                method: "POST",
                params: {
                    id: "delay"
                }
            },
            useWidthVouchers: {
                method: "POST",
                params: {
                    id: "use",
                    controller: "voucher"
                }
            }
        })
    }
    angular.module("fieldApp").factory("MemberService", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/membertypes/:id/:controller/:way", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            "delete": {
                method: "DELETE",
                params: {
                    id: "id"
                }
            },
            index: {
                method: "GET",
                params: {}
            }
        })
    }
    angular.module("fieldApp").factory("Membertype", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a() {
        return {
            restrict: "A",
            require: "ngModel",
            link: function (a, b, c, d) {
                b.on("keydown", function () {
                    return d.$setValidity("mongoose", !0)
                })
            }
        }
    }
    angular.module("fieldApp").directive("mongooseError", a)
}(),
function () {
    "use strict";

    function a(a, b, c) {
        a.menu = [{
                title: "Home",
                link: "/"
            }], a.isCollapsed = !0,
            a.isLoggedIn = c.isLoggedIn, a.isAdmin = c.isAdmin, a.getCurrentUser = c.getCurrentUser, a.logout = function () {
                c.logout(), b.path("/login")
            }, a.isActive = function (a) {
                return a === b.path()
            }
    }
    angular.module("fieldApp").controller("NavbarCtrl", a), a.$inject = ["$scope", "$location", "Auth"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/orderlists/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {
                    id: "orders"
                }
            },
            createOrders: {
                method: "POST",
                params: {
                    id: "orders"
                }
            },
            createOrdersMicropay: {
                method: "POST",
                params: {
                    id: "orders",
                    controller: "micropay"
                }
            },
            checkOrders: {
                method: "POST",
                params: {
                    id: "check"
                }
            },
            createLong: {
                method: "POST",
                params: {
                    id: "long"
                }
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            index: {
                method: "GET"
            },
            cancelOnce: {
                method: "PUT",
                params: {
                    id: "refund"
                }
            },
            cancelOrders: {
                method: "PUT",
                params: {
                    id: "refund",
                    controller: "orders"
                }
            },
            open: {
                method: "POST",
                params: {
                    id: "use"
                }
            },
            drawBill: {
                method: "PUT",
                params: {
                    id: "invoice"
                }
            },
            updateRemark: {
                method: "PUT",
                params: {
                    id: "remark"
                }
            }
        })
    }
    angular.module("fieldApp").factory("Orderlist", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/orderlongs/:id/:controller", {
            id: "@_id"
        }, {
            index: {
                method: "GET"
            },
            cancel: {
                method: "PUT",
                params: {
                    id: "cancel"
                }
            }
        })
    }
    angular.module("fieldApp").factory("Orderlong", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/payconfig/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            "delete": {
                method: "DELETE",
                params: {}
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            move: {
                method: "PUT",
                params: {
                    id: "move"
                }
            },
            index: {
                method: "GET",
                params: {}
            }
        })
    }
    angular.module("fieldApp").factory("Payconfig", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/preporders", {
            id: "@_id"
        }, {
            index: {
                method: "GET"
            }
        })
    }
    angular.module("fieldApp").factory("Preporder", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/products/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            index: {
                method: "GET",
                params: {}
            },
            update: {
                method: "PUT",
                params: {}
            },
            "delete": {
                method: "DELETE",
                params: {}
            },
            buy: {
                method: "POST",
                params: {
                    id: "buy"
                }
            },
            buyWx: {
                method: "POST",
                params: {
                    id: "buyMicropay"
                }
            }
        })
    }
    angular.module("fieldApp").factory("Product", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/productcategories/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            index: {
                method: "GET"
            },
            show: {
                method: "GET"
            },
            update: {
                method: "PUT",
                params: {}
            },
            "delete": {
                method: "DELETE",
                params: {}
            },
            buy: {
                method: "POST",
                params: {
                    id: "buy"
                }
            },
            buyWx: {
                method: "POST",
                params: {
                    id: "buyMicropay"
                }
            }
        })
    }
    angular.module("fieldApp").factory("Productcategory", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/purchaseorders/:id/:controller", {
            id: "@_id"
        }, {
            index: {
                method: "GET",
                params: {}
            },
            changeState: {
                method: "PUT",
                params: {
                    id: "state"
                }
            }
        })
    }
    angular.module("fieldApp").factory("PurchaseOrder", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/purchaserecords/:id/:controller", {
            id: "@_id"
        }, {
            index: {
                method: "GET",
                params: {}
            }
        })
    }
    angular.module("fieldApp").factory("PurchaseRecord", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/records/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            index: {
                method: "GET",
                params: {}
            }
        })
    }
    angular.module("fieldApp").factory("Record", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/services/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            index: {
                method: "GET",
                params: {}
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            wxService: {
                method: "POST",
                params: {
                    id: "buy",
                    controller: "micropay"
                }
            },
            "delete": {
                method: "DELETE",
                params: {
                    id: "id"
                }
            },
            buy: {
                method: "POST",
                params: {
                    id: "buy"
                }
            }
        })
    }
    angular.module("fieldApp").factory("Service", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/servicehistories/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            get: {
                method: "GET",
                params: {}
            },
            index: {
                method: "GET",
                params: {}
            },
            update: {
                method: "PUT"
            },
            getIndex: {
                method: "GET"
            },
            idIndex: {
                method: "GET",
                params: {
                    id: "id"
                }
            },
            use: {
                method: "POST",
                params: {
                    id: "use"
                }
            },
            "delete": {
                method: "DELETE",
                params: {}
            },
            buy: {
                method: "POST",
                params: {
                    id: "buy"
                }
            },
            changeCard: {
                method: "POST",
                params: {
                    id: "bind"
                }
            },
            freeze: {
                method: "POST",
                params: {
                    id: "freeze"
                }
            },
            change: {
                method: "POST",
                params: {
                    id: "change"
                }
            },
            postpone: {
                method: "POST",
                params: {
                    id: "delay"
                }
            },
            useWidthVouchers: {
                method: "POST",
                params: {
                    id: "use",
                    controller: "voucher"
                }
            }
        })
    }
    angular.module("fieldApp").factory("ServiceHistory", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/servicetags/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            index: {
                method: "GET",
                params: {}
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            "delete": {
                method: "DELETE",
                params: {}
            },
            buy: {
                method: "POST",
                params: {
                    id: "buy"
                }
            }
        })
    }
    angular.module("fieldApp").factory("ServiceTag", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/shopproducts/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            index: {
                method: "GET",
                params: {}
            },
            refund: {
                method: "PUT",
                params: {
                    id: "refund"
                }
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            "delete": {
                method: "DELETE",
                params: {}
            },
            buy: {
                method: "POST",
                params: {
                    id: "buy"
                }
            },
            buyProduct: {
                method: "POST",
                params: {
                    id: "buyProducts"
                }
            },
            buyWx: {
                method: "POST",
                params: {
                    id: "buyProducts",
                    controller: "micropay"
                }
            },
            enter: {
                method: "POST",
                params: {
                    id: "purchase"
                }
            },
            transfer: {
                method: "POST",
                params: {
                    id: "transfer"
                }
            },
            receive: {
                method: "POST",
                params: {
                    id: "receive"
                }
            },
            returnGood: {
                method: "POST",
                params: {
                    id: "returngood"
                }
            },
            returnCheck: {
                method: "POST",
                params: {
                    id: "returncheck"
                }
            }
        })
    }
    angular.module("fieldApp").factory("ShopProduct", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/shopbasics/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            index: {
                method: "GET",
                params: {}
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            "delete": {
                method: "DELETE",
                params: {}
            }
        })
    }
    angular.module("fieldApp").factory("ShopBasic", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/shopforms/:id/:controller", {
            id: "@_id"
        }, {
            index: {
                method: "GET",
                params: {}
            }
        })
    }
    angular.module("fieldApp").factory("ShopForm", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/smscode/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            send: {
                method: "POST",
                params: {
                    id: "auth"
                }
            },
            check: {
                method: "POST",
                params: {
                    id: "check"
                }
            },
            resms: {
                method: "POST",
                params: {
                    id: "member",
                    controller: "auth"
                }
            },
            loginSms: {
                method: "POST",
                params: {
                    id: "login"
                }
            }
        })
    }
    angular.module("fieldApp").factory("Smscode", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/statistic/:id/:controller", {
            id: "@_id"
        }, {
            index: {
                method: "POST",
                params: {}
            },
            monthIndex: {
                method: "POST",
                params: {
                    id: "query"
                }
            },
            memberIndex: {
                method: "POST",
                params: {
                    id: "member"
                }
            },
            numIndex: {
                method: "GET",
                params: {
                    id: "dayperson"
                }
            },
            resms: {
                method: "POST",
                params: {
                    id: "member",
                    controller: "auth"
                }
            },
            loginSms: {
                method: "POST",
                params: {
                    id: "login"
                }
            }
        })
    }
    angular.module("fieldApp").factory("Statistic", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/suggest/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            index: {
                method: "GET",
                params: {}
            },
            send: {
                method: "POST",
                params: {
                    id: "auth"
                }
            },
            feedback: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            loginSms: {
                method: "POST",
                params: {
                    id: "login"
                }
            }
        })
    }
    angular.module("fieldApp").factory("Suggest", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/supplies/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            index: {
                method: "GET",
                params: {}
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            "delete": {
                method: "DELETE",
                params: {}
            },
            buy: {
                method: "POST",
                params: {
                    id: "buy"
                }
            }
        })
    }
    angular.module("fieldApp").factory("Supply", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/tags/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            index: {
                method: "GET",
                params: {}
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            "delete": {
                method: "DELETE",
                params: {}
            },
            buy: {
                method: "POST",
                params: {
                    id: "buy"
                }
            }
        })
    }
    angular.module("fieldApp").factory("Tag", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/tickets/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            index: {
                method: "GET",
                params: {}
            },
            "delete": {
                method: "DELETE",
                params: {
                    id: "id"
                }
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            buy: {
                method: "POST",
                params: {
                    id: "buy"
                }
            },
            buyTicketsWithVouchers: {
                method: "POST",
                params: {
                    id: "buy",
                    controller: "voucher"
                }
            },
            check: {
                method: "POST",
                params: {
                    id: "check",
                    controller: "bind"
                }
            },
            wxBuy: {
                method: "POST",
                params: {
                    id: "buy",
                    controller: "micropay"
                }
            },
            loginSms: {
                method: "POST",
                params: {
                    id: "login"
                }
            }
        })
    }
    angular.module("fieldApp").factory("Ticket", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/times/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            destory: {
                method: "DELETE",
                params: {}
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            get: {
                method: "GET",
                params: {
                    id: "todayspe"
                }
            },
            index: {
                method: "GET"
            }
        })
    }
    angular.module("fieldApp").factory("Time", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/tucards/:id", {
            id: "@_id"
        }, {
            charge: {
                method: "PUT"
            }
        })
    }
    angular.module("fieldApp").factory("Tucard", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/shopproductcategories/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            index: {
                method: "GET",
                params: {}
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            "delete": {
                method: "DELETE",
                params: {}
            },
            buy: {
                method: "POST",
                params: {
                    id: "buy"
                }
            }
        })
    }
    angular.module("fieldApp").factory("Type", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/unsubscriberules/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            "delete": {
                method: "DELETE",
                params: {}
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            index: {
                method: "GET",
                params: {}
            }
        })
    }
    angular.module("fieldApp").factory("Unsubrcriberules", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/venues/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            indexSpe: {
                method: "GET",
                params: {
                    id: "id"
                }
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            "delete": {
                method: "DELETE",
                params: {
                    id: "id"
                }
            },
            move: {
                method: "PUT",
                params: {
                    id: "move"
                }
            },
            index: {
                method: "GET",
                params: {}
            }
        })
    }
    angular.module("fieldApp").factory("Venue", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/virrecords/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            pay: {
                method: "POST",
                params: {
                    id: "buy",
                    controller: "micropay"
                }
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            "delete": {
                method: "DELETE",
                params: {
                    id: "id"
                }
            },
            buy: {
                method: "POST",
                params: {
                    id: "buy"
                }
            },
            cancel: {
                method: "POST",
                params: {
                    id: "cancel"
                }
            },
            index: {
                method: "GET",
                params: {}
            }
        })
    }
    angular.module("fieldApp").factory("Virrecord", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/vouchers/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            show: {
                method: "POST",
                params: {
                    id: "show"
                }
            },
            count: {
                method: "GET",
                params: {
                    id: "count"
                }
            },
            change: {
                method: "POST",
                params: {
                    id: "change"
                }
            },
            confirm: {
                method: "POST",
                params: {
                    id: "confirm"
                }
            },
            enter: {
                method: "POST",
                params: {
                    id: "memberservice"
                }
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            "delete": {
                method: "DELETE",
                params: {
                    id: "id"
                }
            },
            buy: {
                method: "POST",
                params: {
                    id: "buy"
                }
            },
            cancel: {
                method: "POST",
                params: {
                    id: "cancel"
                }
            },
            index: {
                method: "GET",
                params: {}
            }
        })
    }
    angular.module("fieldApp").factory("Voucher", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/voucherhistories/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            get: {
                method: "GET",
                params: {}
            },
            index: {
                method: "GET",
                params: {}
            },
            update: {
                method: "PUT"
            },
            getIndex: {
                method: "GET"
            },
            idIndex: {
                method: "GET",
                params: {
                    id: "id"
                }
            },
            use: {
                method: "POST",
                params: {
                    id: "use"
                }
            },
            "delete": {
                method: "DELETE",
                params: {}
            },
            buy: {
                method: "POST",
                params: {
                    id: "buy"
                }
            },
            changeCard: {
                method: "POST",
                params: {
                    id: "bind"
                }
            },
            freeze: {
                method: "POST",
                params: {
                    id: "freeze"
                }
            },
            change: {
                method: "POST",
                params: {
                    id: "change"
                }
            },
            postpone: {
                method: "POST",
                params: {
                    id: "delay"
                }
            },
            useWidthVouchers: {
                method: "POST",
                params: {
                    id: "use",
                    controller: "voucher"
                }
            }
        })
    }
    angular.module("fieldApp").factory("VoucherHistory", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/voucherinfos/:id/:controller", {
            id: "@_id"
        }, {
            create: {
                method: "POST",
                params: {}
            },
            show: {
                method: "POST",
                params: {
                    id: "show"
                }
            },
            count: {
                method: "GET",
                params: {
                    id: "count"
                }
            },
            change: {
                method: "POST",
                params: {
                    id: "change"
                }
            },
            confirm: {
                method: "POST",
                params: {
                    id: "confirm"
                }
            },
            serach: {
                method: "POST",
                params: {
                    id: "no"
                }
            },
            enter: {
                method: "POST",
                params: {
                    id: "memberservice"
                }
            },
            update: {
                method: "PUT",
                params: {
                    id: "id"
                }
            },
            "delete": {
                method: "DELETE",
                params: {
                    id: "id"
                }
            },
            buy: {
                method: "POST",
                params: {
                    id: "buy"
                }
            },
            cancel: {
                method: "POST",
                params: {
                    id: "cancel"
                }
            },
            index: {
                method: "GET",
                params: {}
            }
        })
    }
    angular.module("fieldApp").factory("Voucherinfo", a), a.$inject = ["$resource"]
}(),
function () {
    "use strict";

    function a(a) {
        return a("/api/wxticket/:id/:controller", {
            id: "@_id"
        }, {
            getOpenid: {
                method: "get",
                params: {
                    id: "openid"
                }
            },
            getInfo: {
                method: "get",
                params: {
                    id: "info"
                }
            },
            getJsticket: {
                method: "POST"
            },
            getPayParams: {
                method: "POST",
                params: {
                    id: "pay"
                }
            }
        })
    }
    angular.module("fieldApp").factory("Wxticket", a), a.$inject = ["$resource"]
}(), angular.module("fieldApp").run(["$templateCache",
    function (a) {
        "use strict";
        a.put("app/account/login/login.html", '<!-- <div id="login-btn" ng-click="loginCtrl.login(\'web\')">\n  后台登陆\n</div>\n<div style="width:300px;height:40px;line-height:40px;text-align:center;background:#1aad19;margin-left:30px;border-radius:8px;color:#fff" ng-click="loginCtrl.login(\'coach\')">\n  教练登陆\n</div>\n --><div class=contentBox style="min-height: 760px"><style>body{\n      background: #eee;\n    }\n    .account_css{\n      height:56px;\n      width:320px;\n    }\n    .account_css{\n      height:56px;\n      width:320px;\n      margin-top:20px\n    }\n    .code_css{\n      width: 200px;\n      float: left;\n    }\n    .code_but{\n      float: left;\n      width: 100px;\n      margin-left: 20px;\n      text-align: center;\n      line-height: 56px;\n      border-radius: 8px;\n      background: #00a1ff;\n      color:#fff;\n      cursor: pointer;\n    }\n    .contentBox{\n      background: #eee;\n    }</style><div id=login style="width: 440px;margin: 0 auto;min-height: 460px;border: 1px solid #a2a2a2;background: #fff;position: absolute;top:calc(50% - 300px);left: calc(50% - 220px)"><!-- <img src="assets/images/loginlogo.png" style="margin: 50px auto 0 auto;display: block;"> --><div style="margin: 20px auto 0 auto;display: block;height: 53px"></div><div style="color: rgba(0,0,0,0.67);font-size: 22px;font-family:PingFangSC-Regular;margin: 12px auto 0 auto;display: block;text-align: center;letter-spacing:2px">&nbsp;</div><img src=assets/images/logo.png style="width:222px;height:176px;margin:-50px 0 0 110px"><div style="margin:50px auto 25px auto;width:320px;border-radius:6px;overflow:hidden;color: rgba(0,0,0,0.54);font-size: 16px"><input ng-model=loginCtrl.account class="form_value account_css" placeholder=账号 ng-blur=loginCtrl.check()> <input style="width:320px !important" type=password ng-model=loginCtrl.pwd class="form_value account_css" placeholder=密码><div ng-show=loginCtrl.isCheck><input ng-model=loginCtrl.code class="form_value account_css code_css" placeholder=柜员登录验证码><div class="account_css code_but" ng-click=loginCtrl.sendCode()>{{loginCtrl.but_text}}</div></div></div><div style="height: 20px;color: #ff9200;font-size: 12px;text-indent: 60px"><span ng-show=loginCtrl.showError>{{loginCtrl.error}}</span></div><div style="margin: 15px auto 50px auto;border-radius: 8px;background: #00a1ff;width: 320px;height: 50px;text-align: center;font-size: 16px;line-height: 50px;color:#fff;cursor: pointer" ng-click="loginCtrl.login(\'web\')"><strong>登录</strong></div></div></div>'), a.put("app/account/settings/settings.html", '<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><div class=row><div class=col-sm-12><h1>Change Password</h1></div><div class=col-sm-12><form class=form name=form ng-submit=changePassword(form) novalidate><div class=form-group><label>Current Password</label><input type=password name=password class=form-control ng-model=user.oldPassword mongoose-error><p class=help-block ng-show=form.password.$error.mongoose>{{ errors.other }}</p></div><div class=form-group><label>New Password</label><input type=password name=newPassword class=form-control ng-model=user.newPassword ng-minlength=3 required><p class=help-block ng-show="(form.newPassword.$error.minlength || form.newPassword.$error.required) && (form.newPassword.$dirty || submitted)">Password must be at least 3 characters.</p></div><p class=help-block>{{ message }}</p><button class="btn btn-lg btn-primary" type=submit>Save changes</button></form></div></div></div>'), a.put("app/account/signup/signup.html", '<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><div class=row><div class=col-sm-12><h1>Sign up</h1></div><div class=col-sm-12><form class=form name=form ng-submit=register(form) novalidate><div class=form-group ng-class="{ \'has-success\': form.name.$valid && submitted,\n                                            \'has-error\': form.name.$invalid && submitted }"><label>Name</label><input name=name class=form-control ng-model=user.name required><p class=help-block ng-show="form.name.$error.required && submitted">A name is required</p></div><div class=form-group ng-class="{ \'has-success\': form.email.$valid && submitted,\n                                            \'has-error\': form.email.$invalid && submitted }"><label>Email</label><input type=email name=email class=form-control ng-model=user.email required mongoose-error><p class=help-block ng-show="form.email.$error.email && submitted">Doesn\'t look like a valid email.</p><p class=help-block ng-show="form.email.$error.required && submitted">What\'s your email address?</p><p class=help-block ng-show=form.email.$error.mongoose>{{ errors.email }}</p></div><div class=form-group ng-class="{ \'has-success\': form.password.$valid && submitted,\n                                            \'has-error\': form.password.$invalid && submitted }"><label>Password</label><input type=password name=password class=form-control ng-model=user.password ng-minlength=3 required mongoose-error><p class=help-block ng-show="(form.password.$error.minlength || form.password.$error.required) && submitted">Password must be at least 3 characters.</p><p class=help-block ng-show=form.password.$error.mongoose>{{ errors.password }}</p></div><div><button class="btn btn-inverse btn-lg btn-login" type=submit>Sign up</button> <a class="btn btn-default btn-lg btn-register" href=/login>Login</a></div></form></div></div><hr></div>'), a.put("app/admin/adm.html", '<div class=contentBox><div style=background:#2E4351;height:60px;line-height:60px><div style="width:1280px;margin:0 auto;color:#fff"><span style=font-size:18px>场馆Saas管理</span> <span style="margin:0 15px;color:#00a1ff">机构管理</span> <span class=pointer ui-sref=reask>反馈管理</span> <span class=pointer ng-click=admCtrl.logout() style=font-size:18px;margin-left:900px>退出登录</span></div></div><div style="width:1280px;padding:0px 0 20px 0px;background:#E7E6E3;min-height:800px;margin:0 auto"><div class=float_left style="padding:20px 30px 30px 30px;width:1280px;min-height:800px;border-left:1px solid #000;border-right:1px solid #000;background:#fff"><div><div class="button2_normal float_right" style=background:#00A1FF ng-click="admCtrl.addFlag = true">新增商户</div></div><div class=clear></div><div style=background:#E6EAF2;height:40px;line-height:40px;font-size:14px;margin-top:20px><div class=float_left style=padding-left:20px;width:25%>机构名称</div><div class=float_left style=padding-left:20px;width:25%>场馆名称</div><div class=float_left style=padding-left:20px;width:25%>支付宝应用号</div><div class=float_left style=padding-left:20px;width:25%>微信商户号</div></div><table style="width:1218px;border:1px solid #ddd"><tr ng-repeat="venue in admCtrl.venues"><td ng-show=venue.flag style="padding-left:18px;border:1px solid #ddd;width:25%;height:30px;line-height:30px" ng-bind=venue.orgName></td><td ng-show=!venue.flag style=padding-left:18px;width:25%;height:30px;line-height:30px;border:0></td><td style="padding-left:16px;border:1px solid #ddd;width:25%;height:30px;line-height:30px" ng-bind=venue.name></td><td class=pointer ng-click=admCtrl.show(venue) ng-show="venue.ali == \'添加\'" style="padding-left:14px;border:1px solid #ddd;width:25%;height:30px;line-height:30px;color:#00a1ff">添加</td><td class=pointer ng-click=admCtrl.show(venue) ng-show="venue.ali != \'添加\'" style="padding-left:14px;border:1px solid #ddd;width:25%;height:30px;line-height:30px" ng-bind=venue.ali></td><td class=pointer ng-click=admCtrl.show(venue) ng-show="venue.wx == \'添加\'" style="padding-left:20px;border:1px solid #ddd;width:25%;height:30px;line-height:30px;color:#00a1ff">添加</td><td class=pointer ng-click=admCtrl.show(venue) ng-show="venue.wx != \'添加\'" style="padding-left:20px;border:1px solid #ddd;width:25%;height:30px;line-height:30px" ng-bind=venue.wx></td></tr></table></div><div class=bgGary ng-show=admCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增商户</div><img src=assets/images/close.png class="float_right pointer" ng-click="admCtrl.addFlag = false"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">输入账号</div><input class="form_value float_left form_value_width" placeholder=请输入账号 ng-blur="admCtrl.judge(\'account\')" ng-class="{\'\':!admCtrl.accountFlag,\'form_value_error\':admCtrl.accountFlag}" ng-model="admCtrl.account"></div><div class=clear></div><div class=form_error_font ng-show=!admCtrl.accountFlag></div><div class=form_error_font ng-show=admCtrl.accountFlag>请输入商户号</div><div><div class="form_key float_left form_key_margin">输入密码</div><input class="form_value float_left form_value_width" placeholder=请输入密码 ng-blur="admCtrl.judge(\'password\')" ng-class="{\'\':!admCtrl.passwordFlag,\'form_value_error\':admCtrl.passwordFlag}" ng-model="admCtrl.password"></div><div class=clear></div><div class=form_error_font ng-show=!admCtrl.passwordFlag></div><div class=form_error_font ng-show=admCtrl.passwordFlag>请输入密码</div><div><div class="form_key float_left form_key_margin">输入名称</div><input class="form_value float_left form_value_width" placeholder=请输入名称 ng-blur="admCtrl.judge(\'name\')" ng-class="{\'\':!admCtrl.nameFlag,\'form_value_error\':admCtrl.nameFlag}" ng-model="admCtrl.name"></div><div class=clear></div><div class=form_error_font ng-show=!admCtrl.nameFlag></div><div class=form_error_font ng-show=admCtrl.nameFlag>请输入名称</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=admCtrl.finish()>完成</div><div class="button_normal float_right" ng-click="admCtrl.addFlag = false">取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=admCtrl.editFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">编辑</div><img src=assets/images/close.png class="float_right pointer" ng-click="admCtrl.editFlag = false"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">商户号</div><input class="form_value float_left form_value_width" placeholder=请输入商户号 ng-blur="admCtrl.judge(\'name\')" ng-model="admCtrl.wx"></div><div class=clear></div><div class=form_error_font ng-show=!admCtrl.nameFlag></div><div class=form_error_font ng-show=admCtrl.nameFlag>请输入商户号</div><div class=form_first_view style="margin-top: 0"><div class="form_key float_left form_key_margin">支付宝</div><input class="form_value float_left form_value_width" placeholder=请输入支付宝支付号 ng-blur="admCtrl.judge(\'name\')" ng-model="admCtrl.ali"></div><div class=clear></div><div class=form_error_font ng-show=!admCtrl.alipayAppIdFlag></div><div class=form_error_font ng-show=admCtrl.alipayAppIdFlag>请输入支付宝支付号</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=admCtrl.edit()>完成</div><div class="button_normal float_right" ng-click="admCtrl.editFlag = false">取消</div><div class=clear></div></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/admin/admin.html", '<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><p>The delete user and user index api routes are restricted to users with the \'admin\' role.</p><ul class=list-group><li class=list-group-item ng-repeat="user in users"><strong>{{user.name}}</strong><br><span class=text-muted>{{user.email}}</span> <a ng-click=delete(user) class=trash><span class="glyphicon glyphicon-trash pull-right"></span></a></li></ul></div>'), a.put("app/admin/reask.html", '<div class=contentBox><div style=background:#2E4351;height:60px;line-height:60px><div style="width:1280px;margin:0 auto;color:#fff"><span style=font-size:18px>场馆Saas管理</span> <span class=pointer ui-sref=adm style="margin:0 15px">机构管理</span> <span style=color:#00a1ff>反馈管理</span> <span class=pointer ng-click=reaskCtrl.logout() style=font-size:18px;margin-left:900px>退出登录</span></div></div><div style="width:1280px;padding:0px 0 20px 0px;background:#E7E6E3;min-height:800px;margin:0 auto"><div class=float_left style="padding:20px 30px 30px 30px;width:1280px;min-height:800px;border-left:1px solid #000;border-right:1px solid #000;background:#fff"><div style=background:#E6EAF2;height:40px;line-height:40px;font-size:14px><div class=float_left style=padding-left:20px;width:40%>反馈的问题</div><div class=float_left style=padding-left:20px;width:20%>创建时间</div><div class=float_left style=padding-left:20px;width:10%>用户</div><div class=float_left style=padding-left:20px;width:30%>发送反馈</div></div><table style="width:1218px;border:1px solid #ddd" ng-repeat="suggest in reaskCtrl.suggests"><tr style="border:1px solid #ddd"><td style="padding-left:16px;border:1px solid #ddd;width:40%;height:30px;line-height:30px" ng-bind=suggest.content></td><td style="padding-left:14px;border:1px solid #ddd;width:20%;height:30px;line-height:30px" ng-bind="suggest.createDate | date:\'yyyy-MM-dd HH:mm\'"></td><td style="padding-left:14px;border:1px solid #ddd;width:10%;height:30px;line-height:30px" ng-bind=suggest._member.name></td><td class=pointer ng-show=!suggest.replay style="padding-left:20px;border:1px solid #ddd;width:30%;height:30px;line-height:30px;color:#00a1ff" ng-click=reaskCtrl.reask(suggest)>发反馈</td><td ng-show=suggest.replay style="padding-left:20px;border:1px solid #ddd;width:30%;height:30px;line-height:30px" ng-bind=suggest.replay>已反馈</td></tr></table><pagination style="left:280px;margin:20px 30px 3px 0px" ng-if="reaskCtrl.pagination.numPages > 1" total-items=reaskCtrl.pagination.totalItems ng-model=reaskCtrl.pagination.page items-per-page=reaskCtrl.pagination.itemsPerPage max-size=reaskCtrl.pagination.maxSize boundary-links="{{reaskCtrl.pagination.numPages > 2}}" rotate=false num-pages=reaskCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=reaskCtrl.getSuggets()></pagination></div><div class=bgGary ng-show=reaskCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">反馈</div><img src=assets/images/close.png class="float_right pointer" ng-click="reaskCtrl.addFlag = false"></div><div class=clear></div><div class=form_first_view><textarea class="form_value float_left form_value_width" style=height:60px;width:422px;line-height:24px placeholder=请输入反馈 ng-model=reaskCtrl.content></textarea></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=reaskCtrl.finish()>完成</div><div class="button_normal float_right" ng-click="reaskCtrl.addFlag = false">取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=reaskCtrl.toastFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/rectangle2.png"><div class="float_left form_marginL_15px">操作成功</div><div class=promptClose ng-click="reaskCtrl.toastFlag = false"></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/admin/test.html", '<head><title>HTML5 GetUserMedia Demo</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"></head><div class=button ngf-select=testCtrl.upload() ng-model=testCtrl.file ngf-pattern="\'image/*\'" ngf-accept="\'image/*\'" ngf-resize="{width: 1000, height: 1000}">Upload on file select</div><input type=button title=开启摄像头 value=开启摄像头 ng-click="testCtrl.getMedia()"><br><video height=120px autoplay></video><hr><input type=button title=拍照 value=拍照 ng-click="testCtrl.getPhoto()"><br><canvas id=canvas1 height=120px></canvas><hr><input type=button title=视频 value=视频 onclick="getVedio()"><br><canvas id=canvas2 height=120px></canvas><div class=button ngf-select=testCtrl.uploadExcel() ng-model=testCtrl.execlFile ngf-pattern="\'.xlsx\'" ngf-accept="\'.xlsx\'">Upload on file select（excel导入数据）</div><script></script>'), a.put("app/cardmanager/card/banka.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div style="padding:0px 0 0 200px;min-width:900px"><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-card>实体卡管理</div><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-entity>实体卡库存</div><div class="field_titleNormal field_titleChoose">实体卡办理记录</div><div class=clear></div></div><div style="margin:0 0 0 30px"><div style="margin:40px 20px 0 0;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;min-width:106rem"><div class=float_left style=width:22rem;padding-left:20px>日期</div><div class=float_left style=width:13rem>办理人姓名</div><div class=float_left style=width:13rem>手机号</div><div class=float_left style=width:14rem>卡号</div><div class=float_left style=width:21rem>操作人员</div></div><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;min-width:106rem;margin-right:20px" ng-repeat="record in crdBankaCtrl.records"><div class="float_left ellipsis" style=width:22rem;padding-left:20px ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm\'">预订时间</div><div class="float_left ellipsis" style=width:13rem ng-bind="record.memberName?record.memberName:\'暂无\'">支付金额</div><div class="float_left ellipsis" style=width:13rem ng-bind=record.editNum>支付金额</div><div class="float_left ellipsis" style=width:14rem ng-bind="record.cardNo?record.cardNo:\'暂无\'">支付金额</div><div class="float_left ellipsis" style=width:21rem ng-bind=record.workerName>售卖</div></div><div class=select_div ng-show=crdBankaCtrl.typeFlag style=width:20rem;top:230px;left:430px><div class="select_choose ellipsis pointer" ng-click=crdBankaCtrl.chooseClass(class)>全部</div></div></div><pagination style="margin:20px 0 0 30px" ng-if="crdBankaCtrl.pagination.numPages > 1" total-items=crdBankaCtrl.pagination.totalItems ng-model=crdBankaCtrl.pagination.page items-per-page=crdBankaCtrl.pagination.itemsPerPage max-size=crdBankaCtrl.pagination.maxSize boundary-links="{{crdBankaCtrl.pagination.numPages > 2}}" rotate=false num-pages=crdBankaCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=crdBankaCtrl.pageChanged()></pagination></div></div></div><div class=bgGary ng-show=crdBankaCtrl.cardFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left" ng-bind=crdBankaCtrl.title>商品退款</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdBankaCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">卡片数量</div><input class="form_value float_left form_value_width" placeholder=请输入数字 ng-model=crdBankaCtrl.num></div><div class=clear></div><div class=form_first_view ng-show=crdBankaCtrl.objectFlag><div class="form_key float_left form_key_margin" ng-bind=crdBankaCtrl.object>发放对象</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!crdBankaCtrl.chooseObjectFlag,\'select_foucs\':crdBankaCtrl.chooseObjectFlag}" ng-click="crdBankaCtrl.chooseObjectFlag = !crdBankaCtrl.chooseObjectFlag"><div class="form_down_icon form_width_354 form_select_value_choose" style=width:345px ng-bind=crdBankaCtrl.objectName></div><div class="form_select_div form_width_354" style=width:345px ng-show=crdBankaCtrl.chooseObjectFlag><div ng-click=crdBankaCtrl.chooseObject(object) class="select_cell pointer" ng-repeat="object in crdBankaCtrl.users" ng-bind=object.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=crdBankaCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=crdBankaCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=crdBankaCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=crdBankaCtrl.wordOK>22212</div><div class=promptClose ng-click="crdBankaCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=crdBankaCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=crdBankaCtrl.wordERR>22212</div><div class=promptClose ng-click="crdBankaCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=crdBankaCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=crdBankaCtrl.wordWARN>22212</div><div class=promptClose ng-click=crdBankaCtrl.closePrompt()></div></div></div></div>'),
            a.put("app/cardmanager/card/card-entity.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div style="padding:0px 0 0 200px;min-width:900px"><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-card>实体卡管理</div><div class="field_titleNormal field_titleChoose">实体卡库存</div><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-banka>实体卡办理记录</div><div class=clear></div></div><div style="margin:0 0 0 30px"><div style="margin:40px 20px 0 0;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;min-width:106rem"><div class=float_left style=width:30rem;padding-left:20px>姓名</div><div class=float_left style=width:30rem>职位</div><div class=float_left style=width:28rem>库存</div></div><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;min-width:106rem;margin-right:20px" ng-repeat="user in crdEntityCtrl.users"><div class="float_left ellipsis" style=width:30rem;padding-left:20px ng-bind=user.name>预订时间</div><div class="float_left ellipsis" style=width:30rem>前台收银</div><div class="float_left ellipsis" style=width:28rem ng-bind=user.cardNum>预订时间</div></div><div class=select_div ng-show=crdEntityCtrl.typeFlag style=width:20rem;top:230px;left:430px><div class="select_choose ellipsis pointer" ng-click=crdEntityCtrl.chooseClass(class)>全部</div></div></div><pagination style="margin:20px 0 0 30px" ng-if="crdEntityCtrl.pagination.numPages > 1" total-items=crdEntityCtrl.pagination.totalItems ng-model=crdEntityCtrl.pagination.page items-per-page=crdEntityCtrl.pagination.itemsPerPage max-size=crdEntityCtrl.pagination.maxSize boundary-links="{{crdEntityCtrl.pagination.numPages > 2}}" rotate=false num-pages=crdEntityCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=crdEntityCtrl.pageChanged()></pagination></div></div></div><div class=bgGary ng-show=crdEntityCtrl.cardFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left" ng-bind=crdEntityCtrl.title>商品退款</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdEntityCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">卡片数量</div><input class="form_value float_left form_value_width" placeholder=请输入数字 ng-model=crdEntityCtrl.num></div><div class=clear></div><div class=form_first_view ng-show=crdEntityCtrl.objectFlag><div class="form_key float_left form_key_margin" ng-bind=crdEntityCtrl.object>发放对象</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!crdEntityCtrl.chooseObjectFlag,\'select_foucs\':crdEntityCtrl.chooseObjectFlag}" ng-click="crdEntityCtrl.chooseObjectFlag = true"><div class="form_down_icon form_width_354 form_select_value_choose" style=width:345px ng-bind=crdEntityCtrl.objectName></div><div class="form_select_div form_width_354" style=width:345px ng-show=crdEntityCtrl.chooseObjectFlag><div ng-click=crdEntityCtrl.chooseObject(object) class="select_cell pointer" ng-repeat="object in crdEntityCtrl.users" ng-bind=object.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=crdEntityCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=crdEntityCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=crdEntityCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=crdEntityCtrl.wordOK>22212</div><div class=promptClose ng-click="crdEntityCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=crdEntityCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=crdEntityCtrl.wordERR>22212</div><div class=promptClose ng-click="crdEntityCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=crdEntityCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=crdEntityCtrl.wordWARN>22212</div><div class=promptClose ng-click=crdEntityCtrl.closePrompt()></div></div></div></div>'), a.put("app/cardmanager/card/card.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div style="padding:0px 0 0 200px;min-width:900px"><div class=field_titleBox><div class="field_titleNormal field_titleChoose">实体卡管理</div><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-entity>实体卡库存</div><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-banka>实体卡办理记录</div><div class=clear></div></div><div style="margin:20px 0 0 30px"><div class="button2_normal float_left" ng-click="crdCardCtrl.cardFunction(\'enter\')" style="background:#fff;color:#000;margin-right:10px;border:1px solid #ddd">卡入库</div><div class="button2_normal float_left" ng-click="crdCardCtrl.cardFunction(\'send\')" style="background:#fff;margin-right:10px;color:#000;border:1px solid #ddd">卡发放</div><div class="button2_normal float_left" ng-click="crdCardCtrl.cardFunction(\'re\')" style="background:#fff;margin-right:10px;color:#000;border:1px solid #ddd">卡回收</div><div class="button2_normal float_left" ng-click="crdCardCtrl.cardFunction(\'bad\')" style="background:#fff;color:#000;border:1px solid #ddd">卡报销</div></div><div class=clear></div><div style="margin:0 0 0 30px"><div style="margin:40px 20px 0 0;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;min-width:106rem"><div class=float_left style=width:22rem;padding-left:20px>日期</div><div class=float_left style=width:14rem>数量</div><div class=float_left style=width:28rem>详情</div><div class=float_left style=width:21rem>总库库存</div><div class=float_left style=width:21rem>操作人员</div></div><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;min-width:106rem;margin-right:20px" ng-repeat="record in crdCardCtrl.records"><div class="float_left ellipsis" style=width:22rem;padding-left:20px ng-bind="record.createDate | date:\'yyyy-MM-dd\'">预订时间</div><div class="float_left ellipsis" style=width:14rem ng-bind=record.editNum>支付金额</div><div class="float_left ellipsis" style=width:28rem ng-bind=record.describtion>预订时间</div><div class="float_left ellipsis" style=width:21rem ng-bind=record.total>支付金额</div><div class="float_left ellipsis" style=width:21rem ng-bind=record.workerName>售卖</div></div><div class=select_div ng-show=crdCardCtrl.typeFlag style=width:20rem;top:230px;left:430px><div class="select_choose ellipsis pointer" ng-click=crdCardCtrl.chooseClass(class)>全部</div></div></div><pagination style="margin:20px 0 0 30px" ng-if="crdCardCtrl.pagination.numPages > 1" total-items=crdCardCtrl.pagination.totalItems ng-model=crdCardCtrl.pagination.page items-per-page=crdCardCtrl.pagination.itemsPerPage max-size=crdCardCtrl.pagination.maxSize boundary-links="{{crdCardCtrl.pagination.numPages > 2}}" rotate=false num-pages=crdCardCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=crdCardCtrl.pageChanged()></pagination></div></div></div><div class=bgGary ng-show=crdCardCtrl.cardFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left" ng-bind=crdCardCtrl.title>商品退款</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdCardCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">卡片数量</div><input class="form_value float_left form_value_width" placeholder=请输入数字 ng-model=crdCardCtrl.num></div><div class=clear></div><div class=form_first_view ng-show=crdCardCtrl.objectFlag><div class="form_key float_left form_key_margin" ng-bind=crdCardCtrl.object>发放对象</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!crdCardCtrl.chooseObjectFlag,\'select_foucs\':crdCardCtrl.chooseObjectFlag}" ng-click="crdCardCtrl.chooseObjectFlag = !crdCardCtrl.chooseObjectFlag"><div class="form_down_icon form_width_354 form_select_value_choose" style=width:345px ng-bind=crdCardCtrl.objectName></div><div class="form_select_div form_width_354" style=width:345px ng-show=crdCardCtrl.chooseObjectFlag><div ng-click=crdCardCtrl.chooseObject(object) class="select_cell pointer" ng-repeat="object in crdCardCtrl.users" ng-bind=object.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=crdCardCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=crdCardCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=crdCardCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=crdCardCtrl.wordOK>22212</div><div class=promptClose ng-click="crdCardCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=crdCardCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=crdCardCtrl.wordERR>22212</div><div class=promptClose ng-click="crdCardCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=crdCardCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=crdCardCtrl.wordWARN>22212</div><div class=promptClose ng-click=crdCardCtrl.closePrompt()></div></div></div></div>'), a.put("app/cardmanager/card/dummy-enter.html", '<div style="min-width: 900px"><div class="button2_normal float_left" style="margin:20px 20px 0 0" ngf-select=crdDummyCtrl.uploadExcel() ng-model=crdDummyCtrl.execlFile ngf-pattern="\'.xlsx\'" ngf-accept="\'.xlsx\'">导入xls</div><a href=assets/docs/demo_vir.xlsx target=_blank><div class="button2_normal float_left" style="margin:20px 20px 0 0;background:#fff;color:#999;border:1px solid #999">下载xls模板</div></a><div class="button2_normal float_right" ng-show=crdDummyCtrl.applyFlagE style="margin:20px 0 0 0" ng-click=crdDummyCtrl.toastPay()>确认充值</div><div class="button2_normal float_right" ng-show=!crdDummyCtrl.applyFlagE style="margin:20px 0 0 0;background:#999">确认充值</div></div><div class=clear></div><div style=z-index:888><div><div style="margin-top:40px;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;padding-left:20px;min-width:106rem"><div class="float_left ellipsis" style=width:3rem><img ng-show=crdDummyCtrl.selectFlagE ng-click=crdDummyCtrl.selectE(false) class=pointer src="assets/images/select_box_on.png"> <img ng-show=!crdDummyCtrl.selectFlagE ng-click=crdDummyCtrl.selectE(true) class=pointer src="assets/images/select_box.png"> <span></span></div><div class="float_left ellipsis" style=width:25rem>姓名</div><div class="float_left ellipsis" style=width:25rem>手机号</div><div class="float_left ellipsis" style=width:25rem>充值金额</div></div><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;padding-left:20px;min-width:106rem" ng-repeat="member in crdDummyCtrl.eMembers"><div class="float_left ellipsis" style=width:3rem><img ng-show=member.select ng-click=crdDummyCtrl.changeSelectE(member) class=pointer src="assets/images/select_box_on.png"> <img ng-show=!member.select ng-click=crdDummyCtrl.changeSelectE(member) class=pointer src="assets/images/select_box.png"></div><div class="float_left ellipsis" style=width:25rem ng-bind="member.name?member.name:\'暂无\'">2</div><div class="float_left ellipsis" ng-show=member.flag style=width:25rem;color:red ng-bind="member.tel?member.tel:\'暂无\'">2</div><div class="float_left ellipsis" ng-show=!member.flag style=width:25rem ng-bind="member.tel?member.tel:\'暂无\'">2</div><div class="float_left ellipsis" style=width:25rem><span ng-bind="member.total?member.total:\'暂无\'"></span><span style=color:#00a1ff;margin-left:10px class=pointer ng-click=crdDummyCtrl.changePrice(member)>修改金额</span></div></div><div ng-show="crdDummyCtrl.eMembers.length>0" style=margin-top:20px;font-size:18px><span>总计余额:</span> <span ng-bind=crdDummyCtrl.t>33</span></div></div><div class=bgGary ng-show=crdDummyCtrl.payFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">修改金额</div><img src=assets/images/close.png class="float_right pointer" ng-click=crdDummyCtrl.close()></div><div class=clear></div><div style=margin-top:10px><div><div class="form_key float_left form_key_margin">修改金额</div><input class="form_value float_left form_value_width" placeholder=请输入修改金额 ng-model=crdDummyCtrl.cp></div><div class=clear></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=crdDummyCtrl.edit()>确认修改</div><div class="button_normal float_right" ng-click=crdDummyCtrl.close()>取消</div><div class=clear></div></div></div></div></div></div>'), a.put("app/cardmanager/card/dummy-normal.html", '<div style="margin-top:20px;min-width: 900px"><div class="form_value form_width_250 float_left" style="margin:10px 0 0 0"><input style=border:0;height:32px;width:200px placeholder=搜索会员(手机号/姓名/卡号) ng-model="crdDummyCtrl.searchName"> <img src=assets/images/search.png class=pointer style="margin:0 0 5px 5px" ng-click="crdDummyCtrl.getMemberCard()"></div><div class="button2_normal float_right" ng-show=crdDummyCtrl.applyFlag style="margin:10px 0 0 0" ng-click="crdDummyCtrl.payFlag = true">充值</div><div class="button2_normal float_right" ng-show=!crdDummyCtrl.applyFlag style="margin:10px 0 0 0;background:#999">充值</div><div class=clear></div></div><div class=clear></div><div style=z-index:888><div><div style="margin:40px 0 0 00px;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:700;min-width:106rem"><div class="float_left ellipsis" style=width:3rem;padding-left:10px><img ng-show=crdDummyCtrl.selectFlag ng-click=crdDummyCtrl.select(false) class=pointer src="assets/images/select_box_on.png"> <img ng-show=!crdDummyCtrl.selectFlag ng-click=crdDummyCtrl.select(true) class=pointer src="assets/images/select_box.png"> <span></span></div><div class="float_left ellipsis" style=width:17rem>姓名</div><div class="float_left ellipsis" style=width:17rem>手机号</div><div class="float_left ellipsis pointer" style=width:17rem ng-click="crdDummyCtrl.downFlag = !crdDummyCtrl.downFlag"><span ng-bind=crdDummyCtrl.type>会员类型</span> <img src=assets/images/arrow.png style="width:13px"></div><div class="float_left ellipsis" style=width:17rem>虚拟账户余额</div><div class="float_left ellipsis" style=width:17rem>过期日期</div></div><div ng-show=crdDummyCtrl.downFlag style="border:1px solid #ddd;width:14rem;position:absolute;z-index:999;background:#fff;margin-left:440px"><div class=pointer style=height:30px;line-height:30px;padding-left:10px ng-repeat="type in crdDummyCtrl.types" ng-bind=type.name ng-click=crdDummyCtrl.getMember(type.name)>dd</div></div><!-- ng-repeat="product in crdDummyCtrl.buyProduct" --><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;padding-left:10px;min-width:106rem" ng-repeat="member in crdDummyCtrl.members"><div class="float_left ellipsis" style=width:2.3rem><img ng-show=member.select ng-click=crdDummyCtrl.changeSelect(member) class=pointer src="assets/images/select_box_on.png"> <img ng-show=!member.select ng-click=crdDummyCtrl.changeSelect(member) class=pointer src="assets/images/select_box.png"></div><div class="float_left ellipsis" style=width:17rem ng-bind=member.name>2</div><div class="float_left ellipsis" style=width:17rem ng-bind=member.tel>2</div><div class="float_left ellipsis" style=width:17rem ng-bind="member.type?member.type:\'暂无\'">2</div><div class="float_left ellipsis" style=width:17rem ng-bind=member.virtualAccount.total></div><div class="float_left ellipsis" style=width:17rem ng-bind="member.virtualAccount.expires_in?(member.virtualAccount.expires_in | date:\'yyyy-MM-dd\'):\'暂无\'"></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="crdDummyCtrl.pagination.numPages > 1" total-items=crdDummyCtrl.pagination.totalItems ng-model=crdDummyCtrl.pagination.page items-per-page=crdDummyCtrl.pagination.itemsPerPage max-size=crdDummyCtrl.pagination.maxSize boundary-links="{{crdDummyCtrl.pagination.numPages > 2}}" rotate=false num-pages=crdDummyCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=crdDummyCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=crdDummyCtrl.payFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">充值</div><img src=assets/images/close.png class="float_right pointer" ng-click=crdDummyCtrl.close()></div><div class=clear></div><div style="margin-top: 10px" ng-show=crdDummyCtrl.showCodeBox><div><div class="form_key float_left form_key_margin">充值金额</div><input class="form_value float_left form_value_width" placeholder=请输入充值金额 ng-model=crdDummyCtrl.price></div><div class=clear></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=crdDummyCtrl.sure()>确认充值</div><div class="button_normal float_right" ng-click=crdDummyCtrl.close()>取消</div><div class=clear></div></div></div></div></div></div>'), a.put("app/cardmanager/card/dummy-record.html", '<div><div style="margin-top: 20px;min-width:106rem"><div style="margin-top:40px;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;padding-left:20px"><div class="float_left ellipsis" style=width:14rem>日期</div><div class="float_left ellipsis" style=width:12rem>充值方式</div><div class="float_left ellipsis" style=width:33rem>充值对象</div><div class="float_left ellipsis" style=width:14rem>充值总金额</div><div class="float_left ellipsis" style=width:12rem>操作人</div><div class="float_left ellipsis" style=width:4rem>操作</div></div><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;padding-left:20px" ng-repeat="record in crdDummyCtrl.records"><div class="float_left ellipsis" style=width:14rem ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm\'"></div><div class="float_left ellipsis" style=width:12rem ng-bind="record.detail.length == 1?\'单次\':\'批量\'"></div><div class="float_left ellipsis" style=width:33rem ng-bind=record.name title={{record.name}}></div><div class="float_left ellipsis" style=width:14rem ng-bind="record.p+\'(\'+record.detail.length+\'人)\'"></div><div class="float_left ellipsis" style=width:12rem ng-bind=record.workerName></div><div class="float_left ellipsis pointer" style=width:4rem><span ng-show=!record.isCancel ng-click=crdDummyCtrl.cancel(record) style=color:#00a1ff>撤销</span><span ng-show=record.isCancel>已撤销</span></div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="crdDummyCtrl.pagination.numPages > 1" total-items=crdDummyCtrl.pagination.totalItems ng-model=crdDummyCtrl.pagination.page items-per-page=crdDummyCtrl.pagination.itemsPerPage max-size=crdDummyCtrl.pagination.maxSize boundary-links="{{crdDummyCtrl.pagination.numPages > 2}}" rotate=false num-pages=crdDummyCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=crdDummyCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=crdDummyCtrl.noFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdDummyCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>确认需要撤销该次充值？</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=crdDummyCtrl.close()>不撤销了</div><div class="button_normal float_right" ng-click=crdDummyCtrl.no()>继续撤销</div><div class=clear></div></div></div></div></div>'), a.put("app/cardmanager/card/dummy.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal {{crdDummyCtrl.titleState==\'normal\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="crdDummyCtrl.changeTitle(\'normal\')">常规充值</div><div class="field_titleNormal {{crdDummyCtrl.titleState==\'enter\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="crdDummyCtrl.changeTitle(\'enter\')">批量导入充值</div><div class="field_titleNormal {{crdDummyCtrl.titleState==\'record\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="crdDummyCtrl.changeTitle(\'record\')">充值记录</div></div><div class=field_bookBoxPostition ui-view=""></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=crdDummyCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=crdDummyCtrl.wordOK>22212</div><div class=promptClose ng-click="crdDummyCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=crdDummyCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=crdDummyCtrl.wordERR>22212</div><div class=promptClose ng-click="crdDummyCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=crdDummyCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=crdDummyCtrl.wordWARN>22212</div><div class=promptClose ng-click="crdDummyCtrl.promptWARN = false"></div></div></div></div><div class=bgGary ng-show=crdDummyCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdDummyCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4 ng-bind=crdDummyCtrl.pWord>是否删除原来的列表内容?</div></div><div class=clear></div></div><div class=form_submit ng-show=!crdDummyCtrl.pFlag><div class="button2_normal float_right form_create_view" ng-click=crdDummyCtrl.delete(false)>不删了</div><div class="button_normal float_right" ng-click=crdDummyCtrl.delete(true)>删除</div><div class=clear></div></div><div class=form_submit ng-show=crdDummyCtrl.pFlag><div class="button2_normal float_right form_create_view" ng-click=crdDummyCtrl.judgePay()>是的</div><div class="button_normal float_right" ng-click="crdDummyCtrl.deleteFlag = false">不充了</div><div class=clear></div></div></div></div></div>'), a.put("app/cardmanager/card/userecord.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div style="padding:0px 0 0 200px;min-width:900px"><div style="margin:0 0 0 30px"><div style="margin:40px 20px 0 0;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;min-width:106rem"><div class=float_left style=width:14rem;padding-left:20px>充值时间</div><div class=float_left style=width:14rem>充值卡卡号</div><div class=float_left style=width:14rem>金额</div><div class=float_left style=width:10rem>充值类型</div><div class=float_left style=width:10rem>会员姓名</div><div class=float_left style=width:10rem>手机</div><div class=float_left style=width:21rem>操作人员</div></div><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;min-width:106rem;margin-right:20px" ng-repeat="record in crdUserecordCtrl.records"><div class="float_left ellipsis" style=width:22rem;padding-left:20px ng-bind="record.createDate | date:\'yyyy-MM-dd\'">预订时间</div><div class="float_left ellipsis" style=width:14rem ng-bind=record.editNum>支付金额</div><div class="float_left ellipsis" style=width:28rem ng-bind=record.describtion>预订时间</div><div class="float_left ellipsis" style=width:21rem ng-bind=record.total>支付金额</div><div class="float_left ellipsis" style=width:21rem ng-bind=record.workerName>售卖</div></div><div class=select_div ng-show=crdUserecordCtrl.typeFlag style=width:20rem;top:230px;left:430px><div class="select_choose ellipsis pointer" ng-click=crdUserecordCtrl.chooseClass(class)>全部</div></div></div><pagination style="margin:20px 0 0 30px" ng-if="crdUserecordCtrl.pagination.numPages > 1" total-items=crdUserecordCtrl.pagination.totalItems ng-model=crdUserecordCtrl.pagination.page items-per-page=crdUserecordCtrl.pagination.itemsPerPage max-size=crdUserecordCtrl.pagination.maxSize boundary-links="{{crdUserecordCtrl.pagination.numPages > 2}}" rotate=false num-pages=crdUserecordCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=crdUserecordCtrl.pageChanged()></pagination></div></div></div><div class=bgGary ng-show=crdUserecordCtrl.cardFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left" ng-bind=crdUserecordCtrl.title>商品退款</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdUserecordCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">卡片数量</div><input class="form_value float_left form_value_width" placeholder=请输入数字 ng-model=crdUserecordCtrl.num></div><div class=clear></div><div class=form_first_view ng-show=crdUserecordCtrl.objectFlag><div class="form_key float_left form_key_margin" ng-bind=crdUserecordCtrl.object>发放对象</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!crdUserecordCtrl.chooseObjectFlag,\'select_foucs\':crdUserecordCtrl.chooseObjectFlag}" ng-click="crdUserecordCtrl.chooseObjectFlag = !crdUserecordCtrl.chooseObjectFlag"><div class="form_down_icon form_width_354 form_select_value_choose" style=width:345px ng-bind=crdUserecordCtrl.objectName></div><div class="form_select_div form_width_354" style=width:345px ng-show=crdUserecordCtrl.chooseObjectFlag><div ng-click=crdUserecordCtrl.chooseObject(object) class="select_cell pointer" ng-repeat="object in crdUserecordCtrl.users" ng-bind=object.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=crdUserecordCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=crdUserecordCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=crdUserecordCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=crdUserecordCtrl.wordOK>22212</div><div class=promptClose ng-click="crdUserecordCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=crdUserecordCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=crdUserecordCtrl.wordERR>22212</div><div class=promptClose ng-click="crdUserecordCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=crdUserecordCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=crdUserecordCtrl.wordWARN>22212</div><div class=promptClose ng-click=crdUserecordCtrl.closePrompt()></div></div></div></div>'), a.put("app/cardmanager/finance/shop/finance-shop.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleChoose">小卖部收入</div></div><div class=field_bookBoxPostition><div><div><div class=field_selectBoxOne style="height: auto"><div><div><div class=field_selectName style="text-indent: 0;width: 80px">选择日期</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="crdFinanceShopCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="crdFinanceShopCtrl.showChooseStartDateBox=!crdFinanceShopCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=crdFinanceShopCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=crdFinanceShopCtrl.closeChooseStartDateBox() ng-date=crdFinanceShopCtrl.startDate></datetimepick></div></div><div class=float_left style="height: 40px;line-height: 40px;padding: 0 10px">至</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="crdFinanceShopCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="crdFinanceShopCtrl.showChooseEndDateBox=!crdFinanceShopCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=crdFinanceShopCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=crdFinanceShopCtrl.closeChooseEndDateBox() ng-date=crdFinanceShopCtrl.endDate></datetimepick></div></div><div ng-show="crdFinanceShopCtrl.searchVenueIdArr.length>0"><div class="button2_normal float_right pointer" style="margin:0 20px" ng-click=crdFinanceShopCtrl.export()>导出</div></div><div style=clear:both></div></div><div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择场馆</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="venue in crdFinanceShopCtrl.venues" ng-click="(venue.image==\'manyChoose_imageG\')?\'\':crdFinanceShopCtrl.chooseVenueName(venue)"><div class="singleChoose_imageBox {{venue.image}} {{venue.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=venue.name style="{{venue.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择提交人</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="worker in crdFinanceShopCtrl.workers" ng-click="(worker.image==\'manyChoose_imageG\')?\'\':crdFinanceShopCtrl.chooseWorkerName(worker)"><div class="singleChoose_imageBox {{worker.image}} {{worker.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=worker.name style="{{worker.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div style=clear:both></div></div></div></div></div><table id=alltable style="width: 106rem"><tr><td colspan=11><span>小卖部消费汇总表：</span> <span ng-bind=crdFinanceShopCtrl.venueName></span></td></tr><tr><td colspan=11><span>时间范围：</span> <span ng-bind=crdFinanceShopCtrl.dateName></span></td></tr><tr><td>柜员名</td><td>现金支付</td><td>微信支付</td><td>支付宝支付</td><td>转账支付</td><td>支票支付</td><td>POS机支付</td><td>余额支付</td><td>退款</td><td style="color: #20a0ff">合计</td><td>详情</td></tr><tr class=trHover ng-repeat="worker in crdFinanceShopCtrl.records"><td ng-bind=worker.workerName></td><td ng-bind=worker.payment.cash></td><td ng-bind=worker.payment.wx></td><td ng-bind=worker.payment.alipay></td><td ng-bind=worker.payment.card></td><td ng-bind=worker.payment.check></td><td ng-bind=worker.payment.pos></td><td ng-bind=worker.payment.member></td><td ng-bind=worker.payment.refund></td><td ng-bind=worker.payment.subtotal style="color: #20a0ff"></td><td style="color: #20a0ff;cursor: pointer" ng-click=crdFinanceShopCtrl.initCondition(worker._worker,worker.workerName)>详情</td></tr><tr class=trHover><td colspan=1>制表人：</td><td colspan=1></td><td colspan=1>复核人：</td><td colspan=1></td><td colspan=1>审核人：</td><td colspan=6></td></tr></table></div></div></div></div></div></div><style>table{\n        border:1px solid #000;\n        text-align: center;\n        margin-top: 20px;\n    }\n    tr{\n        border:1px solid #000;\n    }\n    td{\n        border:1px solid #000;\n        padding:5px; \n    }</style><!-- 纠错操作 --><div class=bgGary ng-show=crdFinanceShopCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=crdFinanceShopCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{crdFinanceShopCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="crdFinanceShopCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{crdFinanceShopCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="crdFinanceShopCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=crdFinanceShopCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=crdFinanceShopCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=crdFinanceShopCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=crdFinanceShopCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 预览详情 --><div class=bgGary ng-show=crdFinanceShopCtrl.showDetail><div class=middle><div id=box class="form_div center" style="width: 63rem;max-height: 650px;overflow-y: auto;padding: 20px;padding-bottom: 50px;border-radius: 10px;box-shadow: #ccc 0 0 3px 3px"><div><div class="form_title float_left">小卖部消费明细表</div><img src=assets/images/close.png class="float_right pointer" ng-click=crdFinanceShopCtrl.close()></div><div class=clear></div><table id=table style="width: 60rem"><tr><td colspan=6><span ng-bind=crdFinanceShopCtrl.workerName></span> <span>的小卖部消费明细表：</span> <span ng-bind=crdFinanceShopCtrl.venueName></span></td></tr><tr><td colspan=6><span>时间范围：</span> <span ng-bind=crdFinanceShopCtrl.dateName></span></td></tr><tr><td colspan=2>商品名称</td><td colspan=1>余额支付</td><td colspan=1>非余额支付</td><td colspan=1>数量</td><td colspan=1>金额</td></tr><tr class=trHover ng-repeat="shop in crdFinanceShopCtrl.shopDetails"><td colspan=2 ng-bind=shop.name></td><td colspan=1 ng-bind=shop.member></td><td colspan=1 ng-bind=shop.noMember></td><td colspan=1 ng-bind=shop.quantity></td><td colspan=1 ng-bind=shop.subTotal></td></tr><tr class=trHover><td style="width: 10rem" colspan=1>制表人：</td><td style="width: 10rem" colspan=1 ng-bind=crdFinanceShopCtrl.workerName></td><td style="width: 10rem" colspan=1>复核人：</td><td style="width: 10rem" colspan=1></td><td style="width: 10rem" colspan=1>审核人：</td><td style="width: 10rem" colspan=1></td></tr></table><div><div class="button2_normal pointer" style="margin-top:20px;width: 80px" ng-click="crdFinanceShopCtrl.export(\'table\')">导出</div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=crdFinanceShopCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=crdFinanceShopCtrl.wordOK>22212</div><div class=promptClose ng-click=crdFinanceShopCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=crdFinanceShopCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=crdFinanceShopCtrl.wordERR>22212</div><div class=promptClose ng-click=crdFinanceShopCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=crdFinanceShopCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=crdFinanceShopCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'),
            a.put("app/cardmanager/member/member-detail-info.html", '<div style="min-width: 900px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div style=margin:20px><div class="float_left pointer" ui-sref=crd-member>会员管理</div><img class=float_left src=assets/images/gang.png style="height:16px;margin:-0px 5px"><div class=float_left style=color:#99a9bf ng-bind=crdMemberDetailCtrl.member.name></div><div class=clear></div></div><div class=field_titleBox><div class="field_titleNormal field_titleChoose">基本信息</div><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-member-detail.record>消费&充值记录</div><div class=clear></div></div><div style="margin-left: 20px"><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">会员姓名</div><input class="float_left width_355" style="border:1px solid #ddd;border-radius:4px;height:40px;margin-top:20px;padding:0 0 0 10px" ng-change=crdMemberDetailCtrl.judge() ng-model="crdMemberDetailCtrl.name"><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">手机号码</div><input class="float_left width_355" style="border:1px solid #ddd;border-radius:4px;height:40px;margin-top:20px;padding:0 0 0 10px" ng-change=crdMemberDetailCtrl.judge() ng-model="crdMemberDetailCtrl.tel"><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">身份证号</div><input class="float_left width_355" style="border:1px solid #ddd;border-radius:4px;height:40px;margin-top:20px;padding:0 0 0 10px" ng-change=crdMemberDetailCtrl.judge() ng-model="crdMemberDetailCtrl.idCard"><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">会员卡号</div><div class="float_left width_355" style="border:1px solid #ddd;border-radius:4px;height:40px;margin-top:20px;padding:12px 0 0 10px" ng-bind="crdMemberDetailCtrl.member.cardNo?crdMemberDetailCtrl.member.cardNo:\'暂无\'">小七</div><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">会员类型</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!crdMemberDetailCtrl.chooseTypeFlag,\'select_foucs\':crdMemberDetailCtrl.chooseTypeFlag}" style="margin:20px 0 0 0" ng-click="crdMemberDetailCtrl.chooseTypeFlag = !crdMemberDetailCtrl.chooseTypeFlag"><div class="form_down_icon form_width_354 form_select_value_choose" ng-bind=crdMemberDetailCtrl.typeName></div><div class="form_select_div form_width_354" ng-show=crdMemberDetailCtrl.chooseTypeFlag><div ng-click=crdMemberDetailCtrl.chooseType(type) class="select_cell pointer" ng-repeat="type in crdMemberDetailCtrl.types" ng-bind=type.name onclick="event.cancelBubble = true">默认按钮</div></div></div><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">现金账户</div><div class=float_left><div class=width_355 style="border:1px solid #ddd;border-radius:4px;padding:10px;margin-top:20px"><div><span>￥</span><span ng-bind="crdMemberDetailCtrl.member.cards.length>0?crdMemberDetailCtrl.member.cards[0].total:\'0\'">999</span></div></div></div><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">虚拟账户</div><div class=float_left><div class=width_355 style="border:1px solid #ddd;border-radius:4px;padding:10px;margin-top:20px;height:36px"><div class=float_left>￥</div><div class=float_left ng-bind=crdMemberDetailCtrl.member.virtualAccount.total>999</div><div class=float_right style=color:#999 ng-bind="crdMemberDetailCtrl.member.virtualAccount.expires_in?(crdMemberDetailCtrl.member.virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期\':\'无\'">999</div></div></div><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px" ng-show="crdMemberDetailCtrl.speAccount.length > 0">专用账户</div><div class=float_left ng-show="crdMemberDetailCtrl.speAccount.length > 0"><div ng-repeat="account in crdMemberDetailCtrl.speAccount"><div class=width_355 style="border:1px solid #ddd;border-radius:4px;padding:10px;margin-top:20px;height:36px"><div class=float_left>￥</div><div class=float_left ng-bind=account.total>999</div><div class=float_right style=color:#999 ng-bind=account.name>999</div></div><div class=clear></div></div></div><div class=clear></div><div class="button2_normal float_left" style="margin:20px 20px 0 120px" ng-show=crdMemberDetailCtrl.judgeFlag ng-click=crdMemberDetailCtrl.update()>保存</div><div class="button2_normal float_left" style="margin:20px 20px 0 120px;background:#ccc" ng-show=!crdMemberDetailCtrl.judgeFlag>保存</div><div class="button2_normal float_left" style="background:#ccc;margin:20px 20px 0 0px" ng-click="crdMemberDetailCtrl.refundFlag = true">退余额</div></div><div class=bgGary ng-show=crdMemberDetailCtrl.refundFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">退余额</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdMemberDetailCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入退款金额 ng-class="{\'\':!crdMemberDetailCtrl.priceFlag,\'form_value_error\':crdMemberDetailCtrl.priceFlag}" ng-model="crdMemberDetailCtrl.price"></div><div class=clear></div><div class=form_error_font ng-show=!crdMemberDetailCtrl.priceFlag></div><div class=form_error_font ng-show=crdMemberDetailCtrl.priceFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">输验证码</div><input class="form_value float_left form_value_width" placeholder=请输入验证码 ng-class="{\'\':!crdMemberDetailCtrl.smsFlag,\'form_value_error\':crdMemberDetailCtrl.smsFlag}" ng-model="crdMemberDetailCtrl.code"></div><div class=clear></div><div class=form_error_font ng-show=!crdMemberDetailCtrl.smsFlag></div><div class=form_error_font ng-show=crdMemberDetailCtrl.smsFlag>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=crdMemberDetailCtrl.refund()>确认退还</div><div class="button_normal float_right" ng-click="crdMemberDetailCtrl.sendToFlag = true">发送验证码</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=crdMemberDetailCtrl.sendToFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">选择场馆管理员</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdMemberDetailCtrl.sendToFlag = false"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">场馆管理</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!crdMemberDetailCtrl.chooseObjectFlag,\'select_foucs\':crdMemberDetailCtrl.chooseObjectFlag}" ng-click="crdMemberDetailCtrl.chooseObjectFlag = !crdMemberDetailCtrl.chooseObjectFlag"><div class="form_down_icon form_width_354 form_select_value_choose" style=width:345px ng-bind=crdMemberDetailCtrl.objectName></div><div class="form_select_div form_width_354" style=width:345px ng-show=crdMemberDetailCtrl.chooseObjectFlag><div ng-click=crdMemberDetailCtrl.chooseObject(object) class="select_cell pointer" ng-repeat="object in crdMemberDetailCtrl.users" ng-bind=object.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=crdMemberDetailCtrl.sendSms()>完成</div><div class="button_normal float_right" ng-click="crdMemberDetailCtrl.sendToFlag = false">取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=crdMemberDetailCtrl.toastFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/rectangle2.png"><div class="float_left form_marginL_15px">保存成功</div></div></div></div><div class=bgGary style=z-index:999 ng-show=crdMemberDetailCtrl.sendFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/rectangle2.png"><div class="float_left form_marginL_15px">发送成功</div></div></div></div><div class=bgGary ng-show=crdMemberDetailCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>退款成功</div><div class=promptClose ng-click="crdMemberDetailCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary style=z-index:999 ng-show=crdMemberDetailCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=crdMemberDetailCtrl.wordERR>22212</div><div class=promptClose ng-click="crdMemberDetailCtrl.promptERR = false"></div></div></div></div></div><style></style>'), a.put("app/cardmanager/member/member-detail-record.html", '<div style="min-width: 900px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div style=margin:20px><div class="float_left pointer" ui-sref=crd-member>会员管理</div><img class=float_left src=assets/images/gang.png style="height:16px;margin:-0px 5px"><div class=float_left style=color:#00A1FF ng-bind=crdMemberDetailCtrl.member.name></div><div class=clear></div></div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-member-detail.info>基本信息</div><div class="field_titleNormal field_titleChoose">消费&充值记录</div><div class=clear></div></div><div style="margin:40px 20px 0 0;padding-bottom:20px;border-bottom:1px solid #94A8BA;margin-left:20px;font-weight:medium;min-width:106rem"><div class=float_left style=width:13rem;padding-left:20px>支付日期</div><div class=float_left style=width:13rem>支付方式</div><div class=float_left style=width:35rem>明细</div><div class=float_left style=width:10rem>操作人</div><div class=float_left style=width:15rem>流水号</div><div class=float_left style=width:15rem>消费金额</div><!--  <div class="float_left">账户余额</div> --></div><div class=clear></div><div><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;margin:0 20px;color:#526874;min-width:106rem" ng-repeat="record in crdMemberDetailCtrl.records"><div class=float_left style=width:13rem;padding-left:20px ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm\'"></div><div class="float_left ellipsis" style=width:13rem ng-bind=record.pm>黄金会员</div><div class="float_left ellipsis" style=width:35rem ng-bind=record.description>黄金会员</div><div class="float_left ellipsis" style=width:10rem ng-bind="record.workerName?record.workerName:\'自助机\'">黄金会员</div><div class="float_left ellipsis" style=width:15rem ng-bind=record._id>黄金会员</div><div class=float_left style=width:15rem ng-bind=record.price></div><!--  <div class="float_left" ng-bind="\'￥\'+record.total">$999</div> --></div><div class=clear></div><pagination style="left:280px;margin:20px 30px 3px 20px" ng-if="crdMemberDetailCtrl.pagination.numPages > 1" total-items=crdMemberDetailCtrl.pagination.totalItems ng-model=crdMemberDetailCtrl.pagination.page items-per-page=crdMemberDetailCtrl.pagination.itemsPerPage max-size=crdMemberDetailCtrl.pagination.maxSize boundary-links="{{crdMemberDetailCtrl.pagination.numPages > 2}}" rotate=false num-pages=crdMemberDetailCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=crdMemberDetailCtrl.pageChanged()></pagination></div></div>'), a.put("app/cardmanager/member/member-detail.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div ui-view="" style="padding:0px 0rem 20px 200px"></div></div>'), a.put("app/cardmanager/member/member-docord.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px;min-width: 1100px"><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-member>会员列表</div><div class="field_titleNormal field_titleChoose">重要操作记录</div><div class=clear></div><div class="form_value form_width_250" style="margin:20px 0 0 0"><input style=border:0;height:32px;width:200px placeholder=搜索会员(手机号/姓名/卡号) ng-model="crdDocordCtrl.mix"> <img src=assets/images/search.png class="student_search pointer" ng-click="crdDocordCtrl.getRecord()"></div><div style="margin:40px 20px 0 0;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;min-width:106rem"><div class=float_left style=width:15rem;padding-left:20px>操作时间</div><div class=float_left style=width:13rem>会员名称</div><div class=float_left style=width:15rem>事件</div><div class=float_left style=width:50rem>详情</div><div class=float_left style=width:15rem>操作人</div></div><div class=clear></div><div><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;margin:0 20px 0 0;color:#526874;min-width:106rem" ng-repeat="event in crdDocordCtrl.events"><div class=float_left style=width:15rem;padding-left:20px ng-bind="event.createDate | date:\'yyyy-MM-dd HH:mm\'"></div><div class="float_left ellipsis" style=width:13rem ng-bind=event.name?event.name:evnet.name_from>黄金会员</div><div class="float_left ellipsis" style=width:15rem ng-bind=event.status>黄金会员</div><div class="float_left ellipsis" style=width:50rem ng-bind=event.description>黄金会员</div><div class="float_left ellipsis" style=width:15rem ng-bind=event.workerName>黄金会员</div></div><div class=clear></div><pagination style="left:280px;margin:20px 30px 3px 20px" ng-if="crdDocordCtrl.pagination.numPages > 1" total-items=crdDocordCtrl.pagination.totalItems ng-model=crdDocordCtrl.pagination.page items-per-page=crdDocordCtrl.pagination.itemsPerPage max-size=crdDocordCtrl.pagination.maxSize boundary-links="{{crdDocordCtrl.pagination.numPages > 2}}" rotate=false num-pages=crdDocordCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=crdDocordCtrl.pageChanged()></pagination></div></div></div></div>'), a.put("app/cardmanager/member/member.html", '<div class=contentBox id=search><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px;min-width: 1100px"><div class=field_titleBox><div class="field_titleNormal field_titleChoose">会员列表</div><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-docord>重要操作记录</div><div class=clear></div><div class="form_value form_width_250 float_left" style="margin:20px 0 0 0"><input style=border:0;height:32px;width:200px placeholder=搜索会员(手机号/姓名/卡号) ng-model="crdMemberCtrl.searchName"> <img src=assets/images/search.png class="student_search pointer" ng-click="crdMemberCtrl.search()"></div><div class="button2_normal float_right" style="margin:20px 20px 0 0" ng-click=crdMemberCtrl.newAdd()>新增会员</div><div class=clear></div><div style="margin:40px 20px 0 0;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;font-size:13px;min-width:106rem"><div class=float_left style=width:11rem;padding-left:20px>姓名</div><div class=float_left style=width:14rem>手机号</div><div class="float_left pointer" ng-click="crdMemberCtrl.levelFlag = !crdMemberCtrl.levelFlag" style=width:18rem;position:relative><span>会员等级</span> <img style=width:11px src="assets/images/bdown.png"><div ng-show=crdMemberCtrl.levelFlag class=pointer style="position:absolute;border:1px solid #ddd;background:#fff;width:150px;top:15px"><div class=select_choose style=height:28px;line-height:28px ng-click="crdMemberCtrl.levelDes = \'\';crdMemberCtrl.getMember()">全部</div><div class=select_choose style=height:28px;line-height:28px ng-click="crdMemberCtrl.levelDes = \'黄金会员\';crdMemberCtrl.getMember()">黄金会员</div><div class=select_choose style=height:28px;line-height:28px ng-click="crdMemberCtrl.levelDes = \'白银会员\';crdMemberCtrl.getMember()">白银会员</div><div class=select_choose style=height:28px;line-height:28px ng-click="crdMemberCtrl.levelDes = \'普通会员\';crdMemberCtrl.getMember()">普通会员</div><div class=select_choose style=height:28px;line-height:28px ng-click="crdMemberCtrl.levelDes = \'非实名会员\';crdMemberCtrl.getMember()">非实名会员</div></div></div><div class=float_left style=width:16rem>注册日期</div><div class=float_left style=width:15rem>新卡/老卡</div><div class=float_left style=width:5rem>现金账户</div><div class=float_left style=width:5rem>虚拟账户</div><div class=float_left style=width:5rem>包玉刚账户</div><div class=float_left style=width:16rem;position:relative><span>操作</span><!-- <img style="width:11px" src="assets/images/blackdown.png" />\n                <div ng-show="crdMemberCtrl.freezeFlag" class="pointer" style="position:absolute;top:15px;border:1px solid #ddd;background:#fff;width:100px">\n                    <div class="select_choose" style="height:28px;line-height:28px" ng-click="crdMemberCtrl.isFreeze = \'\';crdMemberCtrl.getMember()">全部</div>\n                    <div class="select_choose" style="height:28px;line-height:28px" ng-click="crdMemberCtrl.isFreeze = true;crdMemberCtrl.getMember()">已冻结</div>\n                    <div class="select_choose" style="height:28px;line-height:28px" ng-click="crdMemberCtrl.isFreeze = false;crdMemberCtrl.getMember()">未冻结</div>\n                </div> --></div></div><div class=clear></div><div ng-repeat="member in crdMemberCtrl.members"><div class=pointer style="height:50px;line-height:50px;border-bottom:1px solid #ddd;margin:0 20px 0 0;font-size:13px;min-width:106rem" ui-sref=crd-member-detail.info({id:member._id,searchName:crdMemberCtrl.searchName})><div class="ellipsis float_left" style=width:6rem;padding-left:20px title={{member.name}} ng-bind=member.name></div><div class="ellipsis float_left" style=width:5rem;height:50px><span ng-show=member.mergeDate style="border:1px solid #FFD1D1;background::#FFECEC;border-radius:4px;color:#FF7B7B;padding:1px">合并过</span></div><div class="ellipsis float_left" style=width:14rem><span ng-bind="member.tel?member.tel:\'暂无\'"></span> <span style=color:#FF6F6F;font-size:10px ng-bind="member.wx?\'\':\'未绑微信\'"></span></div><div class="ellipsis float_left" style=width:18rem><div ng-show="member.cards.length==0 || member.cards[0].levelDes==\'非实名会员\'"><div class=float_left style="background:#999;width:9px;height:9px;border-radius:50%;margin:20px 10px 0 0"></div><div class=float_left style=color:#999>非实名会员</div></div><div ng-show="member.cards[0].levelDes==\'白银会员\'"><div class=float_left style="background:#A2AECF;width:9px;height:9px;border-radius:50%;margin:20px 10px 0 0"></div><div class=float_left style=color:#A2AECF>白银会员</div></div><div ng-show="member.cards[0].levelDes==\'黄金会员\'"><div class=float_left style="background:#F9CA2F;width:9px;height:9px;border-radius:50%;margin:20px 10px 0 0"></div><div class=float_left style=color:#F9CA2F>黄金会员</div></div><div ng-show="member.cards[0].levelDes==\'普通会员\'"><div class=float_left style="background:#000;width:9px;height:9px;border-radius:50%;margin:20px 10px 0 0"></div><div class=float_left style=color:#000>普通会员</div></div><span ng-show=member.realWorkerName style=color:#999 ng-bind="\'(\'+member.realWorkerName+\')\'"></span> <span ng-show="member.type&&member.type!=\'会员卡\'" ng-bind=member.type style="border:1px solid #FFD1D1;background::#FFECEC;border-radius:4px;color:#FF7B7B;padding:1px;font-size:12px"></span></div><div class="ellipsis float_left" style=width:16rem ng-bind="(member.createDate?(member.createDate | date:\'yyyy-MM-dd\'):\'无\')+\'(\'+member.workerName+\')\'"></div><div class="ellipsis float_left" style=width:15rem><span ng-show=member.cardNo ng-bind=member.cardNo></span> <span style=color:#999 ng-show=!member.cardNo>未办理</span> <span>/</span> <span ng-show=member.memberNo ng-bind=member.memberNo></span> <span style=color:#999 ng-show=!member.memberNo>未办理</span></div><div class="ellipsis float_left" style=width:5rem ng-bind="(member.cards.length>0?member.cards[0].total:\'0\')"></div><div class="ellipsis float_left" style=width:5rem ng-bind="!member.virFlag?member.virtualAccount.total:(member.virtualAccount.total==0?\'0\':member.virtualAccount.total+\'(已过期)\')"></div><div class="ellipsis float_left" style=width:5rem ng-bind="(member.accFlag?member.accTot:\'0\')"></div><div onclick="event.cancelBubble = true" ng-click=crdMemberCtrl.banka(member) class=float_left>办卡</div></div><div class=clear></div></div><div class=clear></div><pagination style="left:280px;margin:20px 30px 3px 20px" ng-if="crdMemberCtrl.pagination.numPages > 1" total-items=crdMemberCtrl.pagination.totalItems ng-model=crdMemberCtrl.pagination.page items-per-page=crdMemberCtrl.pagination.itemsPerPage max-size=crdMemberCtrl.pagination.maxSize boundary-links="{{crdMemberCtrl.pagination.numPages > 2}}" rotate=false num-pages=crdMemberCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=crdMemberCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=crdMemberCtrl.cFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">办卡</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdMemberCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">实体卡</div><input class="form_value float_left form_value_width" placeholder=请放置实体卡 ng-class="{\'\':!crdMemberCtrl.cardFlag,\'form_value_error\':crdMemberCtrl.cardFlag}" ng-model="crdMemberCtrl.cardNum"></div><div class=clear></div><div class=form_error_font ng-show=!crdMemberCtrl.cardFlag></div><div class=form_error_font ng-show=crdMemberCtrl.cardFlag>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=crdMemberCtrl.bind()>完成</div><div class="button_normal float_right" ng-click=crdMemberCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=crdMemberCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left" ng-bind=crdMemberCtrl.memTitle>新增会员</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdMemberCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">会员姓名</div><input class="form_value float_left form_value_width" placeholder=会员真实姓名 ng-blur="crdMemberCtrl.judge(\'name\')" ng-class="{\'\':!crdMemberCtrl.nameFlag,\'form_value_error\':crdMemberCtrl.nameFlag}" ng-model="crdMemberCtrl.name"><!--        <div ng-show="crdMemberCtrl.defindFlag" class="form_value float_left form_value_width" ng-bind="crdMemberCtrl.name"></div> --></div><div class=clear></div><div class=form_error_font ng-show=!crdMemberCtrl.nameFlag></div><div class=form_error_font style=margin-left:80px ng-show=crdMemberCtrl.nameFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">联系方式</div><input class="form_value float_left form_value_width" placeholder=11位手机号码 ng-blur="crdMemberCtrl.judge(\'phone\')" ng-class="{\'\':!crdMemberCtrl.phoneFlag,\'form_value_error\':crdMemberCtrl.phoneFlag}" ng-model="crdMemberCtrl.phone"><!--  <div ng-show="crdMemberCtrl.defindFlag" class="form_value float_left form_value_width" ng-bind="crdMemberCtrl.phone"></div> --></div><div class=clear></div><div class=form_error_font ng-show=!crdMemberCtrl.phoneFlag></div><div class=form_error_font style=margin-left:80px ng-show=crdMemberCtrl.phoneFlag ng-bind=crdMemberCtrl.errPhone></div><div><div class="form_key float_left form_key_margin">身份证号</div><input class="form_value float_left form_value_width" ng-class="{\'\':!crdMemberCtrl.idFlag,\'form_value_error\':crdMemberCtrl.idFlag}" placeholder=请核对身份证号 ng-model="crdMemberCtrl.idCard"></div><div class=clear></div><div class=form_error_font ng-show=!crdMemberCtrl.idFlag></div><div class=form_error_font style=margin-left:80px ng-show=crdMemberCtrl.idFlag>此项为必填项</div><div ng-show=!crdMemberCtrl.defindFlag><div class="form_key float_left form_key_margin">会员类型</div><div class="float_left pointer" ng-class="{\'select\':!crdMemberCtrl.choosedTypeFlag,\'select_foucs\':crdMemberCtrl.choosedTypeFlag}" ng-click="crdMemberCtrl.choosedTypeFlag = !crdMemberCtrl.choosedTypeFlag"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=crdMemberCtrl.typeName></div><div class=form_select_div style=width:345px ng-show=crdMemberCtrl.choosedTypeFlag><div ng-click=crdMemberCtrl.chooseType(type) class="select_cell pointer" ng-repeat="type in crdMemberCtrl.types" ng-bind=type.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div ng-show=!crdMemberCtrl.defindFlag class=form_error_font></div><div><div class="form_key float_left form_key_margin"><span>实体卡</span><span style=color:#fff>的</span></div><img src=assets/images/bluecircle.png ng-show=crdMemberCtrl.needFlag style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=!crdMemberCtrl.needFlag ng-click="crdMemberCtrl.needFlag = true" style=height:18px class="float_left form_oImage_margin"><div class="float_left pointer" style="margin:12px 20px 0 0" ng-click="crdMemberCtrl.needFlag = true">需要</div><img src=assets/images/radio_off.png ng-show=crdMemberCtrl.needFlag ng-click="crdMemberCtrl.needFlag = false" style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/bluecircle.png ng-show=!crdMemberCtrl.needFlag style=height:18px class="float_left form_oImage_margin"><div class="float_left pointer" style="margin:12px 10px 0 0" ng-click="crdMemberCtrl.needFlag = false">不需要</div></div><div class=clear></div><div class=form_error_font></div><div ng-show=crdMemberCtrl.needFlag><div class="form_key float_left form_key_margin">实体卡号</div><input class="form_value float_left form_value_width" placeholder=请放置实体卡 ng-class="{\'\':!crdMemberCtrl.cardFlag,\'form_value_error\':crdMemberCtrl.cardFlag}" ng-model="crdMemberCtrl.cardNum"></div><div class=clear></div><div class=form_error_font ng-show="crdMemberCtrl.needFlag && !crdMemberCtrl.cardFlag"></div><div class=form_error_font ng-show="crdMemberCtrl.needFlag && crdMemberCtrl.cardFlag">此项为必填项</div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=crdMemberCtrl.create()>创建</div><div class="button_normal float_right" ng-click=crdMemberCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=crdMemberCtrl.toastFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/rectangle2.png"><div class="float_left form_marginL_15px" ng-bind=crdMemberCtrl.wordOK>操作成功</div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=crdMemberCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=crdMemberCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=crdMemberCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" title={{crdMemberCtrl.wordWARN}}>支付中...</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div><!-- 错误提示 --><div class=bgGary style=z-index:999 ng-show=crdMemberCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=crdMemberCtrl.wordERR>22212</div><div class=promptClose ng-click="crdMemberCtrl.promptERR = false"></div></div></div></div><div class=bgGary ng-show=crdMemberCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdMemberCtrl.deleteFlag = false"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4 ng-bind=crdMemberCtrl.payWarn>删除项目后，场馆里该项目的场地全部会被删除。对于预定该项目的个人用户会退还预定金额。是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button_normal float_right" ng-click="crdMemberCtrl.deleteFlag = false">确定</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=crdMemberCtrl.sureFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdMemberCtrl.sureFlag = false"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4 ng-bind=crdMemberCtrl.sureWarn>删除项目后，场馆里该项目的场地全部会被删除。对于预定该项目的个人用户会退还预定金额。是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button_normal float_right" ng-click=crdMemberCtrl.surePay()>确定</div><div class=clear></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right:0px;top:10px;\n        }</style></div></div>'), a.put("app/cardmanager/setting/setting-person.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style=padding:30px;margin-left:170px;min-width:600px><div style=font-size:16px;margin-left:30px>个人信息</div><div class=form_first_view><div class="form_key float_left form_key_margin" style=margin-right:20px;width:84px;text-align:right>账号名称</div><div class="form_value float_left form_value_width" ng-bind=crdSettingPersonCtrl.account></div></div><div class=clear></div><div style=margin-top:20px><div class="form_key float_left form_key_margin" style=margin-right:20px;width:84px;text-align:right>原密码</div><input class="form_value float_left form_value_width" placeholder=请输入原密码 ng-model=crdSettingPersonCtrl.oldPassword ng-change="crdSettingPersonCtrl.judge()"></div><div class=clear></div><div style=margin-top:20px><div class="form_key float_left form_key_margin" style=margin-right:20px;width:84px;text-align:right>新密码</div><input class="form_value float_left form_value_width" placeholder=请输入新密码 ng-model=crdSettingPersonCtrl.newPassword ng-change="crdSettingPersonCtrl.judge()"></div><div class=clear></div><div class="button2_normal float_left" ng-show=!crdSettingPersonCtrl.saveFlag style="background:#ccc;margin:30px 0 0 104px">保存</div><div class="button2_normal float_left" ng-show=crdSettingPersonCtrl.saveFlag style="margin:30px 0 0 104px" ng-click=crdSettingPersonCtrl.save()>保存</div><div class="button2_normal float_left" style="background:#fff;margin:30px 0 0 20px;border:1px solid #ccc;color:#99a9bf" ng-click=crdSettingPersonCtrl.logout()>退出登录</div></div><!-- 成功提示弹框 --><div class=bgGary2 ng-show=crdSettingPersonCtrl.succeedFlag><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/rectangle2.png"><div class="float_left form_marginL_15px">修改完成</div></div></div><div class=bgGary ng-show=crdSettingPersonCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px">请正确输入密码</div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/cardmanager/setting/setting-product-info.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/crdanization/head/head.html\'"></div> --><div class=field_titleBox><div class="field_titleNormal field_titleChoose">商品基础信息</div><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-setting-supply>供应商和商品种类设置</div></div><div style="padding:20px 30px 30px 30px;min-width: 850px"><div><div class="button2_normal float_left" style=background:#00A1FF ng-click="crdProductInfoCtrl.addFlag = true">新增商品</div></div><div class=clear></div><div style="margin-top:40px;padding-bottom:20px;border-bottom:1px solid #94A8BA;color:#1F2D3D;font-size:13px;font-weight:medium;min-width:114rem"><div class=float_left style=width:14rem;padding-left:20px>商品名称</div><div class=float_left style=width:14rem>商品条码</div><div class=float_left style=width:14rem>计价单位</div><div class=float_left style=width:14rem>商品售价</div><div class=float_left style=width:14rem>商品种类</div><div class=float_left style=width:14rem>供应商</div><div class=float_left style=width:14rem>调价日期</div><div class=float_left style=width:16rem>操作</div></div><div class=clear></div><div ng-repeat="product in crdProductInfoCtrl.products" style=font-size:13px;min-width:114rem><div style="border-bottom:1px solid #ddd;display:flex;align-items:center;color:#475669;height:46px;line-height:46px"><div class=float_left style=width:14rem;padding-left:20px><span style=width:10rem ng-bind=product.name></span></div><div class=float_left style=width:14rem><span ng-bind="product.misCode?product.misCode:\'暂无\'"></span></div><div class=float_left style=width:14rem><span ng-bind=product.unit></span></div><div class=float_left style=width:14rem><span ng-bind=product.price></span></div><div class=float_left style=width:14rem><span ng-bind=product.categoryName></span></div><div class=float_left style=width:14rem><span ng-bind=product.supplyName></span></div><div class=float_left style=width:14rem><span ng-bind="product.updatePriceDate?(product.updatePriceDate | date:\'yyyy-MM-dd HH:mm\'):\'暂无\'"></span></div><div class=float_left style=width:16rem;color:#00a1ff><div ng-click=crdProductInfoCtrl.showEdit(product) class="float_left pointer">编辑</div><!-- <div ng-click="crdProductInfoCtrl.deleteFlag = true;crdProductInfoCtrl.vId = venue._id" class="float_left pointer" style="margin:0 0 0 40px;color:#99a9bc">删除</div>  --></div></div><div class=clear></div></div><pagination style="left:280px;margin:20px 30px 3px 0px" ng-if="crdProductInfoCtrl.pagination.numPages > 1" total-items=crdProductInfoCtrl.pagination.totalItems ng-model=crdProductInfoCtrl.pagination.page items-per-page=crdProductInfoCtrl.pagination.itemsPerPage max-size=crdProductInfoCtrl.pagination.maxSize boundary-links="{{crdProductInfoCtrl.pagination.numPages > 2}}" rotate=false num-pages=crdProductInfoCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=crdProductInfoCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=crdProductInfoCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">商品详情</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdProductInfoCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin" style="width: 56px">商品名称</div><input class="form_value float_left form_value_width" placeholder=请输入商品名称 ng-blur="crdProductInfoCtrl.judge(\'name\')" ng-class="{\'\':!crdProductInfoCtrl.nameFlag,\'form_value_error\':crdProductInfoCtrl.nameFlag}" ng-model="crdProductInfoCtrl.name"></div><div class=clear></div><div class=form_error_font ng-show=!crdProductInfoCtrl.nameFlag></div><div class=form_error_font ng-show=crdProductInfoCtrl.nameFlag style=margin-left:80px>此项为必填项</div><div><div class="form_key float_left form_key_margin" style="width: 56px">商品类别</div><div class="float_left pointer" style="z-index: 50" ng-class="{\'select\':!crdProductInfoCtrl.chooseProductFlag,\'select_foucs\':crdProductInfoCtrl.chooseProductFlag}" ng-click="crdProductInfoCtrl.chooseProductFlag = !crdProductInfoCtrl.chooseProductFlag"><div class="form_down_icon form_select_value_choose" style=width:346px ng-bind=crdProductInfoCtrl.categoryName></div><div class=form_select_div style=width:346px ng-show=crdProductInfoCtrl.chooseProductFlag><div ng-click=crdProductInfoCtrl.chooseCreateCategory(category) class="select_cell pointer" ng-repeat="category in crdProductInfoCtrl.shopProductCategories" ng-bind=category.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin" style="width: 56px">供应商</div><div class="float_left pointer" style="z-index: 20" ng-class="{\'select\':!crdProductInfoCtrl.chooseSupplyFlag,\'select_foucs\':crdProductInfoCtrl.chooseSupplyFlag}" ng-click="crdProductInfoCtrl.chooseSupplyFlag = !crdProductInfoCtrl.chooseSupplyFlag"><div class="form_down_icon form_select_value_choose" style=width:346px ng-bind=crdProductInfoCtrl.supplyName></div><div class=form_select_div style=width:346px ng-show=crdProductInfoCtrl.chooseSupplyFlag><div ng-click=crdProductInfoCtrl.chooseSupply(supply) class="select_cell pointer" ng-repeat="supply in crdProductInfoCtrl.supplies" ng-bind=supply.supplyName onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin" style="width: 56px">计价单位</div><input class="form_value float_left form_value_width" placeholder=请输入计价单位 ng-blur="crdProductInfoCtrl.judge(\'unit\')" ng-class="{\'\':!crdProductInfoCtrl.unitFlag,\'form_value_error\':crdProductInfoCtrl.unitFlag}" ng-model="crdProductInfoCtrl.unit"></div><div class=clear></div><div class=form_error_font ng-show=!crdProductInfoCtrl.unitFlag></div><div class=form_error_font ng-show=crdProductInfoCtrl.unitFlag style=margin-left:80px>此项为必填项</div><div><div class="form_key float_left form_key_margin" style="width: 56px">商品条码</div><input class="form_value float_left form_value_width" placeholder=请输入商品条码 ng-model="crdProductInfoCtrl.misCode"></div><div class=clear></div><div class=clear></div><div class=form_error_font ng-show=!crdProductInfoCtrl.misCodeFlag></div><div class=form_error_font ng-show=crdProductInfoCtrl.misCodeFlag style=margin-left:80px>此项为必填项</div><div><div class="form_key float_left form_key_margin" style="width: 56px">商品售价</div><input class="form_value float_left form_value_width" placeholder=请输入商品售价 ng-model="crdProductInfoCtrl.price"></div><div class=clear></div><div class=form_error_font ng-show=!crdProductInfoCtrl.priceFlag></div><div class=form_error_font ng-show=crdProductInfoCtrl.priceFlag style=margin-left:80px>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=crdProductInfoCtrl.create()>完成</div><div class="button_normal float_right" ng-click=crdProductInfoCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=crdProductInfoCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=crdProductInfoCtrl.err></div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="crdProductInfoCtrl.errorFlag = false"></div></div></div><div class=bgGary ng-show=crdProductInfoCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdProductInfoCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>此操作将永久删除该商品信息，是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=crdProductInfoCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=crdProductInfoCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div><!-- 成功提示 --><div class=bgGary ng-show=crdProductInfoCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=crdProductInfoCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="crdProductInfoCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=crdProductInfoCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=crdProductInfoCtrl.wordERR title={{crdProductInfoCtrl.wordERR}}>22212</div><div class=promptClose ng-click=crdProductInfoCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=crdProductInfoCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=crdProductInfoCtrl.wordWARN title={{crdProductInfoCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'),
            a.put("app/cardmanager/setting/setting-supply.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0px 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-setting-product-info>商品基础信息</div><div class="field_titleNormal field_titleChoose">供应商和商品种类设置</div></div><div style="padding:20px 30px 30px 30px;min-width: 850px"><div style="min-width: 850px"><div class=float_left style="height: 40px;line-height: 40px;font-weight: bold">供应商设置</div><div class="button2_normal float_right" style="background:#00A1FF;margin-right: 20px" ng-click="crdSupplyCtrl.addFlag = true">新增供应商</div></div><div class=clear></div><div style="margin-top:40px;padding-bottom:20px;border-bottom:1px solid #94A8BA;color:#1F2D3D;font-size:14px;font-weight:medium;width:114rem"><div class="float_left width_22" style=padding-left:20px>供应商名称</div><div class="float_left width_22">联系人</div><div class="float_left width_22">联系电话</div><div class="float_left width_22">是否启用</div><div class="float_left width_22">操作</div></div><div class=clear></div><div ng-repeat="supply in crdSupplyCtrl.supplies" style=font-size:14px;width:114rem><div style="border-bottom:1px solid #ddd;display:flex;align-items:center;padding:10px 0;color:#475669"><div class="float_left width_22" style=padding-left:20px;line-height:20px><span ng-bind=supply.supplyName></span></div><div class="float_left width_22"><span ng-bind=supply.workerName></span></div><div class="float_left width_22" ng-bind=supply.tel></div><div class="float_left width_22" ng-bind="supply.isUsed?\'启用\':\'不启用\'"></div><div class="float_left width_22"><img src=assets/images/edit.png ng-click=crdSupplyCtrl.showEdit(supply) class="float_left pointer" style="width:13px"> <img src=assets/images/destroy.png ng-click="crdSupplyCtrl.deleteFlag = true;crdSupplyCtrl._supplyId = supply._id" class="float_left pointer" style="width:12px;margin:0px 0 0 40px"></div></div><div class=clear></div></div><pagination style="left:280px;margin:20px 30px 3px 0px" ng-if="crdSupplyCtrl.pagination.numPages > 1" total-items=crdSupplyCtrl.pagination.totalItems ng-model=crdSupplyCtrl.pagination.page items-per-page=crdSupplyCtrl.pagination.itemsPerPage max-size=crdSupplyCtrl.pagination.maxSize boundary-links="{{crdSupplyCtrl.pagination.numPages > 2}}" rotate=false num-pages=crdSupplyCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=crdSupplyCtrl.pageChanged()></pagination></div><div style="padding:20px 30px 30px 30px;min-width: 650px"><div><div class=float_left style="height: 40px;line-height: 40px;font-weight: bold">类别设置</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="crdSupplyCtrl.addTypeFlag = true">新增类别</div></div><div class=clear></div><div style="margin-top:20px;color:#1F2D3D;font-size:14px;font-weight:medium;min-width: 100rem"><div style="width: 200px;height: 50px;line-height: 50px;border:1px solid #94A8BA;border-radius: 5px;margin-right: 20px;margin-bottom: 20px;padding: 0 20px;float: left" ng-repeat="type in crdSupplyCtrl.shopProductCategories"><span class="float_left ellipsis" style="max-width: 120px" ng-bind=type.name>xx</span> <span class="float_right pointer" style=color:#20a0ff ng-click=crdSupplyCtrl.showTypeEdit(type)>编辑</span></div></div></div></div></div><div class=bgGary ng-show=crdSupplyCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增供应商</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdSupplyCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin"><span>供应商</span><span style=color:#fff>的</span></div><input class="form_value float_left form_value_width" placeholder=请输入供应商 ng-blur="crdSupplyCtrl.judge(\'supplyName\')" ng-class="{\'\':!crdSupplyCtrl.supplyNameFlag,\'form_value_error\':crdSupplyCtrl.supplyNameFlag}" ng-model="crdSupplyCtrl.supplyName"></div><div class=clear></div><div class=form_error_font ng-show=!crdSupplyCtrl.supplyNameFlag></div><div class=form_error_font ng-show=crdSupplyCtrl.supplyNameFlag style=margin-left:80px>此项为必填项</div><div><div class="form_key float_left form_key_margin"><span>联系人</span><span style=color:#fff>的</span></div><input class="form_value float_left form_value_width" placeholder=请输入联系人 ng-blur="crdSupplyCtrl.judge(\'workerName\')" ng-class="{\'\':!crdSupplyCtrl.workerNameFlag,\'form_value_error\':crdSupplyCtrl.workerNameFlag}" ng-model="crdSupplyCtrl.workerName"></div><div class=clear></div><div class=form_error_font ng-show=!crdSupplyCtrl.workerNameFlag></div><div class=form_error_font ng-show=crdSupplyCtrl.workerNameFlag style=margin-left:80px>此项为必填项</div><div><div class="form_key float_left form_key_margin">联系电话</div><input class="form_value float_left form_value_width" placeholder=请输入联系电话 ng-blur="crdSupplyCtrl.judge(\'tel\')" ng-class="{\'\':!crdSupplyCtrl.telFlag,\'form_value_error\':crdSupplyCtrl.telFlag}" ng-model="crdSupplyCtrl.tel"></div><div class=clear></div><div class=form_error_font ng-show=!crdSupplyCtrl.telFlag></div><div class=form_error_font ng-show=crdSupplyCtrl.telFlag style=margin-left:80px>此项为必填项</div><div><div class="form_key float_left form_key_margin">是否上架</div><div class="singleChoose_box float_left"><div class=singleChoose_option ng-repeat="state in crdSupplyCtrl.stateArr" ng-click=crdSupplyCtrl.chooseState(state)><div class="singleChoose_imageBox {{state.image}}"></div><div class=singleChoose_prompt ng-bind=state.name>每周</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=crdSupplyCtrl.create()>完成</div><div class="button_normal float_right" ng-click=crdSupplyCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=crdSupplyCtrl.addTypeFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增类别</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdSupplyCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">类别名称</div><input class="form_value float_left form_value_width" placeholder=请输入类别名称 ng-blur="crdSupplyCtrl.judge(\'type\')" ng-class="{\'\':!crdSupplyCtrl.typeFlag,\'form_value_error\':crdSupplyCtrl.typeFlag}" ng-model="crdSupplyCtrl.type"></div><div class=clear></div><div class=form_error_font ng-show=!crdSupplyCtrl.typeFlag></div><div class=form_error_font ng-show=crdSupplyCtrl.typeFlag style=margin-left:80px>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=crdSupplyCtrl.createType()>完成</div><div class="button_normal float_right" ng-click=crdSupplyCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=crdSupplyCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=crdSupplyCtrl.err></div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="crdSupplyCtrl.errorFlag = false"></div></div></div><div class=bgGary ng-show=crdSupplyCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdSupplyCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>此操作将永久删除该供应商信息，是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=crdSupplyCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=crdSupplyCtrl.deleteSupply()>继续删除</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=crdSupplyCtrl.deleteTypeFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdSupplyCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>此操作将永久删除该类别，是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=crdSupplyCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=crdSupplyCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=crdSupplyCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=crdSupplyCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="crdSupplyCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=crdSupplyCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=crdSupplyCtrl.wordERR title={{crdSupplyCtrl.wordERR}}>22212</div><div class=promptClose ng-click=crdSupplyCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=crdSupplyCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=crdSupplyCtrl.wordWARN title={{crdSupplyCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n    #mid{display:table-cell;left:0;vertical-align:middle;} \n    #box{border:2px solid #ddd;} \n    .student_search{\n        position:absolute;right: 0;top: 10px;\n    }</style>'), a.put("app/cardmanager/shop/sell-record.html", '<div><div class=field_selectBox><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入商品名搜索 ng-model=crdSellCtrl.searchProductName><div class=xt_searchImage ng-click=crdSellCtrl.searchProduct()></div></div><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="crdSellCtrl.startDateFlag = !crdSellCtrl.startDateFlag;crdSellCtrl.closeDateFlag = false" ng-bind="crdSellCtrl.startDate | date:\'yyyy-MM-dd\'"></div><div class=float_left style="margin:10px 10px 0 10px">至</div><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="crdSellCtrl.closeDateFlag = !crdSellCtrl.closeDateFlag;crdSellCtrl.startDateFlag = false" ng-bind="crdSellCtrl.closeDate | date:\'yyyy-MM-dd\'"></div><div class=clear></div><div class="student_datetime student_datetime2" style="margin:380px 0 0 0"><datetimepick ng-close=crdSellCtrl.getRecord() ng-id="\'first\'" ng-show=crdSellCtrl.startDateFlag ng-date=crdSellCtrl.startDate></datetimepick></div><div class="student_datetime student_datetime2" style="margin:380px 0 0 0"><datetimepick ng-close=crdSellCtrl.getRecord() ng-id="\'second\'" ng-show=crdSellCtrl.closeDateFlag ng-date=crdSellCtrl.closeDate></datetimepick></div></div></div><div><div class=cancelTable><div class="cancelTr height_40"><div class="cancelTh ellipsis" style=width:20rem>订单号</div><div class="cancelTh ellipsis" style=width:14rem>商品名称</div><div class="cancelTh ellipsis" style=width:13rem>订单时间</div><div class="cancelTh ellipsis" style=width:5rem>售价</div><div class="cancelTh ellipsis" style=width:6rem>数量</div><div class="cancelTh ellipsis" style=width:12rem>销售额</div><div class="cancelTh ellipsis" style=width:10rem>顾客姓名</div><div class="cancelTh ellipsis" style=width:10rem>操作人</div><div class="cancelTh ellipsis" style=width:10rem>操作</div></div><div class=cancelTr ng-repeat="record in crdSellCtrl.records"><div class="cancelTd ellipsis" style=width:20rem ng-bind=record._id></div><div class="cancelTd ellipsis" style=width:14rem ng-bind=record.shopProductName></div><div class="cancelTd ellipsis" style=width:13rem ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm\'"></div><div class="cancelTd ellipsis" style=width:5rem ng-bind=record.price></div><div class="cancelTd ellipsis" style=width:6rem ng-bind=record.quantity></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=record.cost></div><div class="cancelTd ellipsis" style=width:10rem ng-bind=record.name></div><div class="cancelTd ellipsis" style=width:10rem ng-bind=record.workerName></div><div class="cancelTd ellipsis pointer" style=width:10rem;color:#00a1ff><span ng-show=!record.isRefund ng-click="crdSellCtrl.refundFlag = true;crdSellCtrl.rId = record._id">退款</span> <span ng-show=record.isRefund>已退款</span></div></div></div><div style=margin-top:20px;font-size:18px><span>总额：</span><span ng-bind=crdSellCtrl.recordTotal></span></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="crdSellCtrl.pagination.numPages > 1" total-items=crdSellCtrl.pagination.totalItems ng-model=crdSellCtrl.pagination.page items-per-page=crdSellCtrl.pagination.itemsPerPage max-size=crdSellCtrl.pagination.maxSize boundary-links="{{crdSellCtrl.pagination.numPages > 2}}" rotate=false num-pages=crdSellCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=crdSellCtrl.pageChanged()></pagination></div><!-- 商品退款 --><div class=bgGary ng-show=crdSellCtrl.refundFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">商品退款</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdSellCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">退款金额</div><input class="form_value float_left form_value_width" placeholder=请输入退款金额 ng-model=crdSellCtrl.refundPrice></div><div class=clear></div><!-- \n                <div class="form_first_view">\n                    <div class="form_key float_left form_key_margin">退款方式</div>\n                    <div class="singleChoose_box float_left">\n                        <div class="singleChoose_option" ng-repeat="refund in crdSellCtrl.refundArr" ng-click="crdSellCtrl.chooseRefund(refund)">\n                            <div class="singleChoose_imageBox {{refund.image}}"></div>\n                            <div class="singleChoose_prompt" ng-bind="refund.name">每周</div>\n                        </div>\n                    </div>\n                </div>\n                <div class="clear"></div> --></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=crdSellCtrl.refund()>完成</div><div class="button_normal float_right" ng-click=crdSellCtrl.close()>取消</div><div class=clear></div></div></div></div></div>'), a.put("app/cardmanager/shop/sell-sale.html", '<div style=margin-top:20px><div style="height: 36px;margin-top: 20px;float: left"><input style="float:left;width:160px;height:36px;text-indent:10px;border-radius:5px 0 0 5px;border:1px solid #ccc;border-right:none" placeholder="输入商品名称/条码 " ng-model=crdSellCtrl.pName ng-keydown=crdSellCtrl.addListByDown($event)><div ng-show=crdSellCtrl.pName style="float:left;height:36px;line-height:36px;text-align:center;border-radius:0 5px 5px 0;background:#20a0ff;color:#fff;cursor:pointer;padding:0 15px" ng-click=crdSellCtrl.addList()>加入购物车</div><div ng-hide=crdSellCtrl.pName style="float:left;padding:0 15px;height:36px;line-height:36px;text-align:center;border-radius:0 5px 5px 0;background:#d3dce6;color:#fff">加入购物车</div></div><div class=clear></div><div ng-show=crdSellCtrl.selectFlag style="width:160px;border:1px solid #ddd;background:#fff;z-index:999;position:relative"><div ng-show=product.isUsed ng-click=crdSellCtrl.add(product) class="pointer select_cell" ng-repeat="product in crdSellCtrl.products" ng-bind=product.name style="padding:0 10px">d</div><div ng-show=!product.isUsed ng-click="crdSellCtrl.selectFlag = false" class="pointer select_cell" ng-repeat="product in crdSellCtrl.products" style="padding:0 10px"><span class=float_left ng-bind=product.name></span><span style=float:right;color:#00a1ff>已下架</span></div></div></div><div class=clear></div><div style=margin-top:30px;z-index:888><div class=cancelTable ng-show="!crdSellCtrl.buyProduct.length == 0"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style=width:25rem>商品名称</div><div class="cancelTh ellipsis" style=width:25rem>单价</div><div class="cancelTh ellipsis" style=width:25rem>数量</div><div class="cancelTh ellipsis" style=width:25rem>总价</div></div><div class=cancelTr ng-repeat="product in crdSellCtrl.buyProduct"><div class="cancelTd ellipsis" style=width:25rem ng-bind=product.name>2</div><div class="cancelTd ellipsis" style=width:25rem ng-bind="\'￥\'+product.price">2</div><div class="cancelTd ellipsis" style=width:25rem><input ng-blur=crdSellCtrl.canPrice(product) ng-model=product.num ng-change=crdSellCtrl.calPrice(product) style=border:0;width:20px class="float_left"><div class="float_left pointer"><img src=assets/images/circleadd.png style=width:15px ng-click="crdSellCtrl.changeNum(product,\'add\')"> <img src=assets/images/circledelete.png style=width:15px ng-click="crdSellCtrl.changeNum(product,\'delete\')"></div></div><div class="cancelTd ellipsis" style=width:25rem ng-bind="\'￥\'+product.tot"></div></div><div class=select_div ng-show=crdSellCtrl.typeFlag style=width:20rem;top:230px;left:430px><div class="select_choose ellipsis pointer" ng-click=crdSellCtrl.chooseClass(class)>全部</div></div></div><div style="margin-top:20px;font-size:14px;color:#8492a6;border:1px solid #ddd;width:1000px;text-align:center;height:60px;line-height:60px" ng-show="crdSellCtrl.buyProduct.length == 0">购物车暂无商品</div><div style=margin-top:20px;font-size:14px ng-show="!crdSellCtrl.buyProduct.length == 0"><span>应付:</span> <span style=color:#ff4949>￥</span> <span style=color:#ff4949;font-size:18px ng-bind=crdSellCtrl.total></span></div><div class="button2_normal float_left" style="margin:20px 20px 0 0" ng-click=crdSellCtrl.judgePay()>立即付款</div><div class=bgGary ng-show=crdSellCtrl.payFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">发起支付</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdSellCtrl.payFlag = false"></div><div class=clear></div><div ng-show=crdSellCtrl.moneyFlag style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">需支付：</div><div class="form_value float_left form_value_width" style=border:none;color:red ng-bind="crdSellCtrl.realPrice | currency:\'￥\'"></div></div><div class=clear></div></div><div ng-show=!crdSellCtrl.moneyFlag style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">需支付：</div><div class="form_value float_left form_value_width" style=border:none;color:red ng-bind="crdSellCtrl.total | currency:\'￥\'"></div></div><div class=clear></div></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">支付方式</div><div><div class=singleChoose_option style="float: none" ng-repeat="payment in crdSellCtrl.paymentArr" ng-click=crdSellCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style=width:0;height:0;overflow:hidden><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=crdSellCtrl.auth_code ng-keypress=crdSellCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=crdSellCtrl.create()>确认支付</div><div class="button_normal float_right" ng-click="crdSellCtrl.payFlag = false">取消</div><div class=clear></div></div></div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=crdSellCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=crdSellCtrl.shut()></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=crdSellCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=crdSellCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="crdSellCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=crdSellCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=crdSellCtrl.wordERR title={{crdSellCtrl.wordERR}}>22212</div><div class=promptClose ng-click=crdSellCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=crdSellCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=crdSellCtrl.wordWARN title={{crdSellCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/cardmanager/shop/sell.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/crdanization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-shop-form>商品结存报表</div><div class="field_titleNormal field_titleChoose">销售明细</div><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-purchase-record>入库记录</div><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-return-record>报废记录</div></div><div class=field_bookBoxPostition ui-view=""></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=crdSellCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=crdSellCtrl.wordOK>22212</div><div class=promptClose ng-click="crdSellCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=crdSellCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=crdSellCtrl.wordERR>22212</div><div class=promptClose ng-click="crdSellCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=crdSellCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" title={{crdSellCtrl.wordWARN}}>支付中...</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/cardmanager/stock/purchase-record.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-shop-form>商品结存报表</div><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-sell.record>销售明细</div><div class="field_titleNormal field_titleChoose">入库记录</div><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-return-record>报废记录</div></div><div class=field_bookBoxPostition><div><div class=field_selectBox><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入商品名条码 ng-model=crdPurchaseRecordCtrl.searchProductName><!-- <div class="xt_searchImage" ng-click="crdPurchaseRecordCtrl.searchProduct()"></div> --></div><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入进货批号 ng-model=crdPurchaseRecordCtrl.orderNo><!-- <div class="xt_searchImage" ng-click="crdPurchaseRecordCtrl.searchProduct()"></div> --></div><div class=float_left style="margin-right: 20px;position: relative"><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="crdPurchaseRecordCtrl.startDateFlag = !crdPurchaseRecordCtrl.startDateFlag;crdPurchaseRecordCtrl.closeDateFlag = false" ng-bind="crdPurchaseRecordCtrl.startDate | date:\'yyyy-MM-dd\'"></div><div class=float_left style="margin:10px 10px 0 10px">至</div><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="crdPurchaseRecordCtrl.closeDateFlag = !crdPurchaseRecordCtrl.closeDateFlag;crdPurchaseRecordCtrl.startDateFlag = false" ng-bind="crdPurchaseRecordCtrl.closeDate | date:\'yyyy-MM-dd\'"></div><div class=clear></div><div class="student_datetime student_datetime2" style="position: absolute;top:36px;left: 0"><datetimepick ng-close=crdPurchaseRecordCtrl.closeDateBox() ng-id="\'first\'" ng-show=crdPurchaseRecordCtrl.startDateFlag ng-date=crdPurchaseRecordCtrl.startDate></datetimepick></div><div class="student_datetime student_datetime2" style="position: absolute;top:36px;left: 184px"><datetimepick ng-close=crdPurchaseRecordCtrl.closeDateBox() ng-id="\'second\'" ng-show=crdPurchaseRecordCtrl.closeDateFlag ng-date=crdPurchaseRecordCtrl.closeDate></datetimepick></div></div><div class=float_left style="margin-right: 20px"><div class="fbonce_bookConfirmBtn pointer" style="margin-top: 0px;height: 36px;line-height: 36px;margin-bottom: 0" ng-click=crdPurchaseRecordCtrl.check()>查询</div></div><div class=float_left><div class="fbonce_m_i_r_c_btn bgcolorW borderccc" style="color: #475669" ng-click=crdPurchaseRecordCtrl.resert()>重置</div></div><div class=clear></div></div></div><div><div class=cancelTable style="width: 114rem"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style="width:11rem;text-indent: 20px">登记时间</div><div class="cancelTh ellipsis" style=width:11rem>采购单号</div><div class="cancelTh ellipsis" style=width:11rem>商品码</div><div class="cancelTh ellipsis" style=width:11rem>商品名称</div><div class="cancelTh ellipsis" style=width:12rem>供应商名称</div><div class="cancelTh ellipsis" style=width:11rem>进货数量</div><div class="cancelTh ellipsis" style=width:11rem>进货单价</div><div class="cancelTh ellipsis" style=width:11rem>进货总价</div><div class="cancelTh ellipsis" style=width:11rem>销售单价</div><div class="cancelTh ellipsis" style=width:11rem>操作人</div><!-- <div class="cancelTh ellipsis" style="width:10rem">操作</div> --></div><div class=cancelTr ng-repeat="order in crdPurchaseRecordCtrl.orders"><div class="cancelTd ellipsis" style="width:11rem;text-indent: 20px" ng-bind="order.createDate | date:\'yyyy-MM-dd HH:mm\'"></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.orderNo></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.misCode></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.name></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=order.supplyName></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.quantity></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.purchasePrice></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.cost></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.price></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.workerName></div><!-- <div class="cancelTd ellipsis" style="width:10rem;">\n                                <span style="color:#00a1ff;cursor: pointer;" ng-show="order.canChange" ng-click="csdReturnRecordCtrl.cancel(order._id)">撤销</span>\n                                <span ng-hide="order.canChange">不可操作</span>\n                            </div> --></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="crdPurchaseRecordCtrl.pagination.numPages > 1" total-items=crdPurchaseRecordCtrl.pagination.totalItems ng-model=crdPurchaseRecordCtrl.pagination.page items-per-page=crdPurchaseRecordCtrl.pagination.itemsPerPage max-size=crdPurchaseRecordCtrl.pagination.maxSize boundary-links="{{crdPurchaseRecordCtrl.pagination.numPages > 2}}" rotate=false num-pages=crdPurchaseRecordCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=crdPurchaseRecordCtrl.pageChanged()></pagination></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=crdPurchaseRecordCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=crdPurchaseRecordCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="crdPurchaseRecordCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=crdPurchaseRecordCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=crdPurchaseRecordCtrl.wordERR title={{crdPurchaseRecordCtrl.wordERR}}>22212</div><div class=promptClose ng-click=crdPurchaseRecordCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=crdPurchaseRecordCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=crdPurchaseRecordCtrl.wordWARN title={{crdPurchaseRecordCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/cardmanager/stock/purchase.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleChoose">商品入库</div><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-stock>库存管理</div></div><div class=field_bookBoxPostition style="margin-top: 10px"><div><div class=field_selectBox style="position: relative;width:auto;width: 106rem;height: 130px;min-width:1500px;background: #EFF2F7;border:1px solid #ccc;border-radius: 5px"><div style="float:left;width: 28rem;min-width:380px;height: 120px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">商品名称：</div><div style="float: left;margin-top: 12px;background: #fff;width: 230px"><input name=name class="select field_select" style="width: 230px;text-indent: 10px;cursor: auto;ime-mode:disabled" ng-keypress=crdPurchaseCtrl.enterCheck($event) placeholder=请扫商品码 ng-model=crdPurchaseCtrl.product.showName><div style="position: absolute;top:48px;width: 230px;z-index: 300" class=form_select_div ng-show=crdPurchaseCtrl.showProductsBox><div class="select_cell pointer ellipsis" ng-repeat="product in crdPurchaseCtrl.products" ng-bind=product.name ng-click=crdPurchaseCtrl.chooseProduct(product)>默认按钮</div></div></div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">进货数量：</div><div style="float: left;margin-top: 12px;background: #fff;width: 230px"><input name=name class="select field_select" style="width: 230px;text-indent: 10px;cursor: auto" placeholder=请输入进货数量 ng-model=crdPurchaseCtrl.product.quantity></div></div></div><div style="float:left;width: 28rem;min-width:380px;height: 120px"><div style="height: 60px;line-height: 60px;padding-left: 20px"></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">进货单价：</div><div style="float: left;margin-top: 12px;background: #fff;width: 230px"><input name=name class="select field_select" style="width: 230px;text-indent: 10px;cursor: auto" placeholder=请输入进货价 ng-model=crdPurchaseCtrl.product.purchasePrice></div></div></div><div style="float:left;width: 28rem;min-width:380px;height: 120px"><div style="height: 60px;line-height: 60px;padding-left: 20px"></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">销售单价：</div><div style="float: left;margin-top: 12px;width: 230px"><div style="width: 230px;height: 36px;line-height: 36px;border-radius: 4px;text-indent: 10px;cursor: text" ng-bind=crdPurchaseCtrl.product.price></div></div></div></div><div style="float:left;width: 20rem;min-width:200px;height: 120px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div class=fbonce_bookConfirmBtn style="background: #d3dce6" ng-hide=crdPurchaseCtrl.product.misCode&&crdPurchaseCtrl.product.quantity&&crdPurchaseCtrl.product.purchasePrice&&crdPurchaseCtrl.product.price>加入进货单</div><div class="fbonce_bookConfirmBtn pointer" ng-show=crdPurchaseCtrl.product.misCode&&crdPurchaseCtrl.product.quantity&&crdPurchaseCtrl.product.purchasePrice&&crdPurchaseCtrl.product.price ng-click=crdPurchaseCtrl.addToForm()>加入进货单</div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div class="fbonce_m_i_r_c_btn bgcolorW borderccc" style="color: #475669;margin-left: 0px" ng-click=crdPurchaseCtrl.resert()>重置</div></div></div></div><div class=clear></div></div><div><div class=cancelTable style="width: 106rem" ng-show="crdPurchaseCtrl.showProducts.length>0"><div class="cancelThTr height_40" style="font-size: 15px"><div class="cancelTh width_4 ellipsis"><div style="width: 16px;height: 16px;border-radius: 5px;margin-top: 7px;margin-left: 12px;cursor: pointer" class={{crdPurchaseCtrl.chooseAll}} ng-click=crdPurchaseCtrl.chooseAllDoc()></div></div><div class="cancelTh width_13 ellipsis">商品码</div><div class="cancelTh width_13 ellipsis">商品名称</div><div class="cancelTh width_18 ellipsis">供货商名称</div><div class="cancelTh width_13 ellipsis">销售单价</div><div class="cancelTh width_13 ellipsis">进货数量</div><div class="cancelTh width_13 ellipsis">进货单价</div><div class="cancelTh width_13 ellipsis">进货总价</div></div><div class=cancelTr ng-repeat="doc in crdPurchaseCtrl.showProducts"><div class="cancelTd width_4 ellipsis"><div style="width: 16px;height: 16px;border-radius: 5px;margin-top: 15px;margin-left: 12px;cursor: pointer" class={{doc.image}} ng-click=crdPurchaseCtrl.chooseDoc(doc)></div></div><div class="cancelTd width_13 ellipsis" ng-bind=doc.misCode>预订时间</div><div class="cancelTd width_13 ellipsis" ng-bind=doc.name></div><div class="cancelTd width_18 ellipsis" ng-bind=doc.supplyName></div><div class="cancelTd width_13 ellipsis" ng-bind=doc.price></div><div class="cancelTd width_13 ellipsis" ng-bind=doc.quantity></div><div class="cancelTd width_13 ellipsis" ng-bind=doc.purchasePrice></div><div class="cancelTd width_13 ellipsis" ng-bind=doc.cost></div></div><div><div class=fbonce_bookConfirmBtn style="background: #d3dce6" ng-hide="crdPurchaseCtrl.commiteCount>0">确认进货</div><div class="fbonce_bookConfirmBtn pointer" ng-show="crdPurchaseCtrl.commiteCount>0" ng-click="crdPurchaseCtrl.showWorkersBox=true">确认进货</div></div></div></div></div></div></div></div><!-- 选择发放柜员 --><div class=bgGary ng-show=crdPurchaseCtrl.showWorkersBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">选择库存发放柜员</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdPurchaseCtrl.close()"><div class=clear></div></div><div style="margin-top: 20px"><div class="form_key float_left form_key_margin" style="width: 56px">发放柜员</div><div class="float_left pointer" style="z-index: 20" ng-class="{\'select\':!crdPurchaseCtrl.chooseWorkerFlag,\'select_foucs\':crdPurchaseCtrl.chooseWorkerFlag}" ng-click="crdPurchaseCtrl.chooseWorkerFlag = !crdPurchaseCtrl.chooseWorkerFlag"><div class="form_down_icon form_select_value_choose" style="width:346px;{{crdPurchaseCtrl.workerName==\'请选择柜员\'?\'color:#8f99a6\':\'color:#1f2d3d\';}}" ng-bind=crdPurchaseCtrl.workerName></div><div class=form_select_div style=width:346px ng-show=crdPurchaseCtrl.chooseWorkerFlag><div ng-click=crdPurchaseCtrl.chooseWorker(worker) class="select_cell pointer" ng-repeat="worker in crdPurchaseCtrl.workers" ng-bind=worker.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=crdPurchaseCtrl.create()>完成</div><div class="button_normal float_right" ng-click=crdPurchaseCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=crdPurchaseCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=crdPurchaseCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="crdPurchaseCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=crdPurchaseCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=crdPurchaseCtrl.wordERR title={{crdPurchaseCtrl.wordERR}}>22212</div><div class=promptClose ng-click=crdPurchaseCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=crdPurchaseCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=crdPurchaseCtrl.wordWARN title={{crdPurchaseCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'),
            a.put("app/cardmanager/stock/return-record.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-shop-form>商品结存报表</div><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-sell.record>销售明细</div><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-purchase-record>入库记录</div><div class="field_titleNormal field_titleChoose">报废记录</div></div><div class=field_bookBoxPostition><div><div class=field_selectBox><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入商品名条码 ng-model=crdReturnRecordCtrl.searchProductName><!-- <div class="xt_searchImage" ng-click="crdReturnRecordCtrl.searchProduct()"></div> --></div><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入报废单号 ng-model=crdReturnRecordCtrl.orderNo><!-- <div class="xt_searchImage" ng-click="crdReturnRecordCtrl.searchProduct()"></div> --></div><div class=float_left style="margin-right: 20px;position: relative"><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="crdReturnRecordCtrl.startDateFlag = !orgPurchaseRecordReturnrtDateFlag;crdReturnRecordCtrl.closeDateFlag = false" ng-bind="crdReturnRecordCtrl.startDate | date:\'yyyy-MM-dd\'"></div><div class=float_left style="margin:10px 10px 0 10px">至</div><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="crdReturnRecordCtrl.closeDateFlag = !orgPurchaseRecordReturnseDateFlag;crdReturnRecordCtrl.startDateFlag = false" ng-bind="crdReturnRecordCtrl.closeDate | date:\'yyyy-MM-dd\'"></div><div class=clear></div><div class="student_datetime student_datetime2" style="position: absolute;top:36px;left: 0"><datetimepick ng-close=crdReturnRecordCtrl.closeDateBox() ng-id="\'first\'" ng-show=crdReturnRecordCtrl.startDateFlag ng-date=crdReturnRecordCtrl.startDate></datetimepick></div><div class="student_datetime student_datetime2" style="position: absolute;top:36px;left: 184px"><datetimepick ng-close=crdReturnRecordCtrl.closeDateBox() ng-id="\'second\'" ng-show=crdReturnRecordCtrl.closeDateFlag ng-date=crdReturnRecordCtrl.closeDate></datetimepick></div></div><div class=float_left style="margin-right: 20px"><div class="fbonce_bookConfirmBtn pointer" style="margin-top: 0px;height: 36px;line-height: 36px;margin-bottom: 0" ng-click=crdReturnRecordCtrl.check()>查询</div></div><div class=float_left><div class="fbonce_m_i_r_c_btn bgcolorW borderccc" style="color: #475669" ng-click=crdReturnRecordCtrl.resert()>重置</div></div><div class=clear></div></div></div><div><div class=cancelTable style="width: 114rem"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style="width:11rem;text-indent: 20px">报废时间</div><div class="cancelTh ellipsis" style=width:11rem>报废单号</div><div class="cancelTh ellipsis" style=width:11rem>商品码</div><div class="cancelTh ellipsis" style=width:11rem>商品名称</div><div class="cancelTh ellipsis" style=width:12rem>供应商名称</div><div class="cancelTh ellipsis" style=width:11rem>报废数量</div><div class="cancelTh ellipsis" style=width:11rem>进货单价</div><div class="cancelTh ellipsis" style=width:11rem>进货总价</div><div class="cancelTh ellipsis" style=width:11rem>销售单价</div><div class="cancelTh ellipsis" style=width:11rem>操作人</div><!-- <div class="cancelTh ellipsis" style="width:10rem">操作</div> --></div><div class=cancelTr ng-repeat="order in crdReturnRecordCtrl.orders"><div class="cancelTd ellipsis" style="width:11rem;text-indent: 20px" ng-bind="order.createDate | date:\'yyyy-MM-dd HH:mm\'"></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.orderNo></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.misCode></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.name></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=order.supplyName></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.quantity></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.purchasePrice></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.cost></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.price></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.workerName></div><!-- <div class="cancelTd ellipsis" style="width:10rem;">\n                                <span style="color:#00a1ff;cursor: pointer;" ng-show="order.canChange" ng-click="csdReturnRecordCtrl.cancel(order._id)">撤销</span>\n                                <span ng-hide="order.canChange">不可操作</span>\n                            </div> --></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="crdReturnRecordCtrl.pagination.numPages > 1" total-items=crdReturnRecordCtrl.pagination.totalItems ng-model=crdReturnRecordCtrl.pagination.page items-per-page=crdReturnRecordCtrl.pagination.itemsPerPage max-size=crdReturnRecordCtrl.pagination.maxSize boundary-links="{{orgPurchaseRecReturnpagination.numPages > 2}}" rotate=false num-pages=crdReturnRecordCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=crdReturnRecordCtrl.pageChanged()></pagination></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=crdReturnRecordCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=crdReturnRecordCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="crdReturnRecordCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=crdReturnRecordCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=crdReturnRecordCtrl.wordERR title={{orgPurchaseReturnrl.wordERR}}>22212</div><div class=promptClose ng-click=crdReturnRecordCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=crdReturnRecordCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=crdReturnRecordCtrl.wordWARN title={{orgPurchaseRReturnl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/cardmanager/stock/shop-form.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleChoose">商品结存报表</div><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-sell.record>销售明细</div><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-purchase-record>入库记录</div><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-return-record>报废记录</div></div><div class=field_bookBoxPostition><div><div class=field_selectBox><div class=float_left style="margin-right: 20px;position: relative"><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="crdShopFormCtrl.startDateFlag = !crdShopFormCtrl.startDateFlag;crdShopFormCtrl.closeDateFlag = false" ng-bind="crdShopFormCtrl.startDate | date:\'yyyy-MM-dd\'"></div><div class=float_left style="margin:10px 10px 0 10px">至</div><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="crdShopFormCtrl.closeDateFlag = !crdShopFormCtrl.closeDateFlag;crdShopFormCtrl.startDateFlag = false" ng-bind="crdShopFormCtrl.closeDate | date:\'yyyy-MM-dd\'"></div><div class=clear></div><div class="student_datetime student_datetime2" style="position: absolute;top:36px;left: 0"><datetimepick ng-close=crdShopFormCtrl.closeDateBox() ng-id="\'first\'" ng-show=crdShopFormCtrl.startDateFlag ng-date=crdShopFormCtrl.startDate></datetimepick></div><div class="student_datetime student_datetime2" style="position: absolute;top:36px;left: 184px"><datetimepick ng-close=crdShopFormCtrl.closeDateBox() ng-id="\'second\'" ng-show=crdShopFormCtrl.closeDateFlag ng-date=crdShopFormCtrl.closeDate></datetimepick></div></div><div class=float_right style="margin-right: 20px"><div class="fbonce_bookConfirmBtn pointer" style="margin-top: 0px;height: 36px;line-height: 36px;margin-bottom: 0px" ng-click=crdShopFormCtrl.export()>导出xls</div></div></div></div><div><div class=cancelTable style="width: 114rem"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style="width:8rem;text-indent: 20px">商品名称</div><div class="cancelTh ellipsis" style=width:8rem>上次结存数量</div><div class="cancelTh ellipsis" style=width:8rem>上次结存金额</div><div class="cancelTh ellipsis" style=width:8rem>本次进货价</div><div class="cancelTh ellipsis" style=width:8rem>本次进货数量</div><div class="cancelTh ellipsis" style=width:8rem>本次进货金额</div><div class="cancelTh ellipsis" style=width:8rem>本次报废数量</div><div class="cancelTh ellipsis" style=width:8rem>本次报废金额</div><div class="cancelTh ellipsis" style=width:8rem>本次销售量</div><div class="cancelTh ellipsis" style=width:8rem>本次零售价</div><div class="cancelTh ellipsis" style=width:8rem>本次销售金额</div><div class="cancelTh ellipsis" style=width:8rem>盈利</div><div class="cancelTh ellipsis" style=width:8rem>本次结存数量</div><div class="cancelTh ellipsis" style=width:8rem>本次结存金额</div></div><div class=cancelTr ng-repeat="form in crdShopFormCtrl.forms"><div class="cancelTd ellipsis" style="width:8rem;text-indent: 20px" ng-bind=form.name title={{form.name}}></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.lastQuantity></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.lastCost></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.purchasePrice></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.purchaseQuantity></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.purchaseCost></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.returnQuantity></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.returnCost></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.saleQuantity></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.price></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.salesVolume></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.income></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.nowQuantity></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.nowCost></div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="crdShopFormCtrl.pagination.numPages > 1" total-items=crdShopFormCtrl.pagination.totalItems ng-model=crdShopFormCtrl.pagination.page items-per-page=crdShopFormCtrl.pagination.itemsPerPage max-size=crdShopFormCtrl.pagination.maxSize boundary-links="{{crdShopFormCtrl.pagination.numPages > 2}}" rotate=false num-pages=crdShopFormCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=crdShopFormCtrl.pageChanged()></pagination></div></div></div></div></div><table id=alltable style="width: 0;height: 0;overflow: hidden"><tr><td colspan=14><span>库存盘存表</span></td></tr><tr><td colspan=14><span>时间范围：</span> <span ng-bind=crdShopFormCtrl.dateName></span></td></tr><tr><td>商品名称</td><td>上次结存数量</td><td>上次结存金额</td><td>本次进货价</td><td>本次进货数量</td><td>本次进货金额</td><td>本次报废数量</td><td>本次报废金额</td><td>本次销售量</td><td>本次零售价</td><td>本次销售金额</td><td>盈利</td><td>本次结存数量</td><td>本次结存金额</td></tr><tr ng-repeat="form in crdShopFormCtrl.exportforms"><td ng-bind=form.name></td><td ng-bind=form.lastQuantity></td><td ng-bind=form.lastCost></td><td ng-bind=form.purchasePrice></td><td ng-bind=form.purchaseQuantity></td><td ng-bind=form.purchaseCost></td><td ng-bind=form.returnQuantity></td><td ng-bind=form.returnCost></td><td ng-bind=form.saleQuantity></td><td ng-bind=form.price></td><td ng-bind=form.salesVolume></td><td ng-bind=form.income></td><td ng-bind=form.nowQuantity></td><td ng-bind=form.nowCost></td></tr></table><!-- 成功提示 --><div class=bgGary ng-show=crdShopFormCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=crdShopFormCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="crdShopFormCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=crdShopFormCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=crdShopFormCtrl.wordERR title={{crdShopFormCtrl.wordERR}}>22212</div><div class=promptClose ng-click=crdShopFormCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=crdShopFormCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=crdShopFormCtrl.wordWARN title={{crdShopFormCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/cardmanager/stock/stock.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=crd-purchase>商品入库</div><div class="field_titleNormal field_titleChoose">库存管理</div></div><div class=field_bookBoxPostition><div><div class=field_selectBox><div class="select fbonce_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{crdStockCtrl.showWorkerName==\'选择柜员\'?\'\':\'color:#1f2d3d\';}}" ng-bind=crdStockCtrl.showWorkerName ng-click="crdStockCtrl.showChooseWorkerBox=!crdStockCtrl.showChooseWorkerBox">场馆1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=crdStockCtrl.showChooseWorkerBox><div class="select_cell pointer ellipsis" ng-repeat="worker in crdStockCtrl.workers" ng-bind=worker.name ng-click=crdStockCtrl.chooseWorkerName(worker)>默认按钮</div></div></div><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入商品名/条码 ng-model=crdStockCtrl.searchProductName ng-keypress=crdStockCtrl.enterCheck($event)><div class=xt_searchImage ng-click=crdStockCtrl.searchProduct()></div></div><div class=float_right style="margin-right: 20px"><div class="fbonce_bookConfirmBtn pointer" style="margin-top: 0px;height: 36px;line-height: 36px;margin-bottom:0" ng-click=crdStockCtrl.export()>导出xls</div></div></div></div><div><div class=cancelTable style="width: 114rem"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style="width:12rem;text-indent: 20px">商品码</div><div class="cancelTh ellipsis" style=width:12rem>商品名称</div><div class="cancelTh ellipsis" style=width:12rem>商品类别</div><div class="cancelTh ellipsis" style=width:12rem>库存数量</div><div class="cancelTh ellipsis" style=width:12rem>进货单价</div><div class="cancelTh ellipsis" style=width:12rem>销售单价</div><div class="cancelTh ellipsis" style=width:12rem>当前状态</div><div class="cancelTh ellipsis" style=width:12rem>当前柜员</div><div class="cancelTh ellipsis" style=width:12rem>操作</div></div><div class=cancelTr ng-repeat="product in crdStockCtrl.products"><div class="cancelTd ellipsis" style="width:12rem;text-indent: 20px" ng-bind=product.misCode></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=product.name></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=product.categoryName></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=product.quantity></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=product.purchasePrice></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=product.price></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=product.status></div><div class="cancelTd ellipsis" style=width:12rem ng-bind="product._worker?product.workerName:\'暂无柜员\'"></div><div class="cancelTd ellipsis pointer" style="width:12rem;color: #20a0ff"><span ng-click=crdStockCtrl.openShowReturnBox(product._id)>报废</span></div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="crdStockCtrl.pagination.numPages > 1" total-items=crdStockCtrl.pagination.totalItems ng-model=crdStockCtrl.pagination.page items-per-page=crdStockCtrl.pagination.itemsPerPage max-size=crdStockCtrl.pagination.maxSize boundary-links="{{crdStockCtrl.pagination.numPages > 2}}" rotate=false num-pages=crdStockCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=crdStockCtrl.pageChanged()></pagination></div></div></div></div></div><!-- 报废商品 --><div class=bgGary ng-show=crdStockCtrl.showReturnBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">报废数量</div><img src=assets/images/close.png class="float_right pointer" ng-click="crdStockCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin" style="width: 56px">报废数量</div><input class="form_value float_left form_value_width" placeholder=请输入报废数量 ng-blur="crdStockCtrl.judge(\'price\')" ng-class="{\'\':!crdStockCtrl.nameFlag,\'form_value_error\':crdStockCtrl.nameFlag}" ng-model="crdStockCtrl.returnQuantity"></div><div class=clear></div><div class=form_error_font ng-show=!crdStockCtrl.nameFlag></div><div class=form_error_font ng-show=crdStockCtrl.nameFlag style=margin-left:80px>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=crdStockCtrl.check()>确认报废</div><div class="button_normal float_right" ng-click=crdStockCtrl.close()>取消</div><div class=clear></div></div></div></div></div><table id=alltable style="width: 0;height: 0;overflow: hidden"><tr><td colspan=6><span>柜员库存表</span></td></tr><tr><td>柜员</td><td>商品名称</td><td>商品类别</td><td>库存数量</td><td>进货单价</td><td>销售单价</td></tr><tr ng-repeat="product in crdStockCtrl.exportProducts"><td ng-bind="product._worker?product.workerName:\'暂无柜员\'"></td><td ng-bind=product.name></td><td ng-bind=product.categoryName></td><td ng-bind=product.quantity></td><td ng-bind=product.purchasePrice></td><td ng-bind=product.price></td></tr></table><!-- 成功提示 --><div class=bgGary ng-show=crdStockCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=crdStockCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="crdStockCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=crdStockCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=crdStockCtrl.wordERR title={{crdStockCtrl.wordERR}}>22212</div><div class=promptClose ng-click=crdStockCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=crdStockCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=crdStockCtrl.wordWARN title={{crdStockCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/checkstand/field/cancel/field-book-cancel.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-field-book.once>单次预订</div><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-field-longbook>长包预订</div><div class="field_titleNormal field_titleChoose">预订撤销</div></div><div class=field_bookBoxPostition><div style="margin-top: 20px"><div class=field_selectBox style="position: relative;width:auto;width: 106rem;height: 122px;min-width:1500px;background: #EFF2F7;border:1px solid #ccc;border-radius: 5px"><div style="float:left;width: 30rem;min-width:420px;height: 120px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">预订人：</div><div style="float: left;margin-top: 12px;background: #fff"><div style="float: left" id=search class="xt_searchBox float_left"><input class=xt_searchInput style="text-indent: 10px" placeholder=预订人名称/手机号 ng-model=csdFieldCancelBookCtrl.searchOrderName><div class=xt_searchImage ng-click=csdFieldCancelBookCtrl.searchOrder()></div></div><div class=clear></div></div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">备注：</div><div style="float: left;margin-top: 12px;background: #fff"><div style="float: left" id=search class="xt_searchBox float_left"><input class=xt_searchInput style="text-indent: 10px" placeholder=请输入备注 ng-model=csdFieldCancelBookCtrl.searchOrderRemark><div class=xt_searchImage ng-click=csdFieldCancelBookCtrl.searchOrder()></div></div><div class=clear></div></div></div></div><div style="float:left;width: 30rem;min-width:420px;height: 120px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">场次时间：</div><div class="input_calendar float_left" style="margin-top: 12px;background: #fff"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="csdFieldCancelBookCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="csdFieldCancelBookCtrl.showChooseStartDateBox=!csdFieldCancelBookCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=csdFieldCancelBookCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=csdFieldCancelBookCtrl.closeChooseStartDateBox() ng-date=csdFieldCancelBookCtrl.startDate></datetimepick></div></div><div class="input_calendar float_left" style="margin-top: 12px;background: #fff;margin-left: 10px"><div class=input_calendar_showBox><div class=input_calendar_show style="{{csdFieldCancelBookCtrl.endDate==\'结束时间\'?\'\':\'color:#1f2d3d\';}}" ng-bind="csdFieldCancelBookCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="csdFieldCancelBookCtrl.showChooseEndDateBox=!csdFieldCancelBookCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=csdFieldCancelBookCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=csdFieldCancelBookCtrl.closeChooseEndDateBox() ng-date=csdFieldCancelBookCtrl.endDate></datetimepick></div></div><div class=clear></div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">显示设置：</div><div><div style="width: 16px;height: 16px;float: left;border-radius: 5px;margin-top: 22px;cursor: pointer" class={{csdFieldCancelBookCtrl.nowImage}} ng-click=csdFieldCancelBookCtrl.chooseNowOrderList()></div><div style="float: left;color:#8F99A6;margin-left: 10px">显示当前时间</div></div><div style="float: left;color:#8F99A6;width: 80px;margin-left: 20px">显示条数：</div><div style="float: left;color:#20a0ff"><div style="float: left;position: relative"><div style="text-align: center;padding: 0 3px" ng-bind=csdFieldCancelBookCtrl.showPageName>50</div><div style="position: absolute;top:40px;width: 40px;min-height: 24px;border:1px solid #ccc;background: #fff;z-index: 60" ng-show=csdFieldCancelBookCtrl.showChoosePageBox><div style="height: 24px;line-height: 24px;text-align: center;cursor: pointer" ng-repeat="page in csdFieldCancelBookCtrl.pageArr" ng-bind=page.name ng-click=csdFieldCancelBookCtrl.choosePageName(page)>10</div></div></div><div style="float: left;background: url(../../assets/images/downsmall.png) no-repeat 0px 26.5px;width: 12px;height: 60px;cursor: pointer" ng-click="csdFieldCancelBookCtrl.showChoosePageBox=!csdFieldCancelBookCtrl.showChoosePageBox"></div></div><div class=clear></div></div></div><div style="float:left;width: 45rem;min-width:480px;height: 120px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 120px">场馆&项目&场地：</div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdFieldCancelBookCtrl.showVenueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdFieldCancelBookCtrl.showVenueName ng-click="csdFieldCancelBookCtrl.showChooseVenueBox=!csdFieldCancelBookCtrl.showChooseVenueBox">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=csdFieldCancelBookCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in csdFieldCancelBookCtrl.venues" ng-bind=venue.name ng-click=csdFieldCancelBookCtrl.chooseVenueName(venue)>默认按钮</div></div></div><div class="select fbonce_select" style="float: left;margin-top: 12px;background: #fff"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdFieldCancelBookCtrl.showItemName==\'选择项目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdFieldCancelBookCtrl.showItemName ng-click="csdFieldCancelBookCtrl.showChooseItemBox=!csdFieldCancelBookCtrl.showChooseItemBox">项目1</div></div><div class=form_select_div style="position: relative;z-index: 200" ng-show=csdFieldCancelBookCtrl.showChooseItemBox><div class="select_cell pointer ellipsis" ng-repeat="item in csdFieldCancelBookCtrl.items" ng-bind=item.name ng-click=csdFieldCancelBookCtrl.chooseItemName(item)>默认按钮</div></div></div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdFieldCancelBookCtrl.showFieldName==\'选择场地\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdFieldCancelBookCtrl.showFieldName ng-click="csdFieldCancelBookCtrl.showChooseFieldBox=!csdFieldCancelBookCtrl.showChooseFieldBox">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=csdFieldCancelBookCtrl.showChooseFieldBox><div class="select_cell pointer ellipsis" ng-repeat="field in csdFieldCancelBookCtrl.fields" ng-bind=field.name ng-click=csdFieldCancelBookCtrl.chooseFieldName(field)>默认按钮</div></div></div><div class=clear></div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div class="button2_normal float_left" ng-click=csdFieldCancelBookCtrl.openCancelOrders() ng-show="csdFieldCancelBookCtrl.cancelOrderIdArr.length>0" style="margin-top: 12px">批量退订</div><div class="button2_normal float_left" style="background: #c0ccda;cursor: text;margin-top: 12px" ng-hide="csdFieldCancelBookCtrl.cancelOrderIdArr.length>0">批量退订</div></div></div></div><div class=clear></div></div><div><div class=cancelTable style="min-width: 1280px;width: 113rem;position: relative;z-index: 5"><div class="cancelThTr height_40"><div class="cancelTh ellipsis" style=width:4rem><div style="width: 16px;height: 16px;border-radius: 5px;margin-top: 7px;margin-left: 12px;cursor: pointer" class={{csdFieldCancelBookCtrl.allImage}} ng-click=csdFieldCancelBookCtrl.chooseCancelOrderAll()></div></div><div class="cancelTh ellipsis" style=width:9rem>预订人</div><div class="cancelTh ellipsis" style=width:14rem ng-click="csdFieldCancelBookCtrl.sortBy(csdFieldCancelBookCtrl.sortByKey==\'timeUp\'?\'timeDown\':\'timeUp\')"><div class=ellipsis style="float:left;max-width: 90px">场次时间</div><div class=upAndDown></div></div><div class=cancelTh style="width:12rem;position: relative"><div ng-click="csdFieldCancelBookCtrl.showChooseStateBox=!csdFieldCancelBookCtrl.showChooseStateBox"><div class=ellipsis style="float:left;max-width: 90px" ng-bind=csdFieldCancelBookCtrl.showStateName>订单状态</div><div class=downBtn></div></div><div class="form_select_div finance_selectBox" ng-show=csdFieldCancelBookCtrl.showChooseStateBox><div class="select_cell pointer ellipsis" ng-repeat="state in csdFieldCancelBookCtrl.states" ng-bind=state.name ng-click=csdFieldCancelBookCtrl.chooseStateName(state)>默认按钮</div></div></div><div class="cancelTh ellipsis" style=width:10rem ng-click="csdFieldCancelBookCtrl.sortBy(csdFieldCancelBookCtrl.sortByKey==\'orderUp\'?\'orderDown\':\'orderUp\')"><div class=ellipsis style="float:left;max-width: 90px">订单时间</div><div class=upAndDown></div></div><div class="cancelTh ellipsis" style=width:9rem>场馆名称</div><div class="cancelTh ellipsis" style=width:9rem>场地名称</div><div class="cancelTh ellipsis" style=width:9rem>备注</div><div class="cancelTh ellipsis" style=width:7rem><div ng-click="csdFieldCancelBookCtrl.showChooseFromBox=!csdFieldCancelBookCtrl.showChooseFromBox"><div class=ellipsis style="float:left;max-width: 90px" ng-bind=csdFieldCancelBookCtrl.showFromName>订单来源</div><div class=downBtn></div></div><div class="form_select_div finance_selectBox" ng-show=csdFieldCancelBookCtrl.showChooseFromBox><div class="select_cell pointer ellipsis" ng-repeat="from in csdFieldCancelBookCtrl.froms" ng-bind=from.name ng-click=csdFieldCancelBookCtrl.chooseFromName(from)>默认按钮</div></div></div><div class="cancelTh ellipsis" style=width:7rem>预订金额</div><div class="cancelTh ellipsis" style=width:7rem>入场码</div><div class="cancelTh ellipsis" style=width:14rem>操作</div></div><div class=cancelTr ng-repeat="order in csdFieldCancelBookCtrl.orders"><div class="cancelTd ellipsis" style=width:4rem><div style="width: 16px;height: 16px;border-radius: 5px;margin-top: 15px;margin-left: 12px;cursor: pointer" class={{order.image}} ng-click=csdFieldCancelBookCtrl.chooseCancelOrder(order)></div></div><div class="cancelTd ellipsis pointer" ui-sref=org-member-detail.info({id:order._member}) style=width:9rem ng-bind=order.name title={{order.name}}></div><div class="cancelTd ellipsis" style=width:14rem><span ng-bind="(order.startDate | date:\'yyyy-MM-dd\')+\' \'+order.showDate" title="{{(order.startDate | date:\'yyyy-MM-dd\')+\' \'+order.showDate}}"></span> <span ng-show=order.openInvoice style="color:#20a0ff;font-size: 12px;margin-left: 10px">已开票</span></div><div class="cancelTd ellipsis" style=width:12rem><div ng-show="order.state==\'已过期\'"><div style="float: left;width: 8px;height: 8px;border-radius: 8px;margin-top: 18px;background: #C0CCDA"></div><span style="margin-left: 10px" ng-bind=order.state></span></div><div ng-show="order.state==\'已消费\'" title="{{\'(\'+(order.openDate | date:\'yyyy-MM-dd hh:mm\')+\')\'}}"><div style="float: left;width: 8px;height: 8px;border-radius: 8px;margin-top: 18px;background: #C0CCDA"></div><span style="margin-left: 10px" ng-bind=order.state></span> <span ng-bind="\'(\'+(order.openDate | date:\'yyyy-MM-dd hh:mm\')+\')\'"></span></div><div ng-show="order.state==\'未消费\'"><div style="float: left;width: 8px;height: 8px;border-radius: 8px;margin-top: 18px;background: #13CE66"></div><span style="margin-left: 10px" ng-bind=order.state></span></div><div ng-show="order.state==\'已撤销\'" title="{{order.cancelDate?\'(\'+(order.cancelDate | date:\'yyyy-MM-dd hh:mm\')+\')\':\'\'}}"><div style="float: left;width: 8px;height: 8px;border-radius: 8px;margin-top: 18px;background: #ff4949"></div><span style="margin-left: 10px" ng-bind=order.state></span> <span ng-bind="order.cancelDate?\'(\'+(order.cancelDate | date:\'yyyy-MM-dd hh:mm\')+\')\':\'\'"></span></div></div><div class="cancelTd ellipsis" style=width:10rem ng-bind="order.createDate | date:\'yyyy-MM-dd HH:mm:ss\'" title="{{order.createDate | date:\'yyyy-MM-dd HH:mm:ss\'}}"></div><div class="cancelTd ellipsis" style=width:9rem ng-bind=order.venueName></div><div class="cancelTd ellipsis" style=width:9rem ng-bind=order.fieldName></div><div class="cancelTd ellipsis pointer" style=width:9rem ng-bind="order.remark?order.remark:\'暂无备注\'" title="{{(order.remark?order.remark:\'暂无备注\')+\',请点击修改\'}}" ng-click=csdFieldCancelBookCtrl.openShowOrderRemark(order)></div><div class="cancelTd ellipsis" style=width:7rem ng-bind=order.form></div><div class="cancelTd ellipsis" style=width:7rem><span ng-bind="order.cost | currency:\'\'"></span> <span ng-show=order.penalty ng-bind="\'(违约金：\'+order.penalty+\'元)\'" style="color:#ff4949;margin-left: 10px"></span></div><div class="cancelTd ellipsis" style=width:7rem ng-bind=order.code></div><div class="cancelTd ellipsis" style=width:14rem><span class=pointer style="color:#20a0ff;margin-right: 10px" ng-show="order.openState==\'canOpen\'&&!order.isCancel&&!order.openDate" ng-click=csdFieldCancelBookCtrl.openField(order)>开场</span> <span class=pointer style="color:#99a9bf;margin-right: 10px" ng-show="order.refundState==\'can\'&&!order.isCancel" ng-click=csdFieldCancelBookCtrl.openCancelOnce(order)>退订</span> <span class=pointer style="color:#99a9bf;margin-right: 10px" ng-click=csdFieldCancelBookCtrl.printOrder(order)>打印</span> <span class=pointer style=color:#99a9bf ng-show=!order.openInvoice ng-click=csdFieldCancelBookCtrl.drawBill(order)>开票</span></div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="csdFieldCancelBookCtrl.pagination.numPages > 1" total-items=csdFieldCancelBookCtrl.pagination.totalItems ng-model=csdFieldCancelBookCtrl.pagination.page items-per-page=csdFieldCancelBookCtrl.pagination.itemsPerPage max-size=csdFieldCancelBookCtrl.pagination.maxSize boundary-links="{{csdFieldCancelBookCtrl.pagination.numPages > 2}}" rotate=false num-pages=csdFieldCancelBookCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=csdFieldCancelBookCtrl.pageChanged()></pagination></div></div></div></div></div></div><!-- 修改订单备注 --><div class=bgGary ng-show=csdFieldCancelBookCtrl.showOrderRemark><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">修改备注</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdFieldCancelBookCtrl.showOrderRemark=false;"></div><div class=clear></div><div class=form_error_font></div><div style=margin-top:10px><div class="form_key float_left form_key_margin">订单备注</div><input class="form_value float_left form_value_width" placeholder=请输入订单备注 ng-model=csdFieldCancelBookCtrl.order.remark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdFieldCancelBookCtrl.updateRemark()>确认</div><div class="button_normal float_right" ng-click="csdFieldCancelBookCtrl.showOrderRemark=false;">取消</div><div class=clear></div></div></div></div></div><!-- 撤销单次 --><div class=bgGary ng-show=csdFieldCancelBookCtrl.showBasicInfoBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">退订</div><img src=assets/images/close.png class="float_right pointer" ng-click=csdFieldCancelBookCtrl.close()></div><div class=clear></div><div class=form_error_font></div><div ng-show=csdFieldCancelBookCtrl.sendFlag><div class="form_key float_left form_key_margin"><span>退场码</span><span style=color:#fff>的</span></div><div class="float_left form_value_width" style="border:1px solid #ddd;border-radius:4px"><input class="form_value float_left" style="border:0;width: 275px" placeholder=请向场地管理员索要入场码 ng-model=csdFieldCancelBookCtrl.sendNum> <span style="margin:12px 5px 0 0;color:#00a1ff" class="pointer float_right" ng-click=csdFieldCancelBookCtrl.openChooseFieldWork()>点击发送</span></div></div><div class=clear></div><div class=form_error_font></div><div class=float_left><div class="form_key float_left form_key_margin">退款方式</div><div class=singleChoose_option ng-repeat="type in csdFieldCancelBookCtrl.refundTypes" ng-click=csdFieldCancelBookCtrl.chooseRefundType(type)><div class="singleChoose_imageBox {{type.image}}"></div><div class=singleChoose_prompt ng-bind=type.name>按预订价退还</div></div></div><div class=clear></div><div style=margin-top:10px ng-show="!csdFieldCancelBookCtrl.showRefundPrice && csdFieldCancelBookCtrl.rPriceFlag"><div class="form_key float_left form_key_margin">预订金额</div><div class="form_value float_left form_value_width" style=border:none ng-bind=csdFieldCancelBookCtrl.rPrice></div></div><div class=clear></div><div style=margin-top:10px ng-show=csdFieldCancelBookCtrl.showRefundPrice><div class="form_key float_left form_key_margin">自定金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=csdFieldCancelBookCtrl.refundPrice></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=csdFieldCancelBookCtrl.cancelOnce()>确认撤销</div><div class="button_normal float_right" ng-click=csdFieldCancelBookCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=csdFieldCancelBookCtrl.sendToFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">选择场馆管理员</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdFieldCancelBookCtrl.sendToFlag = false"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">场馆管理</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!csdFieldCancelBookCtrl.chooseObjectFlag,\'select_foucs\':csdFieldCancelBookCtrl.chooseObjectFlag}" ng-click="csdFieldCancelBookCtrl.chooseObjectFlag = !csdFieldCancelBookCtrl.chooseObjectFlag"><div class="form_down_icon form_width_354 form_select_value_choose" style=width:345px ng-bind=csdFieldCancelBookCtrl.objectName></div><div class="form_select_div form_width_354" style=width:345px ng-show=csdFieldCancelBookCtrl.chooseObjectFlag><div ng-click=csdFieldCancelBookCtrl.chooseObject(object) class="select_cell pointer" ng-repeat="object in csdFieldCancelBookCtrl.users" ng-bind=object.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdFieldCancelBookCtrl.send()>完成</div><div class="button_normal float_right" ng-click="csdFieldCancelBookCtrl.sendToFlag = false">取消</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=csdFieldCancelBookCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=csdFieldCancelBookCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="csdFieldCancelBookCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=csdFieldCancelBookCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=csdFieldCancelBookCtrl.wordERR>22212</div><div class=promptClose ng-click="csdFieldCancelBookCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=csdFieldCancelBookCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=csdFieldCancelBookCtrl.wordWARN>22212</div><div class=promptClose ng-click=csdFieldCancelBookCtrl.closePrompt()></div></div></div></div><div class=bgGary ng-show=csdFieldCancelBookCtrl.promptDELETE><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdFieldCancelBookCtrl.closePrompt()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:25px;color:#8181b4 ng-bind=csdFieldCancelBookCtrl.wordDELETE></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdFieldCancelBookCtrl.closePrompt()>取消</div><div class="button_normal float_right" ng-click=csdFieldCancelBookCtrl.cancelOrders()>继续撤销</div><div class=clear></div></div></div></div></div>'),
            a.put("app/checkstand/field/long/field-book-long.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-field-book.once>单次预订</div><div class="field_titleNormal field_titleChoose">长包预订</div><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-field-cancelbook>预订撤销</div></div><div class=field_bookBoxPostition><div style="margin-top: 20px"><div class=field_selectBox style="position: relative;width:auto;width: 106rem;height: 262px;min-width:1500px;background: #EFF2F7;border:1px solid #ccc;border-radius: 5px"><div style="float:left;width: 30rem;min-width:420px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 60px;text-align: right">预订人：</div><input style="float: left;margin-top: 12px;background: #fff;width: 230px;border:1px solid #cad4e0" class="form_value float_left form_value_width" placeholder=请输入预订方名称 ng-model=csdFieldLongBookCtrl.long_name></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 60px;text-align: right">场馆：</div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff;width: 230px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdFieldLongBookCtrl.showVenueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdFieldLongBookCtrl.showVenueName ng-click="csdFieldLongBookCtrl.showChooseVenueBox=!csdFieldLongBookCtrl.showChooseVenueBox">场馆1</div></div><div style="position: relative;z-index: 300" class=form_select_div ng-show=csdFieldLongBookCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in csdFieldLongBookCtrl.venues" ng-bind=venue.name ng-click=csdFieldLongBookCtrl.chooseVenueName(venue)>默认按钮</div></div></div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 60px;text-align: right">日期：</div><div class="input_calendar float_left" style="margin-top: 12px;background: #fff"><div class=input_calendar_showBox><div class=input_calendar_show style="color:#1f2d3d;width: 110px" ng-bind="csdFieldLongBookCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="csdFieldLongBookCtrl.showChooseStartDateBox=!csdFieldLongBookCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=csdFieldLongBookCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=csdFieldLongBookCtrl.long_closeChooseStartDateBox() ng-date=csdFieldLongBookCtrl.startDate></datetimepick></div></div><div class="input_calendar float_left" style="margin-top: 12px;background: #fff;margin-left: 10px"><div class=input_calendar_showBox><div class=input_calendar_show style="color:#1f2d3d;width: 110px" ng-bind="csdFieldLongBookCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="csdFieldLongBookCtrl.showChooseEndDateBox=!csdFieldLongBookCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=csdFieldLongBookCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=csdFieldLongBookCtrl.long_closeChooseEndDateBox() ng-date=csdFieldLongBookCtrl.endDate></datetimepick></div></div><div class=clear></div></div><div style="height: 80px;line-height: 60px;padding-left: 20px"><div class=field_bookConfirmBtn ng-hide="csdFieldLongBookCtrl.searchVenueId&&csdFieldLongBookCtrl.searchItemId&&csdFieldLongBookCtrl.showTimesArr.length>0&&(csdFieldLongBookCtrl.searchKey==\'day\'||(csdFieldLongBookCtrl.searchKey==\'week\'&&csdFieldLongBookCtrl.searchValueArr.length>0)||(csdFieldLongBookCtrl.searchKey==\'month\'&&csdFieldLongBookCtrl.searchValueArr.length>0))&&csdFieldLongBookCtrl.long_orderType&&csdFieldLongBookCtrl.long_name&&csdFieldLongBookCtrl.long_tel" style="width:150px;margin-top:20px;background: #d3dce6">查询可预订场地</div><div class="field_bookConfirmBtn pointer" ng-show="csdFieldLongBookCtrl.searchVenueId&&csdFieldLongBookCtrl.searchItemId&&csdFieldLongBookCtrl.showTimesArr.length>0&&(csdFieldLongBookCtrl.searchKey==\'day\'||(csdFieldLongBookCtrl.searchKey==\'week\'&&csdFieldLongBookCtrl.searchValueArr.length>0)||(csdFieldLongBookCtrl.searchKey==\'month\'&&csdFieldLongBookCtrl.searchValueArr.length>0))&&csdFieldLongBookCtrl.long_orderType&&csdFieldLongBookCtrl.long_name&&csdFieldLongBookCtrl.long_tel" style=width:150px;margin-top:20px ng-click=csdFieldLongBookCtrl.checkField()>查询可预订场地</div></div></div><div style="float:left;width: 30rem;min-width:420px"><div style="height: 60px;line-height: 60px;padding-left: 10px"><div style="float: left;color:#8F99A6;width: 79px">联系方式：</div><input style="float: left;margin-top: 12px;background: #fff;width: 230px;border:1px solid #cad4e0" class="form_value float_left form_value_width" placeholder=请输入联系方式 ng-model=csdFieldLongBookCtrl.long_tel></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 50px">项目：</div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff;width: 230px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdFieldLongBookCtrl.showItemName==\'选择项目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdFieldLongBookCtrl.showItemName ng-click="csdFieldLongBookCtrl.showChooseItemBox=!csdFieldLongBookCtrl.showChooseItemBox">项目1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=csdFieldLongBookCtrl.showChooseItemBox><div class="select_cell pointer ellipsis" ng-repeat="item in csdFieldLongBookCtrl.items" ng-bind=item.name ng-click=csdFieldLongBookCtrl.chooseItemName(item)>默认按钮</div></div></div></div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 50px">频率：</div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff;width: 80px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdFieldLongBookCtrl.showValueName==\'选择频率\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdFieldLongBookCtrl.showValueName ng-click="csdFieldLongBookCtrl.showChooseValueBox=!csdFieldLongBookCtrl.showChooseValueBox">项目1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=csdFieldLongBookCtrl.showChooseValueBox><div class="select_cell pointer ellipsis" ng-repeat="value in csdFieldLongBookCtrl.long_values" ng-bind=value.name ng-click=csdFieldLongBookCtrl.long_chooseValue(value)>默认按钮</div></div></div><div class="select field_select" ng-show=csdFieldLongBookCtrl.showChooseWeekDayBox style="float: left;margin-top: 12px;background: #fff;width: 200px"><div class="form_down_icon form_select_value" ng-click="csdFieldLongBookCtrl.showChooseWeekDaySelect=!csdFieldLongBookCtrl.showChooseWeekDaySelect"><div class=ellipsis ng-bind=csdFieldLongBookCtrl.showWeekDayName style="{{csdFieldLongBookCtrl.showWeekDayName==\'请选择星期几\'?\'\':\'color:#000\';}}">星期</div></div><div style="position: relative;z-index: 40" class=form_select_div ng-show=csdFieldLongBookCtrl.showChooseWeekDaySelect><div class="select_cell pointer ellipsis" style={{day.image}} ng-repeat="day in csdFieldLongBookCtrl.long_weekDays" ng-bind=day.name ng-click=csdFieldLongBookCtrl.chooseWeekDay(day)>默认按钮</div></div></div><div class="select field_select" ng-show=csdFieldLongBookCtrl.showChooseMonthDayBox style="float: left;margin-top: 12px;background: #fff;width: 200px"><div class="form_down_icon form_select_value" ng-click="csdFieldLongBookCtrl.showChooseMonthDaySelect=!csdFieldLongBookCtrl.showChooseMonthDaySelect"><div class=ellipsis ng-bind=csdFieldLongBookCtrl.showMonthDayName style="{{csdFieldLongBookCtrl.showMonthDayName==\'请选择日期\'?\'\':\'color:#000\';}}">天数</div></div><div style="position: relative;z-index: 40" class=form_select_div ng-show=csdFieldLongBookCtrl.showChooseMonthDaySelect><div class="select_cell pointer ellipsis" style={{day.image}} ng-repeat="day in csdFieldLongBookCtrl.long_monthDays" ng-bind=day.value ng-click=csdFieldLongBookCtrl.chooseMonthDay(day)>默认按钮</div></div></div></div></div></div><div style="float:left;width: 45rem;min-width:480px"><div style="height: 60px;line-height: 60px;padding-left: 10px"><div style="float: left;color:#8F99A6;width: 79px">用户备注：</div><input style="float: left;margin-top: 12px;background: #fff;width: 230px;border:1px solid #cad4e0" class="form_value float_left form_value_width" placeholder=请输入长包备注 ng-model=csdFieldLongBookCtrl.long_remark></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 50px">来源：</div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff;width: 230px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdFieldLongBookCtrl.showTypeName==\'选择类型\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdFieldLongBookCtrl.showTypeName ng-click="csdFieldLongBookCtrl.showChooseTypeBox=!csdFieldLongBookCtrl.showChooseTypeBox">场馆1</div></div><div style="position: relative;z-index: 250" class=form_select_div ng-show=csdFieldLongBookCtrl.showChooseTypeBox><div class="select_cell pointer ellipsis" ng-repeat="type in csdFieldLongBookCtrl.long_orderTypeArr" ng-bind=type.name ng-click=csdFieldLongBookCtrl.long_chooseOrderType(type)>默认按钮</div></div></div></div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 50px">场次：</div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff;width: 120px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdFieldLongBookCtrl.showStartTime==\'选择开始时间\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdFieldLongBookCtrl.showStartTime ng-click="csdFieldLongBookCtrl.showStartTimeBox=!csdFieldLongBookCtrl.showStartTimeBox">场馆1</div></div><div style="position: relative;z-index: 300" class=form_select_div ng-show=csdFieldLongBookCtrl.showStartTimeBox><div class="select_cell pointer ellipsis" ng-repeat="time in csdFieldLongBookCtrl.times" ng-bind=time.showDate ng-click=csdFieldLongBookCtrl.chooseStartTime(time)>默认按钮</div></div></div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff;width: 120px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdFieldLongBookCtrl.showEndTime==\'选择结束时间\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdFieldLongBookCtrl.showEndTime ng-click="csdFieldLongBookCtrl.showEndTimeBox=!csdFieldLongBookCtrl.showEndTimeBox">场馆1</div></div><div style="position: relative;z-index: 300" class=form_select_div ng-show=csdFieldLongBookCtrl.showEndTimeBox><div class="select_cell pointer ellipsis" ng-repeat="time in csdFieldLongBookCtrl.times" ng-bind=time.showDate ng-click=csdFieldLongBookCtrl.chooseEndTime(time)>默认按钮</div></div></div><div class=clear></div></div></div></div></div><div class=clear></div></div></div><div ng-show="csdFieldLongBookCtrl.showResult.length>0"><div class=cancelTable style="width: 106rem;margin-left: 30px;max-height: 500px;overflow-y: auto"><div class="cancelThTr height_40" style="font-size: 15px"><div class="cancelTh width_4 ellipsis"><div style="width: 16px;height: 16px;border-radius: 5px;margin-top: 7px;margin-left: 12px;cursor: pointer" class={{csdFieldLongBookCtrl.chooseAll}} ng-click=csdFieldLongBookCtrl.changeAllChoose()></div></div><div class="cancelTh width_16 ellipsis">日期</div><div class="cancelTh width_16 ellipsis">场次开始时间</div><div class="cancelTh width_16 ellipsis">场次结束时间</div><div class="cancelTh width_16 ellipsis">场地</div><div class="cancelTh width_16 ellipsis">项目</div><div class="cancelTh width_16 ellipsis" style=color:#ff4949><span>已选择</span> <span ng-bind=csdFieldLongBookCtrl.showResult.length-csdFieldLongBookCtrl.cancelDocArr.length></span> <span>场地</span></div></div><div class=cancelTr ng-repeat="doc in csdFieldLongBookCtrl.showResult"><div class="cancelTd width_4 ellipsis"><div style="width: 16px;height: 16px;border-radius: 5px;margin-top: 15px;margin-left: 12px;cursor: pointer" class={{doc.choose}} ng-click=csdFieldLongBookCtrl.changeChoose(doc)></div></div><div class="cancelTd width_16 ellipsis" ng-bind="doc.startDate | date:\'yyyy-MM-dd\'">预订时间</div><div class="cancelTd width_16 ellipsis" ng-bind="doc.startDate | date:\'HH:mm\'"></div><div class="cancelTd width_16 ellipsis" ng-bind="doc.endDate | date:\'HH:mm\'"></div><div class="cancelTd width_16 ellipsis" ng-bind=doc.fieldName></div><div class="cancelTd width_16 ellipsis" ng-bind=doc.itemNames[0]></div><div class="cancelTd width_16 ellipsis"></div></div></div><div style="width: 106rem;margin-left: 30px"><div class="field_bookConfirmBtn float_left pointer" style="width:60px;height:36px;line-height: 36px" ng-click=csdFieldLongBookCtrl.createLong()>提交</div><!-- <div class="field_bookConfirmBtn float_left pointer" style="width:60px;height:36px;line-height: 36px;margin-left: 20px;color: #000;background: #fff;border:1px solid #ccc;" ng-click="csdFieldLongBookCtrl.addCancelDoc()">删除</div> --><div class="field_bookConfirmBtn float_left pointer" style="width:60px;height:36px;line-height: 36px;margin-left: 20px;color: #000;background: #fff;border:1px solid #ccc" ng-click=csdFieldLongBookCtrl.deleteDoc()>清空</div></div></div></div></div></div></div><!-- 长包可预订场地列表,第一步 --><div class=bgGary ng-show=csdFieldLongBookCtrl.BlongFirst><div class=middle><div id=box class="long_form_div center"><div class=form_padding><div class=long_form_div_titleBox><div class=long_form_div_title>可预订场地</div><div class=long_form_div_close ng-click="csdFieldLongBookCtrl.BlongFirst=false"></div><!-- <img src="assets/images/close.png" class="float_right pointer" ng-click="csdFieldLongBookCtrl.close()"> --></div><div class=long_table><div class=long_tr><div class="long_th width_130 ellipsis">场地名称</div><div class="long_th width_130 ellipsis">预订状态</div><div class="long_th width_130 ellipsis">操作</div></div><div class=long_tr ng-repeat="field in csdFieldLongBookCtrl.longFields"><div class="long_td width_130 ellipsis" ng-bind=field.name>11111111</div><div class="long_td width_130 ellipsis" style="{{field.conflictCount==0?\'\':\'color:#99a9bf\';}}" ng-bind="field.conflictCount==0?\'空闲\':(field.conflictCount +\'个场次被预订\')">111111111111</div><div class="long_td width_130 ellipsis pointer" style=color:#20a0ff ng-show="field.conflictCount==0" ng-click=csdFieldLongBookCtrl.openBlongFouth(field)>预订</div><div class="long_td width_130 ellipsis pointer" style=color:#20a0ff ng-show="field.conflictCount>0&&field.conflictCount<4" ng-click=csdFieldLongBookCtrl.openBlongSecond(field)>灵活预订</div><div class="long_td width_130 ellipsis" ng-show="field.conflictCount>3">不可预订</div></div></div></div></div></div></div><!-- 灵活预订,第二步 --><div class=bgGary ng-show=csdFieldLongBookCtrl.BlongSecond><div class=middle><div id=box class="long_form_div center"><div class=form_padding><div class=long_form_div_titleBox><div class=long_form_div_title><div class=long_boxback ng-click=csdFieldLongBookCtrl.backToFirst()></div><div style="float:left;height:40px;line-height: 40px">可预订场地</div></div><div class=long_form_div_close ng-click="csdFieldLongBookCtrl.BlongSecond=false"></div><!-- <img src="assets/images/close.png" class="float_right pointer" ng-click="csdFieldLongBookCtrl.close()"> --></div><div class=long_table><div class=long_tr><div class="long_th width_195 ellipsis">被预定场次</div><div class="long_th width_195 ellipsis">替换场地</div></div><div class=long_tr ng-repeat="result in csdFieldLongBookCtrl.replaceFields"><div class="long_td width_195 ellipsis"><span ng-bind="result.conflictField.startDate | date:\'yyyy/MM/dd\'">111</span> <span></span> <span ng-bind="(result.conflictField.startDate | date:\'HH:mm\')+\'--\'+(result.conflictField.endDate | date:\'HH:mm\')">111</span></div><div style="position: relative" class="long_td width_195"><div class=selectBox><div class=selectWord ng-bind=result.replaceFieldName>111111</div><div class=selectImage ng-click="result.showChooseReplaceFieldBox=!result.showChooseReplaceFieldBox"></div></div><div class=optionBox style="position: relative;z-index: 200" ng-show=result.showChooseReplaceFieldBox><div class=pointer ng-repeat="field in result.recommendField" ng-bind=field.name ng-click=csdFieldLongBookCtrl.chooseReplaceField(field,result)>默认按钮</div></div></div></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdFieldLongBookCtrl.openBlongFouth()>下一步</div><div class="button_normal float_right" ng-click=csdFieldLongBookCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 最终结果信息展示,第四步 --><div class=bgGary ng-show=csdFieldLongBookCtrl.BlongFouth><div class=middle><div id=box class="long_form_div center"><div class=form_padding><!-- <div class="long_form_div_titleBox">\n                    <div class="long_form_div_title">提交到列表</div>\n                    <div class="long_form_div_close" ng-click="csdFieldLongBookCtrl.close()"></div>\n                    <img src="assets/images/close.png" class="float_right pointer" ng-click="csdFieldLongBookCtrl.close()">\n                </div> --><div><div class="form_title float_left"><div class=long_boxback ng-click=csdFieldLongBookCtrl.backToSecond()></div><div style="float:left;height:40px;line-height: 40px">提交到列表</div></div><img src=assets/images/close.png class="float_right pointer" ng-click="csdFieldLongBookCtrl.BlongFouth=false"></div><div class=clear></div><div class=form_error_font></div><div style="color:#475568;font-size: 13px"><div style="border-bottom: 1px solid #d3dce6;padding-bottom: 10px"><div class=resultShowLine><span style="font-size: 16px;margin-right: 10px;color:#20a0ff" ng-bind=csdFieldLongBookCtrl.long_field.name></span> <span ng-bind=csdFieldLongBookCtrl.showVenueName></span> <span ng-bind=csdFieldLongBookCtrl.showItemName></span></div><div class=resultShowLine><span>日期范围：</span> <span ng-bind="csdFieldLongBookCtrl.startDate | date:\'yyyy/MM/dd\'"></span> <span>-</span> <span ng-bind="csdFieldLongBookCtrl.endDate | date:\'yyyy/MM/dd\'"></span></div><div class=resultShowLine><span>具体说明：</span> <span style="margin-right: 3px" ng-bind="csdFieldLongBookCtrl.searchKey==\'day\'?\'每天\':(csdFieldLongBookCtrl.searchKey==\'week\'?\'每周\':\'每月\')"></span> <span style="margin-right: 3px" ng-show="csdFieldLongBookCtrl.searchKey==\'week\'" ng-repeat="value in csdFieldLongBookCtrl.searchValueArr" ng-bind="\'周\'+value"></span> <span style="margin-right: 3px" ng-show="csdFieldLongBookCtrl.searchKey==\'month\'" ng-repeat="value in csdFieldLongBookCtrl.searchValueArr" ng-bind="value+\'日\'"></span></div><div class=resultShowLine><span>场次时间：</span> <span ng-repeat="time in csdFieldLongBookCtrl.showTimesArr" ng-bind="time.showDate+\' \'"></span></div></div><div style="margin-top: 10px" ng-show="csdFieldLongBookCtrl.specialArr.length>0"><div style="margin:5px 0">替换的场地</div><div ng-repeat="field in csdFieldLongBookCtrl.specialArr"><div class=resultShowLine><span style="font-size: 16px;color:#20a0ff" ng-bind=field.name></span> <span ng-bind=csdFieldLongBookCtrl.showVenueName></span> <span ng-bind=csdFieldLongBookCtrl.showItemName></span></div><div class=resultShowLine><span>日期：</span> <span ng-bind="field.startDate | date:\'yyyy/MM/dd\'"></span><!-- <span>-</span>\n                                <span ng-bind="field.endDate | date:\'yyyy/MM/dd\'"></span> --></div><div class=resultShowLine><span>场次时间：</span> <span style="margin-right: 5px" ng-bind="(field.startDate | date:\'HH:mm\')+\'--\'+(field.endDate | date:\'HH:mm\')"></span></div></div></div><div style="border-top:1px solid #d3dce6;width:390px;margin: 10px 0 0 0" ng-show="csdFieldLongBookCtrl.specialArr.length>0"></div><div style="margin-top: 10px"><div class=resultShowLine><span>预订方名称：</span> <span ng-bind=csdFieldLongBookCtrl.long_name></span></div><div class=resultShowLine><span>联系方式：</span> <span ng-bind="csdFieldLongBookCtrl.long_tel?csdFieldLongBookCtrl.long_tel:\'无\'"></span></div><div class=resultShowLine><span>长包备注：</span> <span ng-bind="csdFieldLongBookCtrl.long_remark?csdFieldLongBookCtrl.long_remark:\'无\'"></span></div><!-- <div class="resultShowLine">\n                            <span>预订价格：</span>\n                            <span ng-bind="csdFieldLongBookCtrl.long_price | currency:\'￥\'"></span>\n                        </div> --></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdFieldLongBookCtrl.getResult()>提交到列表</div><div class="button_normal float_right" ng-click=csdFieldLongBookCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=csdFieldLongBookCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=csdFieldLongBookCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="csdFieldLongBookCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=csdFieldLongBookCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=csdFieldLongBookCtrl.wordERR>22212</div><div class=promptClose ng-click=csdFieldLongBookCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=csdFieldLongBookCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=csdFieldLongBookCtrl.wordWARN>22212</div><div class=promptClose ng-click=csdFieldLongBookCtrl.closePrompt()></div></div></div></div>'), a.put("app/checkstand/field/once/field-book-flexible.html", '<div><div class=field_selectBox style=height:auto><div style="min-width: 1360px"><div class="fbonce_member_InfoBox float_left"><div class=fbonce_m_i_readTelOrCard><div class=fbonce_m_i_r_title>读取用户信息</div><div class=fbonce_m_i_r_contect><input id=cardNoBox class=fbonce_m_i_r_c_input placeholder=请读取会员卡号/二维码 ng-model=csdFieldBookCtrl.memberTelOrCard ng-keypress=csdFieldBookCtrl.enterCheck($event) style=ime-mode:disabled><div ng-show=csdFieldBookCtrl.memberTelOrCard class=fbonce_m_i_r_c_btn ng-click=csdFieldBookCtrl.checkMember()>查询</div><div ng-hide=csdFieldBookCtrl.memberTelOrCard class="fbonce_m_i_r_c_btn bgcolorG">查询</div><div class="fbonce_m_i_r_c_btn bgcolorW borderccc" style="color: #475669" ng-click=csdFieldBookCtrl.resert()>重置</div></div></div><div ng-show=csdFieldBookCtrl.showMemberInfo class=fbonce_m_i_info><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>姓名:</div><div class=fbonce_m_i_i_l_d_value ng-bind=csdFieldBookCtrl.members[0].name>徐涛</div></div><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>现金账户:</div><div class=fbonce_m_i_i_l_d_value ng-bind="csdFieldBookCtrl.members[0].cards[0].total?csdFieldBookCtrl.members[0].cards[0].total:0 | currency:\'￥\'">500元</div></div></div><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>级别:</div><div class=fbonce_m_i_i_l_d_value ng-show=csdFieldBookCtrl.members[0].cards[0].levelDes ng-bind=csdFieldBookCtrl.members[0].cards[0].levelDes>金卡</div><div class=fbonce_m_i_i_l_d_value ng-hide=csdFieldBookCtrl.members[0].cards[0].levelDes>暂无等级</div></div><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>虚拟账户:</div><div class="fbonce_m_i_i_l_d_value ellipsis" title="{{(csdFieldBookCtrl.members[0].virtualAccount.total | currency:\'￥\')+\'(\'+(csdFieldBookCtrl.members[0].virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'}}"><span ng-bind="csdFieldBookCtrl.members[0].virtualAccount.total | currency:\'￥\'">500元(2017-10-28过期)</span> <span ng-show="csdFieldBookCtrl.members[0].virtualAccount.total>0" ng-bind="\'(\'+(csdFieldBookCtrl.members[0].virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'"></span></div></div></div><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>手机号:</div><div class=fbonce_m_i_i_l_d_value ng-bind=csdFieldBookCtrl.members[0].tel>18806712362</div></div><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key style="color: #20a0ff;cursor: pointer" ng-hide=csdFieldBookCtrl.members[0].isReal ng-click="csdFieldBookCtrl.openShowRechargeBox(\'idCard\')">账户认证</div><div class=fbonce_m_i_i_l_d_key style="color: #20a0ff;cursor: pointer" ng-show=csdFieldBookCtrl.members[0].isReal ng-click=csdFieldBookCtrl.openShowRechargeBox()>账户充值</div></div></div></div><div ng-hide=csdFieldBookCtrl.showMemberInfo class="fbonce_m_i_info fbonce_m_i_noInfo"><span class=colorG>暂无会员信息，是否</span> <span class="colorB pointer" ng-click="csdFieldBookCtrl.showCreateMember=true">注册会员</span></div></div><div style="width: 320px;height: 110px;float: left;margin-left: 40px"><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #20a0ff"></div><div class=fbonce_bookDetailName>已选</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #ff4949"></div><div class=fbonce_bookDetailName>使用中</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #fff;border: 1px solid #d3dce6"></div><div class=fbonce_bookDetailName>可预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #5ED878"></div><div class=fbonce_bookDetailName>普通预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #F69667"></div><div class=fbonce_bookDetailName>长包预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #67BDDE"></div><div class=fbonce_bookDetailName>培训预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #c0ccda"></div><div class=fbonce_bookDetailName>过期/停用</div></div></div><div class=clear></div></div><div class=fbonce_titleBox style="min-width: 1360px"><div style="float: left"><div class="fbonce_t_Title fbonce_t_once" ng-click="csdFieldBookCtrl.changeTitle(\'once\')">预订场地</div><div class="fbonce_t_Title fbonce_t_long bgcolorB">现场消费</div></div><div style="float: left;text-align: left;margin-left: 20px"><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdFieldBookCtrl.showVenueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdFieldBookCtrl.showVenueName ng-click="csdFieldBookCtrl.showChooseVenueBox=!csdFieldBookCtrl.showChooseVenueBox">场馆1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=csdFieldBookCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in csdFieldBookCtrl.venues" ng-bind=venue.name ng-click=csdFieldBookCtrl.chooseVenueName(venue)>默认按钮</div></div></div><div class="select fbonce_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdFieldBookCtrl.showItemName==\'选择项目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdFieldBookCtrl.showItemName ng-click="csdFieldBookCtrl.showChooseItemBox=!csdFieldBookCtrl.showChooseItemBox">项目1</div></div><div class=form_select_div style="position: relative;z-index: 200" ng-show=csdFieldBookCtrl.showChooseItemBox><div class="select_cell pointer ellipsis" ng-repeat="item in csdFieldBookCtrl.items" ng-bind=item.name ng-click=csdFieldBookCtrl.chooseItemName(item)>默认按钮</div></div></div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="csdFieldBookCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="csdFieldBookCtrl.showChooseStartDateBox=!csdFieldBookCtrl.showChooseStartDateBox"></div></div><div class=input_calendar_datetimepick style="z-index: 50" ng-show=csdFieldBookCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=csdFieldBookCtrl.closeChooseStartDateBox() ng-date=csdFieldBookCtrl.startDate></datetimepick></div></div><!-- <div style="height: 36px;float:left;border-radius: 5px;font-size: 16px;font-weight: bold;">\n                    <div style="width: 150px;height: 34px;line-height: 34px;float: left;text-align: center;">\n                        <span style="{{csdFieldBookCtrl.dateArr[0].week==\'周六\'||csdFieldBookCtrl.dateArr[0].week==\'周日\'?\'color:#ff4949;\':\'\'}}" ng-bind="csdFieldBookCtrl.dateArr[0].week"></span>\n                        <span>&nbsp;</span>\n                        <span ng-bind="csdFieldBookCtrl.dateArr[0].date | date:\'yyyy-MM-dd\'"></span>\n                    </div>\n                </div> --><div class=clear></div></div></div></div><div class=clear></div><div style="text-align: center;width:1360px;height: 20px;line-height: 20px;margin-top:10px;font-size: 12px"><div style="float: left;margin-right: 20px"><span style="font-weight: bold">认证会员：</span> <span style="color: #ff4949">9.5折</span></div><div style="float: left;margin-right: 20px" ng-repeat="card in csdFieldBookCtrl.cards"><span style="font-weight: bold" ng-bind="card.name+\'：\'">临时会员：</span> <span style="color: #ff4949" ng-bind="card.discount==1?\'无折扣\':(card.discount*10+\'折\')">无折扣</span></div></div><div class=fbonce_fieldBox ng-show="csdFieldBookCtrl.searchVenueId&&csdFieldBookCtrl.searchItemId&&csdFieldBookCtrl.times.length!=0&&csdFieldBookCtrl.fields.length!=0"><div><div class=fbonce_f_hoursBox><div class="fbonce_fieldName fbonce_f_h_space"></div><div class="fbonce_fieldName fbonce_f_h_hours" ng-repeat="value in csdFieldBookCtrl.showHours"><div class=fbonce_f_h_hour style={{value.fontColor}} ng-bind="value.num+\':00\'"></div></div><!-- <div class="fbonce_fieldName fbonce_f_h_lastBox">\n                    <div class="fbonce_f_h_lastHour" ng-bind="csdFieldBookCtrl.endHour+\':00\'"></div>\n                </div> --><div class=clear></div></div><div class=fbonce_timeBox><div class="fbonce_timeName ellipsis" style={{field.fontColor}} ng-repeat="field in csdFieldBookCtrl.fields" ng-bind=field.name title={{field.name}}></div></div><div class=float_left><div class=field_time ng-repeat="field in csdFieldBookCtrl.fields"><div class=field_fieldName style="width: auto" ng-repeat="time in field.times"><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#fff;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-bind=time.name title="{{time.name+\'（号码：\'+(time.tel?time.tel:\'暂无号码\')+\' \'+\'/入场码：\'+time.code+\' \'+\'/备注：\'+(time.remark?time.remark:\'暂无备注）\')}}" ng-show="time.state==\'hasbook\'"></div><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#fff;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-bind=time.name title="{{time.name+\'（号码：\'+(time.tel?time.tel:\'暂无号码\')+\' \'+\'/入场码：\'+time.code+\' \'+\'/备注：\'+(time.remark?time.remark:\'暂无备注）\')}}" ng-show="time.state==\'isUsed\'"></div><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#fff;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-bind=time.name title="{{time.name+\'（号码：\'+(time.tel?time.tel:\'暂无号码\')+\' \'+\'/入场码：\'+time.code+\' \'+\'/备注：\'+(time.remark?time.remark:\'暂无备注）\')}}" ng-show="time.state==\'haspass\'"></div><div class="field_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#8492a6;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'stop\'">停用中</div><div class="field_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#8492a6;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'cantbook\'">已过期</div><div class="field_fieldAndTime pointer" style="{{time.bgColor}}{{time.fontColor}}{{time.width}}{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'canbook\'" ng-click=csdFieldBookCtrl.chooseFieldFiexible(field,time) ng-bind=time.price title={{time.price}}></div><div class=field_fieldAndTime style="{{time.bgColor}}{{time.fontColor}}{{time.width}}{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'choose\'" ng-bind=time.name title="{{time.name+\'(\'+(time.tel?time.tel:\'暂无号码\')+\')\'}}" ng-bind=time.price title={{time.price}}></div></div></div></div><div style=clear:both></div></div><div class=field_bookResultBox style="width: auto;min-height: 60px"><!-- <div style="float: left;margin-left: 40px;">\n                <div style="width: 65px;height: 40px;line-height: 40px;float: left;">起始时间</div>\n                <div style="width: 180px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;text-indent: 20px;border-radius:4px;" class="{{csdFieldBookCtrl.startTime==\'点击场次获取\'?\'colorG\':\'\'}}" ng-bind="csdFieldBookCtrl.startTime"></div>\n                <div class="clear"></div>\n            </div> --><div style="float: left;margin-left: 40px"><div style="width: 65px;height: 40px;line-height: 40px;float: left">起始时间</div><div style="width: 108px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;border-right: none;text-indent: 20px;border-radius:4px 0 0 4px" ng-bind=csdFieldBookCtrl.startTime class="{{csdFieldBookCtrl.startTime==\'点击场次获取\'?\'colorG\':\'\'}}"></div><div style="width: 36px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;border-right: none;cursor: pointer;background:url(../../assets/images/reduce.png) no-repeat 11px 17px" ng-click="csdFieldBookCtrl.changeStartTime(\'reduce\')"></div><div style="width: 36px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;cursor: pointer;background:url(../../assets/images/add.png) no-repeat 11px 11px;border-radius:0 4px 4px 0" ng-click="csdFieldBookCtrl.changeStartTime(\'add\')"></div><div class=clear></div></div><div style="float: left;margin-left: 40px"><div style="width: 65px;height: 40px;line-height: 40px;float: left">预订时长</div><div style="width: 108px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;border-right: none;text-indent: 20px;border-radius:4px 0 0 4px" ng-bind="csdFieldBookCtrl.lastTime?csdFieldBookCtrl.lastTime+\'h\':\'\'"></div><div style="width: 36px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;border-right: none;cursor: pointer;background:url(../../assets/images/reduce.png) no-repeat 11px 17px" ng-click="csdFieldBookCtrl.changeLastTime(\'reduce\')"></div><div style="width: 36px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;cursor: pointer;background:url(../../assets/images/add.png) no-repeat 11px 11px;border-radius:0 4px 4px 0" ng-click="csdFieldBookCtrl.changeLastTime(\'add\')"></div><div class=clear></div></div><!-- <div style="float: left;margin-left: 40px;">\n                <div style="width: 65px;height: 40px;line-height: 40px;float: left;">预订价格</div>\n                <input style="width: 180px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;text-indent: 20px;border-radius:4px;" ng-model="csdFieldBookCtrl.flexibleOrderPrice" placeholder="输入预订价格">\n                <div class="clear"></div>\n            </div> --><div style="float: left;margin-left: 40px;height: 40px;line-height: 40px"><div class=fbonce_orderPriceName>会员价：</div><div class=fbonce_orderPrice><span style="font-size: 14px">￥</span> <span style="font-size: 18px;font-weight: medium" ng-bind=csdFieldBookCtrl.order.total></span></div></div><div class=clear></div></div></div><div class=float_left ng-show="!(csdFieldBookCtrl.searchVenueId&&csdFieldBookCtrl.searchItemId&&csdFieldBookCtrl.times.length!=0&&csdFieldBookCtrl.fields.length!=0)"><div style="width:950px;height: 60px;text-align: center;line-height: 60px;color: #20a0ff;border:1px solid #d3dce6;margin-top: 10px">暂无可预订场地</div></div><div class=clear></div><div class=fbonce_bookConfirmBtn ng-hide="csdFieldBookCtrl.order.orderArr.length>0&&csdFieldBookCtrl.order._member&&csdFieldBookCtrl.lastTime>0&&csdFieldBookCtrl.order.total" style="background: #d3dce6">确认预订</div><div class="fbonce_bookConfirmBtn pointer" ng-show="csdFieldBookCtrl.order.orderArr.length>0&&csdFieldBookCtrl.order._member&&csdFieldBookCtrl.lastTime>0&&csdFieldBookCtrl.order.total" ng-click=csdFieldBookCtrl.openShowFiexibleOrderBox()>确认预订</div></div><!-- 选择支付方式 --><div class=bgGary ng-show=csdFieldBookCtrl.showOrderBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">发起支付</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdFieldBookCtrl.showOrderBox=false"></div><div class=clear></div><div class=form_error_font></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin" style="margin-right: 8px">支付金额</div><div class="form_value float_left form_value_width" style=border:none;color:#ff4949;text-indent:0><span>￥</span> <span style="font-weight: medium;font-size: 18px" ng-bind="csdFieldBookCtrl.order.payment==\'member\'?csdFieldBookCtrl.order.total:csdFieldBookCtrl.order.subtotal"></span></div></div><div class=clear></div></div><div style="margin-top: 10px"><div style="float: left"><div class="form_key float_left form_key_margin" style="margin-right: 8px">账户余额</div><div class="form_value float_left" style=border:none;text-indent:0><span>￥</span> <span ng-bind=csdFieldBookCtrl.members[0].cards[0].total></span></div></div><div style="float: left;margin-left: 30px"><div class="form_key float_left form_key_margin" style="margin-right: 8px">虚拟余额</div><div class="form_value float_left" style=border:none;text-indent:0><span>￥</span> <span ng-bind=csdFieldBookCtrl.members[0].virtualAccount.total></span> <span ng-bind="\'(\'+(csdFieldBookCtrl.members[0].virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'"></span></div></div><div class=clear></div></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">支付方式</div><div style="width: 350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in csdFieldBookCtrl.paymentArr" ng-click=csdFieldBookCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style="width: 0;height: 0;overflow: hidden" ng-show=csdFieldBookCtrl.showCodeBox><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=csdFieldBookCtrl.order.auth_code ng-keypress=csdFieldBookCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div><div style="width: 420px;border-bottom: 1px solid #ccc"></div><div style="margin-top: 10px" ng-repeat="field in csdFieldBookCtrl.order.orderArr"><div class=resultShowLine style="font-size: 16px"><span ng-bind=field.fieldName></span> <span>&nbsp;</span> <span ng-bind=field.timeShowDate></span></div><div class=resultShowLine><span ng-bind="csdFieldBookCtrl.startDate | date:\'yyyy-MM-dd\'"></span> <span>&nbsp;</span> <span ng-bind=field.week></span> <span>&nbsp;</span> <span ng-bind=csdFieldBookCtrl.showVenueName></span></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdFieldBookCtrl.createFlexible()>确认预订</div><div class="button_normal float_right" ng-click="csdFieldBookCtrl.showOrderBox=false">取消</div><div class=clear></div></div></div></div></div><!-- 注册会员 --><div class=bgGary ng-show=csdFieldBookCtrl.showCreateMember><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注册会员</div><img src=assets/images/close.png class="float_right pointer" ng-click=csdFieldBookCtrl.close()></div><div class=clear></div><div class=form_error_font></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">会员名称</div><input class="form_value float_left form_value_width" placeholder=请输入姓名 ng-model=csdFieldBookCtrl.member.name></div><div class=clear></div><div class=form_error_font></div></div><div><div><div class="form_key float_left form_key_margin">联系方式</div><input class="form_value float_left form_value_width" placeholder=请输入手机号 ng-model=csdFieldBookCtrl.member.tel></div><div class=clear></div><div class=form_error_font></div></div><div><div><div class="form_key float_left form_key_margin">身份证号</div><input class="form_value float_left form_value_width" placeholder=请输入身份证号 ng-model=csdFieldBookCtrl.member.idCard></div><div class=clear></div><div class=form_error_font></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdFieldBookCtrl.createMember()>成为会员</div><div class="button_normal float_right" ng-click=csdFieldBookCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 账号充值 --><div class=bgGary ng-show=csdFieldBookCtrl.showRechargeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left" ng-hide="csdFieldBookCtrl.needIdCard==\'idCard\'">账户充值</div><div class="form_title float_left" ng-show="csdFieldBookCtrl.needIdCard==\'idCard\'">账户认证</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdFieldBookCtrl.showRechargeBox=false"><div class=clear></div></div><div style="line-height: 36px;margin-top: 20px" ng-hide="csdFieldBookCtrl.needIdCard==\'idCard\'"><div class="fbonce_t_Title fbonce_t_once {{csdFieldBookCtrl.rechargeType==\'cash\'?\'bgcolorB\':\'\'}}" ng-click="csdFieldBookCtrl.changeRechargeType(\'cash\')">现金</div><div class="fbonce_t_Title fbonce_t_once {{csdFieldBookCtrl.rechargeType==\'speCard\'?\'bgcolorB\':\'\'}}" style="border-radius: 0;margin-left: 1px" ng-click="csdFieldBookCtrl.changeRechargeType(\'speCard\')">专用充值卡</div><div class="fbonce_t_Title fbonce_t_long {{csdFieldBookCtrl.rechargeType==\'normalCard\'?\'bgcolorB\':\'\'}}" ng-click="csdFieldBookCtrl.changeRechargeType(\'normalCard\')">通用充值卡</div><div class=clear></div></div><div style=margin-top:20px ng-show="csdFieldBookCtrl.needIdCard==\'idCard\'"><div><div class="form_key float_left form_key_margin">身份证号</div><input class="form_value float_left form_value_width" placeholder=请输入身份证号 ng-model=csdFieldBookCtrl.idCard></div><div class=clear></div></div><div style=margin-top:20px ng-show="csdFieldBookCtrl.rechargeType==\'cash\'&&csdFieldBookCtrl.needIdCard!=\'idCard\'"><div class="form_key float_left form_key_margin">选择卡种</div><div class="float_left pointer zindex_999 select"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=csdFieldBookCtrl.showCardName ng-click="csdFieldBookCtrl.openChooseCardBox = !csdFieldBookCtrl.openChooseCardBox"></div><div class=form_select_div style=width:345px ng-show=csdFieldBookCtrl.openChooseCardBox><div class="select_cell pointer" ng-repeat="card in csdFieldBookCtrl.cards" ng-bind="card.name+\'(\'+card.price+\'元)\'" ng-click=csdFieldBookCtrl.chooseCard(card)>默认按钮</div></div></div><div class=clear></div></div><div style=margin-top:10px ng-show="csdFieldBookCtrl.rechargeType==\'cash\'&&csdFieldBookCtrl.needIdCard!=\'idCard\'"><div><div class="form_key float_left form_key_margin">支付方式</div><div style="width: 350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in csdFieldBookCtrl.paymentArr" ng-click=csdFieldBookCtrl.chooseRechargePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style=width:0;height:0;overflow:hidden ng-show="csdFieldBookCtrl.rechargeType==\'cash\'&&csdFieldBookCtrl.needIdCard!=\'idCard\'"><div><div class="form_key float_left form_key_margin">支付条码</div><input id=rechargeAuth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=csdFieldBookCtrl.rechargeAuth_code ng-keypress=csdFieldBookCtrl.rechargeAuth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div><div ng-show="csdFieldBookCtrl.rechargeType==\'speCard\'"><div class="form_key float_left form_key_margin">充值场馆</div><div class=float_left style="width: 350px;padding-top: 7px"><div class=singleChoose_option ng-repeat="venue in csdFieldBookCtrl.venues_clone" ng-click=csdFieldBookCtrl.chooseChargeVenue(venue)><div class="singleChoose_imageBox {{venue.image}}" style="height: 26px"></div><div class=singleChoose_prompt style="min-width:60px;height: 26px;line-height: 26px" ng-bind=venue.name>场馆</div></div></div></div><div class=clear></div><div style=margin-top:20px ng-show="csdFieldBookCtrl.rechargeType==\'normalCard\'||csdFieldBookCtrl.rechargeType==\'speCard\'&&csdFieldBookCtrl.needIdCard!=\'idCard\'"><div><div class="form_key float_left form_key_margin">充值账号</div><input class="form_value float_left form_value_width" placeholder=请输入充值卡账号 ng-model=csdFieldBookCtrl.chargeCardNum></div><div class=clear></div><div class=form_error_font></div></div><div ng-show="csdFieldBookCtrl.rechargeType==\'normalCard\'||csdFieldBookCtrl.rechargeType==\'speCard\'"><div><div class="form_key float_left form_key_margin">充值密码</div><input class="form_value float_left form_value_width" placeholder=请输入充值卡密码 ng-model=csdFieldBookCtrl.chargeCardPassword></div><div class=clear></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdFieldBookCtrl.recharge()>完成</div><div class="button_normal float_right" ng-click="csdFieldBookCtrl.showRechargeBox=false">取消</div><div class=clear></div></div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=csdFieldBookCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=csdFieldBookCtrl.closePrompt()></div></div></div></div>'),
            a.put("app/checkstand/field/once/field-book-once.html", '<div><div class=fbonce_selectBox><div style="min-width: 1360px"><div class="fbonce_member_InfoBox float_left"><div class=fbonce_m_i_readTelOrCard><div class=fbonce_m_i_r_title>读取用户信息</div><div class=fbonce_m_i_r_contect><input id=cardNoBox class=fbonce_m_i_r_c_input placeholder=请读取会员卡号/二维码 ng-model=csdFieldBookCtrl.memberTelOrCard ng-keypress=csdFieldBookCtrl.enterCheck($event) style=ime-mode:disabled><div ng-show=csdFieldBookCtrl.memberTelOrCard class=fbonce_m_i_r_c_btn ng-click=csdFieldBookCtrl.checkMember()>查询</div><div ng-hide=csdFieldBookCtrl.memberTelOrCard class="fbonce_m_i_r_c_btn bgcolorG">查询</div><div class="fbonce_m_i_r_c_btn bgcolorW borderccc" style="color: #475669" ng-click=csdFieldBookCtrl.resert()>重置</div></div></div><div ng-show=csdFieldBookCtrl.showMemberInfo class=fbonce_m_i_info><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>姓名:</div><div class=fbonce_m_i_i_l_d_value ng-bind=csdFieldBookCtrl.members[0].name>徐涛</div></div><div class=fbonce_m_i_i_l_detail style=margin-left:-40px><div class=fbonce_m_i_i_l_d_key>现金账户:</div><div class=fbonce_m_i_i_l_d_value ng-bind="csdFieldBookCtrl.members[0].cards[0].total?csdFieldBookCtrl.members[0].cards[0].total:0 | currency:\'￥\'">500元</div></div></div><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>级别:</div><div class=fbonce_m_i_i_l_d_value ng-show=csdFieldBookCtrl.members[0].cards[0].levelDes ng-bind=csdFieldBookCtrl.members[0].cards[0].levelDes>金卡</div><div class=fbonce_m_i_i_l_d_value ng-hide=csdFieldBookCtrl.members[0].cards[0].levelDes>暂无等级</div></div><div class=fbonce_m_i_i_l_detail style=margin-left:-40px><div class=fbonce_m_i_i_l_d_key>虚拟账户:</div><div class="fbonce_m_i_i_l_d_value ellipsis" title="{{(csdFieldBookCtrl.members[0].virtualAccount.total | currency:\'￥\')+\'(\'+(csdFieldBookCtrl.members[0].virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'}}"><span ng-bind="csdFieldBookCtrl.members[0].virtualAccount.total | currency:\'￥\'">500元(2017-10-28过期)</span> <span ng-show="csdFieldBookCtrl.members[0].virtualAccount.total>0" ng-bind="\'(\'+(csdFieldBookCtrl.members[0].virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'"></span></div></div></div><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>手机号:</div><div class=fbonce_m_i_i_l_d_value ng-bind=csdFieldBookCtrl.members[0].tel>18806712362</div></div><div class=fbonce_m_i_i_l_detail style=margin-left:-43px><div class=fbonce_m_i_i_l_d_key style="color: #20a0ff;cursor: pointer" ng-hide=csdFieldBookCtrl.members[0].isReal ng-click="csdFieldBookCtrl.openShowRechargeBox(\'idCard\')">账户认证</div><div class=fbonce_m_i_i_l_d_key style="color: #20a0ff;cursor: pointer" ng-show=csdFieldBookCtrl.members[0].isReal ng-click=csdFieldBookCtrl.openShowRechargeBox()>账户充值</div></div></div></div><div ng-hide=csdFieldBookCtrl.showMemberInfo class="fbonce_m_i_info fbonce_m_i_noInfo"><span class=colorG>暂无会员信息，是否</span> <span class="colorB pointer" ng-click="csdFieldBookCtrl.showCreateMember=true">注册会员</span></div></div><div style="width: 320px;height: 110px;float: left;margin-left: 40px"><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #20a0ff"></div><div class=fbonce_bookDetailName>已选</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #ff4949"></div><div class=fbonce_bookDetailName>使用中</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #fff;border: 1px solid #d3dce6"></div><div class=fbonce_bookDetailName>可预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #5ED878"></div><div class=fbonce_bookDetailName>普通预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #F69667"></div><div class=fbonce_bookDetailName>长包预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #67BDDE"></div><div class=fbonce_bookDetailName>培训预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #c0ccda"></div><div class=fbonce_bookDetailName>过期/停用</div></div></div><div class=clear></div></div><div class=fbonce_titleBox style="min-width: 1360px"><div style="float: left"><div class="fbonce_t_Title fbonce_t_once bgcolorB">预订场地</div><div class="fbonce_t_Title fbonce_t_long" ng-click="csdFieldBookCtrl.changeTitle(\'fiexible\')">现场消费</div></div><div style="float: left;text-align: left;margin-left: 20px"><div class="select fbonce_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdFieldBookCtrl.showVenueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdFieldBookCtrl.showVenueName ng-click="csdFieldBookCtrl.showChooseVenueBox=!csdFieldBookCtrl.showChooseVenueBox">场馆1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=csdFieldBookCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in csdFieldBookCtrl.venues" ng-bind=venue.name ng-click=csdFieldBookCtrl.chooseVenueName(venue)>默认按钮</div></div></div><div class="select fbonce_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdFieldBookCtrl.showItemName==\'选择项目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdFieldBookCtrl.showItemName ng-click="csdFieldBookCtrl.showChooseItemBox=!csdFieldBookCtrl.showChooseItemBox">项目1</div></div><div class=form_select_div style="position: relative;z-index: 200" ng-show=csdFieldBookCtrl.showChooseItemBox><div class="select_cell pointer ellipsis" ng-repeat="item in csdFieldBookCtrl.items" ng-bind=item.name ng-click=csdFieldBookCtrl.chooseItemName(item)>默认按钮</div></div></div><div style="height: 36px;float:left;border:1px solid #ccc;border-radius: 5px;border-right: none;margin-left:15px"><div style="width: 100px;height: 34px;line-height: 34px;border-right: 1px solid #ccc;float: left;text-align: center;cursor: pointer;{{date.bgColor}}" ng-repeat="date in csdFieldBookCtrl.dateArr" ng-click=csdFieldBookCtrl.changeDate(date)><span style="{{(date.week==\'周六\'||date.week==\'周日\')&&!date.isChoose?\'color:#ff4949;\':\'\'}}" ng-bind=date.week></span> <span ng-bind="date.date | date:\'MM-dd\'"></span></div></div><div class=clear></div></div></div></div><div class=clear></div><div style="text-align: center;width:1360px;height: 20px;line-height: 20px;margin-top:10px;font-size: 12px"><div style="float: left;margin-right: 20px"><span style="font-weight: bold">认证会员：</span> <span style="color: #ff4949">9.5折</span></div><div style="float: left;margin-right: 20px" ng-repeat="card in csdFieldBookCtrl.cards"><span style="font-weight: bold" ng-bind="card.name+\'：\'">临时会员：</span> <span style="color: #ff4949" ng-bind="card.discount==1?\'无折扣\':(card.discount*10+\'折\')">无折扣</span></div></div><div class=fbonce_fieldBox style="overflow-x: auto" ng-show="csdFieldBookCtrl.searchVenueId&&csdFieldBookCtrl.searchItemId&&csdFieldBookCtrl.times.length!=0&&csdFieldBookCtrl.fields.length!=0"><div style={{csdFieldBookCtrl.tableWidthB}}><div class=fbonce_f_hoursBox><div class="fbonce_fieldName fbonce_f_h_space"></div><div class="fbonce_fieldName fbonce_f_h_hours" ng-repeat="value in csdFieldBookCtrl.showHours"><div class=fbonce_f_h_hour style={{value.fontColor}} ng-bind="value.num+\':00\'"></div></div><!-- <div class="fbonce_fieldName fbonce_f_h_lastBox">\n					<div class="fbonce_f_h_lastHour" ng-bind="csdFieldBookCtrl.endHour+\':00\'"></div>\n				</div> --><div class=clear></div></div><div class=fbonce_timeBox><div class="fbonce_timeName ellipsis" style={{field.fontColor}} ng-repeat="field in csdFieldBookCtrl.fields" ng-bind=field.name title={{field.name}}></div></div><div class=float_left style={{csdFieldBookCtrl.tableWidthS}}><div class=fbonce_time ng-repeat="field in csdFieldBookCtrl.fields"><div class=fbonce_fieldName style="width: auto" ng-repeat="time in field.times"><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#fff;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-bind=time.name title="{{time.name+\'（号码：\'+(time.tel?time.tel:\'暂无号码\')+\' \'+\'/入场码：\'+time.code+\' \'+\'/备注：\'+(time.remark?time.remark:\'暂无备注）\')}}" ng-show="time.state==\'hasbook\'"></div><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#fff;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-bind=time.name title="{{time.name+\'（号码：\'+(time.tel?time.tel:\'暂无号码\')+\' \'+\'/入场码：\'+time.code+\' \'+\'/备注：\'+(time.remark?time.remark:\'暂无备注）\')}}" ng-show="time.state==\'isUsed\'"></div><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#fff;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-bind=time.name title="{{time.name+\'（号码：\'+(time.tel?time.tel:\'暂无号码\')+\' \'+\'/入场码：\'+time.code+\' \'+\'/备注：\'+(time.remark?time.remark:\'暂无备注）\')}}" ng-show="time.state==\'haspass\'"></div><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#8492a6;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'stop\'">停用中</div><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#8492a6;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'cantbook\'">已过期</div><div class="fbonce_fieldAndTime pointer" style="{{time.bgColor}}{{time.fontColor}}{{time.width}}{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'canbook\'" ng-click=csdFieldBookCtrl.chooseField(field,time) ng-bind=time.price title={{time.price}}></div><div class="fbonce_fieldAndTime pointer" style="{{time.bgColor}}{{time.fontColor}}{{time.width}}{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'choose\'" ng-click=csdFieldBookCtrl.chooseField(field,time) ng-bind=time.price title={{time.price}}></div></div></div></div><div class=clear></div></div><div class=fbonce_bookResultBox><div class=fbonce_orderPriceBox><div><div class=fbonce_orderPriceName>会员价：</div><div class=fbonce_orderPrice><span style="font-size: 14px">￥</span> <span style="font-size: 18px;font-weight: medium" ng-bind=csdFieldBookCtrl.order.total></span></div></div></div><div class=fbonce_bookResultPos><div class=fbonce_bookResult ng-repeat="field in csdFieldBookCtrl.order.orderArr"><div class=fbonce_bookResult_delete ng-click=csdFieldBookCtrl.deleteField(field)></div><div style="font-size: 13px;color: #1f2d3d"><span ng-bind=field.timeShowDate>1:00-2:00</span> <span ng-bind=field.fieldName>场地02</span></div><!-- <div style="font-size: 13px;color: #8492a6;">\n						<span ng-bind="field.fieldName">场地02</span>\n						<span ng-bind="field.date | date:\'yyyy-MM-dd\'">今天</span>\n						<span ng-bind="field.week">羽毛球</span>\n						<span ng-bind="field.venueName">室内体育馆</span>\n					</div> --></div></div><div style=clear:both></div></div></div><div ng-show="!(csdFieldBookCtrl.searchVenueId&&csdFieldBookCtrl.searchItemId&&csdFieldBookCtrl.times.length!=0&&csdFieldBookCtrl.fields.length!=0)"><div style="width:950px;height: 60px;text-align: center;line-height: 60px;color: #20a0ff;border:1px solid #d3dce6;margin-top: 10px">暂无可预订场地</div></div><div class=clear></div><div class=fbonce_bookConfirmBtn ng-hide="csdFieldBookCtrl.order.orderArr.length>0&&csdFieldBookCtrl.order._member" style="background: #d3dce6">确认预订</div><div class="fbonce_bookConfirmBtn pointer" ng-show="csdFieldBookCtrl.order.orderArr.length>0&&csdFieldBookCtrl.order._member" ng-click=csdFieldBookCtrl.openShowOrderBox()>确认预订</div></div><!-- 选择支付方式 --><div class=bgGary ng-show=csdFieldBookCtrl.showOrderBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">发起支付</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdFieldBookCtrl.showOrderBox=false"></div><div class=clear></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin" style="margin-right: 8px">支付金额</div><div class="form_value float_left form_value_width" style=border:none;color:#ff4949;text-indent:0><span>￥</span> <span style="font-weight: medium;font-size: 18px" ng-bind="csdFieldBookCtrl.order.payment==\'member\'?csdFieldBookCtrl.order.total:csdFieldBookCtrl.order.subtotal"></span></div></div><div class=clear></div></div><div style="margin-top: 10px"><div style="float: left"><div class="form_key float_left form_key_margin" style="margin-right: 8px">账户余额</div><div class="form_value float_left" style=border:none;text-indent:0><span>￥</span> <span ng-bind=csdFieldBookCtrl.members[0].cards[0].total></span></div></div><div style="float: left;margin-left: 30px"><div class="form_key float_left form_key_margin" style="margin-right: 8px">虚拟余额</div><div class="form_value float_left" style=border:none;text-indent:0><span>￥</span> <span ng-bind=csdFieldBookCtrl.members[0].virtualAccount.total></span> <span ng-bind="\'(\'+(csdFieldBookCtrl.members[0].virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'"></span></div></div><div class=clear></div></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">支付方式</div><div style="width: 350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in csdFieldBookCtrl.paymentArr" ng-click=csdFieldBookCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style="width: 0;height: 0;overflow: hidden" ng-show=csdFieldBookCtrl.showCodeBox><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=csdFieldBookCtrl.order.auth_code ng-keypress=csdFieldBookCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div><div style="width: 420px;border-bottom: 1px solid #ccc"></div><div style="margin-top: 10px" ng-repeat="field in csdFieldBookCtrl.order.orderArr"><div class=resultShowLine style="font-size: 16px"><span ng-bind=field.fieldName></span> <span>&nbsp;</span> <span ng-bind=field.timeShowDate></span></div><div class=resultShowLine><span ng-bind="csdFieldBookCtrl.startDate | date:\'yyyy-MM-dd\'"></span> <span>&nbsp;</span> <span ng-bind=field.week></span> <span>&nbsp;</span> <span ng-bind=csdFieldBookCtrl.showVenueName></span></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdFieldBookCtrl.create()>确认预订</div><div class="button_normal float_right" ng-click="csdFieldBookCtrl.showOrderBox=false">取消</div><div class=clear></div></div></div></div></div><!-- 注册会员 --><div class=bgGary ng-show=csdFieldBookCtrl.showCreateMember><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注册会员</div><img src=assets/images/close.png class="float_right pointer" ng-click=csdFieldBookCtrl.close()></div><div class=clear></div><div class=form_error_font></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">会员名称</div><input class="form_value float_left form_value_width" placeholder=请输入姓名 ng-model=csdFieldBookCtrl.member.name></div><div class=clear></div><div class=form_error_font></div></div><div><div><div class="form_key float_left form_key_margin">联系方式</div><input class="form_value float_left form_value_width" placeholder=请输入手机号 ng-model=csdFieldBookCtrl.member.tel></div><div class=clear></div><div class=form_error_font></div></div><div><div><div class="form_key float_left form_key_margin">身份证号</div><input class="form_value float_left form_value_width" placeholder=请输入身份证号 ng-model=csdFieldBookCtrl.member.idCard></div><div class=clear></div><div class=form_error_font></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdFieldBookCtrl.createMember()>成为会员</div><div class="button_normal float_right" ng-click=csdFieldBookCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 账号充值 --><div class=bgGary ng-show=csdFieldBookCtrl.showRechargeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left" ng-hide="csdFieldBookCtrl.needIdCard==\'idCard\'">账户充值</div><div class="form_title float_left" ng-show="csdFieldBookCtrl.needIdCard==\'idCard\'">账户认证</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdFieldBookCtrl.showRechargeBox=false"><div class=clear></div></div><div style="line-height: 36px;margin-top: 20px" ng-hide="csdFieldBookCtrl.needIdCard==\'idCard\'"><div class="fbonce_t_Title fbonce_t_once {{csdFieldBookCtrl.rechargeType==\'cash\'?\'bgcolorB\':\'\'}}" ng-click="csdFieldBookCtrl.changeRechargeType(\'cash\')">现金</div><div class="fbonce_t_Title fbonce_t_once {{csdFieldBookCtrl.rechargeType==\'speCard\'?\'bgcolorB\':\'\'}}" style="border-radius: 0;margin-left: 1px" ng-click="csdFieldBookCtrl.changeRechargeType(\'speCard\')">专用充值卡</div><div class="fbonce_t_Title fbonce_t_long {{csdFieldBookCtrl.rechargeType==\'normalCard\'?\'bgcolorB\':\'\'}}" ng-click="csdFieldBookCtrl.changeRechargeType(\'normalCard\')">通用充值卡</div><div class=clear></div></div><div style=margin-top:20px ng-show="csdFieldBookCtrl.needIdCard==\'idCard\'"><div><div class="form_key float_left form_key_margin">身份证号</div><input class="form_value float_left form_value_width" placeholder=请输入身份证号 ng-model=csdFieldBookCtrl.idCard></div><div class=clear></div></div><div style=margin-top:20px ng-show="csdFieldBookCtrl.rechargeType==\'cash\'&&csdFieldBookCtrl.needIdCard!=\'idCard\'"><div class="form_key float_left form_key_margin">选择卡种</div><div class="float_left pointer zindex_999 select"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=csdFieldBookCtrl.showCardName ng-click="csdFieldBookCtrl.openChooseCardBox = !csdFieldBookCtrl.openChooseCardBox"></div><div class=form_select_div style=width:345px ng-show=csdFieldBookCtrl.openChooseCardBox><div class="select_cell pointer" ng-repeat="card in csdFieldBookCtrl.cards" ng-bind="card.name+\'(\'+card.price+\'元)\'" ng-click=csdFieldBookCtrl.chooseCard(card)>默认按钮</div></div></div><div class=clear></div></div><div style=margin-top:10px ng-show="csdFieldBookCtrl.rechargeType==\'cash\'&&csdFieldBookCtrl.needIdCard!=\'idCard\'"><div><div class="form_key float_left form_key_margin">支付方式</div><div style="width: 350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in csdFieldBookCtrl.paymentArr" ng-click=csdFieldBookCtrl.chooseRechargePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style=width:0;height:0;overflow:hidden ng-show="csdFieldBookCtrl.rechargeType==\'cash\'&&csdFieldBookCtrl.needIdCard!=\'idCard\'"><div><div class="form_key float_left form_key_margin">支付条码</div><input id=rechargeAuth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=csdFieldBookCtrl.rechargeAuth_code ng-keypress=csdFieldBookCtrl.rechargeAuth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div><div ng-show="csdFieldBookCtrl.rechargeType==\'speCard\'"><div class="form_key float_left form_key_margin">充值场馆</div><div class=float_left style="width: 350px;padding-top: 7px"><div class=singleChoose_option ng-repeat="venue in csdFieldBookCtrl.venues_clone" ng-click=csdFieldBookCtrl.chooseChargeVenue(venue)><div class="singleChoose_imageBox {{venue.image}}" style="height: 26px"></div><div class=singleChoose_prompt style="min-width:60px;height: 26px;line-height: 26px" ng-bind=venue.name>场馆</div></div></div></div><div class=clear></div><div style=margin-top:20px ng-show="csdFieldBookCtrl.rechargeType==\'normalCard\'||csdFieldBookCtrl.rechargeType==\'speCard\'&&csdFieldBookCtrl.needIdCard!=\'idCard\'"><div><div class="form_key float_left form_key_margin">充值账号</div><input class="form_value float_left form_value_width" placeholder=请输入充值卡账号 ng-model=csdFieldBookCtrl.chargeCardNum></div><div class=clear></div><div class=form_error_font></div></div><div ng-show="csdFieldBookCtrl.rechargeType==\'normalCard\'||csdFieldBookCtrl.rechargeType==\'speCard\'"><div><div class="form_key float_left form_key_margin">充值密码</div><input class="form_value float_left form_value_width" placeholder=请输入充值卡密码 ng-model=csdFieldBookCtrl.chargeCardPassword></div><div class=clear></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdFieldBookCtrl.recharge()>完成</div><div class="button_normal float_right" ng-click="csdFieldBookCtrl.showRechargeBox=false">取消</div><div class=clear></div></div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=csdFieldBookCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=csdFieldBookCtrl.closePrompt()></div></div></div></div>'), a.put("app/checkstand/field/once/field-book.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleChoose">单次预订</div><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-field-longbook>长包预订</div><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-field-cancelbook>预订撤销</div></div><div class=field_bookBoxPostition ui-view=""></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=csdFieldBookCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=csdFieldBookCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="csdFieldBookCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=csdFieldBookCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=csdFieldBookCtrl.wordERR title={{csdFieldBookCtrl.wordERR}}>22212</div><div class=promptClose ng-click=csdFieldBookCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=csdFieldBookCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=csdFieldBookCtrl.wordWARN title={{csdFieldBookCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/checkstand/field/ticket/ticket-record.html", '<div><div class=field_selectBox><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入顾客姓名搜索 ng-model=csdTicketCtrl.searchName><div class=xt_searchImage ng-click=csdTicketCtrl.getRecord()></div></div><div class="form_value float_left form_clock_icon" style=width:150px ng-click="csdTicketCtrl.startDateFlag = !csdTicketCtrl.startDateFlag;csdTicketCtrl.closeDateFlag = false" ng-bind="csdTicketCtrl.startDate | date:\'yyyy-MM-dd\'"></div><div class=float_left style="margin:10px 10px 0 10px">至</div><div class="form_value float_left form_clock_icon" style=width:150px ng-click="csdTicketCtrl.closeDateFlag = !csdTicketCtrl.closeDateFlag;csdTicketCtrl.startDateFlag = false" ng-bind="csdTicketCtrl.closeDate | date:\'yyyy-MM-dd\'"></div><div class=clear></div><div class="student_datetime student_datetime2" style="margin:380px 0 0 0"><datetimepick ng-close=csdTicketCtrl.getRecord() ng-id="\'first\'" ng-show=csdTicketCtrl.startDateFlag ng-date=csdTicketCtrl.startDate></datetimepick></div><div class="student_datetime student_datetime2" style="margin:380px 0 0 0"><datetimepick ng-close=csdTicketCtrl.getRecord() ng-id="\'second\'" ng-show=csdTicketCtrl.closeDateFlag ng-date=csdTicketCtrl.closeDate></datetimepick></div></div></div><div><div style=margin-top:20px><table style="margin:20px 30px 0 0px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">订单时间</td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">商品名称</td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">售价</td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">数量</td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">销售额</td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">顾客姓名</td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作人</td></tr><tr ng-repeat="record in csdTicketCtrl.records" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm\'"></td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record.ticket.name></td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record.ticket.price></td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record.ticket.count></td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record.cost></td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="record.name?record.name:\'暂无\'"></td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record.workerName></td></tr></table></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="csdTicketCtrl.pagination.numPages > 1" total-items=csdTicketCtrl.pagination.totalItems ng-model=csdTicketCtrl.pagination.page items-per-page=csdTicketCtrl.pagination.itemsPerPage max-size=csdTicketCtrl.pagination.maxSize boundary-links="{{csdTicketCtrl.pagination.numPages > 2}}" rotate=false num-pages=csdTicketCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=csdTicketCtrl.pageChanged()></pagination></div><!-- 商品退款 --><div class=bgGary ng-show=csdTicketCtrl.refundFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">商品退款</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdTicketCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">退款金额</div><input class="form_value float_left form_value_width" placeholder=请输入退款金额 ng-model=csdTicketCtrl.refundPrice></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdTicketCtrl.refund()>完成</div><div class="button_normal float_right" ng-click=csdTicketCtrl.close()>取消</div><div class=clear></div></div></div></div></div>'), a.put("app/checkstand/field/ticket/ticket-sale.html", '<div><div class="float_left pointer" ng-class="{\'select\':!csdTicketCtrl.selectItemFlag,\'select_foucs\':csdTicketCtrl.selectItemFlag}" ng-click="csdTicketCtrl.selectItemFlag = !csdTicketCtrl.selectItemFlag" style="margin:20px 0 0 0px"><div class="form_down_icon form_width_180 form_select_value_choose" ng-bind=csdTicketCtrl.iName></div><div class="form_select_div form_width_180" ng-show=csdTicketCtrl.selectItemFlag><div ng-click=csdTicketCtrl.chooseItem(item) ng-repeat="item in csdTicketCtrl.irr" ng-bind=item.name class="select_cell pointer" onclick="event.cancelBubble = true"></div></div></div><div class="float_left pointer" ng-class="{\'select\':!csdTicketCtrl.selectVenueFlag,\'select_foucs\':csdTicketCtrl.selectVenueFlag}" ng-click="csdTicketCtrl.selectVenueFlag = !csdTicketCtrl.selectVenueFlag" style="margin:20px 0 0 30px"><div class="form_down_icon form_width_180 form_select_value_choose" ng-bind=csdTicketCtrl.vName></div><div class="form_select_div form_width_180" ng-show=csdTicketCtrl.selectVenueFlag><div ng-click=csdTicketCtrl.chooseVenue(venue) ng-repeat="venue in csdTicketCtrl.vrr" ng-bind=venue.name class="select_cell pointer" onclick="event.cancelBubble = true"></div></div></div></div><div class=clear></div><div style=z-index:888><table style="margin:20px 30px 0 0px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d" ng-show="csdSellCtrl.tickets.length != 0"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">门票名称</td><td style="width:12%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">时间段</td><td style="width:13%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">项目</td><td style="width:35%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">场馆</td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">价格</td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" colspan=2>数量</td></tr><tr ng-repeat="ticket in csdTicketCtrl.tickets" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=ticket.name></td><td style="width:12%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=ticket.showDate></td><td style="width:13%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=ticket._item.name></td><td style="width:35%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=ticket._venue.name></td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="\'￥\'+ticket.price+\'/张\'"></td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><input ng-model=ticket.num style="border:1px solid #ddd;width:40px;border-radius:4px;height:30px;margin-top:7px;padding-left:6px;font-size:20px" class="float_left"><div class="float_left pointer"><img src=assets/images/circleadd.png style="width:26px;margin:0 5px" ng-click="csdTicketCtrl.changeNum(ticket,\'add\')"> <img src=assets/images/circledelete.png style=width:26px ng-click="csdTicketCtrl.changeNum(ticket,\'delete\')"></div></td><td class=pointer style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px;color:#00a1ff" ng-click=csdTicketCtrl.judgePay(ticket)>确认售卖</td></tr></table><div style="margin-top:20px;font-size:14px;color:#8492a6;border:1px solid #ddd;width:1000px;text-align:center;height:60px;line-height:60px" ng-show="csdSellCtrl.tickets.length == 0">暂无可售卖门票</div><div class=bgGary ng-show=csdTicketCtrl.payFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">发起支付</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdTicketCtrl.payFlag = false"></div><div class=clear></div><div ng-show=csdTicketCtrl.moneyFlag style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">需支付：</div><div class="form_value float_left form_value_width" style=border:none;color:red ng-bind="csdTicketCtrl.realPrice | currency:\'￥\'"></div></div><div class=clear></div></div><div ng-show=!csdTicketCtrl.moneyFlag style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">需支付：</div><div class="form_value float_left form_value_width" style=border:none;color:red ng-bind="csdTicketCtrl.total | currency:\'￥\'"></div></div><div class=clear></div></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">支付方式</div><div><div class=singleChoose_option style="float: none" ng-repeat="payment in csdTicketCtrl.paymentArr" ng-click=csdTicketCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style=width:0;height:0;overflow:hidden><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code class="form_value float_left form_value_width" style=ime-mode:disabled placeholder=请扫描支付码 ng-model=csdTicketCtrl.auth_code ng-keypress=csdTicketCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div></div><div class=form_submit><div ng-show=!csdTicketCtrl.canFlag class="button2_normal float_right form_create_view" ng-click=csdTicketCtrl.create()>确认支付</div><div ng-show=csdTicketCtrl.canFlag class="button2_normal float_right form_create_view">确认支付</div><div class="button_normal float_right" ng-click="csdTicketCtrl.payFlag = false">取消</div><div class=clear></div></div></div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=csdTicketCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click="csdTicketCtrl.showAuth_codeBox = false"></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=csdTicketCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=csdTicketCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="csdTicketCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=csdTicketCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=csdTicketCtrl.wordERR title={{csdTicketCtrl.wordERR}}>22212</div><div class=promptClose ng-click="csdTicketCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=csdTicketCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=csdTicketCtrl.wordWARN title={{csdTicketCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'),
            a.put("app/checkstand/field/ticket/ticket.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal {{csdTicketCtrl.titleState==\'sale\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="csdTicketCtrl.changeTitle(\'sale\')">门票销售</div><div class="field_titleNormal {{csdTicketCtrl.titleState==\'record\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="csdTicketCtrl.changeTitle(\'record\')">销售记录</div></div><div class=field_bookBoxPostition ui-view=""></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=csdTicketCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=csdTicketCtrl.wordOK>22212</div><div class=promptClose ng-click="csdTicketCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=csdTicketCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=csdTicketCtrl.wordERR>22212</div><div class=promptClose ng-click="csdTicketCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=csdTicketCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" title={{csdTicketCtrl.wordWARN}}>支付中...</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/checkstand/finance/cashall/finance-cashall.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleChoose">营业收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-finance-field>场地/综合服务收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-finance-shop>小卖部收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-finance-preppay>押金列表</div></div><div class=field_bookBoxPostition><div><div><div class=field_selectBoxOne style="height: auto"><div><div><div class=field_selectName style="text-indent: 0;width: 80px">选择日期</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="csdFinanceCashallCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="csdFinanceCashallCtrl.showChooseStartDateBox=!csdFinanceCashallCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=csdFinanceCashallCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=csdFinanceCashallCtrl.closeChooseStartDateBox() ng-date=csdFinanceCashallCtrl.startDate></datetimepick></div></div><div class=float_left style="height: 40px;line-height: 40px;padding: 0 10px">至</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="csdFinanceCashallCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="csdFinanceCashallCtrl.showChooseEndDateBox=!csdFinanceCashallCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=csdFinanceCashallCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=csdFinanceCashallCtrl.closeChooseEndDateBox() ng-date=csdFinanceCashallCtrl.endDate></datetimepick></div></div><div><div class="button2_normal float_right" style="margin:0 20px" ng-click=csdFinanceCashallCtrl.export()>导出</div></div><div style=clear:both></div></div><div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择场馆</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="venue in csdFinanceCashallCtrl.venues" ng-click="(venue.image==\'manyChoose_imageG\')?\'\':csdFinanceCashallCtrl.chooseVenueName(venue)"><div class="singleChoose_imageBox {{venue.image}} {{venue.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=venue.name style="{{venue.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择提交人</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="worker in csdFinanceCashallCtrl.workers" ng-click="(worker.image==\'manyChoose_imageG\')?\'\':csdFinanceCashallCtrl.chooseWorkerName(worker)"><div class="singleChoose_imageBox {{worker.image}} {{worker.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=worker.name style="{{worker.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div style=clear:both></div></div></div></div></div><div style="max-width: 106rem;overflow-x: auto"><table id=alltable><tr><td colspan=54><span>柜员收入汇总表：</span> <span ng-bind=csdFinanceCashallCtrl.venueName></span></td></tr><tr><td colspan=54><span>时间范围：</span> <span ng-bind=csdFinanceCashallCtrl.dateName></span></td></tr><tr><td rowspan=2>操作柜员</td><td rowspan=2>开卡数量</td><td rowspan=2>实名认证数量</td><td colspan=9>现金收入</td><td colspan=7>支票收入</td><td colspan=7>转账收入</td><td colspan=7>POS机收入</td><td colspan=10>微信收入（非现金）</td><td colspan=9>支付宝收入（非现金）</td><td rowspan=2 style=color:#20a0ff>合计</td><td rowspan=2>详情</td></tr><tr><td>场地消费</td><td>柜台充值</td><td>门票消费</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td>现金退款</td><td style=color:#20a0ff>合计</td><td>场地消费</td><td>柜台充值</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td style=color:#20a0ff>合计</td><td>场地消费</td><td>柜台充值</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td style=color:#20a0ff>合计</td><td>场地消费</td><td>柜台充值</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td style=color:#20a0ff>合计</td><td>场地消费</td><td>柜台充值</td><td>线上充值</td><td>门票消费</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td>微信退款</td><td style=color:#20a0ff>合计</td><td>场地消费</td><td>柜台充值</td><td>门票消费</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td>支付宝退款</td><td style=color:#20a0ff>合计</td></tr><tr class=trHover ng-repeat="worker in csdFinanceCashallCtrl.result"><td ng-bind=worker.workerName>1</td><td ng-bind=worker.issueCardCount?worker.issueCardCount:0>1</td><td ng-bind=worker.realMemberCount?worker.realMemberCount:0>1</td><td ng-bind=worker.payment.cash.field>1</td><td ng-bind=worker.payment.cash.charge>1</td><td ng-bind=worker.payment.cash.ticket>1</td><td ng-bind=worker.payment.cash.product>1</td><td ng-bind=worker.payment.cash.memberService>1</td><td ng-bind=worker.payment.cash.cardFee>1</td><td ng-bind=worker.payment.cash.bail>1</td><td ng-bind=worker.payment.cash.refund>1</td><td ng-bind=worker.payment.cash.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.check.field>1</td><td ng-bind=worker.payment.check.charge>1</td><td ng-bind=worker.payment.check.product>1</td><td ng-bind=worker.payment.check.memberService>1</td><td ng-bind=worker.payment.check.cardFee>1</td><td ng-bind=worker.payment.check.bail>1</td><td ng-bind=worker.payment.check.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.card.field>1</td><td ng-bind=worker.payment.card.charge>1</td><td ng-bind=worker.payment.card.product>1</td><td ng-bind=worker.payment.card.memberService>1</td><td ng-bind=worker.payment.card.cardFee>1</td><td ng-bind=worker.payment.card.bail>1</td><td ng-bind=worker.payment.card.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.pos.field>1</td><td ng-bind=worker.payment.pos.charge>1</td><td ng-bind=worker.payment.pos.product>1</td><td ng-bind=worker.payment.pos.memberService>1</td><td ng-bind=worker.payment.pos.cardFee>1</td><td ng-bind=worker.payment.pos.bail>1</td><td ng-bind=worker.payment.pos.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.wx.field>1</td><td ng-bind=worker.payment.wx.charge>1</td><td ng-bind=worker.payment.wx.charge_online>1</td><td ng-bind=worker.payment.wx.ticket>1</td><td ng-bind=worker.payment.wx.product>1</td><td ng-bind=worker.payment.wx.memberService>1</td><td ng-bind=worker.payment.wx.cardFee>1</td><td ng-bind=worker.payment.wx.bail>1</td><td ng-bind=worker.payment.wx.refund>1</td><td ng-bind=worker.payment.wx.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.alipay.field>1</td><td ng-bind=worker.payment.alipay.charge>1</td><td ng-bind=worker.payment.alipay.ticket>1</td><td ng-bind=worker.payment.alipay.product>1</td><td ng-bind=worker.payment.alipay.memberService>1</td><td ng-bind=worker.payment.alipay.cardFee>1</td><td ng-bind=worker.payment.alipay.bail>1</td><td ng-bind=worker.payment.alipay.refund>1</td><td ng-bind=worker.payment.alipay.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.subtotal style=color:#20a0ff>1</td><td style="color: #20a0ff;cursor: pointer" ng-click="csdFinanceCashallCtrl.initCondition(worker._worker==\'all\'?undefined:worker.workerName)">详情</td></tr><tr class=trHover><td colspan=2>制表人：</td><td colspan=3></td><td colspan=2>复核人：</td><td colspan=3></td><td colspan=2>审核人：</td><td colspan=42></td></tr></table></div><div style="margin-top: 20px" ng-show=csdFinanceCashallCtrl.baoyugang><div class="button2_normal float_right" style="margin:0 20px" ng-click="csdFinanceCashallCtrl.export(\'alltable2\')">导出</div></div><div class=finance style="width:100%;overflow-x: auto;margin-top: 20px;margin-bottom: 50px" ng-show=csdFinanceCashallCtrl.baoyugang><table id=alltable2 style=width:100%><tr><td colspan=10><span>柜员收入汇总表：</span> <span ng-bind="\'包玉刚游泳馆\'+\'-\'+csdFinanceCashallCtrl.workerName"></span></td></tr><tr><td colspan=10><span>时间范围：</span> <span ng-bind=csdFinanceCashallCtrl.dateName></span></td></tr><tr><td>项目</td><td>数量</td><td>单价</td><td>微信</td><td>支付宝</td><td>现金</td><td>转账</td><td>支票</td><td>POS机</td><td style=color:#20a0ff>合计</td></tr><!-- <tr class="trHover">\n                                    <td>场地收入</td>\n                                    <td>暂无</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.field.wx">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.field.alipay">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.field.cash">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.field.card">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.field.check">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.field.pos">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.field.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><tr class=trHover ng-repeat="ticket in csdFinanceCashallCtrl.resultType.statuses.ticketArr"><td ng-bind=ticket.signName></td><td ng-bind=ticket.quantity></td><td ng-bind=ticket.price></td><td ng-bind=ticket.wx>1</td><td ng-bind=ticket.alipay>1</td><td ng-bind=ticket.cash>1</td><td ng-bind=ticket.card>1</td><td ng-bind=ticket.check>1</td><td ng-bind=ticket.pos>1</td><td ng-bind=ticket.subtotal style=color:#20a0ff>1</td></tr><!-- <tr class="trHover">\n                                    <td>柜台充值</td>\n                                    <td>暂无</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.charge.wx">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.charge.alipay">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.charge.cash">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.charge.card">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.charge.check">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.charge.pos">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.charge.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><!-- <tr class="trHover">\n                                    <td>专用账户充值</td>\n                                    <td>暂无</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.chargeSpe.wx">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.chargeSpe.alipay">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.chargeSpe.cash">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.chargeSpe.card">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.chargeSpe.check">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.chargeSpe.pos">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.chargeSpe.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><!-- <tr class="trHover">\n                                    <td>线上充值</td>\n                                    <td>暂无</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.charge_online.wx">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.charge_online.alipay">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.charge_online.cash">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.charge_online.card">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.charge_online.check">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.charge_online.pos">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.charge_online.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><!-- <tr class="trHover" ng-repeat="product in csdFinanceCashallCtrl.resultType.statuses.productArr">\n                                    <td ng-bind="product.signName"></td>\n                                    <td ng-bind="product.quantity"></td>\n                                    <td ng-bind="product.wx">1</td>\n                                    <td ng-bind="product.alipay">1</td>\n                                    <td ng-bind="product.cash">1</td>\n                                    <td ng-bind="product.card">1</td>\n                                    <td ng-bind="product.check">1</td>\n                                    <td ng-bind="product.pos">1</td>\n                                    <td ng-bind="product.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><!-- <tr class="trHover" ng-repeat="shopProduct in csdFinanceCashallCtrl.resultType.statuses.shopProductArr">\n                                    <td ng-bind="shopProduct.signName"></td>\n                                    <td ng-bind="shopProduct.quantity"></td>\n                                    <td ng-bind="shopProduct.wx">1</td>\n                                    <td ng-bind="shopProduct.alipay">1</td>\n                                    <td ng-bind="shopProduct.cash">1</td>\n                                    <td ng-bind="shopProduct.card">1</td>\n                                    <td ng-bind="shopProduct.check">1</td>\n                                    <td ng-bind="shopProduct.pos">1</td>\n                                    <td ng-bind="shopProduct.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><tr class=trHover ng-repeat="memberService in csdFinanceCashallCtrl.resultType.statuses.memberServiceArr"><td ng-bind=memberService.signName></td><td ng-bind=memberService.quantity></td><td ng-bind=memberService.price></td><td ng-bind=memberService.wx>1</td><td ng-bind=memberService.alipay>1</td><td ng-bind=memberService.cash>1</td><td ng-bind=memberService.card>1</td><td ng-bind=memberService.check>1</td><td ng-bind=memberService.pos>1</td><td ng-bind=memberService.subtotal style=color:#20a0ff>1</td></tr><tr class=trHover><td>卡工本费</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.cardFee.quantity>0</td><td>20</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.cardFee.wx>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.cardFee.alipay>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.cardFee.cash>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.cardFee.card>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.cardFee.check>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.cardFee.pos>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.cardFee.subtotal style=color:#20a0ff>1</td></tr><tr class=trHover><td>办卡押金</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.bail.quantity>0</td><td>20</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.bail.wx>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.bail.alipay>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.bail.cash>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.bail.card>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.bail.check>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.bail.pos>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.bail.subtotal style=color:#20a0ff>1</td></tr><tr class=trHover><td>退卡押金</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.refundBail.quantity>0</td><td>20</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.refundBail.wx>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.refundBail.alipay>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.refundBail.cash>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.refundBail.card>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.refundBail.check>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.refundBail.pos>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.refundBail.subtotal style=color:#20a0ff>1</td></tr><tr class=trHover><td>退卡押金</td><td>0</td><td>0</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.refundBail.wx>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.refundBail.alipay>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.refundBail.cash>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.refundBail.card>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.refundBail.check>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.refundBail.pos>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.statuses.refundBail.subtotal style=color:#20a0ff>1</td></tr><!-- <tr class="trHover">\n                                    <td>退款</td>\n                                    <td>暂无</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.refund.wx">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.refund.alipay">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.refund.cash">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.refund.card">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.refund.check">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.refund.pos">1</td>\n                                    <td ng-bind="csdFinanceCashallCtrl.resultType.statuses.refund.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><tr class=trHover><td>合计</td><td>0</td><td>0</td><td ng-bind=csdFinanceCashallCtrl.resultType.wxTotal style=color:#20a0ff>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.alipayTotal style=color:#20a0ff>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.cashTotal style=color:#20a0ff>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.cardTotal style=color:#20a0ff>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.checkTotal style=color:#20a0ff>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.posTotal style=color:#20a0ff>1</td><td ng-bind=csdFinanceCashallCtrl.resultType.subtotal style=color:#20a0ff>1</td></tr></table></div></div></div></div></div></div></div><style>table{\n        border:1px solid #000;\n        text-align: center;\n        margin-top: 20px;\n    }\n    tr{\n        border:1px solid #000;\n    }\n    td{\n        border:1px solid #000;\n        padding:5px; \n    }</style><!-- 纠错操作 --><div class=bgGary ng-show=csdFinanceCashallCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=csdFinanceCashallCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{csdFinanceCashallCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="csdFinanceCashallCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{csdFinanceCashallCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="csdFinanceCashallCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=csdFinanceCashallCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=csdFinanceCashallCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=csdFinanceCashallCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=csdFinanceCashallCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 预览详情 --><div class=bgGary ng-show=csdFinanceCashallCtrl.showDetail><div class=middle><div id=box class="form_div center" style="width: 110rem;height: 650px;overflow-y: auto;padding: 20px;padding-bottom: 50px;border-radius: 10px;box-shadow: #ccc 0 0 3px 3px"><div><div class="form_title float_left">详情</div><img src=assets/images/close.png class="float_right pointer" ng-click=csdFinanceCashallCtrl.close()></div><div class=clear></div><div class=cancelTable><div class="cancelThTr height_40"><div class="cancelTh width_13 ellipsis" style="text-indent: 20px">订单时间</div><div class="cancelTh width_10 ellipsis">用户名</div><div class="cancelTh width_8 ellipsis">金额</div><div class="cancelTh width_38 ellipsis">详情</div><div class="cancelTh width_15 ellipsis">提交人</div><div class="cancelTh width_13" style="position: relative"><div class=ellipsis style="float:left;max-width: 90px" ng-bind=csdFinanceCashallCtrl.showPaymentName>支付方式</div><div class=downBtn ng-click="csdFinanceCashallCtrl.showChoosePaymentBox=!csdFinanceCashallCtrl.showChoosePaymentBox"></div><div class="form_select_div finance_selectBox" ng-show=csdFinanceCashallCtrl.showChoosePaymentBox><div class="select_cell pointer ellipsis" ng-repeat="payment in csdFinanceCashallCtrl.paymentArr" ng-bind=payment.name ng-click=csdFinanceCashallCtrl.choosePaymentName(payment)>默认按钮</div></div></div><div class="cancelTh width_8 ellipsis">操作</div></div><div class=cancelTr ng-repeat="record in csdFinanceCashallCtrl.recordsDetail" style="{{record.state?\'background: #f2f2f2\':\'\'}}"><div class="cancelTd width_13 ellipsis" ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm:ss\'" style="text-indent: 20px"></div><div class="cancelTd width_10 ellipsis" ng-bind=record.name></div><div class="cancelTd width_8 ellipsis" ng-bind="record.cost | currency:\'\'"></div><div class="cancelTd width_38 ellipsis" ng-bind="record.description+\' \'+(record.remark?\'(\'+record.remark+\')\':\'\')" title="{{record.description+\' \'+(record.remark?\'(\'+record.remark+\')\':\'\')}}"></div><div class="cancelTd width_15 ellipsis" ng-bind="record.workerName==\'微信\'?\'微信用户\':record.workerName"></div><div class="cancelTd width_13 ellipsis" ng-bind=record.payment></div><div class="cancelTd width_8 ellipsis" ng-hide=record.state><span style="cursor: pointer;color: #8492a6" ng-click=csdFinanceCashallCtrl.openErrChangeBox(record._id)>纠错</span></div><div class="cancelTd width_8 ellipsis" ng-show=record.state>纠错单</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="csdFinanceCashallCtrl.pagination.numPages > 1" total-items=csdFinanceCashallCtrl.pagination.totalItems ng-model=csdFinanceCashallCtrl.pagination.page items-per-page=csdFinanceCashallCtrl.pagination.itemsPerPage max-size=csdFinanceCashallCtrl.pagination.maxSize boundary-links="{{csdFinanceCashallCtrl.pagination.numPages > 2}}" rotate=false num-pages=csdFinanceCashallCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=csdFinanceCashallCtrl.pageChanged()></pagination></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=csdFinanceCashallCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=csdFinanceCashallCtrl.wordOK>22212</div><div class=promptClose ng-click=csdFinanceCashallCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=csdFinanceCashallCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=csdFinanceCashallCtrl.wordERR>22212</div><div class=promptClose ng-click=csdFinanceCashallCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=csdFinanceCashallCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=csdFinanceCashallCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/checkstand/finance/field/finance-field.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/csdanization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-finance-cashall>营业收入</div><div class="field_titleNormal field_titleChoose">场地/综合服务收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-finance-shop>小卖部收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-finance-preppay>押金列表</div></div><div class=field_bookBoxPostition><div><div><div class=field_selectBoxOne style="height: auto"><div><div><div class=field_selectName style="text-indent: 0;width: 80px">选择日期</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="csdFinanceFieldCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="csdFinanceFieldCtrl.showChooseStartDateBox=!csdFinanceFieldCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=csdFinanceFieldCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=csdFinanceFieldCtrl.closeChooseStartDateBox() ng-date=csdFinanceFieldCtrl.startDate></datetimepick></div></div><div class=float_left style="height: 40px;line-height: 40px;padding: 0 10px">至</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="csdFinanceFieldCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="csdFinanceFieldCtrl.showChooseEndDateBox=!csdFinanceFieldCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=csdFinanceFieldCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=csdFinanceFieldCtrl.closeChooseEndDateBox() ng-date=csdFinanceFieldCtrl.endDate></datetimepick></div></div><div ng-show="csdFinanceFieldCtrl.searchVenueIdArr.length>0"><div class="button2_normal float_right pointer" style="margin:0 20px" ng-click=csdFinanceFieldCtrl.export()>导出</div></div><div style=clear:both></div></div><div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择场馆</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="venue in csdFinanceFieldCtrl.venues" ng-click="(venue.image==\'manyChoose_imageG\')?\'\':csdFinanceFieldCtrl.chooseVenueName(venue)"><div class="singleChoose_imageBox {{venue.image}} {{venue.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=venue.name style="{{venue.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择项目</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="item in csdFinanceFieldCtrl.items" ng-click="(item.image==\'manyChoose_imageG\')?\'\':csdFinanceFieldCtrl.chooseItemName(item)"><div class="singleChoose_imageBox {{item.image}} {{item.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=item.name style="{{item.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div style=clear:both></div></div></div></div></div><table id=alltable style="width: 106rem"><tr><td colspan=8><span>消费汇总表：</span> <span ng-bind=csdFinanceFieldCtrl.venueName></span></td></tr><tr><td colspan=8><span>时间范围：</span> <span ng-bind=csdFinanceFieldCtrl.dateName></span></td></tr><tr><td>项目/综合服务名称</td><td>资金收入（含现金、微信、支付宝、转账、支票、POS机）</td><td>余额支付</td><td>虚拟卡支付</td><td>专用账户支付</td><td>退款</td><td style="color: #20a0ff">合计</td><td>详情</td></tr><tr class=trHover ng-repeat="ip in csdFinanceFieldCtrl.itemAndProduct"><td ng-bind=ip.ipName></td><td ng-bind=ip.payment.cashAll></td><td ng-bind=ip.payment.member></td><td ng-bind=ip.payment.member_vir></td><td ng-bind=ip.payment.member_spe></td><td ng-bind=ip.payment.refund></td><td ng-bind=ip.payment.subtotal style="color: #20a0ff"></td><td style="color: #20a0ff;cursor: pointer" ng-click=csdFinanceFieldCtrl.initCondition(ip)>详情</td></tr><!-- <tr><td colspan="8" style="text-align: center;font-weight: bold;">一级分类</td></tr> --><tr class=trHover ng-repeat="first in csdFinanceFieldCtrl.firstcategory"><td ng-bind=first.ipName></td><td ng-bind=first.payment.cashAll></td><td ng-bind=first.payment.member></td><td ng-bind=first.payment.member_vir></td><td ng-bind=first.payment.member_spe></td><td ng-bind=first.payment.refund></td><td ng-bind=first.payment.subtotal style="color: #20a0ff"></td><td style="color: #20a0ff;cursor: pointer" ng-click=csdFinanceFieldCtrl.initCondition(first)>详情</td></tr><tr class=trHover><td ng-bind=csdFinanceFieldCtrl.all.ipName></td><td ng-bind=csdFinanceFieldCtrl.all.payment.cashAll></td><td ng-bind=csdFinanceFieldCtrl.all.payment.member></td><td ng-bind=csdFinanceFieldCtrl.all.payment.member_vir></td><td ng-bind=csdFinanceFieldCtrl.all.payment.member_spe></td><td ng-bind=csdFinanceFieldCtrl.all.payment.refund></td><td ng-bind=csdFinanceFieldCtrl.all.payment.subtotal style="color: #20a0ff"></td><td style="color: #20a0ff;cursor: pointer" ng-click=csdFinanceFieldCtrl.initCondition(csdFinanceFieldCtrl.all)>详情</td></tr><tr class=trHover><td colspan=1>制表人：</td><td colspan=1></td><td colspan=1>复核人：</td><td colspan=1></td><td colspan=1>审核人：</td><td colspan=3></td></tr></table></div></div></div></div></div></div><style>table{\n        border:1px solid #000;\n        text-align: center;\n        margin-top: 20px;\n    }\n    tr{\n        border:1px solid #000;\n    }\n    td{\n        border:1px solid #000;\n        padding:5px; \n    }</style><!-- 纠错操作 --><div class=bgGary ng-show=csdFinanceFieldCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=csdFinanceFieldCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{csdFinanceFieldCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="csdFinanceFieldCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{csdFinanceFieldCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="csdFinanceFieldCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=csdFinanceFieldCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=csdFinanceFieldCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=csdFinanceFieldCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=csdFinanceFieldCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 预览详情 --><div class=bgGary ng-show=csdFinanceFieldCtrl.showDetail><div class=middle><div id=box class="form_div center" style="width: 110rem;height: 700px;overflow-y: auto;padding: 20px;padding-bottom: 50px;border-radius: 10px;box-shadow: #ccc 0 0 3px 3px"><div><div class="form_title float_left">详情</div><img src=assets/images/close.png class="float_right pointer" ng-click=csdFinanceFieldCtrl.close()><div class=clear></div></div><div><div style="height: 36px;line-height: 34px;margin-top: 20px;float: left" ng-hide="csdFinanceFieldCtrl.searchStatus==\'other\'"><div class="fbonce_t_Title fbonce_t_once bgcolorB" ng-click="csdFinanceFieldCtrl.changeStatus(\'field\')">场地消费</div><div class="fbonce_t_Title fbonce_t_long" ng-click="csdFinanceFieldCtrl.changeStatus(\'other\')">其他消费</div><div class=clear></div></div><div style="height: 36px;line-height: 34px;margin-top: 20px;float: left" ng-show="csdFinanceFieldCtrl.searchStatus==\'other\'"><div class="fbonce_t_Title fbonce_t_once" ng-click="csdFinanceFieldCtrl.changeStatus(\'field\')">场地消费</div><div class="fbonce_t_Title fbonce_t_long bgcolorB" ng-click="csdFinanceFieldCtrl.changeStatus(\'other\')">其他消费</div><div class=clear></div></div><div style="float: left;margin-top: 20px;margin-left: 20px;background: #fff" ng-show="csdFinanceFieldCtrl.searchStatus==\'other\'"><div style="float: left" id=search class="xt_searchBox float_left"><input class=xt_searchInput style="text-indent: 10px" placeholder=请输入备注 ng-model=csdFinanceFieldCtrl.searchRecordRemark><div class=xt_searchImage ng-click=csdFinanceFieldCtrl.searchDetail()></div></div><div class=clear></div></div><div style="float: left;margin-top: 20px;margin-left: 20px;background: #fff" ng-show="csdFinanceFieldCtrl.searchStatus==\'other\'"><div style="float: left" id=search class="xt_searchBox float_left"><input class=xt_searchInput style="text-indent: 10px" placeholder=请输入联系人 ng-model=csdFinanceFieldCtrl.searchProductContacts><div class=xt_searchImage ng-click=csdFinanceFieldCtrl.searchDetail()></div></div><div class=clear></div></div><div class="select field_select" style="margin-top: 20px;margin-left: 20px" ng-show="csdFinanceFieldCtrl.searchStatus==\'other\'"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdFinanceFieldCtrl.searchSecond==\'选择二级分类\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdFinanceFieldCtrl.searchSecond ng-click="csdFinanceFieldCtrl.openShowSearchSecond=!csdFinanceFieldCtrl.openShowSearchSecond">场馆1</div></div><div class=form_select_div style="position:relative;z-index: 100" ng-show=csdFinanceFieldCtrl.openShowSearchSecond><div class="select_cell pointer ellipsis" ng-repeat="second in csdFinanceFieldCtrl.secondCategories" ng-bind=second.name ng-click=csdFinanceFieldCtrl.chooseSecond(second)>默认按钮</div></div></div><div class="select field_select" style="margin-top: 20px;margin-left: 20px" ng-show="csdFinanceFieldCtrl.searchStatus==\'other\'"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdFinanceFieldCtrl.searchProduct==\'选择综合服务\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdFinanceFieldCtrl.searchProduct ng-click="csdFinanceFieldCtrl.openShowSearchProduct=!csdFinanceFieldCtrl.openShowSearchProduct">场馆1</div></div><div class=form_select_div style="position:relative;z-index: 100" ng-show=csdFinanceFieldCtrl.openShowSearchProduct><div class="select_cell pointer ellipsis" ng-repeat="product in csdFinanceFieldCtrl.products" ng-bind=product.name title={{product.name}} ng-click=csdFinanceFieldCtrl.chooseProduct(product)>默认按钮</div></div></div><div style="margin-top: 20px"><div class="button2_normal float_right pointer" style="margin:0 20px" ng-click=csdFinanceFieldCtrl.exportDetail()>导出</div></div><div class=clear></div></div><div class=cancelTable><div class="cancelThTr height_40"><div class="cancelTh width_13 ellipsis" style="text-indent: 20px">订单时间</div><div class="cancelTh width_10 ellipsis">用户名</div><div class="cancelTh width_8 ellipsis">金额</div><div class="cancelTh width_38 ellipsis">详情</div><div class="cancelTh width_15 ellipsis">提交人</div><div class="cancelTh width_13" style="position: relative"><div class=ellipsis style="float:left;max-width: 90px" ng-bind=csdFinanceFieldCtrl.showPaymentName>支付方式</div><div class=downBtn ng-click="csdFinanceFieldCtrl.showChoosePaymentBox=!csdFinanceFieldCtrl.showChoosePaymentBox"></div><div class="form_select_div finance_selectBox" ng-show=csdFinanceFieldCtrl.showChoosePaymentBox><div class="select_cell pointer ellipsis" ng-repeat="payment in csdFinanceFieldCtrl.paymentArr" ng-bind=payment.name ng-click=csdFinanceFieldCtrl.choosePaymentName(payment)>默认按钮</div></div></div><div class="cancelTh width_8 ellipsis">操作</div></div><div class=cancelTr ng-repeat="record in csdFinanceFieldCtrl.recordsDetail" style="{{record.state?\'background: #f2f2f2\':\'\'}}"><div class="cancelTd width_13 ellipsis" ng-bind="record.checkDate?record.checkDate:record.createDate | date:\'yyyy-MM-dd HH:mm:ss\'" style="text-indent: 20px"></div><div class="cancelTd width_10 ellipsis" ng-bind=record.name></div><div class="cancelTd width_8 ellipsis" ng-bind="record.cost | currency:\'\'"></div><div class="cancelTd width_38 ellipsis" ng-bind="record.description+\' \'+(record.remark?\'(备注：\'+record.remark+\')\':\'\')+(record.productContacts?\'(附加联系人：\'+record.productContacts+\')\':\'\')" title="{{record.description+\' \'+(record.remark?\'(备注：\'+record.remark+\')\':\'\')+(record.productContacts?\'(附加联系人：\'+record.productContacts+\')\':\'\')}}"></div><div class="cancelTd width_15 ellipsis" ng-bind="record.workerName==\'微信\'?\'微信用户\':record.workerName"></div><div class="cancelTd width_13 ellipsis" ng-bind=record.payment></div><div class="cancelTd width_8 ellipsis" ng-hide=record.state><span style="cursor: pointer;color: #8492a6" ng-click=csdFinanceFieldCtrl.openErrChangeBox(record._id)>纠错</span></div><div class="cancelTd width_8 ellipsis" ng-show=record.state>纠错单</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="csdFinanceFieldCtrl.pagination.numPages > 1" total-items=csdFinanceFieldCtrl.pagination.totalItems ng-model=csdFinanceFieldCtrl.pagination.page items-per-page=csdFinanceFieldCtrl.pagination.itemsPerPage max-size=csdFinanceFieldCtrl.pagination.maxSize boundary-links="{{csdFinanceFieldCtrl.pagination.numPages > 2}}" rotate=false num-pages=csdFinanceFieldCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=csdFinanceFieldCtrl.pageChanged()></pagination><div class=float_right style="margin-top: 20px;font-size: 16px"><span>总金额：</span> <span style="color: #ff4949" ng-bind="\'￥\'+csdFinanceFieldCtrl.cost">100</span></div></div></div></div><div style="width: 0;height: 0;overflow: hidden"><table id=alltable2><tr><td>订单时间</td><td>用户名</td><td>金额</td><td>详情</td><td>提交人</td><td>支付方式</td></tr><tr ng-repeat="record in csdFinanceFieldCtrl.exportRecordsDetail"><td ng-bind="record.checkDate?record.checkDate:record.createDate | date:\'yyyy-MM-dd HH:mm:ss\'"></td><td ng-bind=record.name></td><td ng-bind="record.cost | currency:\'\'"></td><td ng-bind="record.description+\' \'+(record.remark?\'(备注：\'+record.remark+\')\':\'\')+(record.productContacts?\'(附加联系人：\'+record.productContacts+\')\':\'\')"></td><td ng-bind="record.workerName==\'微信\'?\'微信用户\':record.workerName"></td><td ng-bind=record.payment></td></tr></table></div><!-- 成功提示 --><div class=bgGary ng-show=csdFinanceFieldCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=csdFinanceFieldCtrl.wordOK>22212</div><div class=promptClose ng-click=csdFinanceFieldCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=csdFinanceFieldCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=csdFinanceFieldCtrl.wordERR>22212</div><div class=promptClose ng-click=csdFinanceFieldCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=csdFinanceFieldCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=csdFinanceFieldCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'),
            a.put("app/checkstand/finance/preppay/preppay-view.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div class=field_bookBox><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-finance-cashall>营业收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-finance-field>场地/综合服务收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-finance-shop>小卖部收入</div><div class="field_titleNormal field_titleChoose">押金列表</div></div><div class=field_bookBoxPostition><div class=field_selectBoxOne style="height: auto"><div><div><div class=field_selectName style="text-indent: 0;width: 80px">选择日期</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="csdFinancePreppayCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="csdFinancePreppayCtrl.showChooseStartDateBox=!csdFinancePreppayCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=csdFinancePreppayCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=csdFinancePreppayCtrl.closeChooseBox() ng-date=csdFinancePreppayCtrl.startDate></datetimepick></div></div><div class=float_left style="height: 40px;line-height: 40px;padding: 0 10px">至</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="csdFinancePreppayCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="csdFinancePreppayCtrl.showChooseEndDateBox=!csdFinancePreppayCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=csdFinancePreppayCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=csdFinancePreppayCtrl.closeChooseBox() ng-date=csdFinancePreppayCtrl.endDate></datetimepick></div></div><div style=clear:both></div></div></div></div><div class=cancelTable style="margin-top: 20px"><div class="cancelThTr height_40"><div class="cancelTh width_25 ellipsis" style="text-indent: 20px">单号</div><div class="cancelTh width_25 ellipsis">金额</div><div class="cancelTh width_25 ellipsis">提交人</div><div class="cancelTh width_25 ellipsis">日期</div></div><div class=cancelTr ng-repeat="record in csdFinancePreppayCtrl.records"><div class="cancelTd width_25 ellipsis" style="text-indent: 20px" ng-bind=record._id></div><div class="cancelTd width_25 ellipsis" ng-bind="(record.status==\'prepPay\'?\'+\':\'-\')+record.cost"></div><div class="cancelTd width_25 ellipsis" ng-bind=record.workerName></div><div class="cancelTd width_25 ellipsis" ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm\'"></div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="csdFinancePreppayCtrl.pagination.numPages > 1" total-items=csdFinancePreppayCtrl.pagination.totalItems ng-model=csdFinancePreppayCtrl.pagination.page items-per-page=csdFinancePreppayCtrl.pagination.itemsPerPage max-size=csdFinancePreppayCtrl.pagination.maxSize boundary-links="{{csdFinancePreppayCtrl.pagination.numPages > 2}}" rotate=false num-pages=csdFinancePreppayCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=csdFinancePreppayCtrl.pageChanged()></pagination><div class=float_right style="margin-top: 20px;font-size: 16px"><span>收入现金押金:</span> <span style="color: #ff4949" ng-bind="\'￥\'+csdFinancePreppayCtrl.inCost"></span> <span style="margin-left: 20px">退出现金押金:</span> <span style="color: #ff4949" ng-bind="\'￥\'+csdFinancePreppayCtrl.outCost"></span> <span style="margin-left: 20px">合计:</span> <span style="color: #ff4949" ng-bind="\'￥\'+csdFinancePreppayCtrl.cost">100</span></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=csdFinancePreppayCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=csdFinancePreppayCtrl.wordOK>22212</div><div class=promptClose ng-click=csdFinancePreppayCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=csdFinancePreppayCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=csdFinancePreppayCtrl.wordERR>22212</div><div class=promptClose ng-click=csdFinancePreppayCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=csdFinancePreppayCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=csdFinancePreppayCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/checkstand/finance/shop/finance-shop.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-finance-cashall>营业收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-finance-field>场地/综合服务收入</div><div class="field_titleNormal field_titleChoose">小卖部收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-finance-preppay>押金列表</div></div><div class=field_bookBoxPostition><div><div><div class=field_selectBoxOne style="height: auto"><div><div><div class=field_selectName style="text-indent: 0;width: 80px">选择日期</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="csdFinanceShopCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="csdFinanceShopCtrl.showChooseStartDateBox=!csdFinanceShopCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=csdFinanceShopCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=csdFinanceShopCtrl.closeChooseStartDateBox() ng-date=csdFinanceShopCtrl.startDate></datetimepick></div></div><div class=float_left style="height: 40px;line-height: 40px;padding: 0 10px">至</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="csdFinanceShopCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="csdFinanceShopCtrl.showChooseEndDateBox=!csdFinanceShopCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=csdFinanceShopCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=csdFinanceShopCtrl.closeChooseEndDateBox() ng-date=csdFinanceShopCtrl.endDate></datetimepick></div></div><div ng-show="csdFinanceShopCtrl.searchVenueIdArr.length>0"><div class="button2_normal float_right pointer" style="margin:0 20px" ng-click=csdFinanceShopCtrl.export()>导出</div></div><div style=clear:both></div></div><div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择场馆</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="venue in csdFinanceShopCtrl.venues" ng-click="(venue.image==\'manyChoose_imageG\')?\'\':csdFinanceShopCtrl.chooseVenueName(venue)"><div class="singleChoose_imageBox {{venue.image}} {{venue.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=venue.name style="{{venue.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择提交人</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="worker in csdFinanceShopCtrl.workers" ng-click="(worker.image==\'manyChoose_imageG\')?\'\':csdFinanceShopCtrl.chooseWorkerName(worker)"><div class="singleChoose_imageBox {{worker.image}} {{worker.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=worker.name style="{{worker.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div style=clear:both></div></div></div></div></div><table id=alltable style="width: 106rem"><tr><td colspan=11><span>小卖部消费汇总表：</span> <span ng-bind=csdFinanceShopCtrl.venueName></span></td></tr><tr><td colspan=11><span>时间范围：</span> <span ng-bind=csdFinanceShopCtrl.dateName></span></td></tr><tr><td>柜员名</td><td>现金支付</td><td>微信支付</td><td>支付宝支付</td><td>转账支付</td><td>支票支付</td><td>POS机支付</td><td>余额支付</td><td>退款</td><td style="color: #20a0ff">合计</td><td>详情</td></tr><tr class=trHover ng-repeat="worker in csdFinanceShopCtrl.records"><td ng-bind=worker.workerName></td><td ng-bind=worker.payment.cash></td><td ng-bind=worker.payment.wx></td><td ng-bind=worker.payment.alipay></td><td ng-bind=worker.payment.card></td><td ng-bind=worker.payment.check></td><td ng-bind=worker.payment.pos></td><td ng-bind=worker.payment.member></td><td ng-bind=worker.payment.refund></td><td ng-bind=worker.payment.subtotal style="color: #20a0ff"></td><td style="color: #20a0ff;cursor: pointer" ng-click=csdFinanceShopCtrl.initCondition(worker._worker,worker.workerName)>详情</td></tr><tr class=trHover><td colspan=1>制表人：</td><td colspan=1></td><td colspan=1>复核人：</td><td colspan=1></td><td colspan=1>审核人：</td><td colspan=6></td></tr></table></div></div></div></div></div></div><style>table{\n        border:1px solid #000;\n        text-align: center;\n        margin-top: 20px;\n    }\n    tr{\n        border:1px solid #000;\n    }\n    td{\n        border:1px solid #000;\n        padding:5px; \n    }</style><!-- 纠错操作 --><div class=bgGary ng-show=csdFinanceShopCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=csdFinanceShopCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{csdFinanceShopCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="csdFinanceShopCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{csdFinanceShopCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="csdFinanceShopCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=csdFinanceShopCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=csdFinanceShopCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=csdFinanceShopCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=csdFinanceShopCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 预览详情 --><div class=bgGary ng-show=csdFinanceShopCtrl.showDetail><div class=middle><div id=box class="form_div center" style="width: 63rem;max-height: 650px;overflow-y: auto;padding: 20px;padding-bottom: 50px;border-radius: 10px;box-shadow: #ccc 0 0 3px 3px"><div><div class="form_title float_left">小卖部消费明细表</div><img src=assets/images/close.png class="float_right pointer" ng-click=csdFinanceShopCtrl.close()></div><div class=clear></div><table id=table style="width: 60rem"><tr><td colspan=6><span ng-bind=csdFinanceShopCtrl.workerName></span> <span>的小卖部消费明细表：</span> <span ng-bind=csdFinanceShopCtrl.venueName></span></td></tr><tr><td colspan=6><span>时间范围：</span> <span ng-bind=csdFinanceShopCtrl.dateName></span></td></tr><tr><td colspan=2>商品名称</td><td colspan=1>余额支付</td><td colspan=1>非余额支付</td><td colspan=1>数量</td><td colspan=1>金额</td></tr><tr class=trHover ng-repeat="shop in csdFinanceShopCtrl.shopDetails"><td colspan=2 ng-bind=shop.name></td><td colspan=1 ng-bind=shop.member></td><td colspan=1 ng-bind=shop.noMember></td><td colspan=1 ng-bind=shop.quantity></td><td colspan=1 ng-bind=shop.subTotal></td></tr><tr class=trHover><td style="width: 10rem" colspan=1>制表人：</td><td style="width: 10rem" colspan=1 ng-bind=csdFinanceShopCtrl.workerName></td><td style="width: 10rem" colspan=1>复核人：</td><td style="width: 10rem" colspan=1></td><td style="width: 10rem" colspan=1>审核人：</td><td style="width: 10rem" colspan=1></td></tr></table><div><div class="button2_normal pointer" style="margin-top:20px;width: 80px" ng-click="csdFinanceShopCtrl.export(\'table\')">导出</div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=csdFinanceShopCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=csdFinanceShopCtrl.wordOK>22212</div><div class=promptClose ng-click=csdFinanceShopCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=csdFinanceShopCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=csdFinanceShopCtrl.wordERR>22212</div><div class=promptClose ng-click=csdFinanceShopCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=csdFinanceShopCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=csdFinanceShopCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/checkstand/member/member-detail-info.html", '<div style="min-width: 900px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div style=margin:20px><div class="float_left pointer" ui-sref=csd-member>会员管理</div><img class=float_left src=assets/images/gang.png style="height:16px;margin:-0px 5px"><div class=float_left style=color:#99a9bf ng-bind=csdMemberDetailCtrl.member.name></div><div class=clear></div></div><div class=field_titleBox><div class="field_titleNormal field_titleChoose">基本信息</div><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-member-detail.record>消费&充值记录</div><div class=clear></div></div><div style="margin-left: 20px"><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">会员姓名</div><input class="float_left width_355" style="border:1px solid #ddd;border-radius:4px;height:40px;margin-top:20px;padding:0 0 0 10px" ng-change=csdMemberDetailCtrl.judge() ng-model="csdMemberDetailCtrl.name"><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">手机号码</div><input class="float_left width_355" style="border:1px solid #ddd;border-radius:4px;height:40px;margin-top:20px;padding:0 0 0 10px" ng-change=csdMemberDetailCtrl.judge() ng-model="csdMemberDetailCtrl.tel"><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">身份证号</div><input class="float_left width_355" style="border:1px solid #ddd;border-radius:4px;height:40px;margin-top:20px;padding:0 0 0 10px" ng-change=csdMemberDetailCtrl.judge() ng-model="csdMemberDetailCtrl.idCard"><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">会员卡号</div><div class="float_left width_355" style="border:1px solid #ddd;border-radius:4px;height:40px;margin-top:20px;padding:12px 0 0 10px" ng-bind="csdMemberDetailCtrl.member.cardNo?csdMemberDetailCtrl.member.cardNo:\'暂无\'">小七</div><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">会员类型</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!csdMemberDetailCtrl.chooseTypeFlag,\'select_foucs\':csdMemberDetailCtrl.chooseTypeFlag}" style="margin:20px 0 0 0" ng-click="csdMemberDetailCtrl.chooseTypeFlag = !csdMemberDetailCtrl.chooseTypeFlag"><div class="form_down_icon form_width_354 form_select_value_choose" ng-bind=csdMemberDetailCtrl.typeName></div><div class="form_select_div form_width_354" ng-show=csdMemberDetailCtrl.chooseTypeFlag><div ng-click=csdMemberDetailCtrl.chooseType(type) class="select_cell pointer" ng-repeat="type in csdMemberDetailCtrl.types" ng-bind=type.name onclick="event.cancelBubble = true">默认按钮</div></div></div><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">现金账户</div><div class=float_left><div class=width_355 style="border:1px solid #ddd;border-radius:4px;padding:10px;margin-top:20px"><div><span>￥</span><span ng-bind="csdMemberDetailCtrl.member.cards.length>0?csdMemberDetailCtrl.member.cards[0].total:\'0\'">999</span></div></div></div><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">虚拟账户</div><div class=float_left><div class=width_355 style="border:1px solid #ddd;border-radius:4px;padding:10px;margin-top:20px;height:36px"><div class=float_left>￥</div><div class=float_left ng-bind=csdMemberDetailCtrl.member.virtualAccount.total>999</div><div class=float_right style=color:#999 ng-bind="csdMemberDetailCtrl.member.virtualAccount.expires_in?(csdMemberDetailCtrl.member.virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期\':\'无\'">999</div></div></div><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px" ng-show="csdMemberDetailCtrl.speAccount.length > 0">专用账户</div><div class=float_left ng-show="csdMemberDetailCtrl.speAccount.length > 0"><div ng-repeat="account in csdMemberDetailCtrl.speAccount"><div class=width_355 style="border:1px solid #ddd;border-radius:4px;padding:10px;margin-top:20px;height:36px"><div class=float_left>￥</div><div class=float_left ng-bind=account.total>999</div><div class=float_right style=color:#999 ng-bind=account.name>999</div></div><div class=clear></div></div></div><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px" ng-show="csdMemberDetailCtrl.memberServices.length > 0">会员卡包</div><div class=float_left ng-show="csdMemberDetailCtrl.memberServices.length > 0"><div ng-repeat="ms in csdMemberDetailCtrl.memberServices"><div class=width_355 style="border:1px solid #ddd;border-radius:4px;padding:10px;margin-top:20px;height:36px"><div class=float_left ng-show="ms.service.serviceType==\'time\'" ng-bind="ms.valueLeft+\'次\'"></div><div class=float_left ng-bind=ms.service.name></div><div class=float_left ng-show=ms.timeValue ng-bind="\'(有效期\'+ms.timeValue+\'天)\'"></div><div class="float_right pointer" style=color:#999 ng-click=csdMemberDetailCtrl.showDelay(ms)>延长时间</div></div><div class=clear></div></div></div><div class=clear></div><div class="button2_normal float_left" style="margin:20px 20px 0 120px" ng-show=csdMemberDetailCtrl.judgeFlag ng-click=csdMemberDetailCtrl.update()>保存</div><div class="button2_normal float_left" style="margin:20px 20px 0 120px;background:#ccc" ng-show=!csdMemberDetailCtrl.judgeFlag>保存</div><div class="button2_normal float_left" style="background:#ccc;margin:20px 20px 0 0px" ng-click="csdMemberDetailCtrl.refundFlag = true">退余额</div></div><div class=bgGary ng-show=csdMemberDetailCtrl.refundFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">退余额</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdMemberDetailCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入退款金额 ng-class="{\'\':!csdMemberDetailCtrl.priceFlag,\'form_value_error\':csdMemberDetailCtrl.priceFlag}" ng-model="csdMemberDetailCtrl.price"></div><div class=clear></div><div class=form_error_font ng-show=!csdMemberDetailCtrl.priceFlag></div><div class=form_error_font ng-show=csdMemberDetailCtrl.priceFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">输验证码</div><input class="form_value float_left form_value_width" placeholder=请输入验证码 ng-class="{\'\':!csdMemberDetailCtrl.smsFlag,\'form_value_error\':csdMemberDetailCtrl.smsFlag}" ng-model="csdMemberDetailCtrl.code"></div><div class=clear></div><div class=form_error_font ng-show=!csdMemberDetailCtrl.smsFlag></div><div class=form_error_font ng-show=csdMemberDetailCtrl.smsFlag>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdMemberDetailCtrl.refund()>确认退还</div><div class="button_normal float_right" ng-click="csdMemberDetailCtrl.sendToFlag = true">发送验证码</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=csdMemberDetailCtrl.sendToFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">选择场馆管理员</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdMemberDetailCtrl.sendToFlag = false"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">场馆管理</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!csdMemberDetailCtrl.chooseObjectFlag,\'select_foucs\':csdMemberDetailCtrl.chooseObjectFlag}" ng-click="csdMemberDetailCtrl.chooseObjectFlag = !csdMemberDetailCtrl.chooseObjectFlag"><div class="form_down_icon form_width_354 form_select_value_choose" style=width:345px ng-bind=csdMemberDetailCtrl.objectName></div><div class="form_select_div form_width_354" style=width:345px ng-show=csdMemberDetailCtrl.chooseObjectFlag><div ng-click=csdMemberDetailCtrl.chooseObject(object) class="select_cell pointer" ng-repeat="object in csdMemberDetailCtrl.users" ng-bind=object.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdMemberDetailCtrl.sendSms()>完成</div><div class="button_normal float_right" ng-click="csdMemberDetailCtrl.sendToFlag = false">取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=csdMemberDetailCtrl.toastFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/rectangle2.png"><div class="float_left form_marginL_15px">保存成功</div></div></div></div><div class=bgGary style=z-index:999 ng-show=csdMemberDetailCtrl.sendFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/rectangle2.png"><div class="float_left form_marginL_15px">发送成功</div></div></div></div><div class=bgGary ng-show=csdMemberDetailCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>退款成功</div><div class=promptClose ng-click="csdMemberDetailCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary style=z-index:999 ng-show=csdMemberDetailCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=csdMemberDetailCtrl.wordERR>22212</div><div class=promptClose ng-click="csdMemberDetailCtrl.promptERR = false"></div></div></div></div></div><style></style>'), a.put("app/checkstand/member/member-detail-record.html", '<div style="min-width: 900px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div style=margin:20px><div class="float_left pointer" ui-sref=csd-member>会员管理</div><img class=float_left src=assets/images/gang.png style="height:16px;margin:-0px 5px"><div class=float_left style=color:#00A1FF ng-bind=csdMemberDetailCtrl.member.name></div><div class=clear></div></div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-member-detail.info>基本信息</div><div class="field_titleNormal field_titleChoose">消费&充值记录</div><div class=clear></div></div><div style="margin:20px 30px 3px 30px"><table style="margin:20px 30px 0 0px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:14%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">支付日期</td><td style="width:14%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">支付方式</td><td style="width:30%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">明细</td><td style="width:14%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作人</td><td style="width:14%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">流水号</td><td style="width:14%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">金额</td></tr><tr ng-repeat="record in csdMemberDetailCtrl.records" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:14%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm\'"></td><td style="width:14%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record.pm></td><td style="width:30%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="record.description?record.description:\'暂无\'"></td><td style="width:14%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="record.workerName?record.workerName:\'自助机\'"></td><td style="width:14%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record._id></td><td style="width:14%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record.price></td></tr></table><pagination style="left:280px;margin:20px 0 0 0" ng-if="csdMemberDetailCtrl.pagination.numPages > 1" total-items=csdMemberDetailCtrl.pagination.totalItems ng-model=csdMemberDetailCtrl.pagination.page items-per-page=csdMemberDetailCtrl.pagination.itemsPerPage max-size=csdMemberDetailCtrl.pagination.maxSize boundary-links="{{csdMemberDetailCtrl.pagination.numPages > 2}}" rotate=false num-pages=csdMemberDetailCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=csdMemberDetailCtrl.pageChanged()></pagination></div></div>'), a.put("app/checkstand/member/member-detail.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div ui-view="" style="padding:0px 0rem 20px 200px"></div></div>'), a.put("app/checkstand/member/member-docord.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px;min-width: 1100px"><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-member>会员列表</div><div class="field_titleNormal field_titleChoose">重要操作记录</div><div class=clear></div><div class="form_value form_width_250" style="margin:20px 0 0 0"><input style=border:0;height:32px;width:200px placeholder=搜索会员(手机号/姓名/卡号) ng-model="csdDocordCtrl.mix"> <img src=assets/images/search.png class="student_search pointer" ng-click="csdDocordCtrl.getRecord()"></div><div style="margin:0 30px 0 0"><table style="margin:20px 30px 0 0px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作时间</td><td style="width:12%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">会员名称</td><td style="width:13%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">事件</td><td style="width:55%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">详情</td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作人</td></tr><tr ng-repeat="event in csdDocordCtrl.events" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="event.createDate | date:\'yyyy-MM-dd HH:mm\'"></td><td style="width:12%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=event.name?event.name:evnet.name_from></td><td style="width:13%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=event.status></td><td style="width:55%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=event.description></td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=event.workerName></td></tr></table><div class=clear></div><pagination style="left:280px;margin:20px 30px 3px 0px" ng-if="csdDocordCtrl.pagination.numPages > 1" total-items=csdDocordCtrl.pagination.totalItems ng-model=csdDocordCtrl.pagination.page items-per-page=csdDocordCtrl.pagination.itemsPerPage max-size=csdDocordCtrl.pagination.maxSize boundary-links="{{csdDocordCtrl.pagination.numPages > 2}}" rotate=false num-pages=csdDocordCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=csdDocordCtrl.pageChanged()></pagination></div></div></div></div>'), a.put("app/checkstand/member/member.html", '<div class=contentBox id=search><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px;min-width: 1100px"><div class=field_titleBox><div class="field_titleNormal field_titleChoose">会员列表</div><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-docord>重要操作记录</div><div class=clear></div><div class="form_value form_width_250 float_left" style="margin:20px 0 0 0"><input style=border:0;height:32px;width:200px placeholder=搜索会员(手机号/姓名/卡号) ng-model="csdMemberCtrl.searchName"> <img src=assets/images/search.png class="student_search pointer" ng-click="csdMemberCtrl.search()"></div><div class="button2_normal float_right" style="margin:20px 20px 0 0" ng-click=csdMemberCtrl.newAdd()>新增会员</div><div class=clear></div><div style="margin:20px 30px 0 0px"><table style="min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">姓名</td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">手机号</td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><span>会员等级</span> <img style=width:11px src="assets/images/bdown.png"><div ng-show=csdMemberCtrl.levelFlag class=pointer style="position:absolute;border:1px solid #ddd;background:#fff;width:150px;top:15px"><div class=select_choose style=height:28px;line-height:28px ng-click="csdMemberCtrl.levelDes = \'\';csdMemberCtrl.getMember()">全部</div><div class=select_choose style=height:28px;line-height:28px ng-click="csdMemberCtrl.levelDes = \'黄金会员\';csdMemberCtrl.getMember()">黄金会员</div><div class=select_choose style=height:28px;line-height:28px ng-click="csdMemberCtrl.levelDes = \'白银会员\';csdMemberCtrl.getMember()">白银会员</div><div class=select_choose style=height:28px;line-height:28px ng-click="csdMemberCtrl.levelDes = \'普通会员\';csdMemberCtrl.getMember()">普通会员</div><div class=select_choose style=height:28px;line-height:28px ng-click="csdMemberCtrl.levelDes = \'非实名会员\';csdMemberCtrl.getMember()">非实名会员</div></div></td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">注册日期</td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">卡号/会员号</td><td style="width:5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div class=ellipsis style=height:44px>现金账户</div></td><td style="width:5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div class=ellipsis style=height:44px>虚拟账户</div></td><td style="width:5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div class=ellipsis style=height:44px>包玉刚账户</div></td><td style="width:18%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr class=pointer ng-repeat="member in csdMemberCtrl.members" ui-sref=csd-member-detail.info({id:member._id,searchName:csdMemberCtrl.searchName}) style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><span title={{member.name}} ng-bind=member.name>合并过</span> <span ng-show=member.mergeDate style="border:1px solid #FFD1D1;background::#FFECEC;border-radius:4px;color:#FF7B7B;padding:1px">合并过</span></td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><span ng-bind="member.tel?member.tel:\'暂无\'"></span> <span style=color:#FF6F6F;font-size:10px ng-bind="member.wx?\'\':\'未绑微信\'"></span></td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div ng-show="member.cards.length==0 || member.cards[0].levelDes==\'非实名会员\'"><div class=float_left style="background:#999;width:9px;height:9px;border-radius:50%;margin:15px 10px 0 0"></div><div class=float_left style=color:#999>非实名会员</div></div><div ng-show="member.cards[0].levelDes==\'白银会员\'"><div class=float_left style="background:#A2AECF;width:9px;height:9px;border-radius:50%;margin:15px 10px 0 0"></div><div class=float_left style=color:#A2AECF>白银会员</div></div><div ng-show="member.cards[0].levelDes==\'黄金会员\'"><div class=float_left style="background:#F9CA2F;width:9px;height:9px;border-radius:50%;margin:15px 10px 0 0"></div><div class=float_left style=color:#F9CA2F>黄金会员</div></div><div ng-show="member.cards[0].levelDes==\'普通会员\'"><div class=float_left style="background:#000;width:9px;height:9px;border-radius:50%;margin:15px 10px 0 0"></div><div class=float_left style=color:#000>普通会员</div></div><span ng-show=member.realWorkerName style=color:#999 ng-bind="\'(\'+member.realWorkerName+\')\'"></span> <span ng-show="member.type&&member.type!=\'会员卡\'" ng-bind=member.type style="border:1px solid #FFD1D1;background::#FFECEC;border-radius:4px;color:#FF7B7B;padding:1px;font-size:12px"></span></td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="(member.createDate?(member.createDate | date:\'yyyy-MM-dd\'):\'无\')+\'(\'+member.workerName+\')\'"></td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><span ng-show=member.cardNo ng-bind=member.cardNo></span> <span style=color:#999 ng-show=!member.cardNo>未办理</span> <span>/</span> <span ng-show=member.memberNo ng-bind=member.memberNo></span> <span style=color:#999 ng-show=!member.memberNo>未办理</span></td><td style="width:5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="(member.cards.length>0?member.cards[0].total:\'0\')"></td><td style="width:5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="!member.virFlag?member.virtualAccount.total:(member.virtualAccount.total==0?\'0\':member.virtualAccount.total+\'(已过期)\')"></td><td style="width:5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="(member.accFlag?member.accTot:\'0\')"></td><td style="width:18%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-show="member.cardNo && member.isReal && !member.isFreezed"><div onclick="event.cancelBubble = true" ng-click=csdMemberCtrl.chongzhi(member) class=float_left style=color:#00a1ff><span>充值</span> <span style=color:#fff>充值</span></div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click=csdMemberCtrl.banka(member) class=float_left>办卡</div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click=csdMemberCtrl.freeze(member) class=float_left>冻结</div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click="csdMemberCtrl.changeAccFlag = true;csdMemberCtrl.fromId = member._id" class=float_left>过户</div></td><td style="width:18%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-show="!member.cardNo && member.isReal && !member.isFreezed"><div onclick="event.cancelBubble = true" ng-click=csdMemberCtrl.chongzhi(member) class=float_left style=color:#00a1ff><span>充值</span> <span style=color:#fff>充值</span></div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click=csdMemberCtrl.banka(member) class=float_left>办卡</div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click=csdMemberCtrl.freeze(member) class=float_left>冻结</div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click="csdMemberCtrl.changeAccFlag = true;csdMemberCtrl.fromId = member._id" class=float_left>过户</div></td><td style="width:18%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-show="!member.isReal && !member.isFreezed"><div style=color:#00a1ff onclick="event.cancelBubble = true" ng-click=csdMemberCtrl.defind(member) class=float_left>实名认证</div><div onclick="event.cancelBubble = true" style="margin:0 0 0 20px" ng-click=csdMemberCtrl.chongzhi(member) class=float_left style=color:#00a1ff>充值</div><div ng-show=!member.cardNo style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click=csdMemberCtrl.banka(member) class=float_left>办卡</div><div ng-show=member.cardNo style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click=csdMemberCtrl.banka(member) class=float_left>补卡</div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click=csdMemberCtrl.freeze(member) class=float_left>冻结</div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click="csdMemberCtrl.changeAccFlag = true;csdMemberCtrl.fromId = member._id" class=float_left>过户</div></td><td style="width:18%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-show=member.isFreezed><div style=color:#00a1ff onclick="event.cancelBubble = true" ng-click=csdMemberCtrl.cfreeze(member) class=float_left>解除冻结</div></td></tr></table></div><pagination style="left:280px;margin:20px 30px 3px 0px" ng-if="csdMemberCtrl.pagination.numPages > 1" total-items=csdMemberCtrl.pagination.totalItems ng-model=csdMemberCtrl.pagination.page items-per-page=csdMemberCtrl.pagination.itemsPerPage max-size=csdMemberCtrl.pagination.maxSize boundary-links="{{csdMemberCtrl.pagination.numPages > 2}}" rotate=false num-pages=csdMemberCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=csdMemberCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=csdMemberCtrl.changeAccFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">账户过户</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdMemberCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">过户给：</div><input class="form_value float_left form_value_width" ng-change="csdMemberCtrl.judge(\'tel\')" placeholder=请输入接收人手机号 ng-model="csdMemberCtrl.tel"></div><div class=clear></div><div class=form_error_font ng-show=!csdMemberCtrl.cardFlag></div><div class=form_error_font ng-show=csdMemberCtrl.cardFlag>此项为必填项</div><div ng-show=csdMemberCtrl.answerFlag class=form_first_view style=margin-top:0><div ng-show=csdMemberCtrl.jFlag class="form_key float_left form_key_margin"><span>接收人：</span> <span style=color:#00a1ff ng-bind=csdMemberCtrl.name></span></div><div ng-show=!csdMemberCtrl.jFlag style=color:red class="form_key float_left form_key_margin">系统中不存在该用户</div></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdMemberCtrl.move()>完成</div><div class="button_normal float_right" ng-click=csdMemberCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=csdMemberCtrl.payFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><img src=assets/images/back.png style="height:12px;margin:2px 10px 0 0" class="float_left pointer" ng-click="csdMemberCtrl.payFlag = false;csdMemberCtrl.addFlag = true"><div class="form_title float_left">发起支付</div><img src=assets/images/close.png class="float_right pointer" ng-click=csdMemberCtrl.close()></div><div class=clear></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">支付金额</div><div class="form_value float_left" style=border:none;color:#ff4949;margin-left:-10px;font-size:14px><span>￥</span> <span style=font-size:18px ng-bind=csdMemberCtrl.rp></span></div></div><div class=clear></div></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">支付方式</div><div style="width:350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in csdMemberCtrl.paymentArr" ng-click=csdMemberCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style=width:0;height:0;overflow:hidden ng-show="csdMemberCtrl.showCodeBox && !csdMemberCtrl.defindFlag"><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=csdMemberCtrl.auth_code ng-keypress=csdMemberCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div><div style=width:0;height:0;overflow:hidden ng-show="csdMemberCtrl.showCodeBox && csdMemberCtrl.defindFlag"><div><div class="form_key float_left form_key_margin">支付条码</div><input id=bk class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=csdMemberCtrl.auth_code ng-keypress=csdMemberCtrl.bk($event)></div><div class=clear></div><div class=form_error_font></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdMemberCtrl.create()>确认支付</div><div class="button_normal float_right" ng-click=csdMemberCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=csdMemberCtrl.cFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">办卡</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdMemberCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">实体卡</div><input class="form_value float_left form_value_width" style=margin-left:10px;width:350px placeholder=请放置实体卡 ng-class="{\'\':!csdMemberCtrl.cardFlag,\'form_value_error\':csdMemberCtrl.cardFlag}" ng-model="csdMemberCtrl.cardNum"></div><div class=clear></div><div ng-bind="\'卡库存\'+csdMemberCtrl.cardCount+\'张\'" style=margin-left:70px;color:#999></div><div class=form_error_font ng-show=!csdMemberCtrl.cardFlag></div><div class=form_error_font ng-show=csdMemberCtrl.cardFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">工本费</div><div style=margin-left:74px><div class=singleChoose_option style="float: none" ng-repeat="payment in csdMemberCtrl.useStateArr" ng-click=csdMemberCtrl.chooseState(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div><div class=float_left style=margin-top:12px ng-bind="csdMemberCtrl.cardCost+\'元\'"></div></div><div class=clear></div><div ng-show=csdMemberCtrl.isBk><div class="form_key float_left form_key_margin">支付方式</div><div style="width:350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in csdMemberCtrl.paymentArr" ng-click=csdMemberCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div><div style=width:0;height:0;overflow:hidden ng-show=csdMemberCtrl.showCodeBox><div><div class="form_key float_left form_key_margin">支付条码</div><input id=fillCard class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=csdMemberCtrl.auth_code ng-keypress=csdMemberCtrl.bk($event)></div><div class=clear></div><div class=form_error_font></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdMemberCtrl.bind()>完成</div><div class="button_normal float_right" ng-click=csdMemberCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=csdMemberCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left" ng-bind=csdMemberCtrl.memTitle>新增会员</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdMemberCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">会员姓名</div><input class="form_value float_left form_value_width" placeholder=会员真实姓名 ng-blur="csdMemberCtrl.judge(\'name\')" ng-class="{\'\':!csdMemberCtrl.nameFlag,\'form_value_error\':csdMemberCtrl.nameFlag}" ng-model="csdMemberCtrl.name"></div><div class=clear></div><div class=form_error_font ng-show=!csdMemberCtrl.nameFlag></div><div class=form_error_font style=margin-left:80px ng-show=csdMemberCtrl.nameFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">联系方式</div><input class="form_value float_left form_value_width" ng-show=!csdMemberCtrl.lengthFlag ng-change=csdMemberCtrl.judgeLength() placeholder=11位手机号码 ng-blur="csdMemberCtrl.judge(\'phone\')" ng-class="{\'\':!csdMemberCtrl.phoneFlag,\'form_value_error\':csdMemberCtrl.phoneFlag}" ng-model="csdMemberCtrl.phone"> <input class="form_value float_left form_value_width" ng-show=csdMemberCtrl.lengthFlag ng-change=csdMemberCtrl.judgeLength() style=color:#00a1ff placeholder=11位手机号码 ng-blur="csdMemberCtrl.judge(\'phone\')" ng-class="{\'\':!csdMemberCtrl.phoneFlag,\'form_value_error\':csdMemberCtrl.phoneFlag}" ng-model="csdMemberCtrl.phone"></div><div class=clear></div><div class=form_error_font ng-show=!csdMemberCtrl.phoneFlag></div><div class=form_error_font style=margin-left:80px ng-show=csdMemberCtrl.phoneFlag ng-bind=csdMemberCtrl.errPhone></div><div><div class="form_key float_left form_key_margin">证件类型</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!csdMemberCtrl.choosedZhengFlag,\'select_foucs\':csdMemberCtrl.choosedZhengFlag}" ng-click="csdMemberCtrl.choosedZhengFlag = !csdMemberCtrl.choosedZhengFlag"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=csdMemberCtrl.zhengName></div><div class=form_select_div style=width:345px ng-show=csdMemberCtrl.choosedZhengFlag><div ng-click="csdMemberCtrl.chooseIdType(\'id\')" class="select_cell pointer" onclick="event.cancelBubble = true">身份证</div><div ng-click="csdMemberCtrl.chooseIdType(\'other\')" class="select_cell pointer" onclick="event.cancelBubble = true">其他</div></div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">证件号码</div><input class="form_value float_left form_value_width" ng-class="{\'\':!csdMemberCtrl.idFlag,\'form_value_error\':csdMemberCtrl.idFlag}" placeholder=请核对证件号码 ng-model="csdMemberCtrl.idCard"></div><div class=clear></div><div class=form_error_font ng-show=!csdMemberCtrl.idFlag></div><div class=form_error_font style=margin-left:80px ng-show=csdMemberCtrl.idFlag>此项为必填项</div><div ng-show=!csdMemberCtrl.defindFlag><div class="form_key float_left form_key_margin">会员等级</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!csdMemberCtrl.choosedMembertypeFlag,\'select_foucs\':csdMemberCtrl.choosedMembertypeFlag}" ng-click="csdMemberCtrl.choosedMembertypeFlag = !csdMemberCtrl.choosedMembertypeFlag"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=csdMemberCtrl.membertypeName></div><div class=form_select_div style=width:345px ng-show=csdMemberCtrl.choosedMembertypeFlag><div ng-click=csdMemberCtrl.chooseMembertype(membertype) class="select_cell pointer" ng-repeat="membertype in csdMemberCtrl.membertypes" ng-bind=membertype.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div ng-show=!csdMemberCtrl.defindFlag class=form_error_font></div><div ng-show=!csdMemberCtrl.defindFlag class=zindex-400><div class="form_key float_left form_key_margin">会员类型</div><div class="float_left pointer" ng-class="{\'select\':!csdMemberCtrl.choosedTypeFlag,\'select_foucs\':csdMemberCtrl.choosedTypeFlag}" ng-click="csdMemberCtrl.choosedTypeFlag = !csdMemberCtrl.choosedTypeFlag"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=csdMemberCtrl.typeName></div><div class=form_select_div style=width:345px ng-show=csdMemberCtrl.choosedTypeFlag><div ng-click=csdMemberCtrl.chooseType(type) class="select_cell pointer" ng-repeat="type in csdMemberCtrl.types" ng-bind=type.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div ng-show=!csdMemberCtrl.defindFlag class=form_error_font></div><div><div class="form_key float_left form_key_margin"><span>实体卡</span><span style=color:#fff>的</span></div><img src=assets/images/bluecircle.png ng-show=csdMemberCtrl.needFlag style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=!csdMemberCtrl.needFlag ng-click="csdMemberCtrl.needFlag = true" style=height:18px class="float_left form_oImage_margin"><div class="float_left pointer" style="margin:12px 20px 0 0" ng-click="csdMemberCtrl.needFlag = true">需要</div><img src=assets/images/radio_off.png ng-show=csdMemberCtrl.needFlag ng-click="csdMemberCtrl.needFlag = false" style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/bluecircle.png ng-show=!csdMemberCtrl.needFlag style=height:18px class="float_left form_oImage_margin"><div class="float_left pointer" style="margin:12px 10px 0 0" ng-click="csdMemberCtrl.needFlag = false">不需要</div></div><div class=clear></div><div class=form_error_font></div><div ng-show=csdMemberCtrl.needFlag><div class="form_key float_left form_key_margin">实体卡号</div><input class="form_value float_left form_value_width" placeholder=请放置实体卡 ng-class="{\'\':!csdMemberCtrl.cardFlag,\'form_value_error\':csdMemberCtrl.cardFlag}" ng-model="csdMemberCtrl.cardNum"></div><div class=clear></div><div class=form_error_font ng-show="csdMemberCtrl.needFlag && !csdMemberCtrl.cardFlag"></div><div class=form_error_font ng-show="csdMemberCtrl.needFlag && csdMemberCtrl.cardFlag">此项为必填项</div><div ng-show=csdMemberCtrl.needFlag><div class="form_key float_left form_key_margin"><span>工本费</span><span style=color:#fff>的</span></div><div><div class=singleChoose_option style="float: none" ng-repeat="payment in csdMemberCtrl.useStateArr" ng-click=csdMemberCtrl.chooseState(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdMemberCtrl.finish()>下一步</div><div class="button_normal float_right" ng-click=csdMemberCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=csdMemberCtrl.continueFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">账户充值</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdMemberCtrl.close()"></div><div class=clear></div><div><div ng-show=csdMemberCtrl.moneySelect class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;background:#00a1ff;color:#fff;border-top-left-radius:6px;border-bottom-left-radius:6px;height:36px;line-height:34px">通用账户</div><div ng-show=!csdMemberCtrl.moneySelect ng-click="csdMemberCtrl.waySelect(\'money\')" class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;color:#000;border-top-left-radius:6px;border-bottom-left-radius:6px;height:36px;line-height:34px">通用账户</div><div ng-show=csdMemberCtrl.oneSelect class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;background:#00a1ff;color:#fff;height:36px;line-height:34px;border-left:0">专用账户</div><div ng-show=!csdMemberCtrl.oneSelect ng-click="csdMemberCtrl.waySelect(\'one\')" class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;color:#000;height:36px;line-height:34px;border-left:0">专用账户</div><div ng-show=csdMemberCtrl.cardSelect class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;background:#00a1ff;color:#fff;height:36px;line-height:34px;border-left:0">通用充值卡</div><div ng-show=!csdMemberCtrl.cardSelect ng-click="csdMemberCtrl.waySelect(\'card\')" class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;color:#000;height:36px;line-height:34px;border-left:0">通用充值卡</div><div ng-show=csdMemberCtrl.speSelect class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;background:#00a1ff;color:#fff;border-top-right-radius:6px;border-bottom-right-radius:6px;height:36px;line-height:34px;border-left:0">专用充值卡</div><div ng-show=!csdMemberCtrl.speSelect ng-click="csdMemberCtrl.waySelect(\'speCard\')" class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;color:#000;border-top-right-radius:6px;border-bottom-right-radius:6px;height:36px;line-height:34px;border-left:0">专用充值卡</div></div><div class=clear></div><div style=margin-top:20px ng-show=csdMemberCtrl.moneySelect><div class="form_key float_left form_key_margin">选择金额</div><div class=float_left style=width:350px><div ng-repeat="card in csdMemberCtrl.cCards" ng-click=csdMemberCtrl.choose(card) ng-style=card.select?csdMemberCtrl.cardBlue:csdMemberCtrl.cardGray class="float_left pointer" ng-bind=card.price></div></div></div><div class=clear></div><div ng-show=csdMemberCtrl.oneSelect style=margin-top:10px><div class="form_key float_left form_key_margin">选择场馆</div><div class=float_left style=width:350px><div class="float_left pointer" style="margin:10px 23px 0 0" ng-click=csdMemberCtrl.chVenue(venue) ng-repeat="venue in csdMemberCtrl.vrr"><img ng-show=!venue.select class=float_left src="assets/images/radio_off.png"> <img ng-show=venue.select style=width:16px class=float_left src="assets/images/bluecircle.png"><div class=float_left style=margin-left:3px ng-bind=venue.name></div></div></div></div><div class=clear></div><div class=form_error_font ng-show="!csdMemberCtrl.iFlag && csdMemberCtrl.oneSelect"></div><div class=form_error_font ng-show="csdMemberCtrl.iFlag && csdMemberCtrl.oneSelect">至少选择一个场馆</div><div ng-show="csdMemberCtrl.oneSelect || csdMemberCtrl.selfFlag"><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=csdMemberCtrl.price></div><div class=clear></div></div><div class=form_error_font style=margin-bottom:-20px ng-show="!csdMemberCtrl.pFlag && csdMemberCtrl.oneSelect"></div><div class=form_error_font style=margin-bottom:-20px ng-show="csdMemberCtrl.pFlag && csdMemberCtrl.oneSelect">此项必填</div><div style=margin-top:10px ng-show="csdMemberCtrl.moneySelect || csdMemberCtrl.oneSelect"><div><div class="form_key float_left form_key_margin">支付方式</div><div style="width:350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in csdMemberCtrl.paymentArr" ng-click=csdMemberCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style=width:0;height:0;overflow:hidden ng-show="csdMemberCtrl.showCodeBox && (csdMemberCtrl.moneySelect || csdMemberCtrl.oneSelect)"><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_codeC class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=csdMemberCtrl.auth_code ng-keypress=csdMemberCtrl.auth_codeCreateC($event)></div><div class=clear></div><div class=form_error_font></div></div><div ng-show=csdMemberCtrl.speSelect><div class="form_key float_left form_key_margin">充值场馆</div><div class=float_left style="width: 350px;padding-top: 7px"><div class=singleChoose_option ng-repeat="venue in csdMemberCtrl.venues_clone" ng-click=csdMemberCtrl.chooseChargeVenue(venue)><div class="singleChoose_imageBox {{venue.image}}" style="height: 26px"></div><div class=singleChoose_prompt style="min-width:60px;height: 26px;line-height: 26px" ng-bind=venue.name>场馆</div></div></div></div><div class=clear></div><div style=margin-top:20px ng-show=csdMemberCtrl.cardSelect||csdMemberCtrl.speSelect><div><div class="form_key float_left form_key_margin">充值账号</div><input class="form_value float_left form_value_width" placeholder=请输入充值卡账号 ng-model=csdMemberCtrl.chargeCardNum></div><div class=clear></div><div class=form_error_font></div></div><div ng-show=csdMemberCtrl.cardSelect||csdMemberCtrl.speSelect><div><div class="form_key float_left form_key_margin">充值密码</div><input class="form_value float_left form_value_width" placeholder=请输入充值卡密码 ng-model=csdMemberCtrl.chargeCardPassword></div><div class=clear></div></div><div><div class="form_key float_left form_key_margin">打印小票</div><img ng-show=csdMemberCtrl.printFlag style=width:15px;margin-top:10px class=float_left src=assets/images/bluecircle.png> <img ng-show=!csdMemberCtrl.printFlag ng-click="csdMemberCtrl.printFlag = true" style=width:15px;margin-top:10px class="float_left pointer" src=assets/images/radio_off.png><div class=float_left style="width:15px;margin:10px 5px 0 5px">是</div><img ng-show=!csdMemberCtrl.printFlag style=width:15px;margin-top:10px class=float_left src=assets/images/bluecircle.png> <img ng-show=csdMemberCtrl.printFlag ng-click="csdMemberCtrl.printFlag = false" style=width:15px;margin-top:10px class="float_left pointer" src=assets/images/radio_off.png><div class=float_left style="width:15px;margin:10px 5px 0 5px">否</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdMemberCtrl.continue()>完成</div><div class="button_normal float_right" ng-click=csdMemberCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=csdMemberCtrl.toastFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/rectangle2.png"><div class="float_left form_marginL_15px" ng-bind=csdMemberCtrl.wordOK>操作成功</div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=csdMemberCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=csdMemberCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=csdMemberCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" title={{csdMemberCtrl.wordWARN}}>支付中...</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div><!-- 错误提示 --><div class=bgGary style=z-index:999 ng-show=csdMemberCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=csdMemberCtrl.wordERR>22212</div><div class=promptClose ng-click="csdMemberCtrl.promptERR = false"></div></div></div></div><div class=bgGary ng-show=csdMemberCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdMemberCtrl.deleteFlag = false"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4 ng-bind=csdMemberCtrl.payWarn>删除项目后，场馆里该项目的场地全部会被删除。对于预定该项目的个人用户会退还预定金额。是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button_normal float_right" ng-click="csdMemberCtrl.deleteFlag = false">确定</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=csdMemberCtrl.sureFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdMemberCtrl.sureFlag = false"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4 ng-bind=csdMemberCtrl.sureWarn>删除项目后，场馆里该项目的场地全部会被删除。对于预定该项目的个人用户会退还预定金额。是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button_normal float_right" ng-click=csdMemberCtrl.surePay()>确定</div><div class=clear></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right:0px;top:10px;\n        }</style></div></div>'),
            a.put("app/checkstand/old/old-member.html", '<div style=margin-top:30px;z-index:888><div class="form_value form_width_250 float_left"><input style=border:0;height:32px;width:200px placeholder=搜索会员(手机号/卡号) ng-model="csdOldCtrl.searchNum"> <img src=assets/images/search.png class="student_search pointer" ng-click="csdOldCtrl.search()"></div><div class=clear></div><div class=cancelTable><div class="cancelTr height_40"><div class="cancelTh ellipsis" style=width:17rem;padding-left:7rem>姓名</div><div class="cancelTh ellipsis" style=width:16rem>手机号</div><div class="cancelTh ellipsis" style=width:15rem>卡号</div><div class="cancelTh ellipsis" style=width:19rem>身份证</div><div class="cancelTh ellipsis" style=width:16rem>现金账户</div><div class="cancelTh ellipsis" style=width:15rem>虚拟账户</div></div><!-- ng-repeat="product in csdOldCtrl.buyProduct" --><div class=cancelTr ng-repeat="member in csdOldCtrl.members"><div class="cancelTd ellipsis" style=width:7rem;padding-left:10px><img ng-show="member.selectFlag && !member.rFlag" ng-click=csdOldCtrl.changeM(member) class=pointer src="assets/images/select_box_on.png"> <img ng-show="!member.selectFlag && !member.rFlag" ng-click=csdOldCtrl.changeM(member) class=pointer src="assets/images/select_box.png"> <img ng-show=member.rFlag class=pointer style=width:16px src="assets/images/graygou.png"> <span></span></div><div class="cancelTd ellipsis" style=width:10rem ng-bind=member.name>2</div><div class="cancelTd ellipsis" style=width:16rem ng-bind=member.tel>2</div><div class="cancelTd ellipsis" style=width:15rem ng-bind="member.cardNo?member.cardNo:\'暂无\'">2</div><div class="cancelTd ellipsis" style=width:19rem ng-bind=member.idCard>2</div><div class="cancelTd ellipsis" style=width:16rem ng-bind=member.xPrice>2</div><div class="cancelTd ellipsis" style=width:15rem ng-bind=member.fPrice>2</div><div class="cancelTd ellipsis pointer" ng-click=csdOldCtrl.re(member) style=width:3rem;color:#00a1ff ng-show=member.rFlag>还原</div></div><div class=select_div ng-show=csdOldCtrl.typeFlag style=width:20rem;top:230px;left:430px><div class="select_choose ellipsis pointer" ng-click=csdOldCtrl.chooseClass(class)>全部</div></div></div><div class="button2_normal float_left" ng-show="csdOldCtrl.canEdit && csdOldCtrl.members.length>0" style="margin:20px 20px 0 0" ng-click=csdOldCtrl.toAdd()>合并修改</div><div class="button2_normal float_left" ng-show="!csdOldCtrl.canEdit && csdOldCtrl.members.length>0" style="margin:20px 20px 0 0;border:1px solid #D1DAE4;background:#eff2f7;color:#D1DAE4">合并修改</div><div class=clear></div><div class="button2_normal float_left" ng-show="csdOldCtrl.members.length>0" style="margin:20px 20px 0 0" ng-click=csdOldCtrl.sure()>确认提交</div><div class=bgGary ng-show=csdOldCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">合并账号</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdOldCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">选择账号</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!csdOldCtrl.choosedMemberFlag,\'select_foucs\':csdOldCtrl.choosedMemberFlag}" ng-click="csdOldCtrl.choosedMemberFlag = !csdOldCtrl.choosedMemberFlag"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=csdOldCtrl.cardNo></div><div class=form_select_div style=width:345px ng-show=csdOldCtrl.choosedMemberFlag><div ng-click=csdOldCtrl.choose(member) class="select_cell pointer" ng-repeat="member in csdOldCtrl.chooseMembers" ng-bind=member.name+member.cardNo onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_error_font ng-show=!csdOldCtrl.noFlag></div><div class=form_error_font style=margin-left:80px ng-show=csdOldCtrl.noFlag>账号还未选择</div><div><div class="form_key float_left form_key_margin">用户姓名</div><input class="form_value float_left form_value_width" ng-class="{\'\':!csdOldCtrl.idFlag,\'form_value_error\':csdOldCtrl.idFlag}" placeholder=请核对身份证号 ng-model="csdOldCtrl.name"></div><div class=clear></div><div class=form_error_font ng-show=!csdOldCtrl.nameFlag></div><div class=form_error_font style=margin-left:80px ng-show=csdOldCtrl.nameFlag>此项必填</div><div><div class="form_key float_left form_key_margin">身份证号</div><input class="form_value float_left form_value_width" ng-class="{\'\':!csdOldCtrl.idFlag,\'form_value_error\':csdOldCtrl.idFlag}" placeholder=请核对身份证号 ng-model="csdOldCtrl.idCard"></div><div class=clear></div><div class=form_error_font ng-show=!csdOldCtrl.idFlag></div><div class=form_error_font style=margin-left:80px ng-show=csdOldCtrl.idFlag ng-bind=csdOldCtrl.errId></div><div><div class="form_key float_left form_key_margin">手机号码</div><input class="form_value float_left form_value_width" placeholder=11位手机号码 ng-blur="csdOldCtrl.judge(\'phone\')" ng-class="{\'\':!csdOldCtrl.phoneFlag,\'form_value_error\':csdOldCtrl.phoneFlag}" ng-model="csdOldCtrl.phone"></div><div class=clear></div><div class=form_error_font ng-show=!csdOldCtrl.phoneFlag></div><div class=form_error_font style=margin-left:80px ng-show=csdOldCtrl.phoneFlag ng-bind=csdOldCtrl.errPhone></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdOldCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=csdOldCtrl.close()>取消</div><div class=clear></div></div></div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=csdOldCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click="csdOldCtrl.showAuth_codeBox = false"></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=csdOldCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=csdOldCtrl.wordOK>22212</div><div class=promptClose ng-click="csdOldCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=csdOldCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=csdOldCtrl.wordERR>22212</div><div class=promptClose ng-click="csdOldCtrl.promptERR = false"></div></div></div></div><div class=bgGary ng-show=csdOldCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdOldCtrl.deleteFlag = false"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>您还有账号尚未操作，如果继续合并，未操作的账号将被删除</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click="csdOldCtrl.deleteFlag = false">不提交了</div><div class="button_normal float_right" ng-click=csdOldCtrl.submit()>继续提交</div><div class=clear></div></div></div></div></div>'), a.put("app/checkstand/old/old-record.html", '<style>.bg{\n        height:44px;line-height:42px;align-items:center;padding-left:20px\n    }\n    .bg1{\n        position:relative; \n    }\n    .show{\n        position:absolute;left:53rem;visibility:hidden;\n    }    \n    .bg1:hover .show{\n        position:absolute;left:1px;background:white;border:1px solid #ddd;visibility:visible;padding:0 10px;top:40px;z-index:999\n    }</style><div><div class=field_selectBox><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入手机/卡号搜索 ng-model=csdOldCtrl.searchN><div class=xt_searchImage ng-click=csdOldCtrl.getHistory()></div></div><div class=clear></div></div></div><div><div style="margin:20px 30px 0 0"><div class="tableCtr width_108 top20"><div class=width_108><div class="thCtr width_12 ellipsis">处理日期</div><div class="thCtr width_12 ellipsis">姓名</div><div class="thCtr width_12 ellipsis">会员号</div><div class="thCtr width_12 ellipsis">手机号</div><div class="thCtr width_12 ellipsis">事件</div><div class="thCtr width_36 ellipsis">处理详情</div><div class="thCtr width_12 ellipsis">操作端</div><div class=clear></div></div><div class="trCtr width_108" ng-repeat="record in csdOldCtrl.historyMembers"><div class="tdCtr width_12 ellipsis" ng-bind="record.mergeDate|date:\'yyyy-MM-dd hh:MM\'"></div><div class="tdCtr width_12 ellipsis" ng-bind=record.name></div><div class="tdCtr width_12 ellipsis" ng-bind=record.memberNo></div><div class="tdCtr width_12 ellipsis" ng-bind=record.tel></div><div class="tdCtr width_12 ellipsis" ng-bind="record.isDelete?\'删除\':\'合并\'"></div><div class="tdCtr width_36 ellipsis"><div ng-bind=record.des class=ellipsis></div><div class=show><div ng-repeat="xx in record.rr" style=line-height:24px ng-bind=xx></div></div></div><div class="tdCtr width_12 ellipsis" ng-bind="record.mergeWorkerName?record.mergeWorkerName:\'微信\'"></div><div class=clear></div></div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="csdOldCtrl.pagination.numPages > 1" total-items=csdOldCtrl.pagination.totalItems ng-model=csdOldCtrl.pagination.page items-per-page=csdOldCtrl.pagination.itemsPerPage max-size=csdOldCtrl.pagination.maxSize boundary-links="{{csdOldCtrl.pagination.numPages > 2}}" rotate=false num-pages=csdOldCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=csdOldCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=csdOldCtrl.infoFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">账号合并信息</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdOldCtrl.infoFlag = false"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">合并主卡</div><div class="form_value float_left form_value_width" ng-bind=csdOldCtrl.cardNo></div></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin"><span style=color:#fff>姓名</span><span>姓名</span></div><div class="form_value float_left form_value_width" ng-bind=csdOldCtrl.name></div></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">手机号码</div><div class="form_value float_left form_value_width" ng-bind=csdOldCtrl.tel></div></div><div class=clear></div><div ng-repeat="merge in csdOldCtrl.merges"><div class=form_first_view><div class="form_key float_left form_key_margin">被合并卡</div><div class="form_value float_left form_value_width"><span ng-bind=merge.name></span> <span ng-bind="\'现金账户:\'+merge.cards[0].total"></span> <span ng-bind="\'虚拟账户:\'+merge.virtualAccount.total"></span></div></div><div class=clear></div></div></div><div class=form_submit><div class="button_normal float_right" ng-click="csdOldCtrl.infoFlag = false">取消</div><div class=clear></div></div></div></div></div>'), a.put("app/checkstand/old/old.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal {{csdOldCtrl.titleState==\'member\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="csdOldCtrl.changeTitle(\'member\')">卡合并修改</div><div class="field_titleNormal {{csdOldCtrl.titleState==\'record\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="csdOldCtrl.changeTitle(\'record\')">合并修改记录</div></div><div class=field_bookBoxPostition ui-view=""></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=csdOldCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=csdOldCtrl.wordOK>22212</div><div class=promptClose ng-click="csdOldCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=csdOldCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=csdOldCtrl.wordERR>22212</div><div class=promptClose ng-click="csdOldCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=csdOldCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" title={{csdOldCtrl.wordWARN}}>支付中...</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/checkstand/product/product-record.html", '<div><div class=field_selectBox><!-- <div class="xt_searchBox float_right" style="float: left;">\n            <input class="xt_searchInput" style="text-indent: 10px;" placeholder="输入综合服务名称" ng-model="csdProductCtrl.searchProductName">\n            <div class="xt_searchImage" ng-click="csdProductCtrl.searchProduct()"></div>\n        </div> --><div><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdProductCtrl.showVenueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdProductCtrl.showVenueName ng-click="csdProductCtrl.showChooseVenueBox=!csdProductCtrl.showChooseVenueBox">场馆1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=csdProductCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in csdProductCtrl.venues" ng-bind=venue.name ng-click="csdProductCtrl.chooseVenueName(venue,\'record\')">默认按钮</div></div></div><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdProductCtrl.showFirstName==\'选择一级类目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdProductCtrl.showFirstName ng-click="csdProductCtrl.showChooseFirstBox=!csdProductCtrl.showChooseFirstBox">一级类目1</div></div><div class=form_select_div style="position: relative;z-index: 200" ng-show=csdProductCtrl.showChooseFirstBox><div class="select_cell pointer ellipsis" ng-repeat="first in csdProductCtrl.productCategories" ng-bind=first.name ng-click="csdProductCtrl.chooseFirstName(first,\'record\')">默认按钮</div></div></div><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdProductCtrl.showSecondName==\'选择二级类目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdProductCtrl.showSecondName ng-click="csdProductCtrl.showChooseSecondBox=!csdProductCtrl.showChooseSecondBox">二级类目1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=csdProductCtrl.showChooseSecondBox><div class="select_cell pointer ellipsis" ng-repeat="second in csdProductCtrl.secondCategories" ng-bind=second.name ng-click="csdProductCtrl.chooseSecondName(second,\'record\')">默认按钮</div></div></div></div><div class=clear></div></div><div class=cancelTable style="margin-top: 20px"><div class="cancelThTr height_40"><div class="cancelTh width_12 ellipsis" style="text-indent: 20px">金额</div><div class="cancelTh width_15 ellipsis">日期</div><div class="cancelTh width_14 ellipsis">提交人</div><div class="cancelTh width_25 ellipsis">详情</div><div class="cancelTh width_14 ellipsis">备注</div><div class="cancelTh width_12 ellipsis">联系人</div><div class="cancelTh width_14 ellipsis">操作</div></div><div class=cancelTr ng-repeat="record in csdProductCtrl.records" style="{{record.state?\'background: #f2f2f2\':\'\'}}"><div class="cancelTd width_12 ellipsis" style="text-indent: 20px" ng-bind=record.cost></div><div class="cancelTd width_15 ellipsis" ng-bind="record.createDate | date:\'MM-dd\'"></div><div class="cancelTd width_14 ellipsis" ng-bind=record.workerName></div><div class="cancelTd width_25 ellipsis" ng-bind=record.description title={{record.description}}></div><div class="cancelTd width_14 ellipsis" ng-bind=record.remark></div><div class="cancelTd width_12 ellipsis" ng-bind="record.productContacts?record.productContacts:\'暂无\'"></div><div class="cancelTd width_14 ellipsis" ng-hide=record.state><span style="cursor: pointer;color: #8492a6" ng-click=csdProductCtrl.openErrChangeBox(record._id)>纠错</span> <span style="cursor: pointer;color: #20a0ff;margin-left: 20px" ng-click=csdProductCtrl.printRecord(record)>打印</span></div><div class="cancelTd width_14 ellipsis" ng-show=record.state>纠错单</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="csdProductCtrl.pagination.numPages > 1" total-items=csdProductCtrl.pagination.totalItems ng-model=csdProductCtrl.pagination.page items-per-page=csdProductCtrl.pagination.itemsPerPage max-size=csdProductCtrl.pagination.maxSize boundary-links="{{csdProductCtrl.pagination.numPages > 2}}" rotate=false num-pages=csdProductCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=csdProductCtrl.pageChanged()></pagination></div><!-- 纠错操作 --><div class=bgGary ng-show=csdProductCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=csdProductCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{csdProductCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="csdProductCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{csdProductCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="csdProductCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=csdProductCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=csdProductCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=csdProductCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=csdProductCtrl.close()>取消</div><div class=clear></div></div></div></div></div>'), a.put("app/checkstand/product/product-sale.html", '<div><div class=fbonce_member_InfoBox><div class=fbonce_m_i_readTelOrCard><div class=fbonce_m_i_r_title>读取用户信息</div><div class=fbonce_m_i_r_contect><input id=cardNoBox class=fbonce_m_i_r_c_input placeholder=请读取会员卡号/二维码 ng-model=csdProductCtrl.memberTelOrCard ng-keypress=csdProductCtrl.enterCheck($event) style=ime-mode:disabled><div ng-show=csdProductCtrl.memberTelOrCard class=fbonce_m_i_r_c_btn ng-click=csdProductCtrl.checkMember()>查询</div><div ng-hide=csdProductCtrl.memberTelOrCard class="fbonce_m_i_r_c_btn bgcolorG">查询</div><div class="fbonce_m_i_r_c_btn bgcolorW borderccc" style="color: #475669" ng-click=csdProductCtrl.resert()>重置</div></div></div><div ng-show=csdProductCtrl.showMemberInfo class=fbonce_m_i_info><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>姓名:</div><div class=fbonce_m_i_i_l_d_value ng-bind=csdProductCtrl.member.name>徐涛</div></div><div class=fbonce_m_i_i_l_detail style=margin-left:-40px><div class=fbonce_m_i_i_l_d_key>现金账户:</div><div class=fbonce_m_i_i_l_d_value ng-bind="csdProductCtrl.member.cards[0].total?csdProductCtrl.member.cards[0].total:0 | currency:\'￥\'">500元</div></div></div><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>级别:</div><div class=fbonce_m_i_i_l_d_value ng-show=csdProductCtrl.member.cards[0].levelDes ng-bind=csdProductCtrl.member.cards[0].levelDes>金卡</div><div class=fbonce_m_i_i_l_d_value ng-hide=csdProductCtrl.member.cards[0].levelDes>暂无等级</div></div><div class=fbonce_m_i_i_l_detail style=margin-left:-40px><div class=fbonce_m_i_i_l_d_key>虚拟账户:</div><div class="fbonce_m_i_i_l_d_value ellipsis" title="{{(csdProductCtrl.member.virtualAccount.total | currency:\'￥\')+\'(\'+(csdProductCtrl.member.virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'}}"><span ng-bind="csdProductCtrl.member.virtualAccount.total | currency:\'￥\'">500元(2017-10-28过期)</span> <span ng-show="csdProductCtrl.member.virtualAccount.total>0" ng-bind="\'(\'+(csdProductCtrl.member.virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'"></span></div></div></div><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>手机号:</div><div class=fbonce_m_i_i_l_d_value ng-bind=csdProductCtrl.member.tel>18806712362</div></div></div></div><div ng-hide=csdProductCtrl.showMemberInfo class="fbonce_m_i_info fbonce_m_i_noInfo"><span class=colorG>暂无会员信息</span></div><div class=clear></div></div><div class=field_selectBox><div class="xt_searchBox float_right" style="float: left"><input class=xt_searchInput style="text-indent: 10px" placeholder=输入综合服务名称 ng-model=csdProductCtrl.searchProductName><div class=xt_searchImage ng-click=csdProductCtrl.searchProduct()></div></div><div style="float: left;margin-left: 20px"><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdProductCtrl.showVenueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdProductCtrl.showVenueName ng-click="csdProductCtrl.showChooseVenueBox=!csdProductCtrl.showChooseVenueBox">场馆1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=csdProductCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in csdProductCtrl.venues" ng-bind=venue.name ng-click="csdProductCtrl.chooseVenueName(venue,\'product\')">默认按钮</div></div></div><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdProductCtrl.showFirstName==\'选择一级类目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdProductCtrl.showFirstName ng-click="csdProductCtrl.showChooseFirstBox=!csdProductCtrl.showChooseFirstBox">一级类目1</div></div><div class=form_select_div style="position: relative;z-index: 200" ng-show=csdProductCtrl.showChooseFirstBox><div class="select_cell pointer ellipsis" ng-repeat="first in csdProductCtrl.productCategories" ng-bind=first.name ng-click="csdProductCtrl.chooseFirstName(first,\'product\')">默认按钮</div></div></div><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdProductCtrl.showSecondName==\'选择二级类目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdProductCtrl.showSecondName ng-click="csdProductCtrl.showChooseSecondBox=!csdProductCtrl.showChooseSecondBox">二级类目1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=csdProductCtrl.showChooseSecondBox><div class="select_cell pointer ellipsis" ng-repeat="second in csdProductCtrl.secondCategories" ng-bind=second.name ng-click="csdProductCtrl.chooseSecondName(second,\'product\')">默认按钮</div></div></div></div><div class=clear></div></div></div><div><div class=cancelTable><div class="cancelThTr height_40"><div class="cancelTh width_21 ellipsis" style="text-indent: 2rem">名称</div><div class="cancelTh width_21 ellipsis">所属场馆</div><div class="cancelTh width_21 ellipsis">一级分类</div><div class="cancelTh width_21 ellipsis">二级分类</div><div class="cancelTh width_22 ellipsis">操作</div></div><div class=cancelTr ng-repeat="product in csdProductCtrl.products"><div class="cancelTd width_21 ellipsis" style="text-indent: 2rem"><span ng-bind=product.name></span><span style="color:#20a0ff;font-size: 12px;margin-left: 5px" ng-hide=product.isUsed>停用中</span></div><div class="cancelTd width_21 ellipsis" ng-bind=product._venue.name>预订时间</div><div class="cancelTd width_21 ellipsis" ng-bind="product._firstCategory?product._firstCategory.name:\'暂无\'">预订时间</div><div class="cancelTd width_21 ellipsis" ng-bind="product._secondCategory?product._secondCategory.name:\'暂无\'">支付金额</div><div class="cancelTd width_22 ellipsis"><span class=cancel_btn ng-show=product.isUsed ng-click=csdProductCtrl.openBuyProduct(product)>售卖</span> <span ng-hide=product.isUsed style=color:#8492a6>售卖</span></div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="csdProductCtrl.pagination.numPages > 1" total-items=csdProductCtrl.pagination.totalItems ng-model=csdProductCtrl.pagination.page items-per-page=csdProductCtrl.pagination.itemsPerPage max-size=csdProductCtrl.pagination.maxSize boundary-links="{{csdProductCtrl.pagination.numPages > 2}}" rotate=false num-pages=csdProductCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=csdProductCtrl.pageChanged()></pagination></div><!-- 售卖服务 --><div class=bgGary ng-show=csdProductCtrl.showBuyProduct><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">售卖综合服务</div><!-- <div class="form_title float_left">编辑综合服务</div> --><img src=assets/images/close.png class="float_right pointer" ng-click="csdProductCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">客户名称</div><input class="form_value float_left form_value_width" placeholder=请输入客户名称 ng-model=csdProductCtrl.name></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入综合服务金额 ng-model=csdProductCtrl.price></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=csdProductCtrl.remark></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">联系人员</div><input class="form_value float_left form_value_width" placeholder=输入活动对接人或招生联系人姓名 ng-model=csdProductCtrl.productContacts></div><div class=clear></div><div style="margin-top: 10px"><div class="form_key float_left form_key_margin">支付方式</div><div class="singleChoose_box float_left" style="width: 348px;height: 65px"><div class=singleChoose_option ng-repeat="payment in csdProductCtrl.paymentArr" ng-click=csdProductCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>每周</div></div></div></div><div class=clear></div><div style="width: 0px;height: 0px;overflow: hidden"><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=csdProductCtrl.auth_code ng-keypress=csdProductCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdProductCtrl.buy()>完成</div><div class="button_normal float_right" ng-click=csdProductCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=csdProductCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=csdProductCtrl.closePrompt()></div></div></div></div>'), a.put("app/checkstand/product/product.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal {{csdProductCtrl.titleState==\'sale\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="csdProductCtrl.changeTitle(\'sale\')">售卖服务</div><div class="field_titleNormal {{csdProductCtrl.titleState==\'record\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="csdProductCtrl.changeTitle(\'record\')">服务记录</div></div><div class=field_bookBoxPostition ui-view=""></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=csdProductCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=csdProductCtrl.wordOK>22212</div><div class=promptClose ng-click=csdProductCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=csdProductCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=csdProductCtrl.wordERR>22212</div><div class=promptClose ng-click=csdProductCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=csdProductCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=csdProductCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/checkstand/setting/setting-person.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style=padding:30px;margin-left:170px;min-width:600px><div style=font-size:16px;margin-left:30px>个人信息</div><div class=form_first_view><div class="form_key float_left form_key_margin" style=margin-right:20px;width:84px;text-align:right>账号名称</div><div class="form_value float_left form_value_width" ng-bind=csdSettingPersonCtrl.account></div></div><div class=clear></div><div style=margin-top:20px><div class="form_key float_left form_key_margin" style=margin-right:20px;width:84px;text-align:right>原密码</div><input class="form_value float_left form_value_width" placeholder=请输入原密码 ng-model=csdSettingPersonCtrl.oldPassword ng-change="csdSettingPersonCtrl.judge()"></div><div class=clear></div><div style=margin-top:20px><div class="form_key float_left form_key_margin" style=margin-right:20px;width:84px;text-align:right>新密码</div><input class="form_value float_left form_value_width" placeholder=请输入新密码 ng-model=csdSettingPersonCtrl.newPassword ng-change="csdSettingPersonCtrl.judge()"></div><div class=clear></div><div class="button2_normal float_left" ng-show=!csdSettingPersonCtrl.saveFlag style="background:#ccc;margin:30px 0 0 104px">保存</div><div class="button2_normal float_left" ng-show=csdSettingPersonCtrl.saveFlag style="margin:30px 0 0 104px" ng-click=csdSettingPersonCtrl.save()>保存</div><div class="button2_normal float_left" style="background:#fff;margin:30px 0 0 20px;border:1px solid #ccc;color:#99a9bf" ng-click=csdSettingPersonCtrl.logout()>退出登录</div></div><!-- 成功提示弹框 --><div class=bgGary2 ng-show=csdSettingPersonCtrl.succeedFlag><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/rectangle2.png"><div class="float_left form_marginL_15px">修改完成</div></div></div><div class=bgGary ng-show=csdSettingPersonCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px">请正确输入密码</div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/checkstand/shop/inventory-record.html", '<div><div class=cancelTable style="margin-top: 20px"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style=width:110px>进货号</div><div class="cancelTh ellipsis" style=width:110px>进货日期</div><div class="cancelTh ellipsis" style=width:110px>商品名称</div><div class="cancelTh ellipsis pointer" ng-click="csdInventoryCtrl.typeFlag = !csdInventoryCtrl.typeFlag" style=width:110px><span>商品类别</span> <img style=margin-left:5px src="assets/images/arrow.png"></div><div class="cancelTh ellipsis" style=width:110px>供应商</div><div class="cancelTh ellipsis" style=width:110px>进货数量</div><div class="cancelTh ellipsis" style=width:110px>进货单价</div><div class="cancelTh ellipsis" style=width:110px>进货金额</div><div class="cancelTh ellipsis" style=width:110px>登记人员</div></div><div class=cancelTr ng-repeat="record in csdInventoryCtrl.records" style="{{record.state?\'background: #f2f2f2\':\'\'}}"><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div></div><div class=select_div ng-show=csdInventoryCtrl.typeFlag style=width:200px;top:170px;left:570px><div class="select_choose ellipsis pointer" ng-click=csdInventoryCtrl.chooseClass(class)>全部</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="csdInventoryCtrl.pagination.numPages > 1" total-items=csdInventoryCtrl.pagination.totalItems ng-model=csdInventoryCtrl.pagination.page items-per-page=csdInventoryCtrl.pagination.itemsPerPage max-size=csdInventoryCtrl.pagination.maxSize boundary-links="{{csdInventoryCtrl.pagination.numPages > 2}}" rotate=false num-pages=csdInventoryCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=csdInventoryCtrl.pageChanged()></pagination></div><!-- 纠错操作 --><div class=bgGary ng-show=csdInventoryCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=csdInventoryCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{csdInventoryCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="csdInventoryCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{csdInventoryCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="csdInventoryCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=csdInventoryCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=csdInventoryCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=csdInventoryCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=csdInventoryCtrl.close()>取消</div><div class=clear></div></div></div></div></div>'),
            a.put("app/checkstand/shop/inventory-stock.html", '<div><div class=field_selectBox><div class="button2_normal float_left" ng-click="csdInventoryCtrl.enterFlag = true">进货入库</div><div class="xt_searchBox float_right" style="margin-right: 20px"><input class=xt_searchInput style="text-indent: 10px" placeholder=请输入商品名称 ng-model=csdInventoryCtrl.searchProductName><div class=xt_searchImage ng-click=csdInventoryCtrl.search()></div></div><div class=clear></div></div></div><div><div class=cancelTable><div class="cancelTr height_40"><div class="cancelTh ellipsis" style=width:160px>商品名称</div><div class="cancelTh ellipsis pointer" ng-click="csdInventoryCtrl.typeFlag = !csdInventoryCtrl.typeFlag" style=width:160px><span>商品类别</span> <img style=margin-left:5px src="assets/images/arrow.png"></div><div class="cancelTh ellipsis" style=width:160px>库存数</div><div class="cancelTh ellipsis" style=width:160px>进货价</div><div class="cancelTh ellipsis" style=width:160px>销售价</div><div class="cancelTh ellipsis" style=width:160px>操作</div></div><div class=cancelTr ng-repeat="product in csdInventoryCtrl.products" ng-show="product.quantity > 0"><div class="cancelTd ellipsis" style=width:160px ng-bind=product.name></div><div class="cancelTd ellipsis" style=width:160px ng-bind=product.categoryName></div><div class="cancelTd ellipsis" style=width:160px ng-bind=product.quantity></div><div class="cancelTd ellipsis" style=width:160px ng-bind=product.price></div><div class="cancelTd ellipsis" style=width:160px ng-bind=product.price></div><div class="cancelTd ellipsis pointer" style=width:160px;color:#00a1ff><span style=margin-right:10px ng-click="csdInventoryCtrl.enterFlag = true">修改</span><span ng-click="csdInventoryCtrl.changePriceFlag = true">调价</span></div></div><div class=select_div ng-show=csdInventoryCtrl.typeFlag style=width:200px;top:230px;left:388px><div class="select_choose ellipsis pointer" ng-click=csdInventoryCtrl.chooseClass(class)>全部</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="csdInventoryCtrl.pagination.numPages > 1" total-items=csdInventoryCtrl.pagination.totalItems ng-model=csdInventoryCtrl.pagination.page items-per-page=csdInventoryCtrl.pagination.itemsPerPage max-size=csdInventoryCtrl.pagination.maxSize boundary-links="{{csdInventoryCtrl.pagination.numPages > 2}}" rotate=false num-pages=csdInventoryCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=csdInventoryCtrl.pageChanged()></pagination></div><!-- 进货入库 --><div class=bgGary ng-show=csdInventoryCtrl.enterFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">进货入库</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdInventoryCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">商品名称</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!csdInventoryCtrl.chooseNameFlag,\'select_foucs\':csdInventoryCtrl.chooseNameFlag}" ng-click="csdInventoryCtrl.chooseNameFlag = !csdInventoryCtrl.chooseNameFlag"><div class="form_down_icon form_select_value_choose" style=width:346px ng-bind=csdInventoryCtrl.productName></div><div class=form_select_div style=width:346px ng-show=csdInventoryCtrl.chooseNameFlag><div ng-click=csdInventoryCtrl.chooseProduct(product) class="select_cell pointer" ng-repeat="product in csdInventoryCtrl.products" ng-bind=product.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin"><span>供货商</span><span style=color:#fff>的</span></div><div class="float_left pointer form_zindex_100" ng-class="{\'select\':!csdInventoryCtrl.chooseSupplyFlag,\'select_foucs\':csdInventoryCtrl.chooseSupplyFlag}" ng-click="csdInventoryCtrl.chooseSupplyFlag = !csdInventoryCtrl.chooseSupplyFlag"><div class="form_down_icon form_select_value_choose" style=width:346px ng-bind=csdInventoryCtrl.supply></div><div class=form_select_div style=width:346px ng-show=csdInventoryCtrl.chooseSupplyFlag><div ng-click=csdInventoryCtrl.chooseSupply(supply) class="select_cell pointer" ng-repeat="supply in csdInventoryCtrl.supplies" ng-bind=supply.supplyName onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">进货数量</div><input class="form_value float_left form_value_width" placeholder=请输入进货数量 ng-model=csdInventoryCtrl.num></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">进货单价</div><input class="form_value float_left form_value_width" placeholder=请输入进货单价 ng-model=csdInventoryCtrl.price></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdInventoryCtrl.enter()>完成</div><div class="button_normal float_right" ng-click=csdInventoryCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 调价 --><div class=bgGary ng-show=csdInventoryCtrl.changePriceFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">调价</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdInventoryCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin"><span>销售价</span><span style=color:#fff>的</span></div><input class="form_value float_left form_value_width" placeholder=请输入销售价 ng-model=csdInventoryCtrl.salePrice></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdInventoryCtrl.buy()>完成</div><div class="button_normal float_right" ng-click=csdInventoryCtrl.close()>取消</div><div class=clear></div></div></div></div></div>'), a.put("app/checkstand/shop/inventory.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div class=field_bookBoxPostition><div class=field_titleBox><div style="width: 90px" class="field_titleNormal {{csdInventoryCtrl.titleState==\'stock\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="csdInventoryCtrl.changeTitle(\'stock\')">商品库存</div><div style="width: 90px" class="field_titleNormal {{csdInventoryCtrl.titleState==\'record\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="csdInventoryCtrl.changeTitle(\'record\')">进货记录</div></div><div ui-view=""></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=csdInventoryCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=csdInventoryCtrl.wordOK>22212</div><div class=promptClose ng-click=csdInventoryCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=csdInventoryCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=csdInventoryCtrl.wordERR>22212</div><div class=promptClose ng-click=csdInventoryCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=csdInventoryCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=csdInventoryCtrl.wordWARN>22212</div><div class=promptClose ng-click=csdInventoryCtrl.closePrompt()></div></div></div></div>'), a.put("app/checkstand/shop/sell-record.html", '<div><div class=field_selectBox><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入商品名搜索 ng-model=csdSellCtrl.searchProductName><div class=xt_searchImage ng-click=csdSellCtrl.searchProduct()></div></div><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="csdSellCtrl.startDateFlag = !csdSellCtrl.startDateFlag;csdSellCtrl.closeDateFlag = false" ng-bind="csdSellCtrl.startDate | date:\'yyyy-MM-dd\'"></div><div class=float_left style="margin:10px 10px 0 10px">至</div><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="csdSellCtrl.closeDateFlag = !csdSellCtrl.closeDateFlag;csdSellCtrl.startDateFlag = false" ng-bind="csdSellCtrl.closeDate | date:\'yyyy-MM-dd\'"></div><div class=clear></div><div class="student_datetime student_datetime2" style="margin:380px 0 0 0"><datetimepick ng-close=csdSellCtrl.getRecord() ng-id="\'first\'" ng-show=csdSellCtrl.startDateFlag ng-date=csdSellCtrl.startDate></datetimepick></div><div class="student_datetime student_datetime2" style="margin:380px 0 0 0"><datetimepick ng-close=csdSellCtrl.getRecord() ng-id="\'second\'" ng-show=csdSellCtrl.closeDateFlag ng-date=csdSellCtrl.closeDate></datetimepick></div></div></div><div><div class=cancelTable><div class="cancelTr height_40"><div class="cancelTh ellipsis" style=width:20rem>订单号</div><div class="cancelTh ellipsis" style=width:14rem>商品名称</div><div class="cancelTh ellipsis" style=width:13rem>订单时间</div><div class="cancelTh ellipsis" style=width:5rem>售价</div><div class="cancelTh ellipsis" style=width:6rem>数量</div><div class="cancelTh ellipsis" style=width:12rem>销售额</div><div class="cancelTh ellipsis" style=width:10rem>顾客姓名</div><div class="cancelTh ellipsis" style=width:10rem>操作人</div><div class="cancelTh ellipsis" style=width:10rem>操作</div></div><div class=cancelTr ng-repeat="record in csdSellCtrl.records"><div class="cancelTd ellipsis" style=width:20rem ng-bind=record._id></div><div class="cancelTd ellipsis" style=width:14rem ng-bind=record._record?record.description+record.remark:record.shopProductName title={{record._record?record.description+record.remark:record.shopProductName}}></div><div class="cancelTd ellipsis" style=width:13rem ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm\'"></div><div class="cancelTd ellipsis" style=width:5rem ng-bind=record.price></div><div class="cancelTd ellipsis" style=width:6rem ng-bind=record.quantity></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=record.cost></div><div class="cancelTd ellipsis" style=width:10rem ng-bind=record.name></div><div class="cancelTd ellipsis" style=width:10rem ng-bind=record.workerName></div><div class="cancelTd ellipsis" style=width:10rem><span class=pointer style=color:#00a1ff ng-show=!record.isRefund&&!record._record ng-click="csdSellCtrl.refundFlag = true;csdSellCtrl.rId = record._id">退款</span> <span ng-show=record.isRefund&&!record._record>已退款</span> <span class="left20 pointer" style=color:#00a1ff ng-show=!record._record ng-click=csdSellCtrl.openErrChangeBox(record._id)>纠错</span> <span ng-show=record._record>纠错单</span></div></div></div><div style=margin-top:20px;font-size:18px><span>总额：</span><span ng-bind=csdSellCtrl.recordTotal></span></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="csdSellCtrl.pagination.numPages > 1" total-items=csdSellCtrl.pagination.totalItems ng-model=csdSellCtrl.pagination.page items-per-page=csdSellCtrl.pagination.itemsPerPage max-size=csdSellCtrl.pagination.maxSize boundary-links="{{csdSellCtrl.pagination.numPages > 2}}" rotate=false num-pages=csdSellCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=csdSellCtrl.pageChanged()></pagination></div><div class=bgGary style=z-index:999 ng-show=csdSellCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=csdSellCtrl.wordERR>22212</div><div class=promptClose ng-click="csdSellCtrl.promptERR = false"></div></div></div></div><!-- 纠错操作 --><div class=bgGary ng-show=csdSellCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=csdSellCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{csdSellCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="csdSellCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{csdSellCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="csdSellCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=csdSellCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=csdSellCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=csdSellCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=csdSellCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 商品退款 --><div class=bgGary ng-show=csdSellCtrl.refundFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">商品退款</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdSellCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">退款金额</div><input class="form_value float_left form_value_width" placeholder=请输入退款金额 ng-model=csdSellCtrl.refundPrice></div><div class=clear></div><!-- \n                <div class="form_first_view">\n                    <div class="form_key float_left form_key_margin">退款方式</div>\n                    <div class="singleChoose_box float_left">\n                        <div class="singleChoose_option" ng-repeat="refund in csdSellCtrl.refundArr" ng-click="csdSellCtrl.chooseRefund(refund)">\n                            <div class="singleChoose_imageBox {{refund.image}}"></div>\n                            <div class="singleChoose_prompt" ng-bind="refund.name">每周</div>\n                        </div>\n                    </div>\n                </div>\n                <div class="clear"></div> --></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdSellCtrl.refund()>完成</div><div class="button_normal float_right" ng-click=csdSellCtrl.close()>取消</div><div class=clear></div></div></div></div></div>'), a.put("app/checkstand/shop/sell-sale.html", '<div style="width: 440px;height: 36px;line-height: 36px;margin: 0 auto;background: #c3d7ea;border-radius: 5px;padding: 0 20px" ng-show="csdSellCtrl.orders.length>0"><span>注意：当前有库存未接收</span> <span style="float: right;color: #8492a6;cursor: pointer" ui-sref=csd-stock-receive>查看详情</span> <span style="float: right;margin-right: 20px;color: #20a0ff;cursor: pointer" ng-click=csdSellCtrl.receive()>一键接收</span></div><div><div style="height: 36px;margin-top: 20px;float: left"><input style="float:left;width:160px;height:36px;text-indent:10px;border-radius:5px 0 0 5px;border:1px solid #ccc;border-right:none" placeholder="输入商品名称/条码 " ng-model=csdSellCtrl.pName ng-keydown=csdSellCtrl.addListByDown($event)><div ng-show=csdSellCtrl.pName style="float:left;height:36px;line-height:36px;text-align:center;border-radius:0 5px 5px 0;background:#20a0ff;color:#fff;cursor:pointer;padding:0 15px" ng-click=csdSellCtrl.addList()>加入购物车</div><div ng-hide=csdSellCtrl.pName style="float:left;padding:0 15px;height:36px;line-height:36px;text-align:center;border-radius:0 5px 5px 0;background:#d3dce6;color:#fff">加入购物车</div></div><div class=clear></div><div ng-show=csdSellCtrl.selectFlag style="width:160px;border:1px solid #ddd;background:#fff;z-index:999;position:relative"><div ng-show=product.isUsed ng-click=csdSellCtrl.add(product) class="pointer select_cell ellipsis" ng-repeat="product in csdSellCtrl.products" ng-bind="product.name+\'(进:\'+product.purchasePrice+\'/销:\'+product.price+\')\'" title="{{product.name+\'(进:\'+product.purchasePrice+\'/销:\'+product.price+\')\'}}" style="padding:0 10px">d</div><div ng-show=!product.isUsed ng-click="csdSellCtrl.selectFlag = false" class="pointer select_cell ellipsis" ng-repeat="product in csdSellCtrl.products" style="padding:0 10px"><span class=float_left ng-bind="product.name+\'(进:\'+product.purchasePrice+\'/销:\'+product.price+\')\'" title="{{product.name+\'(进:\'+product.purchasePrice+\'/销:\'+product.price+\')\'}}"></span><span style=float:right;color:#00a1ff>已下架</span></div></div></div><div class=clear></div><div style=margin-top:30px;z-index:888><div class=cancelTable ng-show="!csdSellCtrl.buyProduct.length == 0"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style=width:25rem>商品名称</div><div class="cancelTh ellipsis" style=width:25rem>单价</div><div class="cancelTh ellipsis" style=width:25rem>数量</div><div class="cancelTh ellipsis" style=width:25rem>总价</div></div><div class=cancelTr ng-repeat="product in csdSellCtrl.buyProduct"><div class="cancelTd ellipsis" style=width:25rem ng-bind=product.name>2</div><div class="cancelTd ellipsis" style=width:25rem ng-bind="\'￥\'+product.price">2</div><div class="cancelTd ellipsis" style=width:25rem><input ng-blur=csdSellCtrl.canPrice(product) ng-model=product.num ng-change=csdSellCtrl.calPrice(product) style=border:0;width:20px class="float_left"><div class="float_left pointer"><img src=assets/images/circleadd.png style=width:17px ng-click="csdSellCtrl.changeNum(product,\'add\')"> <img src=assets/images/circledelete.png style=width:17px ng-click="csdSellCtrl.changeNum(product,\'delete\')"></div></div><div class="cancelTd ellipsis" style=width:25rem ng-bind="\'￥\'+product.tot"></div></div><div class=select_div ng-show=csdSellCtrl.typeFlag style=width:20rem;top:230px;left:430px><div class="select_choose ellipsis pointer" ng-click=csdSellCtrl.chooseClass(class)>全部</div></div></div><div style="margin-top:20px;font-size:14px;color:#8492a6;border:1px solid #ddd;width:1000px;text-align:center;height:60px;line-height:60px" ng-show="csdSellCtrl.buyProduct.length == 0">购物车暂无商品</div><div style=margin-top:20px;font-size:14px ng-show="!csdSellCtrl.buyProduct.length == 0"><span>应付:</span> <span style=color:#ff4949>￥</span> <span style=color:#ff4949;font-size:18px ng-bind=csdSellCtrl.total></span></div><div class="button2_normal float_left" style="margin:20px 20px 0 0" ng-click=csdSellCtrl.judgePay()>立即付款</div><div class=bgGary ng-show=csdSellCtrl.payFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">发起支付</div><img src=assets/images/close.png class="float_right pointer" ng-click="csdSellCtrl.payFlag = false"></div><div class=clear></div><div ng-show=csdSellCtrl.moneyFlag style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">需支付：</div><div class="form_value float_left form_value_width" style=border:none;color:red ng-bind="csdSellCtrl.realPrice | currency:\'￥\'"></div></div><div class=clear></div></div><div ng-show=!csdSellCtrl.moneyFlag style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">需支付：</div><div class="form_value float_left form_value_width" style=border:none;color:red ng-bind="csdSellCtrl.total | currency:\'￥\'"></div></div><div class=clear></div></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">支付方式</div><div style="float: left;width: 350px"><div class=singleChoose_option style="float: none" ng-repeat="payment in csdSellCtrl.paymentArr" ng-click=csdSellCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style=width:0;height:0;overflow:hidden><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code style=ime-mode:disabled class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=csdSellCtrl.auth_code ng-keypress=csdSellCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=csdSellCtrl.create()>确认支付</div><div class="button_normal float_right" ng-click="csdSellCtrl.payFlag = false">取消</div><div class=clear></div></div></div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=csdSellCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=csdSellCtrl.shut()></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=csdSellCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=csdSellCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="csdSellCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=csdSellCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=csdSellCtrl.wordERR title={{csdSellCtrl.wordERR}}>22212</div><div class=promptClose ng-click=csdSellCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=csdSellCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=csdSellCtrl.wordWARN title={{csdSellCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/checkstand/shop/sell.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal {{csdSellCtrl.titleState==\'sale\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="csdSellCtrl.changeTitle(\'sale\')">商品销售</div><div class="field_titleNormal {{csdSellCtrl.titleState==\'record\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="csdSellCtrl.changeTitle(\'record\')">销售记录</div></div><div class=field_bookBoxPostition ui-view=""></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=csdSellCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=csdSellCtrl.wordOK>22212</div><div class=promptClose ng-click="csdSellCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=csdSellCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=csdSellCtrl.wordERR>22212</div><div class=promptClose ng-click="csdSellCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=csdSellCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" title={{csdSellCtrl.wordWARN}}>支付中...</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/checkstand/stock/stock-receive.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-stock-transfer>库存交接</div><div class="field_titleNormal field_titleChoose">库存接收</div></div><div class=field_bookBoxPostition><div><div class=field_selectBox><div class=float_left style="margin-right: 20px"><div class="fbonce_bookConfirmBtn pointer" ng-show="csdStockReceiveCtrl.orders.length>0" style="margin-bottom: 0" ng-click=csdStockReceiveCtrl.receive()>确认接收</div><div class=fbonce_bookConfirmBtn ng-hide="csdStockReceiveCtrl.orders.length>0" style="background: #d3dce6;margin-bottom: 0">确认接收</div></div></div></div><div><div class=cancelTable style="width: 114rem"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style="width:11rem;text-indent: 20px">登记时间</div><div class="cancelTh ellipsis" style=width:11rem>交接单号</div><div class="cancelTh ellipsis" style=width:11rem>商品码</div><div class="cancelTh ellipsis" style=width:11rem>商品名称</div><div class="cancelTh ellipsis" style=width:12rem>供应商名称</div><div class="cancelTh ellipsis" style=width:11rem>交接数量</div><div class="cancelTh ellipsis" style=width:11rem>进货单价</div><div class="cancelTh ellipsis" style=width:11rem>交接总价</div><div class="cancelTh ellipsis" style=width:11rem>销售单价</div><div class="cancelTh ellipsis" style=width:11rem>操作人</div><!-- <div class="cancelTh ellipsis" style="width:10rem">操作</div> --></div><div class=cancelTr ng-repeat="order in csdStockReceiveCtrl.orders" ng-show="csdStockReceiveCtrl.orders.length>0"><div class="cancelTd ellipsis" style="width:11rem;text-indent: 20px" ng-bind="order.createDate | date:\'yyyy-MM-dd HH:mm\'"></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.orderNo></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.misCode></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.name></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=order.supplyName></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.quantity></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.purchasePrice></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.cost></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.price></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.workerName></div><!-- <div class="cancelTd ellipsis" style="width:10rem;">\n                                <span style="color:#00a1ff;cursor: pointer;" ng-show="order.canChange" ng-click="csdReturnRecordCtrl.cancel(order._id)">撤销</span>\n                                <span ng-hide="order.canChange">不可操作</span>\n                            </div> --></div><div class=cancelTr ng-hide="csdStockReceiveCtrl.orders.length>0"><div class="cancelTd ellipsis" style="width:100rem;text-align: center;color:#20a0ff">暂无需接收库存</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="csdStockReceiveCtrl.pagination.numPages > 1" total-items=csdStockReceiveCtrl.pagination.totalItems ng-model=csdStockReceiveCtrl.pagination.page items-per-page=csdStockReceiveCtrl.pagination.itemsPerPage max-size=csdStockReceiveCtrl.pagination.maxSize boundary-links="{{csdStockReceiveCtrl.pagination.numPages > 2}}" rotate=false num-pages=csdStockReceiveCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=csdStockReceiveCtrl.pageChanged()></pagination></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=csdStockReceiveCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=csdStockReceiveCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="csdStockReceiveCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=csdStockReceiveCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=csdStockReceiveCtrl.wordERR title={{csdStockReceiveCtrl.wordERR}}>22212</div><div class=promptClose ng-click=csdStockReceiveCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=csdStockReceiveCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=csdStockReceiveCtrl.wordWARN title={{csdStockReceiveCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/checkstand/stock/stock-transfer.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleChoose">库存交接</div><div class="field_titleNormal field_titleUnChoose" ui-sref=csd-stock-receive>库存接收</div></div><div class=field_bookBoxPostition><div><div class=field_selectBox><div class="select fbonce_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{csdStockTransferCtrl.showWorkerName==\'选择交接柜员\'?\'\':\'color:#1f2d3d\';}}" ng-bind=csdStockTransferCtrl.showWorkerName ng-click="csdStockTransferCtrl.showChooseWorkerBox=!csdStockTransferCtrl.showChooseWorkerBox">场馆1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=csdStockTransferCtrl.showChooseWorkerBox><div class="select_cell pointer ellipsis" ng-repeat="worker in csdStockTransferCtrl.workers" ng-bind=worker.name ng-click=csdStockTransferCtrl.chooseWorkerName(worker)>默认按钮</div></div></div><div class=float_right style="margin-right: 20px"><div class="fbonce_bookConfirmBtn pointer" ng-click=csdStockTransferCtrl.print() style="margin-bottom: 0">打印</div></div><div class=float_right style="margin-right: 20px"><div class="fbonce_bookConfirmBtn pointer" ng-click=csdStockTransferCtrl.export() style="margin-bottom: 0">导出</div></div><div class=float_right style="margin-right: 20px"><div class="fbonce_bookConfirmBtn pointer" ng-show="csdStockTransferCtrl.searchWorker&&csdStockTransferCtrl.products.length>0" ng-click=csdStockTransferCtrl.transfer() style="margin-bottom: 0">确认交接</div><div class=fbonce_bookConfirmBtn ng-hide="csdStockTransferCtrl.searchWorker&&csdStockTransferCtrl.products.length>0" style="background: #d3dce6;margin-bottom: 0">确认交接</div></div></div></div><div><div class=cancelTable style="width: 114rem"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style="width:25rem;text-indent: 20px">商品码</div><div class="cancelTh ellipsis" style=width:25rem>商品名称</div><div class="cancelTh ellipsis" style=width:25rem>商品类别</div><div class="cancelTh ellipsis" style=width:25rem>库存数量</div></div><div class=cancelTr ng-repeat="product in csdStockTransferCtrl.products" ng-show="csdStockTransferCtrl.products.length>0"><div class="cancelTd ellipsis" style="width:25rem;text-indent: 20px" ng-bind=product.misCode></div><div class="cancelTd ellipsis" style=width:25rem ng-bind=product.name></div><div class="cancelTd ellipsis" style=width:25rem ng-bind=product.categoryName></div><div class="cancelTd ellipsis" style=width:25rem ng-bind=product.quantity></div></div><div class=cancelTr ng-hide="csdStockTransferCtrl.products.length>0"><div class="cancelTd ellipsis" style="width:100rem;text-align: center;color:#20a0ff">暂无需交接库存</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="csdStockTransferCtrl.pagination.numPages > 1" total-items=csdStockTransferCtrl.pagination.totalItems ng-model=csdStockTransferCtrl.pagination.page items-per-page=csdStockTransferCtrl.pagination.itemsPerPage max-size=csdStockTransferCtrl.pagination.maxSize boundary-links="{{csdStockTransferCtrl.pagination.numPages > 2}}" rotate=false num-pages=csdStockTransferCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=csdStockTransferCtrl.pageChanged()></pagination></div></div></div></div></div><div style="width: 0;height: 0;overflow: hidden"><table id=alltable><tr><td colspan=6><span>柜员库存表</span></td></tr><tr><td>柜员</td><td>商品名称</td><td>商品类别</td><td>库存数量</td><td>进货单价</td><td>销售单价</td></tr><tr ng-repeat="product in csdStockTransferCtrl.exportProducts"><td ng-bind="product._worker?product.workerName:\'暂无柜员\'"></td><td ng-bind=product.name></td><td ng-bind=product.categoryName></td><td ng-bind=product.quantity></td><td ng-bind=product.purchasePrice></td><td ng-bind=product.price></td></tr></table></div><!-- 成功提示 --><div class=bgGary ng-show=csdStockTransferCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=csdStockTransferCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="csdStockTransferCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=csdStockTransferCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=csdStockTransferCtrl.wordERR title={{csdStockTransferCtrl.wordERR}}>22212</div><div class=promptClose ng-click=csdStockTransferCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=csdStockTransferCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=csdStockTransferCtrl.wordWARN title={{csdStockTransferCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'),
            a.put("app/data/data.html", '<div id=pie1 style="width: 600px;height:400px"></div><!--柱状图--><div id=id0001 style="width: 100%;height: 400px; padding: 0;margin: 0; border-width: 0"></div><script src=assets/lib/angular-echarts/dist/angular-echarts.js></script><script src=assets/lib/echarts/dist/echarts.min.js></script>'), a.put("app/data/newdata.html", '<style>.grad {\n      background: -webkit-linear-gradient(top,rgba(28,40,108,1),rgba(13,9,69,1)); /* Safari 5.1 - 6 */\n      background: -o-linear-gradient(bottom,rgba(28,40,108,1),rgba(13,9,69,1)); /* Opera 11.1 - 12*/\n      background: -moz-linear-gradient(bottom,rgba(28,40,108,1),rgba(13,9,69,1)); /* Firefox 3.6 - 15*/\n      background: linear-gradient(to bottom, rgba(28,40,108,1), rgba(13,9,69,1)); /* 标准的语法 */\n    }</style><div style=width:1920px;height:1080px class=grad><div style="padding:25px 24px"><div><div class=float_left style="width:60px;height:100px;color:#fff;background:rgba(0,0,0,0.20);font-size:20px;font-weight:700;line-height:34px;padding:17px 0 0 19px;margin-right:16px"><div>总</div><div>览</div></div><div class=float_left style=width:1796px;height:100px;color:#fff;background:rgba(0,0,0,0.20);font-size:24px><div class=float_left style=width:462px><img class=float_left src=assets/images/mp.png style="height:68px;width:6;margin:16px 0 0 24px"><div class=float_left style="margin:25px 0 0 12px;font-size:16px"><div>累计运动人数</div><div style=margin-top:10px><span style=font-size:34px;font-weight:700 ng-bind=dataCtrl.memberNum>200</span> <span>人</span></div></div></div><div class=float_left style=width:462px><img class=float_left src=assets/images/mp.png style="height:68px;width:6;margin:16px 0 0 24px"><div class=float_left style="margin:25px 0 0 12px;font-size:16px"><div>累计会员</div><div style=margin-top:10px><span style=font-size:34px;font-weight:700 ng-bind=dataCtrl.addSport>200</span> <span>人</span></div></div></div><div class=float_left style=width:350px><img class=float_left src=assets/images/mp.png style="height:68px;width:6;margin:16px 0 0 24px"><div class=float_left style="margin:25px 0 0 12px;font-size:16px"><div>累计服务请求</div><div style=margin-top:10px><span style=font-size:34px;font-weight:700 ng-bind=dataCtrl.addTot>200</span> <span>元</span></div></div></div><div class=float_right style="margin:25px 20px 0 0"><div style=color:#ff6969;font-size:24px><span ng-bind=dataCtrl.name></span><span>智慧场馆数据</span></div><div style=color:#ff6969;font-size:16px;text-align:right;margin-top:14px ng-bind="newdataCtrl.date | date:\'yyyy-MM-dd\'">2018-03-01</div></div></div></div><div class=clear></div><div style=width:1920px;margin-top:25px><div class=float_left style="width:60px;height:640px;color:#fff;background:rgba(0,0,0,0.20);font-size:20px;font-weight:700;line-height:40px;padding:230px 0 0 20px;margin-right:16px"><div>今</div><div>日</div><div>统</div><div>计</div></div><div class=float_left style=width:1796px;color:#fff;margin-right:10px><div style=width:1796px><div class=float_left style="width:600px;height:360px;padding:16px 0 0 25px;font-size:18px;background:rgba(0,0,0,0.20)"><div>项目运动人数</div><div id=pie1 style=width:550px;height:300px></div></div><div class=float_left style="width:600px;height:360px;padding:16px 0 0 25px;font-size:18px;background:rgba(0,0,0,0.20);margin:0 16px"><div>场馆营业收入</div><div id=pie2 style=width:550px;height:300px></div></div><div class=float_left style="width:564px;height:360px;padding:16px 0 0 25px;font-size:18px;background:rgba(0,0,0,0.20)"><div>场馆运动人数</div><div id=bar1 style=width:550px;height:300px></div></div></div><div class=clear></div><div style="height:265px;width:1796px;margin-top:16px;padding:16px 0 0 25px;background:rgba(0,0,0,0.20);font-size:18px"><div>在馆人数</div><div id=line style=width:1796px;height:250px></div></div></div></div><div class=clear></div><div style=margin-top:25px><div class=float_left style="width:60px;height:244px;color:#fff;background:rgba(0,0,0,0.20);font-size:20px;font-weight:700;line-height:40px;padding:40px 0 0 20px;margin-right:16px"><div>月</div><div>度</div><div>统</div><div>计</div></div><div class=float_left style=color:#fff;margin-right:10px><div style=height:244px;width:890px;background:rgba(0,0,0,0.20)><div style="padding:16px 0 0 25px;font-size:18px;line-height:22px">运动人数</div><div id=bar2 style=width:890px;height:240px></div></div></div><div class=float_left style=color:#fff><div style=height:244px;width:890px;background:rgba(0,0,0,0.20)><div style="padding:16px 0 0 25px;font-size:18px;line-height:22px">营业收入</div><div id=bar3 style=width:890px;height:240px></div></div></div></div></div></div>'), a.put("app/fieldmanager/field/cancel/field-book-cancel.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-field-book.once>单次预订</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-field-longbook>长包预订</div><div class="field_titleNormal field_titleChoose">预订撤销</div></div><div class=field_bookBoxPostition><div style="margin-top: 20px"><div class=field_selectBox style="position: relative;width:auto;width: 106rem;height: 122px;min-width:1500px;background: #EFF2F7;border:1px solid #ccc;border-radius: 5px"><div style="float:left;width: 30rem;min-width:420px;height: 120px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">预订人：</div><div style="float: left;margin-top: 12px;background: #fff"><div style="float: left" id=search class="xt_searchBox float_left"><input class=xt_searchInput style="text-indent: 10px" placeholder=预订人名称/手机号 ng-model=fmFieldCancelBookCtrl.searchOrderName><div class=xt_searchImage ng-click=fmFieldCancelBookCtrl.searchOrder()></div></div><div class=clear></div></div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">备注：</div><div style="float: left;margin-top: 12px;background: #fff"><div style="float: left" id=search class="xt_searchBox float_left"><input class=xt_searchInput style="text-indent: 10px" placeholder=请输入备注 ng-model=fmFieldCancelBookCtrl.searchOrderRemark><div class=xt_searchImage ng-click=fmFieldCancelBookCtrl.searchOrder()></div></div><div class=clear></div></div></div></div><div style="float:left;width: 30rem;min-width:420px;height: 120px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">场次时间：</div><div class="input_calendar float_left" style="margin-top: 12px;background: #fff"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="fmFieldCancelBookCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="fmFieldCancelBookCtrl.showChooseStartDateBox=!fmFieldCancelBookCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=fmFieldCancelBookCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=fmFieldCancelBookCtrl.closeChooseStartDateBox() ng-date=fmFieldCancelBookCtrl.startDate></datetimepick></div></div><div class="input_calendar float_left" style="margin-top: 12px;background: #fff;margin-left: 10px"><div class=input_calendar_showBox><div class=input_calendar_show style="{{fmFieldCancelBookCtrl.endDate==\'结束时间\'?\'\':\'color:#1f2d3d\';}}" ng-bind="fmFieldCancelBookCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="fmFieldCancelBookCtrl.showChooseEndDateBox=!fmFieldCancelBookCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=fmFieldCancelBookCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=fmFieldCancelBookCtrl.closeChooseEndDateBox() ng-date=fmFieldCancelBookCtrl.endDate></datetimepick></div></div><div class=clear></div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">显示设置：</div><div><div style="width: 16px;height: 16px;float: left;border-radius: 5px;margin-top: 22px;cursor: pointer" class={{fmFieldCancelBookCtrl.nowImage}} ng-click=fmFieldCancelBookCtrl.chooseNowOrderList()></div><div style="float: left;color:#8F99A6;margin-left: 10px">显示当前时间</div></div><div style="float: left;color:#8F99A6;width: 80px;margin-left: 20px">显示条数：</div><div style="float: left;color:#20a0ff"><div style="float: left;position: relative"><div style="text-align: center;padding: 0 3px" ng-bind=fmFieldCancelBookCtrl.showPageName>50</div><div style="position: absolute;top:40px;width: 40px;min-height: 24px;border:1px solid #ccc;background: #fff;z-index: 60" ng-show=fmFieldCancelBookCtrl.showChoosePageBox><div style="height: 24px;line-height: 24px;text-align: center;cursor: pointer" ng-repeat="page in fmFieldCancelBookCtrl.pageArr" ng-bind=page.name ng-click=fmFieldCancelBookCtrl.choosePageName(page)>10</div></div></div><div style="float: left;background: url(../../assets/images/downsmall.png) no-repeat 0px 26.5px;width: 12px;height: 60px;cursor: pointer" ng-click="fmFieldCancelBookCtrl.showChoosePageBox=!fmFieldCancelBookCtrl.showChoosePageBox"></div></div><div class=clear></div></div></div><div style="float:left;width: 45rem;min-width:480px;height: 120px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 120px">场馆&项目&场地：</div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmFieldCancelBookCtrl.showVenueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmFieldCancelBookCtrl.showVenueName ng-click="fmFieldCancelBookCtrl.showChooseVenueBox=!fmFieldCancelBookCtrl.showChooseVenueBox">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=fmFieldCancelBookCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in fmFieldCancelBookCtrl.venues" ng-bind=venue.name ng-click=fmFieldCancelBookCtrl.chooseVenueName(venue)>默认按钮</div></div></div><div class="select fbonce_select" style="float: left;margin-top: 12px;background: #fff"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmFieldCancelBookCtrl.showItemName==\'选择项目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmFieldCancelBookCtrl.showItemName ng-click="fmFieldCancelBookCtrl.showChooseItemBox=!fmFieldCancelBookCtrl.showChooseItemBox">项目1</div></div><div class=form_select_div style="position: relative;z-index: 200" ng-show=fmFieldCancelBookCtrl.showChooseItemBox><div class="select_cell pointer ellipsis" ng-repeat="item in fmFieldCancelBookCtrl.items" ng-bind=item.name ng-click=fmFieldCancelBookCtrl.chooseItemName(item)>默认按钮</div></div></div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmFieldCancelBookCtrl.showFieldName==\'选择场地\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmFieldCancelBookCtrl.showFieldName ng-click="fmFieldCancelBookCtrl.showChooseFieldBox=!fmFieldCancelBookCtrl.showChooseFieldBox">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=fmFieldCancelBookCtrl.showChooseFieldBox><div class="select_cell pointer ellipsis" ng-repeat="field in fmFieldCancelBookCtrl.fields" ng-bind=field.name ng-click=fmFieldCancelBookCtrl.chooseFieldName(field)>默认按钮</div></div></div><div class=clear></div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div class="button2_normal float_left" ng-click=fmFieldCancelBookCtrl.openCancelOrders() ng-show="fmFieldCancelBookCtrl.cancelOrderIdArr.length>0" style="margin-top: 12px">批量退订</div><div class="button2_normal float_left" style="background: #c0ccda;cursor: text;margin-top: 12px" ng-hide="fmFieldCancelBookCtrl.cancelOrderIdArr.length>0">批量退订</div></div></div></div><div class=clear></div></div><div><div class=cancelTable style="min-width: 1280px;width: 113rem;position: relative;z-index: 5"><div class="cancelThTr height_40"><div class="cancelTh ellipsis" style=width:4rem><div style="width: 16px;height: 16px;border-radius: 5px;margin-top: 7px;margin-left: 12px;cursor: pointer" class={{fmFieldCancelBookCtrl.allImage}} ng-click=fmFieldCancelBookCtrl.chooseCancelOrderAll()></div></div><div class="cancelTh ellipsis" style=width:9rem>预订人</div><div class="cancelTh ellipsis" style=width:14rem ng-click="fmFieldCancelBookCtrl.sortBy(fmFieldCancelBookCtrl.sortByKey==\'timeUp\'?\'timeDown\':\'timeUp\')"><div class=ellipsis style="float:left;max-width: 90px">场次时间</div><div class=upAndDown></div></div><div class=cancelTh style="width:12rem;position: relative"><div ng-click="fmFieldCancelBookCtrl.showChooseStateBox=!fmFieldCancelBookCtrl.showChooseStateBox"><div class=ellipsis style="float:left;max-width: 90px" ng-bind=fmFieldCancelBookCtrl.showStateName>订单状态</div><div class=downBtn></div></div><div class="form_select_div finance_selectBox" ng-show=fmFieldCancelBookCtrl.showChooseStateBox><div class="select_cell pointer ellipsis" ng-repeat="state in fmFieldCancelBookCtrl.states" ng-bind=state.name ng-click=fmFieldCancelBookCtrl.chooseStateName(state)>默认按钮</div></div></div><div class="cancelTh ellipsis" style=width:10rem ng-click="fmFieldCancelBookCtrl.sortBy(fmFieldCancelBookCtrl.sortByKey==\'orderUp\'?\'orderDown\':\'orderUp\')"><div class=ellipsis style="float:left;max-width: 90px">订单时间</div><div class=upAndDown></div></div><div class="cancelTh ellipsis" style=width:9rem>场馆名称</div><div class="cancelTh ellipsis" style=width:9rem>场地名称</div><div class="cancelTh ellipsis" style=width:9rem>备注</div><div class="cancelTh ellipsis" style=width:7rem><div ng-click="fmFieldCancelBookCtrl.showChooseFromBox=!fmFieldCancelBookCtrl.showChooseFromBox"><div class=ellipsis style="float:left;max-width: 90px" ng-bind=fmFieldCancelBookCtrl.showFromName>订单来源</div><div class=downBtn></div></div><div class="form_select_div finance_selectBox" ng-show=fmFieldCancelBookCtrl.showChooseFromBox><div class="select_cell pointer ellipsis" ng-repeat="from in fmFieldCancelBookCtrl.froms" ng-bind=from.name ng-click=fmFieldCancelBookCtrl.chooseFromName(from)>默认按钮</div></div></div><div class="cancelTh ellipsis" style=width:7rem>预订金额</div><div class="cancelTh ellipsis" style=width:7rem>入场码</div><div class="cancelTh ellipsis" style=width:14rem>操作</div></div><div class=cancelTr ng-repeat="order in fmFieldCancelBookCtrl.orders"><div class="cancelTd ellipsis" style=width:4rem><div style="width: 16px;height: 16px;border-radius: 5px;margin-top: 15px;margin-left: 12px;cursor: pointer" class={{order.image}} ng-click=fmFieldCancelBookCtrl.chooseCancelOrder(order)></div></div><div class="cancelTd ellipsis pointer" ui-sref=org-member-detail.info({id:order._member}) style=width:9rem ng-bind=order.name title={{order.name}}></div><div class="cancelTd ellipsis" style=width:14rem><span ng-bind="(order.startDate | date:\'yyyy-MM-dd\')+\' \'+order.showDate" title="{{(order.startDate | date:\'yyyy-MM-dd\')+\' \'+order.showDate}}"></span> <span ng-show=order.openInvoice style="color:#20a0ff;font-size: 12px;margin-left: 10px">已开票</span></div><div class="cancelTd ellipsis" style=width:12rem><div ng-show="order.state==\'已过期\'"><div style="float: left;width: 8px;height: 8px;border-radius: 8px;margin-top: 18px;background: #C0CCDA"></div><span style="margin-left: 10px" ng-bind=order.state></span></div><div ng-show="order.state==\'已消费\'" title="{{\'(\'+(order.openDate | date:\'yyyy-MM-dd hh:mm\')+\')\'}}"><div style="float: left;width: 8px;height: 8px;border-radius: 8px;margin-top: 18px;background: #C0CCDA"></div><span style="margin-left: 10px" ng-bind=order.state></span> <span ng-bind="\'(\'+(order.openDate | date:\'yyyy-MM-dd hh:mm\')+\')\'"></span></div><div ng-show="order.state==\'未消费\'"><div style="float: left;width: 8px;height: 8px;border-radius: 8px;margin-top: 18px;background: #13CE66"></div><span style="margin-left: 10px" ng-bind=order.state></span></div><div ng-show="order.state==\'已撤销\'" title="{{order.cancelDate?\'(\'+(order.cancelDate | date:\'yyyy-MM-dd hh:mm\')+\')\':\'\'}}"><div style="float: left;width: 8px;height: 8px;border-radius: 8px;margin-top: 18px;background: #ff4949"></div><span style="margin-left: 10px" ng-bind=order.state></span> <span ng-bind="order.cancelDate?\'(\'+(order.cancelDate | date:\'yyyy-MM-dd hh:mm\')+\')\':\'\'"></span></div></div><div class="cancelTd ellipsis" style=width:10rem ng-bind="order.createDate | date:\'yyyy-MM-dd HH:mm:ss\'" title="{{order.createDate | date:\'yyyy-MM-dd HH:mm:ss\'}}"></div><div class="cancelTd ellipsis" style=width:9rem ng-bind=order.venueName></div><div class="cancelTd ellipsis" style=width:9rem ng-bind=order.fieldName></div><div class="cancelTd ellipsis pointer" style=width:9rem ng-bind="order.remark?order.remark:\'暂无备注\'" title="{{(order.remark?order.remark:\'暂无备注\')+\',请点击修改\'}}" ng-click=fmFieldCancelBookCtrl.openShowOrderRemark(order)></div><div class="cancelTd ellipsis" style=width:7rem ng-bind=order.form></div><div class="cancelTd ellipsis" style=width:7rem><span ng-bind="order.cost | currency:\'\'"></span> <span ng-show=order.penalty ng-bind="\'(违约金：\'+order.penalty+\'元)\'" style="color:#ff4949;margin-left: 10px"></span></div><div class="cancelTd ellipsis" style=width:7rem ng-bind=order.code></div><div class="cancelTd ellipsis" style=width:14rem><span class=pointer style="color:#20a0ff;margin-right: 10px" ng-show="order.openState==\'canOpen\'&&!order.isCancel&&!order.openDate" ng-click=fmFieldCancelBookCtrl.openField(order)>开场</span> <span class=pointer style="color:#99a9bf;margin-right: 10px" ng-show="order.refundState==\'can\'&&!order.isCancel" ng-click=fmFieldCancelBookCtrl.openCancelOnce(order)>退订</span> <span class=pointer style="color:#99a9bf;margin-right: 10px" ng-click=fmFieldCancelBookCtrl.printOrder(order)>打印</span> <span class=pointer style=color:#99a9bf ng-show=!order.openInvoice ng-click=fmFieldCancelBookCtrl.drawBill(order)>开票</span></div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="fmFieldCancelBookCtrl.pagination.numPages > 1" total-items=fmFieldCancelBookCtrl.pagination.totalItems ng-model=fmFieldCancelBookCtrl.pagination.page items-per-page=fmFieldCancelBookCtrl.pagination.itemsPerPage max-size=fmFieldCancelBookCtrl.pagination.maxSize boundary-links="{{fmFieldCancelBookCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmFieldCancelBookCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmFieldCancelBookCtrl.pageChanged()></pagination></div></div></div></div></div></div><!-- 修改订单备注 --><div class=bgGary ng-show=fmFieldCancelBookCtrl.showOrderRemark><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">修改备注</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmFieldCancelBookCtrl.showOrderRemark=false;"></div><div class=clear></div><div class=form_error_font></div><div style=margin-top:10px><div class="form_key float_left form_key_margin">订单备注</div><input class="form_value float_left form_value_width" placeholder=请输入订单备注 ng-model=fmFieldCancelBookCtrl.order.remark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmFieldCancelBookCtrl.updateRemark()>确认</div><div class="button_normal float_right" ng-click="fmFieldCancelBookCtrl.showOrderRemark=false;">取消</div><div class=clear></div></div></div></div></div><!-- 撤销单次 --><div class=bgGary ng-show=fmFieldCancelBookCtrl.showBasicInfoBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">退订</div><img src=assets/images/close.png class="float_right pointer" ng-click=fmFieldCancelBookCtrl.close()></div><div class=clear></div><div class=form_error_font></div><div ng-show=fmFieldCancelBookCtrl.sendFlag><div class="form_key float_left form_key_margin"><span>退场码</span><span style=color:#fff>的</span></div><div class="float_left form_value_width" style="border:1px solid #ddd;border-radius:4px"><input class="form_value float_left" style="border:0;width: 275px" placeholder=请向场地管理员索要入场码 ng-model=fmFieldCancelBookCtrl.sendNum> <span style="margin:12px 5px 0 0;color:#00a1ff" class="pointer float_right" ng-click=fmFieldCancelBookCtrl.openChooseFieldWork()>点击发送</span></div></div><div class=clear></div><div class=form_error_font></div><div class=float_left><div class="form_key float_left form_key_margin">退款方式</div><div class=singleChoose_option ng-repeat="type in fmFieldCancelBookCtrl.refundTypes" ng-click=fmFieldCancelBookCtrl.chooseRefundType(type)><div class="singleChoose_imageBox {{type.image}}"></div><div class=singleChoose_prompt ng-bind=type.name>按预订价退还</div></div></div><div class=clear></div><div style=margin-top:10px ng-show="!fmFieldCancelBookCtrl.showRefundPrice && fmFieldCancelBookCtrl.rPriceFlag"><div class="form_key float_left form_key_margin">预订金额</div><div class="form_value float_left form_value_width" style=border:none ng-bind=fmFieldCancelBookCtrl.rPrice></div></div><div class=clear></div><div style=margin-top:10px ng-show=fmFieldCancelBookCtrl.showRefundPrice><div class="form_key float_left form_key_margin">自定金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=fmFieldCancelBookCtrl.refundPrice></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=fmFieldCancelBookCtrl.cancelOnce()>确认撤销</div><div class="button_normal float_right" ng-click=fmFieldCancelBookCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmFieldCancelBookCtrl.sendToFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">选择场馆管理员</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmFieldCancelBookCtrl.sendToFlag = false"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">场馆管理</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!fmFieldCancelBookCtrl.chooseObjectFlag,\'select_foucs\':fmFieldCancelBookCtrl.chooseObjectFlag}" ng-click="fmFieldCancelBookCtrl.chooseObjectFlag = !fmFieldCancelBookCtrl.chooseObjectFlag"><div class="form_down_icon form_width_354 form_select_value_choose" style=width:345px ng-bind=fmFieldCancelBookCtrl.objectName></div><div class="form_select_div form_width_354" style=width:345px ng-show=fmFieldCancelBookCtrl.chooseObjectFlag><div ng-click=fmFieldCancelBookCtrl.chooseObject(object) class="select_cell pointer" ng-repeat="object in fmFieldCancelBookCtrl.users" ng-bind=object.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmFieldCancelBookCtrl.send()>完成</div><div class="button_normal float_right" ng-click="fmFieldCancelBookCtrl.sendToFlag = false">取消</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=fmFieldCancelBookCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmFieldCancelBookCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="fmFieldCancelBookCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmFieldCancelBookCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=fmFieldCancelBookCtrl.wordERR>22212</div><div class=promptClose ng-click="fmFieldCancelBookCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmFieldCancelBookCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=fmFieldCancelBookCtrl.wordWARN>22212</div><div class=promptClose ng-click=fmFieldCancelBookCtrl.closePrompt()></div></div></div></div><div class=bgGary ng-show=fmFieldCancelBookCtrl.promptDELETE><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmFieldCancelBookCtrl.closePrompt()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:25px;color:#8181b4 ng-bind=fmFieldCancelBookCtrl.wordDELETE></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmFieldCancelBookCtrl.closePrompt()>取消</div><div class="button_normal float_right" ng-click=fmFieldCancelBookCtrl.cancelOrders()>继续撤销</div><div class=clear></div></div></div></div></div>'), a.put("app/fieldmanager/field/long/field-book-long.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-field-book.once>单次预订</div><div class="field_titleNormal field_titleChoose">长包预订</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-field-cancelbook>预订撤销</div></div><div class=field_bookBoxPostition><div style="margin-top: 20px"><div class=field_selectBox style="position: relative;width:auto;width: 106rem;height: 262px;min-width:1500px;background: #EFF2F7;border:1px solid #ccc;border-radius: 5px"><div style="float:left;width: 30rem;min-width:420px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 60px;text-align: right">预订人：</div><input style="float: left;margin-top: 12px;background: #fff;width: 230px;border:1px solid #cad4e0" class="form_value float_left form_value_width" placeholder=请输入预订方名称 ng-model=fmFieldLongBookCtrl.long_name></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 60px;text-align: right">场馆：</div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff;width: 230px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmFieldLongBookCtrl.showVenueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmFieldLongBookCtrl.showVenueName ng-click="fmFieldLongBookCtrl.showChooseVenueBox=!fmFieldLongBookCtrl.showChooseVenueBox">场馆1</div></div><div style="position: relative;z-index: 300" class=form_select_div ng-show=fmFieldLongBookCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in fmFieldLongBookCtrl.venues" ng-bind=venue.name ng-click=fmFieldLongBookCtrl.chooseVenueName(venue)>默认按钮</div></div></div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 60px;text-align: right">日期：</div><div class="input_calendar float_left" style="margin-top: 12px;background: #fff"><div class=input_calendar_showBox><div class=input_calendar_show style="color:#1f2d3d;width: 110px" ng-bind="fmFieldLongBookCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="fmFieldLongBookCtrl.showChooseStartDateBox=!fmFieldLongBookCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=fmFieldLongBookCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=fmFieldLongBookCtrl.long_closeChooseStartDateBox() ng-date=fmFieldLongBookCtrl.startDate></datetimepick></div></div><div class="input_calendar float_left" style="margin-top: 12px;background: #fff;margin-left: 10px"><div class=input_calendar_showBox><div class=input_calendar_show style="color:#1f2d3d;width: 110px" ng-bind="fmFieldLongBookCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="fmFieldLongBookCtrl.showChooseEndDateBox=!fmFieldLongBookCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=fmFieldLongBookCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=fmFieldLongBookCtrl.long_closeChooseEndDateBox() ng-date=fmFieldLongBookCtrl.endDate></datetimepick></div></div><div class=clear></div></div><div style="height: 80px;line-height: 60px;padding-left: 20px"><div class=field_bookConfirmBtn ng-hide="fmFieldLongBookCtrl.searchVenueId&&fmFieldLongBookCtrl.searchItemId&&fmFieldLongBookCtrl.showTimesArr.length>0&&(fmFieldLongBookCtrl.searchKey==\'day\'||(fmFieldLongBookCtrl.searchKey==\'week\'&&fmFieldLongBookCtrl.searchValueArr.length>0)||(fmFieldLongBookCtrl.searchKey==\'month\'&&fmFieldLongBookCtrl.searchValueArr.length>0))&&fmFieldLongBookCtrl.long_orderType&&fmFieldLongBookCtrl.long_name&&fmFieldLongBookCtrl.long_tel" style="width:150px;margin-top:20px;background: #d3dce6">查询可预订场地</div><div class="field_bookConfirmBtn pointer" ng-show="fmFieldLongBookCtrl.searchVenueId&&fmFieldLongBookCtrl.searchItemId&&fmFieldLongBookCtrl.showTimesArr.length>0&&(fmFieldLongBookCtrl.searchKey==\'day\'||(fmFieldLongBookCtrl.searchKey==\'week\'&&fmFieldLongBookCtrl.searchValueArr.length>0)||(fmFieldLongBookCtrl.searchKey==\'month\'&&fmFieldLongBookCtrl.searchValueArr.length>0))&&fmFieldLongBookCtrl.long_orderType&&fmFieldLongBookCtrl.long_name&&fmFieldLongBookCtrl.long_tel" style=width:150px;margin-top:20px ng-click=fmFieldLongBookCtrl.checkField()>查询可预订场地</div></div></div><div style="float:left;width: 30rem;min-width:420px"><div style="height: 60px;line-height: 60px;padding-left: 10px"><div style="float: left;color:#8F99A6;width: 79px">联系方式：</div><input style="float: left;margin-top: 12px;background: #fff;width: 230px;border:1px solid #cad4e0" class="form_value float_left form_value_width" placeholder=请输入联系方式 ng-model=fmFieldLongBookCtrl.long_tel></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 50px">项目：</div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff;width: 230px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmFieldLongBookCtrl.showItemName==\'选择项目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmFieldLongBookCtrl.showItemName ng-click="fmFieldLongBookCtrl.showChooseItemBox=!fmFieldLongBookCtrl.showChooseItemBox">项目1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=fmFieldLongBookCtrl.showChooseItemBox><div class="select_cell pointer ellipsis" ng-repeat="item in fmFieldLongBookCtrl.items" ng-bind=item.name ng-click=fmFieldLongBookCtrl.chooseItemName(item)>默认按钮</div></div></div></div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 50px">频率：</div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff;width: 80px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmFieldLongBookCtrl.showValueName==\'选择频率\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmFieldLongBookCtrl.showValueName ng-click="fmFieldLongBookCtrl.showChooseValueBox=!fmFieldLongBookCtrl.showChooseValueBox">项目1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=fmFieldLongBookCtrl.showChooseValueBox><div class="select_cell pointer ellipsis" ng-repeat="value in fmFieldLongBookCtrl.long_values" ng-bind=value.name ng-click=fmFieldLongBookCtrl.long_chooseValue(value)>默认按钮</div></div></div><div class="select field_select" ng-show=fmFieldLongBookCtrl.showChooseWeekDayBox style="float: left;margin-top: 12px;background: #fff;width: 200px"><div class="form_down_icon form_select_value" ng-click="fmFieldLongBookCtrl.showChooseWeekDaySelect=!fmFieldLongBookCtrl.showChooseWeekDaySelect"><div class=ellipsis ng-bind=fmFieldLongBookCtrl.showWeekDayName style="{{fmFieldLongBookCtrl.showWeekDayName==\'请选择星期几\'?\'\':\'color:#000\';}}">星期</div></div><div style="position: relative;z-index: 40" class=form_select_div ng-show=fmFieldLongBookCtrl.showChooseWeekDaySelect><div class="select_cell pointer ellipsis" style={{day.image}} ng-repeat="day in fmFieldLongBookCtrl.long_weekDays" ng-bind=day.name ng-click=fmFieldLongBookCtrl.chooseWeekDay(day)>默认按钮</div></div></div><div class="select field_select" ng-show=fmFieldLongBookCtrl.showChooseMonthDayBox style="float: left;margin-top: 12px;background: #fff;width: 200px"><div class="form_down_icon form_select_value" ng-click="fmFieldLongBookCtrl.showChooseMonthDaySelect=!fmFieldLongBookCtrl.showChooseMonthDaySelect"><div class=ellipsis ng-bind=fmFieldLongBookCtrl.showMonthDayName style="{{fmFieldLongBookCtrl.showMonthDayName==\'请选择日期\'?\'\':\'color:#000\';}}">天数</div></div><div style="position: relative;z-index: 40" class=form_select_div ng-show=fmFieldLongBookCtrl.showChooseMonthDaySelect><div class="select_cell pointer ellipsis" style={{day.image}} ng-repeat="day in fmFieldLongBookCtrl.long_monthDays" ng-bind=day.value ng-click=fmFieldLongBookCtrl.chooseMonthDay(day)>默认按钮</div></div></div></div></div></div><div style="float:left;width: 45rem;min-width:480px"><div style="height: 60px;line-height: 60px;padding-left: 10px"><div style="float: left;color:#8F99A6;width: 79px">用户备注：</div><input style="float: left;margin-top: 12px;background: #fff;width: 230px;border:1px solid #cad4e0" class="form_value float_left form_value_width" placeholder=请输入长包备注 ng-model=fmFieldLongBookCtrl.long_remark></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 50px">来源：</div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff;width: 230px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmFieldLongBookCtrl.showTypeName==\'选择类型\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmFieldLongBookCtrl.showTypeName ng-click="fmFieldLongBookCtrl.showChooseTypeBox=!fmFieldLongBookCtrl.showChooseTypeBox">场馆1</div></div><div style="position: relative;z-index: 250" class=form_select_div ng-show=fmFieldLongBookCtrl.showChooseTypeBox><div class="select_cell pointer ellipsis" ng-repeat="type in fmFieldLongBookCtrl.long_orderTypeArr" ng-bind=type.name ng-click=fmFieldLongBookCtrl.long_chooseOrderType(type)>默认按钮</div></div></div></div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 50px">场次：</div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff;width: 120px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmFieldLongBookCtrl.showStartTime==\'选择开始时间\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmFieldLongBookCtrl.showStartTime ng-click="fmFieldLongBookCtrl.showStartTimeBox=!fmFieldLongBookCtrl.showStartTimeBox">场馆1</div></div><div style="position: relative;z-index: 300" class=form_select_div ng-show=fmFieldLongBookCtrl.showStartTimeBox><div class="select_cell pointer ellipsis" ng-repeat="time in fmFieldLongBookCtrl.times" ng-bind=time.showDate ng-click=fmFieldLongBookCtrl.chooseStartTime(time)>默认按钮</div></div></div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff;width: 120px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmFieldLongBookCtrl.showEndTime==\'选择结束时间\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmFieldLongBookCtrl.showEndTime ng-click="fmFieldLongBookCtrl.showEndTimeBox=!fmFieldLongBookCtrl.showEndTimeBox">场馆1</div></div><div style="position: relative;z-index: 300" class=form_select_div ng-show=fmFieldLongBookCtrl.showEndTimeBox><div class="select_cell pointer ellipsis" ng-repeat="time in fmFieldLongBookCtrl.times" ng-bind=time.showDate ng-click=fmFieldLongBookCtrl.chooseEndTime(time)>默认按钮</div></div></div><div class=clear></div></div></div></div></div><div class=clear></div></div></div><div ng-show="fmFieldLongBookCtrl.showResult.length>0"><div class=cancelTable style="width: 106rem;margin-left: 30px;max-height: 500px;overflow-y: auto"><div class="cancelThTr height_40" style="font-size: 15px"><div class="cancelTh width_4 ellipsis"><div style="width: 16px;height: 16px;border-radius: 5px;margin-top: 7px;margin-left: 12px;cursor: pointer" class={{fmFieldLongBookCtrl.chooseAll}} ng-click=fmFieldLongBookCtrl.changeAllChoose()></div></div><div class="cancelTh width_16 ellipsis">日期</div><div class="cancelTh width_16 ellipsis">场次开始时间</div><div class="cancelTh width_16 ellipsis">场次结束时间</div><div class="cancelTh width_16 ellipsis">场地</div><div class="cancelTh width_16 ellipsis">项目</div><div class="cancelTh width_16 ellipsis" style=color:#ff4949><span>已选择</span> <span ng-bind=fmFieldLongBookCtrl.showResult.length-fmFieldLongBookCtrl.cancelDocArr.length></span> <span>场地</span></div></div><div class=cancelTr ng-repeat="doc in fmFieldLongBookCtrl.showResult"><div class="cancelTd width_4 ellipsis"><div style="width: 16px;height: 16px;border-radius: 5px;margin-top: 15px;margin-left: 12px;cursor: pointer" class={{doc.choose}} ng-click=fmFieldLongBookCtrl.changeChoose(doc)></div></div><div class="cancelTd width_16 ellipsis" ng-bind="doc.startDate | date:\'yyyy-MM-dd\'">预订时间</div><div class="cancelTd width_16 ellipsis" ng-bind="doc.startDate | date:\'HH:mm\'"></div><div class="cancelTd width_16 ellipsis" ng-bind="doc.endDate | date:\'HH:mm\'"></div><div class="cancelTd width_16 ellipsis" ng-bind=doc.fieldName></div><div class="cancelTd width_16 ellipsis" ng-bind=doc.itemNames[0]></div><div class="cancelTd width_16 ellipsis"></div></div></div><div style="width: 106rem;margin-left: 30px"><div class="field_bookConfirmBtn float_left pointer" style="width:60px;height:36px;line-height: 36px" ng-click=fmFieldLongBookCtrl.createLong()>提交</div><!-- <div class="field_bookConfirmBtn float_left pointer" style="width:60px;height:36px;line-height: 36px;margin-left: 20px;color: #000;background: #fff;border:1px solid #ccc;" ng-click="fmFieldLongBookCtrl.addCancelDoc()">删除</div> --><div class="field_bookConfirmBtn float_left pointer" style="width:60px;height:36px;line-height: 36px;margin-left: 20px;color: #000;background: #fff;border:1px solid #ccc" ng-click=fmFieldLongBookCtrl.deleteDoc()>清空</div></div></div></div></div></div></div><!-- 长包可预订场地列表,第一步 --><div class=bgGary ng-show=fmFieldLongBookCtrl.BlongFirst><div class=middle><div id=box class="long_form_div center"><div class=form_padding><div class=long_form_div_titleBox><div class=long_form_div_title>可预订场地</div><div class=long_form_div_close ng-click="fmFieldLongBookCtrl.BlongFirst=false"></div><!-- <img src="assets/images/close.png" class="float_right pointer" ng-click="fmFieldLongBookCtrl.close()"> --></div><div class=long_table><div class=long_tr><div class="long_th width_130 ellipsis">场地名称</div><div class="long_th width_130 ellipsis">预订状态</div><div class="long_th width_130 ellipsis">操作</div></div><div class=long_tr ng-repeat="field in fmFieldLongBookCtrl.longFields"><div class="long_td width_130 ellipsis" ng-bind=field.name>11111111</div><div class="long_td width_130 ellipsis" style="{{field.conflictCount==0?\'\':\'color:#99a9bf\';}}" ng-bind="field.conflictCount==0?\'空闲\':(field.conflictCount +\'个场次被预订\')">111111111111</div><div class="long_td width_130 ellipsis pointer" style=color:#20a0ff ng-show="field.conflictCount==0" ng-click=fmFieldLongBookCtrl.openBlongFouth(field)>预订</div><div class="long_td width_130 ellipsis pointer" style=color:#20a0ff ng-show="field.conflictCount>0&&field.conflictCount<4" ng-click=fmFieldLongBookCtrl.openBlongSecond(field)>灵活预订</div><div class="long_td width_130 ellipsis" ng-show="field.conflictCount>3">不可预订</div></div></div></div></div></div></div><!-- 灵活预订,第二步 --><div class=bgGary ng-show=fmFieldLongBookCtrl.BlongSecond><div class=middle><div id=box class="long_form_div center"><div class=form_padding><div class=long_form_div_titleBox><div class=long_form_div_title><div class=long_boxback ng-click=fmFieldLongBookCtrl.backToFirst()></div><div style="float:left;height:40px;line-height: 40px">可预订场地</div></div><div class=long_form_div_close ng-click="fmFieldLongBookCtrl.BlongSecond=false"></div><!-- <img src="assets/images/close.png" class="float_right pointer" ng-click="fmFieldLongBookCtrl.close()"> --></div><div class=long_table><div class=long_tr><div class="long_th width_195 ellipsis">被预定场次</div><div class="long_th width_195 ellipsis">替换场地</div></div><div class=long_tr ng-repeat="result in fmFieldLongBookCtrl.replaceFields"><div class="long_td width_195 ellipsis"><span ng-bind="result.conflictField.startDate | date:\'yyyy/MM/dd\'">111</span> <span></span> <span ng-bind="(result.conflictField.startDate | date:\'HH:mm\')+\'--\'+(result.conflictField.endDate | date:\'HH:mm\')">111</span></div><div style="position: relative" class="long_td width_195"><div class=selectBox><div class=selectWord ng-bind=result.replaceFieldName>111111</div><div class=selectImage ng-click="result.showChooseReplaceFieldBox=!result.showChooseReplaceFieldBox"></div></div><div class=optionBox style="position: relative;z-index: 200" ng-show=result.showChooseReplaceFieldBox><div class=pointer ng-repeat="field in result.recommendField" ng-bind=field.name ng-click=fmFieldLongBookCtrl.chooseReplaceField(field,result)>默认按钮</div></div></div></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmFieldLongBookCtrl.openBlongFouth()>下一步</div><div class="button_normal float_right" ng-click=fmFieldLongBookCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 最终结果信息展示,第四步 --><div class=bgGary ng-show=fmFieldLongBookCtrl.BlongFouth><div class=middle><div id=box class="long_form_div center"><div class=form_padding><!-- <div class="long_form_div_titleBox">\n                    <div class="long_form_div_title">提交到列表</div>\n                    <div class="long_form_div_close" ng-click="fmFieldLongBookCtrl.close()"></div>\n                    <img src="assets/images/close.png" class="float_right pointer" ng-click="fmFieldLongBookCtrl.close()">\n                </div> --><div><div class="form_title float_left"><div class=long_boxback ng-click=fmFieldLongBookCtrl.backToSecond()></div><div style="float:left;height:40px;line-height: 40px">提交到列表</div></div><img src=assets/images/close.png class="float_right pointer" ng-click="fmFieldLongBookCtrl.BlongFouth=false"></div><div class=clear></div><div class=form_error_font></div><div style="color:#475568;font-size: 13px"><div style="border-bottom: 1px solid #d3dce6;padding-bottom: 10px"><div class=resultShowLine><span style="font-size: 16px;margin-right: 10px;color:#20a0ff" ng-bind=fmFieldLongBookCtrl.long_field.name></span> <span ng-bind=fmFieldLongBookCtrl.showVenueName></span> <span ng-bind=fmFieldLongBookCtrl.showItemName></span></div><div class=resultShowLine><span>日期范围：</span> <span ng-bind="fmFieldLongBookCtrl.startDate | date:\'yyyy/MM/dd\'"></span> <span>-</span> <span ng-bind="fmFieldLongBookCtrl.endDate | date:\'yyyy/MM/dd\'"></span></div><div class=resultShowLine><span>具体说明：</span> <span style="margin-right: 3px" ng-bind="fmFieldLongBookCtrl.searchKey==\'day\'?\'每天\':(fmFieldLongBookCtrl.searchKey==\'week\'?\'每周\':\'每月\')"></span> <span style="margin-right: 3px" ng-show="fmFieldLongBookCtrl.searchKey==\'week\'" ng-repeat="value in fmFieldLongBookCtrl.searchValueArr" ng-bind="\'周\'+value"></span> <span style="margin-right: 3px" ng-show="fmFieldLongBookCtrl.searchKey==\'month\'" ng-repeat="value in fmFieldLongBookCtrl.searchValueArr" ng-bind="value+\'日\'"></span></div><div class=resultShowLine><span>场次时间：</span> <span ng-repeat="time in fmFieldLongBookCtrl.showTimesArr" ng-bind="time.showDate+\' \'"></span></div></div><div style="margin-top: 10px" ng-show="fmFieldLongBookCtrl.specialArr.length>0"><div style="margin:5px 0">替换的场地</div><div ng-repeat="field in fmFieldLongBookCtrl.specialArr"><div class=resultShowLine><span style="font-size: 16px;color:#20a0ff" ng-bind=field.name></span> <span ng-bind=fmFieldLongBookCtrl.showVenueName></span> <span ng-bind=fmFieldLongBookCtrl.showItemName></span></div><div class=resultShowLine><span>日期：</span> <span ng-bind="field.startDate | date:\'yyyy/MM/dd\'"></span><!-- <span>-</span>\n                                <span ng-bind="field.endDate | date:\'yyyy/MM/dd\'"></span> --></div><div class=resultShowLine><span>场次时间：</span> <span style="margin-right: 5px" ng-bind="(field.startDate | date:\'HH:mm\')+\'--\'+(field.endDate | date:\'HH:mm\')"></span></div></div></div><div style="border-top:1px solid #d3dce6;width:390px;margin: 10px 0 0 0" ng-show="fmFieldLongBookCtrl.specialArr.length>0"></div><div style="margin-top: 10px"><div class=resultShowLine><span>预订方名称：</span> <span ng-bind=fmFieldLongBookCtrl.long_name></span></div><div class=resultShowLine><span>联系方式：</span> <span ng-bind="fmFieldLongBookCtrl.long_tel?fmFieldLongBookCtrl.long_tel:\'无\'"></span></div><div class=resultShowLine><span>长包备注：</span> <span ng-bind="fmFieldLongBookCtrl.long_remark?fmFieldLongBookCtrl.long_remark:\'无\'"></span></div><!-- <div class="resultShowLine">\n                            <span>预订价格：</span>\n                            <span ng-bind="fmFieldLongBookCtrl.long_price | currency:\'￥\'"></span>\n                        </div> --></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmFieldLongBookCtrl.getResult()>提交到列表</div><div class="button_normal float_right" ng-click=fmFieldLongBookCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=fmFieldLongBookCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmFieldLongBookCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="fmFieldLongBookCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmFieldLongBookCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=fmFieldLongBookCtrl.wordERR>22212</div><div class=promptClose ng-click=fmFieldLongBookCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmFieldLongBookCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=fmFieldLongBookCtrl.wordWARN>22212</div><div class=promptClose ng-click=fmFieldLongBookCtrl.closePrompt()></div></div></div></div>'),
            a.put("app/fieldmanager/field/once/field-book-flexible.html", '<div><div class=field_selectBox style=height:auto><div style="min-width: 1360px"><div class="fbonce_member_InfoBox float_left"><div class=fbonce_m_i_readTelOrCard><div class=fbonce_m_i_r_title>读取用户信息</div><div class=fbonce_m_i_r_contect><input id=cardNoBox class=fbonce_m_i_r_c_input placeholder=请读取会员卡号/二维码 ng-model=fmFieldBookCtrl.memberTelOrCard ng-keypress=fmFieldBookCtrl.enterCheck($event) style=ime-mode:disabled><div ng-show=fmFieldBookCtrl.memberTelOrCard class=fbonce_m_i_r_c_btn ng-click=fmFieldBookCtrl.checkMember()>查询</div><div ng-hide=fmFieldBookCtrl.memberTelOrCard class="fbonce_m_i_r_c_btn bgcolorG">查询</div><div class="fbonce_m_i_r_c_btn bgcolorW borderccc" style="color: #475669" ng-click=fmFieldBookCtrl.resert()>重置</div></div></div><div ng-show=fmFieldBookCtrl.showMemberInfo class=fbonce_m_i_info><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>姓名:</div><div class=fbonce_m_i_i_l_d_value ng-bind=fmFieldBookCtrl.members[0].name>徐涛</div></div><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>现金账户:</div><div class=fbonce_m_i_i_l_d_value ng-bind="fmFieldBookCtrl.members[0].cards[0].total?fmFieldBookCtrl.members[0].cards[0].total:0 | currency:\'￥\'">500元</div></div></div><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>级别:</div><div class=fbonce_m_i_i_l_d_value ng-show=fmFieldBookCtrl.members[0].cards[0].levelDes ng-bind=fmFieldBookCtrl.members[0].cards[0].levelDes>金卡</div><div class=fbonce_m_i_i_l_d_value ng-hide=fmFieldBookCtrl.members[0].cards[0].levelDes>暂无等级</div></div><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>虚拟账户:</div><div class="fbonce_m_i_i_l_d_value ellipsis" title="{{(fmFieldBookCtrl.members[0].virtualAccount.total | currency:\'￥\')+\'(\'+(fmFieldBookCtrl.members[0].virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'}}"><span ng-bind="fmFieldBookCtrl.members[0].virtualAccount.total | currency:\'￥\'">500元(2017-10-28过期)</span> <span ng-show="fmFieldBookCtrl.members[0].virtualAccount.total>0" ng-bind="\'(\'+(fmFieldBookCtrl.members[0].virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'"></span></div></div></div><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>手机号:</div><div class=fbonce_m_i_i_l_d_value ng-bind=fmFieldBookCtrl.members[0].tel>18806712362</div></div><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key style="color: #20a0ff;cursor: pointer" ng-hide=fmFieldBookCtrl.members[0].isReal ng-click="fmFieldBookCtrl.openShowRechargeBox(\'idCard\')">账户认证</div><div class=fbonce_m_i_i_l_d_key style="color: #20a0ff;cursor: pointer" ng-show=fmFieldBookCtrl.members[0].isReal ng-click=fmFieldBookCtrl.openShowRechargeBox()>账户充值</div></div></div></div><div ng-hide=fmFieldBookCtrl.showMemberInfo class="fbonce_m_i_info fbonce_m_i_noInfo"><span class=colorG>暂无会员信息，是否</span> <span class="colorB pointer" ng-click="fmFieldBookCtrl.showCreateMember=true">注册会员</span></div></div><div style="width: 320px;height: 110px;float: left;margin-left: 40px"><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #20a0ff"></div><div class=fbonce_bookDetailName>已选</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #ff4949"></div><div class=fbonce_bookDetailName>使用中</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #fff;border: 1px solid #d3dce6"></div><div class=fbonce_bookDetailName>可预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #5ED878"></div><div class=fbonce_bookDetailName>普通预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #F69667"></div><div class=fbonce_bookDetailName>长包预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #67BDDE"></div><div class=fbonce_bookDetailName>培训预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #c0ccda"></div><div class=fbonce_bookDetailName>过期/停用</div></div></div><div class=clear></div></div><div class=fbonce_titleBox style="min-width: 1360px"><div style="float: left"><div class="fbonce_t_Title fbonce_t_once" ng-click="fmFieldBookCtrl.changeTitle(\'once\')">预订场地</div><div class="fbonce_t_Title fbonce_t_long bgcolorB">现场消费</div></div><div style="float: left;text-align: left;margin-left: 20px"><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmFieldBookCtrl.showVenueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmFieldBookCtrl.showVenueName ng-click="fmFieldBookCtrl.showChooseVenueBox=!fmFieldBookCtrl.showChooseVenueBox">场馆1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=fmFieldBookCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in fmFieldBookCtrl.venues" ng-bind=venue.name ng-click=fmFieldBookCtrl.chooseVenueName(venue)>默认按钮</div></div></div><div class="select fbonce_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmFieldBookCtrl.showItemName==\'选择项目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmFieldBookCtrl.showItemName ng-click="fmFieldBookCtrl.showChooseItemBox=!fmFieldBookCtrl.showChooseItemBox">项目1</div></div><div class=form_select_div style="position: relative;z-index: 200" ng-show=fmFieldBookCtrl.showChooseItemBox><div class="select_cell pointer ellipsis" ng-repeat="item in fmFieldBookCtrl.items" ng-bind=item.name ng-click=fmFieldBookCtrl.chooseItemName(item)>默认按钮</div></div></div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="fmFieldBookCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="fmFieldBookCtrl.showChooseStartDateBox=!fmFieldBookCtrl.showChooseStartDateBox"></div></div><div class=input_calendar_datetimepick style="z-index: 50" ng-show=fmFieldBookCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=fmFieldBookCtrl.closeChooseStartDateBox() ng-date=fmFieldBookCtrl.startDate></datetimepick></div></div><!-- <div style="height: 36px;float:left;border-radius: 5px;font-size: 16px;font-weight: bold;">\n                    <div style="width: 150px;height: 34px;line-height: 34px;float: left;text-align: center;">\n                        <span style="{{fmFieldBookCtrl.dateArr[0].week==\'周六\'||fmFieldBookCtrl.dateArr[0].week==\'周日\'?\'color:#ff4949;\':\'\'}}" ng-bind="fmFieldBookCtrl.dateArr[0].week"></span>\n                        <span>&nbsp;</span>\n                        <span ng-bind="fmFieldBookCtrl.dateArr[0].date | date:\'yyyy-MM-dd\'"></span>\n                    </div>\n                </div> --><div class=clear></div></div></div></div><div class=clear></div><div style="text-align: center;width:1000px;height: 20px;line-height: 20px;margin-top:10px;font-size: 12px"><div style="float: left;margin-right: 20px"><span style="font-weight: bold">认证会员：</span> <span style="color: #ff4949">9.5折</span></div><div style="float: left;margin-right: 20px" ng-repeat="card in fmFieldBookCtrl.cards"><span style="font-weight: bold" ng-bind="card.name+\'：\'">临时会员：</span> <span style="color: #ff4949" ng-bind="card.discount==1?\'无折扣\':(card.discount*10+\'折\')">无折扣</span></div></div><div class=fbonce_fieldBox ng-show="fmFieldBookCtrl.searchVenueId&&fmFieldBookCtrl.searchItemId&&fmFieldBookCtrl.times.length!=0&&fmFieldBookCtrl.fields.length!=0"><div><div class=fbonce_f_hoursBox><div class="fbonce_fieldName fbonce_f_h_space"></div><div class="fbonce_fieldName fbonce_f_h_hours" ng-repeat="value in fmFieldBookCtrl.showHours"><div class=fbonce_f_h_hour style={{value.fontColor}} ng-bind="value.num+\':00\'"></div></div><!-- <div class="fbonce_fieldName fbonce_f_h_lastBox">\n                    <div class="fbonce_f_h_lastHour" ng-bind="fmFieldBookCtrl.endHour+\':00\'"></div>\n                </div> --><div class=clear></div></div><div class=fbonce_timeBox><div class="fbonce_timeName ellipsis" style={{field.fontColor}} ng-repeat="field in fmFieldBookCtrl.fields" ng-bind=field.name title={{field.name}}></div></div><div class=float_left><div class=field_time ng-repeat="field in fmFieldBookCtrl.fields"><div class=field_fieldName style="width: auto" ng-repeat="time in field.times"><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#fff;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-bind=time.name title="{{time.name+\'（号码：\'+(time.tel?time.tel:\'暂无号码\')+\' \'+\'/入场码：\'+time.code+\' \'+\'/备注：\'+(time.remark?time.remark:\'暂无备注）\')}}" ng-show="time.state==\'hasbook\'"></div><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#fff;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-bind=time.name title="{{time.name+\'（号码：\'+(time.tel?time.tel:\'暂无号码\')+\' \'+\'/入场码：\'+time.code+\' \'+\'/备注：\'+(time.remark?time.remark:\'暂无备注）\')}}" ng-show="time.state==\'isUsed\'"></div><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#fff;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-bind=time.name title="{{time.name+\'（号码：\'+(time.tel?time.tel:\'暂无号码\')+\' \'+\'/入场码：\'+time.code+\' \'+\'/备注：\'+(time.remark?time.remark:\'暂无备注）\')}}" ng-show="time.state==\'haspass\'"></div><div class="field_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#8492a6;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'stop\'">停用中</div><div class="field_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#8492a6;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'cantbook\'">已过期</div><div class="field_fieldAndTime pointer" style="{{time.bgColor}}{{time.fontColor}}{{time.width}}{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'canbook\'" ng-click=fmFieldBookCtrl.chooseFieldFiexible(field,time) ng-bind=time.price title={{time.price}}></div><div class=field_fieldAndTime style="{{time.bgColor}}{{time.fontColor}}{{time.width}}{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'choose\'" ng-bind=time.name title="{{time.name+\'(\'+(time.tel?time.tel:\'暂无号码\')+\')\'}}" ng-bind=time.price title={{time.price}}></div></div></div></div><div style=clear:both></div></div><div class=field_bookResultBox style="width: auto;min-height: 60px"><!-- <div style="float: left;margin-left: 40px;">\n                <div style="width: 65px;height: 40px;line-height: 40px;float: left;">起始时间</div>\n                <div style="width: 180px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;text-indent: 20px;border-radius:4px;" class="{{fmFieldBookCtrl.startTime==\'点击场次获取\'?\'colorG\':\'\'}}" ng-bind="fmFieldBookCtrl.startTime"></div>\n                <div class="clear"></div>\n            </div> --><div style="float: left;margin-left: 40px"><div style="width: 65px;height: 40px;line-height: 40px;float: left">起始时间</div><div style="width: 108px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;border-right: none;text-indent: 20px;border-radius:4px 0 0 4px" ng-bind=fmFieldBookCtrl.startTime class="{{fmFieldBookCtrl.startTime==\'点击场次获取\'?\'colorG\':\'\'}}"></div><div style="width: 36px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;border-right: none;cursor: pointer;background:url(../../assets/images/reduce.png) no-repeat 11px 17px" ng-click="fmFieldBookCtrl.changeStartTime(\'reduce\')"></div><div style="width: 36px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;cursor: pointer;background:url(../../assets/images/add.png) no-repeat 11px 11px;border-radius:0 4px 4px 0" ng-click="fmFieldBookCtrl.changeStartTime(\'add\')"></div><div class=clear></div></div><div style="float: left;margin-left: 40px"><div style="width: 65px;height: 40px;line-height: 40px;float: left">预订时长</div><div style="width: 108px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;border-right: none;text-indent: 20px;border-radius:4px 0 0 4px" ng-bind="fmFieldBookCtrl.lastTime?fmFieldBookCtrl.lastTime+\'h\':\'\'"></div><div style="width: 36px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;border-right: none;cursor: pointer;background:url(../../assets/images/reduce.png) no-repeat 11px 17px" ng-click="fmFieldBookCtrl.changeLastTime(\'reduce\')"></div><div style="width: 36px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;cursor: pointer;background:url(../../assets/images/add.png) no-repeat 11px 11px;border-radius:0 4px 4px 0" ng-click="fmFieldBookCtrl.changeLastTime(\'add\')"></div><div class=clear></div></div><!-- <div style="float: left;margin-left: 40px;">\n                <div style="width: 65px;height: 40px;line-height: 40px;float: left;">预订价格</div>\n                <input style="width: 180px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;text-indent: 20px;border-radius:4px;" ng-model="fmFieldBookCtrl.flexibleOrderPrice" placeholder="输入预订价格">\n                <div class="clear"></div>\n            </div> --><div style="float: left;margin-left: 40px;height: 40px;line-height: 40px"><div class=fbonce_orderPriceName>会员价：</div><div class=fbonce_orderPrice><span style="font-size: 14px">￥</span> <span style="font-size: 18px;font-weight: medium" ng-bind=fmFieldBookCtrl.order.total></span></div></div><div class=clear></div></div></div><div class=float_left ng-show="!(fmFieldBookCtrl.searchVenueId&&fmFieldBookCtrl.searchItemId&&fmFieldBookCtrl.times.length!=0&&fmFieldBookCtrl.fields.length!=0)"><div style="width:950px;height: 60px;text-align: center;line-height: 60px;color: #20a0ff;border:1px solid #d3dce6;margin-top: 10px">暂无可预订场地</div></div><div class=clear></div><div class=fbonce_bookConfirmBtn ng-hide="fmFieldBookCtrl.order.orderArr.length>0&&fmFieldBookCtrl.order._member&&fmFieldBookCtrl.lastTime>0&&fmFieldBookCtrl.order.total" style="background: #d3dce6">确认预订</div><div class="fbonce_bookConfirmBtn pointer" ng-show="fmFieldBookCtrl.order.orderArr.length>0&&fmFieldBookCtrl.order._member&&fmFieldBookCtrl.lastTime>0&&fmFieldBookCtrl.order.total" ng-click=fmFieldBookCtrl.openShowFiexibleOrderBox()>确认预订</div></div><!-- 选择支付方式 --><div class=bgGary ng-show=fmFieldBookCtrl.showOrderBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">发起支付</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmFieldBookCtrl.showOrderBox=false"></div><div class=clear></div><div class=form_error_font></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin" style="margin-right: 8px">支付金额</div><div class="form_value float_left form_value_width" style=border:none;color:#ff4949;text-indent:0><span>￥</span> <span style="font-weight: medium;font-size: 18px" ng-bind="fmFieldBookCtrl.order.payment==\'member\'?fmFieldBookCtrl.order.total:fmFieldBookCtrl.order.subtotal"></span></div></div><div class=clear></div></div><div style="margin-top: 10px"><div style="float: left"><div class="form_key float_left form_key_margin" style="margin-right: 8px">账户余额</div><div class="form_value float_left" style=border:none;text-indent:0><span>￥</span> <span ng-bind=fmFieldBookCtrl.members[0].cards[0].total></span></div></div><div style="float: left;margin-left: 30px"><div class="form_key float_left form_key_margin" style="margin-right: 8px">虚拟余额</div><div class="form_value float_left" style=border:none;text-indent:0><span>￥</span> <span ng-bind=fmFieldBookCtrl.members[0].virtualAccount.total></span> <span ng-bind="\'(\'+(fmFieldBookCtrl.members[0].virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'"></span></div></div><div class=clear></div></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">支付方式</div><div style="width: 350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in fmFieldBookCtrl.paymentArr" ng-click=fmFieldBookCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style="width: 0;height: 0;overflow: hidden" ng-show=fmFieldBookCtrl.showCodeBox><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=fmFieldBookCtrl.order.auth_code ng-keypress=fmFieldBookCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div><div style="width: 420px;border-bottom: 1px solid #ccc"></div><div style="margin-top: 10px" ng-repeat="field in fmFieldBookCtrl.order.orderArr"><div class=resultShowLine style="font-size: 16px"><span ng-bind=field.fieldName></span> <span>&nbsp;</span> <span ng-bind=field.timeShowDate></span></div><div class=resultShowLine><span ng-bind="fmFieldBookCtrl.startDate | date:\'yyyy-MM-dd\'"></span> <span>&nbsp;</span> <span ng-bind=field.week></span> <span>&nbsp;</span> <span ng-bind=fmFieldBookCtrl.showVenueName></span></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmFieldBookCtrl.createFlexible()>确认预订</div><div class="button_normal float_right" ng-click="fmFieldBookCtrl.showOrderBox=false">取消</div><div class=clear></div></div></div></div></div><!-- 注册会员 --><div class=bgGary ng-show=fmFieldBookCtrl.showCreateMember><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注册会员</div><img src=assets/images/close.png class="float_right pointer" ng-click=fmFieldBookCtrl.close()></div><div class=clear></div><div class=form_error_font></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">会员名称</div><input class="form_value float_left form_value_width" placeholder=请输入姓名 ng-model=fmFieldBookCtrl.member.name></div><div class=clear></div><div class=form_error_font></div></div><div><div><div class="form_key float_left form_key_margin">联系方式</div><input class="form_value float_left form_value_width" placeholder=请输入手机号 ng-model=fmFieldBookCtrl.member.tel></div><div class=clear></div><div class=form_error_font></div></div><div><div><div class="form_key float_left form_key_margin">身份证号</div><input class="form_value float_left form_value_width" placeholder=请输入身份证号 ng-model=fmFieldBookCtrl.member.idCard></div><div class=clear></div><div class=form_error_font></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmFieldBookCtrl.createMember()>成为会员</div><div class="button_normal float_right" ng-click=fmFieldBookCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 账号充值 --><div class=bgGary ng-show=fmFieldBookCtrl.showRechargeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left" ng-hide="fmFieldBookCtrl.needIdCard==\'idCard\'">账户充值</div><div class="form_title float_left" ng-show="fmFieldBookCtrl.needIdCard==\'idCard\'">账户认证</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmFieldBookCtrl.showRechargeBox=false"><div class=clear></div></div><div style="line-height: 36px;margin-top: 20px" ng-hide="fmFieldBookCtrl.needIdCard==\'idCard\'"><div class="fbonce_t_Title fbonce_t_once {{fmFieldBookCtrl.rechargeType==\'cash\'?\'bgcolorB\':\'\'}}" ng-click="fmFieldBookCtrl.changeRechargeType(\'cash\')">现金</div><div class="fbonce_t_Title fbonce_t_once {{fmFieldBookCtrl.rechargeType==\'speCard\'?\'bgcolorB\':\'\'}}" style="border-radius: 0;margin-left: 1px" ng-click="fmFieldBookCtrl.changeRechargeType(\'speCard\')">专用充值卡</div><div class="fbonce_t_Title fbonce_t_long {{fmFieldBookCtrl.rechargeType==\'normalCard\'?\'bgcolorB\':\'\'}}" ng-click="fmFieldBookCtrl.changeRechargeType(\'normalCard\')">通用充值卡</div><div class=clear></div></div><div style=margin-top:20px ng-show="fmFieldBookCtrl.needIdCard==\'idCard\'"><div><div class="form_key float_left form_key_margin">身份证号</div><input class="form_value float_left form_value_width" placeholder=请输入身份证号 ng-model=fmFieldBookCtrl.idCard></div><div class=clear></div></div><div style=margin-top:20px ng-show="fmFieldBookCtrl.rechargeType==\'cash\'&&fmFieldBookCtrl.needIdCard!=\'idCard\'"><div class="form_key float_left form_key_margin">选择卡种</div><div class="float_left pointer zindex_999 select"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=fmFieldBookCtrl.showCardName ng-click="fmFieldBookCtrl.openChooseCardBox = !fmFieldBookCtrl.openChooseCardBox"></div><div class=form_select_div style=width:345px ng-show=fmFieldBookCtrl.openChooseCardBox><div class="select_cell pointer" ng-repeat="card in fmFieldBookCtrl.cards" ng-bind="card.name+\'(\'+card.price+\'元)\'" ng-click=fmFieldBookCtrl.chooseCard(card)>默认按钮</div></div></div><div class=clear></div></div><div style=margin-top:10px ng-show="fmFieldBookCtrl.rechargeType==\'cash\'&&fmFieldBookCtrl.needIdCard!=\'idCard\'"><div><div class="form_key float_left form_key_margin">支付方式</div><div style="width: 350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in fmFieldBookCtrl.paymentArr" ng-click=fmFieldBookCtrl.chooseRechargePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style=width:0;height:0;overflow:hidden ng-show="fmFieldBookCtrl.rechargeType==\'cash\'&&fmFieldBookCtrl.needIdCard!=\'idCard\'"><div><div class="form_key float_left form_key_margin">支付条码</div><input id=rechargeAuth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=fmFieldBookCtrl.rechargeAuth_code ng-keypress=fmFieldBookCtrl.rechargeAuth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div><div ng-show="fmFieldBookCtrl.rechargeType==\'speCard\'"><div class="form_key float_left form_key_margin">充值场馆</div><div class=float_left style="width: 350px;padding-top: 7px"><div class=singleChoose_option ng-repeat="venue in fmFieldBookCtrl.venues_clone" ng-click=fmFieldBookCtrl.chooseChargeVenue(venue)><div class="singleChoose_imageBox {{venue.image}}" style="height: 26px"></div><div class=singleChoose_prompt style="min-width:60px;height: 26px;line-height: 26px" ng-bind=venue.name>场馆</div></div></div></div><div class=clear></div><div style=margin-top:20px ng-show="fmFieldBookCtrl.rechargeType==\'normalCard\'||fmFieldBookCtrl.rechargeType==\'speCard\'&&fmFieldBookCtrl.needIdCard!=\'idCard\'"><div><div class="form_key float_left form_key_margin">充值账号</div><input class="form_value float_left form_value_width" placeholder=请输入充值卡账号 ng-model=fmFieldBookCtrl.chargeCardNum></div><div class=clear></div><div class=form_error_font></div></div><div ng-show="fmFieldBookCtrl.rechargeType==\'normalCard\'||fmFieldBookCtrl.rechargeType==\'speCard\'"><div><div class="form_key float_left form_key_margin">充值密码</div><input class="form_value float_left form_value_width" placeholder=请输入充值卡密码 ng-model=fmFieldBookCtrl.chargeCardPassword></div><div class=clear></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmFieldBookCtrl.recharge()>完成</div><div class="button_normal float_right" ng-click="fmFieldBookCtrl.showRechargeBox=false">取消</div><div class=clear></div></div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=fmFieldBookCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=fmFieldBookCtrl.closePrompt()></div></div></div></div>'), a.put("app/fieldmanager/field/once/field-book-once.html", '<div><div class=fbonce_selectBox><div style="min-width: 1360px"><div class="fbonce_member_InfoBox float_left"><div class=fbonce_m_i_readTelOrCard><div class=fbonce_m_i_r_title>读取用户信息</div><div class=fbonce_m_i_r_contect><input id=cardNoBox class=fbonce_m_i_r_c_input placeholder=请读取会员卡号/二维码 ng-model=fmFieldBookCtrl.memberTelOrCard ng-keypress=fmFieldBookCtrl.enterCheck($event) style=ime-mode:disabled><div ng-show=fmFieldBookCtrl.memberTelOrCard class=fbonce_m_i_r_c_btn ng-click=fmFieldBookCtrl.checkMember()>查询</div><div ng-hide=fmFieldBookCtrl.memberTelOrCard class="fbonce_m_i_r_c_btn bgcolorG">查询</div><div class="fbonce_m_i_r_c_btn bgcolorW borderccc" style="color: #475669" ng-click=fmFieldBookCtrl.resert()>重置</div></div></div><div ng-show=fmFieldBookCtrl.showMemberInfo class=fbonce_m_i_info><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>姓名:</div><div class=fbonce_m_i_i_l_d_value ng-bind=fmFieldBookCtrl.members[0].name>徐涛</div></div><div class=fbonce_m_i_i_l_detail style=margin-left:-40px><div class=fbonce_m_i_i_l_d_key>现金账户:</div><div class=fbonce_m_i_i_l_d_value ng-bind="fmFieldBookCtrl.members[0].cards[0].total?fmFieldBookCtrl.members[0].cards[0].total:0 | currency:\'￥\'">500元</div></div></div><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>级别:</div><div class=fbonce_m_i_i_l_d_value ng-show=fmFieldBookCtrl.members[0].cards[0].levelDes ng-bind=fmFieldBookCtrl.members[0].cards[0].levelDes>金卡</div><div class=fbonce_m_i_i_l_d_value ng-hide=fmFieldBookCtrl.members[0].cards[0].levelDes>暂无等级</div></div><div class=fbonce_m_i_i_l_detail style=margin-left:-40px><div class=fbonce_m_i_i_l_d_key>虚拟账户:</div><div class="fbonce_m_i_i_l_d_value ellipsis" title="{{(fmFieldBookCtrl.members[0].virtualAccount.total | currency:\'￥\')+\'(\'+(fmFieldBookCtrl.members[0].virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'}}"><span ng-bind="fmFieldBookCtrl.members[0].virtualAccount.total | currency:\'￥\'">500元(2017-10-28过期)</span> <span ng-show="fmFieldBookCtrl.members[0].virtualAccount.total>0" ng-bind="\'(\'+(fmFieldBookCtrl.members[0].virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'"></span></div></div></div><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>手机号:</div><div class=fbonce_m_i_i_l_d_value ng-bind=fmFieldBookCtrl.members[0].tel>18806712362</div></div><div class=fbonce_m_i_i_l_detail style=margin-left:-43px><div class=fbonce_m_i_i_l_d_key style="color: #20a0ff;cursor: pointer" ng-hide=fmFieldBookCtrl.members[0].isReal ng-click="fmFieldBookCtrl.openShowRechargeBox(\'idCard\')">账户认证</div><div class=fbonce_m_i_i_l_d_key style="color: #20a0ff;cursor: pointer" ng-show=fmFieldBookCtrl.members[0].isReal ng-click=fmFieldBookCtrl.openShowRechargeBox()>账户充值</div></div></div></div><div ng-hide=fmFieldBookCtrl.showMemberInfo class="fbonce_m_i_info fbonce_m_i_noInfo"><span class=colorG>暂无会员信息，是否</span> <span class="colorB pointer" ng-click="fmFieldBookCtrl.showCreateMember=true">注册会员</span></div></div><div style="width: 320px;height: 110px;float: left;margin-left: 40px"><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #20a0ff"></div><div class=fbonce_bookDetailName>已选</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #ff4949"></div><div class=fbonce_bookDetailName>使用中</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #fff;border: 1px solid #d3dce6"></div><div class=fbonce_bookDetailName>可预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #5ED878"></div><div class=fbonce_bookDetailName>普通预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #F69667"></div><div class=fbonce_bookDetailName>长包预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #67BDDE"></div><div class=fbonce_bookDetailName>培训预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #c0ccda"></div><div class=fbonce_bookDetailName>过期/停用</div></div></div><div class=clear></div></div><div class=fbonce_titleBox style="min-width: 1360px"><div style="float: left"><div class="fbonce_t_Title fbonce_t_once bgcolorB">预订场地</div><div class="fbonce_t_Title fbonce_t_long" ng-click="fmFieldBookCtrl.changeTitle(\'fiexible\')">现场消费</div></div><div style="float: left;text-align: left;margin-left: 20px"><div class="select fbonce_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmFieldBookCtrl.showVenueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmFieldBookCtrl.showVenueName ng-click="fmFieldBookCtrl.showChooseVenueBox=!fmFieldBookCtrl.showChooseVenueBox">场馆1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=fmFieldBookCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in fmFieldBookCtrl.venues" ng-bind=venue.name ng-click=fmFieldBookCtrl.chooseVenueName(venue)>默认按钮</div></div></div><div class="select fbonce_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmFieldBookCtrl.showItemName==\'选择项目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmFieldBookCtrl.showItemName ng-click="fmFieldBookCtrl.showChooseItemBox=!fmFieldBookCtrl.showChooseItemBox">项目1</div></div><div class=form_select_div style="position: relative;z-index: 200" ng-show=fmFieldBookCtrl.showChooseItemBox><div class="select_cell pointer ellipsis" ng-repeat="item in fmFieldBookCtrl.items" ng-bind=item.name ng-click=fmFieldBookCtrl.chooseItemName(item)>默认按钮</div></div></div><div style="height: 36px;float:left;border:1px solid #ccc;border-radius: 5px;border-right: none;margin-left:15px"><div style="width: 100px;height: 34px;line-height: 34px;border-right: 1px solid #ccc;float: left;text-align: center;cursor: pointer;{{date.bgColor}}" ng-repeat="date in fmFieldBookCtrl.dateArr" ng-click=fmFieldBookCtrl.changeDate(date)><span style="{{(date.week==\'周六\'||date.week==\'周日\')&&!date.isChoose?\'color:#ff4949;\':\'\'}}" ng-bind=date.week></span> <span ng-bind="date.date | date:\'MM-dd\'"></span></div></div><div class=clear></div></div></div></div><div class=clear></div><div style="text-align: center;width:1000px;height: 20px;line-height: 20px;margin-top:10px;font-size: 12px"><div style="float: left;margin-right: 20px"><span style="font-weight: bold">认证会员：</span> <span style="color: #ff4949">9.5折</span></div><div style="float: left;margin-right: 20px" ng-repeat="card in fmFieldBookCtrl.cards"><span style="font-weight: bold" ng-bind="card.name+\'：\'">临时会员：</span> <span style="color: #ff4949" ng-bind="card.discount==1?\'无折扣\':(card.discount*10+\'折\')">无折扣</span></div></div><div class=fbonce_fieldBox style="overflow-x: auto" ng-show="fmFieldBookCtrl.searchVenueId&&fmFieldBookCtrl.searchItemId&&fmFieldBookCtrl.times.length!=0&&fmFieldBookCtrl.fields.length!=0"><div style={{fmFieldBookCtrl.tableWidthB}}><div class=fbonce_f_hoursBox><div class="fbonce_fieldName fbonce_f_h_space"></div><div class="fbonce_fieldName fbonce_f_h_hours" ng-repeat="value in fmFieldBookCtrl.showHours"><div class=fbonce_f_h_hour style={{value.fontColor}} ng-bind="value.num+\':00\'"></div></div><!-- <div class="fbonce_fieldName fbonce_f_h_lastBox">\n					<div class="fbonce_f_h_lastHour" ng-bind="fmFieldBookCtrl.endHour+\':00\'"></div>\n				</div> --><div class=clear></div></div><div class=fbonce_timeBox><div class="fbonce_timeName ellipsis" style={{field.fontColor}} ng-repeat="field in fmFieldBookCtrl.fields" ng-bind=field.name title={{field.name}}></div></div><div class=float_left style={{fmFieldBookCtrl.tableWidthS}}><div class=fbonce_time ng-repeat="field in fmFieldBookCtrl.fields"><div class=fbonce_fieldName style="width: auto" ng-repeat="time in field.times"><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#fff;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-bind=time.name title="{{time.name+\'（号码：\'+(time.tel?time.tel:\'暂无号码\')+\' \'+\'/入场码：\'+time.code+\' \'+\'/备注：\'+(time.remark?time.remark:\'暂无备注）\')}}" ng-show="time.state==\'hasbook\'"></div><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#fff;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-bind=time.name title="{{time.name+\'（号码：\'+(time.tel?time.tel:\'暂无号码\')+\' \'+\'/入场码：\'+time.code+\' \'+\'/备注：\'+(time.remark?time.remark:\'暂无备注）\')}}" ng-show="time.state==\'isUsed\'"></div><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#fff;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-bind=time.name title="{{time.name+\'（号码：\'+(time.tel?time.tel:\'暂无号码\')+\' \'+\'/入场码：\'+time.code+\' \'+\'/备注：\'+(time.remark?time.remark:\'暂无备注）\')}}" ng-show="time.state==\'haspass\'"></div><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#8492a6;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'stop\'">停用中</div><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#8492a6;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'cantbook\'">已过期</div><div class="fbonce_fieldAndTime pointer" style="{{time.bgColor}}{{time.fontColor}}{{time.width}}{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'canbook\'" ng-click=fmFieldBookCtrl.chooseField(field,time) ng-bind=time.price title={{time.price}}></div><div class="fbonce_fieldAndTime pointer" style="{{time.bgColor}}{{time.fontColor}}{{time.width}}{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'choose\'" ng-click=fmFieldBookCtrl.chooseField(field,time) ng-bind=time.price title={{time.price}}></div></div></div></div><div class=clear></div></div><div class=fbonce_bookResultBox><div class=fbonce_orderPriceBox><div><div class=fbonce_orderPriceName>会员价：</div><div class=fbonce_orderPrice><span style="font-size: 14px">￥</span> <span style="font-size: 18px;font-weight: medium" ng-bind=fmFieldBookCtrl.order.total></span></div></div></div><div class=fbonce_bookResultPos><div class=fbonce_bookResult ng-repeat="field in fmFieldBookCtrl.order.orderArr"><div class=fbonce_bookResult_delete ng-click=fmFieldBookCtrl.deleteField(field)></div><div style="font-size: 13px;color: #1f2d3d"><span ng-bind=field.timeShowDate>1:00-2:00</span> <span ng-bind=field.fieldName>场地02</span></div><!-- <div style="font-size: 13px;color: #8492a6;">\n						<span ng-bind="field.fieldName">场地02</span>\n						<span ng-bind="field.date | date:\'yyyy-MM-dd\'">今天</span>\n						<span ng-bind="field.week">羽毛球</span>\n						<span ng-bind="field.venueName">室内体育馆</span>\n					</div> --></div></div><div style=clear:both></div></div></div><div ng-show="!(fmFieldBookCtrl.searchVenueId&&fmFieldBookCtrl.searchItemId&&fmFieldBookCtrl.times.length!=0&&fmFieldBookCtrl.fields.length!=0)"><div style="width:950px;height: 60px;text-align: center;line-height: 60px;color: #20a0ff;border:1px solid #d3dce6;margin-top: 10px">暂无可预订场地</div></div><div class=clear></div><div class=fbonce_bookConfirmBtn ng-hide="fmFieldBookCtrl.order.orderArr.length>0&&fmFieldBookCtrl.order._member" style="background: #d3dce6">确认预订</div><div class="fbonce_bookConfirmBtn pointer" ng-show="fmFieldBookCtrl.order.orderArr.length>0&&fmFieldBookCtrl.order._member" ng-click=fmFieldBookCtrl.openShowOrderBox()>确认预订</div></div><!-- 选择支付方式 --><div class=bgGary ng-show=fmFieldBookCtrl.showOrderBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">发起支付</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmFieldBookCtrl.showOrderBox=false"></div><div class=clear></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin" style="margin-right: 8px">支付金额</div><div class="form_value float_left form_value_width" style=border:none;color:#ff4949;text-indent:0><span>￥</span> <span style="font-weight: medium;font-size: 18px" ng-bind="fmFieldBookCtrl.order.payment==\'member\'?fmFieldBookCtrl.order.total:fmFieldBookCtrl.order.subtotal"></span></div></div><div class=clear></div></div><div style="margin-top: 10px"><div style="float: left"><div class="form_key float_left form_key_margin" style="margin-right: 8px">账户余额</div><div class="form_value float_left" style=border:none;text-indent:0><span>￥</span> <span ng-bind=fmFieldBookCtrl.members[0].cards[0].total></span></div></div><div style="float: left;margin-left: 30px"><div class="form_key float_left form_key_margin" style="margin-right: 8px">虚拟余额</div><div class="form_value float_left" style=border:none;text-indent:0><span>￥</span> <span ng-bind=fmFieldBookCtrl.members[0].virtualAccount.total></span> <span ng-bind="\'(\'+(fmFieldBookCtrl.members[0].virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'"></span></div></div><div class=clear></div></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">支付方式</div><div style="width: 350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in fmFieldBookCtrl.paymentArr" ng-click=fmFieldBookCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style="width: 0;height: 0;overflow: hidden" ng-show=fmFieldBookCtrl.showCodeBox><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=fmFieldBookCtrl.order.auth_code ng-keypress=fmFieldBookCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div><div style="width: 420px;border-bottom: 1px solid #ccc"></div><div style="margin-top: 10px" ng-repeat="field in fmFieldBookCtrl.order.orderArr"><div class=resultShowLine style="font-size: 16px"><span ng-bind=field.fieldName></span> <span>&nbsp;</span> <span ng-bind=field.timeShowDate></span></div><div class=resultShowLine><span ng-bind="fmFieldBookCtrl.startDate | date:\'yyyy-MM-dd\'"></span> <span>&nbsp;</span> <span ng-bind=field.week></span> <span>&nbsp;</span> <span ng-bind=fmFieldBookCtrl.showVenueName></span></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmFieldBookCtrl.create()>确认预订</div><div class="button_normal float_right" ng-click="fmFieldBookCtrl.showOrderBox=false">取消</div><div class=clear></div></div></div></div></div><!-- 注册会员 --><div class=bgGary ng-show=fmFieldBookCtrl.showCreateMember><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注册会员</div><img src=assets/images/close.png class="float_right pointer" ng-click=fmFieldBookCtrl.close()></div><div class=clear></div><div class=form_error_font></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">会员名称</div><input class="form_value float_left form_value_width" placeholder=请输入姓名 ng-model=fmFieldBookCtrl.member.name></div><div class=clear></div><div class=form_error_font></div></div><div><div><div class="form_key float_left form_key_margin">联系方式</div><input class="form_value float_left form_value_width" placeholder=请输入手机号 ng-model=fmFieldBookCtrl.member.tel></div><div class=clear></div><div class=form_error_font></div></div><div><div><div class="form_key float_left form_key_margin">身份证号</div><input class="form_value float_left form_value_width" placeholder=请输入身份证号 ng-model=fmFieldBookCtrl.member.idCard></div><div class=clear></div><div class=form_error_font></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmFieldBookCtrl.createMember()>成为会员</div><div class="button_normal float_right" ng-click=fmFieldBookCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 账号充值 --><div class=bgGary ng-show=fmFieldBookCtrl.showRechargeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left" ng-hide="fmFieldBookCtrl.needIdCard==\'idCard\'">账户充值</div><div class="form_title float_left" ng-show="fmFieldBookCtrl.needIdCard==\'idCard\'">账户认证</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmFieldBookCtrl.showRechargeBox=false"><div class=clear></div></div><div style="line-height: 36px;margin-top: 20px" ng-hide="fmFieldBookCtrl.needIdCard==\'idCard\'"><div class="fbonce_t_Title fbonce_t_once {{fmFieldBookCtrl.rechargeType==\'cash\'?\'bgcolorB\':\'\'}}" ng-click="fmFieldBookCtrl.changeRechargeType(\'cash\')">现金</div><div class="fbonce_t_Title fbonce_t_once {{fmFieldBookCtrl.rechargeType==\'speCard\'?\'bgcolorB\':\'\'}}" style="border-radius: 0;margin-left: 1px" ng-click="fmFieldBookCtrl.changeRechargeType(\'speCard\')">专用充值卡</div><div class="fbonce_t_Title fbonce_t_long {{fmFieldBookCtrl.rechargeType==\'normalCard\'?\'bgcolorB\':\'\'}}" ng-click="fmFieldBookCtrl.changeRechargeType(\'normalCard\')">通用充值卡</div><div class=clear></div></div><div style=margin-top:20px ng-show="fmFieldBookCtrl.needIdCard==\'idCard\'"><div><div class="form_key float_left form_key_margin">身份证号</div><input class="form_value float_left form_value_width" placeholder=请输入身份证号 ng-model=fmFieldBookCtrl.idCard></div><div class=clear></div></div><div style=margin-top:20px ng-show="fmFieldBookCtrl.rechargeType==\'cash\'&&fmFieldBookCtrl.needIdCard!=\'idCard\'"><div class="form_key float_left form_key_margin">选择卡种</div><div class="float_left pointer zindex_999 select"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=fmFieldBookCtrl.showCardName ng-click="fmFieldBookCtrl.openChooseCardBox = !fmFieldBookCtrl.openChooseCardBox"></div><div class=form_select_div style=width:345px ng-show=fmFieldBookCtrl.openChooseCardBox><div class="select_cell pointer" ng-repeat="card in fmFieldBookCtrl.cards" ng-bind="card.name+\'(\'+card.price+\'元)\'" ng-click=fmFieldBookCtrl.chooseCard(card)>默认按钮</div></div></div><div class=clear></div></div><div style=margin-top:10px ng-show="fmFieldBookCtrl.rechargeType==\'cash\'&&fmFieldBookCtrl.needIdCard!=\'idCard\'"><div><div class="form_key float_left form_key_margin">支付方式</div><div style="width: 350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in fmFieldBookCtrl.paymentArr" ng-click=fmFieldBookCtrl.chooseRechargePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style=width:0;height:0;overflow:hidden ng-show="fmFieldBookCtrl.rechargeType==\'cash\'&&fmFieldBookCtrl.needIdCard!=\'idCard\'"><div><div class="form_key float_left form_key_margin">支付条码</div><input id=rechargeAuth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=fmFieldBookCtrl.rechargeAuth_code ng-keypress=fmFieldBookCtrl.rechargeAuth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div><div ng-show="fmFieldBookCtrl.rechargeType==\'speCard\'"><div class="form_key float_left form_key_margin">充值场馆</div><div class=float_left style="width: 350px;padding-top: 7px"><div class=singleChoose_option ng-repeat="venue in fmFieldBookCtrl.venues_clone" ng-click=fmFieldBookCtrl.chooseChargeVenue(venue)><div class="singleChoose_imageBox {{venue.image}}" style="height: 26px"></div><div class=singleChoose_prompt style="min-width:60px;height: 26px;line-height: 26px" ng-bind=venue.name>场馆</div></div></div></div><div class=clear></div><div style=margin-top:20px ng-show="fmFieldBookCtrl.rechargeType==\'normalCard\'||fmFieldBookCtrl.rechargeType==\'speCard\'&&fmFieldBookCtrl.needIdCard!=\'idCard\'"><div><div class="form_key float_left form_key_margin">充值账号</div><input class="form_value float_left form_value_width" placeholder=请输入充值卡账号 ng-model=fmFieldBookCtrl.chargeCardNum></div><div class=clear></div><div class=form_error_font></div></div><div ng-show="fmFieldBookCtrl.rechargeType==\'normalCard\'||fmFieldBookCtrl.rechargeType==\'speCard\'"><div><div class="form_key float_left form_key_margin">充值密码</div><input class="form_value float_left form_value_width" placeholder=请输入充值卡密码 ng-model=fmFieldBookCtrl.chargeCardPassword></div><div class=clear></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmFieldBookCtrl.recharge()>完成</div><div class="button_normal float_right" ng-click="fmFieldBookCtrl.showRechargeBox=false">取消</div><div class=clear></div></div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=fmFieldBookCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=fmFieldBookCtrl.closePrompt()></div></div></div></div>'),
            a.put("app/fieldmanager/field/once/field-book.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleChoose">单次预订</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-field-longbook>长包预订</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-field-cancelbook>预订撤销</div></div><div class=field_bookBoxPostition ui-view=""></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=fmFieldBookCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmFieldBookCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="fmFieldBookCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmFieldBookCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=fmFieldBookCtrl.wordERR title={{fmFieldBookCtrl.wordERR}}>22212</div><div class=promptClose ng-click=fmFieldBookCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmFieldBookCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=fmFieldBookCtrl.wordWARN title={{fmFieldBookCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/fieldmanager/finance/cashall/finance-cashall.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleChoose">营业收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-finance-field>场地/综合服务收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-finance-shop>小卖部收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-finance-prep>微信/支付宝</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-service-count>包玉刚运动人数明细表</div></div><div class=field_bookBoxPostition><div><div><div class=field_selectBoxOne style="height: auto"><div><div><div class=field_selectName style="text-indent: 0;width: 80px">选择日期</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="fmFinanceCashallCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="fmFinanceCashallCtrl.showChooseStartDateBox=!fmFinanceCashallCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=fmFinanceCashallCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=fmFinanceCashallCtrl.closeChooseStartDateBox() ng-date=fmFinanceCashallCtrl.startDate></datetimepick></div></div><div class=float_left style="height: 40px;line-height: 40px;padding: 0 10px">至</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="fmFinanceCashallCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="fmFinanceCashallCtrl.showChooseEndDateBox=!fmFinanceCashallCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=fmFinanceCashallCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=fmFinanceCashallCtrl.closeChooseEndDateBox() ng-date=fmFinanceCashallCtrl.endDate></datetimepick></div></div><div><div class="button2_normal float_right" style="margin:0 20px" ng-click="fmFinanceCashallCtrl.export(\'alltable\')">导出</div></div><div style=clear:both></div></div><div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择场馆</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="venue in fmFinanceCashallCtrl.venues" ng-click="(venue.image==\'manyChoose_imageG\')?\'\':fmFinanceCashallCtrl.chooseVenueName(venue)"><div class="singleChoose_imageBox {{venue.image}} {{venue.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=venue.name style="{{venue.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择提交人</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="worker in fmFinanceCashallCtrl.workers" ng-click="(worker.image==\'manyChoose_imageG\')?\'\':fmFinanceCashallCtrl.chooseWorkerName(worker)"><div class="singleChoose_imageBox {{worker.image}} {{worker.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=worker.name style="{{worker.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div style=clear:both></div></div></div></div></div><div style="max-width: 106rem;overflow-x: auto"><table id=alltable><tr><td colspan=54><span>柜员收入汇总表：</span> <span ng-bind=fmFinanceCashallCtrl.venueName></span></td></tr><tr><td colspan=54><span>时间范围：</span> <span ng-bind=fmFinanceCashallCtrl.dateName></span></td></tr><tr><td rowspan=2>操作柜员</td><td rowspan=2>开卡数量</td><td rowspan=2>实名认证数量</td><td colspan=9>现金收入</td><td colspan=7>支票收入</td><td colspan=7>转账收入</td><td colspan=7>POS机收入</td><td colspan=10>微信收入（非现金）</td><td colspan=9>支付宝收入（非现金）</td><td rowspan=2 style=color:#20a0ff>合计</td><td rowspan=2>详情</td></tr><tr><td>场地消费</td><td>柜台充值</td><td>门票消费</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td>现金退款</td><td style=color:#20a0ff>合计</td><td>场地消费</td><td>柜台充值</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td style=color:#20a0ff>合计</td><td>场地消费</td><td>柜台充值</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td style=color:#20a0ff>合计</td><td>场地消费</td><td>柜台充值</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td style=color:#20a0ff>合计</td><td>场地消费</td><td>柜台充值</td><td>线上充值</td><td>门票消费</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td>微信退款</td><td style=color:#20a0ff>合计</td><td>场地消费</td><td>柜台充值</td><td>门票消费</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td>支付宝退款</td><td style=color:#20a0ff>合计</td></tr><tr class=trHover ng-repeat="worker in fmFinanceCashallCtrl.result"><td ng-bind=worker.workerName>1</td><td ng-bind=worker.issueCardCount?worker.issueCardCount:0>1</td><td ng-bind=worker.realMemberCount?worker.realMemberCount:0>1</td><td ng-bind=worker.payment.cash.field>1</td><td ng-bind=worker.payment.cash.charge>1</td><td ng-bind=worker.payment.cash.ticket>1</td><td ng-bind=worker.payment.cash.product>1</td><td ng-bind=worker.payment.cash.memberService>1</td><td ng-bind=worker.payment.cash.cardFee>1</td><td ng-bind=worker.payment.cash.bail>1</td><td ng-bind=worker.payment.cash.refund>1</td><td ng-bind=worker.payment.cash.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.check.field>1</td><td ng-bind=worker.payment.check.charge>1</td><td ng-bind=worker.payment.check.product>1</td><td ng-bind=worker.payment.check.memberService>1</td><td ng-bind=worker.payment.check.cardFee>1</td><td ng-bind=worker.payment.check.bail>1</td><td ng-bind=worker.payment.check.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.card.field>1</td><td ng-bind=worker.payment.card.charge>1</td><td ng-bind=worker.payment.card.product>1</td><td ng-bind=worker.payment.card.memberService>1</td><td ng-bind=worker.payment.card.cardFee>1</td><td ng-bind=worker.payment.card.bail>1</td><td ng-bind=worker.payment.card.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.pos.field>1</td><td ng-bind=worker.payment.pos.charge>1</td><td ng-bind=worker.payment.pos.product>1</td><td ng-bind=worker.payment.pos.memberService>1</td><td ng-bind=worker.payment.pos.cardFee>1</td><td ng-bind=worker.payment.pos.bail>1</td><td ng-bind=worker.payment.pos.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.wx.field>1</td><td ng-bind=worker.payment.wx.charge>1</td><td ng-bind=worker.payment.wx.charge_online>1</td><td ng-bind=worker.payment.wx.ticket>1</td><td ng-bind=worker.payment.wx.product>1</td><td ng-bind=worker.payment.wx.memberService>1</td><td ng-bind=worker.payment.wx.cardFee>1</td><td ng-bind=worker.payment.wx.bail>1</td><td ng-bind=worker.payment.wx.refund>1</td><td ng-bind=worker.payment.wx.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.alipay.field>1</td><td ng-bind=worker.payment.alipay.charge>1</td><td ng-bind=worker.payment.alipay.ticket>1</td><td ng-bind=worker.payment.alipay.product>1</td><td ng-bind=worker.payment.alipay.memberService>1</td><td ng-bind=worker.payment.alipay.cardFee>1</td><td ng-bind=worker.payment.alipay.bail>1</td><td ng-bind=worker.payment.alipay.refund>1</td><td ng-bind=worker.payment.alipay.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.subtotal style=color:#20a0ff>1</td><td style="color: #20a0ff;cursor: pointer" ng-click="fmFinanceCashallCtrl.initCondition(worker._worker==\'all\'?undefined:worker.workerName)">详情</td></tr><tr class=trHover><td colspan=2>制表人：</td><td colspan=3></td><td colspan=2>复核人：</td><td colspan=3></td><td colspan=2>审核人：</td><td colspan=42></td></tr></table></div><div style="margin-top: 20px;margin-bottom: 20px" ng-show=fmFinanceCashallCtrl.baoyugang><div class="button2_normal float_right" style="margin:0 20px" ng-click="fmFinanceCashallCtrl.export(\'alltable2\')">导出</div></div><div class=finance style="width:100%;overflow-x: auto;margin-top: 20px;margin-bottom: 50px" ng-show=fmFinanceCashallCtrl.baoyugang><table id=alltable2 style=width:100%><tr><td colspan=10><span>柜员收入汇总表：</span> <span ng-bind="\'包玉刚游泳馆\'+\'-\'+fmFinanceCashallCtrl.workerName"></span></td></tr><tr><td colspan=10><span>时间范围：</span> <span ng-bind=fmFinanceCashallCtrl.dateName></span></td></tr><tr><td>项目</td><td>数量</td><td>单价</td><td>微信</td><td>支付宝</td><td>现金</td><td>转账</td><td>支票</td><td>POS机</td><td style=color:#20a0ff>合计</td></tr><!-- <tr class="trHover">\n                                    <td>场地收入</td>\n                                    <td>暂无</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.field.wx">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.field.alipay">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.field.cash">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.field.card">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.field.check">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.field.pos">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.field.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><tr class=trHover ng-repeat="ticket in fmFinanceCashallCtrl.resultType.statuses.ticketArr"><td ng-bind=ticket.signName></td><td ng-bind=ticket.quantity></td><td ng-bind=ticket.price></td><td ng-bind=ticket.wx>1</td><td ng-bind=ticket.alipay>1</td><td ng-bind=ticket.cash>1</td><td ng-bind=ticket.card>1</td><td ng-bind=ticket.check>1</td><td ng-bind=ticket.pos>1</td><td ng-bind=ticket.subtotal style=color:#20a0ff>1</td></tr><!-- <tr class="trHover">\n                                    <td>柜台充值</td>\n                                    <td>暂无</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.charge.wx">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.charge.alipay">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.charge.cash">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.charge.card">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.charge.check">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.charge.pos">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.charge.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><!-- <tr class="trHover">\n                                    <td>专用账户充值</td>\n                                    <td>暂无</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.chargeSpe.wx">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.chargeSpe.alipay">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.chargeSpe.cash">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.chargeSpe.card">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.chargeSpe.check">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.chargeSpe.pos">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.chargeSpe.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><!-- <tr class="trHover">\n                                    <td>线上充值</td>\n                                    <td>暂无</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.charge_online.wx">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.charge_online.alipay">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.charge_online.cash">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.charge_online.card">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.charge_online.check">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.charge_online.pos">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.charge_online.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><!-- <tr class="trHover" ng-repeat="product in fmFinanceCashallCtrl.resultType.statuses.productArr">\n                                    <td ng-bind="product.signName"></td>\n                                    <td ng-bind="product.quantity"></td>\n                                    <td ng-bind="product.wx">1</td>\n                                    <td ng-bind="product.alipay">1</td>\n                                    <td ng-bind="product.cash">1</td>\n                                    <td ng-bind="product.card">1</td>\n                                    <td ng-bind="product.check">1</td>\n                                    <td ng-bind="product.pos">1</td>\n                                    <td ng-bind="product.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><!-- <tr class="trHover" ng-repeat="shopProduct in fmFinanceCashallCtrl.resultType.statuses.shopProductArr">\n                                    <td ng-bind="shopProduct.signName"></td>\n                                    <td ng-bind="shopProduct.quantity"></td>\n                                    <td ng-bind="shopProduct.wx">1</td>\n                                    <td ng-bind="shopProduct.alipay">1</td>\n                                    <td ng-bind="shopProduct.cash">1</td>\n                                    <td ng-bind="shopProduct.card">1</td>\n                                    <td ng-bind="shopProduct.check">1</td>\n                                    <td ng-bind="shopProduct.pos">1</td>\n                                    <td ng-bind="shopProduct.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><tr class=trHover ng-repeat="memberService in fmFinanceCashallCtrl.resultType.statuses.memberServiceArr"><td ng-bind=memberService.signName></td><td ng-bind=memberService.quantity></td><td ng-bind=memberService.price></td><td ng-bind=memberService.wx>1</td><td ng-bind=memberService.alipay>1</td><td ng-bind=memberService.cash>1</td><td ng-bind=memberService.card>1</td><td ng-bind=memberService.check>1</td><td ng-bind=memberService.pos>1</td><td ng-bind=memberService.subtotal style=color:#20a0ff>1</td></tr><tr class=trHover><td>卡工本费</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.cardFee.quantity>0</td><td>20</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.cardFee.wx>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.cardFee.alipay>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.cardFee.cash>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.cardFee.card>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.cardFee.check>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.cardFee.pos>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.cardFee.subtotal style=color:#20a0ff>1</td></tr><tr class=trHover><td>办卡押金</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.bail.quantity>0</td><td>20</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.bail.wx>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.bail.alipay>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.bail.cash>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.bail.card>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.bail.check>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.bail.pos>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.bail.subtotal style=color:#20a0ff>1</td></tr><tr class=trHover><td>退卡押金</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.refundBail.quantity>0</td><td>20</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.refundBail.wx>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.refundBail.alipay>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.refundBail.cash>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.refundBail.card>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.refundBail.check>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.refundBail.pos>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.statuses.refundBail.subtotal style=color:#20a0ff>1</td></tr><!-- <tr class="trHover">\n                                    <td>退款</td>\n                                    <td>暂无</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.refund.wx">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.refund.alipay">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.refund.cash">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.refund.card">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.refund.check">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.refund.pos">1</td>\n                                    <td ng-bind="fmFinanceCashallCtrl.resultType.statuses.refund.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><tr class=trHover><td>合计</td><td>0</td><td>0</td><td ng-bind=fmFinanceCashallCtrl.resultType.wxTotal style=color:#20a0ff>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.alipayTotal style=color:#20a0ff>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.cashTotal style=color:#20a0ff>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.cardTotal style=color:#20a0ff>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.checkTotal style=color:#20a0ff>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.posTotal style=color:#20a0ff>1</td><td ng-bind=fmFinanceCashallCtrl.resultType.subtotal style=color:#20a0ff>1</td></tr></table></div></div></div></div></div></div></div><style>table{\n        border:1px solid #000;\n        text-align: center;\n        margin-top: 20px;\n    }\n    tr{\n        border:1px solid #000;\n    }\n    td{\n        border:1px solid #000;\n        padding:5px; \n    }</style><!-- 纠错操作 --><div class=bgGary ng-show=fmFinanceCashallCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=fmFinanceCashallCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{fmFinanceCashallCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="fmFinanceCashallCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{fmFinanceCashallCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="fmFinanceCashallCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=fmFinanceCashallCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=fmFinanceCashallCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=fmFinanceCashallCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=fmFinanceCashallCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 预览详情 --><div class=bgGary ng-show=fmFinanceCashallCtrl.showDetail><div class=middle><div id=box class="form_div center" style="width: 110rem;height: 650px;overflow-y: auto;padding: 20px;padding-bottom: 50px;border-radius: 10px;box-shadow: #ccc 0 0 3px 3px"><div><div class="form_title float_left">详情</div><img src=assets/images/close.png class="float_right pointer" ng-click=fmFinanceCashallCtrl.close()></div><div class=clear></div><div class=cancelTable><div class="cancelThTr height_40"><div class="cancelTh width_13 ellipsis" style="text-indent: 20px">订单时间</div><div class="cancelTh width_10 ellipsis">用户名</div><div class="cancelTh width_8 ellipsis">金额</div><div class="cancelTh width_38 ellipsis">详情</div><div class="cancelTh width_15 ellipsis">提交人</div><div class="cancelTh width_13" style="position: relative"><div class=ellipsis style="float:left;max-width: 90px" ng-bind=fmFinanceCashallCtrl.showPaymentName>支付方式</div><div class=downBtn ng-click="fmFinanceCashallCtrl.showChoosePaymentBox=!fmFinanceCashallCtrl.showChoosePaymentBox"></div><div class="form_select_div finance_selectBox" ng-show=fmFinanceCashallCtrl.showChoosePaymentBox><div class="select_cell pointer ellipsis" ng-repeat="payment in fmFinanceCashallCtrl.paymentArr" ng-bind=payment.name ng-click=fmFinanceCashallCtrl.choosePaymentName(payment)>默认按钮</div></div></div><div class="cancelTh width_8 ellipsis">操作</div></div><div class=cancelTr ng-repeat="record in fmFinanceCashallCtrl.recordsDetail" style="{{record.state?\'background: #f2f2f2\':\'\'}}"><div class="cancelTd width_13 ellipsis" ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm:ss\'" style="text-indent: 20px"></div><div class="cancelTd width_10 ellipsis" ng-bind=record.name></div><div class="cancelTd width_8 ellipsis" ng-bind="record.cost | currency:\'\'"></div><div class="cancelTd width_38 ellipsis" ng-bind="record.description+\' \'+(record.remark?\'(\'+record.remark+\')\':\'\')" title="{{record.description+\' \'+(record.remark?\'(\'+record.remark+\')\':\'\')}}"></div><div class="cancelTd width_15 ellipsis" ng-bind="record.workerName==\'微信\'?\'微信用户\':record.workerName"></div><div class="cancelTd width_13 ellipsis" ng-bind=record.payment></div><div class="cancelTd width_8 ellipsis" ng-hide=record.state><span style="cursor: pointer;color: #8492a6" ng-click=fmFinanceCashallCtrl.openErrChangeBox(record._id)>纠错</span></div><div class="cancelTd width_8 ellipsis" ng-show=record.state>纠错单</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="fmFinanceCashallCtrl.pagination.numPages > 1" total-items=fmFinanceCashallCtrl.pagination.totalItems ng-model=fmFinanceCashallCtrl.pagination.page items-per-page=fmFinanceCashallCtrl.pagination.itemsPerPage max-size=fmFinanceCashallCtrl.pagination.maxSize boundary-links="{{fmFinanceCashallCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmFinanceCashallCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmFinanceCashallCtrl.pageChanged()></pagination></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=fmFinanceCashallCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmFinanceCashallCtrl.wordOK>22212</div><div class=promptClose ng-click=fmFinanceCashallCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmFinanceCashallCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=fmFinanceCashallCtrl.wordERR>22212</div><div class=promptClose ng-click=fmFinanceCashallCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmFinanceCashallCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=fmFinanceCashallCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/fieldmanager/finance/field/finance-field.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/fmanization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-finance-cashall>营业收入</div><div class="field_titleNormal field_titleChoose">场地/综合服务收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-finance-shop>小卖部收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-finance-prep>微信/支付宝</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-service-count>包玉刚运动人数明细表</div></div><div class=field_bookBoxPostition><div><div><div class=field_selectBoxOne style="height: auto"><div><div><div class=field_selectName style="text-indent: 0;width: 80px">选择日期</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="fmFinanceFieldCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="fmFinanceFieldCtrl.showChooseStartDateBox=!fmFinanceFieldCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=fmFinanceFieldCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=fmFinanceFieldCtrl.closeChooseStartDateBox() ng-date=fmFinanceFieldCtrl.startDate></datetimepick></div></div><div class=float_left style="height: 40px;line-height: 40px;padding: 0 10px">至</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="fmFinanceFieldCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="fmFinanceFieldCtrl.showChooseEndDateBox=!fmFinanceFieldCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=fmFinanceFieldCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=fmFinanceFieldCtrl.closeChooseEndDateBox() ng-date=fmFinanceFieldCtrl.endDate></datetimepick></div></div><div ng-show="fmFinanceFieldCtrl.searchVenueIdArr.length>0"><div class="button2_normal float_right pointer" style="margin:0 20px" ng-click=fmFinanceFieldCtrl.export()>导出</div></div><div style=clear:both></div></div><div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择场馆</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="venue in fmFinanceFieldCtrl.venues" ng-click="(venue.image==\'manyChoose_imageG\')?\'\':fmFinanceFieldCtrl.chooseVenueName(venue)"><div class="singleChoose_imageBox {{venue.image}} {{venue.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=venue.name style="{{venue.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择项目</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="item in fmFinanceFieldCtrl.items" ng-click="(item.image==\'manyChoose_imageG\')?\'\':fmFinanceFieldCtrl.chooseItemName(item)"><div class="singleChoose_imageBox {{item.image}} {{item.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=item.name style="{{item.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div style=clear:both></div></div></div></div></div><table id=alltable style="width: 106rem"><tr><td colspan=8><span>消费汇总表：</span> <span ng-bind=fmFinanceFieldCtrl.venueName></span></td></tr><tr><td colspan=8><span>时间范围：</span> <span ng-bind=fmFinanceFieldCtrl.dateName></span></td></tr><tr><td>项目/综合服务名称</td><td>资金收入（含现金、微信、支付宝、转账、支票、POS机）</td><td>余额支付</td><td>虚拟卡支付</td><td>专用账户支付</td><td>退款</td><td style="color: #20a0ff">合计</td><td>详情</td></tr><tr class=trHover ng-repeat="ip in fmFinanceFieldCtrl.itemAndProduct"><td ng-bind=ip.ipName></td><td ng-bind=ip.payment.cashAll></td><td ng-bind=ip.payment.member></td><td ng-bind=ip.payment.member_vir></td><td ng-bind=ip.payment.member_spe></td><td ng-bind=ip.payment.refund></td><td ng-bind=ip.payment.subtotal style="color: #20a0ff"></td><td style="color: #20a0ff;cursor: pointer" ng-click=fmFinanceFieldCtrl.initCondition(ip)>详情</td></tr><!-- <tr><td colspan="8" style="text-align: center;font-weight: bold;">一级分类</td></tr> --><tr ng-repeat="first in fmFinanceFieldCtrl.firstcategory"><td ng-bind=first.ipName></td><td ng-bind=first.payment.cashAll></td><td ng-bind=first.payment.member></td><td ng-bind=first.payment.member_vir></td><td ng-bind=first.payment.member_spe></td><td ng-bind=first.payment.refund></td><td ng-bind=first.payment.subtotal style="color: #20a0ff"></td><td style="color: #20a0ff;cursor: pointer" ng-click=fmFinanceFieldCtrl.initCondition(first)>详情</td></tr><tr class=trHover><td ng-bind=fmFinanceFieldCtrl.all.ipName></td><td ng-bind=fmFinanceFieldCtrl.all.payment.cashAll></td><td ng-bind=fmFinanceFieldCtrl.all.payment.member></td><td ng-bind=fmFinanceFieldCtrl.all.payment.member_vir></td><td ng-bind=fmFinanceFieldCtrl.all.payment.member_spe></td><td ng-bind=fmFinanceFieldCtrl.all.payment.refund></td><td ng-bind=fmFinanceFieldCtrl.all.payment.subtotal style="color: #20a0ff"></td><td style="color: #20a0ff;cursor: pointer" ng-click=fmFinanceFieldCtrl.initCondition(fmFinanceFieldCtrl.all)>详情</td></tr><tr class=trHover><td colspan=1>制表人：</td><td colspan=1></td><td colspan=1>复核人：</td><td colspan=1></td><td colspan=1>审核人：</td><td colspan=3></td></tr></table></div></div></div></div></div></div><style>table{\n        border:1px solid #000;\n        text-align: center;\n        margin-top: 20px;\n    }\n    tr{\n        border:1px solid #000;\n    }\n    td{\n        border:1px solid #000;\n        padding:5px; \n    }</style><!-- 纠错操作 --><div class=bgGary ng-show=fmFinanceFieldCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=fmFinanceFieldCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{fmFinanceFieldCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="fmFinanceFieldCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{fmFinanceFieldCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="fmFinanceFieldCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=fmFinanceFieldCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=fmFinanceFieldCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=fmFinanceFieldCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=fmFinanceFieldCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 预览详情 --><div class=bgGary ng-show=fmFinanceFieldCtrl.showDetail><div class=middle><div id=box class="form_div center" style="width: 110rem;height: 700px;overflow-y: auto;padding: 20px;padding-bottom: 50px;border-radius: 10px;box-shadow: #ccc 0 0 3px 3px"><div><div class="form_title float_left">详情</div><img src=assets/images/close.png class="float_right pointer" ng-click=fmFinanceFieldCtrl.close()><div class=clear></div></div><div><div style="height: 36px;line-height: 34px;margin-top: 20px;float: left" ng-hide="fmFinanceFieldCtrl.searchStatus==\'other\'"><div class="fbonce_t_Title fbonce_t_once bgcolorB" ng-click="fmFinanceFieldCtrl.changeStatus(\'field\')">场地消费</div><div class="fbonce_t_Title fbonce_t_long" ng-click="fmFinanceFieldCtrl.changeStatus(\'other\')">其他消费</div><div class=clear></div></div><div style="height: 36px;line-height: 34px;margin-top: 20px;float: left" ng-show="fmFinanceFieldCtrl.searchStatus==\'other\'"><div class="fbonce_t_Title fbonce_t_once" ng-click="fmFinanceFieldCtrl.changeStatus(\'field\')">场地消费</div><div class="fbonce_t_Title fbonce_t_long bgcolorB" ng-click="fmFinanceFieldCtrl.changeStatus(\'other\')">其他消费</div><div class=clear></div></div><div style="float: left;margin-top: 20px;margin-left: 20px;background: #fff" ng-show="fmFinanceFieldCtrl.searchStatus==\'other\'"><div style="float: left" id=search class="xt_searchBox float_left"><input class=xt_searchInput style="text-indent: 10px" placeholder=请输入备注 ng-model=fmFinanceFieldCtrl.searchRecordRemark><div class=xt_searchImage ng-click=fmFinanceFieldCtrl.searchDetail()></div></div><div class=clear></div></div><div style="float: left;margin-top: 20px;margin-left: 20px;background: #fff" ng-show="fmFinanceFieldCtrl.searchStatus==\'other\'"><div style="float: left" id=search class="xt_searchBox float_left"><input class=xt_searchInput style="text-indent: 10px" placeholder=请输入联系人 ng-model=fmFinanceFieldCtrl.searchProductContacts><div class=xt_searchImage ng-click=fmFinanceFieldCtrl.searchDetail()></div></div><div class=clear></div></div><div class="select field_select" style="margin-top: 20px;margin-left: 20px" ng-show="fmFinanceFieldCtrl.searchStatus==\'other\'"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmFinanceFieldCtrl.searchSecond==\'选择二级分类\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmFinanceFieldCtrl.searchSecond ng-click="fmFinanceFieldCtrl.openShowSearchSecond=!fmFinanceFieldCtrl.openShowSearchSecond">场馆1</div></div><div class=form_select_div style="position:relative;z-index: 100" ng-show=fmFinanceFieldCtrl.openShowSearchSecond><div class="select_cell pointer ellipsis" ng-repeat="second in fmFinanceFieldCtrl.secondCategories" ng-bind=second.name ng-click=fmFinanceFieldCtrl.chooseSecond(second)>默认按钮</div></div></div><div class="select field_select" style="margin-top: 20px;margin-left: 20px" ng-show="fmFinanceFieldCtrl.searchStatus==\'other\'"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmFinanceFieldCtrl.searchProduct==\'选择综合服务\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmFinanceFieldCtrl.searchProduct ng-click="fmFinanceFieldCtrl.openShowSearchProduct=!fmFinanceFieldCtrl.openShowSearchProduct">场馆1</div></div><div class=form_select_div style="position:relative;z-index: 100" ng-show=fmFinanceFieldCtrl.openShowSearchProduct><div class="select_cell pointer ellipsis" ng-repeat="product in fmFinanceFieldCtrl.products" ng-bind=product.name title={{product.name}} ng-click=fmFinanceFieldCtrl.chooseProduct(product)>默认按钮</div></div></div><div style="margin-top: 20px"><div class="button2_normal float_right pointer" style="margin:0 20px" ng-click=fmFinanceFieldCtrl.exportDetail()>导出</div></div><div class=clear></div></div><div class=cancelTable><div class="cancelThTr height_40"><div class="cancelTh width_13 ellipsis" style="text-indent: 20px">订单时间</div><div class="cancelTh width_10 ellipsis">用户名</div><div class="cancelTh width_8 ellipsis">金额</div><div class="cancelTh width_38 ellipsis">详情</div><div class="cancelTh width_15 ellipsis">提交人</div><div class="cancelTh width_13" style="position: relative"><div class=ellipsis style="float:left;max-width: 90px" ng-bind=fmFinanceFieldCtrl.showPaymentName>支付方式</div><div class=downBtn ng-click="fmFinanceFieldCtrl.showChoosePaymentBox=!fmFinanceFieldCtrl.showChoosePaymentBox"></div><div class="form_select_div finance_selectBox" ng-show=fmFinanceFieldCtrl.showChoosePaymentBox><div class="select_cell pointer ellipsis" ng-repeat="payment in fmFinanceFieldCtrl.paymentArr" ng-bind=payment.name ng-click=fmFinanceFieldCtrl.choosePaymentName(payment)>默认按钮</div></div></div><div class="cancelTh width_8 ellipsis">操作</div></div><div class=cancelTr ng-repeat="record in fmFinanceFieldCtrl.recordsDetail" style="{{record.state?\'background: #f2f2f2\':\'\'}}"><div class="cancelTd width_13 ellipsis" ng-bind="record.checkDate?record.checkDate:record.createDate | date:\'yyyy-MM-dd HH:mm:ss\'" style="text-indent: 20px"></div><div class="cancelTd width_10 ellipsis" ng-bind=record.name></div><div class="cancelTd width_8 ellipsis" ng-bind="record.cost | currency:\'\'"></div><div class="cancelTd width_38 ellipsis" ng-bind="record.description+\' \'+(record.remark?\'(备注：\'+record.remark+\')\':\'\')+(record.productContacts?\'(附加联系人：\'+record.productContacts+\')\':\'\')" title="{{record.description+\' \'+(record.remark?\'(备注：\'+record.remark+\')\':\'\')+(record.productContacts?\'(附加联系人：\'+record.productContacts+\')\':\'\')}}"></div><div class="cancelTd width_15 ellipsis" ng-bind="record.workerName==\'微信\'?\'微信用户\':record.workerName"></div><div class="cancelTd width_13 ellipsis" ng-bind=record.payment></div><div class="cancelTd width_8 ellipsis" ng-hide=record.state><span style="cursor: pointer;color: #8492a6" ng-click=fmFinanceFieldCtrl.openErrChangeBox(record._id)>纠错</span></div><div class="cancelTd width_8 ellipsis" ng-show=record.state>纠错单</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="fmFinanceFieldCtrl.pagination.numPages > 1" total-items=fmFinanceFieldCtrl.pagination.totalItems ng-model=fmFinanceFieldCtrl.pagination.page items-per-page=fmFinanceFieldCtrl.pagination.itemsPerPage max-size=fmFinanceFieldCtrl.pagination.maxSize boundary-links="{{fmFinanceFieldCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmFinanceFieldCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmFinanceFieldCtrl.pageChanged()></pagination><div class=float_right style="margin-top: 20px;font-size: 16px"><span>总金额：</span> <span style="color: #ff4949" ng-bind="\'￥\'+fmFinanceFieldCtrl.cost">100</span></div></div></div></div><div style="width: 0;height: 0;overflow: hidden"><table id=alltable2><tr><td>订单时间</td><td>用户名</td><td>金额</td><td>详情</td><td>提交人</td><td>支付方式</td></tr><tr ng-repeat="record in fmFinanceFieldCtrl.exportRecordsDetail"><td ng-bind="record.checkDate?record.checkDate:record.createDate | date:\'yyyy-MM-dd HH:mm:ss\'"></td><td ng-bind=record.name></td><td ng-bind="record.cost | currency:\'\'"></td><td ng-bind="record.description+\' \'+(record.remark?\'(备注：\'+record.remark+\')\':\'\')+(record.productContacts?\'(附加联系人：\'+record.productContacts+\')\':\'\')"></td><td ng-bind="record.workerName==\'微信\'?\'微信用户\':record.workerName"></td><td ng-bind=record.payment></td></tr></table></div><!-- 成功提示 --><div class=bgGary ng-show=fmFinanceFieldCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmFinanceFieldCtrl.wordOK>22212</div><div class=promptClose ng-click=fmFinanceFieldCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmFinanceFieldCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=fmFinanceFieldCtrl.wordERR>22212</div><div class=promptClose ng-click=fmFinanceFieldCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmFinanceFieldCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=fmFinanceFieldCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'),
            a.put("app/fieldmanager/finance/preporder/finance-preporder.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-finance-cashall>营业收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-finance-field>场地/综合服务收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-finance-shop>小卖部收入</div><div class="field_titleNormal field_titleChoose">微信/支付宝</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-service-count>包玉刚运动人数明细表</div></div><div class=field_bookBoxPostition><div><div><div class=field_selectBoxOne style="height: auto"><div><div><div class=field_selectName style="text-indent: 0;width: 80px">选择日期</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="fmFinancePrepCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="fmFinancePrepCtrl.showChooseStartDateBox=!fmFinancePrepCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=fmFinancePrepCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=fmFinancePrepCtrl.closeChooseStartDateBox() ng-date=fmFinancePrepCtrl.startDate></datetimepick></div></div><div class=float_left style="height: 40px;line-height: 40px;padding: 0 10px">至</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="fmFinancePrepCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="fmFinancePrepCtrl.showChooseEndDateBox=!fmFinancePrepCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=fmFinancePrepCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=fmFinancePrepCtrl.closeChooseEndDateBox() ng-date=fmFinancePrepCtrl.endDate></datetimepick></div></div><div ng-show="fmFinancePrepCtrl.searchVenueIdArr.length>0"><div class="button2_normal float_right pointer" style="margin:0 20px" ng-click=fmFinancePrepCtrl.export()>导出</div></div><div style=clear:both></div></div><div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择场馆</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="venue in fmFinancePrepCtrl.venues" ng-click="(venue.image==\'manyChoose_imageG\')?\'\':fmFinancePrepCtrl.chooseVenueName(venue)"><div class="singleChoose_imageBox {{venue.image}} {{venue.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=venue.name style="{{venue.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择提交人</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="worker in fmFinancePrepCtrl.workers" ng-click="(worker.image==\'manyChoose_imageG\')?\'\':fmFinancePrepCtrl.chooseWorkerName(worker)"><div class="singleChoose_imageBox {{worker.image}} {{worker.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=worker.name style="{{worker.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div style=clear:both></div></div></div></div></div><!-- 阿宝版本 --><!-- 阿宝版本 --><table id=alltable style="width: 106rem"><tr><td colspan=24><span>中心微信支付宝收入汇总表：</span> <span ng-bind=fmFinancePrepCtrl.venueName></span></td></tr><tr><td colspan=24><span>时间范围：</span> <span ng-bind=fmFinancePrepCtrl.dateName></span></td></tr><tr><td rowspan=2>柜员名称</td><td colspan=10>支付宝</td><td colspan=11>微信</td><td rowspan=2 style="color: #20a0ff">合计</td><td rowspan=2>详情</td></tr><tr><td>场地收入</td><td>柜台充值</td><td>综合服务费</td><td>会员服务费</td><td>小卖部</td><td>门票</td><td>工本费</td><td>卡押金</td><td>专用账户充值</td><td style="color: #20a0ff">合计</td><td>场地收入</td><td>线上充值</td><td>柜台充值</td><td>综合服务费</td><td>会员服务费</td><td>小卖部</td><td>门票</td><td>工本费</td><td>卡押金</td><td>专用账户充值</td><td style="color: #20a0ff">合计</td></tr><tr class=trHover ng-repeat="worker in fmFinancePrepCtrl.result"><td ng-bind=worker.workerName></td><td ng-bind=worker.payment.alipay.field></td><td ng-bind=worker.payment.alipay.charge></td><td ng-bind=worker.payment.alipay.product></td><td ng-bind=worker.payment.alipay.memberService></td><td ng-bind=worker.payment.alipay.shopProduct></td><td ng-bind=worker.payment.alipay.ticket></td><td ng-bind=worker.payment.alipay.cardFee></td><td ng-bind=worker.payment.alipay.bail></td><td ng-bind=worker.payment.alipay.chargeSpe></td><td ng-bind=worker.payment.alipay.subtotal style="color: #20a0ff"></td><td ng-bind=worker.payment.wx.field></td><td ng-bind=worker.payment.wx.charge_online></td><td ng-bind=worker.payment.wx.charge></td><td ng-bind=worker.payment.wx.product></td><td ng-bind=worker.payment.wx.memberService></td><td ng-bind=worker.payment.wx.shopProduct></td><td ng-bind=worker.payment.wx.ticket></td><td ng-bind=worker.payment.wx.cardFee></td><td ng-bind=worker.payment.wx.bail></td><td ng-bind=worker.payment.wx.chargeSpe></td><td ng-bind=worker.payment.wx.subtotal style="color: #20a0ff"></td><td ng-bind=worker.payment.subtotal style="color: #20a0ff"></td><td style="color: #20a0ff;cursor: pointer" ng-click=fmFinancePrepCtrl.initCondition(worker.workerName)>详情</td></tr><tr class=trHover><td colspan=2>制表人：</td><td colspan=3></td><td colspan=2>复核人：</td><td colspan=3></td><td colspan=2>审核人：</td><td colspan=12></td></tr></table></div></div></div></div></div></div><style>table{\n        border:1px solid #000;\n        text-align: center;\n        margin-top: 20px;\n    }\n    tr{\n        border:1px solid #000;\n    }\n    td{\n        border:1px solid #000;\n        padding:5px; \n    }</style><!-- 纠错操作 --><div class=bgGary ng-show=fmFinancePrepCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=fmFinancePrepCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{fmFinancePrepCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="fmFinancePrepCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{fmFinancePrepCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="fmFinancePrepCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=fmFinancePrepCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=fmFinancePrepCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=fmFinancePrepCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=fmFinancePrepCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 预览详情 --><div class=bgGary ng-show=fmFinancePrepCtrl.showDetail><div class=middle><div id=box class="form_div center" style="width: 110rem;height: 650px;overflow-y: auto;padding: 20px;padding-bottom: 50px;border-radius: 10px;box-shadow: #ccc 0 0 3px 3px"><div><div class="form_title float_left">详情</div><img src=assets/images/close.png class="float_right pointer" ng-click=fmFinancePrepCtrl.close()></div><div class=clear></div><div class=cancelTable><div class="cancelThTr height_40"><div class="cancelTh width_21 ellipsis" style="text-indent: 20px">订单时间</div><!-- <div  class="cancelTh width_10 ellipsis">用户名</div> --><div class="cancelTh width_21 ellipsis">金额</div><div class="cancelTh width_21 ellipsis">详情</div><div class="cancelTh width_21 ellipsis">提交人</div><div class="cancelTh width_21" style="position: relative"><div class=ellipsis style="float:left;max-width: 90px" ng-bind=fmFinancePrepCtrl.showPaymentName>支付方式</div><div class=downBtn ng-click="fmFinancePrepCtrl.showChoosePaymentBox=!fmFinancePrepCtrl.showChoosePaymentBox"></div><div class="form_select_div finance_selectBox" ng-show=fmFinancePrepCtrl.showChoosePaymentBox><div class="select_cell pointer ellipsis" ng-repeat="payment in fmFinancePrepCtrl.paymentArr" ng-bind=payment.name ng-click=fmFinancePrepCtrl.choosePaymentName(payment)>默认按钮</div></div></div></div><div class=cancelTr ng-repeat="preporder in fmFinancePrepCtrl.prepordersDetail" style="{{record.state?\'background: #f2f2f2\':\'\'}}"><div class="cancelTd width_21 ellipsis" ng-bind="preporder.createDate | date:\'yyyy-MM-dd HH:mm:ss\'" style="text-indent: 20px"></div><!-- <div class="cancelTd width_10 ellipsis" ng-bind="preporder.name"></div> --><div class="cancelTd width_21 ellipsis" ng-bind=preporder.total_fee></div><div class="cancelTd width_21 ellipsis" ng-bind=preporder.status title={{record.status}}></div><div class="cancelTd width_21 ellipsis" ng-bind=preporder.workerName></div><div class="cancelTd width_21 ellipsis" ng-bind=preporder.payment></div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="fmFinancePrepCtrl.pagination.numPages > 1" total-items=fmFinancePrepCtrl.pagination.totalItems ng-model=fmFinancePrepCtrl.pagination.page items-per-page=fmFinancePrepCtrl.pagination.itemsPerPage max-size=fmFinancePrepCtrl.pagination.maxSize boundary-links="{{fmFinancePrepCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmFinancePrepCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmFinancePrepCtrl.pageChanged()></pagination></div></div></div><!-- 导出xls --><div style="width: 0px;height: 0px;overflow: hidden"><table id=alltable><tr><td ng-bind="fmFinancePrepCtrl.venueName+\'的柜员微信/支付宝结算收银报表\'" colspan=5 style="text-align: center"></td></tr><tr><td>柜员</td><td>现金支付</td><td>微信支付</td><td>支付宝支付</td><td>合计</td></tr><tr ng-repeat="worker in fmFinancePrepCtrl.result"><td ng-bind=worker.name>1</td><td ng-bind=worker.cash>1</td><td ng-bind=worker.wx>1</td><td ng-bind=worker.alipay>1</td><td ng-bind=worker.all>1</td></tr></table></div><!-- 预览 --><div class=bgGary ng-show=fmFinancePrepCtrl.showPreview><div class=middle><div id=box class="form_div center" style="width: 560px;padding: 20px"><div><div class="form_title float_left" ng-bind="fmFinancePrepCtrl.venueName+\'的柜员微信/支付宝结算收银报表\'"></div><img src=assets/images/close.png class="float_right pointer" ng-click="fmFinancePrepCtrl.showPreview=false"></div><div class=clear></div><div class=form_error_font></div><div class=cancelTable><div class="cancelThTr height_40" style="width: 520px"><div class="cancelTh width_100">柜员</div><div class="cancelTh width_100">微信支付</div><div class="cancelTh width_100">支付宝支付</div><div class="cancelTh width_100">合计</div></div><div class=cancelTr ng-repeat="worker in fmFinancePrepCtrl.result" style="width: 520px"><div class="cancelTd width_100" ng-bind=worker.name>1</div><div class="cancelTd width_100" ng-bind=worker.wx>1</div><div class="cancelTd width_100" ng-bind=worker.alipay>1</div><div class="cancelTd width_100" ng-bind=worker.all>1</div></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=fmFinancePrepCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmFinancePrepCtrl.wordOK>22212</div><div class=promptClose ng-click=fmFinancePrepCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmFinancePrepCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=fmFinancePrepCtrl.wordERR>22212</div><div class=promptClose ng-click=fmFinancePrepCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmFinancePrepCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=fmFinancePrepCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/fieldmanager/finance/service/service-count.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-finance-cashall>营业收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-finance-field>场地/综合服务收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-finance-shop>小卖部收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-finance-prep>微信/支付宝</div><div class="field_titleNormal field_titleChoose">包玉刚运动人数明细表</div></div><div class=field_bookBoxPostition><div><div><div class=field_selectBoxOne style="height: auto"><div><div><div class=field_selectName style="text-indent: 0;width: 80px">选择日期</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="fmServiceCountCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="fmServiceCountCtrl.showChooseStartDateBox=!fmServiceCountCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=fmServiceCountCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=fmServiceCountCtrl.closeChooseStartDateBox() ng-date=fmServiceCountCtrl.startDate></datetimepick></div></div><div class=float_left style="height: 40px;line-height: 40px;padding: 0 10px">至</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="fmServiceCountCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="fmServiceCountCtrl.showChooseEndDateBox=!fmServiceCountCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=fmServiceCountCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=fmServiceCountCtrl.closeChooseEndDateBox() ng-date=fmServiceCountCtrl.endDate></datetimepick></div></div><div><div class="button2_normal float_right" style="margin:0 20px" ng-click="fmServiceCountCtrl.export(\'alltable\')">导出</div></div><div style=clear:both></div></div></div></div></div><div><table id=alltable style="width: 100%"><tr><td colspan=2><span>会员卡使用明细表</span> <span ng-bind=fmServiceCountCtrl.venueName></span></td></tr><tr><td colspan=2><span>时间范围：</span> <span ng-bind=fmServiceCountCtrl.dateName></span></td></tr><tr><td>名称</td><td>次数</td></tr><tr class=trHover ng-repeat="ticket in fmServiceCountCtrl.useCount.ticketArr"><td ng-bind=ticket.ticketName>1</td><td ng-bind=ticket.count>1</td></tr><tr class=trHover ng-repeat="service in fmServiceCountCtrl.useCount.historyArr"><td ng-bind=service.memberServiceName>1</td><td ng-bind=service.count>1</td></tr></table></div><div style="margin-top: 20px;margin-bottom: 20px"><span style="margin-right: 20px" ng-bind="\'所有使用人数：\'+fmServiceCountCtrl.useCount.allCount+\'人\'"></span> <span style="margin-right: 20px" ng-bind="\'时间卡：\'+fmServiceCountCtrl.useCount.dateCount+\'人\'"></span> <span style="margin-right: 20px" ng-bind="\'次数卡：\'+fmServiceCountCtrl.useCount.timeCount+\'人\'"></span> <span style="margin-right: 20px" ng-bind="\'0元票：\'+fmServiceCountCtrl.useCount.ticketCountNoPrice+\'人\'"></span> <span style="margin-right: 20px" ng-bind="\'其他票：\'+fmServiceCountCtrl.useCount.ticketCount+\'人\'"></span></div></div></div></div></div></div></div><style>table{\n        border:1px solid #000;\n        text-align: center;\n        margin-top: 20px;\n    }\n    tr{\n        border:1px solid #000;\n    }\n    td{\n        border:1px solid #000;\n        padding:5px; \n    }</style><!-- 纠错操作 --><div class=bgGary ng-show=fmServiceCountCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=fmServiceCountCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{fmServiceCountCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="fmServiceCountCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{fmServiceCountCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="fmServiceCountCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=fmServiceCountCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=fmServiceCountCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=fmServiceCountCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=fmServiceCountCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 预览详情 --><div class=bgGary ng-show=fmServiceCountCtrl.showDetail><div class=middle><div id=box class="form_div center" style="width: 110rem;height: 650px;overflow-y: auto;padding: 20px;padding-bottom: 50px;border-radius: 10px;box-shadow: #ccc 0 0 3px 3px"><div><div class="form_title float_left">详情</div><img src=assets/images/close.png class="float_right pointer" ng-click=fmServiceCountCtrl.close()></div><div class=clear></div><div class=cancelTable><div class="cancelThTr height_40"><div class="cancelTh width_13 ellipsis" style="text-indent: 20px">订单时间</div><div class="cancelTh width_10 ellipsis">用户名</div><div class="cancelTh width_8 ellipsis">金额</div><div class="cancelTh width_38 ellipsis">详情</div><div class="cancelTh width_15 ellipsis">提交人</div><div class="cancelTh width_13" style="position: relative"><div class=ellipsis style="float:left;max-width: 90px" ng-bind=fmServiceCountCtrl.showPaymentName>支付方式</div><div class=downBtn ng-click="fmServiceCountCtrl.showChoosePaymentBox=!fmServiceCountCtrl.showChoosePaymentBox"></div><div class="form_select_div finance_selectBox" ng-show=fmServiceCountCtrl.showChoosePaymentBox><div class="select_cell pointer ellipsis" ng-repeat="payment in fmServiceCountCtrl.paymentArr" ng-bind=payment.name ng-click=fmServiceCountCtrl.choosePaymentName(payment)>默认按钮</div></div></div><div class="cancelTh width_8 ellipsis">操作</div></div><div class=cancelTr ng-repeat="record in fmServiceCountCtrl.recordsDetail" style="{{record.state?\'background: #f2f2f2\':\'\'}}"><div class="cancelTd width_13 ellipsis" ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm:ss\'" style="text-indent: 20px"></div><div class="cancelTd width_10 ellipsis" ng-bind=record.name></div><div class="cancelTd width_8 ellipsis" ng-bind="record.cost | currency:\'\'"></div><div class="cancelTd width_38 ellipsis" ng-bind="record.description+\' \'+(record.remark?\'(\'+record.remark+\')\':\'\')" title="{{record.description+\' \'+(record.remark?\'(\'+record.remark+\')\':\'\')}}"></div><div class="cancelTd width_15 ellipsis" ng-bind="record.workerName==\'微信\'?\'微信用户\':record.workerName"></div><div class="cancelTd width_13 ellipsis" ng-bind=record.payment></div><div class="cancelTd width_8 ellipsis" ng-hide=record.state><span style="cursor: pointer;color: #8492a6" ng-click=fmServiceCountCtrl.openErrChangeBox(record._id)>纠错</span></div><div class="cancelTd width_8 ellipsis" ng-show=record.state>纠错单</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="fmServiceCountCtrl.pagination.numPages > 1" total-items=fmServiceCountCtrl.pagination.totalItems ng-model=fmServiceCountCtrl.pagination.page items-per-page=fmServiceCountCtrl.pagination.itemsPerPage max-size=fmServiceCountCtrl.pagination.maxSize boundary-links="{{fmServiceCountCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmServiceCountCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmServiceCountCtrl.pageChanged()></pagination></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=fmServiceCountCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmServiceCountCtrl.wordOK>22212</div><div class=promptClose ng-click=fmServiceCountCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmServiceCountCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=fmServiceCountCtrl.wordERR>22212</div><div class=promptClose ng-click=fmServiceCountCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmServiceCountCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=fmServiceCountCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/fieldmanager/finance/shop/finance-shop.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-finance-cashall>营业收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-finance-field>场地/综合服务收入</div><div class="field_titleNormal field_titleChoose">小卖部收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-finance-prep>微信/支付宝</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-service-count>包玉刚运动人数明细表</div></div><div class=field_bookBoxPostition><div><div><div class=field_selectBoxOne style="height: auto"><div><div><div class=field_selectName style="text-indent: 0;width: 80px">选择日期</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="fmFinanceShopCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="fmFinanceShopCtrl.showChooseStartDateBox=!fmFinanceShopCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=fmFinanceShopCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=fmFinanceShopCtrl.closeChooseStartDateBox() ng-date=fmFinanceShopCtrl.startDate></datetimepick></div></div><div class=float_left style="height: 40px;line-height: 40px;padding: 0 10px">至</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="fmFinanceShopCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="fmFinanceShopCtrl.showChooseEndDateBox=!fmFinanceShopCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=fmFinanceShopCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=fmFinanceShopCtrl.closeChooseEndDateBox() ng-date=fmFinanceShopCtrl.endDate></datetimepick></div></div><div ng-show="fmFinanceShopCtrl.searchVenueIdArr.length>0"><div class="button2_normal float_right pointer" style="margin:0 20px" ng-click=fmFinanceShopCtrl.export()>导出</div></div><div style=clear:both></div></div><div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择场馆</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="venue in fmFinanceShopCtrl.venues" ng-click="(venue.image==\'manyChoose_imageG\')?\'\':fmFinanceShopCtrl.chooseVenueName(venue)"><div class="singleChoose_imageBox {{venue.image}} {{venue.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=venue.name style="{{venue.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择提交人</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="worker in fmFinanceShopCtrl.workers" ng-click="(worker.image==\'manyChoose_imageG\')?\'\':fmFinanceShopCtrl.chooseWorkerName(worker)"><div class="singleChoose_imageBox {{worker.image}} {{worker.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=worker.name style="{{worker.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div style=clear:both></div></div></div></div></div><table id=alltable style="width: 106rem"><tr><td colspan=11><span>小卖部消费汇总表：</span> <span ng-bind=fmFinanceShopCtrl.venueName></span></td></tr><tr><td colspan=11><span>时间范围：</span> <span ng-bind=fmFinanceShopCtrl.dateName></span></td></tr><tr><td>柜员名</td><td>现金支付</td><td>微信支付</td><td>支付宝支付</td><td>转账支付</td><td>支票支付</td><td>POS机支付</td><td>余额支付</td><td>退款</td><td style="color: #20a0ff">合计</td><td>详情</td></tr><tr class=trHover ng-repeat="worker in fmFinanceShopCtrl.records"><td ng-bind=worker.workerName></td><td ng-bind=worker.payment.cash></td><td ng-bind=worker.payment.wx></td><td ng-bind=worker.payment.alipay></td><td ng-bind=worker.payment.card></td><td ng-bind=worker.payment.check></td><td ng-bind=worker.payment.pos></td><td ng-bind=worker.payment.member></td><td ng-bind=worker.payment.refund></td><td ng-bind=worker.payment.subtotal style="color: #20a0ff"></td><td style="color: #20a0ff;cursor: pointer" ng-click=fmFinanceShopCtrl.initCondition(worker._worker,worker.workerName)>详情</td></tr><tr class=trHover><td colspan=1>制表人：</td><td colspan=1></td><td colspan=1>复核人：</td><td colspan=1></td><td colspan=1>审核人：</td><td colspan=6></td></tr></table></div></div></div></div></div></div><style>table{\n        border:1px solid #000;\n        text-align: center;\n        margin-top: 20px;\n    }\n    tr{\n        border:1px solid #000;\n    }\n    td{\n        border:1px solid #000;\n        padding:5px; \n    }</style><!-- 纠错操作 --><div class=bgGary ng-show=fmFinanceShopCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=fmFinanceShopCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{fmFinanceShopCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="fmFinanceShopCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{fmFinanceShopCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="fmFinanceShopCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=fmFinanceShopCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=fmFinanceShopCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=fmFinanceShopCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=fmFinanceShopCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 预览详情 --><div class=bgGary ng-show=fmFinanceShopCtrl.showDetail><div class=middle><div id=box class="form_div center" style="width: 63rem;max-height: 650px;overflow-y: auto;padding: 20px;padding-bottom: 50px;border-radius: 10px;box-shadow: #ccc 0 0 3px 3px"><div><div class="form_title float_left">小卖部消费明细表</div><img src=assets/images/close.png class="float_right pointer" ng-click=fmFinanceShopCtrl.close()></div><div class=clear></div><table id=table style="width: 60rem"><tr><td colspan=6><span ng-bind=fmFinanceShopCtrl.workerName></span> <span>的小卖部消费明细表：</span> <span ng-bind=fmFinanceShopCtrl.venueName></span></td></tr><tr><td colspan=6><span>时间范围：</span> <span ng-bind=fmFinanceShopCtrl.dateName></span></td></tr><tr><td colspan=2>商品名称</td><td colspan=1>余额支付</td><td colspan=1>非余额支付</td><td colspan=1>数量</td><td colspan=1>金额</td></tr><tr class=trHover ng-repeat="shop in fmFinanceShopCtrl.shopDetails"><td colspan=2 ng-bind=shop.name></td><td colspan=1 ng-bind=shop.member></td><td colspan=1 ng-bind=shop.noMember></td><td colspan=1 ng-bind=shop.quantity></td><td colspan=1 ng-bind=shop.subTotal></td></tr><tr class=trHover><td style="width: 10rem" colspan=1>制表人：</td><td style="width: 10rem" colspan=1 ng-bind=fmFinanceShopCtrl.workerName></td><td style="width: 10rem" colspan=1>复核人：</td><td style="width: 10rem" colspan=1></td><td style="width: 10rem" colspan=1>审核人：</td><td style="width: 10rem" colspan=1></td></tr></table><div><div class="button2_normal pointer" style="margin-top:20px;width: 80px" ng-click="fmFinanceShopCtrl.export(\'table\')">导出</div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=fmFinanceShopCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmFinanceShopCtrl.wordOK>22212</div><div class=promptClose ng-click=fmFinanceShopCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmFinanceShopCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=fmFinanceShopCtrl.wordERR>22212</div><div class=promptClose ng-click=fmFinanceShopCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmFinanceShopCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=fmFinanceShopCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/fieldmanager/head/head.html", '<div ng-controller="HeadCtrl as headCtrl" style="height:65px;line-height:65px;border-bottom:1px solid #94A8BA"><div style="width: 100rem;height: 65px;margin:0 auto;border:1px solid red;padding: 0 3rem"><div style="width: 50rem;font-size: 24px;font-weight: bold;float: left">场地使用管理系统</div><div><img src=assets/images/blackdownG.png ng-click="headCtrl.outFlag = true" class="float_right pointer" style="width:16px;margin:26px 20px 0 10px"><div class="float_right pointer" ng-click="headCtrl.outFlag = true" ng-bind=headCtrl.admin>管理员</div></div></div></div><div class=bgGary ng-show=headCtrl.outFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>是否退出该账号</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click="headCtrl.outFlag = false">取消</div><div class="button_normal float_right" ng-click=headCtrl.logout()>退出</div><div class=clear></div></div></div></div></div>'),
            a.put("app/fieldmanager/member/member-detail-info.html", '<div style="min-width: 900px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div style=margin:20px><div class="float_left pointer" ui-sref=fm-member>会员管理</div><img class=float_left src=assets/images/gang.png style="height:16px;margin:-0px 5px"><div class=float_left style=color:#99a9bf ng-bind=fmMemberDetailCtrl.member.name></div><div class=clear></div></div><div class=field_titleBox><div class="field_titleNormal field_titleChoose">基本信息</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-member-detail.record>消费&充值记录</div><div class=clear></div></div><div style="margin-left: 20px"><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">会员姓名</div><input class="float_left width_355" style="border:1px solid #ddd;border-radius:4px;height:40px;margin-top:20px;padding:0 0 0 10px" ng-change=fmMemberDetailCtrl.judge() ng-model="fmMemberDetailCtrl.name"><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">手机号码</div><input class="float_left width_355" style="border:1px solid #ddd;border-radius:4px;height:40px;margin-top:20px;padding:0 0 0 10px" ng-change=fmMemberDetailCtrl.judge() ng-model="fmMemberDetailCtrl.tel"><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">身份证号</div><input class="float_left width_355" style="border:1px solid #ddd;border-radius:4px;height:40px;margin-top:20px;padding:0 0 0 10px" ng-change=fmMemberDetailCtrl.judge() ng-model="fmMemberDetailCtrl.idCard"><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">会员卡号</div><div class="float_left width_355" style="border:1px solid #ddd;border-radius:4px;height:40px;margin-top:20px;padding:12px 0 0 10px" ng-bind="fmMemberDetailCtrl.member.cardNo?fmMemberDetailCtrl.member.cardNo:\'暂无\'">小七</div><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">会员类型</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!fmMemberDetailCtrl.chooseTypeFlag,\'select_foucs\':fmMemberDetailCtrl.chooseTypeFlag}" style="margin:20px 0 0 0" ng-click="fmMemberDetailCtrl.chooseTypeFlag = !fmMemberDetailCtrl.chooseTypeFlag"><div class="form_down_icon form_width_354 form_select_value_choose" ng-bind=fmMemberDetailCtrl.typeName></div><div class="form_select_div form_width_354" ng-show=fmMemberDetailCtrl.chooseTypeFlag><div ng-click=fmMemberDetailCtrl.chooseType(type) class="select_cell pointer" ng-repeat="type in fmMemberDetailCtrl.types" ng-bind=type.name onclick="event.cancelBubble = true">默认按钮</div></div></div><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">现金账户</div><div class=float_left><div class=width_355 style="border:1px solid #ddd;border-radius:4px;padding:10px;margin-top:20px"><div><span>￥</span><span ng-bind="fmMemberDetailCtrl.member.cards.length>0?fmMemberDetailCtrl.member.cards[0].total:\'0\'">999</span></div></div></div><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">虚拟账户</div><div class=float_left><div class=width_355 style="border:1px solid #ddd;border-radius:4px;padding:10px;margin-top:20px;height:36px"><div class=float_left>￥</div><div class=float_left ng-bind=fmMemberDetailCtrl.member.virtualAccount.total>999</div><div class=float_right style=color:#999 ng-bind="fmMemberDetailCtrl.member.virtualAccount.expires_in?(fmMemberDetailCtrl.member.virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期\':\'无\'">999</div></div></div><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px" ng-show="fmMemberDetailCtrl.speAccount.length > 0">专用账户</div><div class=float_left ng-show="fmMemberDetailCtrl.speAccount.length > 0"><div ng-repeat="account in fmMemberDetailCtrl.speAccount"><div class=width_355 style="border:1px solid #ddd;border-radius:4px;padding:10px;margin-top:20px;height:36px"><div class=float_left>￥</div><div class=float_left ng-bind=account.total>999</div><div class=float_right style=color:#999 ng-bind=account.name>999</div></div><div class=clear></div></div></div><div class=clear></div><div class="button2_normal float_left" style="margin:20px 20px 0 120px" ng-show=fmMemberDetailCtrl.judgeFlag ng-click=fmMemberDetailCtrl.update()>保存</div><div class="button2_normal float_left" style="margin:20px 20px 0 120px;background:#ccc" ng-show=!fmMemberDetailCtrl.judgeFlag>保存</div><div class="button2_normal float_left" style="background:#ccc;margin:20px 20px 0 0px" ng-click="fmMemberDetailCtrl.refundFlag = true">退余额</div></div><div class=bgGary ng-show=fmMemberDetailCtrl.refundFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">退余额</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmMemberDetailCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入退款金额 ng-class="{\'\':!fmMemberDetailCtrl.priceFlag,\'form_value_error\':fmMemberDetailCtrl.priceFlag}" ng-model="fmMemberDetailCtrl.price"></div><div class=clear></div><div class=form_error_font ng-show=!fmMemberDetailCtrl.priceFlag></div><div class=form_error_font ng-show=fmMemberDetailCtrl.priceFlag>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmMemberDetailCtrl.refund()>确认退还</div><div class="button_normal float_right" ng-click=fmMemberDetailCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=fmMemberDetailCtrl.toastFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/rectangle2.png"><div class="float_left form_marginL_15px">保存成功</div></div></div></div><div class=bgGary ng-show=fmMemberDetailCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>退款成功</div><div class=promptClose ng-click="fmMemberDetailCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary style=z-index:999 ng-show=fmMemberDetailCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=fmMemberDetailCtrl.wordERR>22212</div><div class=promptClose ng-click="fmMemberDetailCtrl.promptERR = false"></div></div></div></div></div><style></style>'), a.put("app/fieldmanager/member/member-detail-record.html", '<div style="min-width: 900px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div style=margin:20px><div class="float_left pointer" ui-sref=fm-member>会员管理</div><img class=float_left src=assets/images/gang.png style="height:16px;margin:-0px 5px"><div class=float_left style=color:#00A1FF ng-bind=fmMemberDetailCtrl.member.name></div><div class=clear></div></div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-member-detail.info>基本信息</div><div class="field_titleNormal field_titleChoose">消费&充值记录</div><div class=clear></div></div><div style="margin:40px 20px 0 0;padding-bottom:20px;border-bottom:1px solid #94A8BA;margin-left:20px;font-weight:medium;min-width:106rem"><div class=float_left style=width:13rem;padding-left:20px>支付日期</div><div class=float_left style=width:13rem>支付方式</div><div class=float_left style=width:35rem>明细</div><div class=float_left style=width:10rem>操作人</div><div class=float_left style=width:15rem>流水号</div><div class=float_left style=width:15rem>消费金额</div><!--  <div class="float_left">账户余额</div> --></div><div class=clear></div><div><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;margin:0 20px;color:#526874;min-width:106rem" ng-repeat="record in fmMemberDetailCtrl.records"><div class=float_left style=width:13rem;padding-left:20px ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm\'"></div><div class="float_left ellipsis" style=width:13rem ng-bind=record.pm>黄金会员</div><div class="float_left ellipsis" style=width:35rem ng-bind=record.description>黄金会员</div><div class="float_left ellipsis" style=width:10rem ng-bind="record.workerName?record.workerName:\'自助机\'">黄金会员</div><div class="float_left ellipsis" style=width:15rem ng-bind=record._id>黄金会员</div><div class=float_left style=width:15rem ng-bind=record.price></div><!--        <div class="float_left" ng-bind="\'￥\'+record.total">$999</div> --></div><div class=clear></div><pagination style="left:280px;margin:20px 30px 3px 20px" ng-if="fmMemberDetailCtrl.pagination.numPages > 1" total-items=fmMemberDetailCtrl.pagination.totalItems ng-model=fmMemberDetailCtrl.pagination.page items-per-page=fmMemberDetailCtrl.pagination.itemsPerPage max-size=fmMemberDetailCtrl.pagination.maxSize boundary-links="{{fmMemberDetailCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmMemberDetailCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmMemberDetailCtrl.pageChanged()></pagination></div></div>'), a.put("app/fieldmanager/member/member-detail.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div ui-view="" style="padding:0px 0rem 20px 200px"></div></div>'), a.put("app/fieldmanager/member/member-docord.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px;min-width: 1100px"><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-member>会员列表</div><div class="field_titleNormal field_titleChoose">重要操作记录</div><div class=clear></div><div class="form_value form_width_250" style="margin:20px 0 0 0"><input style=border:0;height:32px;width:200px placeholder=搜索会员(手机号/姓名/卡号) ng-model="fmDocordCtrl.mix"> <img src=assets/images/search.png class="student_search pointer" ng-click="fmDocordCtrl.getRecord()"></div><div style="margin:40px 20px 0 0;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;min-width:106rem"><div class=float_left style=width:15rem;padding-left:20px>操作时间</div><div class=float_left style=width:13rem>会员名称</div><div class=float_left style=width:15rem>事件</div><div class=float_left style=width:50rem>详情</div><div class=float_left style=width:15rem>操作人</div></div><div class=clear></div><div><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;margin:0 20px 0 0;color:#526874;min-width:106rem" ng-repeat="event in fmDocordCtrl.events"><div class=float_left style=width:15rem;padding-left:20px ng-bind="event.createDate | date:\'yyyy-MM-dd HH:mm\'"></div><div class="float_left ellipsis" style=width:13rem ng-bind=event.name?event.name:evnet.name_from>黄金会员</div><div class="float_left ellipsis" style=width:15rem ng-bind=event.status>黄金会员</div><div class="float_left ellipsis" style=width:50rem ng-bind=event.description>黄金会员</div><div class="float_left ellipsis" style=width:15rem ng-bind=event.workerName>黄金会员</div></div><div class=clear></div><pagination style="left:280px;margin:20px 30px 3px 20px" ng-if="fmDocordCtrl.pagination.numPages > 1" total-items=fmDocordCtrl.pagination.totalItems ng-model=fmDocordCtrl.pagination.page items-per-page=fmDocordCtrl.pagination.itemsPerPage max-size=fmDocordCtrl.pagination.maxSize boundary-links="{{fmDocordCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmDocordCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmDocordCtrl.pageChanged()></pagination></div></div></div></div>'), a.put("app/fieldmanager/member/member.html", '<div class=contentBox id=search><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px;min-width: 1100px"><div class=field_titleBox><div class="field_titleNormal field_titleChoose">会员列表</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-docord>重要操作记录</div><div class=clear></div><div class="form_value form_width_250 float_left" style="margin:20px 0 0 0"><input style=border:0;height:32px;width:200px placeholder=搜索会员(手机号/姓名/卡号) ng-model="fmMemberCtrl.searchName"> <img src=assets/images/search.png class="student_search pointer" ng-click="fmMemberCtrl.search()"></div><div class="button2_normal float_right" style="margin:20px 20px 0 0" ng-click=fmMemberCtrl.newAdd()>新增会员</div><div class=clear></div><div style="margin:40px 20px 0 0;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;font-size:13px;min-width:106rem"><div class=float_left style=width:11rem;padding-left:20px>姓名</div><div class=float_left style=width:14rem>手机号</div><div class="float_left pointer" ng-click="fmMemberCtrl.levelFlag = !fmMemberCtrl.levelFlag" style=width:18rem;position:relative><span>会员等级</span> <img style=width:11px src="assets/images/bdown.png"><div ng-show=fmMemberCtrl.levelFlag class=pointer style="position:absolute;border:1px solid #ddd;background:#fff;width:150px;top:15px"><div class=select_choose style=height:28px;line-height:28px ng-click="fmMemberCtrl.levelDes = \'\';fmMemberCtrl.getMember()">全部</div><div class=select_choose style=height:28px;line-height:28px ng-click="fmMemberCtrl.levelDes = \'黄金会员\';fmMemberCtrl.getMember()">黄金会员</div><div class=select_choose style=height:28px;line-height:28px ng-click="fmMemberCtrl.levelDes = \'白银会员\';fmMemberCtrl.getMember()">白银会员</div><div class=select_choose style=height:28px;line-height:28px ng-click="fmMemberCtrl.levelDes = \'普通会员\';fmMemberCtrl.getMember()">普通会员</div><div class=select_choose style=height:28px;line-height:28px ng-click="fmMemberCtrl.levelDes = \'非实名会员\';fmMemberCtrl.getMember()">非实名会员</div></div></div><div class=float_left style=width:16rem>注册日期</div><div class=float_left style=width:15rem>新卡/老卡</div><div class=float_left style=width:5rem>现金账户</div><div class=float_left style=width:5rem>虚拟账户</div><div class=float_left style=width:5rem>包玉刚账户</div><div class=float_left style=width:16rem;position:relative><span>操作</span><!-- <img style="width:11px" src="assets/images/blackdown.png" />\n                <div ng-show="fmMemberCtrl.freezeFlag" class="pointer" style="position:absolute;top:15px;border:1px solid #ddd;background:#fff;width:100px">\n                    <div class="select_choose" style="height:28px;line-height:28px" ng-click="fmMemberCtrl.isFreeze = \'\';fmMemberCtrl.getMember()">全部</div>\n                    <div class="select_choose" style="height:28px;line-height:28px" ng-click="fmMemberCtrl.isFreeze = true;fmMemberCtrl.getMember()">已冻结</div>\n                    <div class="select_choose" style="height:28px;line-height:28px" ng-click="fmMemberCtrl.isFreeze = false;fmMemberCtrl.getMember()">未冻结</div>\n                </div> --></div></div><div class=clear></div><div ng-repeat="member in fmMemberCtrl.members"><div class=pointer style="height:50px;line-height:50px;border-bottom:1px solid #ddd;margin:0 20px 0 0;font-size:13px;min-width:106rem" ui-sref=csd-member-detail.info({id:member._id,searchName:fmMemberCtrl.searchName})><div class="ellipsis float_left" style=width:6rem;padding-left:20px title={{member.name}} ng-bind=member.name></div><div class="ellipsis float_left" style=width:5rem;height:50px><span ng-show=member.mergeDate style="border:1px solid #FFD1D1;background::#FFECEC;border-radius:4px;color:#FF7B7B;padding:1px">合并过</span></div><div class="ellipsis float_left" style=width:14rem><span ng-bind="member.tel?member.tel:\'暂无\'"></span> <span style=color:#FF6F6F;font-size:10px ng-bind="member.wx?\'\':\'未绑微信\'"></span></div><div class="ellipsis float_left" style=width:18rem><div ng-show="member.cards.length==0 || member.cards[0].levelDes==\'非实名会员\'"><div class=float_left style="background:#999;width:9px;height:9px;border-radius:50%;margin:20px 10px 0 0"></div><div class=float_left style=color:#999>非实名会员</div></div><div ng-show="member.cards[0].levelDes==\'白银会员\'"><div class=float_left style="background:#A2AECF;width:9px;height:9px;border-radius:50%;margin:20px 10px 0 0"></div><div class=float_left style=color:#A2AECF>白银会员</div></div><div ng-show="member.cards[0].levelDes==\'黄金会员\'"><div class=float_left style="background:#F9CA2F;width:9px;height:9px;border-radius:50%;margin:20px 10px 0 0"></div><div class=float_left style=color:#F9CA2F>黄金会员</div></div><div ng-show="member.cards[0].levelDes==\'普通会员\'"><div class=float_left style="background:#000;width:9px;height:9px;border-radius:50%;margin:20px 10px 0 0"></div><div class=float_left style=color:#000>普通会员</div></div><span ng-show=member.realWorkerName style=color:#999 ng-bind="\'(\'+member.realWorkerName+\')\'"></span> <span ng-show="member.type&&member.type!=\'会员卡\'" ng-bind=member.type style="border:1px solid #FFD1D1;background::#FFECEC;border-radius:4px;color:#FF7B7B;padding:1px;font-size:12px"></span></div><div class="ellipsis float_left" style=width:16rem ng-bind="(member.createDate?(member.createDate | date:\'yyyy-MM-dd\'):\'无\')+\'(\'+member.workerName+\')\'"></div><div class="ellipsis float_left" style=width:15rem><span ng-show=member.cardNo ng-bind=member.cardNo></span> <span style=color:#999 ng-show=!member.cardNo>未办理</span> <span>/</span> <span ng-show=member.memberNo ng-bind=member.memberNo></span> <span style=color:#999 ng-show=!member.memberNo>未办理</span></div><div class="ellipsis float_left" style=width:5rem ng-bind="(member.cards.length>0?member.cards[0].total:\'0\')"></div><div class="ellipsis float_left" style=width:5rem ng-bind="!member.virFlag?member.virtualAccount.total:(member.virtualAccount.total==0?\'0\':member.virtualAccount.total+\'(已过期)\')"></div><div class="ellipsis float_left" style=width:5rem ng-bind="(member.accFlag?member.accTot:\'0\')"></div><div class="ellipsis float_left" style=width:20rem ng-show="member.cardNo && member.isReal && !member.isFreezed"><div onclick="event.cancelBubble = true" ng-click=fmMemberCtrl.chongzhi(member) class=float_left style=color:#00a1ff><span>充值</span> <span style=color:#fff>充值</span></div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click=fmMemberCtrl.banka(member) class=float_left>补卡</div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click=fmMemberCtrl.freeze(member) class=float_left>冻结</div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click="fmMemberCtrl.changeAccFlag = true;fmMemberCtrl.fromId = member._id" class=float_left>过户</div></div><div class=float_left style=width:20rem ng-show="!member.cardNo && member.isReal && !member.isFreezed"><div onclick="event.cancelBubble = true" ng-click=fmMemberCtrl.chongzhi(member) class=float_left style=color:#00a1ff><span>充值</span> <span style=color:#fff>充值</span></div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click=fmMemberCtrl.banka(member) class=float_left>办卡</div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click=fmMemberCtrl.freeze(member) class=float_left>冻结</div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click="fmMemberCtrl.changeAccFlag = true;fmMemberCtrl.fromId = member._id" class=float_left>过户</div></div><div class=float_left style=width:20rem ng-show="!member.isReal && !member.isFreezed"><div style=color:#00a1ff onclick="event.cancelBubble = true" ng-click=fmMemberCtrl.defind(member) class=float_left>实名认证</div><div onclick="event.cancelBubble = true" style="margin:0 0 0 20px" ng-click=fmMemberCtrl.chongzhi(member) class=float_left style=color:#00a1ff>充值</div><div ng-show=!member.cardNo style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click=fmMemberCtrl.banka(member) class=float_left>办卡</div><div ng-show=member.cardNo style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click=fmMemberCtrl.banka(member) class=float_left>补卡</div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click=fmMemberCtrl.freeze(member) class=float_left>冻结</div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click="fmMemberCtrl.changeAccFlag = true;fmMemberCtrl.fromId = member._id" class=float_left>过户</div></div><div class=float_left style=width:16rem ng-show=member.isFreezed><div style=color:#00a1ff onclick="event.cancelBubble = true" ng-click=fmMemberCtrl.cfreeze(member) class=float_left>解除冻结</div></div></div><div class=clear></div></div><div class=clear></div><pagination style="left:280px;margin:20px 30px 3px 20px" ng-if="fmMemberCtrl.pagination.numPages > 1" total-items=fmMemberCtrl.pagination.totalItems ng-model=fmMemberCtrl.pagination.page items-per-page=fmMemberCtrl.pagination.itemsPerPage max-size=fmMemberCtrl.pagination.maxSize boundary-links="{{fmMemberCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmMemberCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmMemberCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=fmMemberCtrl.changeAccFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">账户过户</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmMemberCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">过户给：</div><input class="form_value float_left form_value_width" ng-change="fmMemberCtrl.judge(\'tel\')" placeholder=请输入接收人手机号 ng-model="fmMemberCtrl.tel"></div><div class=clear></div><div class=form_error_font ng-show=!fmMemberCtrl.cardFlag></div><div class=form_error_font ng-show=fmMemberCtrl.cardFlag>此项为必填项</div><div ng-show=fmMemberCtrl.answerFlag class=form_first_view style=margin-top:0><div ng-show=fmMemberCtrl.jFlag class="form_key float_left form_key_margin"><span>接收人：</span> <span style=color:#00a1ff ng-bind=fmMemberCtrl.name></span></div><div ng-show=!fmMemberCtrl.jFlag style=color:red class="form_key float_left form_key_margin">系统中不存在该用户</div></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmMemberCtrl.move()>完成</div><div class="button_normal float_right" ng-click=fmMemberCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmMemberCtrl.payFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><img src=assets/images/back.png style="height:12px;margin:2px 10px 0 0" class="float_left pointer" ng-click="fmMemberCtrl.payFlag = false;fmMemberCtrl.addFlag = true"><div class="form_title float_left">发起支付</div><img src=assets/images/close.png class="float_right pointer" ng-click=fmMemberCtrl.close()></div><div class=clear></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">支付金额</div><div class="form_value float_left" style=border:none;color:#ff4949;margin-left:-10px;font-size:14px><span>￥</span> <span style=font-size:18px ng-bind=fmMemberCtrl.rp></span></div></div><div class=clear></div></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">支付方式</div><div style="width:350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in fmMemberCtrl.paymentArr" ng-click=fmMemberCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style=width:0;height:0;overflow:hidden ng-show="fmMemberCtrl.showCodeBox && !fmMemberCtrl.defindFlag"><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=fmMemberCtrl.auth_code ng-keypress=fmMemberCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div><div style=width:0;height:0;overflow:hidden ng-show="fmMemberCtrl.showCodeBox && fmMemberCtrl.defindFlag"><div><div class="form_key float_left form_key_margin">支付条码</div><input id=bk class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=fmMemberCtrl.auth_code ng-keypress=fmMemberCtrl.bk($event)></div><div class=clear></div><div class=form_error_font></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmMemberCtrl.create()>确认支付</div><div class="button_normal float_right" ng-click=fmMemberCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmMemberCtrl.cFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">办卡</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmMemberCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">实体卡</div><input class="form_value float_left form_value_width" placeholder=请放置实体卡 ng-class="{\'\':!fmMemberCtrl.cardFlag,\'form_value_error\':fmMemberCtrl.cardFlag}" ng-model="fmMemberCtrl.cardNum"></div><div class=clear></div><div class=form_error_font ng-show=!fmMemberCtrl.cardFlag></div><div class=form_error_font ng-show=fmMemberCtrl.cardFlag>此项为必填项</div><div class=form_first_view style=margin-top:0px><div class="form_key float_left form_key_margin">卡库存</div><div class="form_value float_left form_value_width" ng-bind="fmMemberCtrl.cardCount+\'张\'"></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">工本费</div><div><div class=singleChoose_option style="float: none" ng-repeat="payment in fmMemberCtrl.useStateArr" ng-click=fmMemberCtrl.chooseState(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div><div ng-show=fmMemberCtrl.isBk><div class="form_key float_left form_key_margin">支付方式</div><div style="width:350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in fmMemberCtrl.paymentArr" ng-click=fmMemberCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div><div style=width:0;height:0;overflow:hidden ng-show=fmMemberCtrl.showCodeBox><div><div class="form_key float_left form_key_margin">支付条码</div><input id=fillCard class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=fmMemberCtrl.auth_code ng-keypress=fmMemberCtrl.bk($event)></div><div class=clear></div><div class=form_error_font></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmMemberCtrl.bind()>完成</div><div class="button_normal float_right" ng-click=fmMemberCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmMemberCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left" ng-bind=fmMemberCtrl.memTitle>新增会员</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmMemberCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">会员姓名</div><input class="form_value float_left form_value_width" placeholder=会员真实姓名 ng-blur="fmMemberCtrl.judge(\'name\')" ng-class="{\'\':!fmMemberCtrl.nameFlag,\'form_value_error\':fmMemberCtrl.nameFlag}" ng-model="fmMemberCtrl.name"></div><div class=clear></div><div class=form_error_font ng-show=!fmMemberCtrl.nameFlag></div><div class=form_error_font style=margin-left:80px ng-show=fmMemberCtrl.nameFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">联系方式</div><input class="form_value float_left form_value_width" ng-show=!fmMemberCtrl.lengthFlag ng-change=fmMemberCtrl.judgeLength() placeholder=11位手机号码 ng-blur="fmMemberCtrl.judge(\'phone\')" ng-class="{\'\':!fmMemberCtrl.phoneFlag,\'form_value_error\':fmMemberCtrl.phoneFlag}" ng-model="fmMemberCtrl.phone"> <input class="form_value float_left form_value_width" ng-show=fmMemberCtrl.lengthFlag ng-change=fmMemberCtrl.judgeLength() style=color:#00a1ff placeholder=11位手机号码 ng-blur="fmMemberCtrl.judge(\'phone\')" ng-class="{\'\':!fmMemberCtrl.phoneFlag,\'form_value_error\':fmMemberCtrl.phoneFlag}" ng-model="fmMemberCtrl.phone"></div><div class=clear></div><div class=form_error_font ng-show=!fmMemberCtrl.phoneFlag></div><div class=form_error_font style=margin-left:80px ng-show=fmMemberCtrl.phoneFlag ng-bind=fmMemberCtrl.errPhone></div><div><div class="form_key float_left form_key_margin">身份证号</div><input class="form_value float_left form_value_width" ng-class="{\'\':!fmMemberCtrl.idFlag,\'form_value_error\':fmMemberCtrl.idFlag}" placeholder=请核对身份证号 ng-model="fmMemberCtrl.idCard"></div><div class=clear></div><div class=form_error_font ng-show=!fmMemberCtrl.idFlag></div><div class=form_error_font style=margin-left:80px ng-show=fmMemberCtrl.idFlag>此项为必填项</div><div ng-show=!fmMemberCtrl.defindFlag><div class="form_key float_left form_key_margin">选择卡种</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!fmMemberCtrl.choosedCardFlag,\'select_foucs\':fmMemberCtrl.choosedCardFlag}" ng-click="fmMemberCtrl.choosedCardFlag = !fmMemberCtrl.choosedCardFlag"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=fmMemberCtrl.cardName></div><div class=form_select_div style=width:345px ng-show=fmMemberCtrl.choosedCardFlag><div ng-click=fmMemberCtrl.chooseNewCard(card) class="select_cell pointer" ng-repeat="card in fmMemberCtrl.cards" ng-bind="card.name+\'(\'+card.price+\'元)\'" onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div ng-show=!fmMemberCtrl.defindFlag class=form_error_font></div><div ng-show=!fmMemberCtrl.defindFlag><div class="form_key float_left form_key_margin">会员类型</div><div class="float_left pointer" ng-class="{\'select\':!fmMemberCtrl.choosedTypeFlag,\'select_foucs\':fmMemberCtrl.choosedTypeFlag}" ng-click="fmMemberCtrl.choosedTypeFlag = !fmMemberCtrl.choosedTypeFlag"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=fmMemberCtrl.typeName></div><div class=form_select_div style=width:345px ng-show=fmMemberCtrl.choosedTypeFlag><div ng-click=fmMemberCtrl.chooseType(type) class="select_cell pointer" ng-repeat="type in fmMemberCtrl.types" ng-bind=type.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div ng-show=!fmMemberCtrl.defindFlag class=form_error_font></div><div><div class="form_key float_left form_key_margin"><span>实体卡</span><span style=color:#fff>的</span></div><img src=assets/images/bluecircle.png ng-show=fmMemberCtrl.needFlag style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=!fmMemberCtrl.needFlag ng-click="fmMemberCtrl.needFlag = true" style=height:18px class="float_left form_oImage_margin"><div class="float_left pointer" style="margin:12px 20px 0 0" ng-click="fmMemberCtrl.needFlag = true">需要</div><img src=assets/images/radio_off.png ng-show=fmMemberCtrl.needFlag ng-click="fmMemberCtrl.needFlag = false" style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/bluecircle.png ng-show=!fmMemberCtrl.needFlag style=height:18px class="float_left form_oImage_margin"><div class="float_left pointer" style="margin:12px 10px 0 0" ng-click="fmMemberCtrl.needFlag = false">不需要</div></div><div class=clear></div><div class=form_error_font></div><div ng-show=fmMemberCtrl.needFlag><div class="form_key float_left form_key_margin">实体卡号</div><input class="form_value float_left form_value_width" placeholder=请放置实体卡 ng-class="{\'\':!fmMemberCtrl.cardFlag,\'form_value_error\':fmMemberCtrl.cardFlag}" ng-model="fmMemberCtrl.cardNum"></div><div class=clear></div><div class=form_error_font ng-show="fmMemberCtrl.needFlag && !fmMemberCtrl.cardFlag"></div><div class=form_error_font ng-show="fmMemberCtrl.needFlag && fmMemberCtrl.cardFlag">此项为必填项</div><div ng-show=fmMemberCtrl.needFlag><div class="form_key float_left form_key_margin"><span>工本费</span><span style=color:#fff>的</span></div><div><div class=singleChoose_option style="float: none" ng-repeat="payment in fmMemberCtrl.useStateArr" ng-click=fmMemberCtrl.chooseState(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmMemberCtrl.finish()>下一步</div><div class="button_normal float_right" ng-click=fmMemberCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmMemberCtrl.continueFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">账户充值</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmMemberCtrl.close()"></div><div class=clear></div><div><div ng-show=fmMemberCtrl.moneySelect class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;background:#00a1ff;color:#fff;border-top-left-radius:6px;border-bottom-left-radius:6px;height:36px;line-height:34px">通用账户</div><div ng-show=!fmMemberCtrl.moneySelect ng-click="fmMemberCtrl.waySelect(\'money\')" class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;color:#000;border-top-left-radius:6px;border-bottom-left-radius:6px;height:36px;line-height:34px">通用账户</div><div ng-show=fmMemberCtrl.oneSelect class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;background:#00a1ff;color:#fff;height:36px;line-height:34px;border-left:0">专用账户</div><div ng-show=!fmMemberCtrl.oneSelect ng-click="fmMemberCtrl.waySelect(\'one\')" class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;color:#000;height:36px;line-height:34px;border-left:0">专用账户</div><div ng-show=fmMemberCtrl.cardSelect class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;background:#00a1ff;color:#fff;height:36px;line-height:34px;border-left:0">通用充值卡</div><div ng-show=!fmMemberCtrl.cardSelect ng-click="fmMemberCtrl.waySelect(\'card\')" class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;color:#000;height:36px;line-height:34px;border-left:0">通用充值卡</div><div ng-show=fmMemberCtrl.speSelect class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;background:#00a1ff;color:#fff;border-top-right-radius:6px;border-bottom-right-radius:6px;height:36px;line-height:34px;border-left:0">专用充值卡</div><div ng-show=!fmMemberCtrl.speSelect ng-click="fmMemberCtrl.waySelect(\'speCard\')" class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;color:#000;border-top-right-radius:6px;border-bottom-right-radius:6px;height:36px;line-height:34px;border-left:0">专用充值卡</div></div><div class=clear></div><div style=margin-top:20px ng-show=fmMemberCtrl.moneySelect><div class="form_key float_left form_key_margin">选择金额</div><div class=float_left style=width:350px><div ng-repeat="card in fmMemberCtrl.cCards" ng-click=fmMemberCtrl.choose(card) ng-style=card.select?fmMemberCtrl.cardBlue:fmMemberCtrl.cardGray class="float_left pointer" ng-bind=card.price></div></div></div><div class=clear></div><div ng-show=fmMemberCtrl.oneSelect style=margin-top:10px><div class="form_key float_left form_key_margin">选择场馆</div><div class=float_left style=width:350px><div class="float_left pointer" style="margin:10px 23px 0 0" ng-click=fmMemberCtrl.chVenue(venue) ng-repeat="venue in fmMemberCtrl.vrr"><img ng-show=!venue.select class=float_left src="assets/images/radio_off.png"> <img ng-show=venue.select style=width:16px class=float_left src="assets/images/bluecircle.png"><div class=float_left style=margin-left:3px ng-bind=venue.name></div></div></div></div><div class=clear></div><div class=form_error_font ng-show="!fmMemberCtrl.iFlag && fmMemberCtrl.oneSelect"></div><div class=form_error_font ng-show="fmMemberCtrl.iFlag && fmMemberCtrl.oneSelect">至少选择一个场馆</div><div ng-show="fmMemberCtrl.oneSelect || fmMemberCtrl.selfFlag"><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=fmMemberCtrl.price></div><div class=clear></div></div><div class=form_error_font style=margin-bottom:-20px ng-show="!fmMemberCtrl.pFlag && fmMemberCtrl.oneSelect"></div><div class=form_error_font style=margin-bottom:-20px ng-show="fmMemberCtrl.pFlag && fmMemberCtrl.oneSelect">此项必填</div><div style=margin-top:10px ng-show="fmMemberCtrl.moneySelect || fmMemberCtrl.oneSelect"><div><div class="form_key float_left form_key_margin">支付方式</div><div style="width:350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in fmMemberCtrl.paymentArr" ng-click=fmMemberCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style=width:0;height:0;overflow:hidden ng-show="fmMemberCtrl.showCodeBox && (fmMemberCtrl.moneySelect || fmMemberCtrl.oneSelect)"><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_codeC class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=fmMemberCtrl.auth_code ng-keypress=fmMemberCtrl.auth_codeCreateC($event)></div><div class=clear></div><div class=form_error_font></div></div><div ng-show=fmMemberCtrl.speSelect><div class="form_key float_left form_key_margin">充值场馆</div><div class=float_left style="width: 350px;padding-top: 7px"><div class=singleChoose_option ng-repeat="venue in fmMemberCtrl.venues_clone" ng-click=fmMemberCtrl.chooseChargeVenue(venue)><div class="singleChoose_imageBox {{venue.image}}" style="height: 26px"></div><div class=singleChoose_prompt style="min-width:60px;height: 26px;line-height: 26px" ng-bind=venue.name>场馆</div></div></div></div><div class=clear></div><div style=margin-top:20px ng-show=fmMemberCtrl.cardSelect||fmMemberCtrl.speSelect><div><div class="form_key float_left form_key_margin">充值账号</div><input class="form_value float_left form_value_width" placeholder=请输入充值卡账号 ng-model=fmMemberCtrl.chargeCardNum></div><div class=clear></div><div class=form_error_font></div></div><div ng-show=fmMemberCtrl.cardSelect||fmMemberCtrl.speSelect><div><div class="form_key float_left form_key_margin">充值密码</div><input class="form_value float_left form_value_width" placeholder=请输入充值卡密码 ng-model=fmMemberCtrl.chargeCardPassword></div><div class=clear></div></div><div><div class="form_key float_left form_key_margin">打印小票</div><img ng-show=fmMemberCtrl.printFlag style=width:15px;margin-top:10px class=float_left src=assets/images/bluecircle.png> <img ng-show=!fmMemberCtrl.printFlag ng-click="fmMemberCtrl.printFlag = true" style=width:15px;margin-top:10px class="float_left pointer" src=assets/images/radio_off.png><div class=float_left style="width:15px;margin:10px 5px 0 5px">是</div><img ng-show=!fmMemberCtrl.printFlag style=width:15px;margin-top:10px class=float_left src=assets/images/bluecircle.png> <img ng-show=fmMemberCtrl.printFlag ng-click="fmMemberCtrl.printFlag = false" style=width:15px;margin-top:10px class="float_left pointer" src=assets/images/radio_off.png><div class=float_left style="width:15px;margin:10px 5px 0 5px">否</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmMemberCtrl.continue()>完成</div><div class="button_normal float_right" ng-click=fmMemberCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=fmMemberCtrl.toastFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/rectangle2.png"><div class="float_left form_marginL_15px" ng-bind=fmMemberCtrl.wordOK>操作成功</div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=fmMemberCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=fmMemberCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmMemberCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" title={{fmMemberCtrl.wordWARN}}>支付中...</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div><!-- 错误提示 --><div class=bgGary style=z-index:999 ng-show=fmMemberCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=fmMemberCtrl.wordERR>22212</div><div class=promptClose ng-click="fmMemberCtrl.promptERR = false"></div></div></div></div><div class=bgGary ng-show=fmMemberCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmMemberCtrl.deleteFlag = false"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4 ng-bind=fmMemberCtrl.payWarn>删除项目后，场馆里该项目的场地全部会被删除。对于预定该项目的个人用户会退还预定金额。是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button_normal float_right" ng-click="fmMemberCtrl.deleteFlag = false">确定</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmMemberCtrl.sureFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmMemberCtrl.sureFlag = false"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4 ng-bind=fmMemberCtrl.sureWarn>删除项目后，场馆里该项目的场地全部会被删除。对于预定该项目的个人用户会退还预定金额。是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button_normal float_right" ng-click=fmMemberCtrl.surePay()>确定</div><div class=clear></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right:0px;top:10px;\n        }</style></div></div>'),
            a.put("app/fieldmanager/member/membership-card.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="min-width:1366px;margin-left: 200px"><!-- <div style="background:#fff;box-shadow: 0 1px 4px 0 rgba(0,0,0,0.4)">\n            <div style="height:58px;line-height:56px;padding:0 20px;font-size:18px;color:#475669">\n                <div class="float_left pointer" style="width:33%" ui-sref="org-index">\n                    <img class="float_left" style="height:22px;margin:19px 10px 0 0" src="assets/images/page_left.png" />\n                    <div class="float_left">返回</div>\n                </div>\n\n                <div class="float_left" style="width:33%;text-align:center">会员卡列表</div>\n\n            </div>\n        </div> --><!-- 会员卡列表开始 --><div class=men-card><!-- 搜索框开始 --><div class=men-card-form><!-- <form action="" method="" id="" name="" class="clearfloat"> --><input placeholder=会员名/手机号/卡号 ng-model=fmVipTableCtrl.mix ng-keypress="fmVipTableCtrl.enterCheck($event)"> <img src=../assets/images/search.png width=20 height=20 ng-click="fmVipTableCtrl.mySearch()"><!-- </form> --></div><!-- 搜索框结束 --><!-- 会员卡列表开始 --><ul class=tr-table><li class=tr-head><ul class=clearfloat><li class=tr-li1><span class=tr-b-right>姓名</span></li><li class=tr-li2><span class=tr-b-right>手机号</span></li><li class=tr-li2><span class=tr-b-right>实体卡号</span></li><li class=tr-li2><span class=tr-b-right>会员卡名称</span></li><li class=tr-li2><span class=tr-b-right>剩余期限</span></li><li class=tr-li2><span class=tr-b-right>过期时间</span></li><li class=tr-li2><span class=tr-b-right>所属会员</span></li><li class=tr-li3><span>操作</span></li></ul></li><li class=tr-content><ul class="clearfloat tr-control" ng-repeat="memberService in fmVipTableCtrl.memberServices"><li class=tr-li1><p class="tr-b-right overflow-hidden clearfloat"><span class=tr-name ng-bind=memberService.name title={{memberService.name}}></span> <span class=tr-hint1 ng-show=memberService.isFreeze>冻结中</span> <span class=tr-hint2 ng-hide=memberService.isActive>未激活</span> <span class=tr-hint2 ng-show=memberService.isEnd>已过期</span></p></li><li class="tr-li2 tr-line-height"><p class="tr-b-right overflow-hidden" ng-bind=memberService.tel title={{memberService.tel}}></p></li><li class="tr-li2 tr-line-height"><p class="tr-b-right overflow-hidden clearfloat"><span class=tr-card ng-bind=memberService.serviceNo title={{memberService.serviceNo}}></span></p></li><li class="tr-li2 tr-line-height"><p class="tr-b-right overflow-hidden" ng-bind=memberService.service.name title={{memberService.service.name}}></p></li><li class="tr-li2 tr-line-height"><p class="tr-b-right overflow-hidden clearfloat"><span class=tr-number1 ng-bind="memberService.valueLeft ? memberService.valueLeft : \'暂无\'" title="{{memberService.valueLeft ? memberService.valueLeft : \'暂无\'}}"></span></p></li><li class="tr-li2 tr-line-height"><p class="tr-b-right overflow-hidden clearfloat"><span class=tr-time1 ng-bind="memberService.endDate?(memberService.endDate | date:\'yyyy-MM-dd\'):\'暂未激活\'" title="{{memberService.endDate?(memberService.endDate | date:\'yyyy-MM-dd\'):\'暂未激活\'}}"></span> <span class=tr-time2 ng-show=memberService.endDate ng-click=fmVipTableCtrl.showPostponeCard(memberService._id)>延期</span></p></li><li class="tr-li2 tr-line-height"><p class="tr-b-right overflow-hidden" ng-bind="memberService._member.name+\'(\'+memberService._member.memberNo+\')\'" title="{{memberService._member.name+\'(\'+memberService._member.memberNo+\')\'}}"></p></li><li class="tr-li3 tr-line-height"><p><span class=tr-span-oactive ng-click=fmVipTableCtrl.showEdit(memberService)>编辑</span> <span ng-click=fmVipTableCtrl.showChangeCard(memberService._id)>换卡</span><!-- <span ng-click="fmVipTableCtrl.showReissueCard()">补卡</span> --> <span ng-click=fmVipTableCtrl.showFreezeCard(memberService._id)>冻结</span> <span ng-click=fmVipTableCtrl.showChangeName(memberService._id)>过户</span></p></li></ul></li></ul><!-- 会员卡列表结束 --><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="fmVipTableCtrl.pagination.numPages > 1" total-items=fmVipTableCtrl.pagination.totalItems ng-model=fmVipTableCtrl.pagination.page items-per-page=fmVipTableCtrl.pagination.itemsPerPage max-size=fmVipTableCtrl.pagination.maxSize boundary-links="{{fmVipTableCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmVipTableCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmVipTableCtrl.pageChanged()></pagination></div></div><!-- 会员卡列表结束 --><!-- 背景蒙版开始 --><div class=edit-information ng-show=fmVipTableCtrl.menberBg></div><!-- 背景蒙版结束 --><!-- 编辑信息开始 --><div class=edit-content ng-show=fmVipTableCtrl.edit><form name=editForm novalidate><div class="edit-colse clearfloat"><span>编辑信息</span> <img src=../assets/images/close.png width=15 height=15 ng-click="fmVipTableCtrl.close()"></div><div class=edit-form><p><label>姓名：</label><input name=editName ng-model=fmVipTableCtrl.showMemberService.name ng-maxlength=10 required></p><p class=prompt-p><!-- <p ng-show="editForm.editName.$dirty && editForm.editName.$invalid" > --><span ng-show=editForm.editName.$error.required>姓名是必须的</span> <span ng-show=editForm.editName.$error.maxlength>长度不能大于10</span><!-- </p> --></p><p><label>手机号码：</label><input name=editMobile ng-model=fmVipTableCtrl.showMemberService.tel ng-pattern="/^1([38]\\d|5[0-35-9]|7[3678])\\d{8}$/" required></p><p class=prompt-p><span ng-show=editForm.editMobile.$error.required>手机号码是必须的</span> <span ng-show=editForm.editMobile.$error.pattern>手机号码输入不正确</span></p><!-- <p>\n                    <label>身份证号：</label>\n                    <input type="text" name="editIdCard" ng-model="fmVipTableCtrl.memberService.tel" />\n                </p> --></div><div class="edit-button clearfloat"><input type=submit class=edit-btn-sure ng-click=fmVipTableCtrl.update() ng-disabled="editForm.editName.$dirty && editForm.editName.$invalid || editForm.editMobile.$dirty && editForm.editMobile.$invalid" value="确定"> <span class=edit-btn-cancel ng-click=fmVipTableCtrl.close()>取消</span></div></form></div><!-- 编辑信息结束 --><!-- 换卡信息开始 --><div class=change-card ng-show=fmVipTableCtrl.changeCard><!-- <form name="changeForm" novalidate> --><div class="change-colse clearfloat"><span>换卡</span> <img src=../assets/images/close.png width=15 height=15 ng-click="fmVipTableCtrl.close()"></div><div class=change-form><p><label class=ed-label>新卡：</label><input placeholder=请将新卡放置在感应器上 ng-model=fmVipTableCtrl.showMemberService.cardNo autofocus id=myCardNo name=changeInput class="edit-o-input1"></p><div class="need-cost clearfloat"><b>工本费：</b> <img src=../assets/images/radio_on.png width=16 height=16 ng-show="fmVipTableCtrl.showMemberService.isCost"> <img src=../assets/images/radio_off.png width=16 height=16 ng-click="fmVipTableCtrl.showMemberService.isCost = true" ng-show="!fmVipTableCtrl.showMemberService.isCost"> <span ng-click="fmVipTableCtrl.showMemberService.isCost = true">需要</span> <img src=../assets/images/radio_off.png width=16 height=16 ng-click="fmVipTableCtrl.showMemberService.isCost = false" ng-show="fmVipTableCtrl.showMemberService.isCost"> <img src=../assets/images/radio_on.png width=16 height=16 ng-show="!fmVipTableCtrl.showMemberService.isCost"> <span ng-click="fmVipTableCtrl.showMemberService.isCost = false">不需要</span><!-- <img src="{{fmVipTableCtrl.isCost2 ? \'../assets/images/radio_on.png\':\'../assets/images/radio_off.png\' }}" width="18" height="18" ng-click="fmVipTableCtrl.costOf2()" /> --><!-- <span ng-click="fmVipTableCtrl.isCost2 = !fmVipTableCtrl.isCost2">不需要</span> --></div><p class=change-book ng-show=fmVipTableCtrl.showMemberService.isCost><label>工本费用：</label>20元</p><div class="o-payment clearfloat" ng-show=fmVipTableCtrl.showMemberService.isCost><h4>支付方式：</h4><ul class=clearfloat><li ng-repeat="payment in fmVipTableCtrl.payments" ng-click=fmVipTableCtrl.choosePayment(payment)><span class="{{payment.img}} pay-choose-img"></span> <span ng-bind=payment.name></span></li></ul></div><div class="change-button clearfloat"><input type=submit class=change-btn-sure ng-click=fmVipTableCtrl.changeBtnSure() value=确定> <span class=change-btn-cancel ng-click=fmVipTableCtrl.close()>取消</span></div></div><!-- </form> --></div><!-- 换卡信息结束 --><!-- 延期开始 --><div class=change-card ng-show=fmVipTableCtrl.postponeCard><form novalidate><div class="change-colse clearfloat"><span>延期</span> <img src=../assets/images/close.png width=15 height=15 ng-click="fmVipTableCtrl.close()"></div><div class=change-form><p><label>延期天数：</label><input id=postponeInp autofocus ng-model="fmVipTableCtrl.showMemberService.value"></p></div><div class="change-button clearfloat"><span class=change-btn-sure ng-click=fmVipTableCtrl.postponeCardSure()>确定</span> <span class=change-btn-cancel ng-click=fmVipTableCtrl.close()>取消</span></div></form></div><!-- 延期结束 --><!-- 冻结卡信息开始 --><div class="change-card change-card1" ng-show=fmVipTableCtrl.freezeCard><form method="" action="" name="" novalidate><div class="change-colse clearfloat"><span>冻结</span> <img src=../assets/images/close.png width=15 height=15 ng-click="fmVipTableCtrl.close()"></div><div class=change-form><p class="clearfloat change-form-p"><label>冻结日期：</label><!-- <input type="text" placeholder="请选择冻结到哪天" /> --><span class=freeze-date><span style="{{fmVipTableCtrl.showChangeDate==\'请选择冻结到哪天\'?\'color: #999;\':\'\'}}" ng-bind="fmVipTableCtrl.showChangeDate==\'请选择冻结到哪天\'?\'请选择冻结到哪天\':(fmVipTableCtrl.showChangeDate | date:\'yyyy-MM-dd\')" class=show-date></span> <img src=../assets/images/icon_time@2x.png width=24 height=24 ng-click="fmVipTableCtrl.changeDateBox=!fmVipTableCtrl.changeDateBox"></span><div ng-show=fmVipTableCtrl.changeDateBox class=change-form-date><datetimepick class=ng-isolate-scope ng-close=fmVipTableCtrl.closeChangeDateBox() ng-date=fmVipTableCtrl.changeDate></datetimepick></div></p></div><div class="change-button clearfloat"><span class=change-btn-sure ng-click=fmVipTableCtrl.dongBtn()>确定</span> <span class=change-btn-cancel ng-click=fmVipTableCtrl.close()>取消</span></div></form></div><!-- 冻结卡信息结束 --><!-- 过户信息开始 --><div class=change-card ng-show=fmVipTableCtrl.changeName><form name=changeNameForm novalidate><div class="change-colse clearfloat"><span>过户</span> <img src=../assets/images/close.png width=15 height=15 ng-click="fmVipTableCtrl.close()"></div><div class=change-form><p><label>过户至：</label><input placeholder=请输入手机号 autofocus ng-change=fmVipTableCtrl.searchMember() id=changeMemberTel ng-model=fmVipTableCtrl.showMemberService.tel ng-pattern="/^1([38]\\d|5[0-35-9]|7[3678])\\d{8}$/" required name="changeNameFormInput"></p><p class=prompt-p ng-hide=fmVipTableCtrl.showMemberService._toMemberName><span ng-show=changeNameForm.changeNameFormInput.$error.required>手机号码是必须的</span> <span ng-show=changeNameForm.changeNameFormInput.$error.pattern>手机号码输入不正确</span></p><p class=prompt-p ng-show=fmVipTableCtrl.showMemberService._toMemberName ng-bind="\'过户至：\'+fmVipTableCtrl.showMemberService._toMemberName"></p></div><div class="change-button clearfloat"><input type=submit class=change-btn-sure ng-click=fmVipTableCtrl.transferCard() value="确定"> <span class=change-btn-cancel ng-click=fmVipTableCtrl.close()>取消</span></div></form></div><!-- 过户卡信息结束 --></div><!-- 二次预定确认提示 --><div class=bgGary ng-show=fmVipTableCtrl.againCheckBox><div class=middle><div id=box class="promptCheck center"><div class="checkWord top20">是否确认操作？</div><div class=top20><div class="chooseBtn left20 pointer" ng-click=fmVipTableCtrl.otherPay()>确认</div><div class="unChooseBtn left10 pointer" ng-click="fmVipTableCtrl.againCheckBox=false">取消</div></div></div></div></div><!-- 扫描二维码提示 --><div ng-show=fmVipTableCtrl.promptPay><div class=bgGary><div class=middle><input class=hiddenBox id=auth_code ng-model=fmVipTableCtrl.auth_code ng-keypress=fmVipTableCtrl.auth_codePay($event)><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmVipTableCtrl.wordPay>22212</div><div class=promptClose ng-click=fmVipTableCtrl.closePrompt()></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=fmVipTableCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmVipTableCtrl.wordOK></div><!-- <div class="promptClose" ng-click="fmVipTableCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmVipTableCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=fmVipTableCtrl.wordERR title={{fmVipTableCtrl.wordERR}}></div><div class=promptClose ng-click=fmVipTableCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmVipTableCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=fmVipTableCtrl.wordWARN title={{fmVipTableCtrl.wordWARN}}></div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/fieldmanager/product/product-record.html", '<div><div class=field_selectBox><!-- <div class="xt_searchBox float_right" style="float: left;">\n            <input class="xt_searchInput" style="text-indent: 10px;" placeholder="输入综合服务名称" ng-model="fmProductCtrl.searchProductName">\n            <div class="xt_searchImage" ng-click="fmProductCtrl.searchProduct()"></div>\n        </div> --><div><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmProductCtrl.showVenueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmProductCtrl.showVenueName ng-click="fmProductCtrl.showChooseVenueBox=!fmProductCtrl.showChooseVenueBox">场馆1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=fmProductCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in fmProductCtrl.venues" ng-bind=venue.name ng-click="fmProductCtrl.chooseVenueName(venue,\'record\')">默认按钮</div></div></div><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmProductCtrl.showFirstName==\'选择一级类目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmProductCtrl.showFirstName ng-click="fmProductCtrl.showChooseFirstBox=!fmProductCtrl.showChooseFirstBox">一级类目1</div></div><div class=form_select_div style="position: relative;z-index: 200" ng-show=fmProductCtrl.showChooseFirstBox><div class="select_cell pointer ellipsis" ng-repeat="first in fmProductCtrl.productCategories" ng-bind=first.name ng-click="fmProductCtrl.chooseFirstName(first,\'record\')">默认按钮</div></div></div><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmProductCtrl.showSecondName==\'选择二级类目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmProductCtrl.showSecondName ng-click="fmProductCtrl.showChooseSecondBox=!fmProductCtrl.showChooseSecondBox">二级类目1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=fmProductCtrl.showChooseSecondBox><div class="select_cell pointer ellipsis" ng-repeat="second in fmProductCtrl.secondCategories" ng-bind=second.name ng-click="fmProductCtrl.chooseSecondName(second,\'record\')">默认按钮</div></div></div></div><div class=clear></div></div><div class=cancelTable style="margin-top: 20px"><div class="cancelThTr height_40"><div class="cancelTh width_12 ellipsis" style="text-indent: 20px">金额</div><div class="cancelTh width_15 ellipsis">日期</div><div class="cancelTh width_14 ellipsis">提交人</div><div class="cancelTh width_25 ellipsis">详情</div><div class="cancelTh width_14 ellipsis">备注</div><div class="cancelTh width_12 ellipsis">联系人</div><div class="cancelTh width_14 ellipsis">操作</div></div><div class=cancelTr ng-repeat="record in fmProductCtrl.records" style="{{record.state?\'background: #f2f2f2\':\'\'}}"><div class="cancelTd width_12 ellipsis" style="text-indent: 20px" ng-bind=record.cost></div><div class="cancelTd width_15 ellipsis" ng-bind="record.createDate | date:\'MM-dd\'"></div><div class="cancelTd width_14 ellipsis" ng-bind=record.workerName></div><div class="cancelTd width_25 ellipsis" ng-bind=record.description title={{record.description}}></div><div class="cancelTd width_14 ellipsis" ng-bind=record.remark></div><div class="cancelTd width_12 ellipsis" ng-bind="record.productContacts?record.productContacts:\'暂无\'"></div><div class="cancelTd width_14 ellipsis" ng-hide=record.state><span style="cursor: pointer;color: #8492a6" ng-click=fmProductCtrl.openErrChangeBox(record._id)>纠错</span> <span style="cursor: pointer;color: #20a0ff;margin-left: 20px" ng-click=fmProductCtrl.printRecord(record)>打印</span></div><div class="cancelTd width_14 ellipsis" ng-show=record.state>纠错单</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="fmProductCtrl.pagination.numPages > 1" total-items=fmProductCtrl.pagination.totalItems ng-model=fmProductCtrl.pagination.page items-per-page=fmProductCtrl.pagination.itemsPerPage max-size=fmProductCtrl.pagination.maxSize boundary-links="{{fmProductCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmProductCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmProductCtrl.pageChanged()></pagination></div><!-- 纠错操作 --><div class=bgGary ng-show=fmProductCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=fmProductCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{fmProductCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="fmProductCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{fmProductCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="fmProductCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=fmProductCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=fmProductCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=fmProductCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=fmProductCtrl.close()>取消</div><div class=clear></div></div></div></div></div>'), a.put("app/fieldmanager/product/product-sale.html", '<div><div class=fbonce_member_InfoBox><div class=fbonce_m_i_readTelOrCard><div class=fbonce_m_i_r_title>读取用户信息</div><div class=fbonce_m_i_r_contect><input id=cardNoBox class=fbonce_m_i_r_c_input placeholder=请读取会员卡号/二维码 ng-model=fmProductCtrl.memberTelOrCard ng-keypress=fmProductCtrl.enterCheck($event) style=ime-mode:disabled><div ng-show=fmProductCtrl.memberTelOrCard class=fbonce_m_i_r_c_btn ng-click=fmProductCtrl.checkMember()>查询</div><div ng-hide=fmProductCtrl.memberTelOrCard class="fbonce_m_i_r_c_btn bgcolorG">查询</div><div class="fbonce_m_i_r_c_btn bgcolorW borderccc" style="color: #475669" ng-click=fmProductCtrl.resert()>重置</div></div></div><div ng-show=fmProductCtrl.showMemberInfo class=fbonce_m_i_info><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>姓名:</div><div class=fbonce_m_i_i_l_d_value ng-bind=fmProductCtrl.member.name>徐涛</div></div><div class=fbonce_m_i_i_l_detail style=margin-left:-40px><div class=fbonce_m_i_i_l_d_key>现金账户:</div><div class=fbonce_m_i_i_l_d_value ng-bind="fmProductCtrl.member.cards[0].total?fmProductCtrl.member.cards[0].total:0 | currency:\'￥\'">500元</div></div></div><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>级别:</div><div class=fbonce_m_i_i_l_d_value ng-show=fmProductCtrl.member.cards[0].levelDes ng-bind=fmProductCtrl.member.cards[0].levelDes>金卡</div><div class=fbonce_m_i_i_l_d_value ng-hide=fmProductCtrl.member.cards[0].levelDes>暂无等级</div></div><div class=fbonce_m_i_i_l_detail style=margin-left:-40px><div class=fbonce_m_i_i_l_d_key>虚拟账户:</div><div class="fbonce_m_i_i_l_d_value ellipsis" title="{{(fmProductCtrl.member.virtualAccount.total | currency:\'￥\')+\'(\'+(fmProductCtrl.member.virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'}}"><span ng-bind="fmProductCtrl.member.virtualAccount.total | currency:\'￥\'">500元(2017-10-28过期)</span> <span ng-show="fmProductCtrl.member.virtualAccount.total>0" ng-bind="\'(\'+(fmProductCtrl.member.virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'"></span></div></div></div><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>手机号:</div><div class=fbonce_m_i_i_l_d_value ng-bind=fmProductCtrl.member.tel>18806712362</div></div></div></div><div ng-hide=fmProductCtrl.showMemberInfo class="fbonce_m_i_info fbonce_m_i_noInfo"><span class=colorG>暂无会员信息</span></div><div class=clear></div></div><div class=field_selectBox><div class="xt_searchBox float_right" style="float: left"><input class=xt_searchInput style="text-indent: 10px" placeholder=输入综合服务名称 ng-model=fmProductCtrl.searchProductName><div class=xt_searchImage ng-click=fmProductCtrl.searchProduct()></div></div><div style="float: left;margin-left: 20px"><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmProductCtrl.showVenueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmProductCtrl.showVenueName ng-click="fmProductCtrl.showChooseVenueBox=!fmProductCtrl.showChooseVenueBox">场馆1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=fmProductCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in fmProductCtrl.venues" ng-bind=venue.name ng-click="fmProductCtrl.chooseVenueName(venue,\'product\')">默认按钮</div></div></div><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmProductCtrl.showFirstName==\'选择一级类目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmProductCtrl.showFirstName ng-click="fmProductCtrl.showChooseFirstBox=!fmProductCtrl.showChooseFirstBox">一级类目1</div></div><div class=form_select_div style="position: relative;z-index: 200" ng-show=fmProductCtrl.showChooseFirstBox><div class="select_cell pointer ellipsis" ng-repeat="first in fmProductCtrl.productCategories" ng-bind=first.name ng-click="fmProductCtrl.chooseFirstName(first,\'product\')">默认按钮</div></div></div><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmProductCtrl.showSecondName==\'选择二级类目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmProductCtrl.showSecondName ng-click="fmProductCtrl.showChooseSecondBox=!fmProductCtrl.showChooseSecondBox">二级类目1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=fmProductCtrl.showChooseSecondBox><div class="select_cell pointer ellipsis" ng-repeat="second in fmProductCtrl.secondCategories" ng-bind=second.name ng-click="fmProductCtrl.chooseSecondName(second,\'product\')">默认按钮</div></div></div></div><div class=clear></div></div></div><div><div class=cancelTable><div class="cancelThTr height_40"><div class="cancelTh width_21 ellipsis" style="text-indent: 2rem">名称</div><div class="cancelTh width_21 ellipsis">所属场馆</div><div class="cancelTh width_21 ellipsis">一级分类</div><div class="cancelTh width_21 ellipsis">二级分类</div><div class="cancelTh width_22 ellipsis">操作</div></div><div class=cancelTr ng-repeat="product in fmProductCtrl.products"><div class="cancelTd width_21 ellipsis" style="text-indent: 2rem"><span ng-bind=product.name></span><span style="color:#20a0ff;font-size: 12px;margin-left: 5px" ng-hide=product.isUsed>停用中</span></div><div class="cancelTd width_21 ellipsis" ng-bind=product._venue.name>预订时间</div><div class="cancelTd width_21 ellipsis" ng-bind="product._firstCategory?product._firstCategory.name:\'暂无\'">预订时间</div><div class="cancelTd width_21 ellipsis" ng-bind="product._secondCategory?product._secondCategory.name:\'暂无\'">支付金额</div><div class="cancelTd width_22 ellipsis"><span class=cancel_btn ng-show=product.isUsed ng-click=fmProductCtrl.openBuyProduct(product)>售卖</span> <span ng-hide=product.isUsed style=color:#8492a6>售卖</span></div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="fmProductCtrl.pagination.numPages > 1" total-items=fmProductCtrl.pagination.totalItems ng-model=fmProductCtrl.pagination.page items-per-page=fmProductCtrl.pagination.itemsPerPage max-size=fmProductCtrl.pagination.maxSize boundary-links="{{fmProductCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmProductCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmProductCtrl.pageChanged()></pagination></div><!-- 售卖服务 --><div class=bgGary ng-show=fmProductCtrl.showBuyProduct><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">售卖综合服务</div><!-- <div class="form_title float_left">编辑综合服务</div> --><img src=assets/images/close.png class="float_right pointer" ng-click="fmProductCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">客户名称</div><input class="form_value float_left form_value_width" placeholder=请输入客户名称 ng-model=fmProductCtrl.name></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入综合服务金额 ng-model=fmProductCtrl.price></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=fmProductCtrl.remark></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">联系人员</div><input class="form_value float_left form_value_width" placeholder=输入活动对接人或招生联系人姓名 ng-model=fmProductCtrl.productContacts></div><div class=clear></div><div style="margin-top: 10px"><div class="form_key float_left form_key_margin">支付方式</div><div class="singleChoose_box float_left" style="width: 348px;height: 65px"><div class=singleChoose_option ng-repeat="payment in fmProductCtrl.paymentArr" ng-click=fmProductCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>每周</div></div></div></div><div class=clear></div><div style="width: 0px;height: 0px;overflow: hidden"><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=fmProductCtrl.auth_code ng-keypress=fmProductCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmProductCtrl.buy()>完成</div><div class="button_normal float_right" ng-click=fmProductCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=fmProductCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=fmProductCtrl.closePrompt()></div></div></div></div>'), a.put("app/fieldmanager/product/product.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal {{fmProductCtrl.titleState==\'sale\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="fmProductCtrl.changeTitle(\'sale\')">售卖服务</div><div class="field_titleNormal {{fmProductCtrl.titleState==\'record\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="fmProductCtrl.changeTitle(\'record\')">服务记录</div></div><div class=field_bookBoxPostition ui-view=""></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=fmProductCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmProductCtrl.wordOK>22212</div><div class=promptClose ng-click=fmProductCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmProductCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=fmProductCtrl.wordERR>22212</div><div class=promptClose ng-click=fmProductCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmProductCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=fmProductCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/fieldmanager/setting/setting-card.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/fieldmanager/head/head.html\'"></div> --><div style="padding:30px;margin-left:190px;min-width: 900px"><div><div class=float_left style=font-size:16px>卡类设置</div><!-- <div class="button2_normal float_right" style="background:#00A1FF" ng-click="fmSettingCardCtrl.addFlag = true">新增卡种</div> --></div><div class=clear></div><div style="margin-top:40px;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;font-size:13px;min-width:98rem"><div class=float_left style=width:16rem;padding-left:20px>卡种名称</div><div class=float_left style=width:10rem>售价</div><div class=float_left style=width:14rem>订场折扣</div><div class=float_left style=width:32rem>描述</div><div class=float_left style=width:18rem>操作</div></div><div class=clear></div><div ng-repeat="card in fmSettingCardCtrl.cards"><div class=pointer style="height:60px;line-height:60px;border-bottom:1px solid #ddd;color:#475669;font-size:13px;min-width:98rem"><div class=float_left style=width:16rem;padding-left:20px ng-bind=card.name>小七</div><div class=float_left style=width:10rem ng-bind=card.realPrice>18888888888</div><div class=float_left style=width:14rem ng-bind=card.discount>黄金会员</div><div class=float_left style=width:32rem ng-bind="card.description?card.description:\'无\'">描述</div><div class=float_left style=width:18rem><div class=float_left>无</div><!-- <div ng-click="fmSettingCardCtrl.showEdit(card)" class="float_left">编辑</div> --><!-- <div ng-click="fmSettingCardCtrl.sureFlag = true;fmSettingCardCtrl.cId = card._id" class="float_left" style="margin:0 0 0 40px;color:#99a9bc">删除</div> --></div></div><div class=clear></div></div><div style=margin-top:40px><div class=float_left style=font-size:16px>实体卡</div></div><div class=clear></div><div style=margin-top:20px><div class="form_key float_left form_key_margin" style=margin-right:20px>工本费</div><div class="form_value float_left form_value_width" style=margin-right:20px ng-bind="fmSettingCardCtrl.money"></div></div><div class=clear></div><!-- <div class="button2_normal float_left" style="background:#00A1FF;margin:20px 0 0 60px" ng-click="fmSettingCardCtrl.saveMoney()">保存</div> --></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style>'),
            a.put("app/fieldmanager/setting/setting-date-card.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="padding:20px 30px 30px 30px;margin-left:200px;min-width:930px"><div><div class=float_left style=font-size:18px;margin-top:10px;color:#475669>时间卡设置</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="fmDateCardCtrl.addFlag = true">新增</div><div class="float_right pointer" ng-class="{\'select\':!fmDateCardCtrl.selectItemFlag,\'select_foucs\':fmDateCardCtrl.selectItemFlag}" ng-click="fmDateCardCtrl.selectItemFlag = !fmDateCardCtrl.selectItemFlag" style="margin:0 20px 0 20px"><div class="form_down_icon form_width_180 form_select_value_choose" ng-bind=fmDateCardCtrl.iName></div><div class="form_select_div form_width_180" ng-show=fmDateCardCtrl.selectItemFlag><div ng-click=fmDateCardCtrl.chooseIrr(item) ng-repeat="item in fmDateCardCtrl.irr" ng-bind=item.name class="select_cell pointer" onclick="event.cancelBubble = true"></div></div></div><div class="float_right pointer" ng-class="{\'select\':!fmDateCardCtrl.selectVenueFlag,\'select_foucs\':fmDateCardCtrl.selectVenueFlag}" ng-click="fmDateCardCtrl.selectVenueFlag = !fmDateCardCtrl.selectVenueFlag"><div class="form_down_icon form_width_180 form_select_value_choose" ng-bind=fmDateCardCtrl.vName></div><div class="form_select_div form_width_180" ng-show=fmDateCardCtrl.selectVenueFlag><div ng-click=fmDateCardCtrl.chooseVrr(venue) ng-repeat="venue in fmDateCardCtrl.vrr" ng-bind=venue.name class="select_cell pointer" onclick="event.cancelBubble = true"></div></div></div></div><div class=clear></div><table style="margin-top:20px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">名称</td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属项目</td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属场馆</td><td style="width:7%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">天数</td><td style="width:7%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">价格</td><td style="width:8%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">工本费</td><td style="width:8%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">保证金</td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">单次限时</td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">当天限次</td><td style="width:6%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">当前状态</td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr ng-repeat="service in fmDateCardCtrl.services" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.name></td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service._item.name></td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service._venue.name></td><td style="width:7%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.value></td><td style="width:7%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.price></td><td style="width:8%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.cardCost></td><td style="width:8%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.bail></td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="service.limit?(service.limit+\'分钟\'):\'不限\'"></td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="service.daylimit==1?(\'一次\'):\'不限次数\'"></td><td style="width:6%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="service.isActive?\'上架中\':\'下架中\'"></td><td class=pointer style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><img class=float_left ng-click="fmDateCardCtrl.deleteFlag = true;fmDateCardCtrl._id = service._id" style="width:11px;margin:10px 20px 0 0" src="assets/images/rdelete.png"> <img class=float_left ng-click=fmDateCardCtrl.edit(service) style="width:13px;margin:10px 20px 0 0" src="assets/images/editb.png"><div class=float_left ng-bind="service.isActive?\'去下架\':\'去上架\'" ng-click="fmDateCardCtrl.edit(service,\'isactive\')"></div></td></tr></table><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="fmDateCardCtrl.pagination.numPages > 1" total-items=fmDateCardCtrl.pagination.totalItems ng-model=fmDateCardCtrl.pagination.page items-per-page=fmDateCardCtrl.pagination.itemsPerPage max-size=fmDateCardCtrl.pagination.maxSize boundary-links="{{fmDateCardCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmDateCardCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmDateCardCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=fmDateCardCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">时间卡</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmDateCardCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">场馆名称</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!fmDateCardCtrl.venueFlag,\'select_foucs\':fmDateCardCtrl.venueFlag}" ng-click="fmDateCardCtrl.venueFlag = !fmDateCardCtrl.venueFlag"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=fmDateCardCtrl.venueName></div><div class=form_select_div style=width:345px ng-show=fmDateCardCtrl.venueFlag><div ng-click=fmDateCardCtrl.chooseVenue(venue) class="select_cell pointer" ng-repeat="venue in fmDateCardCtrl.venues" ng-bind=venue.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">项目名称</div><div class="float_left pointer zindex-500" ng-class="{\'select\':!fmDateCardCtrl.itemFlag,\'select_foucs\':fmDateCardCtrl.itemFlag}" ng-click="fmDateCardCtrl.itemFlag = !fmDateCardCtrl.itemFlag"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=fmDateCardCtrl.itemName></div><div class=form_select_div style=width:345px ng-show=fmDateCardCtrl.itemFlag><div ng-click=fmDateCardCtrl.chooseItem(item) class="select_cell pointer" ng-repeat="item in fmDateCardCtrl.items" ng-bind=item.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">卡类名称</div><input class="form_value float_left form_value_width" placeholder=请输入卡类名称 ng-model="fmDateCardCtrl.name"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">产品时间</div><input class="form_value float_left form_value_width" placeholder=请输入产品使用时间 ng-model="fmDateCardCtrl.value"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">产品售价</div><input class="form_value float_left form_value_width" placeholder=请输入产品售价 ng-model="fmDateCardCtrl.price"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">服务标签</div><div class=float_left style=width:350px><div class="float_left pointer" style="margin:10px 23px 0 0" ng-click=fmDateCardCtrl.chooseTag(tag) ng-repeat="tag in fmDateCardCtrl.tags"><img ng-show=!tag.select class=float_left src="assets/images/select_box.png"> <img ng-show=tag.select style=width:16px class=float_left src="assets/images/select_true.png"><div class=float_left style=margin-left:3px ng-bind=tag.name></div></div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin"><div>每天使用</div><div>次数</div></div><div ng-show=fmDateCardCtrl.oneFlag class=singleChoose_option style="float: none"><div class="singleChoose_imageBox singleChoose_imageYes"></div><div class=singleChoose_prompt>仅一次</div></div><div ng-show=!fmDateCardCtrl.oneFlag class=singleChoose_option style="float: none" ng-click="fmDateCardCtrl.oneFlag = !fmDateCardCtrl.oneFlag"><div class="singleChoose_imageBox singleChoose_imageNo"></div><div class=singleChoose_prompt>仅一次</div></div><div ng-show=!fmDateCardCtrl.oneFlag class=singleChoose_option style="float: none"><div class="singleChoose_imageBox singleChoose_imageYes"></div><div class=singleChoose_prompt>不限次数</div></div><div ng-show=fmDateCardCtrl.oneFlag class=singleChoose_option style="float: none" ng-click="fmDateCardCtrl.oneFlag = !fmDateCardCtrl.oneFlag"><div class="singleChoose_imageBox singleChoose_imageNo"></div><div class=singleChoose_prompt>不限次数</div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin"><div>每次使用</div><div>时长</div></div><input class="form_value float_left form_value_width" placeholder=每次使用限制时间，单位：分钟 ng-model="fmDateCardCtrl.limit"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">卡工本费</div><input class="form_value float_left form_value_width" placeholder=请输入产品实体卡工本费 ng-model="fmDateCardCtrl.cardcost"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">卡保证金</div><input class="form_value float_left form_value_width" placeholder=请输入产品实体卡保证金 ng-model="fmDateCardCtrl.bail"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">产品描述</div><input class="form_value float_left form_value_width" placeholder=请输入产品描述 ng-model="fmDateCardCtrl.des"></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmDateCardCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=fmDateCardCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmDateCardCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmDateCardCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>是否要删除这个卡种？</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmDateCardCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=fmDateCardCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmDateCardCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=fmDateCardCtrl.err>此名称已被占用</div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="fmDateCardCtrl.errorFlag = false"></div></div></div><div class=bgGary ng-show=fmDateCardCtrl.succeedFlag><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>操作成功</div><div class=promptClose ng-click="fmDateCardCtrl.succeedFlag = false"></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/fieldmanager/setting/setting-field-register.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="margin-left:200px;min-width: 830px"><div style="font-size:16px;padding:30px 0 0 30px">场地登记</div><div style="width:100%;border-bottom:1px solid #ddd;height:37px;margin-top:30px;line-height:34px"><div style="padding-left: 30px" class=pointer ng-repeat="venue in fmFieldRegisterCtrl.venues" ng-click=fmFieldRegisterCtrl.chooseVenue(venue)><div class=float_left ng-show="venue.name == fmFieldRegisterCtrl.venueName" style="font-size:14px;color:#00a1ff;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;border-bottom:0" ng-bind=venue.name></div><div class=float_left ng-show="!(venue.name == fmFieldRegisterCtrl.venueName)" style="font-size:14px;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;background:#EFF2F6;color:#8492a6;margin-right:20px;border-bottom:0" ng-bind=venue.name></div></div></div><div class=clear></div><div style="padding: 0 30px"><div ng-repeat="item in fmFieldRegisterCtrl.venue.items" ng-click=fmFieldRegisterCtrl.getField(item)><div ng-show="item._id == fmFieldRegisterCtrl.item._id && item.select && !item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;background:#00a1ff;color:#fff;border-top-left-radius:6px;border-bottom-left-radius:6px;height:36px;line-height:34px"></div><div ng-show="item._id == fmFieldRegisterCtrl.item._id && item.select && item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;background:#00a1ff;color:#fff;border-left:0;border-radius:6px;height:36px;line-height:34px"></div><div ng-show="item._id == fmFieldRegisterCtrl.item._id && !item.select && item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;background:#00a1ff;color:#fff;border-left:0;border-top-right-radius:6px;border-bottom-right-radius:6px;height:36px;line-height:34px"></div><div ng-show="item._id == fmFieldRegisterCtrl.item._id && !item.select && !item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;background:#00a1ff;color:#fff;border-left:0;height:36px;line-height:34px"></div><div ng-show="!(item._id == fmFieldRegisterCtrl.item._id) && item.select && !item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;border-top-left-radius:6px;border-bottom-left-radius:6px;height:36px;line-height:34px"></div><div ng-show="!(item._id == fmFieldRegisterCtrl.item._id) && !item.select && item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;border-left:0;border-top-right-radius:6px;border-bottom-right-radius:6px;height:36px;line-height:34px"></div><div ng-show="!(item._id == fmFieldRegisterCtrl.item._id) && item.select && item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;border-left:0;border-radius:6px;height:36px;line-height:34px"></div><div ng-show="!(item._id == fmFieldRegisterCtrl.item._id) && !item.select && !item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;border-left:0;height:36px;line-height:34px"></div></div><div class="button2_normal float_right" style=background:#00A1FF;margin-top:20px ng-click="fmFieldRegisterCtrl.addFlag = true">新增场地</div><div class=clear></div><div style=width:100%;height:60px;background:#EFF2F7;border-radius:4px;margin-top:20px;color:#8492a6;line-height:60px;font-size:14px><div class=float_left style="margin:0 10px 0 20px">该项目公众号是否开放预订:</div><img ng-show=fmFieldRegisterCtrl.orderFlag ng-click="fmFieldRegisterCtrl.editVenueItem(\'orderFlag\')" class=float_left style=margin-top:20px src="assets/images/on.png"> <img ng-show=!fmFieldRegisterCtrl.orderFlag ng-click="fmFieldRegisterCtrl.editVenueItem(\'orderFlag\')" class=float_left style=margin-top:20px src="assets/images/off.png"><div ng-show=!fmFieldRegisterCtrl.orderFlag class=float_left style="margin:0 10px 0 100px">该项目公众号是否在列表显示</div><img ng-show=!fmFieldRegisterCtrl.orderFlag&&fmFieldRegisterCtrl.remarkFlag ng-click="fmFieldRegisterCtrl.editVenueItem(\'remarkFlag\')" class=float_left style=margin-top:20px src="assets/images/on.png"> <img ng-show=!fmFieldRegisterCtrl.orderFlag&&!fmFieldRegisterCtrl.remarkFlag ng-click="fmFieldRegisterCtrl.editVenueItem(\'remarkFlag\')" class=float_left style=margin-top:20px src="assets/images/off.png"></div><div style="margin-top:30px;padding-bottom:20px;border-bottom:1px solid #94A8BA;color:#1F2D3D;font-size:13px;font-weight:medium;min-width:98rem;height:20px"><div class=float_left style=width:27rem;padding-left:20px><span style=margin-left:10px>场地名称</span></div><div class=float_left style=width:14rem>状态</div><div class=float_left style=width:28rem>对外预定</div><div class=float_left style=width:19rem>操作</div></div><div class=clear></div><div style=overflow-y:auto;overflow-x:hidden;{{fmFieldRegisterCtrl.h}}><div ng-repeat="field in fmFieldRegisterCtrl.fields" style=font-size:13px;min-width:100rem><div style="border-bottom:1px solid #D3DCE6;display:flex;align-items:center;color:#475669;height:46px;line-height:44px"><div class=float_left style=width:27rem;padding-left:20px><span ng-bind=field.name style=margin-left:1rem></span></div><div ng-show=field.isUsed class=float_left style=width:14rem><div class=float_left style=background:#13ce66;border-radius:50%;width:7px;height:7px;margin-top:20px></div><div class=float_left style=margin-left:5px>使用中</div></div><div ng-show=!field.isUsed class=float_left style=width:14rem><div class=float_left style=background:#ff4949;border-radius:50%;width:7px;height:7px;margin-top:20px></div><div class=float_left style=margin-left:5px>停用中</div></div><div class=float_left style=width:28rem><div ng-show=field.isOpen style=width:10rem><div class=float_left style=background:#13ce66;border-radius:50%;width:7px;height:7px;margin-top:7px></div><div class=float_left style=margin-left:5px;line-height:20px>可预订</div></div><div ng-show=!field.isOpen style=width:10rem><div class=float_left style=background:#ff4949;border-radius:50%;width:7px;height:7px;margin-top:7px></div><div class=float_left style=margin-left:5px;line-height:20px>不可订</div></div><div class=clear></div><div style="color:#ff4949;font-size:12px;margin:2px 0 0 11px;line-height:10px" ng-bind=field.warn></div></div><div class=float_left style=width:19rem;color:#00a1ff><div ng-click=fmFieldRegisterCtrl.showEdit(field) class="float_left pointer">编辑</div><div ng-click="fmFieldRegisterCtrl.deleteFlag = true;fmFieldRegisterCtrl.fId = field._id" class="float_left pointer" style=margin-left:20px;color:#99a9bc>删除</div></div></div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmFieldRegisterCtrl.editFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">编辑场地</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmFieldRegisterCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">输入名称</div><input class="form_value float_left form_value_width" placeholder=请输入场地名称 ng-blur="fmFieldRegisterCtrl.judge(\'name\')" ng-class="{\'\':!fmFieldRegisterCtrl.nameFlag,\'form_value_error\':fmFieldRegisterCtrl.nameFlag}" ng-model="fmFieldRegisterCtrl.name"></div><div class=clear></div><div class=form_error_font ng-show=!fmFieldRegisterCtrl.nameFlag></div><div class=form_error_font ng-show=fmFieldRegisterCtrl.nameFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">场地状态</div><img src=assets/images/bluecircle.png ng-show=fmFieldRegisterCtrl.flagOn ng-click=fmFieldRegisterCtrl.chooseOn(true) style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=!fmFieldRegisterCtrl.flagOn ng-click=fmFieldRegisterCtrl.chooseOn(true) style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=fmFieldRegisterCtrl.chooseOn(true)>启用</div><img src=assets/images/bluecircle.png ng-show=!fmFieldRegisterCtrl.flagOn ng-click=fmFieldRegisterCtrl.chooseOn(false) style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=fmFieldRegisterCtrl.flagOn ng-click=fmFieldRegisterCtrl.chooseOn(false) style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=fmFieldRegisterCtrl.chooseOn(false)>不启用</div></div><div class=clear></div><div class="position_relative form_first_view"><div class="form_key float_left" style=line-height:18px;margin-right:18px><div>对外预定</div><div>停用时间</div></div><input class="form_value float_left form_clock_icon" style=width:150px placeholder=停用开始时间 ng-click="fmFieldRegisterCtrl.closeFlag = true;fmFieldRegisterCtrl.closeDateFlag = true;fmFieldRegisterCtrl.closeDateFlag2 = false" ng-show="!fmFieldRegisterCtrl.closeFlag"><div class="form_value float_left form_clock_icon" style=width:150px ng-click="fmFieldRegisterCtrl.closeDateFlag = !fmFieldRegisterCtrl.closeDateFlag;fmFieldRegisterCtrl.closeDateFlag2 = false" ng-bind="fmFieldRegisterCtrl.closeDate | date:\'yyyy-MM-dd\'" ng-show=fmFieldRegisterCtrl.closeFlag></div><div class="form_key float_left form_key_margin" style=margin-left:15px>至</div><input class="form_value float_left form_clock_icon" style=width:150px placeholder=无限期 ng-click="fmFieldRegisterCtrl.closeFlag2 = true;fmFieldRegisterCtrl.closeDateFlag2 = true;fmFieldRegisterCtrl.closeDateFlag = false" ng-show="!fmFieldRegisterCtrl.closeFlag2"><div class="form_value float_left form_clock_icon" style=width:150px ng-click="fmFieldRegisterCtrl.closeDateFlag2 = !fmFieldRegisterCtrl.closeDateFlag2;fmFieldRegisterCtrl.closeDateFlag = false" ng-bind="fmFieldRegisterCtrl.closeDate2 | date:\'yyyy-MM-dd\'" ng-show=fmFieldRegisterCtrl.closeFlag2></div><div class="student_datetime student_datetime2"><datetimepick ng-close="fmFieldRegisterCtrl.closeDateFlag = false" ng-id="\'first\'" ng-show=fmFieldRegisterCtrl.closeDateFlag ng-date=fmFieldRegisterCtrl.closeDate></datetimepick></div><div class="student_datetime student_datetime2"><datetimepick ng-close="fmFieldRegisterCtrl.closeDateFlag2 = false" ng-id="\'first\'" ng-show=fmFieldRegisterCtrl.closeDateFlag2 ng-date=fmFieldRegisterCtrl.closeDate2></datetimepick></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmFieldRegisterCtrl.edit()>完成</div><div class="button_normal float_right" ng-click="fmFieldRegisterCtrl.deleteFlag = true">删除场地</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmFieldRegisterCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增场地</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmFieldRegisterCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">输入名称</div><input class="form_value float_left form_value_width" placeholder=请输入场地名称 ng-blur="fmFieldRegisterCtrl.judge(\'name\')" ng-class="{\'\':!fmFieldRegisterCtrl.nameFlag,\'form_value_error\':fmFieldRegisterCtrl.nameFlag}" ng-model="fmFieldRegisterCtrl.name"></div><div class=clear></div><div class=form_error_font ng-show=!fmFieldRegisterCtrl.nameFlag></div><div class=form_error_font ng-show=fmFieldRegisterCtrl.nameFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">是否启用</div><img src=assets/images/bluecircle.png style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=fmFieldRegisterCtrl.chooseOn(true)>启用</div><img src=assets/images/whitecircle.png style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=fmFieldRegisterCtrl.chooseOn(false)>不启用</div></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmFieldRegisterCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=fmFieldRegisterCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmFieldRegisterCtrl.showEditFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">编辑场地</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmFieldRegisterCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">该项目是否启用</div><img src=assets/images/bluecircle.png ng-show=fmFieldRegisterCtrl.flagOn ng-click="fmFieldRegisterCtrl.chooseOn(true);fmFieldRegisterCtrl.flagEdit = false" style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=!fmFieldRegisterCtrl.flagOn ng-click="fmFieldRegisterCtrl.chooseOn(true);fmFieldRegisterCtrl.flagEdit = false" style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click="fmFieldRegisterCtrl.chooseOn(true);fmFieldRegisterCtrl.flagEdit = false">启用</div><img src=assets/images/bluecircle.png ng-show=!fmFieldRegisterCtrl.flagOn ng-click="fmFieldRegisterCtrl.chooseOn(false);fmFieldRegisterCtrl.flagEdit = true" style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=fmFieldRegisterCtrl.flagOn ng-click="fmFieldRegisterCtrl.chooseOn(false);fmFieldRegisterCtrl.flagEdit = true" style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click="fmFieldRegisterCtrl.chooseOn(false);fmFieldRegisterCtrl.flagEdit = true">不启用</div></div><div class=clear></div><div class=form_error_font ng-show=fmFieldRegisterCtrl.flagEdit></div><div class=position_relative ng-show=fmFieldRegisterCtrl.flagEdit><div class="form_key float_left form_key_margin">停用时间</div><input class="form_value float_left form_value_width form_clock_icon" placeholder=请输入停用时间 ng-click="fmFieldRegisterCtrl.closeFlag = true;fmFieldRegisterCtrl.closeDateFlag = true" ng-show="!fmFieldRegisterCtrl.closeFlag"><div class="form_value float_left form_value_width form_clock_icon" ng-click="fmFieldRegisterCtrl.closeDateFlag = !fmFieldRegisterCtrl.closeDateFlag" ng-bind="fmFieldRegisterCtrl.closeDate | date:\'yyyy-MM-dd\'" ng-show=fmFieldRegisterCtrl.closeFlag></div><div class="student_datetime student_datetime2" style=margin-top:78px><datetimepick ng-close="fmFieldRegisterCtrl.closeDateFlag = false" ng-id="\'second\'" ng-show=fmFieldRegisterCtrl.closeDateFlag ng-date=fmFieldRegisterCtrl.closeDate></datetimepick></div></div><div class=clear></div><div class=form_error_font ng-show=!fmFieldRegisterCtrl.oFlag></div><div class=form_error_font ng-show=fmFieldRegisterCtrl.oFlag>此项为必填项</div><!--                         <div>\n                            <div class="form_key float_left form_key_margin">网上预订</div>\n                            <img src="assets/images/bluecircle.png" ng-show="fmFieldRegisterCtrl.flagOpen" ng-click="fmFieldRegisterCtrl.chooseOpen(true)" style="height:18px" class="float_left form_oImage_margin"/>\n                            <img src="assets/images/radio_off.png" ng-show="!fmFieldRegisterCtrl.flagOpen" ng-click="fmFieldRegisterCtrl.chooseOpen(true)" style="height:18px" class="float_left form_oImage_margin"/>\n                            <div class="float_left form_key form_option_margin pointer" ng-click="fmFieldRegisterCtrl.chooseOpen(true)">可预订</div>\n                            <img src="assets/images/bluecircle.png" ng-show="!fmFieldRegisterCtrl.flagOpen" ng-click="fmFieldRegisterCtrl.chooseOpen(false)" style="height:18px" class="float_left form_oImage_margin"/>\n                            <img src="assets/images/radio_off.png" ng-show="fmFieldRegisterCtrl.flagOpen" ng-click="fmFieldRegisterCtrl.chooseOpen(false)" style="height:18px" class="float_left form_oImage_margin"/>\n                            <div class="float_left form_key form_option_margin pointer" ng-click="fmFieldRegisterCtrl.chooseOpen(false)">不可预订</div>\n                        </div>\n                        <div class="clear"></div> --></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmFieldRegisterCtrl.finishEdit()>完成</div><div class="button_normal float_right" ng-click=fmFieldRegisterCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=fmFieldRegisterCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=fmFieldRegisterCtrl.err></div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="fmFieldRegisterCtrl.errorFlag = false"></div></div></div><div class=bgGary ng-show=fmFieldRegisterCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmFieldRegisterCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>此操作将永久删除该场地信息，对于预定该场馆的个人用户会退还预定金额。是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmFieldRegisterCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=fmFieldRegisterCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/fieldmanager/setting/setting-holiday.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0px 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="padding:20px 0px 30px 10px;min-width:900px;margin-left:190px"><div class=float_left style=font-size:20px;margin-left:30px>特殊日期登记</div><div class=clear></div><div style="margin:20px 20px 0 30px"><div style="margin:40px 20px 0 0;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;min-width:96rem"><div class=float_left style=width:14rem;padding-left:20px>特殊日期名称</div><div class=float_left style=width:15rem>开始日期</div><div class=float_left style=width:15rem>结束日期</div><div class=float_left style=width:11rem>价格体系</div><div class=float_left style=width:26rem>备注</div></div><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;min-width:96rem;margin-right:20px" ng-repeat="holiday in fmSettingHolidayCtrl.holidaies"><div class="float_left ellipsis" style=width:14rem;padding-left:20px ng-bind=holiday.name>预订时间</div><div class="float_left ellipsis" style=width:15rem ng-bind="holiday.startDate | date:\'yyyy-MM-dd\'"></div><div class="float_left ellipsis" style=width:15rem ng-bind="holiday.endDate | date:\'yyyy-MM-dd\'"></div><div class="float_left ellipsis" style=width:11rem ng-bind="holiday.weekAs == 1?\'工作日方案\':(holiday.weekAs == 6?\'周末方案\':\'节假日方案\')"></div><div class="float_left ellipsis" style=width:26rem ng-bind="holiday.remark?holiday.remark:\'无\'"></div></div></div><pagination style="margin:20px 0 0 30px" ng-if="fmSettingHolidayCtrl.pagination.numPages > 1" total-items=fmSettingHolidayCtrl.pagination.totalItems ng-model=fmSettingHolidayCtrl.pagination.page items-per-page=fmSettingHolidayCtrl.pagination.itemsPerPage max-size=fmSettingHolidayCtrl.pagination.maxSize boundary-links="{{fmSettingHolidayCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmSettingHolidayCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmSettingHolidayCtrl.pageChanged()></pagination></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=fmSettingHolidayCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmSettingHolidayCtrl.wordOK>22212</div><div class=promptClose ng-click=fmSettingHolidayCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmSettingHolidayCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=fmSettingHolidayCtrl.wordERR>22212</div><div class=promptClose ng-click="fmSettingHolidayCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmSettingHolidayCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=fmSettingHolidayCtrl.wordWARN>22212</div><div class=promptClose ng-click=fmSettingHolidayCtrl.closePrompt()></div></div></div></div>'),
            a.put("app/fieldmanager/setting/setting-item.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="padding:30px;margin-left:170px;min-width: 600px"><div><div class=float_left style=font-size:16px;margin-left:30px>项目设置</div></div><div class=clear></div><div style="margin:40px 0 0 30px;padding-bottom:20px;border-bottom:1px solid #94A8BA;color:#1F2D3D;font-size:13px;font-weight:medium;min-width:90rem"><div class=float_left style=width:20rem;padding-left:2rem>项目名称</div><div class=float_left style=width:20rem>折扣</div></div><div class=clear></div><div ng-repeat="item in fmSettingItemCtrl.items" style=font-size:13px;min-width:90rem;margin-left:30px><div style="border-bottom:1px solid #D3DCE6;color:#475669;padding:15px 0;display:flex;align-items:center"><div class=float_left style=width:20rem;padding-left:2rem ng-bind=item.name></div><div class=float_left style=width:20rem ng-bind="item.discount>0?item.discount:\'暂无\'"></div></div><div class=clear></div></div></div><!-- 成功提示弹框 --><div class=bgGary2 ng-show=fmSettingItemCtrl.succeedFlag><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/rectangle2.png"><div class="float_left form_marginL_15px">修改完成</div></div></div><div class=bgGary style=z-index:999 ng-show=fmSettingItemCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=fmSettingItemCtrl.err>此名称已被占用</div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="fmSettingItemCtrl.errorFlag = false"></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/fieldmanager/setting/setting-person.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/fieldmanager/head/head.html\'"></div> --><div style=padding:30px;margin-left:170px;min-width:600px><div style=font-size:16px;margin-left:30px>个人信息</div><div class=form_first_view><div class="form_key float_left form_key_margin" style=margin-right:20px;width:84px;text-align:right>账号名称</div><div class="form_value float_left form_value_width" ng-bind=fmSettingPersonCtrl.account></div></div><div class=clear></div><div style=margin-top:20px><div class="form_key float_left form_key_margin" style=margin-right:20px;width:84px;text-align:right>原密码</div><input class="form_value float_left form_value_width" placeholder=请输入原密码 ng-model=fmSettingPersonCtrl.oldPassword ng-change="fmSettingPersonCtrl.judge()"></div><div class=clear></div><div style=margin-top:20px><div class="form_key float_left form_key_margin" style=margin-right:20px;width:84px;text-align:right>新密码</div><input class="form_value float_left form_value_width" placeholder=请输入新密码 ng-model=fmSettingPersonCtrl.newPassword ng-change="fmSettingPersonCtrl.judge()"></div><div class=clear></div><div class="button2_normal float_left" ng-show=!fmSettingPersonCtrl.saveFlag style="background:#ccc;margin:30px 0 0 104px">保存</div><div class="button2_normal float_left" ng-show=fmSettingPersonCtrl.saveFlag style="margin:30px 0 0 104px" ng-click=fmSettingPersonCtrl.save()>保存</div><div class="button2_normal float_left" style="background:#fff;margin:30px 0 0 20px;border:1px solid #ccc;color:#99a9bf" ng-click=fmSettingPersonCtrl.logout()>退出登录</div></div><!-- 成功提示弹框 --><div class=bgGary2 ng-show=fmSettingPersonCtrl.succeedFlag><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/rectangle2.png"><div class="float_left form_marginL_15px">修改完成</div></div></div><div class=bgGary ng-show=fmSettingPersonCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px">请正确输入密码</div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/fieldmanager/setting/setting-price-register.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style=margin-left:190px><div style="font-size:16px;padding:30px 0 0 30px">价格设置</div><div style="width:100%;border-bottom:1px solid #ddd;height:37px;margin-top:30px;line-height:34px"><div style="padding-left: 30px" class=pointer ng-repeat="venue in fmPriceRegisterCtrl.venues" ng-click=fmPriceRegisterCtrl.chooseVenue(venue)><div class=float_left ng-show="venue.name == fmPriceRegisterCtrl.venueName" style="font-size:14px;color:#00a1ff;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;border-bottom:0" ng-bind=venue.name></div><div class=float_left ng-show="!(venue.name == fmPriceRegisterCtrl.venueName)" style="font-size:14px;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;background:#EFF2F6;color:#8492a6;border-bottom:0" ng-bind=venue.name></div></div><div class=clear></div></div><div ng-repeat="item in fmPriceRegisterCtrl.venue.items" style="font-size:13px;min-width: 1000px;padding: 0 30px"><div style=margin-top:30px;height:30px;margin-right:15px;font-weight:600 ng-bind=item.name></div><div class=clear></div><div style=margin-left:2.7rem><div style=width:5rem ng-repeat="clock in item.clocks" class=float_left ng-bind="clock.sd | date:\'HH:mm\'"></div></div><div class=clear></div><div style=margin-top:10px><div ng-repeat="time in item.clocks"><div class=float_left ng-show=time.flag style=font-weight:600;width:4rem;height:50px;line-height:50px><div>工作日</div><div>周末</div><div>节假日</div></div><div class=float_left ng-show="!time.emptyFlag && !time.endFlag"><div style="height:52px;line-height:50px;width:5rem;color:#00A1FF;border:1px solid #ddd;border-bottom:0;padding-left:8px" ng-click="fmPriceRegisterCtrl.showAdd(time,\'week\',item)" class=pointer ng-show="!time.priceArr[1].unit && time.flag">设价格</div><div style="height:52px;line-height:50px;width:5rem;border:1px solid #ddd;border-bottom:0;padding-left:8px" ng-click="fmPriceRegisterCtrl.showAdd(time,\'week\',item,time.priceArr[1].price)" class=pointer ng-show="time.priceArr[1].unit && time.flag" ng-bind="\'￥\'+time.priceArr[1].price+\'/\'+time.priceArr[1].u"></div><div style="height:52px;line-height:50px;width:5rem;color:#00A1FF;border-right:1px solid #ddd;border-top:1px solid #ddd;padding-left:8px" ng-click="fmPriceRegisterCtrl.showAdd(time,\'week\',item)" class=pointer ng-show="!time.priceArr[1].unit && !time.flag">设价格</div><div style="height:52px;line-height:50px;width:5rem;border-right:1px solid #ddd;border-top:1px solid #ddd;padding-left:8px" ng-click="fmPriceRegisterCtrl.showAdd(time,\'week\',item,time.priceArr[1].price)" class=pointer ng-show="time.priceArr[1].unit && !time.flag" ng-bind="\'￥\'+time.priceArr[1].price+\'/\'+time.priceArr[1].u"></div><div style="height:51px;line-height:50px;width:5rem;color:#00A1FF;border:1px solid #ddd;border-left:0;padding-left:8px" ng-click="fmPriceRegisterCtrl.showAdd(time,\'weekend\',item)" class=pointer ng-show="!time.priceArr[6].unit && !time.flag">设价格</div><div style="height:51px;line-height:50px;width:5rem;border:1px solid #ddd;border-left:0;padding-left:8px" ng-click="fmPriceRegisterCtrl.showAdd(time,\'weekend\',item,time.priceArr[6].price)" class=pointer ng-show="time.priceArr[6].unit && !time.flag" ng-bind="\'￥\'+time.priceArr[6].price+\'/\'+time.priceArr[6].u"></div><div style="height:51px;line-height:50px;width:5rem;color:#00A1FF;border:1px solid #ddd;padding-left:8px" ng-click="fmPriceRegisterCtrl.showAdd(time,\'weekend\',item)" class=pointer ng-show="!time.priceArr[6].unit && time.flag">设价格</div><div style="height:51px;line-height:50px;width:5rem;border:1px solid #ddd;padding-left:8px" ng-click="fmPriceRegisterCtrl.showAdd(time,\'weekend\',item,time.priceArr[6].price)" class=pointer ng-show="time.priceArr[6].unit && time.flag" ng-bind="\'￥\'+time.priceArr[6].price+\'/\'+time.priceArr[6].u"></div><div style="height:51px;line-height:50px;width:5rem;color:#00A1FF;border:1px solid #ddd;border-left:0;padding-left:8px;border-top:0" ng-click="fmPriceRegisterCtrl.showAdd(time,\'holiday\',item)" class=pointer ng-show="!time.priceArr[7].unit && !time.flag">设价格</div><div style="height:51px;line-height:50px;width:5rem;border:1px solid #ddd;border-left:0;padding-left:8px;border-top:0" ng-click="fmPriceRegisterCtrl.showAdd(time,\'holiday\',item,time.priceArr[7].price)" class=pointer ng-show="time.priceArr[7].unit && !time.flag" ng-bind="\'￥\'+time.priceArr[7].price+\'/\'+time.priceArr[7].u"></div><div style="height:51px;line-height:50px;width:5rem;color:#00A1FF;border:1px solid #ddd;padding-left:8px;border-top:0" ng-click="fmPriceRegisterCtrl.showAdd(time,\'holiday\',item)" class=pointer ng-show="!time.priceArr[7].unit && time.flag">设价格</div><div style="height:51px;line-height:50px;width:5rem;border:1px solid #ddd;padding-left:8px;border-top:0" ng-click="fmPriceRegisterCtrl.showAdd(time,\'holiday\',item,time.priceArr[7].price)" class=pointer ng-show="time.priceArr[7].unit && time.flag" ng-bind="\'￥\'+time.priceArr[7].price+\'/\'+time.priceArr[7].u"></div></div><div class=float_left ng-show=time.emptyFlag><div style="height:52px;line-height:50px;width:5rem;color:#00A1FF;border-top:1px solid #ddd;border-right:1px solid #ddd;padding-left:8px">暂无</div><div style="height:51px;line-height:50px;width:5rem;color:#00A1FF;border:1px solid #ddd;border-left:0;padding-left:8px">暂无</div></div></div><div class=clear></div></div><div class=clear></div></div></div><div class=bgGary ng-show=fmPriceRegisterCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">设置价格</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmPriceRegisterCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">输入价格</div><input class="form_value float_left form_value_width" placeholder=请输入价格 ng-blur="fmPriceRegisterCtrl.judge(\'price\')" ng-class="{\'\':!fmPriceRegisterCtrl.priceFlag,\'form_value_error\':fmPriceRegisterCtrl.priceFlag}" ng-model="fmPriceRegisterCtrl.price"><div class=clear></div><div class=form_error_font ng-show=!fmPriceRegisterCtrl.pFlag></div><div class=form_error_font ng-show=fmPriceRegisterCtrl.pFlag>此项为必填项</div><div><img src=assets/images/bluecircle.png ng-show=fmPriceRegisterCtrl.flagOn ng-click=fmPriceRegisterCtrl.chooseOn(true) style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=!fmPriceRegisterCtrl.flagOn ng-click=fmPriceRegisterCtrl.chooseOn(true) style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=fmPriceRegisterCtrl.chooseOn(true)>按小时</div><img src=assets/images/bluecircle.png ng-show=!fmPriceRegisterCtrl.flagOn ng-click=fmPriceRegisterCtrl.chooseOn(false) style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=fmPriceRegisterCtrl.flagOn ng-click=fmPriceRegisterCtrl.chooseOn(false) style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=fmPriceRegisterCtrl.chooseOn(false)>按场次</div></div><div class=clear></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmPriceRegisterCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=fmPriceRegisterCtrl.close()>取消</div><div class=clear></div></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/fieldmanager/setting/setting-product-info.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div class=field_titleBox><div class="field_titleNormal field_titleChoose">商品基础信息</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-setting-supply>供应商和商品种类设置</div></div><div style="padding:20px 30px 30px 30px;min-width: 850px"><div><div class="button2_normal float_left" style=background:#00A1FF ng-click="fmProductInfoCtrl.addFlag = true">新增商品</div></div><div class=clear></div><div style="margin-top:40px;padding-bottom:20px;border-bottom:1px solid #94A8BA;color:#1F2D3D;font-size:13px;font-weight:medium;min-width:114rem"><div class=float_left style=width:14rem;padding-left:20px>商品名称</div><div class=float_left style=width:14rem>商品条码</div><div class=float_left style=width:14rem>计价单位</div><div class=float_left style=width:14rem>商品售价</div><div class=float_left style=width:14rem>商品种类</div><div class=float_left style=width:14rem>供应商</div><div class=float_left style=width:14rem>调价日期</div><div class=float_left style=width:16rem>操作</div></div><div class=clear></div><div ng-repeat="product in fmProductInfoCtrl.products" style=font-size:13px;min-width:114rem><div style="border-bottom:1px solid #ddd;display:flex;align-items:center;color:#475669;height:46px;line-height:46px"><div class=float_left style=width:14rem;padding-left:20px><span style=width:10rem ng-bind=product.name></span></div><div class=float_left style=width:14rem><span ng-bind="product.misCode?product.misCode:\'暂无\'"></span></div><div class=float_left style=width:14rem><span ng-bind=product.unit></span></div><div class=float_left style=width:14rem><span ng-bind=product.price></span></div><div class=float_left style=width:14rem><span ng-bind=product.categoryName></span></div><div class=float_left style=width:14rem><span ng-bind=product.supplyName></span></div><div class=float_left style=width:14rem><span ng-bind="product.updatePriceDate?(product.updatePriceDate | date:\'yyyy-MM-dd HH:mm\'):\'暂无\'"></span></div><div class=float_left style=width:16rem;color:#00a1ff><div ng-click=fmProductInfoCtrl.showEdit(product) class="float_left pointer">编辑</div><!-- <div ng-click="fmProductInfoCtrl.deleteFlag = true;fmProductInfoCtrl.vId = venue._id" class="float_left pointer" style="margin:0 0 0 40px;color:#99a9bc">删除</div>  --></div></div><div class=clear></div></div><pagination style="left:280px;margin:20px 30px 3px 0px" ng-if="fmProductInfoCtrl.pagination.numPages > 1" total-items=fmProductInfoCtrl.pagination.totalItems ng-model=fmProductInfoCtrl.pagination.page items-per-page=fmProductInfoCtrl.pagination.itemsPerPage max-size=fmProductInfoCtrl.pagination.maxSize boundary-links="{{fmProductInfoCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmProductInfoCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmProductInfoCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=fmProductInfoCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">商品详情</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmProductInfoCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin" style="width: 56px">商品名称</div><input class="form_value float_left form_value_width" placeholder=请输入商品名称 ng-blur="fmProductInfoCtrl.judge(\'name\')" ng-class="{\'\':!fmProductInfoCtrl.nameFlag,\'form_value_error\':fmProductInfoCtrl.nameFlag}" ng-model="fmProductInfoCtrl.name"></div><div class=clear></div><div class=form_error_font ng-show=!fmProductInfoCtrl.nameFlag></div><div class=form_error_font ng-show=fmProductInfoCtrl.nameFlag style=margin-left:80px>此项为必填项</div><div><div class="form_key float_left form_key_margin" style="width: 56px">商品类别</div><div class="float_left pointer" style="z-index: 50" ng-class="{\'select\':!fmProductInfoCtrl.chooseProductFlag,\'select_foucs\':fmProductInfoCtrl.chooseProductFlag}" ng-click="fmProductInfoCtrl.chooseProductFlag = !fmProductInfoCtrl.chooseProductFlag"><div class="form_down_icon form_select_value_choose" style=width:346px ng-bind=fmProductInfoCtrl.categoryName></div><div class=form_select_div style=width:346px ng-show=fmProductInfoCtrl.chooseProductFlag><div ng-click=fmProductInfoCtrl.chooseCreateCategory(category) class="select_cell pointer" ng-repeat="category in fmProductInfoCtrl.shopProductCategories" ng-bind=category.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin" style="width: 56px">供应商</div><div class="float_left pointer" style="z-index: 20" ng-class="{\'select\':!fmProductInfoCtrl.chooseSupplyFlag,\'select_foucs\':fmProductInfoCtrl.chooseSupplyFlag}" ng-click="fmProductInfoCtrl.chooseSupplyFlag = !fmProductInfoCtrl.chooseSupplyFlag"><div class="form_down_icon form_select_value_choose" style=width:346px ng-bind=fmProductInfoCtrl.supplyName></div><div class=form_select_div style=width:346px ng-show=fmProductInfoCtrl.chooseSupplyFlag><div ng-click=fmProductInfoCtrl.chooseSupply(supply) class="select_cell pointer" ng-repeat="supply in fmProductInfoCtrl.supplies" ng-bind=supply.supplyName onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin" style="width: 56px">计价单位</div><input class="form_value float_left form_value_width" placeholder=请输入计价单位 ng-blur="fmProductInfoCtrl.judge(\'unit\')" ng-class="{\'\':!fmProductInfoCtrl.unitFlag,\'form_value_error\':fmProductInfoCtrl.unitFlag}" ng-model="fmProductInfoCtrl.unit"></div><div class=clear></div><div class=form_error_font ng-show=!fmProductInfoCtrl.unitFlag></div><div class=form_error_font ng-show=fmProductInfoCtrl.unitFlag style=margin-left:80px>此项为必填项</div><div><div class="form_key float_left form_key_margin" style="width: 56px">商品条码</div><input class="form_value float_left form_value_width" placeholder=请输入商品条码 ng-model="fmProductInfoCtrl.misCode"></div><div class=clear></div><div class=clear></div><div class=form_error_font ng-show=!fmProductInfoCtrl.misCodeFlag></div><div class=form_error_font ng-show=fmProductInfoCtrl.misCodeFlag style=margin-left:80px>此项为必填项</div><div><div class="form_key float_left form_key_margin" style="width: 56px">商品售价</div><input class="form_value float_left form_value_width" placeholder=请输入商品售价 ng-model="fmProductInfoCtrl.price"></div><div class=clear></div><div class=form_error_font ng-show=!fmProductInfoCtrl.priceFlag></div><div class=form_error_font ng-show=fmProductInfoCtrl.priceFlag style=margin-left:80px>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmProductInfoCtrl.create()>完成</div><div class="button_normal float_right" ng-click=fmProductInfoCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=fmProductInfoCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=fmProductInfoCtrl.err></div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="fmProductInfoCtrl.errorFlag = false"></div></div></div><div class=bgGary ng-show=fmProductInfoCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmProductInfoCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>此操作将永久删除该商品信息，是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmProductInfoCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=fmProductInfoCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div><!-- 成功提示 --><div class=bgGary ng-show=fmProductInfoCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmProductInfoCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="fmProductInfoCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmProductInfoCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=fmProductInfoCtrl.wordERR title={{fmProductInfoCtrl.wordERR}}>22212</div><div class=promptClose ng-click=fmProductInfoCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmProductInfoCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=fmProductInfoCtrl.wordWARN title={{fmProductInfoCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/fieldmanager/setting/setting-rule.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/fieldmanager/head/head.html\'"></div> --><div style="padding:30px;border-left:1px solid #ddd;margin-left:200px;min-width: 870px"><div style=font-size:16px>预定规则</div><div class=form_first_view><div class="form_key float_left form_key_margin" style=margin-right:50px>预定限制</div><div class="form_value float_left form_value_width" ng-bind="fmSettingRuleCtrl.orderLimit?fmSettingRuleCtrl.orderLimit:\'暂无\'"></div></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin" style=margin-right:50px>放场时间</div><div class="form_value float_left form_value_width form_clock_icon" ng-bind="fmSettingRuleCtrl.startDate?(fmSettingRuleCtrl.startDate | date:\'HH:mm:ss\'):\'暂无放场时间\'"></div></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin" style=margin-right:22px>详细预定规则</div><div class="form_value float_left" style=width:70rem;height:200px><div style=width:68rem;border:0;height:180px ng-bind="fmSettingRuleCtrl.orderRule?fmSettingRuleCtrl.orderRule:\'暂无预定规则\'"></div></div></div><div class=clear></div><!-- <div class="button2_normal float_left" ng-show="!fmSettingRuleCtrl.saveFlag" style="background:#ccc;margin:20px 0 0 105px">保存</div> --><!-- <div class="button2_normal float_left pointer" ng-show="fmSettingRuleCtrl.saveFlag" style="margin:20px 0 0 105px" ng-click="fmSettingRuleCtrl.save()">保存</div> --><div class=clear></div><div style="margin:40px 0 20px 0"><div class=float_left style=font-size:16px>退订规则</div><!-- <div class="button2_normal float_right" style="background:#00A1FF" ng-click="fmSettingRuleCtrl.addFlag = true">新增规则</div> --></div><div class=clear></div><div style="margin-top:40px;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;font-size:13px;min-width:97rem"><div class=float_left style=width:27rem;padding-left:20px>时间设定</div><div class=float_left style=width:24rem>扣费情况</div><div class=float_left>操作</div></div><div class=clear></div><div ng-repeat="rule in fmSettingRuleCtrl.rules"><div class=pointer style="height:60px;line-height:60px;border-bottom:1px solid #ddd;color:#475669;font-size:13px;min-width:97rem"><div class=float_left style=width:27rem;padding-left:20px ng-bind=rule.state>小七</div><div class=float_left style=width:24rem ng-bind=rule.p>18888888888</div><div class=float_left><div class=float_left>无</div><!-- <div ng-click="fmSettingRuleCtrl.showEdit(rule)" class="float_left" style="color:#00a1ff">编辑</div> --><!-- <div ng-click="fmSettingRuleCtrl.deleteFlag = true;fmSettingRuleCtrl.rId = rule._id" class="float_left" style="margin:0 0 0 40px;color:#99a9bc">删除</div> --></div></div><div class=clear></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/fieldmanager/setting/setting-service-tag.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="padding:20px 30px 30px 30px;margin-left:200px;min-width: 930px"><div><div class=float_left style=font-size:18px;color:#475669;margin-top:10px>会员卡标签</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="fmDateServiceTagCtrl.addFlag = true">新增标签</div></div><div class=clear></div><table style="margin-top:20px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:25%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">标签名称</td><td style="width:25%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属场馆</td><td style="width:25%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">时间段</td><td style="width:25%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr ng-repeat="tag in fmDateServiceTagCtrl.tags" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:25%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=tag.name></td><td style="width:25%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=tag.venueName></td><td style="width:25%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=tag.time></td><td style="width:25%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div ng-click=fmDateServiceTagCtrl.showEdit(tag) class="float_left pointer">编辑</div><!--  <div ng-click="fmDateServiceTagCtrl.deleteFlag = true;fmDateServiceTagCtrl.tId = tag._id" class="float_left pointer" style="margin-left:2rem;color:#99a9bc">删除</div> --></td></tr></table><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="fmDateServiceTagCtrl.pagination.numPages > 1" total-items=fmDateServiceTagCtrl.pagination.totalItems ng-model=fmDateServiceTagCtrl.pagination.page items-per-page=fmDateServiceTagCtrl.pagination.itemsPerPage max-size=fmDateServiceTagCtrl.pagination.maxSize boundary-links="{{fmDateServiceTagCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmDateServiceTagCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmDateServiceTagCtrl.pageChanged()></pagination></div></div><div class=bgGary ng-show=fmDateServiceTagCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">会员卡时间段</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmDateServiceTagCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">时间段名</div><input class="form_value float_left form_value_width" placeholder=请输入标签名称 ng-model=fmDateServiceTagCtrl.name></div><div class=clear></div><div class=form_error_font ng-show=!fmDateServiceTagCtrl.nameFlag></div><div class=form_error_font ng-show=fmDateServiceTagCtrl.nameFlag>此项为必填项</div><div class="field_selectBoxOne form_zindex_100" style=width:445px;margin-top:0><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">场馆名称</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value" style=color:#000><div class=ellipsis ng-bind=fmDateServiceTagCtrl.venueName ng-click="fmDateServiceTagCtrl.venueFlag=!fmDateServiceTagCtrl.venueFlag">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=fmDateServiceTagCtrl.venueFlag><div class="select_cell pointer ellipsis" ng-repeat="venue in fmDateServiceTagCtrl.venues" ng-bind=venue.name ng-click=fmDateServiceTagCtrl.chooseVenue(venue)>默认按钮</div></div></div><div style=clear:both></div></div><div class=form_error_font></div><div class=position_relative style=z-index:2><div class="form_key float_left form_key_margin">开始时间</div><input class="form_value float_left form_value_width form_clock_icon" placeholder=会员卡开始时间 ng-click="fmDateServiceTagCtrl.startFlag = true;fmDateServiceTagCtrl.startShowFlag = true;" ng-show="!fmDateServiceTagCtrl.startShowFlag"><div class="form_value float_left form_value_width form_clock_icon" ng-click="fmDateServiceTagCtrl.startFlag = !fmDateServiceTagCtrl.startFlag" ng-bind="fmDateServiceTagCtrl.startDate | date:\'HH:mm:ss\'" ng-show=fmDateServiceTagCtrl.startShowFlag></div><div class=student_datetime style=margin-left:75px ng-show=fmDateServiceTagCtrl.startFlag><timepick ng-close="fmDateServiceTagCtrl.startFlag=false;" ng-date=fmDateServiceTagCtrl.startDate></timepick></div><div class=clear></div></div><div class=form_error_font></div><div class=position_relative style=z-index:1><div class="form_key float_left form_key_margin">结束时间</div><input class="form_value float_left form_value_width form_clock_icon" placeholder=会员卡结束时间 ng-click="fmDateServiceTagCtrl.endFlag = true;fmDateServiceTagCtrl.endShowFlag = true;" ng-show="!fmDateServiceTagCtrl.endShowFlag"><div class="form_value float_left form_value_width form_clock_icon" ng-click="fmDateServiceTagCtrl.endFlag = !fmDateServiceTagCtrl.endFlag" ng-bind="fmDateServiceTagCtrl.endDate | date:\'HH:mm:ss\'" ng-show=fmDateServiceTagCtrl.endShowFlag></div><div class=student_datetime style=margin-left:75px ng-show=fmDateServiceTagCtrl.endFlag><timepick ng-close="fmDateServiceTagCtrl.endFlag=false;" ng-date=fmDateServiceTagCtrl.endDate></timepick></div><div class=clear></div></div><div class=form_error_font></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmDateServiceTagCtrl.create()>完成</div><div class="button_normal float_right" ng-click=fmDateServiceTagCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmDateServiceTagCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmDateServiceTagCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>是否要删除这个卡种？</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmDateServiceTagCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=fmDateServiceTagCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmDateServiceTagCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=fmDateServiceTagCtrl.err>此名称已被占用</div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="fmDateServiceTagCtrl.errorFlag = false"></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style>'),
            a.put("app/fieldmanager/setting/setting-service.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0px 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="padding:20px 0px 30px 10px;min-width:900px;margin-left:190px"><div><div style=font-size:20px;margin-left:30px>综合服务设置</div><div class=field_titleBox><div class="field_titleNormal field_titleChoose">综合服务</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-setting-type>分类设置</div><div class=clear></div></div></div><div style="margin:20px 0 0 30px"><div class="form_value form_width_250 float_left" style="margin:0 20px 0 0"><input style=border:0;height:32px;width:200px placeholder=输入服务名称 ng-model="fmSettingServiceCtrl.searchName"> <img src=assets/images/search.png style=margin-top:-6px class=pointer ng-click="fmSettingServiceCtrl.loadProducts()"></div><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmSettingServiceCtrl.showVenueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmSettingServiceCtrl.showVenueName ng-click="fmSettingServiceCtrl.showChooseVenueBoxIndex=!fmSettingServiceCtrl.showChooseVenueBoxIndex">场馆1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=fmSettingServiceCtrl.showChooseVenueBoxIndex><div class="select_cell pointer ellipsis" ng-repeat="venue in fmSettingServiceCtrl.venues" ng-bind=venue.name ng-click="fmSettingServiceCtrl.chooseVenueName(venue,\'search\')">默认按钮</div></div></div><div class="select field_select float_left"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmSettingServiceCtrl.searchType==\'选择一级分类\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmSettingServiceCtrl.searchType ng-click="fmSettingServiceCtrl.searchFlag=!fmSettingServiceCtrl.searchFlag">场馆1</div></div><div class=form_select_div style="position:relative;z-index: 100" ng-show=fmSettingServiceCtrl.searchFlag><div class="select_cell pointer ellipsis" ng-repeat="productcategory in fmSettingServiceCtrl.searchArr" ng-bind=productcategory.name ng-click=fmSettingServiceCtrl.chooseSearch(productcategory)>默认按钮</div></div></div><div class="select field_select float_left"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmSettingServiceCtrl.searchSecondType==\'选择二级分类\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmSettingServiceCtrl.searchSecondType ng-click="fmSettingServiceCtrl.searchSecondFlag=!fmSettingServiceCtrl.searchSecondFlag">场馆1</div></div><div class=form_select_div style="position:relative;z-index: 100" ng-show=fmSettingServiceCtrl.searchSecondFlag><div class="select_cell pointer ellipsis" ng-repeat="second in fmSettingServiceCtrl.secondCategories" ng-bind=second.name ng-click=fmSettingServiceCtrl.chooseSecondSearch(second)>默认按钮</div></div></div><div class="button2_normal float_right" style=background:#00A1FF;margin-right:20px ng-click="fmSettingServiceCtrl.addFlag = true">新增综合服务</div></div><div class=clear></div><div style="margin:20px 20px 0 30px"><div style="margin:40px 20px 0 0;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;min-width:96rem"><div class=float_left style=width:14rem;padding-left:20px>服务名称</div><div class=float_left style=width:18rem>场馆名称</div><div class=float_left style=width:16rem>一级分类</div><div class=float_left style=width:16rem>二级分类</div><div class=float_left style=width:14rem>状态</div><div class=float_left style=width:14rem>操作</div></div><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;min-width:96rem;margin-right:20px" ng-repeat="product in fmSettingServiceCtrl.products"><div class="float_left ellipsis" style=width:14rem;padding-left:20px ng-bind=product.name></div><div class="float_left ellipsis" style=width:18rem ng-bind=product._venue.name></div><div class="float_left ellipsis" style=width:16rem ng-bind="product._firstCategory?product._firstCategory.name:\'暂无\'"></div><div class="float_left ellipsis" style=width:16rem ng-bind="product._secondCategory?product._secondCategory.name:\'暂无\'"></div><div class="float_left ellipsis" style=width:14rem ng-bind="product.isUsed?\'启用\':\'未启用\'"></div><div class="float_left pointer" style=width:14rem><div onclick="event.cancelBubble = true" ng-click=fmSettingServiceCtrl.showEdit(product) class=float_left style=color:#00a1ff>编辑</div><div style="margin:0 0 0 40px" onclick="event.cancelBubble = true" ng-click="fmSettingServiceCtrl.deleteFlag = true;fmSettingServiceCtrl.pId = product._id" class=float_left>删除</div></div></div><div class=select_div ng-show=fmSettingServiceCtrl.typeFlag style=width:20rem;top:230px;left:430px><div class="select_choose ellipsis pointer" ng-click=fmSettingServiceCtrl.chooseClass(class)>全部</div></div></div><pagination style="margin:20px 0 0 30px" ng-if="fmSettingServiceCtrl.pagination.numPages > 1" total-items=fmSettingServiceCtrl.pagination.totalItems ng-model=fmSettingServiceCtrl.pagination.page items-per-page=fmSettingServiceCtrl.pagination.itemsPerPage max-size=fmSettingServiceCtrl.pagination.maxSize boundary-links="{{fmSettingServiceCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmSettingServiceCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmSettingServiceCtrl.pageChanged()></pagination></div></div></div><!-- 新增编辑服务 --><div class=bgGary ng-show=fmSettingServiceCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left" ng-show=!fmSettingServiceCtrl.editFlag>新增综合服务</div><div class="form_title float_left" ng-show=fmSettingServiceCtrl.editFlag>编辑综合服务</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmSettingServiceCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">服务名称</div><input class="form_value float_left form_value_width" placeholder=请输入综合服务名称 ng-model=fmSettingServiceCtrl.name></div><div class=clear></div><div class=form_error_font ng-show=!fmSettingServiceCtrl.nameFlag></div><div class=form_error_font ng-show=fmSettingServiceCtrl.nameFlag>此项为必填项</div><div class=field_selectBoxOne style="margin-top: 0px;width: 445px"><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">选择场馆</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmSettingServiceCtrl.product.venueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmSettingServiceCtrl.product.venueName ng-click="fmSettingServiceCtrl.showChooseVenueBox=!fmSettingServiceCtrl.showChooseVenueBox">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=fmSettingServiceCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in fmSettingServiceCtrl.venues" ng-bind=venue.name ng-click=fmSettingServiceCtrl.chooseVenueName(venue)>默认按钮</div></div></div><div style=clear:both></div></div><div class=field_selectBoxOne style=width:445px;margin-top:20px><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">一级分类</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value" style=color:#000 ng-click="fmSettingServiceCtrl.firstFlag=!fmSettingServiceCtrl.firstFlag"><div class=ellipsis ng-bind=fmSettingServiceCtrl.firstType>场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=fmSettingServiceCtrl.firstFlag><div class="select_cell pointer ellipsis" ng-repeat="productcategory in fmSettingServiceCtrl.searchArr" ng-bind=productcategory.name ng-click=fmSettingServiceCtrl.chooseProductCategory(productcategory)>默认按钮</div></div></div><div style=clear:both></div></div><div class=field_selectBoxOne style="margin-top: 20px;width: 445px"><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">二级分类</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value" style=color:#000 ng-click="fmSettingServiceCtrl.secondFlag=!fmSettingServiceCtrl.secondFlag"><div class=ellipsis ng-bind=fmSettingServiceCtrl.second>项目1</div></div><div style="position: relative;z-index: 300" class=form_select_div ng-show=fmSettingServiceCtrl.secondFlag><div class="select_cell pointer ellipsis" ng-repeat="second in fmSettingServiceCtrl.secondArr" ng-bind=second.name ng-click=fmSettingServiceCtrl.chooseSecond(second)>默认按钮</div></div></div><div style=clear:both></div></div><div style=margin-top:20px><div class="form_key float_left form_key_margin">服务备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=fmSettingServiceCtrl.remark></div><div class=clear></div><div style=margin-top:10px><div class="form_key float_left form_key_margin">是否启用</div><div class="singleChoose_box float_left"><div class=singleChoose_option ng-repeat="state in fmSettingServiceCtrl.useStateArr" ng-click=fmSettingServiceCtrl.chooseState(state)><div class="singleChoose_imageBox {{state.image}}"></div><div class=singleChoose_prompt ng-bind=state.name>每周</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmSettingServiceCtrl.create()>完成</div><div class="button_normal float_right" ng-click=fmSettingServiceCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmSettingServiceCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmSettingServiceCtrl.deleteFlag = false"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>删除服务为不可逆操作，是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click="fmSettingServiceCtrl.deleteFlag = false">不删了</div><div class="button_normal float_right" ng-click=fmSettingServiceCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=fmSettingServiceCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmSettingServiceCtrl.wordOK>22212</div><div class=promptClose ng-click=fmSettingServiceCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmSettingServiceCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=fmSettingServiceCtrl.wordERR>22212</div><div class=promptClose ng-click="fmSettingServiceCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmSettingServiceCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=fmSettingServiceCtrl.wordWARN>22212</div><div class=promptClose ng-click=fmSettingServiceCtrl.closePrompt()></div></div></div></div>'), a.put("app/fieldmanager/setting/setting-special.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><div style="padding:30px;margin-left:190px;min-width: 900px"><div><div class=float_left style=font-size:18px;color:#475669>专用账户设置</div></div><div class=clear></div><div style="margin-top:20px;padding-bottom:30px;border-bottom:1px solid #94A8BA;font-weight:medium;font-size:16px;min-width:98rem;color:#475669"><div class=float_left style=width:16rem;padding-left:20px>场馆</div><div class=float_left style=width:14rem>消费享受折扣</div><div class=float_left style=width:18rem>操作</div></div><div class=clear></div><div ng-repeat="venue in fmSettingSpecialCtrl.venues"><div class=pointer style="height:46px;line-height:44px;border-bottom:1px solid #ddd;color:#475669;font-size:13px;min-width:98rem"><div class=float_left style=width:16rem;padding-left:20px ng-bind=venue.name>小七</div><div class=float_left style=width:14rem ng-bind="venue.openSpe?venue.discount:\'暂无折扣\'">黄金会员</div><div class=float_left style=width:18rem;color:#00a1ff><div ng-click=fmSettingSpecialCtrl.showEdit(venue) class=float_left>编辑</div></div></div><div class=clear></div></div></div><div class=bgGary ng-show=fmSettingSpecialCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_key float_left form_key_margin">专用账户</div><div class="singleChoose_box float_left"><div class=singleChoose_option ng-repeat="state in fmSettingSpecialCtrl.useStateArr" ng-click=fmSettingSpecialCtrl.chooseState(state)><div class="singleChoose_imageBox {{state.image}}"></div><div class=singleChoose_prompt ng-bind=state.name>每周</div></div></div></div><div class=clear></div><div ng-show=fmSettingSpecialCtrl.isUsed><div class="form_key float_left form_key_margin" style=margin-top:5px><div>专用账户</div><div>折扣</div></div><input class="form_value float_left form_value_width" placeholder=请输入专用账户折扣，例：0.5 ng-class="{\'\':!fmSettingSpecialCtrl.discountFlag,\'form_value_error\':fmSettingSpecialCtrl.discountFlag}" ng-model="fmSettingSpecialCtrl.discount"></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmSettingSpecialCtrl.update()>完成</div><div class="button_normal float_right" ng-click=fmSettingSpecialCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=fmSettingSpecialCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=fmSettingSpecialCtrl.err></div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="fmSettingSpecialCtrl.errorFlag = false"></div></div></div><div class=bgGary ng-show=fmSettingSpecialCtrl.succeedFlag><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>修改完成</div><div class=promptClose ng-click="fmSettingSpecialCtrl.succeedFlag = false"></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/fieldmanager/setting/setting-supply.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0px 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-setting-product-info>商品基础信息</div><div class="field_titleNormal field_titleChoose">供应商和商品种类设置</div></div><div style="padding:20px 30px 30px 30px;min-width: 850px"><div style="min-width: 850px"><div class=float_left style="height: 40px;line-height: 40px;font-weight: bold">供应商设置</div><div class="button2_normal float_right" style="background:#00A1FF;margin-right: 20px" ng-click="fmSupplyCtrl.addFlag = true">新增供应商</div></div><div class=clear></div><div style="margin-top:40px;padding-bottom:20px;border-bottom:1px solid #94A8BA;color:#1F2D3D;font-size:14px;font-weight:medium;width:114rem"><div class="float_left width_22" style=padding-left:20px>供应商名称</div><div class="float_left width_22">联系人</div><div class="float_left width_22">联系电话</div><div class="float_left width_22">是否启用</div><div class="float_left width_22">操作</div></div><div class=clear></div><div ng-repeat="supply in fmSupplyCtrl.supplies" style=font-size:14px;width:114rem><div style="border-bottom:1px solid #ddd;display:flex;align-items:center;padding:10px 0;color:#475669"><div class="float_left width_22" style=padding-left:20px;line-height:20px><span ng-bind=supply.supplyName></span></div><div class="float_left width_22"><span ng-bind=supply.workerName></span></div><div class="float_left width_22" ng-bind=supply.tel></div><div class="float_left width_22" ng-bind="supply.isUsed?\'启用\':\'不启用\'"></div><div class="float_left width_22"><img src=assets/images/edit.png ng-click=fmSupplyCtrl.showEdit(supply) class="float_left pointer" style="width:13px"> <img src=assets/images/destroy.png ng-click="fmSupplyCtrl.deleteFlag = true;fmSupplyCtrl._supplyId = supply._id" class="float_left pointer" style="width:12px;margin:0px 0 0 40px"></div></div><div class=clear></div></div><pagination style="left:280px;margin:20px 30px 3px 0px" ng-if="fmSupplyCtrl.pagination.numPages > 1" total-items=fmSupplyCtrl.pagination.totalItems ng-model=fmSupplyCtrl.pagination.page items-per-page=fmSupplyCtrl.pagination.itemsPerPage max-size=fmSupplyCtrl.pagination.maxSize boundary-links="{{fmSupplyCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmSupplyCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmSupplyCtrl.pageChanged()></pagination></div><div style="padding:20px 30px 30px 30px;min-width: 650px"><div><div class=float_left style="height: 40px;line-height: 40px;font-weight: bold">类别设置</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="fmSupplyCtrl.addTypeFlag = true">新增类别</div></div><div class=clear></div><div style="margin-top:20px;color:#1F2D3D;font-size:14px;font-weight:medium;min-width: 100rem"><div style="width: 200px;height: 50px;line-height: 50px;border:1px solid #94A8BA;border-radius: 5px;margin-right: 20px;margin-bottom: 20px;padding: 0 20px;float: left" ng-repeat="type in fmSupplyCtrl.shopProductCategories"><span class="float_left ellipsis" style="max-width: 120px" ng-bind=type.name>xx</span> <span class="float_right pointer" style=color:#20a0ff ng-click=fmSupplyCtrl.showTypeEdit(type)>编辑</span></div></div></div></div></div><div class=bgGary ng-show=fmSupplyCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增供应商</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmSupplyCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin"><span>供应商</span><span style=color:#fff>的</span></div><input class="form_value float_left form_value_width" placeholder=请输入供应商 ng-blur="fmSupplyCtrl.judge(\'supplyName\')" ng-class="{\'\':!fmSupplyCtrl.supplyNameFlag,\'form_value_error\':fmSupplyCtrl.supplyNameFlag}" ng-model="fmSupplyCtrl.supplyName"></div><div class=clear></div><div class=form_error_font ng-show=!fmSupplyCtrl.supplyNameFlag></div><div class=form_error_font ng-show=fmSupplyCtrl.supplyNameFlag style=margin-left:80px>此项为必填项</div><div><div class="form_key float_left form_key_margin"><span>联系人</span><span style=color:#fff>的</span></div><input class="form_value float_left form_value_width" placeholder=请输入联系人 ng-blur="fmSupplyCtrl.judge(\'workerName\')" ng-class="{\'\':!fmSupplyCtrl.workerNameFlag,\'form_value_error\':fmSupplyCtrl.workerNameFlag}" ng-model="fmSupplyCtrl.workerName"></div><div class=clear></div><div class=form_error_font ng-show=!fmSupplyCtrl.workerNameFlag></div><div class=form_error_font ng-show=fmSupplyCtrl.workerNameFlag style=margin-left:80px>此项为必填项</div><div><div class="form_key float_left form_key_margin">联系电话</div><input class="form_value float_left form_value_width" placeholder=请输入联系电话 ng-blur="fmSupplyCtrl.judge(\'tel\')" ng-class="{\'\':!fmSupplyCtrl.telFlag,\'form_value_error\':fmSupplyCtrl.telFlag}" ng-model="fmSupplyCtrl.tel"></div><div class=clear></div><div class=form_error_font ng-show=!fmSupplyCtrl.telFlag></div><div class=form_error_font ng-show=fmSupplyCtrl.telFlag style=margin-left:80px>此项为必填项</div><div><div class="form_key float_left form_key_margin">是否上架</div><div class="singleChoose_box float_left"><div class=singleChoose_option ng-repeat="state in fmSupplyCtrl.stateArr" ng-click=fmSupplyCtrl.chooseState(state)><div class="singleChoose_imageBox {{state.image}}"></div><div class=singleChoose_prompt ng-bind=state.name>每周</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmSupplyCtrl.create()>完成</div><div class="button_normal float_right" ng-click=fmSupplyCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmSupplyCtrl.addTypeFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增类别</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmSupplyCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">类别名称</div><input class="form_value float_left form_value_width" placeholder=请输入类别名称 ng-blur="fmSupplyCtrl.judge(\'type\')" ng-class="{\'\':!fmSupplyCtrl.typeFlag,\'form_value_error\':fmSupplyCtrl.typeFlag}" ng-model="fmSupplyCtrl.type"></div><div class=clear></div><div class=form_error_font ng-show=!fmSupplyCtrl.typeFlag></div><div class=form_error_font ng-show=fmSupplyCtrl.typeFlag style=margin-left:80px>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmSupplyCtrl.createType()>完成</div><div class="button_normal float_right" ng-click=fmSupplyCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=fmSupplyCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=fmSupplyCtrl.err></div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="fmSupplyCtrl.errorFlag = false"></div></div></div><div class=bgGary ng-show=fmSupplyCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmSupplyCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>此操作将永久删除该供应商信息，是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmSupplyCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=fmSupplyCtrl.deleteSupply()>继续删除</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmSupplyCtrl.deleteTypeFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmSupplyCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>此操作将永久删除该类别，是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmSupplyCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=fmSupplyCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=fmSupplyCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmSupplyCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="fmSupplyCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmSupplyCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=fmSupplyCtrl.wordERR title={{fmSupplyCtrl.wordERR}}>22212</div><div class=promptClose ng-click=fmSupplyCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmSupplyCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=fmSupplyCtrl.wordWARN title={{fmSupplyCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n    #mid{display:table-cell;left:0;vertical-align:middle;} \n    #box{border:2px solid #ddd;} \n    .student_search{\n        position:absolute;right: 0;top: 10px;\n    }</style>'), a.put("app/fieldmanager/setting/setting-tag.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="width:100%;border-bottom:1px solid #ddd;height:37px;margin:30px 0 0 200px;line-height:34px;padding-left:30px"><div class=pointer><div class=float_left ui-sref=fm-setting-ticket style="font-size:14px;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;background:#EFF2F6;color:#8492a6;border-bottom:0">门票设置</div><div class=float_left style="font-size:14px;color:#00a1ff;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;border-bottom:0">门票标签</div><div class=float_left ui-sref=fm-setting-ticket-cash style="font-size:14px;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;background:#EFF2F6;color:#8492a6;border-bottom:0">超时和押金</div></div><div class=clear></div></div><div style="padding:20px 30px 30px 30px;margin-left:200px;min-width: 930px"><div><div class=float_left style=font-size:18px;color:#475669;margin-top:10px>门票标签</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="fmSettingTagCtrl.addFlag = true">新增标签</div></div><div class=clear></div><table style="margin-top:20px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:34%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">标签名称</td><td style="width:33%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属场馆</td><td style="width:33%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr ng-repeat="tag in fmSettingTagCtrl.tags" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=tag.name></td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=tag.venueName></td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div ng-click=fmSettingTagCtrl.showEdit(tag) class="float_left pointer">编辑</div><!--  <div ng-click="fmSettingTagCtrl.deleteFlag = true;fmSettingTagCtrl.tId = tag._id" class="float_left pointer" style="margin-left:2rem;color:#99a9bc">删除</div> --></td></tr></table><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="fmSettingTagCtrl.pagination.numPages > 1" total-items=fmSettingTagCtrl.pagination.totalItems ng-model=fmSettingTagCtrl.pagination.page items-per-page=fmSettingTagCtrl.pagination.itemsPerPage max-size=fmSettingTagCtrl.pagination.maxSize boundary-links="{{fmSettingTagCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmSettingTagCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmSettingTagCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=fmSettingTagCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增门票</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmSettingTagCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">门票名称</div><input class="form_value float_left form_value_width" placeholder=请输入门票名称 ng-model=fmSettingTagCtrl.name></div><div class=clear></div><div class=form_error_font ng-show=!fmSettingTagCtrl.nameFlag></div><div class=form_error_font ng-show=fmSettingTagCtrl.nameFlag>此项为必填项</div><div class="field_selectBoxOne form_zindex_100" ng-show=!fmSettingTagCtrl.editFlag style=width:445px;margin-top:0><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">场馆名称</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value" style=color:#000><div class=ellipsis ng-bind=fmSettingTagCtrl.venueName ng-click="fmSettingTagCtrl.venueFlag=!fmSettingTagCtrl.venueFlag">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=fmSettingTagCtrl.venueFlag><div class="select_cell pointer ellipsis" ng-repeat="venue in fmSettingTagCtrl.venues" ng-bind=venue.name ng-click=fmSettingTagCtrl.chooseVenue(venue)>默认按钮</div></div></div><div style=clear:both></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmSettingTagCtrl.create()>完成</div><div class="button_normal float_right" ng-click=fmSettingTagCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmSettingTagCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmSettingTagCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>删除场馆后，场馆里的所有信息将被删除。对于预定该场馆的个人用户会退还预定金额。是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmSettingTagCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=fmSettingTagCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmSettingTagCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=fmSettingTagCtrl.wordERR>22212</div><div class=promptClose ng-click="fmSettingTagCtrl.promptERR = false"></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/fieldmanager/setting/setting-ticket-cash.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="width:100%;border-bottom:1px solid #ddd;height:37px;margin:30px 0 0 200px;line-height:34px;padding-left:30px"><div class=pointer><div class=float_left ui-sref=fm-setting-ticket style="font-size:14px;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;background:#EFF2F6;color:#8492a6;border-bottom:0">门票设置</div><div class=float_left ui-sref=fm-setting-tag style="font-size:14px;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;background:#EFF2F6;color:#8492a6;border-bottom:0">门票标签</div><div class=float_left style="font-size:14px;color:#00a1ff;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;border-bottom:0">超时和押金</div></div><div class=clear></div></div><div style="padding:20px 30px 30px 30px;margin-left:200px;min-width: 930px"><div><div class=float_left style=font-size:16px;margin-top:10px>门票押金</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="fmSettingTicketCashCtrl.add(\'deposit\')">新增押金</div></div><div class=clear></div><table style="margin-top:20px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">押金面额</td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属项目</td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属场馆</td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr ng-repeat="deposit in fmSettingTicketCashCtrl.deposits" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=deposit.price></td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=deposit.itemName></td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=deposit.venueName></td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div ng-click=fmSettingTicketCashCtrl.showEdit(deposit) class="float_left pointer">编辑</div><div ng-click="fmSettingTicketCashCtrl.deleteFlag = true;fmSettingTicketCashCtrl.fId = deposit._id" class="float_left pointer" style=margin-left:2rem;color:#99a9bc>删除</div></td></tr></table><div style=margin-top:20px><div class=float_left style=font-size:16px;margin-top:10px>超时固定补费金额设置</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="fmSettingTicketCashCtrl.add(\'overtime\')">新增面额</div></div><div class=clear></div><table style="margin-top:20px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">固定金额</td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属项目</td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属场馆</td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr ng-repeat="overtime in fmSettingTicketCashCtrl.overtimes" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=overtime.price></td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=overtime.itemName></td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=overtime.venueName></td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div ng-click=fmSettingTicketCashCtrl.showEdit(overtime) class="float_left pointer">编辑</div><div ng-click="fmSettingTicketCashCtrl.deleteFlag = true;fmSettingTicketCashCtrl.fId = overtime._id" class="float_left pointer" style=margin-left:2rem;color:#99a9bc>删除</div></td></tr></table></div><div class=bgGary ng-show=fmSettingTicketCashCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增门票</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmSettingTicketCashCtrl.close()"></div><div class=clear></div><div class="field_selectBoxOne form_zindex_100" style=width:445px;margin-top:20px><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">场馆名称</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value" style=color:#000><div class=ellipsis ng-bind=fmSettingTicketCashCtrl.venueName ng-click="fmSettingTicketCashCtrl.venueFlag=!fmSettingTicketCashCtrl.venueFlag">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=fmSettingTicketCashCtrl.venueFlag><div class="select_cell pointer ellipsis" ng-repeat="venue in fmSettingTicketCashCtrl.venues" ng-bind=venue.name ng-click=fmSettingTicketCashCtrl.chooseVenue(venue)>默认按钮</div></div></div><div style=clear:both></div></div><div class="field_selectBoxOne zindex_400" style="margin-top: 20px;width: 445px"><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">项目名称</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value" style=color:#000><div class=ellipsis ng-bind=fmSettingTicketCashCtrl.itemName ng-click="fmSettingTicketCashCtrl.itemFlag=!fmSettingTicketCashCtrl.itemFlag">项目1</div></div><div style="position: relative;z-index: 300" class=form_select_div ng-show=fmSettingTicketCashCtrl.itemFlag><div class="select_cell pointer ellipsis" ng-repeat="item in fmSettingTicketCashCtrl.items" ng-bind=item.name ng-click=fmSettingTicketCashCtrl.chooseItem(item)>默认按钮</div></div></div><div style=clear:both></div></div><div style=margin-top:20px><div class="form_key float_left form_key_margin">价格面额</div><input class="form_value float_left form_value_width" placeholder=请输入价格 ng-model=fmSettingTicketCashCtrl.price></div><div class=clear></div><div class=form_error_font ng-show=!fmSettingTicketCashCtrl.priceFlag></div><div class=form_error_font ng-show=fmSettingTicketCashCtrl.priceFlag>此项为必填项</div><div ng-show="fmSettingTicketCashCtrl.type != \'overtime\'"><div class="form_key float_left form_key_margin">押金方式</div><div class="float_left form_value_width"><div class="signalChooseBox top4_5 right15 pointer" ng-repeat="payment in fmSettingTicketCashCtrl.payments" ng-click=fmSettingTicketCashCtrl.choosePayment(payment)><div class="{{payment.isChoose?\'manyChooseBtn\':\'manyUnChooseBtn\'}}"></div><div class=signalChooseName ng-bind=payment.name>xxxx</div></div></div></div><div class=clear></div><div class=form_error_font ng-show=!fmSettingTicketCashCtrl.priceFlag></div><div class=form_error_font ng-show=fmSettingTicketCashCtrl.priceFlag>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmSettingTicketCashCtrl.create()>完成</div><div class="button_normal float_right" ng-click=fmSettingTicketCashCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmSettingTicketCashCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmSettingTicketCashCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>删除后，可能会影响其他东西。是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmSettingTicketCashCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=fmSettingTicketCashCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmSettingTicketCashCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=fmSettingTicketCashCtrl.wordERR>22212</div><div class=promptClose ng-click="fmSettingTicketCashCtrl.promptERR = false"></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'),
            a.put("app/fieldmanager/setting/setting-ticket.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="width:100%;border-bottom:1px solid #ddd;height:37px;margin:30px 0 0 200px;line-height:34px;padding-left:30px"><div class=pointer><div class=float_left style="font-size:14px;color:#00a1ff;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;border-bottom:0">门票设置</div><div class=float_left ui-sref=fm-setting-tag style="font-size:14px;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;background:#EFF2F6;color:#8492a6;border-bottom:0">门票标签</div><div class=float_left ui-sref=fm-setting-ticket-cash style="font-size:14px;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;background:#EFF2F6;color:#8492a6;border-bottom:0">超时和押金</div></div><div class=clear></div></div><div style="padding:20px 30px 30px 30px;margin-left:200px;min-width: 930px"><div><div class=float_left style=font-size:18px;color:#475669;margin-top:10px>门票登记</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="fmSettingTicketCtrl.addFlag = true">新增门票</div></div><div class=clear></div><table style="margin-top:20px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">门票名称</td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属项目</td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属场馆</td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">时间段</td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">价格</td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">单次限时</td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">门票标签</td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr ng-repeat="ticket in fmSettingTicketCtrl.tickets" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=ticket.name></td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=ticket._item.name></td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=ticket._venue.name></td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=ticket.showDate></td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=ticket.price></td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="ticket.limit?(ticket.limit+\'分钟\'):\'暂无\'"></td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div class=float_left style=margin-right:5px ng-repeat="tag in ticket.tags" ng-bind=tag.name></div></td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div ng-click=fmSettingTicketCtrl.showEdit(ticket) class="float_left pointer">编辑</div><div ng-click="fmSettingTicketCtrl.deleteFlag = true;fmSettingTicketCtrl.tId = ticket._id" class="float_left pointer" style=margin-left:2rem;color:#99a9bc>删除</div></td></tr></table><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="fmSettingTicketCtrl.pagination.numPages > 1" total-items=fmSettingTicketCtrl.pagination.totalItems ng-model=fmSettingTicketCtrl.pagination.page items-per-page=fmSettingTicketCtrl.pagination.itemsPerPage max-size=fmSettingTicketCtrl.pagination.maxSize boundary-links="{{fmSettingTicketCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmSettingTicketCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmSettingTicketCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=fmSettingTicketCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增门票</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmSettingTicketCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">门票名称</div><input class="form_value float_left form_value_width" placeholder=请输入门票名称 ng-model=fmSettingTicketCtrl.name></div><div class=clear></div><div class=form_error_font ng-show=!fmSettingTicketCtrl.nameFlag></div><div class=form_error_font ng-show=fmSettingTicketCtrl.nameFlag>此项为必填项</div><div class="field_selectBoxOne form_zindex_100" style=width:445px;margin-top:0><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">场馆名称</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value" style=color:#000><div class=ellipsis ng-bind=fmSettingTicketCtrl.venueName ng-click="fmSettingTicketCtrl.venueFlag=!fmSettingTicketCtrl.venueFlag">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=fmSettingTicketCtrl.venueFlag><div class="select_cell pointer ellipsis" ng-repeat="venue in fmSettingTicketCtrl.venues" ng-bind=venue.name ng-click=fmSettingTicketCtrl.chooseVenue(venue)>默认按钮</div></div></div><div style=clear:both></div></div><div class="field_selectBoxOne zindex_400" style="margin-top: 20px;width: 445px"><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">项目名称</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value" style=color:#000><div class=ellipsis ng-bind=fmSettingTicketCtrl.itemName ng-click="fmSettingTicketCtrl.itemFlag=!fmSettingTicketCtrl.itemFlag">项目1</div></div><div style="position: relative;z-index: 300" class=form_select_div ng-show=fmSettingTicketCtrl.itemFlag><div class="select_cell pointer ellipsis" ng-repeat="item in fmSettingTicketCtrl.items" ng-bind=item.name ng-click=fmSettingTicketCtrl.chooseItem(item)>默认按钮</div></div></div><div style=clear:both></div></div><div style=margin-top:20px><div class="form_key float_left form_key_margin">门票价格</div><input class="form_value float_left form_value_width" placeholder=请输入价格 ng-model=fmSettingTicketCtrl.price></div><div class=clear></div><div class=form_error_font ng-show=!fmSettingTicketCtrl.priceFlag></div><div class=form_error_font ng-show=fmSettingTicketCtrl.priceFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">单次限时</div><input class="form_value float_left form_value_width" placeholder=请输入单次限时（可不填） ng-model=fmSettingTicketCtrl.limit></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">门票标签</div><div class=float_left style=width:350px><div class="float_left pointer" style="margin:10px 23px 0 0" ng-click=fmSettingTicketCtrl.chooseTag(tag) ng-repeat="tag in fmSettingTicketCtrl.tags"><img ng-show=!tag.select class=float_left src="assets/images/select_box.png"> <img ng-show=tag.select style=width:16px class=float_left src="assets/images/select_true.png"><div class=float_left style=margin-left:3px ng-bind=tag.name></div></div></div></div><div class=clear></div><div class=form_error_font></div><div class=position_relative style=z-index:2><div class="form_key float_left form_key_margin">开始时间</div><input class="form_value float_left form_value_width form_clock_icon" placeholder=门票开始时间 ng-click="fmSettingTicketCtrl.startFlag = true;fmSettingTicketCtrl.startShowFlag = true;" ng-show="!fmSettingTicketCtrl.startShowFlag"><div class="form_value float_left form_value_width form_clock_icon" ng-click="fmSettingTicketCtrl.startFlag = !fmSettingTicketCtrl.startFlag" ng-bind="fmSettingTicketCtrl.startDate | date:\'HH:mm:ss\'" ng-show=fmSettingTicketCtrl.startShowFlag></div><div class=student_datetime style=margin-left:75px ng-show=fmSettingTicketCtrl.startFlag><timepick ng-close="fmSettingTicketCtrl.startFlag=false;" ng-date=fmSettingTicketCtrl.startDate></timepick></div><div class=clear></div></div><div class=form_error_font ng-show=!fmSettingTicketCtrl.sFlag></div><div class=form_error_font ng-show=fmSettingTicketCtrl.sFlag>此项为必填项</div><div class=position_relative style=z-index:1><div class="form_key float_left form_key_margin">结束时间</div><input class="form_value float_left form_value_width form_clock_icon" placeholder=门票结束时间 ng-click="fmSettingTicketCtrl.endFlag = true;fmSettingTicketCtrl.endShowFlag = true;" ng-show="!fmSettingTicketCtrl.endShowFlag"><div class="form_value float_left form_value_width form_clock_icon" ng-click="fmSettingTicketCtrl.endFlag = !fmSettingTicketCtrl.endFlag" ng-bind="fmSettingTicketCtrl.endDate | date:\'HH:mm:ss\'" ng-show=fmSettingTicketCtrl.endShowFlag></div><div class=student_datetime style=margin-left:75px ng-show=fmSettingTicketCtrl.endFlag><timepick ng-close="fmSettingTicketCtrl.endFlag=false;" ng-date=fmSettingTicketCtrl.endDate></timepick></div><div class=clear></div></div><div class=form_error_font ng-show=!fmSettingTicketCtrl.eFlag></div><div class=form_error_font ng-show=fmSettingTicketCtrl.eFlag>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmSettingTicketCtrl.create()>完成</div><div class="button_normal float_right" ng-click=fmSettingTicketCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmSettingTicketCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmSettingTicketCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>删除场馆后，场馆里的所有信息将被删除。对于预定该场馆的个人用户会退还预定金额。是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmSettingTicketCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=fmSettingTicketCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmSettingTicketCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=fmSettingTicketCtrl.wordERR>22212</div><div class=promptClose ng-click="fmSettingTicketCtrl.promptERR = false"></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/fieldmanager/setting/setting-time-card.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="padding:20px 30px 30px 30px;margin-left:200px;min-width: 930px"><div><div class=float_left style=font-size:16px;margin-top:10px>次数卡设置</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="fmTimeCardCtrl.addFlag = true">新增</div><div class="float_right pointer" ng-class="{\'select\':!fmTimeCardCtrl.selectItemFlag,\'select_foucs\':fmTimeCardCtrl.selectItemFlag}" ng-click="fmTimeCardCtrl.selectItemFlag = !fmTimeCardCtrl.selectItemFlag" style="margin:0 20px 0 20px"><div class="form_down_icon form_width_180 form_select_value_choose" ng-bind=fmTimeCardCtrl.iName></div><div class="form_select_div form_width_180" ng-show=fmTimeCardCtrl.selectItemFlag><div ng-click=fmTimeCardCtrl.chooseIrr(item) ng-repeat="item in fmTimeCardCtrl.irr" ng-bind=item.name class="select_cell pointer" onclick="event.cancelBubble = true"></div></div></div><div class="float_right pointer" ng-class="{\'select\':!fmTimeCardCtrl.selectVenueFlag,\'select_foucs\':fmTimeCardCtrl.selectVenueFlag}" ng-click="fmTimeCardCtrl.selectVenueFlag = !fmTimeCardCtrl.selectVenueFlag"><div class="form_down_icon form_width_180 form_select_value_choose" ng-bind=fmTimeCardCtrl.vName></div><div class="form_select_div form_width_180" ng-show=fmTimeCardCtrl.selectVenueFlag><div ng-click=fmTimeCardCtrl.chooseVrr(venue) ng-repeat="venue in fmTimeCardCtrl.vrr" ng-bind=venue.name class="select_cell pointer" onclick="event.cancelBubble = true"></div></div></div></div><div class=clear></div><table style="margin-top:20px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">名称</td><td style="width:7%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属项目</td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属场馆</td><td style="width:6%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">有效期</td><td style="width:7.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">次数</td><td style="width:7.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">价格</td><td style="width:7%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">工本费</td><td style="width:7%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">保证金</td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">单次限时</td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">当天限次</td><td style="width:6%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">当前状态</td><td style="width:12%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr ng-repeat="service in fmTimeCardCtrl.services" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.name></td><td style="width:7%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service._item.name></td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service._venue.name></td><td style="width:6%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.timeValue></td><td style="width:7.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.value></td><td style="width:7.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.price></td><td style="width:7%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.cardCost></td><td style="width:7%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.bail></td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="service.limit?(service.limit+\'分钟\'):\'不限\'"></td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="service.daylimit==1?(\'一次\'):\'不限次数\'"></td><td style="width:6%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="service.isActive?\'上架中\':\'下架中\'"></td><td class=pointer style="width:12%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><img class=float_left ng-click="fmTimeCardCtrl.deleteFlag = true;fmTimeCardCtrl._id = service._id" style="width:11px;margin:10px 20px 0 0" src="assets/images/rdelete.png"> <img class=float_left ng-click=fmTimeCardCtrl.edit(service) style="width:13px;margin:10px 20px 0 0" src="assets/images/editb.png"><div class=float_left ng-bind="service.isActive?\'去下架\':\'去上架\'" ng-click="fmTimeCardCtrl.edit(service,\'isactive\')"></div></td></tr></table><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="fmTimeCardCtrl.pagination.numPages > 1" total-items=fmTimeCardCtrl.pagination.totalItems ng-model=fmTimeCardCtrl.pagination.page items-per-page=fmTimeCardCtrl.pagination.itemsPerPage max-size=fmTimeCardCtrl.pagination.maxSize boundary-links="{{fmTimeCardCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmTimeCardCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmTimeCardCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=fmTimeCardCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">次数卡</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmTimeCardCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">场馆名称</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!fmTimeCardCtrl.venueFlag,\'select_foucs\':fmTimeCardCtrl.venueFlag}" ng-click="fmTimeCardCtrl.venueFlag = !fmTimeCardCtrl.venueFlag"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=fmTimeCardCtrl.venueName></div><div class=form_select_div style=width:345px ng-show=fmTimeCardCtrl.venueFlag><div ng-click=fmTimeCardCtrl.chooseVenue(venue) class="select_cell pointer" ng-repeat="venue in fmTimeCardCtrl.venues" ng-bind=venue.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">项目名称</div><div class="float_left pointer zindex-500" ng-class="{\'select\':!fmTimeCardCtrl.itemFlag,\'select_foucs\':fmTimeCardCtrl.itemFlag}" ng-click="fmTimeCardCtrl.itemFlag = !fmTimeCardCtrl.itemFlag"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=fmTimeCardCtrl.itemName></div><div class=form_select_div style=width:345px ng-show=fmTimeCardCtrl.itemFlag><div ng-click=fmTimeCardCtrl.chooseItem(item) class="select_cell pointer" ng-repeat="item in fmTimeCardCtrl.items" ng-bind=item.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">卡类名称</div><input class="form_value float_left form_value_width" placeholder=请输入卡类名称 ng-model="fmTimeCardCtrl.name"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">卡有效期</div><input class="form_value float_left form_value_width" placeholder=请输入次数卡有效期(天) ng-model="fmTimeCardCtrl.timeValue"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">产品次数</div><input class="form_value float_left form_value_width" placeholder=请输入产品次数 ng-model="fmTimeCardCtrl.value"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">产品售价</div><input class="form_value float_left form_value_width" placeholder=请输入产品售价 ng-model="fmTimeCardCtrl.price"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">服务标签</div><div class=float_left style=width:350px><div class="float_left pointer" style="margin:10px 23px 0 0" ng-click=fmTimeCardCtrl.chooseTag(tag) ng-repeat="tag in fmTimeCardCtrl.tags"><img ng-show=!tag.select class=float_left src="assets/images/select_box.png"> <img ng-show=tag.select style=width:16px class=float_left src="assets/images/select_true.png"><div class=float_left style=margin-left:3px ng-bind=tag.name></div></div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin"><div>每天使用</div><div>次数</div></div><div ng-show=fmTimeCardCtrl.oneFlag class=singleChoose_option style="float: none"><div class="singleChoose_imageBox singleChoose_imageYes"></div><div class=singleChoose_prompt>仅一次</div></div><div ng-show=!fmTimeCardCtrl.oneFlag class=singleChoose_option style="float: none" ng-click="fmTimeCardCtrl.oneFlag = !fmTimeCardCtrl.oneFlag"><div class="singleChoose_imageBox singleChoose_imageNo"></div><div class=singleChoose_prompt>仅一次</div></div><div ng-show=!fmTimeCardCtrl.oneFlag class=singleChoose_option style="float: none"><div class="singleChoose_imageBox singleChoose_imageYes"></div><div class=singleChoose_prompt>不限次数</div></div><div ng-show=fmTimeCardCtrl.oneFlag class=singleChoose_option style="float: none" ng-click="fmTimeCardCtrl.oneFlag = !fmTimeCardCtrl.oneFlag"><div class="singleChoose_imageBox singleChoose_imageNo"></div><div class=singleChoose_prompt>不限次数</div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin"><div>每次使用</div><div>时长</div></div><input class="form_value float_left form_value_width" placeholder=每次使用限制时间，单位：分钟 ng-model="fmTimeCardCtrl.limit"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">卡工本费</div><input class="form_value float_left form_value_width" placeholder=请输入产品实体卡工本费 ng-model="fmTimeCardCtrl.cardcost"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">卡保证金</div><input class="form_value float_left form_value_width" placeholder=请输入产品实体卡保证金 ng-model="fmTimeCardCtrl.bail"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">产品描述</div><input class="form_value float_left form_value_width" placeholder=请输入产品描述 ng-model="fmTimeCardCtrl.des"></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmTimeCardCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=fmTimeCardCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmTimeCardCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmTimeCardCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>是否要删除这个卡种？</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmTimeCardCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=fmTimeCardCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmTimeCardCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=fmTimeCardCtrl.err>此名称已被占用</div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="fmTimeCardCtrl.errorFlag = false"></div></div></div><div class=bgGary ng-show=fmTimeCardCtrl.succeedFlag><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>操作成功</div><div class=promptClose ng-click="fmTimeCardCtrl.succeedFlag = false"></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/fieldmanager/setting/setting-time-register.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/fieldmanager/head/head.html\'"></div> --><div style=margin-left:200px><div style="font-size:16px;padding:30px 0 0 30px">场次登记</div><div style="width:100%;border-bottom:1px solid #ddd;height:37px;margin-top:30px;line-height:34px"><div style="padding-left: 30px" class=pointer ng-repeat="venue in fmTimeRegisterCtrl.venues" ng-click=fmTimeRegisterCtrl.chooseVenue(venue)><div class=float_left ng-show="venue.name == fmTimeRegisterCtrl.venueName" style="font-size:14px;color:#00a1ff;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;border-bottom:0" ng-bind=venue.name></div><div class=float_left ng-show="!(venue.name == fmTimeRegisterCtrl.venueName)" style="font-size:14px;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;background:#EFF2F6;color:#8492a6;border-bottom:0" ng-bind=venue.name></div></div></div><div class=clear></div><div style="padding: 0 30px"><div ng-repeat="item in fmTimeRegisterCtrl.venue.items" ng-click=fmTimeRegisterCtrl.getTime(item._id)><div ng-show="item._id == fmTimeRegisterCtrl.iId && item.select && !item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0 15px;height:36px;line-height:34px;background:#00a1ff;color:#fff;border-top-left-radius:6px;border-bottom-left-radius:6px"></div><div ng-show="item._id == fmTimeRegisterCtrl.iId && !item.select && !item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0 15px;height:36px;line-height:34px;background:#00a1ff;color:#fff;border-left:0"></div><div ng-show="item._id == fmTimeRegisterCtrl.iId && !item.select && item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0 15px;height:36px;line-height:34px;background:#00a1ff;color:#fff;border-top-right-radius:6px;border-bottom-right-radius:6px"></div><div ng-show="item._id == fmTimeRegisterCtrl.iId && item.select && item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0 15px;height:36px;line-height:34px;background:#00a1ff;color:#fff;border-left:0;border-radius:6px"></div><div ng-show="!(item._id == fmTimeRegisterCtrl.iId) && item.select && !item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0 15px;height:36px;line-height:34px;border-top-left-radius:6px;border-bottom-left-radius:6px"></div><div ng-show="!(item._id == fmTimeRegisterCtrl.iId) && !item.select && !item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0 15px;height:36px;line-height:34px;border-left:0"></div><div ng-show="!(item._id == fmTimeRegisterCtrl.iId) && item.select && item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0 15px;height:36px;line-height:34px;border-radius:6px"></div><div ng-show="!(item._id == fmTimeRegisterCtrl.iId) && !item.select && item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0 15px;height:36px;line-height:34px;border-left:0;border-top-right-radius:6px;border-bottom-right-radius:6px"></div></div><div class="button2_normal float_right" style="background:#00A1FF;margin:20px 0 0 0" ng-click="fmTimeRegisterCtrl.addFlag = true">新增场次</div><!--       <div ng-show="fmTimeRegisterCtrl.editAllFlag" class="button2_normal float_right" style="background:#fff;color:#000;margin:20px 15px 0 0;border:1px solid #C0CCDA">编辑</div> --><div class=clear></div><div style="margin-top:30px;padding-bottom:20px;border-bottom:1px solid #94A8BA;color:#1F2D3D;font-size:13px;font-weight:medium;min-width:97rem;height:20px"><div class=float_left style=width:30rem;padding-left:20px><!--           <img ng-show="!fmTimeRegisterCtrl.selectFlag" ng-click="fmTimeRegisterCtrl.select(true)" class="pointer" src="assets/images/select_box.png" />\n                        <img ng-show="fmTimeRegisterCtrl.selectFlag" ng-click="fmTimeRegisterCtrl.select(false)"" class="pointer" src="assets/images/select_box_on.png" /> --><span style=margin-left:10px>场次名称</span></div><div class=float_left style=width:33rem>对外预定</div><div class=float_left style=width:19rem>操作</div></div><div class=clear></div><div style=overflow-y:auto;overflow-x:hidden;{{fmTimeRegisterCtrl.h}}><div ng-repeat="time in fmTimeRegisterCtrl.times" style=font-size:13px;min-width:100rem><div style="border-bottom:1px solid #D3DCE6;display:flex;align-items:center;color:#475669;height:46px;line-height:44px"><div class=float_left style=width:30rem;padding-left:20px><!--  <img ng-show="!time.select" ng-click="fmTimeRegisterCtrl.changeTime(time)" class="pointer" src="assets/images/select_box.png" />\n                                <img ng-show="time.select" ng-click="fmTimeRegisterCtrl.changeTime(time)" class="pointer" src="assets/images/select_box_on.png" /> --><span ng-bind=time.showDate style=margin-left:1rem></span></div><div class=float_left style=width:33rem><div ng-show=time.isUsed style=width:10rem><div class=float_left style=background:#13ce66;border-radius:50%;width:7px;height:7px;margin-top:6px></div><div class=float_left style=margin-left:5px;line-height:20px>可预订</div></div><div ng-show=!time.isUsed style=width:10rem><div class=float_left style=background:#ff4949;border-radius:50%;width:7px;height:7px;margin-top:6px></div><div class=float_left style=margin-left:5px;line-height:20px>不可订</div></div><div class=clear></div><div style="color:#ff4949;font-size:12px;margin:2px 0 0 12px;line-height:10px" ng-bind=time.warn></div></div><div class=float_left style=width:19rem;color:#00a1ff><div ng-click=fmTimeRegisterCtrl.showEdit(time) class="float_left pointer">编辑</div><div ng-click="fmTimeRegisterCtrl.deleteFlag = true;fmTimeRegisterCtrl.tId = time._id" class="float_left pointer" style=margin-left:20px;color:#99a9bc>删除</div></div></div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmTimeRegisterCtrl.editFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">编辑场次</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmTimeRegisterCtrl.close()"></div><div class=clear></div><div class="position_relative form_first_view zindex-500"><div class="form_key float_left form_key_margin">开始时间</div><input class="form_value float_left form_value_width form_clock_icon" placeholder=场次开始时间 ng-click="fmTimeRegisterCtrl.startFlag = true;fmTimeRegisterCtrl.startShowFlag = true;" ng-show="!fmTimeRegisterCtrl.startShowFlag"><div class="form_value float_left form_value_width form_clock_icon" ng-click="fmTimeRegisterCtrl.startFlag = !fmTimeRegisterCtrl.startFlag" ng-bind="fmTimeRegisterCtrl.startDate | date:\'HH:mm:ss\'" ng-show=fmTimeRegisterCtrl.startShowFlag></div><div class=student_datetime style=margin-left:75px ng-show=fmTimeRegisterCtrl.startFlag><timepick ng-close="fmTimeRegisterCtrl.startFlag=false;" ng-date=fmTimeRegisterCtrl.startDate></timepick></div><div class=clear></div></div><div class=form_error_font ng-show=!fmTimeRegisterCtrl.sFlag></div><div class=form_error_font ng-show=fmTimeRegisterCtrl.sFlag>此项为必填项</div><div class="position_relative zindex-400"><div class="form_key float_left form_key_margin">结束时间</div><input class="form_value float_left form_value_width form_clock_icon" placeholder=场次结束时间 ng-click="fmTimeRegisterCtrl.endFlag = true;fmTimeRegisterCtrl.endShowFlag = true;" ng-show="!fmTimeRegisterCtrl.endShowFlag"><div class="form_value float_left form_value_width form_clock_icon" ng-click="fmTimeRegisterCtrl.endFlag = !fmTimeRegisterCtrl.endFlag" ng-bind="fmTimeRegisterCtrl.endDate | date:\'HH:mm:ss\'" ng-show=fmTimeRegisterCtrl.endShowFlag></div><div class=student_datetime style=margin-left:75px ng-show=fmTimeRegisterCtrl.endFlag><timepick ng-close="fmTimeRegisterCtrl.endFlag=false;" ng-date=fmTimeRegisterCtrl.endDate></timepick></div><div class=clear></div></div><div class=form_error_font ng-show=!fmTimeRegisterCtrl.eFlag></div><div class=form_error_font ng-show=fmTimeRegisterCtrl.eFlag>此项为必填项</div><!--                         <div>\n                            <div class="form_key float_left form_key_margin">场次状态</div>\n                            <img src="assets/images/bluecircle.png" ng-show="fmTimeRegisterCtrl.flagOn" ng-click="fmTimeRegisterCtrl.chooseOn(true)" style="height:18px" class="float_left form_oImage_margin"/>\n                            <img src="assets/images/radio_off.png" ng-show="!fmTimeRegisterCtrl.flagOn" ng-click="fmTimeRegisterCtrl.chooseOn(true)" style="height:18px" class="float_left form_oImage_margin"/>\n                            <div class="float_left form_key form_option_margin pointer" ng-click="fmTimeRegisterCtrl.chooseOn(true)">启用</div>\n                            <img src="assets/images/bluecircle.png" ng-show="!fmTimeRegisterCtrl.flagOn" ng-click="fmTimeRegisterCtrl.chooseOn(false)" style="height:18px" class="float_left form_oImage_margin"/>\n                            <img src="assets/images/radio_off.png" ng-show="fmTimeRegisterCtrl.flagOn" ng-click="fmTimeRegisterCtrl.chooseOn(false)" style="height:18px" class="float_left form_oImage_margin"/>\n                            <div class="float_left form_key form_option_margin pointer" ng-click="fmTimeRegisterCtrl.chooseOn(false)">不启用</div>\n                        </div>\n                        <div class="clear"></div> --><div class=position_relative><div class="form_key float_left" style=line-height:18px;margin-right:18px><div>对外预定</div><div>停用时间</div></div><input class="form_value float_left form_clock_icon" style=width:150px placeholder=停用开始时间 ng-click="fmTimeRegisterCtrl.closeFlag = true;fmTimeRegisterCtrl.closeDateFlag = true;fmTimeRegisterCtrl.closeDateFlag2 = false" ng-show="!fmTimeRegisterCtrl.closeFlag"><div class="form_value float_left form_clock_icon" style=width:150px ng-click="fmTimeRegisterCtrl.closeDateFlag = !fmTimeRegisterCtrl.closeDateFlag;fmTimeRegisterCtrl.closeDateFlag2 = false" ng-bind="fmTimeRegisterCtrl.closeDate | date:\'yyyy-MM-dd\'" ng-show=fmTimeRegisterCtrl.closeFlag></div><div class="form_key float_left form_key_margin" style=margin-left:15px>至</div><input class="form_value float_left form_clock_icon" style=width:150px placeholder=无限期 ng-click="fmTimeRegisterCtrl.closeFlag2 = true;fmTimeRegisterCtrl.closeDateFlag2 = true;fmTimeRegisterCtrl.closeDateFlag = false" ng-show="!fmTimeRegisterCtrl.closeFlag2"><div class="form_value float_left form_clock_icon" style=width:150px ng-click="fmTimeRegisterCtrl.closeDateFlag2 = !fmTimeRegisterCtrl.closeDateFlag2;fmTimeRegisterCtrl.closeDateFlag = false" ng-bind="fmTimeRegisterCtrl.closeDate2 | date:\'yyyy-MM-dd\'" ng-show=fmTimeRegisterCtrl.closeFlag2></div><div class="student_datetime student_datetime2"><datetimepick ng-close="fmTimeRegisterCtrl.closeDateFlag = false" ng-id="\'first\'" ng-show=fmTimeRegisterCtrl.closeDateFlag ng-date=fmTimeRegisterCtrl.closeDate></datetimepick></div><div class="student_datetime student_datetime2"><datetimepick ng-close="fmTimeRegisterCtrl.closeDateFlag2 = false" ng-id="\'first\'" ng-show=fmTimeRegisterCtrl.closeDateFlag2 ng-date=fmTimeRegisterCtrl.closeDate2></datetimepick></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmTimeRegisterCtrl.edit()>完成</div><div class="button_normal float_right" ng-click="fmTimeRegisterCtrl.deleteFlag = true">删除场次</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmTimeRegisterCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增场次</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmTimeRegisterCtrl.close()"></div><div class=clear></div><div class="position_relative form_first_view zindex-500"><div class="form_key float_left form_key_margin">开始时间</div><input class="form_value float_left form_value_width form_clock_icon" placeholder=场次开始时间 ng-click="fmTimeRegisterCtrl.startFlag = true;fmTimeRegisterCtrl.startShowFlag = true;" ng-show="!fmTimeRegisterCtrl.startShowFlag"><div class="form_value float_left form_value_width form_clock_icon" ng-click="fmTimeRegisterCtrl.startFlag = !fmTimeRegisterCtrl.startFlag" ng-bind="fmTimeRegisterCtrl.startDate | date:\'HH:mm:ss\'" ng-show=fmTimeRegisterCtrl.startShowFlag></div><div class=student_datetime style=margin-left:75px ng-show=fmTimeRegisterCtrl.startFlag><timepick ng-close="fmTimeRegisterCtrl.startFlag=false;" ng-date=fmTimeRegisterCtrl.startDate></timepick></div><div class=clear></div></div><div class=form_error_font ng-show=!fmTimeRegisterCtrl.sFlag></div><div class=form_error_font ng-show=fmTimeRegisterCtrl.sFlag>此项为必填项</div><div class="position_relative zindex-400"><div class="form_key float_left form_key_margin">结束时间</div><input class="form_value float_left form_value_width form_clock_icon" placeholder=场次结束时间 ng-click="fmTimeRegisterCtrl.endFlag = true;fmTimeRegisterCtrl.endShowFlag = true;" ng-show="!fmTimeRegisterCtrl.endShowFlag"><div class="form_value float_left form_value_width form_clock_icon" ng-click="fmTimeRegisterCtrl.endFlag = !fmTimeRegisterCtrl.endFlag" ng-bind="fmTimeRegisterCtrl.endDate | date:\'HH:mm:ss\'" ng-show=fmTimeRegisterCtrl.endShowFlag></div><div class=student_datetime style=margin-left:75px ng-show=fmTimeRegisterCtrl.endFlag><timepick ng-close="fmTimeRegisterCtrl.endFlag=false;" ng-date=fmTimeRegisterCtrl.endDate></timepick></div><div class=clear></div></div><div class=form_error_font ng-show=!fmTimeRegisterCtrl.eFlag></div><div class=form_error_font ng-show=fmTimeRegisterCtrl.eFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">是否启用</div><img src=assets/images/bluecircle.png style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=fmTimeRegisterCtrl.chooseOn(true)>启用</div><img src=assets/images/whitecircle.png style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=fmTimeRegisterCtrl.chooseOn(false)>不启用</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmTimeRegisterCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=fmTimeRegisterCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmTimeRegisterCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmTimeRegisterCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>此操作将永久删除此场次信息，对于预定该场馆的个人用户会退还预定金额。是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmTimeRegisterCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=fmTimeRegisterCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=fmTimeRegisterCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px">时间段不予许有重叠</div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="fmTimeRegisterCtrl.errorFlag = false"></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'),
            a.put("app/fieldmanager/setting/setting-type.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0px 0 20px 200px"><!-- <div ng-include="\'app/fieldmanager/head/head.html\'"></div> --><div style="padding:20px 0px 30px 10px;min-width:900px;margin-left:190px"><div><div style=font-size:20px;margin-left:30px>分类设置</div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-setting-service>综合服务</div><div class="field_titleNormal field_titleChoose">分类设置</div><div class=clear></div></div></div><div style="margin:20px 0 0 30px"><div class="button2_normal float_left" style=background:#00A1FF ng-click="fmSettingTypeCtrl.addFlag = true">新增分类</div></div><div class=clear></div><div style="margin:20px 20px 0 30px"><div style="margin:40px 20px 0 0;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;min-width:10rem"><div class=float_left style=width:21rem;padding-left:20px>一级分类</div><div class=float_left style=width:36rem>二级分类</div><div class=float_left style=width:14rem>操作</div></div><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;min-width:96rem;margin-right:20px" ng-repeat="productcategory in fmSettingTypeCtrl.productcategories"><div class="float_left ellipsis" style=width:21rem;padding-left:20px ng-bind=productcategory.name>预订时间</div><div class="float_left ellipsis" style=width:36rem ng-bind="productcategory.second?productcategory.second:\'暂无\'">支付金额</div><div class="float_left pointer" style=width:14rem><div ng-click=fmSettingTypeCtrl.showEdit(productcategory) class=float_left style=color:#00a1ff>编辑</div><div style="margin:0 0 0 40px" ng-click="fmSettingTypeCtrl.deleteFlag = true;fmSettingTypeCtrl.pId = productcategory._id" class=float_left>删除</div></div></div></div><pagination style="margin:20px 0 0 30px" ng-if="fmSettingTypeCtrl.pagination.numPages > 1" total-items=fmSettingTypeCtrl.pagination.totalItems ng-model=fmSettingTypeCtrl.pagination.page items-per-page=fmSettingTypeCtrl.pagination.itemsPerPage max-size=fmSettingTypeCtrl.pagination.maxSize boundary-links="{{fmSettingTypeCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmSettingTypeCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmSettingTypeCtrl.pageChanged()></pagination></div></div></div><!-- 新增编辑服务 --><div class=bgGary ng-show=fmSettingTypeCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增分类</div><!-- <div class="form_title float_left">编辑综合服务</div> --><img src=assets/images/close.png class="float_right pointer" ng-click="fmSettingTypeCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">一级分类</div><input class="form_value float_left form_value_width" placeholder=请输入一级分类名称 ng-model=fmSettingTypeCtrl.firstName></div><div class=clear></div><div class=form_error_font ng-show=!fmSettingTypeCtrl.firstFlag></div><div class=form_error_font ng-show=fmSettingTypeCtrl.firstFlag>此项为必填项</div><div ng-repeat="secondType in fmSettingTypeCtrl.secondTypes track by $index"><div><div class="form_key float_left form_key_margin">二级分类</div><div class="form_value float_left form_value_width" ng-mouseover="item.imgFlag = true" ng-mouseleave="item.imgFlag = false"><input style=border:0;height:30px ng-model="secondType.name"><span ng-click=fmSettingTypeCtrl.delete(secondType.order) class="float_right pointer" style="margin:0px 20px 0 0">删除</span></div></div><div class=clear></div><div class=form_error_font></div></div><div ng-show=fmSettingTypeCtrl.inputFlag1><div class="form_key float_left form_key_margin">二级分类</div><input id=type ng-focus="fmSettingTypeCtrl.inputFlag2 = true" class="form_value float_left form_value_width" placeholder=请输入二级分类名称 ng-model=fmSettingTypeCtrl.name1></div><div class=clear></div><div style=margin-top:20px ng-show=fmSettingTypeCtrl.inputFlag2><div class="form_key float_left form_key_margin">二级分类</div><input class="form_value float_left form_value_width" ng-focus=fmSettingTypeCtrl.judge() placeholder=请输入二级分类名称 ng-model=fmSettingTypeCtrl.name2></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmSettingTypeCtrl.create()>完成</div><div class="button_normal float_right" ng-click=fmSettingTypeCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmSettingTypeCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmSettingTypeCtrl.deleteFlag = false"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>删除服务为不可逆操作，是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click="fmSettingTypeCtrl.deleteFlag = false">不删了</div><div class="button_normal float_right" ng-click=fmSettingTypeCtrl.deleteProductCategory()>继续删除</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=fmSettingTypeCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmSettingTypeCtrl.wordOK>22212</div><div class=promptClose ng-click=fmSettingTypeCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmSettingTypeCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=fmSettingTypeCtrl.wordERR>22212</div><div class=promptClose ng-click="fmSettingTypeCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmSettingTypeCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=fmSettingTypeCtrl.wordWARN>22212</div><div class=promptClose ng-click=fmSettingTypeCtrl.closePrompt()></div></div></div></div>'), a.put("app/fieldmanager/setting/setting-venue-register.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/fieldmanager/head/head.html\'"></div> --><div style="padding:20px 30px 30px 30px;margin-left:200px;min-width: 930px"><div><div class=float_left style=font-size:16px;margin-top:10px>场馆登记</div><!-- <div class="button2_normal float_right" style="background:#00A1FF" ng-click="fmVenueRegisterCtrl.addFlag = true">新增场馆</div> --></div><div class=clear></div><div style="margin-top:40px;padding-bottom:20px;border-bottom:1px solid #94A8BA;color:#1F2D3D;font-size:13px;font-weight:medium;min-width:90rem"><div class=float_left style=width:23rem;padding-left:2rem>场馆名称</div><div class=float_left style=width:10rem>状态</div><div class=float_left style=width:16rem>对外预定</div><!--             <div class="float_left" style="width:8rem">特殊账户</div> --><div class=float_left style=width:27rem>项目</div><div class=float_left style=width:14rem>操作</div></div><div class=clear></div><div ng-repeat="venue in fmVenueRegisterCtrl.venues" style=font-size:13px;min-width:90rem><div style="border-bottom:1px solid #D3DCE6;color:#475669;padding:15px 0;display:flex;align-items:center"><div class=float_left style=width:23rem;padding-left:2rem><span ng-bind=venue.name></span></div><div ng-show=venue.isUsed class=float_left style=width:10rem><div class=float_left style=background:#13ce66;border-radius:50%;width:7px;height:7px;margin-top:5px></div><div class=float_left style=margin-left:5px>使用中</div></div><div ng-show=!venue.isUsed class=float_left style=width:10rem><div class=float_left style=background:#ff4949;border-radius:50%;width:7px;height:7px;margin-top:5px></div><div class=float_left style=margin-left:5px>停用中</div></div><div class=float_left style=width:16rem><div ng-show="venue.isOpen && venue.isUsed" style=width:10rem><div class=float_left style=background:#13ce66;border-radius:50%;width:7px;height:7px;margin-top:7px></div><div class=float_left style=margin-left:5px;line-height:20px>可预订</div></div><div ng-show="!venue.isOpen || !venue.isUsed" style=width:10rem><div class=float_left style=background:#ff4949;border-radius:50%;width:7px;height:7px;margin-top:7px></div><div class=float_left style=margin-left:5px;line-height:20px>不可订</div></div><div class=clear></div><div ng-show=venue.isUsed style="color:#ff4949;font-size:12px;margin:0.2rem 0 0 1.1rem;line-height:10px" ng-bind=venue.warn></div></div><!--                   <div class="float_left" style="width:8rem">未开通</div> --><div class=float_left style=width:27rem><div class=float_left style="margin:3px 1rem 3px 0;font-size:13px" ng-bind=item.name ng-repeat="item in venue.items"></div></div><div class=float_left style=width:14rem><div class="float_left pointer" style=margin-top:7px>无</div><!-- <div ng-click="fmVenueRegisterCtrl.showEdit(venue)" class="float_left pointer" style="margin-top:7px">编辑</div> --><!-- <div ng-click="fmVenueRegisterCtrl.deleteFlag = true;fmVenueRegisterCtrl.vId = venue._id" class="float_left pointer" style="margin:7px 2rem 0 2rem;color:#99a9bc">删除</div> --><!-- <img src=\'assets/images/xup.png\' style="height:15px;margin-top:8px;margin-right:10px" ng-click="fmVenueRegisterCtrl.move(\'down\',venue)" title="将场馆下移" ng-show="venue.order != fmVenueRegisterCtrl.venues.length" class="float_left pointer" />\n                        <img src=\'assets/images/xdown.png\' title="将场馆上移" ng-click="fmVenueRegisterCtrl.move(\'up\',venue)" style="height:15px;margin-top:8px" ng-show="venue.order != 1" class="float_left pointer" /> --></div></div><div class=clear></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/fieldmanager/setting/setting-vip.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><div style="padding:30px;margin-left:190px;min-width: 900px"><div><div class=float_left style=font-size:18px;color:#475669>会员设置</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="fmSettingVipCtrl.addMemberFlag = true">新增</div></div><div class=clear></div><div style="margin-top:20px;padding-bottom:30px;border-bottom:1px solid #94A8BA;font-weight:medium;font-size:16px;min-width:98rem;color:#475669"><div class=float_left style=width:16rem;padding-left:20px>会员名称</div><div class=float_left style=width:14rem>享受折扣</div><div class=float_left style=width:18rem>操作</div></div><div class=clear></div><div ng-repeat="membertype in fmSettingVipCtrl.membertypes"><div class=pointer style="height:46px;line-height:44px;border-bottom:1px solid #ddd;color:#475669;font-size:13px;min-width:98rem"><div class=float_left style=width:16rem;padding-left:20px ng-bind=membertype.name>小七</div><div class=float_left style=width:14rem ng-bind=membertype.discount>黄金会员</div><div class=float_left style=width:18rem;color:#00a1ff><div ng-click=fmSettingVipCtrl.showEditMember(membertype) class=float_left>编辑</div><div ng-click="fmSettingVipCtrl.sureFlag = true;fmSettingVipCtrl.mId = membertype._id;fmSettingVipCtrl.mtFlag = true" class=float_left style="margin:0 0 0 40px;color:#99a9bc">删除</div></div></div><div class=clear></div></div></div><div class=bgGary ng-show=fmSettingVipCtrl.addMemberFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">会员类型</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmSettingVipCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">会员名称</div><input class="form_value float_left form_value_width" placeholder=请输入卡种名称 ng-blur="fmSettingVipCtrl.judge(\'name\')" ng-class="{\'\':!fmSettingVipCtrl.nameFlag,\'form_value_error\':fmSettingVipCtrl.nameFlag}" ng-model="fmSettingVipCtrl.name"></div><div class=clear></div><div class=form_error_font ng-show=!fmSettingVipCtrl.nameFlag></div><div class=form_error_font ng-show=fmSettingVipCtrl.nameFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">优惠折扣</div><input class="form_value float_left form_value_width" ng-class="{\'\':!fmSettingVipCtrl.discountFlag,\'form_value_error\':fmSettingVipCtrl.discountFlag}" placeholder=输入数字，例：九折输入0.9 ng-blur="fmSettingVipCtrl.judge(\'discount\')" ng-model="fmSettingVipCtrl.discount"></div><div class=clear></div><div class=form_error_font ng-show=!fmSettingVipCtrl.discountFlag></div><div class=form_error_font ng-show=fmSettingVipCtrl.discountFlag ng-bind=fmSettingVipCtrl.discountErr>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmSettingVipCtrl.finishMember()>完成</div><div class="button_normal float_right" ng-click=fmSettingVipCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmSettingVipCtrl.sureFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">确认删除？</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmSettingVipCtrl.close()"></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmSettingVipCtrl.delete()>确定</div><div class="button_normal float_right" ng-click=fmSettingVipCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=fmSettingVipCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=fmSettingVipCtrl.err></div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="fmSettingVipCtrl.errorFlag = false"></div></div></div><div class=bgGary ng-show=fmSettingVipCtrl.succeedFlag><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>修改完成</div><div class=promptClose ng-click="fmSettingVipCtrl.succeedFlag = false"></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/fieldmanager/shop/inventory-record.html", '<div><div class=cancelTable style="margin-top: 20px"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style=width:110px>进货号</div><div class="cancelTh ellipsis" style=width:110px>进货日期</div><div class="cancelTh ellipsis" style=width:110px>商品名称</div><div class="cancelTh ellipsis pointer" ng-click="fmInventoryCtrl.typeFlag = !fmInventoryCtrl.typeFlag" style=width:110px><span>商品类别</span> <img style=margin-left:5px src="assets/images/arrow.png"></div><div class="cancelTh ellipsis" style=width:110px>供应商</div><div class="cancelTh ellipsis" style=width:110px>进货数量</div><div class="cancelTh ellipsis" style=width:110px>进货单价</div><div class="cancelTh ellipsis" style=width:110px>进货金额</div><div class="cancelTh ellipsis" style=width:110px>登记人员</div></div><div class=cancelTr ng-repeat="record in fmInventoryCtrl.records" style="{{record.state?\'background: #f2f2f2\':\'\'}}"><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div></div><div class=select_div ng-show=fmInventoryCtrl.typeFlag style=width:200px;top:170px;left:570px><div class="select_choose ellipsis pointer" ng-click=fmInventoryCtrl.chooseClass(class)>全部</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="fmInventoryCtrl.pagination.numPages > 1" total-items=fmInventoryCtrl.pagination.totalItems ng-model=fmInventoryCtrl.pagination.page items-per-page=fmInventoryCtrl.pagination.itemsPerPage max-size=fmInventoryCtrl.pagination.maxSize boundary-links="{{fmInventoryCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmInventoryCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmInventoryCtrl.pageChanged()></pagination></div><!-- 纠错操作 --><div class=bgGary ng-show=fmInventoryCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=fmInventoryCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{fmInventoryCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="fmInventoryCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{fmInventoryCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="fmInventoryCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=fmInventoryCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=fmInventoryCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=fmInventoryCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=fmInventoryCtrl.close()>取消</div><div class=clear></div></div></div></div></div>'), a.put("app/fieldmanager/shop/inventory-stock.html", '<div><div class=field_selectBox><div class="button2_normal float_left" ng-click="fmInventoryCtrl.enterFlag = true">进货入库</div><div class="xt_searchBox float_right" style="margin-right: 20px"><input class=xt_searchInput style="text-indent: 10px" placeholder=请输入商品名称 ng-model=fmInventoryCtrl.searchProductName><div class=xt_searchImage ng-click=fmInventoryCtrl.search()></div></div><div class=clear></div></div></div><div><div class=cancelTable><div class="cancelTr height_40"><div class="cancelTh ellipsis" style=width:160px>商品名称</div><div class="cancelTh ellipsis pointer" ng-click="fmInventoryCtrl.typeFlag = !fmInventoryCtrl.typeFlag" style=width:160px><span>商品类别</span> <img style=margin-left:5px src="assets/images/arrow.png"></div><div class="cancelTh ellipsis" style=width:160px>库存数</div><div class="cancelTh ellipsis" style=width:160px>进货价</div><div class="cancelTh ellipsis" style=width:160px>销售价</div><div class="cancelTh ellipsis" style=width:160px>操作</div></div><div class=cancelTr ng-repeat="product in fmInventoryCtrl.products" ng-show="product.quantity > 0"><div class="cancelTd ellipsis" style=width:160px ng-bind=product.name></div><div class="cancelTd ellipsis" style=width:160px ng-bind=product.categoryName></div><div class="cancelTd ellipsis" style=width:160px ng-bind=product.quantity></div><div class="cancelTd ellipsis" style=width:160px ng-bind=product.price></div><div class="cancelTd ellipsis" style=width:160px ng-bind=product.price></div><div class="cancelTd ellipsis pointer" style=width:160px;color:#00a1ff><span style=margin-right:10px ng-click="fmInventoryCtrl.enterFlag = true">修改</span><span ng-click="fmInventoryCtrl.changePriceFlag = true">调价</span></div></div><div class=select_div ng-show=fmInventoryCtrl.typeFlag style=width:200px;top:230px;left:388px><div class="select_choose ellipsis pointer" ng-click=fmInventoryCtrl.chooseClass(class)>全部</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="fmInventoryCtrl.pagination.numPages > 1" total-items=fmInventoryCtrl.pagination.totalItems ng-model=fmInventoryCtrl.pagination.page items-per-page=fmInventoryCtrl.pagination.itemsPerPage max-size=fmInventoryCtrl.pagination.maxSize boundary-links="{{fmInventoryCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmInventoryCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmInventoryCtrl.pageChanged()></pagination></div><!-- 进货入库 --><div class=bgGary ng-show=fmInventoryCtrl.enterFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">进货入库</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmInventoryCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">商品名称</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!fmInventoryCtrl.chooseNameFlag,\'select_foucs\':fmInventoryCtrl.chooseNameFlag}" ng-click="fmInventoryCtrl.chooseNameFlag = !fmInventoryCtrl.chooseNameFlag"><div class="form_down_icon form_select_value_choose" style=width:346px ng-bind=fmInventoryCtrl.productName></div><div class=form_select_div style=width:346px ng-show=fmInventoryCtrl.chooseNameFlag><div ng-click=fmInventoryCtrl.chooseProduct(product) class="select_cell pointer" ng-repeat="product in fmInventoryCtrl.products" ng-bind=product.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin"><span>供货商</span><span style=color:#fff>的</span></div><div class="float_left pointer form_zindex_100" ng-class="{\'select\':!fmInventoryCtrl.chooseSupplyFlag,\'select_foucs\':fmInventoryCtrl.chooseSupplyFlag}" ng-click="fmInventoryCtrl.chooseSupplyFlag = !fmInventoryCtrl.chooseSupplyFlag"><div class="form_down_icon form_select_value_choose" style=width:346px ng-bind=fmInventoryCtrl.supply></div><div class=form_select_div style=width:346px ng-show=fmInventoryCtrl.chooseSupplyFlag><div ng-click=fmInventoryCtrl.chooseSupply(supply) class="select_cell pointer" ng-repeat="supply in fmInventoryCtrl.supplies" ng-bind=supply.supplyName onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">进货数量</div><input class="form_value float_left form_value_width" placeholder=请输入进货数量 ng-model=fmInventoryCtrl.num></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">进货单价</div><input class="form_value float_left form_value_width" placeholder=请输入进货单价 ng-model=fmInventoryCtrl.price></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmInventoryCtrl.enter()>完成</div><div class="button_normal float_right" ng-click=fmInventoryCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 调价 --><div class=bgGary ng-show=fmInventoryCtrl.changePriceFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">调价</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmInventoryCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin"><span>销售价</span><span style=color:#fff>的</span></div><input class="form_value float_left form_value_width" placeholder=请输入销售价 ng-model=fmInventoryCtrl.salePrice></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmInventoryCtrl.buy()>完成</div><div class="button_normal float_right" ng-click=fmInventoryCtrl.close()>取消</div><div class=clear></div></div></div></div></div>'), a.put("app/fieldmanager/shop/inventory.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div class=field_bookBoxPostition><div class=field_titleBox><div style="width: 90px" class="field_titleNormal {{fmInventoryCtrl.titleState==\'stock\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="fmInventoryCtrl.changeTitle(\'stock\')">商品库存</div><div style="width: 90px" class="field_titleNormal {{fmInventoryCtrl.titleState==\'record\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="fmInventoryCtrl.changeTitle(\'record\')">进货记录</div></div><div ui-view=""></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=fmInventoryCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmInventoryCtrl.wordOK>22212</div><div class=promptClose ng-click=fmInventoryCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmInventoryCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=fmInventoryCtrl.wordERR>22212</div><div class=promptClose ng-click=fmInventoryCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmInventoryCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=fmInventoryCtrl.wordWARN>22212</div><div class=promptClose ng-click=fmInventoryCtrl.closePrompt()></div></div></div></div>'), a.put("app/fieldmanager/shop/sell-record.html", '<div><div class=field_selectBox><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入商品名搜索 ng-model=fmSellCtrl.searchProductName><div class=xt_searchImage ng-click=fmSellCtrl.searchProduct()></div></div><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="fmSellCtrl.startDateFlag = !fmSellCtrl.startDateFlag;fmSellCtrl.closeDateFlag = false" ng-bind="fmSellCtrl.startDate | date:\'yyyy-MM-dd\'"></div><div class=float_left style="margin:10px 10px 0 10px">至</div><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="fmSellCtrl.closeDateFlag = !fmSellCtrl.closeDateFlag;fmSellCtrl.startDateFlag = false" ng-bind="fmSellCtrl.closeDate | date:\'yyyy-MM-dd\'"></div><div class=clear></div><div class="student_datetime student_datetime2" style="margin:380px 0 0 0"><datetimepick ng-close=fmSellCtrl.getRecord() ng-id="\'first\'" ng-show=fmSellCtrl.startDateFlag ng-date=fmSellCtrl.startDate></datetimepick></div><div class="student_datetime student_datetime2" style="margin:380px 0 0 0"><datetimepick ng-close=fmSellCtrl.getRecord() ng-id="\'second\'" ng-show=fmSellCtrl.closeDateFlag ng-date=fmSellCtrl.closeDate></datetimepick></div></div></div><div><div class=cancelTable><div class="cancelTr height_40"><div class="cancelTh ellipsis" style=width:20rem>订单号</div><div class="cancelTh ellipsis" style=width:14rem>商品名称</div><div class="cancelTh ellipsis" style=width:13rem>订单时间</div><div class="cancelTh ellipsis" style=width:5rem>售价</div><div class="cancelTh ellipsis" style=width:6rem>数量</div><div class="cancelTh ellipsis" style=width:12rem>销售额</div><div class="cancelTh ellipsis" style=width:10rem>顾客姓名</div><div class="cancelTh ellipsis" style=width:10rem>操作人</div><div class="cancelTh ellipsis" style=width:10rem>操作</div></div><div class=cancelTr ng-repeat="record in fmSellCtrl.records"><div class="cancelTd ellipsis" style=width:20rem ng-bind=record._id></div><div class="cancelTd ellipsis" style=width:14rem ng-bind=record._record?record.description+record.remark:record.shopProductName title={{record._record?record.description+record.remark:record.shopProductName}}></div><div class="cancelTd ellipsis" style=width:13rem ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm\'"></div><div class="cancelTd ellipsis" style=width:5rem ng-bind=record.price></div><div class="cancelTd ellipsis" style=width:6rem ng-bind=record.quantity></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=record.cost></div><div class="cancelTd ellipsis" style=width:10rem ng-bind=record.name></div><div class="cancelTd ellipsis" style=width:10rem ng-bind=record.workerName></div><div class="cancelTd ellipsis pointer" style=width:10rem;color:#00a1ff><span class=pointer style=color:#00a1ff ng-show=!record.isRefund&&!record._record ng-click="fmSellCtrl.refundFlag = true;fmSellCtrl.rId = record._id">退款</span> <span ng-show=record.isRefund&&!record._record>已退款</span> <span ng-show=record._record>纠错单</span></div></div></div><div style=margin-top:20px;font-size:18px><span>总额：</span><span ng-bind=fmSellCtrl.recordTotal></span></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="fmSellCtrl.pagination.numPages > 1" total-items=fmSellCtrl.pagination.totalItems ng-model=fmSellCtrl.pagination.page items-per-page=fmSellCtrl.pagination.itemsPerPage max-size=fmSellCtrl.pagination.maxSize boundary-links="{{fmSellCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmSellCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmSellCtrl.pageChanged()></pagination></div><!-- 商品退款 --><div class=bgGary ng-show=fmSellCtrl.refundFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">商品退款</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmSellCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">退款金额</div><input class="form_value float_left form_value_width" placeholder=请输入退款金额 ng-model=fmSellCtrl.refundPrice></div><div class=clear></div><!-- \n                <div class="form_first_view">\n                    <div class="form_key float_left form_key_margin">退款方式</div>\n                    <div class="singleChoose_box float_left">\n                        <div class="singleChoose_option" ng-repeat="refund in fmSellCtrl.refundArr" ng-click="fmSellCtrl.chooseRefund(refund)">\n                            <div class="singleChoose_imageBox {{refund.image}}"></div>\n                            <div class="singleChoose_prompt" ng-bind="refund.name">每周</div>\n                        </div>\n                    </div>\n                </div>\n                <div class="clear"></div> --></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmSellCtrl.refund()>完成</div><div class="button_normal float_right" ng-click=fmSellCtrl.close()>取消</div><div class=clear></div></div></div></div></div>'), a.put("app/fieldmanager/shop/sell-sale.html", '<div style=margin-top:20px><div style="height: 36px;margin-top: 20px;float: left"><input style="float:left;width:160px;height:36px;text-indent:10px;border-radius:5px 0 0 5px;border:1px solid #ccc;border-right:none" placeholder="输入商品名称/条码 " ng-model=fmSellCtrl.pName ng-keydown=fmSellCtrl.addListByDown($event)><div ng-show=fmSellCtrl.pName style="float:left;height:36px;line-height:36px;text-align:center;border-radius:0 5px 5px 0;background:#20a0ff;color:#fff;cursor:pointer;padding:0 15px" ng-click=fmSellCtrl.addList()>加入购物车</div><div ng-hide=fmSellCtrl.pName style="float:left;padding:0 15px;height:36px;line-height:36px;text-align:center;border-radius:0 5px 5px 0;background:#d3dce6;color:#fff">加入购物车</div></div><div class=clear></div><div ng-show=fmSellCtrl.selectFlag style="width:160px;border:1px solid #ddd;background:#fff;z-index:999;position:relative"><div ng-show=product.isUsed ng-click=fmSellCtrl.add(product) class="pointer select_cell" ng-repeat="product in fmSellCtrl.products" ng-bind=product.name style="padding:0 10px">d</div><div ng-show=!product.isUsed ng-click="fmSellCtrl.selectFlag = false" class="pointer select_cell" ng-repeat="product in fmSellCtrl.products" style="padding:0 10px"><span class=float_left ng-bind=product.name></span><span style=float:right;color:#00a1ff>已下架</span></div></div></div><div class=clear></div><div style=margin-top:30px;z-index:888><div class=cancelTable ng-show="!fmSellCtrl.buyProduct.length == 0"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style=width:25rem>商品名称</div><div class="cancelTh ellipsis" style=width:25rem>单价</div><div class="cancelTh ellipsis" style=width:25rem>数量</div><div class="cancelTh ellipsis" style=width:25rem>总价</div></div><div class=cancelTr ng-repeat="product in fmSellCtrl.buyProduct"><div class="cancelTd ellipsis" style=width:25rem ng-bind=product.name>2</div><div class="cancelTd ellipsis" style=width:25rem ng-bind="\'￥\'+product.price">2</div><div class="cancelTd ellipsis" style=width:25rem><input ng-blur=fmSellCtrl.canPrice(product) ng-model=product.num ng-change=fmSellCtrl.calPrice(product) style=border:0;width:20px class="float_left"><div class="float_left pointer"><img src=assets/images/circleadd.png style=width:15px ng-click="fmSellCtrl.changeNum(product,\'add\')"> <img src=assets/images/circledelete.png style=width:15px ng-click="fmSellCtrl.changeNum(product,\'delete\')"></div></div><div class="cancelTd ellipsis" style=width:25rem ng-bind="\'￥\'+product.tot"></div></div><div class=select_div ng-show=fmSellCtrl.typeFlag style=width:20rem;top:230px;left:430px><div class="select_choose ellipsis pointer" ng-click=fmSellCtrl.chooseClass(class)>全部</div></div></div><div style="margin-top:20px;font-size:14px;color:#8492a6;border:1px solid #ddd;width:1000px;text-align:center;height:60px;line-height:60px" ng-show="fmSellCtrl.buyProduct.length == 0">购物车暂无商品</div><div style=margin-top:20px;font-size:14px ng-show="!fmSellCtrl.buyProduct.length == 0"><span>应付:</span> <span style=color:#ff4949>￥</span> <span style=color:#ff4949;font-size:18px ng-bind=fmSellCtrl.total></span></div><div class="button2_normal float_left" style="margin:20px 20px 0 0" ng-click=fmSellCtrl.judgePay()>立即付款</div><div class=bgGary ng-show=fmSellCtrl.payFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">发起支付</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmSellCtrl.payFlag = false"></div><div class=clear></div><div ng-show=fmSellCtrl.moneyFlag style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">需支付：</div><div class="form_value float_left form_value_width" style=border:none;color:red ng-bind="fmSellCtrl.realPrice | currency:\'￥\'"></div></div><div class=clear></div></div><div ng-show=!fmSellCtrl.moneyFlag style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">需支付：</div><div class="form_value float_left form_value_width" style=border:none;color:red ng-bind="fmSellCtrl.total | currency:\'￥\'"></div></div><div class=clear></div></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">支付方式</div><div><div class=singleChoose_option style="float: none" ng-repeat="payment in fmSellCtrl.paymentArr" ng-click=fmSellCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style=width:0;height:0;overflow:hidden><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=fmSellCtrl.auth_code ng-keypress=fmSellCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmSellCtrl.create()>确认支付</div><div class="button_normal float_right" ng-click="fmSellCtrl.payFlag = false">取消</div><div class=clear></div></div></div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=fmSellCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=fmSellCtrl.shut()></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=fmSellCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmSellCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="fmSellCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmSellCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=fmSellCtrl.wordERR title={{fmSellCtrl.wordERR}}>22212</div><div class=promptClose ng-click=fmSellCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmSellCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=fmSellCtrl.wordWARN title={{fmSellCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'),
            a.put("app/fieldmanager/shop/sell.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-shop-form>商品结存报表</div><div class="field_titleNormal field_titleChoose">销售明细</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-purchase-record>入库记录</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-return-record>报废记录</div></div><div class=field_bookBoxPostition ui-view=""></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=fmSellCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmSellCtrl.wordOK>22212</div><div class=promptClose ng-click="fmSellCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmSellCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=fmSellCtrl.wordERR>22212</div><div class=promptClose ng-click="fmSellCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmSellCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" title={{fmSellCtrl.wordWARN}}>支付中...</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/fieldmanager/staff/staff-all.html", '<div style="min-width: 1050px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div class=field_titleBox><div class="field_titleNormal field_titleChoose">所有人</div><div class="field_titleNormal field_titleUnChoose" ui-sref=rm-staff.explain>角色说明</div><div class=clear></div></div><div class="float_left pointer" ng-class="{\'select\':!fmStaffCtrl.selectRoleFlag,\'select_foucs\':fmStaffCtrl.selectRoleFlag}" ng-click="fmStaffCtrl.showSelect(\'role\')" style="margin:20px 0 0 30px"><div class="form_down_icon form_width_180 form_select_value_choose" ng-bind=fmStaffCtrl.selectRole></div><div class="form_select_div form_width_180" ng-show=fmStaffCtrl.selectRoleFlag><div ng-click="fmStaffCtrl.chooseRole(\'\',\'所有角色类型\')" class="select_cell pointer" onclick="event.cancelBubble = true">所有角色类型</div><div ng-click="fmStaffCtrl.chooseRole(\'fieldManager\',\'场馆管理员\')" class="select_cell pointer" onclick="event.cancelBubble = true">场馆管理员</div><div ng-click="fmStaffCtrl.chooseRole(\'checkStand\',\'前台柜员\')" class="select_cell pointer" onclick="event.cancelBubble = true">前台柜员</div><div ng-click="fmStaffCtrl.chooseRole(\'fieldWorker\',\'场工\')" class="select_cell pointer" onclick="event.cancelBubble = true">场工</div><div ng-click="fmStaffCtrl.chooseRole(\'cardManager\',\'卡务管理员\')" class="select_cell pointer" onclick="event.cancelBubble = true">卡务管理员</div><div ng-click="fmStaffCtrl.chooseRole(\'financeManager\',\'财务管理员\')" class="select_cell pointer" onclick="event.cancelBubble = true">财务管理员</div></div></div><div class="button2_normal float_right" style="background:#00A1FF;margin:20px 20px 0 0" ng-click="fmStaffCtrl.addFlag = true">新增员工</div><div class=clear></div><div style="margin:40px 20px 0 30px;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;min-width:106rem"><div class=float_left style=width:14rem;padding-left:20px>姓名</div><div class=float_left style=width:15rem>角色类型</div><div class=float_left style=width:14rem>账号</div><div class=float_left style=width:48rem>负责场馆</div><div class=float_left>操作</div></div><div class=clear></div><div ng-repeat="user in fmStaffCtrl.users"><div style="border-bottom:1px solid #ddd;margin:0 20px 0 30px;color:#526874;min-width:106rem;padding:15px 0;display:flex;align-items:center"><div class=float_left style=width:14rem;padding-left:20px ng-bind=user.name>小七</div><div class=float_left style=width:15rem ng-bind=user.role>超级管理员</div><div class=float_left style=width:14rem ng-bind=user.account>黄金会员</div><div class=float_left style=width:48rem><div class=float_left ng-repeat="venue in user.venues" ng-bind=venue.name style="margin:0px 10px 0 0;font-size:13px;line-height:16px">xxx</div><div ng-show="user.venues.length == 0" style=color:white>xx</div></div><div class=float_left><div class="float_left pointer" onclick="event.cancelBubble = true" ng-click=fmStaffCtrl.showEdit(user)>编辑</div><div class="float_left pointer" ng-click="fmStaffCtrl.sureFlag = true;fmStaffCtrl.uId = user._id" style="margin:0 0 0 40px">删除</div></div></div><div class=clear></div></div><pagination style="left:280px;margin:20px 30px 3px 20px" ng-if="fmStaffCtrl.pagination.numPages > 1" total-items=fmStaffCtrl.pagination.totalItems ng-model=fmStaffCtrl.pagination.page items-per-page=fmStaffCtrl.pagination.itemsPerPage max-size=fmStaffCtrl.pagination.maxSize boundary-links="{{fmStaffCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmStaffCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmStaffCtrl.pageChanged()></pagination><div class=bgGary ng-show=fmStaffCtrl.sureFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">确认删除？</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmStaffCtrl.close()"></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmStaffCtrl.delete()>确定</div><div class="button_normal float_right" ng-click=fmStaffCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmStaffCtrl.editFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">编辑员工</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmStaffCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">员工姓名</div><input class="form_value float_left form_value_width" placeholder=请输入姓名 ng-blur="fmStaffCtrl.judge(\'name\')" ng-class="{\'\':!fmStaffCtrl.nameFlag,\'form_value_error\':fmStaffCtrl.nameFlag}" ng-model="fmStaffCtrl.name"></div><div class=clear></div><div class=form_error_font ng-show=!fmStaffCtrl.nameFlag></div><div class=form_error_font ng-show=fmStaffCtrl.nameFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">输入账号</div><input class="form_value float_left form_value_width" placeholder=请输入账号 ng-blur="fmStaffCtrl.judge(\'account\')" ng-class="{\'\':!fmStaffCtrl.accountFlag,\'form_value_error\':fmStaffCtrl.accountFlag}" ng-model="fmStaffCtrl.account"></div><div class=clear></div><div class=form_error_font ng-show=!fmStaffCtrl.accountFlag></div><div class=form_error_font ng-show=fmStaffCtrl.accountFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">输入密码</div><input class="form_value float_left form_value_width" placeholder=请输入密码 ng-blur="fmStaffCtrl.judge(\'password\')" ng-class="{\'\':!fmStaffCtrl.passwordFlag,\'form_value_error\':fmStaffCtrl.passwordFlag}" ng-model="fmStaffCtrl.password"></div><div class=clear></div><div class=form_error_font ng-show=!fmStaffCtrl.passwordFlag></div><div class=form_error_font ng-show=fmStaffCtrl.passwordFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">联系方式</div><input class="form_value float_left form_value_width" placeholder=请输入手机号码 ng-blur="fmStaffCtrl.judge(\'tel\')" ng-class="{\'\':!fmStaffCtrl.telFlag,\'form_value_error\':fmStaffCtrl.telFlag}" ng-model="fmStaffCtrl.tel"></div><div class=clear></div><div class=form_error_font ng-show=!fmStaffCtrl.telFlag></div><div class=form_error_font ng-show=fmStaffCtrl.telFlag>此项为必填项</div><div class=field_selectBoxOne style="margin-top: 0px;width: 445px" ng-show=fmStaffCtrl.staffToVenue><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">财务所属</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmStaffCtrl.product.venueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmStaffCtrl.venueName ng-click="fmStaffCtrl.showChooseVenueBox=!fmStaffCtrl.showChooseVenueBox">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=fmStaffCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in fmStaffCtrl.venues" ng-bind=venue.name ng-click=fmStaffCtrl.chooseVenueName(venue)>默认按钮</div></div></div><div style=clear:both></div></div><div ng-show=fmStaffCtrl.cvFlag><div><div class="form_key float_left form_key_margin">负责场馆</div><div class=float_left style=width:350px><div class="float_left pointer" style="margin:10px 23px 0 0" ng-click=fmStaffCtrl.chooseVenue(venue) ng-repeat="venue in fmStaffCtrl.venues"><img ng-show=!venue.select class=float_left src="assets/images/select_box.png"> <img ng-show=venue.select style=width:16px class=float_left src="assets/images/select_true.png"><div class=float_left style=margin-left:3px ng-bind=venue.name></div></div></div></div><div class=clear></div><div class=form_error_font ng-show=!fmStaffCtrl.vFlag></div><div class=form_error_font ng-show=fmStaffCtrl.vFlag>至少选择一个项目</div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmStaffCtrl.edit()>完成</div><div class="button_normal float_right" ng-click=fmStaffCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fmStaffCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增员工</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmStaffCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">员工姓名</div><input class="form_value float_left form_value_width" placeholder=请输入姓名 ng-blur="fmStaffCtrl.judge(\'name\')" ng-class="{\'\':!fmStaffCtrl.nameFlag,\'form_value_error\':fmStaffCtrl.nameFlag}" ng-model="fmStaffCtrl.name"></div><div class=clear></div><div class=form_error_font ng-show=!fmStaffCtrl.nameFlag></div><div class=form_error_font ng-show=fmStaffCtrl.nameFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">角色类型</div><div class=float_left style="margin-top:10px;width: 348px"><div class="float_left pointer" style="margin-right:10px;margin-bottom: 10px" ng-click="fmStaffCtrl.chooseIdentity(\'fieldManager\')"><img ng-hide="fmStaffCtrl.state==\'fieldManager\'" class=float_left src="assets/images/radio_off.png"> <img ng-show="fmStaffCtrl.state==\'fieldManager\'" style=width:16px class=float_left src="assets/images/bluecircle.png"><div class=float_left style=margin-left:5px>场馆管理员</div></div><div class="float_left pointer" style="margin-right:10px;margin-bottom: 10px" ng-click="fmStaffCtrl.chooseIdentity(\'checkStand\')"><img ng-hide="fmStaffCtrl.state==\'checkStand\'" class=float_left src="assets/images/radio_off.png"> <img ng-show="fmStaffCtrl.state==\'checkStand\'" style=width:16px class=float_left src="assets/images/bluecircle.png"><div class=float_left style=margin-left:5px>前台柜员</div></div><div class="float_left pointer" style="margin-right:10px;margin-bottom: 10px" ng-click="fmStaffCtrl.chooseIdentity(\'fieldWorker\')"><img ng-hide="fmStaffCtrl.state==\'fieldWorker\'" class=float_left src="assets/images/radio_off.png"> <img ng-show="fmStaffCtrl.state==\'fieldWorker\'" style=width:16px class=float_left src="assets/images/bluecircle.png"><div class=float_left style=margin-left:5px>场工</div></div><div class="float_left pointer" style="margin-right:10px;margin-bottom: 10px" ng-click="fmStaffCtrl.chooseIdentity(\'cardManager\')"><img ng-hide="fmStaffCtrl.state==\'cardManager\'" class=float_left src="assets/images/radio_off.png"> <img ng-show="fmStaffCtrl.state==\'cardManager\'" style=width:16px class=float_left src="assets/images/bluecircle.png"><div class=float_left style=margin-left:5px>卡务管理员</div></div><div class="float_left pointer" style="margin-right:10px;margin-bottom: 10px" ng-click="fmStaffCtrl.chooseIdentity(\'financeManager\')"><img ng-hide="fmStaffCtrl.state==\'financeManager\'" class=float_left src="assets/images/radio_off.png"> <img ng-show="fmStaffCtrl.state==\'financeManager\'" style=width:16px class=float_left src="assets/images/bluecircle.png"><div class=float_left style=margin-left:5px>财务管理员</div></div></div></div><div class=clear></div><div><div class="form_key float_left form_key_margin">输入账号</div><input class="form_value float_left form_value_width" placeholder=请输入账号 ng-blur="fmStaffCtrl.judge(\'account\')" ng-class="{\'\':!fmStaffCtrl.accountFlag,\'form_value_error\':fmStaffCtrl.accountFlag}" ng-model="fmStaffCtrl.account"></div><div class=clear></div><div class=form_error_font ng-show=!fmStaffCtrl.accountFlag></div><div class=form_error_font ng-show=fmStaffCtrl.accountFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">输入密码</div><input class="form_value float_left form_value_width" placeholder=请输入密码 ng-blur="fmStaffCtrl.judge(\'password\')" ng-class="{\'\':!fmStaffCtrl.passwordFlag,\'form_value_error\':fmStaffCtrl.passwordFlag}" ng-model="fmStaffCtrl.password"></div><div class=clear></div><div class=form_error_font ng-show=!fmStaffCtrl.passwordFlag></div><div class=form_error_font ng-show=fmStaffCtrl.passwordFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">联系方式</div><input class="form_value float_left form_value_width" placeholder=请输入手机号码 ng-blur="fmStaffCtrl.judge(\'tel\')" ng-class="{\'\':!fmStaffCtrl.telFlag,\'form_value_error\':fmStaffCtrl.telFlag}" ng-model="fmStaffCtrl.tel"></div><div class=clear></div><div class=form_error_font ng-show=!fmStaffCtrl.telFlag></div><div class=form_error_font ng-show=fmStaffCtrl.telFlag>此项为必填项</div><div class=field_selectBoxOne style="margin-top: 0px;width: 445px" ng-show=fmStaffCtrl.staffToVenue><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">财务所属</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmStaffCtrl.product.venueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmStaffCtrl.venueName ng-click="fmStaffCtrl.showChooseVenueBox=!fmStaffCtrl.showChooseVenueBox">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=fmStaffCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in fmStaffCtrl.venues" ng-bind=venue.name ng-click=fmStaffCtrl.chooseVenueName(venue)>默认按钮</div></div></div><div style=clear:both></div></div><div ng-show=fmStaffCtrl.cvFlag><div><div class="form_key float_left form_key_margin">负责场馆</div><div class=float_left style=width:350px><div class="float_left pointer" style="margin:10px 23px 0 0" ng-click=fmStaffCtrl.chooseVenue(venue) ng-repeat="venue in fmStaffCtrl.venues"><img ng-show=!venue.select class=float_left src="assets/images/select_box.png"> <img ng-show=venue.select style=width:16px class=float_left src="assets/images/select_true.png"><div class=float_left style=margin-left:3px ng-bind=venue.name></div></div></div></div><div class=clear></div><div class=form_error_font ng-show=!fmStaffCtrl.vFlag></div><div class=form_error_font ng-show=fmStaffCtrl.vFlag>至少选择一个项目</div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmStaffCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=fmStaffCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 错误提示 --><div class=bgGary style=z-index:999 ng-show=fmStaffCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=fmStaffCtrl.wordERR>22212</div><div class=promptClose ng-click="fmStaffCtrl.promptERR = false"></div></div></div></div></div>'), a.put("app/fieldmanager/staff/staff-explain.html", '<div style="min-width: 900px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-staff.all>所有人</div><div class="field_titleNormal field_titleChoose">角色说明</div><div class=clear></div></div><div><div style="margin:40px 20px 0 20px;padding-bottom:20px;border-bottom:1px solid #94A8BA;min-width:106rem"><div class=float_left style="width:30rem;padding-left:20px;font-weight: medium">角色类型</div><div class=float_left style="width:80rem;font-weight: medium">描述</div></div><div class=clear></div><div style=margin-right:20px;;min-width:106rem><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;margin-left:20px;color:#526874"><div class=float_left style=width:30rem;padding-left:20px>超级管理员</div><div class=float_left>包含所有场馆、会员、员工的功能的管理权限</div></div><div class=clear></div><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;margin-left:20px;color:#526874"><div class=float_left style=width:30rem;padding-left:20px>场馆管理员</div><div class=float_left>包含自己负责场馆下的场地、会员、员工的功能的管理权限</div></div><div class=clear></div><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;margin-left:20px;color:#526874"><div class=float_left style=width:30rem;padding-left:20px>卡务管理员</div><div class=float_left>包含所有场馆下的实体卡、虚拟卡的功能的管理权限</div></div><div class=clear></div><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;margin-left:20px;color:#526874"><div class=float_left style=width:30rem;padding-left:20px>财务管理员</div><div class=float_left>包含自己负责场馆下的财务的功能的管理权限</div></div><div class=clear></div><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;margin-left:20px;color:#526874"><div class=float_left style=width:30rem;padding-left:20px>前台柜员</div><div class=float_left>包含自己负责场馆的场地预定、会员的管理权限</div></div><div class=clear></div><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;margin-left:20px;color:#526874"><div class=float_left style=width:30rem;padding-left:20px>场地工作人员</div><div class=float_left>负责自己负责场馆的场地的开启使用，更换场地</div></div><div class=clear></div></div></div></div><style></style>'), a.put("app/fieldmanager/staff/staff.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div ui-view="" style="padding:0 0rem 20px 200px"></div></div>'), a.put("app/fieldmanager/stock/purchase-record.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-shop-form>商品结存报表</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-sell.record>销售明细</div><div class="field_titleNormal field_titleChoose">入库记录</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-return-record>报废记录</div></div><div class=field_bookBoxPostition><div><div class=field_selectBox><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入商品名条码 ng-model=fmPurchaseRecordCtrl.searchProductName><!-- <div class="xt_searchImage" ng-click="fmPurchaseRecordCtrl.searchProduct()"></div> --></div><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入进货批号 ng-model=fmPurchaseRecordCtrl.orderNo><!-- <div class="xt_searchImage" ng-click="fmPurchaseRecordCtrl.searchProduct()"></div> --></div><div class=float_left style="margin-right: 20px;position: relative"><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="fmPurchaseRecordCtrl.startDateFlag = !fmPurchaseRecordCtrl.startDateFlag;fmPurchaseRecordCtrl.closeDateFlag = false" ng-bind="fmPurchaseRecordCtrl.startDate | date:\'yyyy-MM-dd\'"></div><div class=float_left style="margin:10px 10px 0 10px">至</div><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="fmPurchaseRecordCtrl.closeDateFlag = !fmPurchaseRecordCtrl.closeDateFlag;fmPurchaseRecordCtrl.startDateFlag = false" ng-bind="fmPurchaseRecordCtrl.closeDate | date:\'yyyy-MM-dd\'"></div><div class=clear></div><div class="student_datetime student_datetime2" style="position: absolute;top:36px;left: 0"><datetimepick ng-close=fmPurchaseRecordCtrl.closeDateBox() ng-id="\'first\'" ng-show=fmPurchaseRecordCtrl.startDateFlag ng-date=fmPurchaseRecordCtrl.startDate></datetimepick></div><div class="student_datetime student_datetime2" style="position: absolute;top:36px;left: 184px"><datetimepick ng-close=fmPurchaseRecordCtrl.closeDateBox() ng-id="\'second\'" ng-show=fmPurchaseRecordCtrl.closeDateFlag ng-date=fmPurchaseRecordCtrl.closeDate></datetimepick></div></div><div class=float_left style="margin-right: 20px"><div class="fbonce_bookConfirmBtn pointer" style="margin-top: 0px;height: 36px;line-height: 36px;margin-bottom: 0" ng-click=fmPurchaseRecordCtrl.check()>查询</div></div><div class=float_left><div class="fbonce_m_i_r_c_btn bgcolorW borderccc" style="color: #475669" ng-click=fmPurchaseRecordCtrl.resert()>重置</div></div><div class=clear></div></div></div><div><div class=cancelTable style="width: 114rem"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style="width:11rem;text-indent: 20px">登记时间</div><div class="cancelTh ellipsis" style=width:11rem>采购单号</div><div class="cancelTh ellipsis" style=width:11rem>商品码</div><div class="cancelTh ellipsis" style=width:11rem>商品名称</div><div class="cancelTh ellipsis" style=width:12rem>供应商名称</div><div class="cancelTh ellipsis" style=width:11rem>进货数量</div><div class="cancelTh ellipsis" style=width:11rem>进货单价</div><div class="cancelTh ellipsis" style=width:11rem>进货总价</div><div class="cancelTh ellipsis" style=width:11rem>销售单价</div><div class="cancelTh ellipsis" style=width:11rem>操作人</div><!-- <div class="cancelTh ellipsis" style="width:10rem">操作</div> --></div><div class=cancelTr ng-repeat="order in fmPurchaseRecordCtrl.orders"><div class="cancelTd ellipsis" style="width:11rem;text-indent: 20px" ng-bind="order.createDate | date:\'yyyy-MM-dd HH:mm\'"></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.orderNo></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.misCode></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.name></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=order.supplyName></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.quantity></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.purchasePrice></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.cost></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.price></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.workerName></div><!-- <div class="cancelTd ellipsis" style="width:10rem;">\n                                <span style="color:#00a1ff;cursor: pointer;" ng-show="order.canChange" ng-click="csdReturnRecordCtrl.cancel(order._id)">撤销</span>\n                                <span ng-hide="order.canChange">不可操作</span>\n                            </div> --></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="fmPurchaseRecordCtrl.pagination.numPages > 1" total-items=fmPurchaseRecordCtrl.pagination.totalItems ng-model=fmPurchaseRecordCtrl.pagination.page items-per-page=fmPurchaseRecordCtrl.pagination.itemsPerPage max-size=fmPurchaseRecordCtrl.pagination.maxSize boundary-links="{{fmPurchaseRecordCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmPurchaseRecordCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmPurchaseRecordCtrl.pageChanged()></pagination></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=fmPurchaseRecordCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmPurchaseRecordCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="fmPurchaseRecordCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmPurchaseRecordCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=fmPurchaseRecordCtrl.wordERR title={{fmPurchaseRecordCtrl.wordERR}}>22212</div><div class=promptClose ng-click=fmPurchaseRecordCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmPurchaseRecordCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=fmPurchaseRecordCtrl.wordWARN title={{fmPurchaseRecordCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/fieldmanager/stock/purchase.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleChoose">商品入库</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-stock>库存管理</div></div><div class=field_bookBoxPostition style="margin-top: 10px"><div><div class=field_selectBox style="position: relative;width:auto;width: 106rem;height: 130px;min-width:1500px;background: #EFF2F7;border:1px solid #ccc;border-radius: 5px"><div style="float:left;width: 28rem;min-width:380px;height: 120px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">商品名称：</div><div style="float: left;margin-top: 12px;background: #fff;width: 230px"><input name=name class="select field_select" style="width: 230px;text-indent: 10px;cursor: auto;ime-mode:disabled" ng-keypress=fmPurchaseCtrl.enterCheck($event) placeholder=请扫商品码 ng-model=fmPurchaseCtrl.product.showName><div style="position: absolute;top:48px;width: 230px;z-index: 300" class=form_select_div ng-show=fmPurchaseCtrl.showProductsBox><div class="select_cell pointer ellipsis" ng-repeat="product in fmPurchaseCtrl.products" ng-bind=product.name ng-click=fmPurchaseCtrl.chooseProduct(product)>默认按钮</div></div></div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">进货数量：</div><div style="float: left;margin-top: 12px;background: #fff;width: 230px"><input name=name class="select field_select" style="width: 230px;text-indent: 10px;cursor: auto" placeholder=请输入进货数量 ng-model=fmPurchaseCtrl.product.quantity></div></div></div><div style="float:left;width: 28rem;min-width:380px;height: 120px"><div style="height: 60px;line-height: 60px;padding-left: 20px"></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">进货单价：</div><div style="float: left;margin-top: 12px;background: #fff;width: 230px"><input name=name class="select field_select" style="width: 230px;text-indent: 10px;cursor: auto" placeholder=请输入进货价 ng-model=fmPurchaseCtrl.product.purchasePrice></div></div></div><div style="float:left;width: 28rem;min-width:380px;height: 120px"><div style="height: 60px;line-height: 60px;padding-left: 20px"></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">销售单价：</div><div style="float: left;margin-top: 12px;width: 230px"><div style="width: 230px;height: 36px;line-height: 36px;border-radius: 4px;text-indent: 10px;cursor: text" ng-bind=fmPurchaseCtrl.product.price></div></div></div></div><div style="float:left;width: 20rem;min-width:200px;height: 120px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div class=fbonce_bookConfirmBtn style="background: #d3dce6" ng-hide=fmPurchaseCtrl.product.misCode&&fmPurchaseCtrl.product.quantity&&fmPurchaseCtrl.product.purchasePrice&&fmPurchaseCtrl.product.price>加入进货单</div><div class="fbonce_bookConfirmBtn pointer" ng-show=fmPurchaseCtrl.product.misCode&&fmPurchaseCtrl.product.quantity&&fmPurchaseCtrl.product.purchasePrice&&fmPurchaseCtrl.product.price ng-click=fmPurchaseCtrl.addToForm()>加入进货单</div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div class="fbonce_m_i_r_c_btn bgcolorW borderccc" style="color: #475669;margin-left: 0px" ng-click=fmPurchaseCtrl.resert()>重置</div></div></div></div><div class=clear></div></div><div><div class=cancelTable style="width: 106rem" ng-show="fmPurchaseCtrl.showProducts.length>0"><div class="cancelThTr height_40" style="font-size: 15px"><div class="cancelTh width_4 ellipsis"><div style="width: 16px;height: 16px;border-radius: 5px;margin-top: 7px;margin-left: 12px;cursor: pointer" class={{fmPurchaseCtrl.chooseAll}} ng-click=fmPurchaseCtrl.chooseAllDoc()></div></div><div class="cancelTh width_13 ellipsis">商品码</div><div class="cancelTh width_13 ellipsis">商品名称</div><div class="cancelTh width_18 ellipsis">供货商名称</div><div class="cancelTh width_13 ellipsis">销售单价</div><div class="cancelTh width_13 ellipsis">进货数量</div><div class="cancelTh width_13 ellipsis">进货单价</div><div class="cancelTh width_13 ellipsis">进货总价</div></div><div class=cancelTr ng-repeat="doc in fmPurchaseCtrl.showProducts"><div class="cancelTd width_4 ellipsis"><div style="width: 16px;height: 16px;border-radius: 5px;margin-top: 15px;margin-left: 12px;cursor: pointer" class={{doc.image}} ng-click=fmPurchaseCtrl.chooseDoc(doc)></div></div><div class="cancelTd width_13 ellipsis" ng-bind=doc.misCode>预订时间</div><div class="cancelTd width_13 ellipsis" ng-bind=doc.name></div><div class="cancelTd width_18 ellipsis" ng-bind=doc.supplyName></div><div class="cancelTd width_13 ellipsis" ng-bind=doc.price></div><div class="cancelTd width_13 ellipsis" ng-bind=doc.quantity></div><div class="cancelTd width_13 ellipsis" ng-bind=doc.purchasePrice></div><div class="cancelTd width_13 ellipsis" ng-bind=doc.cost></div></div><div><div class=fbonce_bookConfirmBtn style="background: #d3dce6" ng-hide="fmPurchaseCtrl.commiteCount>0">确认进货</div><div class="fbonce_bookConfirmBtn pointer" ng-show="fmPurchaseCtrl.commiteCount>0" ng-click="fmPurchaseCtrl.showWorkersBox=true">确认进货</div></div></div></div></div></div></div></div><!-- 选择发放柜员 --><div class=bgGary ng-show=fmPurchaseCtrl.showWorkersBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">选择库存发放柜员</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmPurchaseCtrl.close()"><div class=clear></div></div><div style="margin-top: 20px"><div class="form_key float_left form_key_margin" style="width: 56px">发放柜员</div><div class="float_left pointer" style="z-index: 20" ng-class="{\'select\':!fmPurchaseCtrl.chooseWorkerFlag,\'select_foucs\':fmPurchaseCtrl.chooseWorkerFlag}" ng-click="fmPurchaseCtrl.chooseWorkerFlag = !fmPurchaseCtrl.chooseWorkerFlag"><div class="form_down_icon form_select_value_choose" style="width:346px;{{fmPurchaseCtrl.workerName==\'请选择柜员\'?\'color:#8f99a6\':\'color:#1f2d3d\';}}" ng-bind=fmPurchaseCtrl.workerName></div><div class=form_select_div style=width:346px ng-show=fmPurchaseCtrl.chooseWorkerFlag><div ng-click=fmPurchaseCtrl.chooseWorker(worker) class="select_cell pointer" ng-repeat="worker in fmPurchaseCtrl.workers" ng-bind=worker.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmPurchaseCtrl.create()>完成</div><div class="button_normal float_right" ng-click=fmPurchaseCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=fmPurchaseCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmPurchaseCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="fmPurchaseCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmPurchaseCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=fmPurchaseCtrl.wordERR title={{fmPurchaseCtrl.wordERR}}>22212</div><div class=promptClose ng-click=fmPurchaseCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmPurchaseCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=fmPurchaseCtrl.wordWARN title={{fmPurchaseCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'),
            a.put("app/fieldmanager/stock/return-record.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-shop-form>商品结存报表</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-sell.record>销售明细</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-purchase-record>入库记录</div><div class="field_titleNormal field_titleChoose">报废记录</div></div><div class=field_bookBoxPostition><div><div class=field_selectBox><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入商品名条码 ng-model=fmReturnRecordCtrl.searchProductName><!-- <div class="xt_searchImage" ng-click="fmReturnRecordCtrl.searchProduct()"></div> --></div><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入报废单号 ng-model=fmReturnRecordCtrl.orderNo><!-- <div class="xt_searchImage" ng-click="fmReturnRecordCtrl.searchProduct()"></div> --></div><div class=float_left style="margin-right: 20px;position: relative"><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="fmReturnRecordCtrl.startDateFlag = !orgPurchaseRecordReturnrtDateFlag;fmReturnRecordCtrl.closeDateFlag = false" ng-bind="fmReturnRecordCtrl.startDate | date:\'yyyy-MM-dd\'"></div><div class=float_left style="margin:10px 10px 0 10px">至</div><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="fmReturnRecordCtrl.closeDateFlag = !orgPurchaseRecordReturnseDateFlag;fmReturnRecordCtrl.startDateFlag = false" ng-bind="fmReturnRecordCtrl.closeDate | date:\'yyyy-MM-dd\'"></div><div class=clear></div><div class="student_datetime student_datetime2" style="position: absolute;top:36px;left: 0"><datetimepick ng-close=fmReturnRecordCtrl.closeDateBox() ng-id="\'first\'" ng-show=fmReturnRecordCtrl.startDateFlag ng-date=fmReturnRecordCtrl.startDate></datetimepick></div><div class="student_datetime student_datetime2" style="position: absolute;top:36px;left: 184px"><datetimepick ng-close=fmReturnRecordCtrl.closeDateBox() ng-id="\'second\'" ng-show=fmReturnRecordCtrl.closeDateFlag ng-date=fmReturnRecordCtrl.closeDate></datetimepick></div></div><div class=float_left style="margin-right: 20px"><div class="fbonce_bookConfirmBtn pointer" style="margin-top: 0px;height: 36px;line-height: 36px;margin-bottom: 0" ng-click=fmReturnRecordCtrl.check()>查询</div></div><div class=float_left><div class="fbonce_m_i_r_c_btn bgcolorW borderccc" style="color: #475669" ng-click=fmReturnRecordCtrl.resert()>重置</div></div><div class=clear></div></div></div><div><div class=cancelTable style="width: 114rem"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style="width:11rem;text-indent: 20px">报废时间</div><div class="cancelTh ellipsis" style=width:11rem>报废单号</div><div class="cancelTh ellipsis" style=width:11rem>商品码</div><div class="cancelTh ellipsis" style=width:11rem>商品名称</div><div class="cancelTh ellipsis" style=width:12rem>供应商名称</div><div class="cancelTh ellipsis" style=width:11rem>报废数量</div><div class="cancelTh ellipsis" style=width:11rem>进货单价</div><div class="cancelTh ellipsis" style=width:11rem>进货总价</div><div class="cancelTh ellipsis" style=width:11rem>销售单价</div><div class="cancelTh ellipsis" style=width:11rem>操作人</div><!-- <div class="cancelTh ellipsis" style="width:10rem">操作</div> --></div><div class=cancelTr ng-repeat="order in fmReturnRecordCtrl.orders"><div class="cancelTd ellipsis" style="width:11rem;text-indent: 20px" ng-bind="order.createDate | date:\'yyyy-MM-dd HH:mm\'"></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.orderNo></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.misCode></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.name></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=order.supplyName></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.quantity></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.purchasePrice></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.cost></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.price></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.workerName></div><!-- <div class="cancelTd ellipsis" style="width:10rem;">\n                                <span style="color:#00a1ff;cursor: pointer;" ng-show="order.canChange" ng-click="csdReturnRecordCtrl.cancel(order._id)">撤销</span>\n                                <span ng-hide="order.canChange">不可操作</span>\n                            </div> --></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="fmReturnRecordCtrl.pagination.numPages > 1" total-items=fmReturnRecordCtrl.pagination.totalItems ng-model=fmReturnRecordCtrl.pagination.page items-per-page=fmReturnRecordCtrl.pagination.itemsPerPage max-size=fmReturnRecordCtrl.pagination.maxSize boundary-links="{{orgPurchaseRecReturnpagination.numPages > 2}}" rotate=false num-pages=fmReturnRecordCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmReturnRecordCtrl.pageChanged()></pagination></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=fmReturnRecordCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmReturnRecordCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="fmReturnRecordCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmReturnRecordCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=fmReturnRecordCtrl.wordERR title={{orgPurchaseReturnrl.wordERR}}>22212</div><div class=promptClose ng-click=fmReturnRecordCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmReturnRecordCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=fmReturnRecordCtrl.wordWARN title={{orgPurchaseRReturnl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/fieldmanager/stock/shop-form.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleChoose">商品结存报表</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-sell.record>销售明细</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-purchase-record>入库记录</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-return-record>报废记录</div></div><div class=field_bookBoxPostition><div><div class=field_selectBox><div class=float_left style="margin-right: 20px;position: relative"><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="fmShopFormCtrl.startDateFlag = !fmShopFormCtrl.startDateFlag;fmShopFormCtrl.closeDateFlag = false" ng-bind="fmShopFormCtrl.startDate | date:\'yyyy-MM-dd\'"></div><div class=float_left style="margin:10px 10px 0 10px">至</div><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="fmShopFormCtrl.closeDateFlag = !fmShopFormCtrl.closeDateFlag;fmShopFormCtrl.startDateFlag = false" ng-bind="fmShopFormCtrl.closeDate | date:\'yyyy-MM-dd\'"></div><div class=clear></div><div class="student_datetime student_datetime2" style="position: absolute;top:36px;left: 0"><datetimepick ng-close=fmShopFormCtrl.closeDateBox() ng-id="\'first\'" ng-show=fmShopFormCtrl.startDateFlag ng-date=fmShopFormCtrl.startDate></datetimepick></div><div class="student_datetime student_datetime2" style="position: absolute;top:36px;left: 184px"><datetimepick ng-close=fmShopFormCtrl.closeDateBox() ng-id="\'second\'" ng-show=fmShopFormCtrl.closeDateFlag ng-date=fmShopFormCtrl.closeDate></datetimepick></div></div><div class=float_right style="margin-right: 20px"><div class="fbonce_bookConfirmBtn pointer" style="margin-top: 0px;height: 36px;line-height: 36px" ng-click=fmShopFormCtrl.export()>导出xls</div></div></div></div><div><div class=cancelTable style="width: 114rem"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style="width:8rem;text-indent: 20px">商品名称</div><div class="cancelTh ellipsis" style=width:8rem>上次结存数量</div><div class="cancelTh ellipsis" style=width:8rem>上次结存金额</div><div class="cancelTh ellipsis" style=width:8rem>本次进货价</div><div class="cancelTh ellipsis" style=width:8rem>本次进货数量</div><div class="cancelTh ellipsis" style=width:8rem>本次进货金额</div><div class="cancelTh ellipsis" style=width:8rem>本次报废数量</div><div class="cancelTh ellipsis" style=width:8rem>本次报废金额</div><div class="cancelTh ellipsis" style=width:8rem>本次销售量</div><div class="cancelTh ellipsis" style=width:8rem>本次零售价</div><div class="cancelTh ellipsis" style=width:8rem>本次销售金额</div><div class="cancelTh ellipsis" style=width:8rem>盈利</div><div class="cancelTh ellipsis" style=width:8rem>本次结存数量</div><div class="cancelTh ellipsis" style=width:8rem>本次结存金额</div></div><div class=cancelTr ng-repeat="form in fmShopFormCtrl.forms"><div class="cancelTd ellipsis" style="width:8rem;text-indent: 20px" ng-bind=form.name title={{form.name}}></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.lastQuantity></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.lastCost></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.purchasePrice></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.purchaseQuantity></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.purchaseCost></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.returnQuantity></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.returnCost></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.saleQuantity></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.price></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.salesVolume></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.income></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.nowQuantity></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.nowCost></div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="fmShopFormCtrl.pagination.numPages > 1" total-items=fmShopFormCtrl.pagination.totalItems ng-model=fmShopFormCtrl.pagination.page items-per-page=fmShopFormCtrl.pagination.itemsPerPage max-size=fmShopFormCtrl.pagination.maxSize boundary-links="{{fmShopFormCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmShopFormCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmShopFormCtrl.pageChanged()></pagination></div></div></div></div></div><table id=alltable style="width: 0;height: 0;overflow: hidden"><tr><td colspan=13><span>库存盘存表</span></td></tr><tr><td colspan=13><span>时间范围：</span> <span ng-bind=fmShopFormCtrl.dateName></span></td></tr><tr><td>商品名称</td><td>上次结存数量</td><td>上次结存金额</td><td>本次进货价</td><td>本次进货金额</td><td>本次报废数量</td><td>本次报废金额</td><td>本次销售量</td><td>本次零售价</td><td>本次销售金额</td><td>盈利</td><td>本次结存数量</td><td>本次结存金额</td></tr><tr ng-repeat="form in fmShopFormCtrl.exportforms"><td ng-bind=form.name></td><td ng-bind=form.lastQuantity></td><td ng-bind=form.lastCost></td><td ng-bind=form.purchasePrice></td><td ng-bind=form.purchaseCost></td><td ng-bind=form.returnQuantity></td><td ng-bind=form.returnCost></td><td ng-bind=form.saleQuantity></td><td ng-bind=form.price></td><td ng-bind=form.salesVolume></td><td ng-bind=form.income></td><td ng-bind=form.nowQuantity></td><td ng-bind=form.nowCost></td></tr></table><!-- 成功提示 --><div class=bgGary ng-show=fmShopFormCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmShopFormCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="fmShopFormCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmShopFormCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=fmShopFormCtrl.wordERR title={{fmShopFormCtrl.wordERR}}>22212</div><div class=promptClose ng-click=fmShopFormCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmShopFormCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=fmShopFormCtrl.wordWARN title={{fmShopFormCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/fieldmanager/stock/stock.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=fm-purchase>商品入库</div><div class="field_titleNormal field_titleChoose">库存管理</div></div><div class=field_bookBoxPostition><div><div class=field_selectBox><div class="select fbonce_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{fmStockCtrl.showWorkerName==\'选择柜员\'?\'\':\'color:#1f2d3d\';}}" ng-bind=fmStockCtrl.showWorkerName ng-click="fmStockCtrl.showChooseWorkerBox=!fmStockCtrl.showChooseWorkerBox">场馆1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=fmStockCtrl.showChooseWorkerBox><div class="select_cell pointer ellipsis" ng-repeat="worker in fmStockCtrl.workers" ng-bind=worker.name ng-click=fmStockCtrl.chooseWorkerName(worker)>默认按钮</div></div></div><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入商品名/条码 ng-model=fmStockCtrl.searchProductName ng-keypress=fmStockCtrl.enterCheck($event)><div class=xt_searchImage ng-click=fmStockCtrl.searchProduct()></div></div><div class=float_right style="margin-right: 20px"><div class="fbonce_bookConfirmBtn pointer" style="margin-top: 0px;height: 36px;line-height: 36px;margin-bottom:0" ng-click=fmStockCtrl.export()>导出xls</div></div></div></div><div><div class=cancelTable style="width: 114rem"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style="width:12rem;text-indent: 20px">商品码</div><div class="cancelTh ellipsis" style=width:12rem>商品名称</div><div class="cancelTh ellipsis" style=width:12rem>商品类别</div><div class="cancelTh ellipsis" style=width:12rem>库存数量</div><div class="cancelTh ellipsis" style=width:12rem>进货单价</div><div class="cancelTh ellipsis" style=width:12rem>销售单价</div><div class="cancelTh ellipsis" style=width:12rem>当前状态</div><div class="cancelTh ellipsis" style=width:12rem>当前柜员</div><div class="cancelTh ellipsis" style=width:12rem>操作</div></div><div class=cancelTr ng-repeat="product in fmStockCtrl.products"><div class="cancelTd ellipsis" style="width:12rem;text-indent: 20px" ng-bind=product.misCode></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=product.name></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=product.categoryName></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=product.quantity></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=product.purchasePrice></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=product.price></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=product.status></div><div class="cancelTd ellipsis" style=width:12rem ng-bind="product._worker?product.workerName:\'暂无柜员\'"></div><div class="cancelTd ellipsis pointer" style="width:12rem;color: #20a0ff"><span ng-click=fmStockCtrl.openShowReturnBox(product._id)>报废</span></div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="fmStockCtrl.pagination.numPages > 1" total-items=fmStockCtrl.pagination.totalItems ng-model=fmStockCtrl.pagination.page items-per-page=fmStockCtrl.pagination.itemsPerPage max-size=fmStockCtrl.pagination.maxSize boundary-links="{{fmStockCtrl.pagination.numPages > 2}}" rotate=false num-pages=fmStockCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=fmStockCtrl.pageChanged()></pagination></div></div></div></div></div><!-- 报废商品 --><div class=bgGary ng-show=fmStockCtrl.showReturnBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">报废数量</div><img src=assets/images/close.png class="float_right pointer" ng-click="fmStockCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin" style="width: 56px">报废数量</div><input class="form_value float_left form_value_width" placeholder=请输入报废数量 ng-blur="fmStockCtrl.judge(\'price\')" ng-class="{\'\':!fmStockCtrl.nameFlag,\'form_value_error\':fmStockCtrl.nameFlag}" ng-model="fmStockCtrl.returnQuantity"></div><div class=clear></div><div class=form_error_font ng-show=!fmStockCtrl.nameFlag></div><div class=form_error_font ng-show=fmStockCtrl.nameFlag style=margin-left:80px>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fmStockCtrl.check()>确认报废</div><div class="button_normal float_right" ng-click=fmStockCtrl.close()>取消</div><div class=clear></div></div></div></div></div><table id=alltable style="width: 0;height: 0;overflow: hidden"><tr><td colspan=6><span>柜员库存表</span></td></tr><tr><td>柜员</td><td>商品名称</td><td>商品类别</td><td>库存数量</td><td>进货单价</td><td>销售单价</td></tr><tr ng-repeat="product in fmStockCtrl.exportProducts"><td ng-bind="product._worker?product.workerName:\'暂无柜员\'"></td><td ng-bind=product.name></td><td ng-bind=product.categoryName></td><td ng-bind=product.quantity></td><td ng-bind=product.purchasePrice></td><td ng-bind=product.price></td></tr></table><!-- 成功提示 --><div class=bgGary ng-show=fmStockCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fmStockCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="fmStockCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fmStockCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=fmStockCtrl.wordERR title={{fmStockCtrl.wordERR}}>22212</div><div class=promptClose ng-click=fmStockCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fmStockCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=fmStockCtrl.wordWARN title={{fmStockCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/fieldworker/field/field-open.html", '<div class=contentBox style="width: 1024px" id=fdWorker><!-- <div ng-include="\'components/header/header.html\'"></div> --><div style="min-width: 1024px"><div><div style="height: 65px;line-height: 63px;margin:0 auto;padding: 0 30px;border-bottom: 1px solid #ccc"><div style="width: 500px;font-size: 24px;font-weight: bold;float: left">场地使用管理系统</div><div style="float: right"><div style="height: 63px;max-width: 300px;cursor: pointer" ng-click="fwkFieldOpenCtrl.outFlag = true"><div style="width: 24px;height: 24px;border-radius: 24px;overflow: hidden;background: url(../../assets/images/admin.png) no-repeat;margin-top: 19.5px;float: left"></div><div style="float: left;margin-left: 20px" class="float_right pointer" ng-click="fwkFieldOpenCtrl.outFlag = true" ng-bind=fwkFieldOpenCtrl.admin>管理员</div><div style="float: left;background: url(../../assets/images/blackdownG.png) no-repeat;width: 22px;height: 12px;margin-top: 25.5px;margin-left: 20px"></div></div></div><div style="float: right;height: 63px;max-width: 200px;font-size: 17px;font-weight: bold;margin-right: 20px"><span ng-bind="fwkFieldOpenCtrl.nowDate | date:\'yyyy年MM月dd日\'"></span> <span>&nbsp;</span> <span ng-bind=fwkFieldOpenCtrl.nowDay></span></div></div></div><div class=field_bookBox style="margin: 0 auto;padding-bottom: 100px"><div style="margin:20px 30px 0"><div class=field_selectBox style="height: auto"><div style="border:1px solid #ccc;border-radius: 5px;height: 120px"><div style="width: 400px;height: 120px;float: left;border-right: 1px solid #ccc"><div style="height: 50px;line-height: 50px;text-indent: 20px;color: #20a0ff;font-size: 16px">入场码</div><div style="width: 280px;height: 48px;margin-left: 20px;float: left"><input style="float:left;width: 200px;height: 48px;border:none;text-indent: 20px;border-radius: 5px 0 0 5px;border:1px solid #ccc;border-right: none" placeholder=输入用户的入场码 ng-model=fwkFieldOpenCtrl.orderCode><div style="float:left;width: 80px;height: 48px;line-height: 48px;text-align: center;border-radius: 0 5px 5px 0;background: #20a0ff;color: #fff;cursor: pointer" ng-click=fwkFieldOpenCtrl.checkOrder()>查询</div></div></div><div ng-show=fwkFieldOpenCtrl.showOrderInfo style="width: 400px;height: 120px;float: left;line-height: 31px;text-indent: 40px"><div style="height: 50px;line-height: 50px;font-size: 20px;font-weight: bold"><span ng-bind=fwkFieldOpenCtrl.order.fieldName>羽毛球05</span> <span>&nbsp;&nbsp;</span> <span ng-bind=fwkFieldOpenCtrl.order.showDate>13:00--14:00</span></div><div style="height: 30px;line-height: 30px;font-size: 17px;color: #999"><span>预订人：</span> <span ng-bind=fwkFieldOpenCtrl.order.name>老王</span></div><div style="height: 30px;line-height: 30px;font-size: 17px;color: #999"><span>联系方式：</span> <span ng-bind=fwkFieldOpenCtrl.order.tel>18806712362</span></div></div><div><div class="field_bookConfirmBtn pointer" style="margin-top: 40px;float: left;float: right;margin-right: 20px" ng-show=fwkFieldOpenCtrl.showOpenOrder ng-click=fwkFieldOpenCtrl.openField()>开启场地</div><div class=field_bookConfirmBtn style="margin-top: 40px;float: left;float: right;margin-right: 20px;background:#d3dce6" ng-hide=fwkFieldOpenCtrl.showOpenOrder>开启场地</div><div class="field_bookConfirmBtn pointer" style="margin-top: 40px;float: left;float: right;margin-right: 20px" ng-show=fwkFieldOpenCtrl.showChangeOrder ng-click=fwkFieldOpenCtrl.openShowChangeFieldBox()>更换场地</div><div class=field_bookConfirmBtn style="margin-top: 40px;float: left;float: right;margin-right: 20px;background:#d3dce6" ng-hide=fwkFieldOpenCtrl.showChangeOrder>更换场地</div></div><div ng-hide=fwkFieldOpenCtrl.showOrderInfo style="width: 500px;height: 120px;float: left;line-height: 118px;text-align: center;font-size: 17px;color: #999">暂无订单信息</div></div><div style="margin-top: 20px"><div><div style="height: 40px;float:left;border:1px solid #ccc;border-radius: 5px;border-right: none;font-size: 16px"><div style="padding: 0 10px;height: 38px;line-height: 38px;border-right: 1px solid #ccc;float: left;text-align: center;cursor: pointer;{{venue.bgColor}}" ng-repeat="venue in fwkFieldOpenCtrl.venues" ng-click=fwkFieldOpenCtrl.chooseVenueName(venue) ng-bind=venue.name></div></div><div style="height: 40px;float:left;border:1px solid #ccc;border-radius: 5px;border-right: none;margin-left: 40px;font-size: 16px"><div style="padding: 0 10px;height: 38px;line-height: 38px;border-right: 1px solid #ccc;float: left;text-align: center;cursor: pointer;{{item.bgColor}}" ng-repeat="item in fwkFieldOpenCtrl.items" ng-click=fwkFieldOpenCtrl.chooseItemName(item) ng-bind=item.name></div></div><div class=clear></div></div><div class=fbonce_bookBoxPostition style="margin-top: 16px"><div class=fbonce_bookDetail><div class=fbonce_bookDetailColor style="background: #20a0ff"></div><div class=fbonce_bookDetailName>已选</div></div><div class=fbonce_bookDetail><div class=fbonce_bookDetailColor style="background: #ff4949"></div><div class=fbonce_bookDetailName>使用中</div></div><div class=fbonce_bookDetail><div class=fbonce_bookDetailColor style="background: #fff;border: 1px solid #d3dce6"></div><div class=fbonce_bookDetailName>可预订</div></div><div class=fbonce_bookDetail><div class=fbonce_bookDetailColor style="background: #5ED878"></div><div class=fbonce_bookDetailName>普通预订</div></div><div class=fbonce_bookDetail><div class=fbonce_bookDetailColor style="background: #F69667"></div><div class=fbonce_bookDetailName>长包预订</div></div><div class=fbonce_bookDetail><div class=fbonce_bookDetailColor style="background: #67BDDE"></div><div class=fbonce_bookDetailName>培训预订</div></div><div class=fbonce_bookDetail><div class=fbonce_bookDetailColor style="background: #8492a6"></div><div class=fbonce_bookDetailName>过期/停用</div></div><div class=clear></div></div></div></div><div style="min-width: 940px;overflow: auto" ng-show="fwkFieldOpenCtrl.searchVenueId&&fwkFieldOpenCtrl.searchItemId&&fwkFieldOpenCtrl.times.length!=0&&fwkFieldOpenCtrl.fields.length!=0"><div><div class=fbonce_timeBox style="width: 80px;float: left"><div class="fbonce_timeName ellipsis" style="text-align: left;width: 80px;height: 44px;font-size: 16px"></div><div class="fbonce_timeName ellipsis" style="text-align: left;width: 80px;height: 44px;font-size: 16px" ng-repeat="field in fwkFieldOpenCtrl.fields" ng-bind=field.name title={{field.name}}></div></div><div style="float: left;width: 1175px;overflow-x: auto"><div class=fbonce_f_hoursBox style={{fwkFieldOpenCtrl.tableWidthB}}><div style="margin-left: 20px"><div class="fbonce_fieldName fbonce_f_h_hours" style="width: 72px;height: 36px" ng-repeat="value in fwkFieldOpenCtrl.showHours"><div class=fbonce_f_h_hour ng-bind="value.num+\':00\'"></div></div></div></div><div class=float_left style=";font-size: 16px;{{fwkFieldOpenCtrl.tableWidthB}}float: left"><div class=fbonce_time style=";height: 44px;margin-left: 20px" ng-repeat="field in fwkFieldOpenCtrl.fields"><div class=fbonce_fieldName style="width: auto;height: 44px" ng-repeat="time in field.times"><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#fff;height: 44px;line-height: 42px;{{time.marginleft==\'margin-left:00px;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-bind=time.name title="{{time.name+\'（号码：\'+(time.tel?time.tel:\'暂无号码\')+\' \'+\'/入场码：\'+time.code+\' \'+\'/备注：\'+(time.remark?time.remark:\'暂无备注）\')}}" ng-show="time.state==\'hasbook\'"></div><div class="fbonce_fieldAndTime ellipsis pointer" style="{{time.bgColor}}{{time.width}}color:#fff;height: 44px;line-height: 42px;{{time.marginleft==\'margin-left:00px;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-bind=time.name title="{{time.name+\'（号码：\'+(time.tel?time.tel:\'暂无号码\')+\' \'+\'/入场码：\'+time.code+\' \'+\'/备注：\'+(time.remark?time.remark:\'暂无备注）\')}}" ng-show="time.state==\'isUsed\'" ng-click=fwkFieldOpenCtrl.chooseChangeOrder(time,field)></div><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#fff;height: 44px;line-height: 42px;{{time.marginleft==\'margin-left:00px;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-bind=time.name title="{{time.name+\'（号码：\'+(time.tel?time.tel:\'暂无号码\')+\' \'+\'/入场码：\'+time.code+\' \'+\'/备注：\'+(time.remark?time.remark:\'暂无备注）\')}}" ng-show="time.state==\'haspass\'"></div><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#8492a6;height: 44px;line-height: 42px;{{time.marginleft==\'margin-left:00px;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'stop\'">停用中</div><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#8492a6;height: 44px;line-height: 42px;{{time.marginleft==\'margin-left:00px;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'cantbook\'">已过期</div><div class=fbonce_fieldAndTime style="{{time.bgColor}}{{time.fontColor}}{{time.width}}height: 44px;line-height: 42px;{{time.marginleft==\'margin-left:00px;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'canbook\'"></div><div class="fbonce_fieldAndTime pointer" style="{{time.bgColor}}{{time.fontColor}}{{time.width}}height: 44px;line-height: 42px;{{time.marginleft==\'margin-left:00px;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'choose\'" ng-bind=time.name title="{{time.name+\'(\'+(time.tel?time.tel:\'暂无号码\')+\')\'}}"></div></div></div></div></div><div class=clear></div></div></div><div class=float_left ng-show="!(fwkFieldOpenCtrl.searchVenueId&&fwkFieldOpenCtrl.searchItemId&&fwkFieldOpenCtrl.times.length!=0&&fwkFieldOpenCtrl.fields.length!=0)"><div style="width:1320px;height: 60px;text-align: center;line-height: 60px;color: #20a0ff;border:1px solid #d3dce6;margin-top: 10px">暂无场地</div></div><div class=clear></div></div></div></div></div><!-- 更换场地 --><div class=bgGary ng-show=fwkFieldOpenCtrl.showChangeFieldBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">更换场地</div><img src=assets/images/close.png class="float_right pointer" ng-click="fwkFieldOpenCtrl.showChangeFieldBox=false;"></div><div class=clear></div><div class=form_error_font></div><div class=field_selectBoxOne style="margin-top: 10px"><div class=field_selectName style="float: left">选择场地</div><div class="select field_select" style="float: left;width: 270px" onmouseover="event.cancelBubble = true"><div class="form_down_icon form_select_value"><div class=ellipsis ng-bind=fwkFieldOpenCtrl.showFieldName ng-click="fwkFieldOpenCtrl.showChooseFieldBox=!fwkFieldOpenCtrl.showChooseFieldBox">项目1</div></div><div style="position: relative;z-index: 300;width: 269px" class=form_select_div ng-show=fwkFieldOpenCtrl.showChooseFieldBox><div class="select_cell pointer ellipsis" ng-repeat="field in fwkFieldOpenCtrl.fieldArr" ng-bind=field.name ng-click=fwkFieldOpenCtrl.chooseFieldName(field)>默认按钮</div></div></div><!-- <select style="position: relative;z-index: 300;width: 269px;height: 40px;">\n                        <option class="select_cell pointer ellipsis" ng-repeat="field in fwkFieldOpenCtrl.fieldArr" ng-bind="field.name" ng-click="fwkFieldOpenCtrl.chooseFieldName(field)">默认按钮</option>\n                    </select> --></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=fwkFieldOpenCtrl.changeField()>确认更改</div><div class="button_normal float_right" ng-click="fwkFieldOpenCtrl.showChangeFieldBox=false;">取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=fwkFieldOpenCtrl.outFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>是否退出该账号</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click="fwkFieldOpenCtrl.outFlag = false">取消</div><div class="button_normal float_right" ng-click=fwkFieldOpenCtrl.logout()>退出</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=fwkFieldOpenCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=fwkFieldOpenCtrl.wordOK>22212</div><div class=promptClose ng-click=fwkFieldOpenCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=fwkFieldOpenCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=fwkFieldOpenCtrl.wordERR>22212</div><div class=promptClose ng-click=fwkFieldOpenCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=fwkFieldOpenCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=fwkFieldOpenCtrl.wordWARN>22212</div><div class=promptClose ng-click=fwkFieldOpenCtrl.closePrompt()></div></div></div></div>'),
            a.put("app/financemanager/finance/cashall/finance-cashall.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleChoose">营业收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fac-finance-field>场地/综合服务收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fac-finance-shop>小卖部收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fac-finance-prep>微信/支付宝</div></div><div class=field_bookBoxPostition><div><div><div class=field_selectBoxOne style="height: auto"><div><div><div class=field_selectName style="text-indent: 0;width: 80px">选择日期</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="facFinanceCashallCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="facFinanceCashallCtrl.showChooseStartDateBox=!facFinanceCashallCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=facFinanceCashallCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=facFinanceCashallCtrl.closeChooseStartDateBox() ng-date=facFinanceCashallCtrl.startDate></datetimepick></div></div><div class=float_left style="height: 40px;line-height: 40px;padding: 0 10px">至</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="facFinanceCashallCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="facFinanceCashallCtrl.showChooseEndDateBox=!facFinanceCashallCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=facFinanceCashallCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=facFinanceCashallCtrl.closeChooseEndDateBox() ng-date=facFinanceCashallCtrl.endDate></datetimepick></div></div><div><div class="button2_normal float_right" style="margin:0 20px" ng-click="facFinanceCashallCtrl.export(\'alltable\')">导出</div></div><div style=clear:both></div></div><div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择场馆</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="venue in facFinanceCashallCtrl.venues" ng-click="(venue.image==\'manyChoose_imageG\')?\'\':facFinanceCashallCtrl.chooseVenueName(venue)"><div class="singleChoose_imageBox {{venue.image}} {{venue.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=venue.name style="{{venue.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择提交人</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="worker in facFinanceCashallCtrl.workers" ng-click="(worker.image==\'manyChoose_imageG\')?\'\':facFinanceCashallCtrl.chooseWorkerName(worker)"><div class="singleChoose_imageBox {{worker.image}} {{worker.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=worker.name style="{{worker.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div style=clear:both></div></div></div></div></div><div style="max-width: 106rem;overflow-x: auto"><table id=alltable><tr><td colspan=54><span>柜员收入汇总表：</span> <span ng-bind=facFinanceCashallCtrl.venueName></span></td></tr><tr><td colspan=54><span>时间范围：</span> <span ng-bind=facFinanceCashallCtrl.dateName></span></td></tr><tr><td rowspan=2>操作柜员</td><td rowspan=2>开卡数量</td><td rowspan=2>实名认证数量</td><td colspan=9>现金收入</td><td colspan=7>支票收入</td><td colspan=7>转账收入</td><td colspan=7>POS机收入</td><td colspan=10>微信收入（非现金）</td><td colspan=9>支付宝收入（非现金）</td><td rowspan=2 style=color:#20a0ff>合计</td><td rowspan=2>详情</td></tr><tr><td>场地消费</td><td>柜台充值</td><td>门票消费</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td>现金退款</td><td style=color:#20a0ff>合计</td><td>场地消费</td><td>柜台充值</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td style=color:#20a0ff>合计</td><td>场地消费</td><td>柜台充值</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td style=color:#20a0ff>合计</td><td>场地消费</td><td>柜台充值</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td style=color:#20a0ff>合计</td><td>场地消费</td><td>柜台充值</td><td>线上充值</td><td>门票消费</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td>微信退款</td><td style=color:#20a0ff>合计</td><td>场地消费</td><td>柜台充值</td><td>门票消费</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td>支付宝退款</td><td style=color:#20a0ff>合计</td></tr><tr class=trHover ng-repeat="worker in facFinanceCashallCtrl.result"><td ng-bind=worker.workerName>1</td><td ng-bind=worker.issueCardCount?worker.issueCardCount:0>1</td><td ng-bind=worker.realMemberCount?worker.realMemberCount:0>1</td><td ng-bind=worker.payment.cash.field>1</td><td ng-bind=worker.payment.cash.charge>1</td><td ng-bind=worker.payment.cash.ticket>1</td><td ng-bind=worker.payment.cash.product>1</td><td ng-bind=worker.payment.cash.memberService>1</td><td ng-bind=worker.payment.cash.cardFee>1</td><td ng-bind=worker.payment.cash.bail>1</td><td ng-bind=worker.payment.cash.refund>1</td><td ng-bind=worker.payment.cash.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.check.field>1</td><td ng-bind=worker.payment.check.charge>1</td><td ng-bind=worker.payment.check.product>1</td><td ng-bind=worker.payment.check.memberService>1</td><td ng-bind=worker.payment.check.cardFee>1</td><td ng-bind=worker.payment.check.bail>1</td><td ng-bind=worker.payment.check.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.card.field>1</td><td ng-bind=worker.payment.card.charge>1</td><td ng-bind=worker.payment.card.product>1</td><td ng-bind=worker.payment.card.memberService>1</td><td ng-bind=worker.payment.card.cardFee>1</td><td ng-bind=worker.payment.card.bail>1</td><td ng-bind=worker.payment.card.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.pos.field>1</td><td ng-bind=worker.payment.pos.charge>1</td><td ng-bind=worker.payment.pos.product>1</td><td ng-bind=worker.payment.pos.memberService>1</td><td ng-bind=worker.payment.pos.cardFee>1</td><td ng-bind=worker.payment.pos.bail>1</td><td ng-bind=worker.payment.pos.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.wx.field>1</td><td ng-bind=worker.payment.wx.charge>1</td><td ng-bind=worker.payment.wx.charge_online>1</td><td ng-bind=worker.payment.wx.ticket>1</td><td ng-bind=worker.payment.wx.product>1</td><td ng-bind=worker.payment.wx.memberService>1</td><td ng-bind=worker.payment.wx.cardFee>1</td><td ng-bind=worker.payment.wx.bail>1</td><td ng-bind=worker.payment.wx.refund>1</td><td ng-bind=worker.payment.wx.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.alipay.field>1</td><td ng-bind=worker.payment.alipay.charge>1</td><td ng-bind=worker.payment.alipay.ticket>1</td><td ng-bind=worker.payment.alipay.product>1</td><td ng-bind=worker.payment.alipay.memberService>1</td><td ng-bind=worker.payment.alipay.cardFee>1</td><td ng-bind=worker.payment.alipay.bail>1</td><td ng-bind=worker.payment.alipay.refund>1</td><td ng-bind=worker.payment.alipay.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.subtotal style=color:#20a0ff>1</td><td style="color: #20a0ff;cursor: pointer" ng-click="facFinanceCashallCtrl.initCondition(worker._worker==\'all\'?undefined:worker.workerName)">详情</td></tr><tr class=trHover><td colspan=2>制表人：</td><td colspan=3></td><td colspan=2>复核人：</td><td colspan=3></td><td colspan=2>审核人：</td><td colspan=42></td></tr></table></div><div style="margin-top: 20px" ng-show=facFinanceCashallCtrl.baoyugang><div class="button2_normal float_right" style="margin:0 20px" ng-click="facFinanceCashallCtrl.export(\'alltable2\')">导出</div></div><div class=finance style="width:100%;overflow-x: auto;margin-top: 20px;margin-bottom: 50px" ng-show=facFinanceCashallCtrl.baoyugang><table id=alltable2 style=width:100%><tr><td colspan=10><span>柜员收入汇总表：</span> <span ng-bind="\'包玉刚游泳馆\'+\'-\'+facFinanceCashallCtrl.workerName"></span></td></tr><tr><td colspan=10><span>时间范围：</span> <span ng-bind=facFinanceCashallCtrl.dateName></span></td></tr><tr><td>项目</td><td>数量</td><td>单价</td><td>微信</td><td>支付宝</td><td>现金</td><td>转账</td><td>支票</td><td>POS机</td><td style=color:#20a0ff>合计</td></tr><!-- <tr class="trHover">\n                                    <td>场地收入</td>\n                                    <td>暂无</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.field.wx">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.field.alipay">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.field.cash">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.field.card">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.field.check">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.field.pos">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.field.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><tr class=trHover ng-repeat="ticket in facFinanceCashallCtrl.resultType.statuses.ticketArr"><td ng-bind=ticket.signName></td><td ng-bind=ticket.quantity></td><td ng-bind=ticket.price></td><td ng-bind=ticket.wx>1</td><td ng-bind=ticket.alipay>1</td><td ng-bind=ticket.cash>1</td><td ng-bind=ticket.card>1</td><td ng-bind=ticket.check>1</td><td ng-bind=ticket.pos>1</td><td ng-bind=ticket.subtotal style=color:#20a0ff>1</td></tr><!-- <tr class="trHover">\n                                    <td>柜台充值</td>\n                                    <td>暂无</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.charge.wx">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.charge.alipay">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.charge.cash">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.charge.card">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.charge.check">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.charge.pos">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.charge.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><!-- <tr class="trHover">\n                                    <td>专用账户充值</td>\n                                    <td>暂无</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.chargeSpe.wx">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.chargeSpe.alipay">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.chargeSpe.cash">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.chargeSpe.card">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.chargeSpe.check">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.chargeSpe.pos">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.chargeSpe.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><!-- <tr class="trHover">\n                                    <td>线上充值</td>\n                                    <td>暂无</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.charge_online.wx">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.charge_online.alipay">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.charge_online.cash">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.charge_online.card">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.charge_online.check">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.charge_online.pos">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.charge_online.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><!-- <tr class="trHover" ng-repeat="product in facFinanceCashallCtrl.resultType.statuses.productArr">\n                                    <td ng-bind="product.signName"></td>\n                                    <td ng-bind="product.quantity"></td>\n                                    <td ng-bind="product.wx">1</td>\n                                    <td ng-bind="product.alipay">1</td>\n                                    <td ng-bind="product.cash">1</td>\n                                    <td ng-bind="product.card">1</td>\n                                    <td ng-bind="product.check">1</td>\n                                    <td ng-bind="product.pos">1</td>\n                                    <td ng-bind="product.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><!-- <tr class="trHover" ng-repeat="shopProduct in facFinanceCashallCtrl.resultType.statuses.shopProductArr">\n                                    <td ng-bind="shopProduct.signName"></td>\n                                    <td ng-bind="shopProduct.quantity"></td>\n                                    <td ng-bind="shopProduct.wx">1</td>\n                                    <td ng-bind="shopProduct.alipay">1</td>\n                                    <td ng-bind="shopProduct.cash">1</td>\n                                    <td ng-bind="shopProduct.card">1</td>\n                                    <td ng-bind="shopProduct.check">1</td>\n                                    <td ng-bind="shopProduct.pos">1</td>\n                                    <td ng-bind="shopProduct.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><tr class=trHover ng-repeat="memberService in facFinanceCashallCtrl.resultType.statuses.memberServiceArr"><td ng-bind=memberService.signName></td><td ng-bind=memberService.quantity></td><td ng-bind=memberService.price></td><td ng-bind=memberService.wx>1</td><td ng-bind=memberService.alipay>1</td><td ng-bind=memberService.cash>1</td><td ng-bind=memberService.card>1</td><td ng-bind=memberService.check>1</td><td ng-bind=memberService.pos>1</td><td ng-bind=memberService.subtotal style=color:#20a0ff>1</td></tr><tr class=trHover><td>卡工本费</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.cardFee.quantity>0</td><td>20</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.cardFee.wx>1</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.cardFee.alipay>1</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.cardFee.cash>1</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.cardFee.card>1</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.cardFee.check>1</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.cardFee.pos>1</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.cardFee.subtotal style=color:#20a0ff>1</td></tr><tr class=trHover><td>办卡押金</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.bail.quantity>0</td><td>20</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.bail.wx>1</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.bail.alipay>1</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.bail.cash>1</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.bail.card>1</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.bail.check>1</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.bail.pos>1</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.bail.subtotal style=color:#20a0ff>1</td></tr><tr class=trHover><td>退卡押金</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.refundBail.quantity>0</td><td>20</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.refundBail.wx>1</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.refundBail.alipay>1</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.refundBail.cash>1</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.refundBail.card>1</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.refundBail.check>1</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.refundBail.pos>1</td><td ng-bind=facFinanceCashallCtrl.resultType.statuses.refundBail.subtotal style=color:#20a0ff>1</td></tr><!-- <tr class="trHover">\n                                    <td>退款</td>\n                                    <td>暂无</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.refund.wx">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.refund.alipay">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.refund.cash">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.refund.card">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.refund.check">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.refund.pos">1</td>\n                                    <td ng-bind="facFinanceCashallCtrl.resultType.statuses.refund.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><tr class=trHover><td>合计</td><td>0</td><td>0</td><td ng-bind=facFinanceCashallCtrl.resultType.wxTotal style=color:#20a0ff>1</td><td ng-bind=facFinanceCashallCtrl.resultType.alipayTotal style=color:#20a0ff>1</td><td ng-bind=facFinanceCashallCtrl.resultType.cashTotal style=color:#20a0ff>1</td><td ng-bind=facFinanceCashallCtrl.resultType.cardTotal style=color:#20a0ff>1</td><td ng-bind=facFinanceCashallCtrl.resultType.checkTotal style=color:#20a0ff>1</td><td ng-bind=facFinanceCashallCtrl.resultType.posTotal style=color:#20a0ff>1</td><td ng-bind=facFinanceCashallCtrl.resultType.subtotal style=color:#20a0ff>1</td></tr></table></div></div></div></div></div></div></div><style>table{\n        border:1px solid #000;\n        text-align: center;\n        margin-top: 20px;\n    }\n    tr{\n        border:1px solid #000;\n    }\n    td{\n        border:1px solid #000;\n        padding:5px; \n    }</style><!-- 纠错操作 --><div class=bgGary ng-show=facFinanceCashallCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=facFinanceCashallCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{facFinanceCashallCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="facFinanceCashallCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{facFinanceCashallCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="facFinanceCashallCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=facFinanceCashallCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=facFinanceCashallCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=facFinanceCashallCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=facFinanceCashallCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 预览详情 --><div class=bgGary ng-show=facFinanceCashallCtrl.showDetail><div class=middle><div id=box class="form_div center" style="width: 110rem;height: 650px;overflow-y: auto;padding: 20px;padding-bottom: 50px;border-radius: 10px;box-shadow: #ccc 0 0 3px 3px"><div><div class="form_title float_left">详情</div><img src=assets/images/close.png class="float_right pointer" ng-click=facFinanceCashallCtrl.close()></div><div class=clear></div><div class=cancelTable><div class="cancelThTr height_40"><div class="cancelTh width_13 ellipsis" style="text-indent: 20px">订单时间</div><div class="cancelTh width_10 ellipsis">用户名</div><div class="cancelTh width_8 ellipsis">金额</div><div class="cancelTh width_38 ellipsis">详情</div><div class="cancelTh width_15 ellipsis">提交人</div><div class="cancelTh width_13" style="position: relative"><div class=ellipsis style="float:left;max-width: 90px" ng-bind=facFinanceCashallCtrl.showPaymentName>支付方式</div><div class=downBtn ng-click="facFinanceCashallCtrl.showChoosePaymentBox=!facFinanceCashallCtrl.showChoosePaymentBox"></div><div class="form_select_div finance_selectBox" ng-show=facFinanceCashallCtrl.showChoosePaymentBox><div class="select_cell pointer ellipsis" ng-repeat="payment in facFinanceCashallCtrl.paymentArr" ng-bind=payment.name ng-click=facFinanceCashallCtrl.choosePaymentName(payment)>默认按钮</div></div></div><div class="cancelTh width_8 ellipsis">操作</div></div><div class=cancelTr ng-repeat="record in facFinanceCashallCtrl.recordsDetail" style="{{record.state?\'background: #f2f2f2\':\'\'}}"><div class="cancelTd width_13 ellipsis" ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm:ss\'" style="text-indent: 20px"></div><div class="cancelTd width_10 ellipsis" ng-bind=record.name></div><div class="cancelTd width_8 ellipsis" ng-bind="record.cost | currency:\'\'"></div><div class="cancelTd width_38 ellipsis" ng-bind="record.description+\' \'+(record.remark?\'(\'+record.remark+\')\':\'\')" title="{{record.description+\' \'+(record.remark?\'(\'+record.remark+\')\':\'\')}}"></div><div class="cancelTd width_15 ellipsis" ng-bind="record.workerName==\'微信\'?\'微信用户\':record.workerName"></div><div class="cancelTd width_13 ellipsis" ng-bind=record.payment></div><div class="cancelTd width_8 ellipsis" ng-hide=record.state><span style="cursor: pointer;color: #8492a6" ng-click=facFinanceCashallCtrl.openErrChangeBox(record._id)>纠错</span></div><div class="cancelTd width_8 ellipsis" ng-show=record.state>纠错单</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="facFinanceCashallCtrl.pagination.numPages > 1" total-items=facFinanceCashallCtrl.pagination.totalItems ng-model=facFinanceCashallCtrl.pagination.page items-per-page=facFinanceCashallCtrl.pagination.itemsPerPage max-size=facFinanceCashallCtrl.pagination.maxSize boundary-links="{{facFinanceCashallCtrl.pagination.numPages > 2}}" rotate=false num-pages=facFinanceCashallCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=facFinanceCashallCtrl.pageChanged()></pagination></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=facFinanceCashallCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=facFinanceCashallCtrl.wordOK>22212</div><div class=promptClose ng-click=facFinanceCashallCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=facFinanceCashallCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=facFinanceCashallCtrl.wordERR>22212</div><div class=promptClose ng-click=facFinanceCashallCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=facFinanceCashallCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=facFinanceCashallCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/financemanager/finance/field/finance-field.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/facanization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=fac-finance-cashall>营业收入</div><div class="field_titleNormal field_titleChoose">场地/综合服务收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fac-finance-shop>小卖部收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fac-finance-prep>微信/支付宝</div></div><div class=field_bookBoxPostition><div><div><div class=field_selectBoxOne style="height: auto"><div><div><div class=field_selectName style="text-indent: 0;width: 80px">选择日期</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="facFinanceFieldCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="facFinanceFieldCtrl.showChooseStartDateBox=!facFinanceFieldCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=facFinanceFieldCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=facFinanceFieldCtrl.closeChooseStartDateBox() ng-date=facFinanceFieldCtrl.startDate></datetimepick></div></div><div class=float_left style="height: 40px;line-height: 40px;padding: 0 10px">至</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="facFinanceFieldCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="facFinanceFieldCtrl.showChooseEndDateBox=!facFinanceFieldCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=facFinanceFieldCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=facFinanceFieldCtrl.closeChooseEndDateBox() ng-date=facFinanceFieldCtrl.endDate></datetimepick></div></div><div ng-show="facFinanceFieldCtrl.searchVenueIdArr.length>0"><div class="button2_normal float_right pointer" style="margin:0 20px" ng-click=facFinanceFieldCtrl.export()>导出</div></div><div style=clear:both></div></div><div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择场馆</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="venue in facFinanceFieldCtrl.venues" ng-click="(venue.image==\'manyChoose_imageG\')?\'\':facFinanceFieldCtrl.chooseVenueName(venue)"><div class="singleChoose_imageBox {{venue.image}} {{venue.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=venue.name style="{{venue.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择项目</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="item in facFinanceFieldCtrl.items" ng-click="(item.image==\'manyChoose_imageG\')?\'\':facFinanceFieldCtrl.chooseItemName(item)"><div class="singleChoose_imageBox {{item.image}} {{item.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=item.name style="{{item.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div style=clear:both></div></div></div></div></div><table id=alltable style="width: 106rem"><tr><td colspan=8><span>消费汇总表：</span> <span ng-bind=facFinanceFieldCtrl.venueName></span></td></tr><tr><td colspan=8><span>时间范围：</span> <span ng-bind=facFinanceFieldCtrl.dateName></span></td></tr><tr><td>项目/综合服务名称</td><td>资金收入（含现金、微信、支付宝、转账、支票、POS机）</td><td>余额支付</td><td>虚拟卡支付</td><td>专用账户支付</td><td>退款</td><td style="color: #20a0ff">合计</td><td>详情</td></tr><tr class=trHover ng-repeat="ip in facFinanceFieldCtrl.itemAndProduct"><td ng-bind=ip.ipName></td><td ng-bind=ip.payment.cashAll></td><td ng-bind=ip.payment.member></td><td ng-bind=ip.payment.member_vir></td><td ng-bind=ip.payment.member_spe></td><td ng-bind=ip.payment.refund></td><td ng-bind=ip.payment.subtotal style="color: #20a0ff"></td><td style="color: #20a0ff;cursor: pointer" ng-click=facFinanceFieldCtrl.initCondition(ip)>详情</td></tr><!-- <tr><td colspan="8" style="text-align: center;font-weight: bold;">一级分类</td></tr> --><tr class=trHover ng-repeat="first in facFinanceFieldCtrl.firstcategory"><td ng-bind=first.ipName></td><td ng-bind=first.payment.cashAll></td><td ng-bind=first.payment.member></td><td ng-bind=first.payment.member_vir></td><td ng-bind=first.payment.member_spe></td><td ng-bind=first.payment.refund></td><td ng-bind=first.payment.subtotal style="color: #20a0ff"></td><td style="color: #20a0ff;cursor: pointer" ng-click=facFinanceFieldCtrl.initCondition(first)>详情</td></tr><tr class=trHover><td ng-bind=facFinanceFieldCtrl.all.ipName></td><td ng-bind=facFinanceFieldCtrl.all.payment.cashAll></td><td ng-bind=facFinanceFieldCtrl.all.payment.member></td><td ng-bind=facFinanceFieldCtrl.all.payment.member_vir></td><td ng-bind=facFinanceFieldCtrl.all.payment.member_spe></td><td ng-bind=facFinanceFieldCtrl.all.payment.refund></td><td ng-bind=facFinanceFieldCtrl.all.payment.subtotal style="color: #20a0ff"></td><td style="color: #20a0ff;cursor: pointer" ng-click=facFinanceFieldCtrl.initCondition(facFinanceFieldCtrl.all)>详情</td></tr><tr class=trHover><td colspan=1>制表人：</td><td colspan=1></td><td colspan=1>复核人：</td><td colspan=1></td><td colspan=1>审核人：</td><td colspan=3></td></tr></table></div></div></div></div></div></div><style>table{\n        border:1px solid #000;\n        text-align: center;\n        margin-top: 20px;\n    }\n    tr{\n        border:1px solid #000;\n    }\n    td{\n        border:1px solid #000;\n        padding:5px; \n    }</style><!-- 纠错操作 --><div class=bgGary ng-show=facFinanceFieldCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=facFinanceFieldCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{facFinanceFieldCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="facFinanceFieldCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{facFinanceFieldCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="facFinanceFieldCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=facFinanceFieldCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=facFinanceFieldCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=facFinanceFieldCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=facFinanceFieldCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 预览详情 --><div class=bgGary ng-show=facFinanceFieldCtrl.showDetail><div class=middle><div id=box class="form_div center" style="width: 110rem;height: 700px;overflow-y: auto;padding: 20px;padding-bottom: 50px;border-radius: 10px;box-shadow: #ccc 0 0 3px 3px"><div><div class="form_title float_left">详情</div><img src=assets/images/close.png class="float_right pointer" ng-click=facFinanceFieldCtrl.close()><div class=clear></div></div><div><div style="height: 36px;line-height: 34px;margin-top: 20px;float: left" ng-hide="facFinanceFieldCtrl.searchStatus==\'other\'"><div class="fbonce_t_Title fbonce_t_once bgcolorB" ng-click="facFinanceFieldCtrl.changeStatus(\'field\')">场地消费</div><div class="fbonce_t_Title fbonce_t_long" ng-click="facFinanceFieldCtrl.changeStatus(\'other\')">其他消费</div><div class=clear></div></div><div style="height: 36px;line-height: 34px;margin-top: 20px;float: left" ng-show="facFinanceFieldCtrl.searchStatus==\'other\'"><div class="fbonce_t_Title fbonce_t_once" ng-click="facFinanceFieldCtrl.changeStatus(\'field\')">场地消费</div><div class="fbonce_t_Title fbonce_t_long bgcolorB" ng-click="facFinanceFieldCtrl.changeStatus(\'other\')">其他消费</div><div class=clear></div></div><div style="float: left;margin-top: 20px;margin-left: 20px;background: #fff" ng-show="facFinanceFieldCtrl.searchStatus==\'other\'"><div style="float: left" id=search class="xt_searchBox float_left"><input class=xt_searchInput style="text-indent: 10px" placeholder=请输入备注 ng-model=facFinanceFieldCtrl.searchRecordRemark><div class=xt_searchImage ng-click=facFinanceFieldCtrl.searchDetail()></div></div><div class=clear></div></div><div style="float: left;margin-top: 20px;margin-left: 20px;background: #fff" ng-show="facFinanceFieldCtrl.searchStatus==\'other\'"><div style="float: left" id=search class="xt_searchBox float_left"><input class=xt_searchInput style="text-indent: 10px" placeholder=请输入联系人 ng-model=facFinanceFieldCtrl.searchProductContacts><div class=xt_searchImage ng-click=facFinanceFieldCtrl.searchDetail()></div></div><div class=clear></div></div><div class="select field_select" style="margin-top: 20px;margin-left: 20px" ng-show="facFinanceFieldCtrl.searchStatus==\'other\'"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{facFinanceFieldCtrl.searchSecond==\'选择二级分类\'?\'\':\'color:#1f2d3d\';}}" ng-bind=facFinanceFieldCtrl.searchSecond ng-click="facFinanceFieldCtrl.openShowSearchSecond=!facFinanceFieldCtrl.openShowSearchSecond">场馆1</div></div><div class=form_select_div style="position:relative;z-index: 100" ng-show=facFinanceFieldCtrl.openShowSearchSecond><div class="select_cell pointer ellipsis" ng-repeat="second in facFinanceFieldCtrl.secondCategories" ng-bind=second.name ng-click=facFinanceFieldCtrl.chooseSecond(second)>默认按钮</div></div></div><div class="select field_select" style="margin-top: 20px;margin-left: 20px" ng-show="facFinanceFieldCtrl.searchStatus==\'other\'"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{facFinanceFieldCtrl.searchProduct==\'选择综合服务\'?\'\':\'color:#1f2d3d\';}}" ng-bind=facFinanceFieldCtrl.searchProduct ng-click="facFinanceFieldCtrl.openShowSearchProduct=!facFinanceFieldCtrl.openShowSearchProduct">场馆1</div></div><div class=form_select_div style="position:relative;z-index: 100" ng-show=facFinanceFieldCtrl.openShowSearchProduct><div class="select_cell pointer ellipsis" ng-repeat="product in facFinanceFieldCtrl.products" ng-bind=product.name ng-click=facFinanceFieldCtrl.chooseProduct(product)>默认按钮</div></div></div><div style="margin-top: 20px"><div class="button2_normal float_right pointer" style="margin:0 20px" ng-click=facFinanceFieldCtrl.exportDetail()>导出</div></div><div class=clear></div></div><div class=cancelTable><div class="cancelThTr height_40"><div class="cancelTh width_13 ellipsis" style="text-indent: 20px">订单时间</div><div class="cancelTh width_10 ellipsis">用户名</div><div class="cancelTh width_8 ellipsis">金额</div><div class="cancelTh width_38 ellipsis">详情</div><div class="cancelTh width_15 ellipsis">提交人</div><div class="cancelTh width_13" style="position: relative"><div class=ellipsis style="float:left;max-width: 90px" ng-bind=facFinanceFieldCtrl.showPaymentName>支付方式</div><div class=downBtn ng-click="facFinanceFieldCtrl.showChoosePaymentBox=!facFinanceFieldCtrl.showChoosePaymentBox"></div><div class="form_select_div finance_selectBox" ng-show=facFinanceFieldCtrl.showChoosePaymentBox><div class="select_cell pointer ellipsis" ng-repeat="payment in facFinanceFieldCtrl.paymentArr" ng-bind=payment.name ng-click=facFinanceFieldCtrl.choosePaymentName(payment)>默认按钮</div></div></div><div class="cancelTh width_8 ellipsis">操作</div></div><div class=cancelTr ng-repeat="record in facFinanceFieldCtrl.recordsDetail" style="{{record.state?\'background: #f2f2f2\':\'\'}}"><div class="cancelTd width_13 ellipsis" ng-bind="record.checkDate?record.checkDate:record.createDate | date:\'yyyy-MM-dd HH:mm:ss\'" style="text-indent: 20px"></div><div class="cancelTd width_10 ellipsis" ng-bind=record.name></div><div class="cancelTd width_8 ellipsis" ng-bind="record.cost | currency:\'\'"></div><div class="cancelTd width_38 ellipsis" ng-bind="record.description+\' \'+(record.remark?\'(备注：\'+record.remark+\')\':\'\')+(record.productContacts?\'(附加联系人：\'+record.productContacts+\')\':\'\')" title="{{record.description+\' \'+(record.remark?\'(备注：\'+record.remark+\')\':\'\')+(record.productContacts?\'(附加联系人：\'+record.productContacts+\')\':\'\')}}"></div><div class="cancelTd width_15 ellipsis" ng-bind="record.workerName==\'微信\'?\'微信用户\':record.workerName"></div><div class="cancelTd width_13 ellipsis" ng-bind=record.payment></div><div class="cancelTd width_8 ellipsis" ng-hide=record.state><span style="cursor: pointer;color: #8492a6" ng-click=facFinanceFieldCtrl.openErrChangeBox(record._id)>纠错</span></div><div class="cancelTd width_8 ellipsis" ng-show=record.state>纠错单</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="facFinanceFieldCtrl.pagination.numPages > 1" total-items=facFinanceFieldCtrl.pagination.totalItems ng-model=facFinanceFieldCtrl.pagination.page items-per-page=facFinanceFieldCtrl.pagination.itemsPerPage max-size=facFinanceFieldCtrl.pagination.maxSize boundary-links="{{facFinanceFieldCtrl.pagination.numPages > 2}}" rotate=false num-pages=facFinanceFieldCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=facFinanceFieldCtrl.pageChanged()></pagination><div class=float_right style="margin-top: 20px;font-size: 16px"><span>总金额：</span> <span style="color: #ff4949" ng-bind="\'￥\'+facFinanceFieldCtrl.cost">100</span></div></div></div></div><div style="width: 0;height: 0;overflow: hidden"><table id=alltable2><tr><td>订单时间</td><td>用户名</td><td>金额</td><td>详情</td><td>提交人</td><td>支付方式</td></tr><tr ng-repeat="record in facFinanceFieldCtrl.exportRecordsDetail"><td ng-bind="record.checkDate?record.checkDate:record.createDate | date:\'yyyy-MM-dd HH:mm:ss\'"></td><td ng-bind=record.name></td><td ng-bind="record.cost | currency:\'\'"></td><td ng-bind="record.description+\' \'+(record.remark?\'(备注：\'+record.remark+\')\':\'\')+(record.productContacts?\'(附加联系人：\'+record.productContacts+\')\':\'\')"></td><td ng-bind="record.workerName==\'微信\'?\'微信用户\':record.workerName"></td><td ng-bind=record.payment></td></tr></table></div><!-- 成功提示 --><div class=bgGary ng-show=facFinanceFieldCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=facFinanceFieldCtrl.wordOK>22212</div><div class=promptClose ng-click=facFinanceFieldCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=facFinanceFieldCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=facFinanceFieldCtrl.wordERR>22212</div><div class=promptClose ng-click=facFinanceFieldCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=facFinanceFieldCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=facFinanceFieldCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'),
            a.put("app/financemanager/finance/preporder/finance-preporder.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=fac-finance-cashall>营业收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fac-finance-field>场地/综合服务收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fac-finance-shop>小卖部收入</div><div class="field_titleNormal field_titleChoose">微信/支付宝</div></div><div class=field_bookBoxPostition><div><div><div class=field_selectBoxOne style="height: auto"><div><div><div class=field_selectName style="text-indent: 0;width: 80px">选择日期</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="facFinancePrepCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="facFinancePrepCtrl.showChooseStartDateBox=!facFinancePrepCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=facFinancePrepCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=facFinancePrepCtrl.closeChooseStartDateBox() ng-date=facFinancePrepCtrl.startDate></datetimepick></div></div><div class=float_left style="height: 40px;line-height: 40px;padding: 0 10px">至</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="facFinancePrepCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="facFinancePrepCtrl.showChooseEndDateBox=!facFinancePrepCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=facFinancePrepCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=facFinancePrepCtrl.closeChooseEndDateBox() ng-date=facFinancePrepCtrl.endDate></datetimepick></div></div><div ng-show="facFinancePrepCtrl.searchVenueIdArr.length>0"><div class="button2_normal float_right pointer" style="margin:0 20px" ng-click=facFinancePrepCtrl.export()>导出</div></div><div style=clear:both></div></div><div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择场馆</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="venue in facFinancePrepCtrl.venues" ng-click="(venue.image==\'manyChoose_imageG\')?\'\':facFinancePrepCtrl.chooseVenueName(venue)"><div class="singleChoose_imageBox {{venue.image}} {{venue.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=venue.name style="{{venue.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择提交人</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="worker in facFinancePrepCtrl.workers" ng-click="(worker.image==\'manyChoose_imageG\')?\'\':facFinancePrepCtrl.chooseWorkerName(worker)"><div class="singleChoose_imageBox {{worker.image}} {{worker.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=worker.name style="{{worker.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div style=clear:both></div></div></div></div></div><!-- 阿宝版本 --><table id=alltable style="width: 106rem"><tr><td colspan=24><span>中心微信支付宝收入汇总表：</span> <span ng-bind=facFinancePrepCtrl.venueName></span></td></tr><tr><td colspan=24><span>时间范围：</span> <span ng-bind=facFinancePrepCtrl.dateName></span></td></tr><tr><td rowspan=2>柜员名称</td><td colspan=10>支付宝</td><td colspan=11>微信</td><td rowspan=2 style="color: #20a0ff">合计</td><td rowspan=2>详情</td></tr><tr><td>场地收入</td><td>柜台充值</td><td>综合服务费</td><td>会员服务费</td><td>小卖部</td><td>门票</td><td>工本费</td><td>卡押金</td><td>专用账户充值</td><td style="color: #20a0ff">合计</td><td>场地收入</td><td>线上充值</td><td>柜台充值</td><td>综合服务费</td><td>会员服务费</td><td>小卖部</td><td>门票</td><td>工本费</td><td>卡押金</td><td>专用账户充值</td><td style="color: #20a0ff">合计</td></tr><tr class=trHover ng-repeat="worker in facFinancePrepCtrl.result"><td ng-bind=worker.workerName></td><td ng-bind=worker.payment.alipay.field></td><td ng-bind=worker.payment.alipay.charge></td><td ng-bind=worker.payment.alipay.product></td><td ng-bind=worker.payment.alipay.memberService></td><td ng-bind=worker.payment.alipay.shopProduct></td><td ng-bind=worker.payment.alipay.ticket></td><td ng-bind=worker.payment.alipay.cardFee></td><td ng-bind=worker.payment.alipay.bail></td><td ng-bind=worker.payment.alipay.chargeSpe></td><td ng-bind=worker.payment.alipay.subtotal style="color: #20a0ff"></td><td ng-bind=worker.payment.wx.field></td><td ng-bind=worker.payment.wx.charge_online></td><td ng-bind=worker.payment.wx.charge></td><td ng-bind=worker.payment.wx.product></td><td ng-bind=worker.payment.wx.memberService></td><td ng-bind=worker.payment.wx.shopProduct></td><td ng-bind=worker.payment.wx.ticket></td><td ng-bind=worker.payment.wx.cardFee></td><td ng-bind=worker.payment.wx.bail></td><td ng-bind=worker.payment.wx.chargeSpe></td><td ng-bind=worker.payment.wx.subtotal style="color: #20a0ff"></td><td ng-bind=worker.payment.subtotal style="color: #20a0ff"></td><td style="color: #20a0ff;cursor: pointer" ng-click=facFinancePrepCtrl.initCondition(worker.workerName)>详情</td></tr><tr class=trHover><td colspan=2>制表人：</td><td colspan=3></td><td colspan=2>复核人：</td><td colspan=3></td><td colspan=2>审核人：</td><td colspan=12></td></tr></table></div></div></div></div></div></div><style>table{\n        border:1px solid #000;\n        text-align: center;\n        margin-top: 20px;\n    }\n    tr{\n        border:1px solid #000;\n    }\n    td{\n        border:1px solid #000;\n        padding:5px; \n    }</style><!-- 纠错操作 --><div class=bgGary ng-show=facFinancePrepCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=facFinancePrepCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{facFinancePrepCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="facFinancePrepCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{facFinancePrepCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="facFinancePrepCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=facFinancePrepCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=facFinancePrepCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=facFinancePrepCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=facFinancePrepCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 预览详情 --><div class=bgGary ng-show=facFinancePrepCtrl.showDetail><div class=middle><div id=box class="form_div center" style="width: 110rem;height: 650px;overflow-y: auto;padding: 20px;padding-bottom: 50px;border-radius: 10px;box-shadow: #ccc 0 0 3px 3px"><div><div class="form_title float_left">详情</div><img src=assets/images/close.png class="float_right pointer" ng-click=facFinancePrepCtrl.close()></div><div class=clear></div><div class=cancelTable><div class="cancelThTr height_40"><div class="cancelTh width_21 ellipsis" style="text-indent: 20px">订单时间</div><!-- <div  class="cancelTh width_10 ellipsis">用户名</div> --><div class="cancelTh width_21 ellipsis">金额</div><div class="cancelTh width_21 ellipsis">详情</div><div class="cancelTh width_21 ellipsis">提交人</div><div class="cancelTh width_21" style="position: relative"><div class=ellipsis style="float:left;max-width: 90px" ng-bind=facFinancePrepCtrl.showPaymentName>支付方式</div><div class=downBtn ng-click="facFinancePrepCtrl.showChoosePaymentBox=!facFinancePrepCtrl.showChoosePaymentBox"></div><div class="form_select_div finance_selectBox" ng-show=facFinancePrepCtrl.showChoosePaymentBox><div class="select_cell pointer ellipsis" ng-repeat="payment in facFinancePrepCtrl.paymentArr" ng-bind=payment.name ng-click=facFinancePrepCtrl.choosePaymentName(payment)>默认按钮</div></div></div></div><div class=cancelTr ng-repeat="preporder in facFinancePrepCtrl.prepordersDetail" style="{{record.state?\'background: #f2f2f2\':\'\'}}"><div class="cancelTd width_21 ellipsis" ng-bind="preporder.createDate | date:\'yyyy-MM-dd HH:mm:ss\'" style="text-indent: 20px"></div><!-- <div class="cancelTd width_10 ellipsis" ng-bind="preporder.name"></div> --><div class="cancelTd width_21 ellipsis" ng-bind=preporder.total_fee></div><div class="cancelTd width_21 ellipsis" ng-bind=preporder.status title={{record.status}}></div><div class="cancelTd width_21 ellipsis" ng-bind=preporder.workerName></div><div class="cancelTd width_21 ellipsis" ng-bind=preporder.payment></div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="facFinancePrepCtrl.pagination.numPages > 1" total-items=facFinancePrepCtrl.pagination.totalItems ng-model=facFinancePrepCtrl.pagination.page items-per-page=facFinancePrepCtrl.pagination.itemsPerPage max-size=facFinancePrepCtrl.pagination.maxSize boundary-links="{{facFinancePrepCtrl.pagination.numPages > 2}}" rotate=false num-pages=facFinancePrepCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=facFinancePrepCtrl.pageChanged()></pagination></div></div></div><!-- 导出xls --><div style="width: 0px;height: 0px;overflow: hidden"><table id=alltable><tr><td ng-bind="facFinancePrepCtrl.venueName+\'的柜员微信/支付宝结算收银报表\'" colspan=5 style="text-align: center"></td></tr><tr><td>柜员</td><td>现金支付</td><td>微信支付</td><td>支付宝支付</td><td>合计</td></tr><tr ng-repeat="worker in facFinancePrepCtrl.result"><td ng-bind=worker.name>1</td><td ng-bind=worker.cash>1</td><td ng-bind=worker.wx>1</td><td ng-bind=worker.alipay>1</td><td ng-bind=worker.all>1</td></tr></table></div><!-- 预览 --><div class=bgGary ng-show=facFinancePrepCtrl.showPreview><div class=middle><div id=box class="form_div center" style="width: 560px;padding: 20px"><div><div class="form_title float_left" ng-bind="facFinancePrepCtrl.venueName+\'的柜员微信/支付宝结算收银报表\'"></div><img src=assets/images/close.png class="float_right pointer" ng-click="facFinancePrepCtrl.showPreview=false"></div><div class=clear></div><div class=form_error_font></div><div class=cancelTable><div class="cancelThTr height_40" style="width: 520px"><div class="cancelTh width_100">柜员</div><div class="cancelTh width_100">微信支付</div><div class="cancelTh width_100">支付宝支付</div><div class="cancelTh width_100">合计</div></div><div class=cancelTr ng-repeat="worker in facFinancePrepCtrl.result" style="width: 520px"><div class="cancelTd width_100" ng-bind=worker.name>1</div><div class="cancelTd width_100" ng-bind=worker.wx>1</div><div class="cancelTd width_100" ng-bind=worker.alipay>1</div><div class="cancelTd width_100" ng-bind=worker.all>1</div></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=facFinancePrepCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=facFinancePrepCtrl.wordOK>22212</div><div class=promptClose ng-click=facFinancePrepCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=facFinancePrepCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=facFinancePrepCtrl.wordERR>22212</div><div class=promptClose ng-click=facFinancePrepCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=facFinancePrepCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=facFinancePrepCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/financemanager/finance/shop/finance-shop.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=fac-finance-cashall>营业收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fac-finance-field>场地/综合服务收入</div><div class="field_titleNormal field_titleChoose">小卖部收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=fac-finance-prep>微信/支付宝</div></div><div class=field_bookBoxPostition><div><div><div class=field_selectBoxOne style="height: auto"><div><div><div class=field_selectName style="text-indent: 0;width: 80px">选择日期</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="facFinanceShopCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="facFinanceShopCtrl.showChooseStartDateBox=!facFinanceShopCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=facFinanceShopCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=facFinanceShopCtrl.closeChooseStartDateBox() ng-date=facFinanceShopCtrl.startDate></datetimepick></div></div><div class=float_left style="height: 40px;line-height: 40px;padding: 0 10px">至</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="facFinanceShopCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="facFinanceShopCtrl.showChooseEndDateBox=!facFinanceShopCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=facFinanceShopCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=facFinanceShopCtrl.closeChooseEndDateBox() ng-date=facFinanceShopCtrl.endDate></datetimepick></div></div><div ng-show="facFinanceShopCtrl.searchVenueIdArr.length>0"><div class="button2_normal float_right pointer" style="margin:0 20px" ng-click=facFinanceShopCtrl.export()>导出</div></div><div style=clear:both></div></div><div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择场馆</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="venue in facFinanceShopCtrl.venues" ng-click="(venue.image==\'manyChoose_imageG\')?\'\':facFinanceShopCtrl.chooseVenueName(venue)"><div class="singleChoose_imageBox {{venue.image}} {{venue.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=venue.name style="{{venue.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择提交人</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="worker in facFinanceShopCtrl.workers" ng-click="(worker.image==\'manyChoose_imageG\')?\'\':facFinanceShopCtrl.chooseWorkerName(worker)"><div class="singleChoose_imageBox {{worker.image}} {{worker.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=worker.name style="{{worker.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div style=clear:both></div></div></div></div></div><table id=alltable style="width: 106rem"><tr><td colspan=11><span>小卖部消费汇总表：</span> <span ng-bind=facFinanceShopCtrl.venueName></span></td></tr><tr><td colspan=11><span>时间范围：</span> <span ng-bind=facFinanceShopCtrl.dateName></span></td></tr><tr><td>柜员名</td><td>现金支付</td><td>微信支付</td><td>支付宝支付</td><td>转账支付</td><td>支票支付</td><td>POS机支付</td><td>余额支付</td><td>退款</td><td style="color: #20a0ff">合计</td><td>详情</td></tr><tr class=trHover ng-repeat="worker in facFinanceShopCtrl.records"><td ng-bind=worker.workerName></td><td ng-bind=worker.payment.cash></td><td ng-bind=worker.payment.wx></td><td ng-bind=worker.payment.alipay></td><td ng-bind=worker.payment.card></td><td ng-bind=worker.payment.check></td><td ng-bind=worker.payment.pos></td><td ng-bind=worker.payment.member></td><td ng-bind=worker.payment.refund></td><td ng-bind=worker.payment.subtotal style="color: #20a0ff"></td><td style="color: #20a0ff;cursor: pointer" ng-click=facFinanceShopCtrl.initCondition(worker._worker,worker.workerName)>详情</td></tr><tr class=trHover><td colspan=1>制表人：</td><td colspan=1></td><td colspan=1>复核人：</td><td colspan=1></td><td colspan=1>审核人：</td><td colspan=6></td></tr></table></div></div></div></div></div></div><style>table{\n        border:1px solid #000;\n        text-align: center;\n        margin-top: 20px;\n    }\n    tr{\n        border:1px solid #000;\n    }\n    td{\n        border:1px solid #000;\n        padding:5px; \n    }</style><!-- 纠错操作 --><div class=bgGary ng-show=facFinanceShopCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=facFinanceShopCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{facFinanceShopCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="facFinanceShopCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{facFinanceShopCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="facFinanceShopCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=facFinanceShopCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=facFinanceShopCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=facFinanceShopCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=facFinanceShopCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 预览详情 --><div class=bgGary ng-show=facFinanceShopCtrl.showDetail><div class=middle><div id=box class="form_div center" style="width: 63rem;max-height: 650px;overflow-y: auto;padding: 20px;padding-bottom: 50px;border-radius: 10px;box-shadow: #ccc 0 0 3px 3px"><div><div class="form_title float_left">小卖部消费明细表</div><img src=assets/images/close.png class="float_right pointer" ng-click=facFinanceShopCtrl.close()></div><div class=clear></div><table id=table style="width: 60rem"><tr><td colspan=6><span ng-bind=facFinanceShopCtrl.workerName></span> <span>的小卖部消费明细表：</span> <span ng-bind=facFinanceShopCtrl.venueName></span></td></tr><tr><td colspan=6><span>时间范围：</span> <span ng-bind=facFinanceShopCtrl.dateName></span></td></tr><tr><td colspan=2>商品名称</td><td colspan=1>余额支付</td><td colspan=1>非余额支付</td><td colspan=1>数量</td><td colspan=1>金额</td></tr><tr class=trHover ng-repeat="shop in facFinanceShopCtrl.shopDetails"><td colspan=2 ng-bind=shop.name></td><td colspan=1 ng-bind=shop.member></td><td colspan=1 ng-bind=shop.noMember></td><td colspan=1 ng-bind=shop.quantity></td><td colspan=1 ng-bind=shop.subTotal></td></tr><tr class=trHover><td style="width: 10rem" colspan=1>制表人：</td><td style="width: 10rem" colspan=1 ng-bind=facFinanceShopCtrl.workerName></td><td style="width: 10rem" colspan=1>复核人：</td><td style="width: 10rem" colspan=1></td><td style="width: 10rem" colspan=1>审核人：</td><td style="width: 10rem" colspan=1></td></tr></table><div><div class="button2_normal pointer" style="margin-top:20px;width: 80px" ng-click="facFinanceShopCtrl.export(\'table\')">导出</div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=facFinanceShopCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=facFinanceShopCtrl.wordOK>22212</div><div class=promptClose ng-click=facFinanceShopCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=facFinanceShopCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=facFinanceShopCtrl.wordERR>22212</div><div class=promptClose ng-click=facFinanceShopCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=facFinanceShopCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=facFinanceShopCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/financemanager/setting/setting-person.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style=padding:30px;margin-left:170px;min-width:600px><div style=font-size:16px;margin-left:30px>个人信息</div><div class=form_first_view><div class="form_key float_left form_key_margin" style=margin-right:20px;width:84px;text-align:right>账号名称</div><div class="form_value float_left form_value_width" ng-bind=facSettingPersonCtrl.account></div></div><div class=clear></div><div style=margin-top:20px><div class="form_key float_left form_key_margin" style=margin-right:20px;width:84px;text-align:right>原密码</div><input class="form_value float_left form_value_width" placeholder=请输入原密码 ng-model=facSettingPersonCtrl.oldPassword ng-change="facSettingPersonCtrl.judge()"></div><div class=clear></div><div style=margin-top:20px><div class="form_key float_left form_key_margin" style=margin-right:20px;width:84px;text-align:right>新密码</div><input class="form_value float_left form_value_width" placeholder=请输入新密码 ng-model=facSettingPersonCtrl.newPassword ng-change="facSettingPersonCtrl.judge()"></div><div class=clear></div><div class="button2_normal float_left" ng-show=!facSettingPersonCtrl.saveFlag style="background:#ccc;margin:30px 0 0 104px">保存</div><div class="button2_normal float_left" ng-show=facSettingPersonCtrl.saveFlag style="margin:30px 0 0 104px" ng-click=facSettingPersonCtrl.save()>保存</div><div class="button2_normal float_left" style="background:#fff;margin:30px 0 0 20px;border:1px solid #ccc;color:#99a9bf" ng-click=facSettingPersonCtrl.logout()>退出登录</div></div><!-- 成功提示弹框 --><div class=bgGary2 ng-show=facSettingPersonCtrl.succeedFlag><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/rectangle2.png"><div class="float_left form_marginL_15px">修改完成</div></div></div><div class=bgGary ng-show=facSettingPersonCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px">请正确输入密码</div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/main/main.html", ""), a.put("app/organization/card/banka.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div style="padding:0px 0 0 200px;min-width:900px"><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=org-card>实体卡管理</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-entity>实体卡库存</div><div class="field_titleNormal field_titleChoose">实体卡办理记录</div><div class=clear></div></div><div style="margin:20px 0 0 30px"><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="orgBankaCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="orgBankaCtrl.showChooseStartDateBox=!orgBankaCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=orgBankaCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=orgBankaCtrl.getRecord() ng-date=orgBankaCtrl.startDate></datetimepick></div></div><div class=float_left style="height: 40px;line-height: 40px;padding: 0 10px">至</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="orgBankaCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="orgBankaCtrl.showChooseEndDateBox=!orgBankaCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=orgBankaCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=orgBankaCtrl.getRecord() ng-date=orgBankaCtrl.endDate></datetimepick></div></div><div><div class="button2_normal float_left" style="margin:0 20px" ng-click=orgBankaCtrl.getRecord()>搜索</div></div><div style=clear:both></div></div><div style="margin:0 30px"><table style="margin:20px 30px 0 0px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">日期</td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">办理人姓名</td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">会员号</td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">卡号</td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作人员</td></tr><tr ng-repeat="record in orgBankaCtrl.records" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm\'"></td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="record.memberName?record.memberName:\'暂无\'"></td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="record.memberNo?record.memberNo:\'暂无\'"></td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="record.cardNo?record.cardNo:\'暂无\'"></td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record.workerName></td></tr></table></div><pagination style="margin:20px 0 0 30px" ng-if="orgBankaCtrl.pagination.numPages > 1" total-items=orgBankaCtrl.pagination.totalItems ng-model=orgBankaCtrl.pagination.page items-per-page=orgBankaCtrl.pagination.itemsPerPage max-size=orgBankaCtrl.pagination.maxSize boundary-links="{{orgBankaCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgBankaCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgBankaCtrl.pageChanged()></pagination></div></div></div><div class=bgGary ng-show=orgBankaCtrl.cardFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left" ng-bind=orgBankaCtrl.title>商品退款</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgBankaCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">卡片数量</div><input class="form_value float_left form_value_width" placeholder=请输入数字 ng-model=orgBankaCtrl.num></div><div class=clear></div><div class=form_first_view ng-show=orgBankaCtrl.objectFlag><div class="form_key float_left form_key_margin" ng-bind=orgBankaCtrl.object>发放对象</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!orgBankaCtrl.chooseObjectFlag,\'select_foucs\':orgBankaCtrl.chooseObjectFlag}" ng-click="orgBankaCtrl.chooseObjectFlag = !orgBankaCtrl.chooseObjectFlag"><div class="form_down_icon form_width_354 form_select_value_choose" style=width:345px ng-bind=orgBankaCtrl.objectName></div><div class="form_select_div form_width_354" style=width:345px ng-show=orgBankaCtrl.chooseObjectFlag><div ng-click=orgBankaCtrl.chooseObject(object) class="select_cell pointer" ng-repeat="object in orgBankaCtrl.users" ng-bind=object.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgBankaCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=orgBankaCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgBankaCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgBankaCtrl.wordOK>22212</div><div class=promptClose ng-click="orgBankaCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgBankaCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgBankaCtrl.wordERR>22212</div><div class=promptClose ng-click="orgBankaCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgBankaCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=orgBankaCtrl.wordWARN>22212</div><div class=promptClose ng-click=orgBankaCtrl.closePrompt()></div></div></div></div>'), a.put("app/organization/card/card-entity.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div style="padding:0px 0 0 200px;min-width:900px"><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=org-card>实体卡管理</div><div class="field_titleNormal field_titleChoose">实体卡库存</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-banka>实体卡办理记录</div><div class=clear></div></div><div style="margin:0 0 0 30px"><div style="margin:40px 20px 0 0;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;min-width:106rem"><div class=float_left style=width:30rem;padding-left:20px>姓名</div><div class=float_left style=width:30rem>职位</div><div class=float_left style=width:28rem>库存</div></div><div style="height:48px;line-height:48px;border-bottom:1px solid #ddd;min-width:106rem;margin-right:20px" ng-repeat="user in orgEntityCtrl.users"><div class="float_left ellipsis" style=width:30rem;padding-left:20px ng-bind=user.name>预订时间</div><div class="float_left ellipsis" style=width:30rem>前台收银</div><div class="float_left ellipsis" style=width:28rem ng-bind=user.cardNum>预订时间</div></div><div class=select_div ng-show=orgEntityCtrl.typeFlag style=width:20rem;top:230px;left:430px><div class="select_choose ellipsis pointer" ng-click=orgEntityCtrl.chooseClass(class)>全部</div></div></div><pagination style="margin:20px 0 0 30px" ng-if="orgEntityCtrl.pagination.numPages > 1" total-items=orgEntityCtrl.pagination.totalItems ng-model=orgEntityCtrl.pagination.page items-per-page=orgEntityCtrl.pagination.itemsPerPage max-size=orgEntityCtrl.pagination.maxSize boundary-links="{{orgEntityCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgEntityCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgEntityCtrl.pageChanged()></pagination></div></div></div><div class=bgGary ng-show=orgEntityCtrl.cardFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left" ng-bind=orgEntityCtrl.title>商品退款</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgEntityCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">卡片数量</div><input class="form_value float_left form_value_width" placeholder=请输入数字 ng-model=orgEntityCtrl.num></div><div class=clear></div><div class=form_first_view ng-show=orgEntityCtrl.objectFlag><div class="form_key float_left form_key_margin" ng-bind=orgEntityCtrl.object>发放对象</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!orgEntityCtrl.chooseObjectFlag,\'select_foucs\':orgEntityCtrl.chooseObjectFlag}" ng-click="orgEntityCtrl.chooseObjectFlag = true"><div class="form_down_icon form_width_354 form_select_value_choose" style=width:345px ng-bind=orgEntityCtrl.objectName></div><div class="form_select_div form_width_354" style=width:345px ng-show=orgEntityCtrl.chooseObjectFlag><div ng-click=orgEntityCtrl.chooseObject(object) class="select_cell pointer" ng-repeat="object in orgEntityCtrl.users" ng-bind=object.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgEntityCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=orgEntityCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgEntityCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgEntityCtrl.wordOK>22212</div><div class=promptClose ng-click="orgEntityCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgEntityCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgEntityCtrl.wordERR>22212</div><div class=promptClose ng-click="orgEntityCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgEntityCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=orgEntityCtrl.wordWARN>22212</div><div class=promptClose ng-click=orgEntityCtrl.closePrompt()></div></div></div></div>'),
            a.put("app/organization/card/card.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div style="padding:0px 0 0 200px;min-width:900px"><div class=field_titleBox><div class="field_titleNormal field_titleChoose">实体卡管理</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-entity>实体卡库存</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-banka>实体卡办理记录</div><div class=clear></div></div><div style="margin:20px 30px 0 30px"><div class="button2_normal float_left" ng-click="orgCardCtrl.cardFunction(\'enter\')" style="background:#fff;color:#000;margin-right:10px;border:1px solid #ddd">卡入库</div><div class="button2_normal float_left" ng-click="orgCardCtrl.cardFunction(\'send\')" style="background:#fff;margin-right:10px;color:#000;border:1px solid #ddd">卡发放</div><div class="button2_normal float_left" ng-click="orgCardCtrl.cardFunction(\'re\')" style="background:#fff;margin-right:10px;color:#000;border:1px solid #ddd">卡回收</div><div class="button2_normal float_left" ng-click="orgCardCtrl.cardFunction(\'bad\')" style="background:#fff;color:#000;border:1px solid #ddd">卡报销</div><div class=clear></div><table style="margin:20px 30px 0 0px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">日期</td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">数量</td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">详情</td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">总库库存</td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作人员</td></tr><tr ng-repeat="record in orgCardCtrl.records" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm\'"></td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record.editNum></td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record.describtion></td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record.total></td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record.workerName></td></tr></table><pagination style="margin:20px 0 0 0" ng-if="orgCardCtrl.pagination.numPages > 1" total-items=orgCardCtrl.pagination.totalItems ng-model=orgCardCtrl.pagination.page items-per-page=orgCardCtrl.pagination.itemsPerPage max-size=orgCardCtrl.pagination.maxSize boundary-links="{{orgCardCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgCardCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgCardCtrl.pageChanged()></pagination></div></div></div></div><div class=bgGary ng-show=orgCardCtrl.cardFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left" ng-bind=orgCardCtrl.title>商品退款</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgCardCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">卡片数量</div><input class="form_value float_left form_value_width" placeholder=请输入数字 ng-model=orgCardCtrl.num></div><div class=clear></div><div class=form_first_view ng-show=orgCardCtrl.objectFlag><div class="form_key float_left form_key_margin" ng-bind=orgCardCtrl.object>发放对象</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!orgCardCtrl.chooseObjectFlag,\'select_foucs\':orgCardCtrl.chooseObjectFlag}" ng-click="orgCardCtrl.chooseObjectFlag = !orgCardCtrl.chooseObjectFlag"><div class="form_down_icon form_width_354 form_select_value_choose" style=width:345px ng-bind=orgCardCtrl.objectName></div><div class="form_select_div form_width_354" style=width:345px ng-show=orgCardCtrl.chooseObjectFlag><div ng-click=orgCardCtrl.chooseObject(object) class="select_cell pointer" ng-repeat="object in orgCardCtrl.users" ng-bind=object.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgCardCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=orgCardCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgCardCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgCardCtrl.wordOK>22212</div><div class=promptClose ng-click="orgCardCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgCardCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgCardCtrl.wordERR>22212</div><div class=promptClose ng-click="orgCardCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgCardCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=orgCardCtrl.wordWARN>22212</div><div class=promptClose ng-click=orgCardCtrl.closePrompt()></div></div></div></div>'), a.put("app/organization/card/chongzhi.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div style="padding:0px 0 0 200px;min-width:900px"><div class="form_value form_width_250 float_left" style="margin:20px 0 0 30px"><input style=border:0;height:32px;width:200px placeholder=根据姓名搜索记录 ng-model="orgChongzhiCtrl.searchName"> <img src=assets/images/search.png class="student_search pointer" ng-click="orgChongzhiCtrl.getRecord()"></div><div style=clear:both></div><div style="margin:0 30px"><table style="margin:20px 30px 0 0px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">充值时间</td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">充值卡卡号</td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">金额</td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">充值类型</td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">会员姓名</td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">手机</td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作人</td></tr><tr ng-repeat="record in orgChongzhiCtrl.records" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm\'"></td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="record.chargeCardNo?record.chargeCardNo:\'暂无\'"></td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record.price></td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="record.chargeType==\'cash\'?\'现金\':\'虚拟\'"></td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record._member.name></td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record._member.tel></td><td style="width:14.3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record.workerName></td></tr></table></div><pagination style="margin:20px 0 0 30px" ng-if="orgChongzhiCtrl.pagination.numPages > 1" total-items=orgChongzhiCtrl.pagination.totalItems ng-model=orgChongzhiCtrl.pagination.page items-per-page=orgChongzhiCtrl.pagination.itemsPerPage max-size=orgChongzhiCtrl.pagination.maxSize boundary-links="{{orgChongzhiCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgChongzhiCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgChongzhiCtrl.pageChanged()></pagination></div></div></div><div class=bgGary ng-show=orgChongzhiCtrl.cardFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left" ng-bind=orgChongzhiCtrl.title>商品退款</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgChongzhiCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">卡片数量</div><input class="form_value float_left form_value_width" placeholder=请输入数字 ng-model=orgChongzhiCtrl.num></div><div class=clear></div><div class=form_first_view ng-show=orgChongzhiCtrl.objectFlag><div class="form_key float_left form_key_margin" ng-bind=orgChongzhiCtrl.object>发放对象</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!orgChongzhiCtrl.chooseObjectFlag,\'select_foucs\':orgChongzhiCtrl.chooseObjectFlag}" ng-click="orgChongzhiCtrl.chooseObjectFlag = !orgChongzhiCtrl.chooseObjectFlag"><div class="form_down_icon form_width_354 form_select_value_choose" style=width:345px ng-bind=orgChongzhiCtrl.objectName></div><div class="form_select_div form_width_354" style=width:345px ng-show=orgChongzhiCtrl.chooseObjectFlag><div ng-click=orgChongzhiCtrl.chooseObject(object) class="select_cell pointer" ng-repeat="object in orgChongzhiCtrl.users" ng-bind=object.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgChongzhiCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=orgChongzhiCtrl.close()>取消</div><div class=clear></div></div></div></div></div>'), a.put("app/organization/card/dummy-enter.html", '<div style="min-width: 900px"><div class="button2_normal float_left" style="margin:20px 20px 0 0" ngf-select=orgDummyCtrl.uploadExcel() ng-model=orgDummyCtrl.execlFile ngf-pattern="\'.xlsx\'" ngf-accept="\'.xlsx\'">导入xls</div><a href=assets/docs/demo_vir.xlsx target=_blank><div class="button2_normal float_left" style="margin:20px 20px 0 0;background:#fff;color:#999;border:1px solid #999">下载xls模板</div></a><div class="button2_normal float_right" ng-show=orgDummyCtrl.applyFlagE style="margin:20px 0 0 0" ng-click=orgDummyCtrl.toastPay()>确认充值</div><div class="button2_normal float_right" ng-show=!orgDummyCtrl.applyFlagE style="margin:20px 0 0 0;background:#999">确认充值</div></div><div class=clear></div><div style=z-index:888><div><div style="margin-top:30px;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;padding-left:20px;min-width:106rem"><div class="float_left ellipsis" style=width:3rem><img ng-show=orgDummyCtrl.selectFlagE ng-click=orgDummyCtrl.selectE(false) class=pointer src="assets/images/select_box_on.png"> <img ng-show=!orgDummyCtrl.selectFlagE ng-click=orgDummyCtrl.selectE(true) class=pointer src="assets/images/select_box.png"> <span></span></div><div class="float_left ellipsis" style=width:25rem>姓名</div><div class="float_left ellipsis" style=width:25rem>手机号</div><div class="float_left ellipsis" style=width:25rem>充值金额</div></div><div style="height:48px;line-height:48px;border-bottom:1px solid #ddd;padding-left:20px;min-width:106rem" ng-repeat="member in orgDummyCtrl.eMembers"><div class="float_left ellipsis" style=width:3rem><img ng-show=member.select ng-click=orgDummyCtrl.changeSelectE(member) class=pointer src="assets/images/select_box_on.png"> <img ng-show=!member.select ng-click=orgDummyCtrl.changeSelectE(member) class=pointer src="assets/images/select_box.png"></div><div class="float_left ellipsis" style=width:25rem ng-bind="member.name?member.name:\'暂无\'">2</div><div class="float_left ellipsis" ng-show=member.flag style=width:25rem;color:red ng-bind="member.tel?member.tel:\'暂无\'">2</div><div class="float_left ellipsis" ng-show=!member.flag style=width:25rem ng-bind="member.tel?member.tel:\'暂无\'">2</div><div class="float_left ellipsis" style=width:25rem><span ng-bind="member.total?member.total:\'暂无\'"></span><span style=color:#00a1ff;margin-left:10px class=pointer ng-click=orgDummyCtrl.changePrice(member)>修改金额</span></div></div><div ng-show="orgDummyCtrl.eMembers.length>0" style=margin-top:20px;font-size:18px><span>总计余额:</span> <span ng-bind=orgDummyCtrl.t>33</span></div></div><div class=bgGary ng-show=orgDummyCtrl.payFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">修改金额</div><img src=assets/images/close.png class="float_right pointer" ng-click=orgDummyCtrl.close()></div><div class=clear></div><div style=margin-top:10px><div><div class="form_key float_left form_key_margin">修改金额</div><input class="form_value float_left form_value_width" placeholder=请输入修改金额 ng-model=orgDummyCtrl.cp></div><div class=clear></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgDummyCtrl.edit()>确认修改</div><div class="button_normal float_right" ng-click=orgDummyCtrl.close()>取消</div><div class=clear></div></div></div></div></div></div>'), a.put("app/organization/card/dummy-normal.html", '<div style="margin-top:20px;min-width: 900px"><div class="form_value form_width_250 float_left"><input style=border:0;height:32px;width:200px placeholder=搜索会员(手机号/姓名/卡号) ng-model="orgDummyCtrl.searchName"> <img src=assets/images/search.png class=pointer style="margin:0 0 5px 5px" ng-click="orgDummyCtrl.getMemberCard()"></div><div class="button2_normal float_right" ng-show=orgDummyCtrl.applyFlag style="margin:10px 0 0 0" ng-click="orgDummyCtrl.payFlag = true">充值</div><div class="button2_normal float_right" ng-show=!orgDummyCtrl.applyFlag style="margin:10px 0 0 0;background:#999">充值</div><div class=clear></div></div><div class=clear></div><div style=z-index:888><div><table style="margin:20px 30px 0 0px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><img ng-show=orgDummyCtrl.selectFlag ng-click=orgDummyCtrl.select(false) class=pointer src="assets/images/select_box_on.png"><img ng-show=!orgDummyCtrl.selectFlag ng-click=orgDummyCtrl.select(true) class=pointer src="assets/images/select_box.png"></td><td style="width:19%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">姓名</td><td style="width:19%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">手机号</td><td style="width:19%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><span ng-bind=orgDummyCtrl.type>会员类型</span><img src=assets/images/arrow.png style="width:13px"></td><td style="width:19%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">虚拟账户余额</td><td style="width:19%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">过期日期</td></tr><tr ng-repeat="member in orgDummyCtrl.members" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:3%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><img ng-show=member.select ng-click=orgDummyCtrl.changeSelect(member) class=pointer src="assets/images/select_box_on.png"> <img ng-show=!member.select ng-click=orgDummyCtrl.changeSelect(member) class=pointer src="assets/images/select_box.png"></td><td style="width:19%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=member.name></td><td style="width:19%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=member.tel></td><td style="width:19%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="member.type?member.type:\'暂无\'"></td><td style="width:19%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=member.virtualAccount.total></td><td style="width:19%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="member.virtualAccount.expires_in?(member.virtualAccount.expires_in | date:\'yyyy-MM-dd\'):\'暂无\'"></td></tr></table><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgDummyCtrl.pagination.numPages > 1" total-items=orgDummyCtrl.pagination.totalItems ng-model=orgDummyCtrl.pagination.page items-per-page=orgDummyCtrl.pagination.itemsPerPage max-size=orgDummyCtrl.pagination.maxSize boundary-links="{{orgDummyCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgDummyCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgDummyCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=orgDummyCtrl.payFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">充值</div><img src=assets/images/close.png class="float_right pointer" ng-click=orgDummyCtrl.close()></div><div class=clear></div><div style="margin-top: 10px" ng-show=orgDummyCtrl.showCodeBox><div><div class="form_key float_left form_key_margin">充值金额</div><input class="form_value float_left form_value_width" placeholder=请输入充值金额 ng-model=orgDummyCtrl.price></div><div class=clear></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgDummyCtrl.sure()>确认充值</div><div class="button_normal float_right" ng-click=orgDummyCtrl.close()>取消</div><div class=clear></div></div></div></div></div></div>'), a.put("app/organization/card/dummy-record.html", '<div><div style="margin-top: 20px;min-width:106rem"><table style="margin:20px 30px 0 0px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:15%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">日期</td><td style="width:15%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">充值方式</td><td style="width:25%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">充值对象</td><td style="width:15%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">充值总金额</td><td style="width:15%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作人</td><td style="width:15%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr ng-repeat="record in orgDummyCtrl.records" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:15%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm\'"></td><td style="width:15%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="record.detail.length == 1?\'单次\':\'批量\'"></td><td style="width:25%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record.name title={{record.name}}></td><td style="width:15%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="record.p+\'(\'+record.detail.length+\'人)\'"></td><td style="width:15%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record.workerName></td><td style="width:15%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><span ng-show=!record.isCancel ng-click=orgDummyCtrl.cancel(record) style=color:#00a1ff>撤销</span><span ng-show=record.isCancel>已撤销</span></td></tr></table></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgDummyCtrl.pagination.numPages > 1" total-items=orgDummyCtrl.pagination.totalItems ng-model=orgDummyCtrl.pagination.page items-per-page=orgDummyCtrl.pagination.itemsPerPage max-size=orgDummyCtrl.pagination.maxSize boundary-links="{{orgDummyCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgDummyCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgDummyCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=orgDummyCtrl.noFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgDummyCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>确认需要撤销该次充值？</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgDummyCtrl.close()>不撤销了</div><div class="button_normal float_right" ng-click=orgDummyCtrl.no()>继续撤销</div><div class=clear></div></div></div></div></div>'), a.put("app/organization/card/dummy.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal {{orgDummyCtrl.titleState==\'normal\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="orgDummyCtrl.changeTitle(\'normal\')">常规充值</div><div class="field_titleNormal {{orgDummyCtrl.titleState==\'enter\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="orgDummyCtrl.changeTitle(\'enter\')">批量导入充值</div><div class="field_titleNormal {{orgDummyCtrl.titleState==\'record\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="orgDummyCtrl.changeTitle(\'record\')">充值记录</div></div><div class=field_bookBoxPostition ui-view=""></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgDummyCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgDummyCtrl.wordOK>22212</div><div class=promptClose ng-click="orgDummyCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgDummyCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgDummyCtrl.wordERR>22212</div><div class=promptClose ng-click="orgDummyCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgDummyCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=orgDummyCtrl.wordWARN>22212</div><div class=promptClose ng-click="orgDummyCtrl.promptWARN = false"></div></div></div></div><div class=bgGary ng-show=orgDummyCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgDummyCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4 ng-bind=orgDummyCtrl.pWord>是否删除原来的列表内容?</div></div><div class=clear></div></div><div class=form_submit ng-show=!orgDummyCtrl.pFlag><div class="button2_normal float_right form_create_view" ng-click=orgDummyCtrl.delete(false)>不删了</div><div class="button_normal float_right" ng-click=orgDummyCtrl.delete(true)>删除</div><div class=clear></div></div><div class=form_submit ng-show=orgDummyCtrl.pFlag><div class="button2_normal float_right form_create_view" ng-click=orgDummyCtrl.judgePay()>是的</div><div class="button_normal float_right" ng-click="orgDummyCtrl.deleteFlag = false">不充了</div><div class=clear></div></div></div></div></div>'), a.put("app/organization/field/cancel/field-book-cancel.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=org-field-book.once>单次预订</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-field-longbook>长包预订</div><div class="field_titleNormal field_titleChoose">预订撤销</div></div><div class=field_bookBoxPostition><div style="margin-top: 20px"><div class=field_selectBox style="position: relative;width:auto;width: 106rem;height: 122px;min-width:1500px;background: #EFF2F7;border:1px solid #ccc;border-radius: 5px"><div style="float:left;width: 30rem;min-width:420px;height: 120px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">预订人：</div><div style="float: left;margin-top: 12px;background: #fff"><div style="float: left" id=search class="xt_searchBox float_left"><input class=xt_searchInput style="text-indent: 10px" placeholder=预订人名称/手机号 ng-model=orgFieldCancelBookCtrl.searchOrderName><div class=xt_searchImage ng-click=orgFieldCancelBookCtrl.searchOrder()></div></div><div class=clear></div></div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">备注：</div><div style="float: left;margin-top: 12px;background: #fff"><div style="float: left" id=search class="xt_searchBox float_left"><input class=xt_searchInput style="text-indent: 10px" placeholder=请输入备注 ng-model=orgFieldCancelBookCtrl.searchOrderRemark><div class=xt_searchImage ng-click=orgFieldCancelBookCtrl.searchOrder()></div></div><div class=clear></div></div></div></div><div style="float:left;width: 30rem;min-width:420px;height: 120px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">场次时间：</div><div class="input_calendar float_left" style="margin-top: 12px;background: #fff"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="orgFieldCancelBookCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="orgFieldCancelBookCtrl.showChooseStartDateBox=!orgFieldCancelBookCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=orgFieldCancelBookCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=orgFieldCancelBookCtrl.closeChooseStartDateBox() ng-date=orgFieldCancelBookCtrl.startDate></datetimepick></div></div><div class="input_calendar float_left" style="margin-top: 12px;background: #fff;margin-left: 10px"><div class=input_calendar_showBox><div class=input_calendar_show style="{{orgFieldCancelBookCtrl.endDate==\'结束时间\'?\'\':\'color:#1f2d3d\';}}" ng-bind="orgFieldCancelBookCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="orgFieldCancelBookCtrl.showChooseEndDateBox=!orgFieldCancelBookCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=orgFieldCancelBookCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=orgFieldCancelBookCtrl.closeChooseEndDateBox() ng-date=orgFieldCancelBookCtrl.endDate></datetimepick></div></div><div class=clear></div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">显示设置：</div><div><div style="width: 16px;height: 16px;float: left;border-radius: 5px;margin-top: 22px;cursor: pointer" class={{orgFieldCancelBookCtrl.nowImage}} ng-click=orgFieldCancelBookCtrl.chooseNowOrderList()></div><div style="float: left;color:#8F99A6;margin-left: 10px">显示当前时间</div></div><div style="float: left;color:#8F99A6;width: 80px;margin-left: 20px">显示条数：</div><div style="float: left;color:#20a0ff"><div style="float: left;position: relative"><div style="text-align: center;padding: 0 3px" ng-bind=orgFieldCancelBookCtrl.showPageName>50</div><div style="position: absolute;top:40px;width: 40px;min-height: 24px;border:1px solid #ccc;background: #fff;z-index: 60" ng-show=orgFieldCancelBookCtrl.showChoosePageBox><div style="height: 24px;line-height: 24px;text-align: center;cursor: pointer" ng-repeat="page in orgFieldCancelBookCtrl.pageArr" ng-bind=page.name ng-click=orgFieldCancelBookCtrl.choosePageName(page)>10</div></div></div><div style="float: left;background: url(../../assets/images/downsmall.png) no-repeat 0px 26.5px;width: 12px;height: 60px;cursor: pointer" ng-click="orgFieldCancelBookCtrl.showChoosePageBox=!orgFieldCancelBookCtrl.showChoosePageBox"></div></div><div class=clear></div></div></div><div style="float:left;width: 45rem;min-width:480px;height: 120px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 120px">场馆&项目&场地：</div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgFieldCancelBookCtrl.showVenueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgFieldCancelBookCtrl.showVenueName ng-click="orgFieldCancelBookCtrl.showChooseVenueBox=!orgFieldCancelBookCtrl.showChooseVenueBox">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=orgFieldCancelBookCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in orgFieldCancelBookCtrl.venues" ng-bind=venue.name ng-click=orgFieldCancelBookCtrl.chooseVenueName(venue)>默认按钮</div></div></div><div class="select fbonce_select" style="float: left;margin-top: 12px;background: #fff"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgFieldCancelBookCtrl.showItemName==\'选择项目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgFieldCancelBookCtrl.showItemName ng-click="orgFieldCancelBookCtrl.showChooseItemBox=!orgFieldCancelBookCtrl.showChooseItemBox">项目1</div></div><div class=form_select_div style="position: relative;z-index: 200" ng-show=orgFieldCancelBookCtrl.showChooseItemBox><div class="select_cell pointer ellipsis" ng-repeat="item in orgFieldCancelBookCtrl.items" ng-bind=item.name ng-click=orgFieldCancelBookCtrl.chooseItemName(item)>默认按钮</div></div></div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgFieldCancelBookCtrl.showFieldName==\'选择场地\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgFieldCancelBookCtrl.showFieldName ng-click="orgFieldCancelBookCtrl.showChooseFieldBox=!orgFieldCancelBookCtrl.showChooseFieldBox">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=orgFieldCancelBookCtrl.showChooseFieldBox><div class="select_cell pointer ellipsis" ng-repeat="field in orgFieldCancelBookCtrl.fields" ng-bind=field.name ng-click=orgFieldCancelBookCtrl.chooseFieldName(field)>默认按钮</div></div></div><div class=clear></div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div class="button2_normal float_left" ng-click=orgFieldCancelBookCtrl.openCancelOrders() ng-show="orgFieldCancelBookCtrl.cancelOrderIdArr.length>0" style="margin-top: 12px">批量退订</div><div class="button2_normal float_left" style="background: #c0ccda;cursor: text;margin-top: 12px" ng-hide="orgFieldCancelBookCtrl.cancelOrderIdArr.length>0">批量退订</div></div></div></div><div class=clear></div></div><div><div class=cancelTable style="min-width: 1280px;width: 113rem;position: relative;z-index: 5"><div class="cancelThTr height_40"><div class="cancelTh ellipsis" style=width:4rem><div style="width: 16px;height: 16px;border-radius: 5px;margin-top: 7px;margin-left: 12px;cursor: pointer" class={{orgFieldCancelBookCtrl.allImage}} ng-click=orgFieldCancelBookCtrl.chooseCancelOrderAll()></div></div><div class="cancelTh ellipsis" style=width:9rem>预订人</div><div class="cancelTh ellipsis" style=width:14rem ng-click="orgFieldCancelBookCtrl.sortBy(orgFieldCancelBookCtrl.sortByKey==\'timeUp\'?\'timeDown\':\'timeUp\')"><div class=ellipsis style="float:left;max-width: 90px">场次时间</div><div class=upAndDown></div></div><div class=cancelTh style="width:12rem;position: relative"><div ng-click="orgFieldCancelBookCtrl.showChooseStateBox=!orgFieldCancelBookCtrl.showChooseStateBox"><div class=ellipsis style="float:left;max-width: 90px" ng-bind=orgFieldCancelBookCtrl.showStateName>订单状态</div><div class=downBtn></div></div><div class="form_select_div finance_selectBox" ng-show=orgFieldCancelBookCtrl.showChooseStateBox><div class="select_cell pointer ellipsis" ng-repeat="state in orgFieldCancelBookCtrl.states" ng-bind=state.name ng-click=orgFieldCancelBookCtrl.chooseStateName(state)>默认按钮</div></div></div><div class="cancelTh ellipsis" style=width:10rem ng-click="orgFieldCancelBookCtrl.sortBy(orgFieldCancelBookCtrl.sortByKey==\'orderUp\'?\'orderDown\':\'orderUp\')"><div class=ellipsis style="float:left;max-width: 90px">订单时间</div><div class=upAndDown></div></div><div class="cancelTh ellipsis" style=width:9rem>场馆名称</div><div class="cancelTh ellipsis" style=width:9rem>场地名称</div><div class="cancelTh ellipsis" style=width:9rem>备注</div><div class="cancelTh ellipsis" style=width:7rem><div ng-click="orgFieldCancelBookCtrl.showChooseFromBox=!orgFieldCancelBookCtrl.showChooseFromBox"><div class=ellipsis style="float:left;max-width: 90px" ng-bind=orgFieldCancelBookCtrl.showFromName>订单来源</div><div class=downBtn></div></div><div class="form_select_div finance_selectBox" ng-show=orgFieldCancelBookCtrl.showChooseFromBox><div class="select_cell pointer ellipsis" ng-repeat="from in orgFieldCancelBookCtrl.froms" ng-bind=from.name ng-click=orgFieldCancelBookCtrl.chooseFromName(from)>默认按钮</div></div></div><div class="cancelTh ellipsis" style=width:7rem>预订金额</div><div class="cancelTh ellipsis" style=width:7rem>入场码</div><div class="cancelTh ellipsis" style=width:14rem>操作</div></div><div class=cancelTr ng-repeat="order in orgFieldCancelBookCtrl.orders"><div class="cancelTd ellipsis" style=width:4rem><div style="width: 16px;height: 16px;border-radius: 5px;margin-top: 15px;margin-left: 12px;cursor: pointer" class={{order.image}} ng-click=orgFieldCancelBookCtrl.chooseCancelOrder(order)></div></div><div class="cancelTd ellipsis pointer" ui-sref=org-member-detail.info({id:order._member}) style=width:9rem ng-bind=order.name title={{order.name}}></div><div class="cancelTd ellipsis" style=width:14rem><span ng-bind="(order.startDate | date:\'yyyy-MM-dd\')+\' \'+order.showDate" title="{{(order.startDate | date:\'yyyy-MM-dd\')+\' \'+order.showDate}}"></span> <span ng-show=order.openInvoice style="color:#20a0ff;font-size: 12px;margin-left: 10px">已开票</span></div><div class="cancelTd ellipsis" style=width:12rem><div ng-show="order.state==\'已过期\'"><div style="float: left;width: 8px;height: 8px;border-radius: 8px;margin-top: 18px;background: #C0CCDA"></div><span style="margin-left: 10px" ng-bind=order.state></span></div><div ng-show="order.state==\'已消费\'" title="{{\'(\'+(order.openDate | date:\'yyyy-MM-dd hh:mm\')+\')\'}}"><div style="float: left;width: 8px;height: 8px;border-radius: 8px;margin-top: 18px;background: #C0CCDA"></div><span style="margin-left: 10px" ng-bind=order.state></span> <span ng-bind="\'(\'+(order.openDate | date:\'yyyy-MM-dd hh:mm\')+\')\'"></span></div><div ng-show="order.state==\'未消费\'"><div style="float: left;width: 8px;height: 8px;border-radius: 8px;margin-top: 18px;background: #13CE66"></div><span style="margin-left: 10px" ng-bind=order.state></span></div><div ng-show="order.state==\'已撤销\'" title="{{order.cancelDate?\'(\'+(order.cancelDate | date:\'yyyy-MM-dd hh:mm\')+\')\':\'\'}}"><div style="float: left;width: 8px;height: 8px;border-radius: 8px;margin-top: 18px;background: #ff4949"></div><span style="margin-left: 10px" ng-bind=order.state></span> <span ng-bind="order.cancelDate?\'(\'+(order.cancelDate | date:\'yyyy-MM-dd hh:mm\')+\')\':\'\'"></span></div></div><div class="cancelTd ellipsis" style=width:10rem ng-bind="order.createDate | date:\'yyyy-MM-dd HH:mm:ss\'" title="{{order.createDate | date:\'yyyy-MM-dd HH:mm:ss\'}}"></div><div class="cancelTd ellipsis" style=width:9rem ng-bind=order.venueName></div><div class="cancelTd ellipsis" style=width:9rem ng-bind=order.fieldName></div><div class="cancelTd ellipsis pointer" style=width:9rem ng-bind="order.remark?order.remark:\'暂无备注\'" title="{{(order.remark?order.remark:\'暂无备注\')+\',请点击修改\'}}" ng-click=orgFieldCancelBookCtrl.openShowOrderRemark(order)></div><div class="cancelTd ellipsis" style=width:7rem ng-bind=order.form></div><div class="cancelTd ellipsis" style=width:7rem><span ng-bind="order.cost | currency:\'\'"></span> <span ng-show=order.penalty ng-bind="\'(违约金：\'+order.penalty+\'元)\'" style="color:#ff4949;margin-left: 10px"></span></div><div class="cancelTd ellipsis" style=width:7rem ng-bind=order.code></div><div class="cancelTd ellipsis" style=width:14rem><span class=pointer style="color:#20a0ff;margin-right: 10px" ng-show="order.openState==\'canOpen\'&&!order.isCancel&&!order.openDate" ng-click=orgFieldCancelBookCtrl.openField(order)>开场</span> <span class=pointer style="color:#99a9bf;margin-right: 10px" ng-show="order.refundState==\'can\'&&!order.isCancel" ng-click=orgFieldCancelBookCtrl.openCancelOnce(order)>退订</span> <span class=pointer style="color:#99a9bf;margin-right: 10px" ng-click=orgFieldCancelBookCtrl.printOrder(order)>打印</span> <span class=pointer style=color:#99a9bf ng-show=!order.openInvoice ng-click=orgFieldCancelBookCtrl.drawBill(order)>开票</span></div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgFieldCancelBookCtrl.pagination.numPages > 1" total-items=orgFieldCancelBookCtrl.pagination.totalItems ng-model=orgFieldCancelBookCtrl.pagination.page items-per-page=orgFieldCancelBookCtrl.pagination.itemsPerPage max-size=orgFieldCancelBookCtrl.pagination.maxSize boundary-links="{{orgFieldCancelBookCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgFieldCancelBookCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgFieldCancelBookCtrl.pageChanged()></pagination></div></div></div></div></div></div><!-- 修改订单备注 --><div class=bgGary ng-show=orgFieldCancelBookCtrl.showOrderRemark><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">修改备注</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgFieldCancelBookCtrl.showOrderRemark=false;"></div><div class=clear></div><div class=form_error_font></div><div style=margin-top:10px><div class="form_key float_left form_key_margin">订单备注</div><input class="form_value float_left form_value_width" placeholder=请输入订单备注 ng-model=orgFieldCancelBookCtrl.order.remark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgFieldCancelBookCtrl.updateRemark()>确认</div><div class="button_normal float_right" ng-click="orgFieldCancelBookCtrl.showOrderRemark=false;">取消</div><div class=clear></div></div></div></div></div><!-- 撤销单次 --><div class=bgGary ng-show=orgFieldCancelBookCtrl.showBasicInfoBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">退订</div><img src=assets/images/close.png class="float_right pointer" ng-click=orgFieldCancelBookCtrl.close()></div><div class=clear></div><div class=form_error_font></div><div ng-show=orgFieldCancelBookCtrl.sendFlag><div class="form_key float_left form_key_margin"><span>退场码</span><span style=color:#fff>的</span></div><div class="float_left form_value_width" style="border:1px solid #ddd;border-radius:4px"><input class="form_value float_left" style="border:0;width: 275px" placeholder=请向场地管理员索要入场码 ng-model=orgFieldCancelBookCtrl.sendNum> <span style="margin:12px 5px 0 0;color:#00a1ff" class="pointer float_right" ng-click=orgFieldCancelBookCtrl.openChooseFieldWork()>点击发送</span></div></div><div class=clear></div><div class=form_error_font></div><div class=float_left><div class="form_key float_left form_key_margin">退款方式</div><div class=singleChoose_option ng-repeat="type in orgFieldCancelBookCtrl.refundTypes" ng-click=orgFieldCancelBookCtrl.chooseRefundType(type)><div class="singleChoose_imageBox {{type.image}}"></div><div class=singleChoose_prompt ng-bind=type.name>按预订价退还</div></div></div><div class=clear></div><div style=margin-top:10px ng-show="!orgFieldCancelBookCtrl.showRefundPrice && orgFieldCancelBookCtrl.rPriceFlag"><div class="form_key float_left form_key_margin">预订金额</div><div class="form_value float_left form_value_width" style=border:none ng-bind=orgFieldCancelBookCtrl.rPrice></div></div><div class=clear></div><div style=margin-top:10px ng-show=orgFieldCancelBookCtrl.showRefundPrice><div class="form_key float_left form_key_margin">自定金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=orgFieldCancelBookCtrl.refundPrice></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=orgFieldCancelBookCtrl.cancelOnce()>确认撤销</div><div class="button_normal float_right" ng-click=orgFieldCancelBookCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgFieldCancelBookCtrl.sendToFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">选择场馆管理员</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgFieldCancelBookCtrl.sendToFlag = false"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">场馆管理</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!orgFieldCancelBookCtrl.chooseObjectFlag,\'select_foucs\':orgFieldCancelBookCtrl.chooseObjectFlag}" ng-click="orgFieldCancelBookCtrl.chooseObjectFlag = !orgFieldCancelBookCtrl.chooseObjectFlag"><div class="form_down_icon form_width_354 form_select_value_choose" style=width:345px ng-bind=orgFieldCancelBookCtrl.objectName></div><div class="form_select_div form_width_354" style=width:345px ng-show=orgFieldCancelBookCtrl.chooseObjectFlag><div ng-click=orgFieldCancelBookCtrl.chooseObject(object) class="select_cell pointer" ng-repeat="object in orgFieldCancelBookCtrl.users" ng-bind=object.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgFieldCancelBookCtrl.send()>完成</div><div class="button_normal float_right" ng-click="orgFieldCancelBookCtrl.sendToFlag = false">取消</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgFieldCancelBookCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgFieldCancelBookCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="orgFieldCancelBookCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgFieldCancelBookCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgFieldCancelBookCtrl.wordERR>22212</div><div class=promptClose ng-click="orgFieldCancelBookCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgFieldCancelBookCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=orgFieldCancelBookCtrl.wordWARN>22212</div><div class=promptClose ng-click=orgFieldCancelBookCtrl.closePrompt()></div></div></div></div><div class=bgGary ng-show=orgFieldCancelBookCtrl.promptDELETE><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgFieldCancelBookCtrl.closePrompt()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:25px;color:#8181b4 ng-bind=orgFieldCancelBookCtrl.wordDELETE></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgFieldCancelBookCtrl.closePrompt()>取消</div><div class="button_normal float_right" ng-click=orgFieldCancelBookCtrl.cancelOrders()>继续撤销</div><div class=clear></div></div></div></div></div>'),
            a.put("app/organization/field/long/field-book-long.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=org-field-book.once>单次预订</div><div class="field_titleNormal field_titleChoose">长包预订</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-field-cancelbook>预订撤销</div></div><div class=field_bookBoxPostition><div style="margin-top: 20px"><div class=field_selectBox style="position: relative;width:auto;width: 106rem;height: 262px;min-width:1500px;background: #EFF2F7;border:1px solid #ccc;border-radius: 5px"><div style="float:left;width: 30rem;min-width:420px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 60px;text-align: right">预订人：</div><input style="float: left;margin-top: 12px;background: #fff;width: 230px;border:1px solid #cad4e0" class="form_value float_left form_value_width" placeholder=请输入预订方名称 ng-model=orgFieldLongBookCtrl.long_name></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 60px;text-align: right">场馆：</div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff;width: 230px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgFieldLongBookCtrl.showVenueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgFieldLongBookCtrl.showVenueName ng-click="orgFieldLongBookCtrl.showChooseVenueBox=!orgFieldLongBookCtrl.showChooseVenueBox">场馆1</div></div><div style="position: relative;z-index: 300" class=form_select_div ng-show=orgFieldLongBookCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in orgFieldLongBookCtrl.venues" ng-bind=venue.name ng-click=orgFieldLongBookCtrl.chooseVenueName(venue)>默认按钮</div></div></div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 60px;text-align: right">日期：</div><div class="input_calendar float_left" style="margin-top: 12px;background: #fff"><div class=input_calendar_showBox><div class=input_calendar_show style="color:#1f2d3d;width: 110px" ng-bind="orgFieldLongBookCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="orgFieldLongBookCtrl.showChooseStartDateBox=!orgFieldLongBookCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=orgFieldLongBookCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=orgFieldLongBookCtrl.long_closeChooseStartDateBox() ng-date=orgFieldLongBookCtrl.startDate></datetimepick></div></div><div class="input_calendar float_left" style="margin-top: 12px;background: #fff;margin-left: 10px"><div class=input_calendar_showBox><div class=input_calendar_show style="color:#1f2d3d;width: 110px" ng-bind="orgFieldLongBookCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="orgFieldLongBookCtrl.showChooseEndDateBox=!orgFieldLongBookCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=orgFieldLongBookCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=orgFieldLongBookCtrl.long_closeChooseEndDateBox() ng-date=orgFieldLongBookCtrl.endDate></datetimepick></div></div><div class=clear></div></div><div style="height: 80px;line-height: 60px;padding-left: 20px"><div class=field_bookConfirmBtn ng-hide="orgFieldLongBookCtrl.searchVenueId&&orgFieldLongBookCtrl.searchItemId&&orgFieldLongBookCtrl.showTimesArr.length>0&&(orgFieldLongBookCtrl.searchKey==\'day\'||(orgFieldLongBookCtrl.searchKey==\'week\'&&orgFieldLongBookCtrl.searchValueArr.length>0)||(orgFieldLongBookCtrl.searchKey==\'month\'&&orgFieldLongBookCtrl.searchValueArr.length>0))&&orgFieldLongBookCtrl.long_orderType&&orgFieldLongBookCtrl.long_name&&orgFieldLongBookCtrl.long_tel" style="width:150px;margin-top:20px;background: #d3dce6">查询可预订场地</div><div class="field_bookConfirmBtn pointer" ng-show="orgFieldLongBookCtrl.searchVenueId&&orgFieldLongBookCtrl.searchItemId&&orgFieldLongBookCtrl.showTimesArr.length>0&&(orgFieldLongBookCtrl.searchKey==\'day\'||(orgFieldLongBookCtrl.searchKey==\'week\'&&orgFieldLongBookCtrl.searchValueArr.length>0)||(orgFieldLongBookCtrl.searchKey==\'month\'&&orgFieldLongBookCtrl.searchValueArr.length>0))&&orgFieldLongBookCtrl.long_orderType&&orgFieldLongBookCtrl.long_name&&orgFieldLongBookCtrl.long_tel" style=width:150px;margin-top:20px ng-click=orgFieldLongBookCtrl.checkField()>查询可预订场地</div></div></div><div style="float:left;width: 30rem;min-width:420px"><div style="height: 60px;line-height: 60px;padding-left: 10px"><div style="float: left;color:#8F99A6;width: 79px">联系方式：</div><input style="float: left;margin-top: 12px;background: #fff;width: 230px;border:1px solid #cad4e0" class="form_value float_left form_value_width" placeholder=请输入联系方式 ng-model=orgFieldLongBookCtrl.long_tel></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 50px">项目：</div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff;width: 230px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgFieldLongBookCtrl.showItemName==\'选择项目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgFieldLongBookCtrl.showItemName ng-click="orgFieldLongBookCtrl.showChooseItemBox=!orgFieldLongBookCtrl.showChooseItemBox">项目1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=orgFieldLongBookCtrl.showChooseItemBox><div class="select_cell pointer ellipsis" ng-repeat="item in orgFieldLongBookCtrl.items" ng-bind=item.name ng-click=orgFieldLongBookCtrl.chooseItemName(item)>默认按钮</div></div></div></div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 50px">频率：</div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff;width: 80px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgFieldLongBookCtrl.showValueName==\'选择频率\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgFieldLongBookCtrl.showValueName ng-click="orgFieldLongBookCtrl.showChooseValueBox=!orgFieldLongBookCtrl.showChooseValueBox">项目1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=orgFieldLongBookCtrl.showChooseValueBox><div class="select_cell pointer ellipsis" ng-repeat="value in orgFieldLongBookCtrl.long_values" ng-bind=value.name ng-click=orgFieldLongBookCtrl.long_chooseValue(value)>默认按钮</div></div></div><div class="select field_select" ng-show=orgFieldLongBookCtrl.showChooseWeekDayBox style="float: left;margin-top: 12px;background: #fff;width: 200px"><div class="form_down_icon form_select_value" ng-click="orgFieldLongBookCtrl.showChooseWeekDaySelect=!orgFieldLongBookCtrl.showChooseWeekDaySelect"><div class=ellipsis ng-bind=orgFieldLongBookCtrl.showWeekDayName style="{{orgFieldLongBookCtrl.showWeekDayName==\'请选择星期几\'?\'\':\'color:#000\';}}">星期</div></div><div style="position: relative;z-index: 40" class=form_select_div ng-show=orgFieldLongBookCtrl.showChooseWeekDaySelect><div class="select_cell pointer ellipsis" style={{day.image}} ng-repeat="day in orgFieldLongBookCtrl.long_weekDays" ng-bind=day.name ng-click=orgFieldLongBookCtrl.chooseWeekDay(day)>默认按钮</div></div></div><div class="select field_select" ng-show=orgFieldLongBookCtrl.showChooseMonthDayBox style="float: left;margin-top: 12px;background: #fff;width: 200px"><div class="form_down_icon form_select_value" ng-click="orgFieldLongBookCtrl.showChooseMonthDaySelect=!orgFieldLongBookCtrl.showChooseMonthDaySelect"><div class=ellipsis ng-bind=orgFieldLongBookCtrl.showMonthDayName style="{{orgFieldLongBookCtrl.showMonthDayName==\'请选择日期\'?\'\':\'color:#000\';}}">天数</div></div><div style="position: relative;z-index: 40" class=form_select_div ng-show=orgFieldLongBookCtrl.showChooseMonthDaySelect><div class="select_cell pointer ellipsis" style={{day.image}} ng-repeat="day in orgFieldLongBookCtrl.long_monthDays" ng-bind=day.value ng-click=orgFieldLongBookCtrl.chooseMonthDay(day)>默认按钮</div></div></div></div></div></div><div style="float:left;width: 45rem;min-width:480px"><div style="height: 60px;line-height: 60px;padding-left: 10px"><div style="float: left;color:#8F99A6;width: 79px">用户备注：</div><input style="float: left;margin-top: 12px;background: #fff;width: 230px;border:1px solid #cad4e0" class="form_value float_left form_value_width" placeholder=请输入长包备注 ng-model=orgFieldLongBookCtrl.long_remark></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 50px">来源：</div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff;width: 230px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgFieldLongBookCtrl.showTypeName==\'选择类型\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgFieldLongBookCtrl.showTypeName ng-click="orgFieldLongBookCtrl.showChooseTypeBox=!orgFieldLongBookCtrl.showChooseTypeBox">场馆1</div></div><div style="position: relative;z-index: 250" class=form_select_div ng-show=orgFieldLongBookCtrl.showChooseTypeBox><div class="select_cell pointer ellipsis" ng-repeat="type in orgFieldLongBookCtrl.long_orderTypeArr" ng-bind=type.name ng-click=orgFieldLongBookCtrl.long_chooseOrderType(type)>默认按钮</div></div></div></div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 50px">场次：</div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff;width: 120px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgFieldLongBookCtrl.showStartTime==\'选择开始时间\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgFieldLongBookCtrl.showStartTime ng-click="orgFieldLongBookCtrl.showStartTimeBox=!orgFieldLongBookCtrl.showStartTimeBox">场馆1</div></div><div style="position: relative;z-index: 300" class=form_select_div ng-show=orgFieldLongBookCtrl.showStartTimeBox><div class="select_cell pointer ellipsis" ng-repeat="time in orgFieldLongBookCtrl.times" ng-bind=time.showDate ng-click=orgFieldLongBookCtrl.chooseStartTime(time)>默认按钮</div></div></div><div class="select field_select" style="float: left;margin-top: 12px;background: #fff;width: 120px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgFieldLongBookCtrl.showEndTime==\'选择结束时间\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgFieldLongBookCtrl.showEndTime ng-click="orgFieldLongBookCtrl.showEndTimeBox=!orgFieldLongBookCtrl.showEndTimeBox">场馆1</div></div><div style="position: relative;z-index: 300" class=form_select_div ng-show=orgFieldLongBookCtrl.showEndTimeBox><div class="select_cell pointer ellipsis" ng-repeat="time in orgFieldLongBookCtrl.times" ng-bind=time.showDate ng-click=orgFieldLongBookCtrl.chooseEndTime(time)>默认按钮</div></div></div><div class=clear></div></div></div></div></div><div class=clear></div></div></div><div ng-show="orgFieldLongBookCtrl.showResult.length>0"><div class=cancelTable style="width: 106rem;margin-left: 30px;max-height: 500px;overflow-y: auto"><div class="cancelThTr height_40" style="font-size: 15px"><div class="cancelTh width_4 ellipsis"><div style="width: 16px;height: 16px;border-radius: 5px;margin-top: 7px;margin-left: 12px;cursor: pointer" class={{orgFieldLongBookCtrl.chooseAll}} ng-click=orgFieldLongBookCtrl.changeAllChoose()></div></div><div class="cancelTh width_16 ellipsis">日期</div><div class="cancelTh width_16 ellipsis">场次开始时间</div><div class="cancelTh width_16 ellipsis">场次结束时间</div><div class="cancelTh width_16 ellipsis">场地</div><div class="cancelTh width_16 ellipsis">项目</div><div class="cancelTh width_16 ellipsis" style=color:#ff4949><span>已选择</span> <span ng-bind=orgFieldLongBookCtrl.showResult.length-orgFieldLongBookCtrl.cancelDocArr.length></span> <span>场地</span></div></div><div class=cancelTr ng-repeat="doc in orgFieldLongBookCtrl.showResult"><div class="cancelTd width_4 ellipsis"><div style="width: 16px;height: 16px;border-radius: 5px;margin-top: 15px;margin-left: 12px;cursor: pointer" class={{doc.choose}} ng-click=orgFieldLongBookCtrl.changeChoose(doc)></div></div><div class="cancelTd width_16 ellipsis" ng-bind="doc.startDate | date:\'yyyy-MM-dd\'">预订时间</div><div class="cancelTd width_16 ellipsis" ng-bind="doc.startDate | date:\'HH:mm\'"></div><div class="cancelTd width_16 ellipsis" ng-bind="doc.endDate | date:\'HH:mm\'"></div><div class="cancelTd width_16 ellipsis" ng-bind=doc.fieldName></div><div class="cancelTd width_16 ellipsis" ng-bind=doc.itemNames[0]></div><div class="cancelTd width_16 ellipsis"></div></div></div><div style="width: 106rem;margin-left: 30px"><div class="field_bookConfirmBtn float_left pointer" style="width:60px;height:36px;line-height: 36px" ng-click=orgFieldLongBookCtrl.createLong()>提交</div><!-- <div class="field_bookConfirmBtn float_left pointer" style="width:60px;height:36px;line-height: 36px;margin-left: 20px;color: #000;background: #fff;border:1px solid #ccc;" ng-click="orgFieldLongBookCtrl.addCancelDoc()">删除</div> --><div class="field_bookConfirmBtn float_left pointer" style="width:60px;height:36px;line-height: 36px;margin-left: 20px;color: #000;background: #fff;border:1px solid #ccc" ng-click=orgFieldLongBookCtrl.deleteDoc()>清空</div></div></div></div></div></div></div><!-- 长包可预订场地列表,第一步 --><div class=bgGary ng-show=orgFieldLongBookCtrl.BlongFirst><div class=middle><div id=box class="long_form_div center"><div class=form_padding><div class=long_form_div_titleBox><div class=long_form_div_title>可预订场地</div><div class=long_form_div_close ng-click="orgFieldLongBookCtrl.BlongFirst=false"></div><!-- <img src="assets/images/close.png" class="float_right pointer" ng-click="orgFieldLongBookCtrl.close()"> --></div><div class=long_table><div class=long_tr><div class="long_th width_130 ellipsis">场地名称</div><div class="long_th width_130 ellipsis">预订状态</div><div class="long_th width_130 ellipsis">操作</div></div><div class=long_tr ng-repeat="field in orgFieldLongBookCtrl.longFields"><div class="long_td width_130 ellipsis" ng-bind=field.name>11111111</div><div class="long_td width_130 ellipsis" style="{{field.conflictCount==0?\'\':\'color:#99a9bf\';}}" ng-bind="field.conflictCount==0?\'空闲\':(field.conflictCount +\'个场次被预订\')">111111111111</div><div class="long_td width_130 ellipsis pointer" style=color:#20a0ff ng-show="field.conflictCount==0" ng-click=orgFieldLongBookCtrl.openBlongFouth(field)>预订</div><div class="long_td width_130 ellipsis pointer" style=color:#20a0ff ng-show="field.conflictCount>0&&field.conflictCount<4" ng-click=orgFieldLongBookCtrl.openBlongSecond(field)>灵活预订</div><div class="long_td width_130 ellipsis" ng-show="field.conflictCount>3">不可预订</div></div></div></div></div></div></div><!-- 灵活预订,第二步 --><div class=bgGary ng-show=orgFieldLongBookCtrl.BlongSecond><div class=middle><div id=box class="long_form_div center"><div class=form_padding><div class=long_form_div_titleBox><div class=long_form_div_title><div class=long_boxback ng-click=orgFieldLongBookCtrl.backToFirst()></div><div style="float:left;height:40px;line-height: 40px">可预订场地</div></div><div class=long_form_div_close ng-click="orgFieldLongBookCtrl.BlongSecond=false"></div><!-- <img src="assets/images/close.png" class="float_right pointer" ng-click="orgFieldLongBookCtrl.close()"> --></div><div class=long_table><div class=long_tr><div class="long_th width_195 ellipsis">被预定场次</div><div class="long_th width_195 ellipsis">替换场地</div></div><div class=long_tr ng-repeat="result in orgFieldLongBookCtrl.replaceFields"><div class="long_td width_195 ellipsis"><span ng-bind="result.conflictField.startDate | date:\'yyyy/MM/dd\'">111</span> <span></span> <span ng-bind="(result.conflictField.startDate | date:\'HH:mm\')+\'--\'+(result.conflictField.endDate | date:\'HH:mm\')">111</span></div><div style="position: relative" class="long_td width_195"><div class=selectBox><div class=selectWord ng-bind=result.replaceFieldName>111111</div><div class=selectImage ng-click="result.showChooseReplaceFieldBox=!result.showChooseReplaceFieldBox"></div></div><div class=optionBox style="position: relative;z-index: 200" ng-show=result.showChooseReplaceFieldBox><div class=pointer ng-repeat="field in result.recommendField" ng-bind=field.name ng-click=orgFieldLongBookCtrl.chooseReplaceField(field,result)>默认按钮</div></div></div></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgFieldLongBookCtrl.openBlongFouth()>下一步</div><div class="button_normal float_right" ng-click=orgFieldLongBookCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 最终结果信息展示,第四步 --><div class=bgGary ng-show=orgFieldLongBookCtrl.BlongFouth><div class=middle><div id=box class="long_form_div center"><div class=form_padding><!-- <div class="long_form_div_titleBox">\n                    <div class="long_form_div_title">提交到列表</div>\n                    <div class="long_form_div_close" ng-click="orgFieldLongBookCtrl.close()"></div>\n                    <img src="assets/images/close.png" class="float_right pointer" ng-click="orgFieldLongBookCtrl.close()">\n                </div> --><div><div class="form_title float_left"><div class=long_boxback ng-click=orgFieldLongBookCtrl.backToSecond()></div><div style="float:left;height:40px;line-height: 40px">提交到列表</div></div><img src=assets/images/close.png class="float_right pointer" ng-click="orgFieldLongBookCtrl.BlongFouth=false"></div><div class=clear></div><div class=form_error_font></div><div style="color:#475568;font-size: 13px"><div style="border-bottom: 1px solid #d3dce6;padding-bottom: 10px"><div class=resultShowLine><span style="font-size: 16px;margin-right: 10px;color:#20a0ff" ng-bind=orgFieldLongBookCtrl.long_field.name></span> <span ng-bind=orgFieldLongBookCtrl.showVenueName></span> <span ng-bind=orgFieldLongBookCtrl.showItemName></span></div><div class=resultShowLine><span>日期范围：</span> <span ng-bind="orgFieldLongBookCtrl.startDate | date:\'yyyy/MM/dd\'"></span> <span>-</span> <span ng-bind="orgFieldLongBookCtrl.endDate | date:\'yyyy/MM/dd\'"></span></div><div class=resultShowLine><span>具体说明：</span> <span style="margin-right: 3px" ng-bind="orgFieldLongBookCtrl.searchKey==\'day\'?\'每天\':(orgFieldLongBookCtrl.searchKey==\'week\'?\'每周\':\'每月\')"></span> <span style="margin-right: 3px" ng-show="orgFieldLongBookCtrl.searchKey==\'week\'" ng-repeat="value in orgFieldLongBookCtrl.searchValueArr" ng-bind="\'周\'+value"></span> <span style="margin-right: 3px" ng-show="orgFieldLongBookCtrl.searchKey==\'month\'" ng-repeat="value in orgFieldLongBookCtrl.searchValueArr" ng-bind="value+\'日\'"></span></div><div class=resultShowLine><span>场次时间：</span> <span ng-repeat="time in orgFieldLongBookCtrl.showTimesArr" ng-bind="time.showDate+\' \'"></span></div></div><div style="margin-top: 10px" ng-show="orgFieldLongBookCtrl.specialArr.length>0"><div style="margin:5px 0">替换的场地</div><div ng-repeat="field in orgFieldLongBookCtrl.specialArr"><div class=resultShowLine><span style="font-size: 16px;color:#20a0ff" ng-bind=field.name></span> <span ng-bind=orgFieldLongBookCtrl.showVenueName></span> <span ng-bind=orgFieldLongBookCtrl.showItemName></span></div><div class=resultShowLine><span>日期：</span> <span ng-bind="field.startDate | date:\'yyyy/MM/dd\'"></span><!-- <span>-</span>\n                                <span ng-bind="field.endDate | date:\'yyyy/MM/dd\'"></span> --></div><div class=resultShowLine><span>场次时间：</span> <span style="margin-right: 5px" ng-bind="(field.startDate | date:\'HH:mm\')+\'--\'+(field.endDate | date:\'HH:mm\')"></span></div></div></div><div style="border-top:1px solid #d3dce6;width:390px;margin: 10px 0 0 0" ng-show="orgFieldLongBookCtrl.specialArr.length>0"></div><div style="margin-top: 10px"><div class=resultShowLine><span>预订方名称：</span> <span ng-bind=orgFieldLongBookCtrl.long_name></span></div><div class=resultShowLine><span>联系方式：</span> <span ng-bind="orgFieldLongBookCtrl.long_tel?orgFieldLongBookCtrl.long_tel:\'无\'"></span></div><div class=resultShowLine><span>长包备注：</span> <span ng-bind="orgFieldLongBookCtrl.long_remark?orgFieldLongBookCtrl.long_remark:\'无\'"></span></div><!-- <div class="resultShowLine">\n                            <span>预订价格：</span>\n                            <span ng-bind="orgFieldLongBookCtrl.long_price | currency:\'￥\'"></span>\n                        </div> --></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgFieldLongBookCtrl.getResult()>提交到列表</div><div class="button_normal float_right" ng-click=orgFieldLongBookCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgFieldLongBookCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgFieldLongBookCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="orgFieldLongBookCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgFieldLongBookCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgFieldLongBookCtrl.wordERR>22212</div><div class=promptClose ng-click=orgFieldLongBookCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgFieldLongBookCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=orgFieldLongBookCtrl.wordWARN>22212</div><div class=promptClose ng-click=orgFieldLongBookCtrl.closePrompt()></div></div></div></div>'), a.put("app/organization/field/once/field-book-flexible.html", '<div><div class=field_selectBox style=height:auto><div style="min-width: 1360px"><div class="fbonce_member_InfoBox float_left"><div class=fbonce_m_i_readTelOrCard><div class=fbonce_m_i_r_title>读取用户信息</div><div class=fbonce_m_i_r_contect><input id=cardNoBox class=fbonce_m_i_r_c_input placeholder=请读取会员卡号/二维码 ng-model=orgFieldBookCtrl.memberTelOrCard ng-keypress=orgFieldBookCtrl.enterCheck($event) style=ime-mode:disabled><div ng-show=orgFieldBookCtrl.memberTelOrCard class=fbonce_m_i_r_c_btn ng-click=orgFieldBookCtrl.checkMember()>查询</div><div ng-hide=orgFieldBookCtrl.memberTelOrCard class="fbonce_m_i_r_c_btn bgcolorG">查询</div><div class="fbonce_m_i_r_c_btn bgcolorW borderccc" style="color: #475669" ng-click=orgFieldBookCtrl.resert()>重置</div></div></div><div ng-show=orgFieldBookCtrl.showMemberInfo class=fbonce_m_i_info><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>姓名:</div><div class=fbonce_m_i_i_l_d_value ng-bind=orgFieldBookCtrl.members[0].name>徐涛</div></div><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>现金账户:</div><div class=fbonce_m_i_i_l_d_value ng-bind="orgFieldBookCtrl.members[0].cards[0].total?orgFieldBookCtrl.members[0].cards[0].total:0 | currency:\'￥\'">500元</div></div></div><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>级别:</div><div class=fbonce_m_i_i_l_d_value ng-show=orgFieldBookCtrl.members[0].cards[0].levelDes ng-bind=orgFieldBookCtrl.members[0].cards[0].levelDes>金卡</div><div class=fbonce_m_i_i_l_d_value ng-hide=orgFieldBookCtrl.members[0].cards[0].levelDes>暂无等级</div></div><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>虚拟账户:</div><div class="fbonce_m_i_i_l_d_value ellipsis" title="{{(orgFieldBookCtrl.members[0].virtualAccount.total | currency:\'￥\')+\'(\'+(orgFieldBookCtrl.members[0].virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'}}"><span ng-bind="orgFieldBookCtrl.members[0].virtualAccount.total | currency:\'￥\'">500元(2017-10-28过期)</span> <span ng-show="orgFieldBookCtrl.members[0].virtualAccount.total>0" ng-bind="\'(\'+(orgFieldBookCtrl.members[0].virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'"></span></div></div></div><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>手机号:</div><div class=fbonce_m_i_i_l_d_value ng-bind=orgFieldBookCtrl.members[0].tel>18806712362</div></div><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key style="color: #20a0ff;cursor: pointer" ng-hide=orgFieldBookCtrl.members[0].isReal ng-click="orgFieldBookCtrl.openShowRechargeBox(\'idCard\')">账户认证</div><div class=fbonce_m_i_i_l_d_key style="color: #20a0ff;cursor: pointer" ng-show=orgFieldBookCtrl.members[0].isReal ng-click=orgFieldBookCtrl.openShowRechargeBox()>账户充值</div></div></div></div><div ng-hide=orgFieldBookCtrl.showMemberInfo class="fbonce_m_i_info fbonce_m_i_noInfo"><span class=colorG>暂无会员信息，是否</span> <span class="colorB pointer" ng-click="orgFieldBookCtrl.showCreateMember=true">注册会员</span></div></div><div style="width: 320px;height: 110px;float: left;margin-left: 40px"><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #20a0ff"></div><div class=fbonce_bookDetailName>已选</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #ff4949"></div><div class=fbonce_bookDetailName>使用中</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #fff;border: 1px solid #d3dce6"></div><div class=fbonce_bookDetailName>可预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #5ED878"></div><div class=fbonce_bookDetailName>普通预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #F69667"></div><div class=fbonce_bookDetailName>长包预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #67BDDE"></div><div class=fbonce_bookDetailName>培训预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #c0ccda"></div><div class=fbonce_bookDetailName>过期/停用</div></div></div><div class=clear></div></div><div class=fbonce_titleBox style="min-width: 1360px"><div style="float: left"><div class="fbonce_t_Title fbonce_t_once" ng-click="orgFieldBookCtrl.changeTitle(\'once\')">预订场地</div><div class="fbonce_t_Title fbonce_t_long bgcolorB">现场消费</div></div><div style="float: left;text-align: left;margin-left: 20px"><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgFieldBookCtrl.showVenueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgFieldBookCtrl.showVenueName ng-click="orgFieldBookCtrl.showChooseVenueBox=!orgFieldBookCtrl.showChooseVenueBox">场馆1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=orgFieldBookCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in orgFieldBookCtrl.venues" ng-bind=venue.name ng-click=orgFieldBookCtrl.chooseVenueName(venue)>默认按钮</div></div></div><div class="select fbonce_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgFieldBookCtrl.showItemName==\'选择项目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgFieldBookCtrl.showItemName ng-click="orgFieldBookCtrl.showChooseItemBox=!orgFieldBookCtrl.showChooseItemBox">项目1</div></div><div class=form_select_div style="position: relative;z-index: 200" ng-show=orgFieldBookCtrl.showChooseItemBox><div class="select_cell pointer ellipsis" ng-repeat="item in orgFieldBookCtrl.items" ng-bind=item.name ng-click=orgFieldBookCtrl.chooseItemName(item)>默认按钮</div></div></div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="orgFieldBookCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="orgFieldBookCtrl.showChooseStartDateBox=!orgFieldBookCtrl.showChooseStartDateBox"></div></div><div class=input_calendar_datetimepick style="z-index: 50" ng-show=orgFieldBookCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=orgFieldBookCtrl.closeChooseStartDateBox() ng-date=orgFieldBookCtrl.startDate></datetimepick></div></div><!-- <div style="height: 36px;float:left;border-radius: 5px;font-size: 16px;font-weight: bold;">\n                    <div style="width: 150px;height: 34px;line-height: 34px;float: left;text-align: center;">\n                        <span style="{{orgFieldBookCtrl.dateArr[0].week==\'周六\'||orgFieldBookCtrl.dateArr[0].week==\'周日\'?\'color:#ff4949;\':\'\'}}" ng-bind="orgFieldBookCtrl.dateArr[0].week"></span>\n                        <span>&nbsp;</span>\n                        <span ng-bind="orgFieldBookCtrl.dateArr[0].date | date:\'yyyy-MM-dd\'"></span>\n                    </div>\n                </div> --><div class=clear></div></div></div></div><div class=clear></div><div style="text-align: center;width:1000px;height: 20px;line-height: 20px;margin-top:10px;font-size: 12px"><div style="float: left;margin-right: 20px"><span style="font-weight: bold">认证会员：</span> <span style="color: #ff4949">9.5折</span></div><div style="float: left;margin-right: 20px" ng-repeat="card in orgFieldBookCtrl.cards"><span style="font-weight: bold" ng-bind="card.name+\'：\'">临时会员：</span> <span style="color: #ff4949" ng-bind="card.discount==1?\'无折扣\':(card.discount*10+\'折\')">无折扣</span></div></div><div class=fbonce_fieldBox ng-show="orgFieldBookCtrl.searchVenueId&&orgFieldBookCtrl.searchItemId&&orgFieldBookCtrl.times.length!=0&&orgFieldBookCtrl.fields.length!=0"><div><div class=fbonce_f_hoursBox><div class="fbonce_fieldName fbonce_f_h_space"></div><div class="fbonce_fieldName fbonce_f_h_hours" ng-repeat="value in orgFieldBookCtrl.showHours"><div class=fbonce_f_h_hour style={{value.fontColor}} ng-bind="value.num+\':00\'"></div></div><!-- <div class="fbonce_fieldName fbonce_f_h_lastBox">\n                    <div class="fbonce_f_h_lastHour" ng-bind="orgFieldBookCtrl.endHour+\':00\'"></div>\n                </div> --><div class=clear></div></div><div class=fbonce_timeBox><div class="fbonce_timeName ellipsis" style={{field.fontColor}} ng-repeat="field in orgFieldBookCtrl.fields" ng-bind=field.name title={{field.name}}></div></div><div class=float_left><div class=field_time ng-repeat="field in orgFieldBookCtrl.fields"><div class=field_fieldName style="width: auto" ng-repeat="time in field.times"><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#fff;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-bind=time.name title="{{time.name+\'（号码：\'+(time.tel?time.tel:\'暂无号码\')+\' \'+\'/入场码：\'+time.code+\' \'+\'/备注：\'+(time.remark?time.remark:\'暂无备注）\')}}" ng-show="time.state==\'hasbook\'"></div><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#fff;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-bind=time.name title="{{time.name+\'（号码：\'+(time.tel?time.tel:\'暂无号码\')+\' \'+\'/入场码：\'+time.code+\' \'+\'/备注：\'+(time.remark?time.remark:\'暂无备注）\')}}" ng-show="time.state==\'isUsed\'"></div><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#fff;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-bind=time.name title="{{time.name+\'（号码：\'+(time.tel?time.tel:\'暂无号码\')+\' \'+\'/入场码：\'+time.code+\' \'+\'/备注：\'+(time.remark?time.remark:\'暂无备注）\')}}" ng-show="time.state==\'haspass\'"></div><div class="field_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#8492a6;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'stop\'">停用中</div><div class="field_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#8492a6;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'cantbook\'">已过期</div><div class="field_fieldAndTime pointer" style="{{time.bgColor}}{{time.fontColor}}{{time.width}}{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'canbook\'" ng-click=orgFieldBookCtrl.chooseFieldFiexible(field,time) ng-bind=time.price title={{time.price}}></div><div class=field_fieldAndTime style="{{time.bgColor}}{{time.fontColor}}{{time.width}}{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'choose\'" ng-bind=time.name title="{{time.name+\'(\'+(time.tel?time.tel:\'暂无号码\')+\')\'}}" ng-bind=time.price title={{time.price}}></div></div></div></div><div style=clear:both></div></div><div class=field_bookResultBox style="width: auto;min-height: 60px"><!-- <div style="float: left;margin-left: 40px;">\n                <div style="width: 65px;height: 40px;line-height: 40px;float: left;">起始时间</div>\n                <div style="width: 180px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;text-indent: 20px;border-radius:4px;" class="{{orgFieldBookCtrl.startTime==\'点击场次获取\'?\'colorG\':\'\'}}" ng-bind="orgFieldBookCtrl.startTime"></div>\n                <div class="clear"></div>\n            </div> --><div style="float: left;margin-left: 40px"><div style="width: 65px;height: 40px;line-height: 40px;float: left">起始时间</div><div style="width: 108px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;border-right: none;text-indent: 20px;border-radius:4px 0 0 4px" ng-bind=orgFieldBookCtrl.startTime class="{{orgFieldBookCtrl.startTime==\'点击场次获取\'?\'colorG\':\'\'}}"></div><div style="width: 36px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;border-right: none;cursor: pointer;background:url(../../assets/images/reduce.png) no-repeat 11px 17px" ng-click="orgFieldBookCtrl.changeStartTime(\'reduce\')"></div><div style="width: 36px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;cursor: pointer;background:url(../../assets/images/add.png) no-repeat 11px 11px;border-radius:0 4px 4px 0" ng-click="orgFieldBookCtrl.changeStartTime(\'add\')"></div><div class=clear></div></div><div style="float: left;margin-left: 40px"><div style="width: 65px;height: 40px;line-height: 40px;float: left">预订时长</div><div style="width: 108px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;border-right: none;text-indent: 20px;border-radius:4px 0 0 4px" ng-bind="orgFieldBookCtrl.lastTime?orgFieldBookCtrl.lastTime+\'h\':\'\'"></div><div style="width: 36px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;border-right: none;cursor: pointer;background:url(../../assets/images/reduce.png) no-repeat 11px 17px" ng-click="orgFieldBookCtrl.changeLastTime(\'reduce\')"></div><div style="width: 36px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;cursor: pointer;background:url(../../assets/images/add.png) no-repeat 11px 11px;border-radius:0 4px 4px 0" ng-click="orgFieldBookCtrl.changeLastTime(\'add\')"></div><div class=clear></div></div><!-- <div style="float: left;margin-left: 40px;">\n                <div style="width: 65px;height: 40px;line-height: 40px;float: left;">预订价格</div>\n                <input style="width: 180px;height: 40px;line-height: 38px;float: left;border:1px solid #c0ccda;text-indent: 20px;border-radius:4px;" ng-model="orgFieldBookCtrl.flexibleOrderPrice" placeholder="输入预订价格">\n                <div class="clear"></div>\n            </div> --><div style="float: left;margin-left: 40px;height: 40px;line-height: 40px"><div class=fbonce_orderPriceName>会员价：</div><div class=fbonce_orderPrice><span style="font-size: 14px">￥</span> <span style="font-size: 18px;font-weight: medium" ng-bind=orgFieldBookCtrl.order.total></span></div></div><div class=clear></div></div></div><div class=float_left ng-show="!(orgFieldBookCtrl.searchVenueId&&orgFieldBookCtrl.searchItemId&&orgFieldBookCtrl.times.length!=0&&orgFieldBookCtrl.fields.length!=0)"><div style="width:950px;height: 60px;text-align: center;line-height: 60px;color: #20a0ff;border:1px solid #d3dce6;margin-top: 10px">暂无可预订场地</div></div><div class=clear></div><div class=fbonce_bookConfirmBtn ng-hide="orgFieldBookCtrl.order.orderArr.length>0&&orgFieldBookCtrl.order._member&&orgFieldBookCtrl.lastTime>0&&orgFieldBookCtrl.order.total" style="background: #d3dce6">确认预订</div><div class="fbonce_bookConfirmBtn pointer" ng-show="orgFieldBookCtrl.order.orderArr.length>0&&orgFieldBookCtrl.order._member&&orgFieldBookCtrl.lastTime>0&&orgFieldBookCtrl.order.total" ng-click=orgFieldBookCtrl.openShowFiexibleOrderBox()>确认预订</div></div><!-- 选择支付方式 --><div class=bgGary ng-show=orgFieldBookCtrl.showOrderBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">发起支付</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgFieldBookCtrl.showOrderBox=false"></div><div class=clear></div><div class=form_error_font></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin" style="margin-right: 8px">支付金额</div><div class="form_value float_left form_value_width" style=border:none;color:#ff4949;text-indent:0><span>￥</span> <span style="font-weight: medium;font-size: 18px" ng-bind="orgFieldBookCtrl.order.payment==\'member\'?orgFieldBookCtrl.order.total:orgFieldBookCtrl.order.subtotal"></span></div></div><div class=clear></div></div><div style="margin-top: 10px"><div style="float: left"><div class="form_key float_left form_key_margin" style="margin-right: 8px">账户余额</div><div class="form_value float_left" style=border:none;text-indent:0><span>￥</span> <span ng-bind=orgFieldBookCtrl.members[0].cards[0].total></span></div></div><div style="float: left;margin-left: 30px"><div class="form_key float_left form_key_margin" style="margin-right: 8px">虚拟余额</div><div class="form_value float_left" style=border:none;text-indent:0><span>￥</span> <span ng-bind=orgFieldBookCtrl.members[0].virtualAccount.total></span> <span ng-bind="\'(\'+(orgFieldBookCtrl.members[0].virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'"></span></div></div><div class=clear></div></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">支付方式</div><div style="width: 350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in orgFieldBookCtrl.paymentArr" ng-click=orgFieldBookCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style="width: 0;height: 0;overflow: hidden" ng-show=orgFieldBookCtrl.showCodeBox><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=orgFieldBookCtrl.order.auth_code ng-keypress=orgFieldBookCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div><div style="width: 420px;border-bottom: 1px solid #ccc"></div><div style="margin-top: 10px" ng-repeat="field in orgFieldBookCtrl.order.orderArr"><div class=resultShowLine style="font-size: 16px"><span ng-bind=field.fieldName></span> <span>&nbsp;</span> <span ng-bind=field.timeShowDate></span></div><div class=resultShowLine><span ng-bind="orgFieldBookCtrl.startDate | date:\'yyyy-MM-dd\'"></span> <span>&nbsp;</span> <span ng-bind=field.week></span> <span>&nbsp;</span> <span ng-bind=orgFieldBookCtrl.showVenueName></span></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgFieldBookCtrl.createFlexible()>确认预订</div><div class="button_normal float_right" ng-click="orgFieldBookCtrl.showOrderBox=false">取消</div><div class=clear></div></div></div></div></div><!-- 注册会员 --><div class=bgGary ng-show=orgFieldBookCtrl.showCreateMember><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注册会员</div><img src=assets/images/close.png class="float_right pointer" ng-click=orgFieldBookCtrl.close()></div><div class=clear></div><div class=form_error_font></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">会员名称</div><input class="form_value float_left form_value_width" placeholder=请输入姓名 ng-model=orgFieldBookCtrl.member.name></div><div class=clear></div><div class=form_error_font></div></div><div><div><div class="form_key float_left form_key_margin">联系方式</div><input class="form_value float_left form_value_width" placeholder=请输入手机号 ng-model=orgFieldBookCtrl.member.tel></div><div class=clear></div><div class=form_error_font></div></div><div><div><div class="form_key float_left form_key_margin">身份证号</div><input class="form_value float_left form_value_width" placeholder=请输入身份证号 ng-model=orgFieldBookCtrl.member.idCard></div><div class=clear></div><div class=form_error_font></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgFieldBookCtrl.createMember()>成为会员</div><div class="button_normal float_right" ng-click=orgFieldBookCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 账号充值 --><div class=bgGary ng-show=orgFieldBookCtrl.showRechargeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left" ng-hide="orgFieldBookCtrl.needIdCard==\'idCard\'">账户充值</div><div class="form_title float_left" ng-show="orgFieldBookCtrl.needIdCard==\'idCard\'">账户认证</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgFieldBookCtrl.showRechargeBox=false"><div class=clear></div></div><div style="line-height: 36px;margin-top: 20px" ng-hide="orgFieldBookCtrl.needIdCard==\'idCard\'"><div class="fbonce_t_Title fbonce_t_once {{orgFieldBookCtrl.rechargeType==\'cash\'?\'bgcolorB\':\'\'}}" ng-click="orgFieldBookCtrl.changeRechargeType(\'cash\')">现金</div><div class="fbonce_t_Title fbonce_t_once {{orgFieldBookCtrl.rechargeType==\'speCard\'?\'bgcolorB\':\'\'}}" style="border-radius: 0;margin-left: 1px" ng-click="orgFieldBookCtrl.changeRechargeType(\'speCard\')">专用充值卡</div><div class="fbonce_t_Title fbonce_t_long {{orgFieldBookCtrl.rechargeType==\'normalCard\'?\'bgcolorB\':\'\'}}" ng-click="orgFieldBookCtrl.changeRechargeType(\'normalCard\')">通用充值卡</div><div class=clear></div></div><div style=margin-top:20px ng-show="orgFieldBookCtrl.needIdCard==\'idCard\'"><div><div class="form_key float_left form_key_margin">身份证号</div><input class="form_value float_left form_value_width" placeholder=请输入身份证号 ng-model=orgFieldBookCtrl.idCard></div><div class=clear></div></div><div style=margin-top:20px ng-show="orgFieldBookCtrl.rechargeType==\'cash\'&&orgFieldBookCtrl.needIdCard!=\'idCard\'"><div class="form_key float_left form_key_margin">选择卡种</div><div class="float_left pointer zindex_999 select"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=orgFieldBookCtrl.showCardName ng-click="orgFieldBookCtrl.openChooseCardBox = !orgFieldBookCtrl.openChooseCardBox"></div><div class=form_select_div style=width:345px ng-show=orgFieldBookCtrl.openChooseCardBox><div class="select_cell pointer" ng-repeat="card in orgFieldBookCtrl.cards" ng-bind="card.name+\'(\'+card.price+\'元)\'" ng-click=orgFieldBookCtrl.chooseCard(card)>默认按钮</div></div></div><div class=clear></div></div><div style=margin-top:10px ng-show="orgFieldBookCtrl.rechargeType==\'cash\'&&orgFieldBookCtrl.needIdCard!=\'idCard\'"><div><div class="form_key float_left form_key_margin">支付方式</div><div style="width: 350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in orgFieldBookCtrl.paymentArr" ng-click=orgFieldBookCtrl.chooseRechargePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style=width:0;height:0;overflow:hidden ng-show="orgFieldBookCtrl.rechargeType==\'cash\'&&orgFieldBookCtrl.needIdCard!=\'idCard\'"><div><div class="form_key float_left form_key_margin">支付条码</div><input id=rechargeAuth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=orgFieldBookCtrl.rechargeAuth_code ng-keypress=orgFieldBookCtrl.rechargeAuth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div><div ng-show="orgFieldBookCtrl.rechargeType==\'speCard\'"><div class="form_key float_left form_key_margin">充值场馆</div><div class=float_left style="width: 350px;padding-top: 7px"><div class=singleChoose_option ng-repeat="venue in orgFieldBookCtrl.venues_clone" ng-click=orgFieldBookCtrl.chooseChargeVenue(venue)><div class="singleChoose_imageBox {{venue.image}}" style="height: 26px"></div><div class=singleChoose_prompt style="min-width:60px;height: 26px;line-height: 26px" ng-bind=venue.name>场馆</div></div></div></div><div class=clear></div><div style=margin-top:20px ng-show="orgFieldBookCtrl.rechargeType==\'normalCard\'||orgFieldBookCtrl.rechargeType==\'speCard\'&&orgFieldBookCtrl.needIdCard!=\'idCard\'"><div><div class="form_key float_left form_key_margin">充值账号</div><input class="form_value float_left form_value_width" placeholder=请输入充值卡账号 ng-model=orgFieldBookCtrl.chargeCardNum></div><div class=clear></div><div class=form_error_font></div></div><div ng-show="orgFieldBookCtrl.rechargeType==\'normalCard\'||orgFieldBookCtrl.rechargeType==\'speCard\'"><div><div class="form_key float_left form_key_margin">充值密码</div><input class="form_value float_left form_value_width" placeholder=请输入充值卡密码 ng-model=orgFieldBookCtrl.chargeCardPassword></div><div class=clear></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgFieldBookCtrl.recharge()>完成</div><div class="button_normal float_right" ng-click="orgFieldBookCtrl.showRechargeBox=false">取消</div><div class=clear></div></div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=orgFieldBookCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=orgFieldBookCtrl.closePrompt()></div></div></div></div>'),
            a.put("app/organization/field/once/field-book-once.html", '<div><div class=fbonce_selectBox><div style="min-width: 1360px"><div class="fbonce_member_InfoBox float_left"><div class=fbonce_m_i_readTelOrCard><div class=fbonce_m_i_r_title>读取用户信息</div><div class=fbonce_m_i_r_contect><input id=cardNoBox class=fbonce_m_i_r_c_input placeholder=请读取会员卡号/二维码 ng-model=orgFieldBookCtrl.memberTelOrCard ng-keypress=orgFieldBookCtrl.enterCheck($event) style=ime-mode:disabled><div ng-show=orgFieldBookCtrl.memberTelOrCard class=fbonce_m_i_r_c_btn ng-click=orgFieldBookCtrl.checkMember()>查询</div><div ng-hide=orgFieldBookCtrl.memberTelOrCard class="fbonce_m_i_r_c_btn bgcolorG">查询</div><div class="fbonce_m_i_r_c_btn bgcolorW borderccc" style="color: #475669" ng-click=orgFieldBookCtrl.resert()>重置</div></div></div><div ng-show=orgFieldBookCtrl.showMemberInfo class=fbonce_m_i_info><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>姓名:</div><div class=fbonce_m_i_i_l_d_value ng-bind=orgFieldBookCtrl.members[0].name>徐涛</div></div><div class=fbonce_m_i_i_l_detail style=margin-left:-40px><div class=fbonce_m_i_i_l_d_key>现金账户:</div><div class=fbonce_m_i_i_l_d_value ng-bind="orgFieldBookCtrl.members[0].cards[0].total?orgFieldBookCtrl.members[0].cards[0].total:0 | currency:\'￥\'">500元</div></div></div><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>级别:</div><div class=fbonce_m_i_i_l_d_value ng-show=orgFieldBookCtrl.members[0].cards[0].levelDes ng-bind=orgFieldBookCtrl.members[0].cards[0].levelDes>金卡</div><div class=fbonce_m_i_i_l_d_value ng-hide=orgFieldBookCtrl.members[0].cards[0].levelDes>暂无等级</div></div><div class=fbonce_m_i_i_l_detail style=margin-left:-40px><div class=fbonce_m_i_i_l_d_key>虚拟账户:</div><div class="fbonce_m_i_i_l_d_value ellipsis" title="{{(orgFieldBookCtrl.members[0].virtualAccount.total | currency:\'￥\')+\'(\'+(orgFieldBookCtrl.members[0].virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'}}"><span ng-bind="orgFieldBookCtrl.members[0].virtualAccount.total | currency:\'￥\'">500元(2017-10-28过期)</span> <span ng-show="orgFieldBookCtrl.members[0].virtualAccount.total>0" ng-bind="\'(\'+(orgFieldBookCtrl.members[0].virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'"></span></div></div></div><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>手机号:</div><div class=fbonce_m_i_i_l_d_value ng-bind=orgFieldBookCtrl.members[0].tel>18806712362</div></div><div class=fbonce_m_i_i_l_detail style=margin-left:-43px><div class=fbonce_m_i_i_l_d_key style="color: #20a0ff;cursor: pointer" ng-hide=orgFieldBookCtrl.members[0].isReal ng-click="orgFieldBookCtrl.openShowRechargeBox(\'idCard\')">账户认证</div><div class=fbonce_m_i_i_l_d_key style="color: #20a0ff;cursor: pointer" ng-show=orgFieldBookCtrl.members[0].isReal ng-click=orgFieldBookCtrl.openShowRechargeBox()>账户充值</div></div></div></div><div ng-hide=orgFieldBookCtrl.showMemberInfo class="fbonce_m_i_info fbonce_m_i_noInfo"><span class=colorG>暂无会员信息，是否</span> <span class="colorB pointer" ng-click="orgFieldBookCtrl.showCreateMember=true">注册会员</span></div></div><div style="width: 320px;height: 110px;float: left;margin-left: 40px"><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #20a0ff"></div><div class=fbonce_bookDetailName>已选</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #ff4949"></div><div class=fbonce_bookDetailName>使用中</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #fff;border: 1px solid #d3dce6"></div><div class=fbonce_bookDetailName>可预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #5ED878"></div><div class=fbonce_bookDetailName>普通预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #F69667"></div><div class=fbonce_bookDetailName>长包预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #67BDDE"></div><div class=fbonce_bookDetailName>培训预订</div></div><div class=fbonce_bookDetail style="width: 120px"><div class=fbonce_bookDetailColor style="background: #c0ccda"></div><div class=fbonce_bookDetailName>过期/停用</div></div></div><div class=clear></div></div><div class=fbonce_titleBox style="min-width: 1360px"><div style="float: left"><div class="fbonce_t_Title fbonce_t_once bgcolorB">预订场地</div><div class="fbonce_t_Title fbonce_t_long" ng-click="orgFieldBookCtrl.changeTitle(\'fiexible\')">现场消费</div></div><div style="float: left;text-align: left;margin-left: 20px"><div class="select fbonce_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgFieldBookCtrl.showVenueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgFieldBookCtrl.showVenueName ng-click="orgFieldBookCtrl.showChooseVenueBox=!orgFieldBookCtrl.showChooseVenueBox">场馆1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=orgFieldBookCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in orgFieldBookCtrl.venues" ng-bind=venue.name ng-click=orgFieldBookCtrl.chooseVenueName(venue)>默认按钮</div></div></div><div class="select fbonce_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgFieldBookCtrl.showItemName==\'选择项目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgFieldBookCtrl.showItemName ng-click="orgFieldBookCtrl.showChooseItemBox=!orgFieldBookCtrl.showChooseItemBox">项目1</div></div><div class=form_select_div style="position: relative;z-index: 200" ng-show=orgFieldBookCtrl.showChooseItemBox><div class="select_cell pointer ellipsis" ng-repeat="item in orgFieldBookCtrl.items" ng-bind=item.name ng-click=orgFieldBookCtrl.chooseItemName(item)>默认按钮</div></div></div><div style="height: 36px;float:left;border:1px solid #ccc;border-radius: 5px;border-right: none;margin-left:15px"><div style="width: 100px;height: 34px;line-height: 34px;border-right: 1px solid #ccc;float: left;text-align: center;cursor: pointer;{{date.bgColor}}" ng-repeat="date in orgFieldBookCtrl.dateArr" ng-click=orgFieldBookCtrl.changeDate(date)><span style="{{(date.week==\'周六\'||date.week==\'周日\')&&!date.isChoose?\'color:#ff4949;\':\'\'}}" ng-bind=date.week></span> <span ng-bind="date.date | date:\'MM-dd\'"></span></div></div><div class=clear></div></div></div></div><div class=clear></div><div style="text-align: center;width:1000px;height: 20px;line-height: 20px;margin-top:10px;font-size: 12px"><div style="float: left;margin-right: 20px"><span style="font-weight: bold">认证会员：</span> <span style="color: #ff4949">9.5折</span></div><div style="float: left;margin-right: 20px" ng-repeat="card in orgFieldBookCtrl.cards"><span style="font-weight: bold" ng-bind="card.name+\'：\'">临时会员：</span> <span style="color: #ff4949" ng-bind="card.discount==1?\'无折扣\':(card.discount*10+\'折\')">无折扣</span></div></div><div class=fbonce_fieldBox style="overflow-x: auto" ng-show="orgFieldBookCtrl.searchVenueId&&orgFieldBookCtrl.searchItemId&&orgFieldBookCtrl.times.length!=0&&orgFieldBookCtrl.fields.length!=0"><div style={{orgFieldBookCtrl.tableWidthB}}><div class=fbonce_f_hoursBox><div class="fbonce_fieldName fbonce_f_h_space"></div><div class="fbonce_fieldName fbonce_f_h_hours" ng-repeat="value in orgFieldBookCtrl.showHours"><div class=fbonce_f_h_hour style={{value.fontColor}} ng-bind="value.num+\':00\'"></div></div><!-- <div class="fbonce_fieldName fbonce_f_h_lastBox">\n					<div class="fbonce_f_h_lastHour" ng-bind="orgFieldBookCtrl.endHour+\':00\'"></div>\n				</div> --><div class=clear></div></div><div class=fbonce_timeBox><div class="fbonce_timeName ellipsis" style={{field.fontColor}} ng-repeat="field in orgFieldBookCtrl.fields" ng-bind=field.name title={{field.name}}></div></div><div class=float_left style={{orgFieldBookCtrl.tableWidthS}}><div class=fbonce_time ng-repeat="field in orgFieldBookCtrl.fields"><div class=fbonce_fieldName style="width: auto" ng-repeat="time in field.times"><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#fff;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-bind=time.name title="{{time.name+\'（号码：\'+(time.tel?time.tel:\'暂无号码\')+\' \'+\'/入场码：\'+time.code+\' \'+\'/备注：\'+(time.remark?time.remark:\'暂无备注）\')}}" ng-show="time.state==\'hasbook\'"></div><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#fff;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-bind=time.name title="{{time.name+\'（号码：\'+(time.tel?time.tel:\'暂无号码\')+\' \'+\'/入场码：\'+time.code+\' \'+\'/备注：\'+(time.remark?time.remark:\'暂无备注）\')}}" ng-show="time.state==\'isUsed\'"></div><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#fff;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-bind=time.name title="{{time.name+\'（号码：\'+(time.tel?time.tel:\'暂无号码\')+\' \'+\'/入场码：\'+time.code+\' \'+\'/备注：\'+(time.remark?time.remark:\'暂无备注）\')}}" ng-show="time.state==\'haspass\'"></div><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#8492a6;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'stop\'">停用中</div><div class="fbonce_fieldAndTime ellipsis" style="{{time.bgColor}}{{time.width}}color:#8492a6;{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'cantbook\'">已过期</div><div class="fbonce_fieldAndTime pointer" style="{{time.bgColor}}{{time.fontColor}}{{time.width}}{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'canbook\'" ng-click=orgFieldBookCtrl.chooseField(field,time) ng-bind=time.price title={{time.price}}></div><div class="fbonce_fieldAndTime pointer" style="{{time.bgColor}}{{time.fontColor}}{{time.width}}{{time.marginleft==\'margin-left:0rem;\'?\'margin-left:-1px;\':time.marginleft}}{{field.index==0?\'border-top:1px solid #c0ccda\':\'\'}}" ng-show="time.state==\'choose\'" ng-click=orgFieldBookCtrl.chooseField(field,time) ng-bind=time.price title={{time.price}}></div></div></div></div><div class=clear></div></div><div class=fbonce_bookResultBox><div class=fbonce_orderPriceBox><div><div class=fbonce_orderPriceName>会员价：</div><div class=fbonce_orderPrice><span style="font-size: 14px">￥</span> <span style="font-size: 18px;font-weight: medium" ng-bind=orgFieldBookCtrl.order.total></span></div></div></div><div class=fbonce_bookResultPos><div class=fbonce_bookResult ng-repeat="field in orgFieldBookCtrl.order.orderArr"><div class=fbonce_bookResult_delete ng-click=orgFieldBookCtrl.deleteField(field)></div><div style="font-size: 13px;color: #1f2d3d"><span ng-bind=field.timeShowDate>1:00-2:00</span> <span ng-bind=field.fieldName>场地02</span></div><!-- <div style="font-size: 13px;color: #8492a6;">\n						<span ng-bind="field.fieldName">场地02</span>\n						<span ng-bind="field.date | date:\'yyyy-MM-dd\'">今天</span>\n						<span ng-bind="field.week">羽毛球</span>\n						<span ng-bind="field.venueName">室内体育馆</span>\n					</div> --></div></div><div style=clear:both></div></div></div><div ng-show="!(orgFieldBookCtrl.searchVenueId&&orgFieldBookCtrl.searchItemId&&orgFieldBookCtrl.times.length!=0&&orgFieldBookCtrl.fields.length!=0)"><div style="width:950px;height: 60px;text-align: center;line-height: 60px;color: #20a0ff;border:1px solid #d3dce6;margin-top: 10px">暂无可预订场地</div></div><div class=clear></div><div class=fbonce_bookConfirmBtn ng-hide="orgFieldBookCtrl.order.orderArr.length>0&&orgFieldBookCtrl.order._member" style="background: #d3dce6">确认预订</div><div class="fbonce_bookConfirmBtn pointer" ng-show="orgFieldBookCtrl.order.orderArr.length>0&&orgFieldBookCtrl.order._member" ng-click=orgFieldBookCtrl.openShowOrderBox()>确认预订</div></div><!-- 选择支付方式 --><div class=bgGary ng-show=orgFieldBookCtrl.showOrderBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">发起支付</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgFieldBookCtrl.showOrderBox=false"></div><div class=clear></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin" style="margin-right: 8px">支付金额</div><div class="form_value float_left form_value_width" style=border:none;color:#ff4949;text-indent:0><span>￥</span> <span style="font-weight: medium;font-size: 18px" ng-bind="orgFieldBookCtrl.order.payment==\'member\'?orgFieldBookCtrl.order.total:orgFieldBookCtrl.order.subtotal"></span></div></div><div class=clear></div></div><div style="margin-top: 10px"><div style="float: left"><div class="form_key float_left form_key_margin" style="margin-right: 8px">账户余额</div><div class="form_value float_left" style=border:none;text-indent:0><span>￥</span> <span ng-bind=orgFieldBookCtrl.members[0].cards[0].total></span></div></div><div style="float: left;margin-left: 30px"><div class="form_key float_left form_key_margin" style="margin-right: 8px">虚拟余额</div><div class="form_value float_left" style=border:none;text-indent:0><span>￥</span> <span ng-bind=orgFieldBookCtrl.members[0].virtualAccount.total></span> <span ng-bind="\'(\'+(orgFieldBookCtrl.members[0].virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'"></span></div></div><div class=clear></div></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">支付方式</div><div style="width: 350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in orgFieldBookCtrl.paymentArr" ng-click=orgFieldBookCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style="width: 0;height: 0;overflow: hidden" ng-show=orgFieldBookCtrl.showCodeBox><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=orgFieldBookCtrl.order.auth_code ng-keypress=orgFieldBookCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div><div style="width: 420px;border-bottom: 1px solid #ccc"></div><div style="margin-top: 10px" ng-repeat="field in orgFieldBookCtrl.order.orderArr"><div class=resultShowLine style="font-size: 16px"><span ng-bind=field.fieldName></span> <span>&nbsp;</span> <span ng-bind=field.timeShowDate></span></div><div class=resultShowLine><span ng-bind="orgFieldBookCtrl.startDate | date:\'yyyy-MM-dd\'"></span> <span>&nbsp;</span> <span ng-bind=field.week></span> <span>&nbsp;</span> <span ng-bind=orgFieldBookCtrl.showVenueName></span></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgFieldBookCtrl.create()>确认预订</div><div class="button_normal float_right" ng-click="orgFieldBookCtrl.showOrderBox=false">取消</div><div class=clear></div></div></div></div></div><!-- 注册会员 --><div class=bgGary ng-show=orgFieldBookCtrl.showCreateMember><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注册会员</div><img src=assets/images/close.png class="float_right pointer" ng-click=orgFieldBookCtrl.close()></div><div class=clear></div><div class=form_error_font></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">会员名称</div><input class="form_value float_left form_value_width" placeholder=请输入姓名 ng-model=orgFieldBookCtrl.member.name></div><div class=clear></div><div class=form_error_font></div></div><div><div><div class="form_key float_left form_key_margin">联系方式</div><input class="form_value float_left form_value_width" placeholder=请输入手机号 ng-model=orgFieldBookCtrl.member.tel></div><div class=clear></div><div class=form_error_font></div></div><div><div><div class="form_key float_left form_key_margin">身份证号</div><input class="form_value float_left form_value_width" placeholder=请输入身份证号 ng-model=orgFieldBookCtrl.member.idCard></div><div class=clear></div><div class=form_error_font></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgFieldBookCtrl.createMember()>成为会员</div><div class="button_normal float_right" ng-click=orgFieldBookCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 账号充值 --><div class=bgGary ng-show=orgFieldBookCtrl.showRechargeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left" ng-hide="orgFieldBookCtrl.needIdCard==\'idCard\'">账户充值</div><div class="form_title float_left" ng-show="orgFieldBookCtrl.needIdCard==\'idCard\'">账户认证</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgFieldBookCtrl.showRechargeBox=false"><div class=clear></div></div><div style="line-height: 36px;margin-top: 20px" ng-hide="orgFieldBookCtrl.needIdCard==\'idCard\'"><div class="fbonce_t_Title fbonce_t_once {{orgFieldBookCtrl.rechargeType==\'cash\'?\'bgcolorB\':\'\'}}" ng-click="orgFieldBookCtrl.changeRechargeType(\'cash\')">现金</div><div class="fbonce_t_Title fbonce_t_once {{orgFieldBookCtrl.rechargeType==\'speCard\'?\'bgcolorB\':\'\'}}" style="border-radius: 0;margin-left: 1px" ng-click="orgFieldBookCtrl.changeRechargeType(\'speCard\')">专用充值卡</div><div class="fbonce_t_Title fbonce_t_long {{orgFieldBookCtrl.rechargeType==\'normalCard\'?\'bgcolorB\':\'\'}}" ng-click="orgFieldBookCtrl.changeRechargeType(\'normalCard\')">通用充值卡</div><div class=clear></div></div><div style=margin-top:20px ng-show="orgFieldBookCtrl.needIdCard==\'idCard\'"><div><div class="form_key float_left form_key_margin">身份证号</div><input class="form_value float_left form_value_width" placeholder=请输入身份证号 ng-model=orgFieldBookCtrl.idCard></div><div class=clear></div></div><div style=margin-top:20px ng-show="orgFieldBookCtrl.rechargeType==\'cash\'&&orgFieldBookCtrl.needIdCard!=\'idCard\'"><div class="form_key float_left form_key_margin">选择卡种</div><div class="float_left pointer zindex_999 select"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=orgFieldBookCtrl.showCardName ng-click="orgFieldBookCtrl.openChooseCardBox = !orgFieldBookCtrl.openChooseCardBox"></div><div class=form_select_div style=width:345px ng-show=orgFieldBookCtrl.openChooseCardBox><div class="select_cell pointer" ng-repeat="card in orgFieldBookCtrl.cards" ng-bind="card.name+\'(\'+card.price+\'元)\'" ng-click=orgFieldBookCtrl.chooseCard(card)>默认按钮</div></div></div><div class=clear></div></div><div style=margin-top:10px ng-show="orgFieldBookCtrl.rechargeType==\'cash\'&&orgFieldBookCtrl.needIdCard!=\'idCard\'"><div><div class="form_key float_left form_key_margin">支付方式</div><div style="width: 350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in orgFieldBookCtrl.paymentArr" ng-click=orgFieldBookCtrl.chooseRechargePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style=width:0;height:0;overflow:hidden ng-show="orgFieldBookCtrl.rechargeType==\'cash\'&&orgFieldBookCtrl.needIdCard!=\'idCard\'"><div><div class="form_key float_left form_key_margin">支付条码</div><input id=rechargeAuth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=orgFieldBookCtrl.rechargeAuth_code ng-keypress=orgFieldBookCtrl.rechargeAuth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div><div ng-show="orgFieldBookCtrl.rechargeType==\'speCard\'"><div class="form_key float_left form_key_margin">充值场馆</div><div class=float_left style="width: 350px;padding-top: 7px"><div class=singleChoose_option ng-repeat="venue in orgFieldBookCtrl.venues_clone" ng-click=orgFieldBookCtrl.chooseChargeVenue(venue)><div class="singleChoose_imageBox {{venue.image}}" style="height: 26px"></div><div class=singleChoose_prompt style="min-width:60px;height: 26px;line-height: 26px" ng-bind=venue.name>场馆</div></div></div></div><div class=clear></div><div style=margin-top:20px ng-show="orgFieldBookCtrl.rechargeType==\'normalCard\'||orgFieldBookCtrl.rechargeType==\'speCard\'&&orgFieldBookCtrl.needIdCard!=\'idCard\'"><div><div class="form_key float_left form_key_margin">充值账号</div><input class="form_value float_left form_value_width" placeholder=请输入充值卡账号 ng-model=orgFieldBookCtrl.chargeCardNum></div><div class=clear></div><div class=form_error_font></div></div><div ng-show="orgFieldBookCtrl.rechargeType==\'normalCard\'||orgFieldBookCtrl.rechargeType==\'speCard\'"><div><div class="form_key float_left form_key_margin">充值密码</div><input class="form_value float_left form_value_width" placeholder=请输入充值卡密码 ng-model=orgFieldBookCtrl.chargeCardPassword></div><div class=clear></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgFieldBookCtrl.recharge()>完成</div><div class="button_normal float_right" ng-click="orgFieldBookCtrl.showRechargeBox=false">取消</div><div class=clear></div></div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=orgFieldBookCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=orgFieldBookCtrl.closePrompt()></div></div></div></div>'), a.put("app/organization/field/once/field-book.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleChoose">单次预订</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-field-longbook>长包预订</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-field-cancelbook>预订撤销</div></div><div class=field_bookBoxPostition ui-view=""></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgFieldBookCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgFieldBookCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="orgFieldBookCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgFieldBookCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=orgFieldBookCtrl.wordERR title={{orgFieldBookCtrl.wordERR}}>22212</div><div class=promptClose ng-click=orgFieldBookCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgFieldBookCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=orgFieldBookCtrl.wordWARN title={{orgFieldBookCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/organization/field/ticket/ticket-record.html", '<div><div class=field_selectBox><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入顾客姓名搜索 ng-model=orgTicketCtrl.searchName><div class=xt_searchImage ng-click=orgTicketCtrl.getRecord()></div></div><div class="form_value float_left form_clock_icon" style=width:150px ng-click="orgTicketCtrl.startDateFlag = !orgTicketCtrl.startDateFlag;orgTicketCtrl.closeDateFlag = false" ng-bind="orgTicketCtrl.startDate | date:\'yyyy-MM-dd\'"></div><div class=float_left style="margin:10px 10px 0 10px">至</div><div class="form_value float_left form_clock_icon" style=width:150px ng-click="orgTicketCtrl.closeDateFlag = !orgTicketCtrl.closeDateFlag;orgTicketCtrl.startDateFlag = false" ng-bind="orgTicketCtrl.closeDate | date:\'yyyy-MM-dd\'"></div><div class=clear></div><div class="student_datetime student_datetime2" style="margin:380px 0 0 0"><datetimepick ng-close=orgTicketCtrl.getRecord() ng-id="\'first\'" ng-show=orgTicketCtrl.startDateFlag ng-date=orgTicketCtrl.startDate></datetimepick></div><div class="student_datetime student_datetime2" style="margin:380px 0 0 0"><datetimepick ng-close=orgTicketCtrl.getRecord() ng-id="\'second\'" ng-show=orgTicketCtrl.closeDateFlag ng-date=orgTicketCtrl.closeDate></datetimepick></div></div></div><div><div style=margin-top:20px><div style="margin-top:40px;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;padding-left:20px"><div class="float_left ellipsis" style=width:20rem>订单时间</div><div class="float_left ellipsis" style=width:14rem>商品名称</div><div class="float_left ellipsis" style=width:5rem>售价</div><div class="float_left ellipsis" style=width:6rem>数量</div><div class="float_left ellipsis" style=width:12rem>销售额</div><div class="float_left ellipsis" style=width:10rem>顾客姓名</div><div class="float_left ellipsis" style=width:10rem>操作人</div></div><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;padding-left:20px" ng-repeat="record in orgTicketCtrl.records"><div class="float_left ellipsis" style=width:20rem ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm\'"></div><div class="float_left ellipsis" style=width:14rem ng-bind=record.ticket.name></div><div class="float_left ellipsis" style=width:5rem ng-bind=record.ticket.price></div><div class="float_left ellipsis" style=width:6rem ng-bind=record.ticket.count></div><div class="float_left ellipsis" style=width:12rem ng-bind=record.cost></div><div class="float_left ellipsis" style=width:10rem ng-bind="record.name?record.name:\'暂无\'"></div><div class="float_left ellipsis" style=width:10rem ng-bind="record.workerName?record.workerName:\'自助机\'"></div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgTicketCtrl.pagination.numPages > 1" total-items=orgTicketCtrl.pagination.totalItems ng-model=orgTicketCtrl.pagination.page items-per-page=orgTicketCtrl.pagination.itemsPerPage max-size=orgTicketCtrl.pagination.maxSize boundary-links="{{orgTicketCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgTicketCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgTicketCtrl.pageChanged()></pagination></div><!-- 商品退款 --><div class=bgGary ng-show=orgTicketCtrl.refundFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">商品退款</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgTicketCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">退款金额</div><input class="form_value float_left form_value_width" placeholder=请输入退款金额 ng-model=orgTicketCtrl.refundPrice></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgTicketCtrl.refund()>完成</div><div class="button_normal float_right" ng-click=orgTicketCtrl.close()>取消</div><div class=clear></div></div></div></div></div>'), a.put("app/organization/field/ticket/ticket-sale.html", '<div><div class="float_left pointer" ng-class="{\'select\':!orgTicketCtrl.selectItemFlag,\'select_foucs\':orgTicketCtrl.selectItemFlag}" ng-click="orgTicketCtrl.selectItemFlag = !orgTicketCtrl.selectItemFlag" style="margin:20px 0 0 0px"><div class="form_down_icon form_width_180 form_select_value_choose" ng-bind=orgTicketCtrl.iName></div><div class="form_select_div form_width_180" ng-show=orgTicketCtrl.selectItemFlag><div ng-click=orgTicketCtrl.chooseItem(item) ng-repeat="item in orgTicketCtrl.irr" ng-bind=item.name class="select_cell pointer" onclick="event.cancelBubble = true"></div></div></div><div class="float_left pointer" ng-class="{\'select\':!orgTicketCtrl.selectVenueFlag,\'select_foucs\':orgTicketCtrl.selectVenueFlag}" ng-click="orgTicketCtrl.selectVenueFlag = !orgTicketCtrl.selectVenueFlag" style="margin:20px 0 0 30px"><div class="form_down_icon form_width_180 form_select_value_choose" ng-bind=orgTicketCtrl.vName></div><div class="form_select_div form_width_180" ng-show=orgTicketCtrl.selectVenueFlag><div ng-click=orgTicketCtrl.chooseVenue(venue) ng-repeat="venue in orgTicketCtrl.vrr" ng-bind=venue.name class="select_cell pointer" onclick="event.cancelBubble = true"></div></div></div></div><div class=clear></div><div style=margin-top:30px;z-index:888><div class=cancelTable ng-show="csdSellCtrl.tickets.length != 0"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style=width:13rem;padding-left:20px>门票名称</div><div class="cancelTh ellipsis" style=width:13rem>时间段</div><div class="cancelTh ellipsis" style=width:13rem>项目</div><div class="cancelTh ellipsis" style=width:13rem>场馆</div><div class="cancelTh ellipsis" style=width:13rem>价格</div><div class="cancelTh ellipsis" style=width:13rem>数量</div></div><div class=cancelTr ng-repeat="ticket in orgTicketCtrl.tickets"><div class="cancelTd ellipsis" style=width:13rem;padding-left:20px ng-bind=ticket.name>2</div><div class="cancelTd ellipsis" style=width:13rem ng-bind=ticket.showDate>2</div><div class="cancelTd ellipsis" style=width:13rem ng-bind=ticket._item.name>2</div><div class="cancelTd ellipsis" style=width:13rem ng-bind=ticket._venue.name>2</div><div class="cancelTd ellipsis" style=width:13rem ng-bind="\'￥\'+ticket.price+\'/张\'">2</div><div class="cancelTd ellipsis" style=width:13rem><input ng-model=ticket.num style="border:1px solid #ddd;width:40px;border-radius:4px;height:30px;margin-top:7px;padding-left:6px;font-size:20px" class="float_left"><div class="float_left pointer"><img src=assets/images/circleadd.png style="width:26px;margin:0 5px" ng-click="orgTicketCtrl.changeNum(ticket,\'add\')"> <img src=assets/images/circledelete.png style=width:26px ng-click="orgTicketCtrl.changeNum(ticket,\'delete\')"></div></div><div class="cancelTd ellipsis pointer" ng-click=orgTicketCtrl.judgePay(ticket) style=width:13rem;color:#00a1ff>确认售卖</div></div></div><div style="margin-top:20px;font-size:14px;color:#8492a6;border:1px solid #ddd;width:1000px;text-align:center;height:60px;line-height:60px" ng-show="csdSellCtrl.tickets.length == 0">暂无可售卖门票</div><div class=bgGary ng-show=orgTicketCtrl.payFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">发起支付</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgTicketCtrl.payFlag = false"></div><div class=clear></div><div ng-show=orgTicketCtrl.moneyFlag style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">需支付：</div><div class="form_value float_left form_value_width" style=border:none;color:red ng-bind="orgTicketCtrl.realPrice | currency:\'￥\'"></div></div><div class=clear></div></div><div ng-show=!orgTicketCtrl.moneyFlag style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">需支付：</div><div class="form_value float_left form_value_width" style=border:none;color:red ng-bind="orgTicketCtrl.total | currency:\'￥\'"></div></div><div class=clear></div></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">支付方式</div><div><div class=singleChoose_option style="float: none" ng-repeat="payment in orgTicketCtrl.paymentArr" ng-click=orgTicketCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style=width:0;height:0;overflow:hidden><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=orgTicketCtrl.auth_code ng-keypress=orgTicketCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgTicketCtrl.create()>确认支付</div><div class="button_normal float_right" ng-click="orgTicketCtrl.payFlag = false">取消</div><div class=clear></div></div></div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=orgTicketCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click="orgTicketCtrl.showAuth_codeBox = false"></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgTicketCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgTicketCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="orgTicketCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgTicketCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=orgTicketCtrl.wordERR title={{orgTicketCtrl.wordERR}}>22212</div><div class=promptClose ng-click="orgTicketCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgTicketCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=orgTicketCtrl.wordWARN title={{orgTicketCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'),
            a.put("app/organization/field/ticket/ticket.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal {{orgTicketCtrl.titleState==\'sale\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="orgTicketCtrl.changeTitle(\'sale\')">门票销售</div><div class="field_titleNormal {{orgTicketCtrl.titleState==\'record\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="orgTicketCtrl.changeTitle(\'record\')">销售记录</div></div><div class=field_bookBoxPostition ui-view=""></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgTicketCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgTicketCtrl.wordOK>22212</div><div class=promptClose ng-click="orgTicketCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgTicketCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgTicketCtrl.wordERR>22212</div><div class=promptClose ng-click="orgTicketCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgTicketCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" title={{orgTicketCtrl.wordWARN}}>支付中...</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/organization/finance/cashall/finance-cashall.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleChoose">营业收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-field>场地/综合服务收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-shop>小卖部收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-prep>微信/支付宝</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-preppay>押金列表</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-service-count>会员卡使用明细表</div></div><div class=field_bookBoxPostition><div><div><div class=field_selectBoxOne style="height: auto"><div><div><div class=field_selectName style="text-indent: 0;width: 80px">选择日期</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="orgFinanceCashallCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="orgFinanceCashallCtrl.showChooseStartDateBox=!orgFinanceCashallCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=orgFinanceCashallCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=orgFinanceCashallCtrl.closeChooseStartDateBox() ng-date=orgFinanceCashallCtrl.startDate></datetimepick></div></div><div class=float_left style="height: 40px;line-height: 40px;padding: 0 10px">至</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="orgFinanceCashallCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="orgFinanceCashallCtrl.showChooseEndDateBox=!orgFinanceCashallCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=orgFinanceCashallCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=orgFinanceCashallCtrl.closeChooseEndDateBox() ng-date=orgFinanceCashallCtrl.endDate></datetimepick></div></div><div><div class="button2_normal float_right" style="margin:0 20px" ng-click="orgFinanceCashallCtrl.export(\'alltable\')">导出</div></div><div style=clear:both></div></div><div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择场馆</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="venue in orgFinanceCashallCtrl.venues" ng-click="(venue.image==\'manyChoose_imageG\')?\'\':orgFinanceCashallCtrl.chooseVenueName(venue)"><div class="singleChoose_imageBox {{venue.image}} {{venue.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=venue.name style="{{venue.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择提交人</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="worker in orgFinanceCashallCtrl.workers" ng-click="(worker.image==\'manyChoose_imageG\')?\'\':orgFinanceCashallCtrl.chooseWorkerName(worker)"><div class="singleChoose_imageBox {{worker.image}} {{worker.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=worker.name style="{{worker.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div style=clear:both></div></div></div></div></div><div style="max-width: 106rem;overflow-x: auto"><table id=alltable><tr><td colspan=54><span>柜员收入汇总表：</span> <span ng-bind=orgFinanceCashallCtrl.venueName></span></td></tr><tr><td colspan=54><span>时间范围：</span> <span ng-bind=orgFinanceCashallCtrl.dateName></span></td></tr><tr><td rowspan=2>操作柜员</td><td rowspan=2>开卡数量</td><td rowspan=2>实名认证数量</td><td colspan=9>现金收入</td><td colspan=7>支票收入</td><td colspan=7>转账收入</td><td colspan=7>POS机收入</td><td colspan=10>微信收入（非现金）</td><td colspan=9>支付宝收入（非现金）</td><td rowspan=2 style=color:#20a0ff>合计</td><td rowspan=2>详情</td></tr><tr><td>场地消费</td><td>柜台充值</td><td>门票消费</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td>现金退款</td><td style=color:#20a0ff>合计</td><td>场地消费</td><td>柜台充值</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td style=color:#20a0ff>合计</td><td>场地消费</td><td>柜台充值</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td style=color:#20a0ff>合计</td><td>场地消费</td><td>柜台充值</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td style=color:#20a0ff>合计</td><td>场地消费</td><td>柜台充值</td><td>线上充值</td><td>门票消费</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td>微信退款</td><td style=color:#20a0ff>合计</td><td>场地消费</td><td>柜台充值</td><td>门票消费</td><td>综合服务费</td><td>会员服务费</td><td>卡工本费</td><td>卡押金</td><td>支付宝退款</td><td style=color:#20a0ff>合计</td></tr><tr class=trHover ng-repeat="worker in orgFinanceCashallCtrl.result"><td ng-bind=worker.workerName>1</td><td ng-bind=worker.issueCardCount?worker.issueCardCount:0>1</td><td ng-bind=worker.realMemberCount?worker.realMemberCount:0>1</td><td ng-bind=worker.payment.cash.field>1</td><td ng-bind=worker.payment.cash.charge>1</td><td ng-bind=worker.payment.cash.ticket>1</td><td ng-bind=worker.payment.cash.product>1</td><td ng-bind=worker.payment.cash.memberService>1</td><td ng-bind=worker.payment.cash.cardFee>1</td><td ng-bind=worker.payment.cash.bail>1</td><td ng-bind=worker.payment.cash.refund>1</td><td ng-bind=worker.payment.cash.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.check.field>1</td><td ng-bind=worker.payment.check.charge>1</td><td ng-bind=worker.payment.check.product>1</td><td ng-bind=worker.payment.check.memberService>1</td><td ng-bind=worker.payment.check.cardFee>1</td><td ng-bind=worker.payment.check.bail>1</td><td ng-bind=worker.payment.check.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.card.field>1</td><td ng-bind=worker.payment.card.charge>1</td><td ng-bind=worker.payment.card.product>1</td><td ng-bind=worker.payment.card.memberService>1</td><td ng-bind=worker.payment.card.cardFee>1</td><td ng-bind=worker.payment.card.bail>1</td><td ng-bind=worker.payment.card.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.pos.field>1</td><td ng-bind=worker.payment.pos.charge>1</td><td ng-bind=worker.payment.pos.product>1</td><td ng-bind=worker.payment.pos.memberService>1</td><td ng-bind=worker.payment.pos.cardFee>1</td><td ng-bind=worker.payment.pos.bail>1</td><td ng-bind=worker.payment.pos.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.wx.field>1</td><td ng-bind=worker.payment.wx.charge>1</td><td ng-bind=worker.payment.wx.charge_online>1</td><td ng-bind=worker.payment.wx.ticket>1</td><td ng-bind=worker.payment.wx.product>1</td><td ng-bind=worker.payment.wx.memberService>1</td><td ng-bind=worker.payment.wx.cardFee>1</td><td ng-bind=worker.payment.wx.bail>1</td><td ng-bind=worker.payment.wx.refund>1</td><td ng-bind=worker.payment.wx.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.alipay.field>1</td><td ng-bind=worker.payment.alipay.charge>1</td><td ng-bind=worker.payment.alipay.ticket>1</td><td ng-bind=worker.payment.alipay.product>1</td><td ng-bind=worker.payment.alipay.memberService>1</td><td ng-bind=worker.payment.alipay.cardFee>1</td><td ng-bind=worker.payment.alipay.bail>1</td><td ng-bind=worker.payment.alipay.refund>1</td><td ng-bind=worker.payment.alipay.subtotal style=color:#20a0ff>1</td><td ng-bind=worker.payment.subtotal style=color:#20a0ff>1</td><td style="color: #20a0ff;cursor: pointer" ng-click="orgFinanceCashallCtrl.initCondition(worker._worker==\'all\'?undefined:worker.workerName)">详情</td></tr><tr class=trHover><td colspan=2>制表人：</td><td colspan=3></td><td colspan=2>复核人：</td><td colspan=3></td><td colspan=2>审核人：</td><td colspan=42></td></tr></table></div><div style="margin-top: 20px;margin-bottom: 20px" ng-show=orgFinanceCashallCtrl.baoyugang><div class="button2_normal float_right" style="margin:0 20px" ng-click="orgFinanceCashallCtrl.export(\'alltable2\')">导出</div></div><div class=finance style="width:100%;overflow-x: auto;margin-top: 20px;margin-bottom: 20px" ng-show=orgFinanceCashallCtrl.baoyugang><table id=alltable2 style=width:100%><tr><td colspan=10><span>柜员收入汇总表：</span> <span ng-bind="\'包玉刚游泳馆\'+\'-\'+orgFinanceCashallCtrl.workerName"></span></td></tr><tr><td colspan=10><span>时间范围：</span> <span ng-bind=orgFinanceCashallCtrl.dateName></span></td></tr><tr><td>项目</td><td>数量</td><td>单价</td><td>微信</td><td>支付宝</td><td>现金</td><td>转账</td><td>支票</td><td>POS机</td><td style=color:#20a0ff>合计</td></tr><!-- <tr class="trHover">\n                                    <td>场地收入</td>\n                                    <td>暂无</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.field.wx">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.field.alipay">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.field.cash">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.field.card">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.field.check">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.field.pos">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.field.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><tr class=trHover ng-repeat="ticket in orgFinanceCashallCtrl.resultType.statuses.ticketArr"><td ng-bind=ticket.signName></td><td ng-bind=ticket.quantity></td><td ng-bind=ticket.price></td><td ng-bind=ticket.wx>1</td><td ng-bind=ticket.alipay>1</td><td ng-bind=ticket.cash>1</td><td ng-bind=ticket.card>1</td><td ng-bind=ticket.check>1</td><td ng-bind=ticket.pos>1</td><td ng-bind=ticket.subtotal style=color:#20a0ff>1</td></tr><!-- <tr class="trHover">\n                                    <td>柜台充值</td>\n                                    <td>暂无</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.charge.wx">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.charge.alipay">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.charge.cash">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.charge.card">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.charge.check">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.charge.pos">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.charge.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><!-- <tr class="trHover">\n                                    <td>专用账户充值</td>\n                                    <td>暂无</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.chargeSpe.wx">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.chargeSpe.alipay">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.chargeSpe.cash">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.chargeSpe.card">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.chargeSpe.check">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.chargeSpe.pos">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.chargeSpe.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><!-- <tr class="trHover">\n                                    <td>线上充值</td>\n                                    <td>暂无</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.charge_online.wx">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.charge_online.alipay">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.charge_online.cash">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.charge_online.card">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.charge_online.check">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.charge_online.pos">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.charge_online.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><!-- <tr class="trHover" ng-repeat="product in orgFinanceCashallCtrl.resultType.statuses.productArr">\n                                    <td ng-bind="product.signName"></td>\n                                    <td ng-bind="product.quantity"></td>\n                                    <td ng-bind="product.wx">1</td>\n                                    <td ng-bind="product.alipay">1</td>\n                                    <td ng-bind="product.cash">1</td>\n                                    <td ng-bind="product.card">1</td>\n                                    <td ng-bind="product.check">1</td>\n                                    <td ng-bind="product.pos">1</td>\n                                    <td ng-bind="product.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><!-- <tr class="trHover" ng-repeat="shopProduct in orgFinanceCashallCtrl.resultType.statuses.shopProductArr">\n                                    <td ng-bind="shopProduct.signName"></td>\n                                    <td ng-bind="shopProduct.quantity"></td>\n                                    <td ng-bind="shopProduct.wx">1</td>\n                                    <td ng-bind="shopProduct.alipay">1</td>\n                                    <td ng-bind="shopProduct.cash">1</td>\n                                    <td ng-bind="shopProduct.card">1</td>\n                                    <td ng-bind="shopProduct.check">1</td>\n                                    <td ng-bind="shopProduct.pos">1</td>\n                                    <td ng-bind="shopProduct.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><tr class=trHover ng-repeat="memberService in orgFinanceCashallCtrl.resultType.statuses.memberServiceArr"><td ng-bind=memberService.signName></td><td ng-bind=memberService.quantity></td><td ng-bind=memberService.price></td><td ng-bind=memberService.wx>1</td><td ng-bind=memberService.alipay>1</td><td ng-bind=memberService.cash>1</td><td ng-bind=memberService.card>1</td><td ng-bind=memberService.check>1</td><td ng-bind=memberService.pos>1</td><td ng-bind=memberService.subtotal style=color:#20a0ff>1</td></tr><tr class=trHover><td>卡工本费</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.cardFee.quantity>0</td><td>20</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.cardFee.wx>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.cardFee.alipay>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.cardFee.cash>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.cardFee.card>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.cardFee.check>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.cardFee.pos>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.cardFee.subtotal style=color:#20a0ff>1</td></tr><tr class=trHover><td>办卡押金</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.bail.quantity>0</td><td>20</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.bail.wx>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.bail.alipay>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.bail.cash>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.bail.card>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.bail.check>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.bail.pos>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.bail.subtotal style=color:#20a0ff>1</td></tr><tr class=trHover><td>退卡押金</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.refundBail.quantity>0</td><td>20</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.refundBail.wx>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.refundBail.alipay>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.refundBail.cash>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.refundBail.card>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.refundBail.check>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.refundBail.pos>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.statuses.refundBail.subtotal style=color:#20a0ff>1</td></tr><!-- <tr class="trHover">\n                                    <td>退款</td>\n                                    <td>暂无</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.refund.wx">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.refund.alipay">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.refund.cash">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.refund.card">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.refund.check">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.refund.pos">1</td>\n                                    <td ng-bind="orgFinanceCashallCtrl.resultType.statuses.refund.subtotal" style="color:#20a0ff;">1</td>\n                                </tr> --><tr class=trHover><td>合计</td><td>0</td><td>0</td><td ng-bind=orgFinanceCashallCtrl.resultType.wxTotal style=color:#20a0ff>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.alipayTotal style=color:#20a0ff>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.cashTotal style=color:#20a0ff>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.cardTotal style=color:#20a0ff>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.checkTotal style=color:#20a0ff>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.posTotal style=color:#20a0ff>1</td><td ng-bind=orgFinanceCashallCtrl.resultType.subtotal style=color:#20a0ff>1</td></tr></table></div></div></div></div></div></div></div><style>table{\n        border:1px solid #000;\n        text-align: center;\n        margin-top: 20px;\n    }\n    tr{\n        border:1px solid #000;\n    }\n    td{\n        border:1px solid #000;\n        padding:5px; \n    }</style><!-- 纠错操作 --><div class=bgGary ng-show=orgFinanceCashallCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=orgFinanceCashallCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{orgFinanceCashallCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="orgFinanceCashallCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{orgFinanceCashallCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="orgFinanceCashallCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=orgFinanceCashallCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=orgFinanceCashallCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=orgFinanceCashallCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=orgFinanceCashallCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 预览详情 --><div class=bgGary ng-show=orgFinanceCashallCtrl.showDetail><div class=middle><div id=box class="form_div center" style="width: 110rem;height: 650px;overflow-y: auto;padding: 20px;padding-bottom: 50px;border-radius: 10px;box-shadow: #ccc 0 0 3px 3px"><div><div class="form_title float_left">详情</div><img src=assets/images/close.png class="float_right pointer" ng-click=orgFinanceCashallCtrl.close()></div><div class=clear></div><div class=cancelTable><div class="cancelThTr height_40"><div class="cancelTh width_13 ellipsis" style="text-indent: 20px">订单时间</div><div class="cancelTh width_10 ellipsis">用户名</div><div class="cancelTh width_8 ellipsis">金额</div><div class="cancelTh width_38 ellipsis">详情</div><div class="cancelTh width_15 ellipsis">提交人</div><div class="cancelTh width_13" style="position: relative"><div class=ellipsis style="float:left;max-width: 90px" ng-bind=orgFinanceCashallCtrl.showPaymentName>支付方式</div><div class=downBtn ng-click="orgFinanceCashallCtrl.showChoosePaymentBox=!orgFinanceCashallCtrl.showChoosePaymentBox"></div><div class="form_select_div finance_selectBox" ng-show=orgFinanceCashallCtrl.showChoosePaymentBox><div class="select_cell pointer ellipsis" ng-repeat="payment in orgFinanceCashallCtrl.paymentArr" ng-bind=payment.name ng-click=orgFinanceCashallCtrl.choosePaymentName(payment)>默认按钮</div></div></div><div class="cancelTh width_8 ellipsis">操作</div></div><div class=cancelTr ng-repeat="record in orgFinanceCashallCtrl.recordsDetail" style="{{record.state?\'background: #f2f2f2\':\'\'}}"><div class="cancelTd width_13 ellipsis" ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm:ss\'" style="text-indent: 20px"></div><div class="cancelTd width_10 ellipsis" ng-bind=record.name></div><div class="cancelTd width_8 ellipsis" ng-bind="record.cost | currency:\'\'"></div><div class="cancelTd width_38 ellipsis" ng-bind="record.description+\' \'+(record.remark?\'(\'+record.remark+\')\':\'\')" title="{{record.description+\' \'+(record.remark?\'(\'+record.remark+\')\':\'\')}}"></div><div class="cancelTd width_15 ellipsis" ng-bind="record.workerName==\'微信\'?\'微信用户\':record.workerName"></div><div class="cancelTd width_13 ellipsis" ng-bind=record.payment></div><div class="cancelTd width_8 ellipsis" ng-hide=record.state><span style="cursor: pointer;color: #8492a6" ng-click=orgFinanceCashallCtrl.openErrChangeBox(record._id)>纠错</span></div><div class="cancelTd width_8 ellipsis" ng-show=record.state>纠错单</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgFinanceCashallCtrl.pagination.numPages > 1" total-items=orgFinanceCashallCtrl.pagination.totalItems ng-model=orgFinanceCashallCtrl.pagination.page items-per-page=orgFinanceCashallCtrl.pagination.itemsPerPage max-size=orgFinanceCashallCtrl.pagination.maxSize boundary-links="{{orgFinanceCashallCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgFinanceCashallCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgFinanceCashallCtrl.pageChanged()></pagination></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgFinanceCashallCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgFinanceCashallCtrl.wordOK>22212</div><div class=promptClose ng-click=orgFinanceCashallCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgFinanceCashallCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgFinanceCashallCtrl.wordERR>22212</div><div class=promptClose ng-click=orgFinanceCashallCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgFinanceCashallCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=orgFinanceCashallCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/organization/finance/field/finance-field.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-cashall>营业收入</div><div class="field_titleNormal field_titleChoose">场地/综合服务收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-shop>小卖部收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-prep>微信/支付宝</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-preppay>押金列表</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-service-count>会员卡使用明细表</div></div><div class=field_bookBoxPostition><div><div><div class=field_selectBoxOne style="height: auto"><div><div><div class=field_selectName style="text-indent: 0;width: 80px">选择日期</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="orgFinanceFieldCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="orgFinanceFieldCtrl.showChooseStartDateBox=!orgFinanceFieldCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=orgFinanceFieldCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=orgFinanceFieldCtrl.closeChooseStartDateBox() ng-date=orgFinanceFieldCtrl.startDate></datetimepick></div></div><div class=float_left style="height: 40px;line-height: 40px;padding: 0 10px">至</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="orgFinanceFieldCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="orgFinanceFieldCtrl.showChooseEndDateBox=!orgFinanceFieldCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=orgFinanceFieldCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=orgFinanceFieldCtrl.closeChooseEndDateBox() ng-date=orgFinanceFieldCtrl.endDate></datetimepick></div></div><div ng-show="orgFinanceFieldCtrl.searchVenueIdArr.length>0"><div class="button2_normal float_right pointer" style="margin:0 20px" ng-click=orgFinanceFieldCtrl.export()>导出</div></div><div style=clear:both></div></div><div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择场馆</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="venue in orgFinanceFieldCtrl.venues" ng-click="(venue.image==\'manyChoose_imageG\')?\'\':orgFinanceFieldCtrl.chooseVenueName(venue)"><div class="singleChoose_imageBox {{venue.image}} {{venue.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=venue.name style="{{venue.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择项目</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="item in orgFinanceFieldCtrl.items" ng-click="(item.image==\'manyChoose_imageG\')?\'\':orgFinanceFieldCtrl.chooseItemName(item)"><div class="singleChoose_imageBox {{item.image}} {{item.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=item.name style="{{item.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div style=clear:both></div></div></div></div></div><table id=alltable style="width: 106rem"><tr><td colspan=8><span>消费汇总表：</span> <span ng-bind=orgFinanceFieldCtrl.venueName></span></td></tr><tr><td colspan=8><span>时间范围：</span> <span ng-bind=orgFinanceFieldCtrl.dateName></span></td></tr><tr><td>项目/综合服务名称</td><td>资金收入（含现金、微信、支付宝、转账、支票、POS机）</td><td>余额支付</td><td>虚拟卡支付</td><td>专用账户支付</td><td>退款</td><td style="color: #20a0ff">合计</td><td>详情</td></tr><tr class=trHover ng-repeat="ip in orgFinanceFieldCtrl.itemAndProduct"><td ng-bind=ip.ipName></td><td ng-bind=ip.payment.cashAll></td><td ng-bind=ip.payment.member></td><td ng-bind=ip.payment.member_vir></td><td ng-bind=ip.payment.member_spe></td><td ng-bind=ip.payment.refund></td><td ng-bind=ip.payment.subtotal style="color: #20a0ff"></td><td style="color: #20a0ff;cursor: pointer" ng-click=orgFinanceFieldCtrl.initCondition(ip)>详情</td></tr><!-- <tr><td colspan="8" style="text-align: center;font-weight: bold;">一级分类</td></tr> --><tr class=trHover ng-repeat="first in orgFinanceFieldCtrl.firstcategory"><td ng-bind=first.ipName></td><td ng-bind=first.payment.cashAll></td><td ng-bind=first.payment.member></td><td ng-bind=first.payment.member_vir></td><td ng-bind=first.payment.member_spe></td><td ng-bind=first.payment.refund></td><td ng-bind=first.payment.subtotal style="color: #20a0ff"></td><td style="color: #20a0ff;cursor: pointer" ng-click=orgFinanceFieldCtrl.initCondition(first)>详情</td></tr><tr class=trHover><td ng-bind=orgFinanceFieldCtrl.all.ipName></td><td ng-bind=orgFinanceFieldCtrl.all.payment.cashAll></td><td ng-bind=orgFinanceFieldCtrl.all.payment.member></td><td ng-bind=orgFinanceFieldCtrl.all.payment.member_vir></td><td ng-bind=orgFinanceFieldCtrl.all.payment.member_spe></td><td ng-bind=orgFinanceFieldCtrl.all.payment.refund></td><td ng-bind=orgFinanceFieldCtrl.all.payment.subtotal style="color: #20a0ff"></td><td style="color: #20a0ff;cursor: pointer" ng-click=orgFinanceFieldCtrl.initCondition(orgFinanceFieldCtrl.all)>详情</td></tr><tr class=trHover><td colspan=1>制表人：</td><td colspan=1></td><td colspan=1>复核人：</td><td colspan=1></td><td colspan=1>审核人：</td><td colspan=3></td></tr></table></div></div></div></div></div></div><style>table{\n        border:1px solid #000;\n        text-align: center;\n        margin-top: 20px;\n    }\n    tr{\n        border:1px solid #000;\n    }\n    td{\n        border:1px solid #000;\n        padding:5px; \n    }</style><!-- 纠错操作 --><div class=bgGary ng-show=orgFinanceFieldCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=orgFinanceFieldCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{orgFinanceFieldCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="orgFinanceFieldCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{orgFinanceFieldCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="orgFinanceFieldCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=orgFinanceFieldCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=orgFinanceFieldCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=orgFinanceFieldCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=orgFinanceFieldCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 预览详情 --><div class=bgGary ng-show=orgFinanceFieldCtrl.showDetail><div class=middle><div id=box class="form_div center" style="width: 110rem;height: 700px;overflow-y: auto;padding: 20px;padding-bottom: 50px;border-radius: 10px;box-shadow: #ccc 0 0 3px 3px"><div><div class="form_title float_left">详情</div><img src=assets/images/close.png class="float_right pointer" ng-click=orgFinanceFieldCtrl.close()><div class=clear></div></div><div><div style="height: 36px;line-height: 34px;margin-top: 20px;float: left" ng-hide="orgFinanceFieldCtrl.searchStatus==\'other\'"><div class="fbonce_t_Title fbonce_t_once bgcolorB" ng-click="orgFinanceFieldCtrl.changeStatus(\'field\')">场地消费</div><div class="fbonce_t_Title fbonce_t_long" ng-click="orgFinanceFieldCtrl.changeStatus(\'other\')">其他消费</div><div class=clear></div></div><div style="height: 36px;line-height: 34px;margin-top: 20px;float: left" ng-show="orgFinanceFieldCtrl.searchStatus==\'other\'"><div class="fbonce_t_Title fbonce_t_once" ng-click="orgFinanceFieldCtrl.changeStatus(\'field\')">场地消费</div><div class="fbonce_t_Title fbonce_t_long bgcolorB" ng-click="orgFinanceFieldCtrl.changeStatus(\'other\')">其他消费</div><div class=clear></div></div><div style="float: left;margin-top: 20px;margin-left: 20px;background: #fff" ng-show="orgFinanceFieldCtrl.searchStatus==\'other\'"><div style="float: left" id=search class="xt_searchBox float_left"><input class=xt_searchInput style="text-indent: 10px" placeholder=请输入备注 ng-model=orgFinanceFieldCtrl.searchRecordRemark><div class=xt_searchImage ng-click=orgFinanceFieldCtrl.searchDetail()></div></div><div class=clear></div></div><div style="float: left;margin-top: 20px;margin-left: 20px;background: #fff" ng-show="orgFinanceFieldCtrl.searchStatus==\'other\'"><div style="float: left" id=search class="xt_searchBox float_left"><input class=xt_searchInput style="text-indent: 10px" placeholder=请输入联系人 ng-model=orgFinanceFieldCtrl.searchProductContacts><div class=xt_searchImage ng-click=orgFinanceFieldCtrl.searchDetail()></div></div><div class=clear></div></div><div class="select field_select" style="margin-top: 20px;margin-left: 20px" ng-show="orgFinanceFieldCtrl.searchStatus==\'other\'"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgFinanceFieldCtrl.searchSecond==\'选择二级分类\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgFinanceFieldCtrl.searchSecond ng-click="orgFinanceFieldCtrl.openShowSearchSecond=!orgFinanceFieldCtrl.openShowSearchSecond">场馆1</div></div><div class=form_select_div style="position:relative;z-index: 100" ng-show=orgFinanceFieldCtrl.openShowSearchSecond><div class="select_cell pointer ellipsis" ng-repeat="second in orgFinanceFieldCtrl.secondCategories" ng-bind=second.name ng-click=orgFinanceFieldCtrl.chooseSecond(second)>默认按钮</div></div></div><div class="select field_select" style="margin-top: 20px;margin-left: 20px" ng-show="orgFinanceFieldCtrl.searchStatus==\'other\'"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgFinanceFieldCtrl.searchProduct==\'选择综合服务\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgFinanceFieldCtrl.searchProduct ng-click="orgFinanceFieldCtrl.openShowSearchProduct=!orgFinanceFieldCtrl.openShowSearchProduct">场馆1</div></div><div class=form_select_div style="position:relative;z-index: 100" ng-show=orgFinanceFieldCtrl.openShowSearchProduct><div class="select_cell pointer ellipsis" ng-repeat="product in orgFinanceFieldCtrl.products" ng-bind=product.name title={{product.name}} ng-click=orgFinanceFieldCtrl.chooseProduct(product)>默认按钮</div></div></div><div style="margin-top: 20px"><div class="button2_normal float_right pointer" style="margin:0 20px" ng-click=orgFinanceFieldCtrl.exportDetail()>导出</div></div><div class=clear></div></div><div class=cancelTable><div class="cancelThTr height_40"><div class="cancelTh width_13 ellipsis" style="text-indent: 20px">订单时间</div><div class="cancelTh width_10 ellipsis">用户名</div><div class="cancelTh width_8 ellipsis">金额</div><div class="cancelTh width_38 ellipsis">详情</div><div class="cancelTh width_15 ellipsis">提交人</div><div class="cancelTh width_13" style="position: relative"><div class=ellipsis style="float:left;max-width: 90px" ng-bind=orgFinanceFieldCtrl.showPaymentName>支付方式</div><div class=downBtn ng-click="orgFinanceFieldCtrl.showChoosePaymentBox=!orgFinanceFieldCtrl.showChoosePaymentBox"></div><div class="form_select_div finance_selectBox" ng-show=orgFinanceFieldCtrl.showChoosePaymentBox><div class="select_cell pointer ellipsis" ng-repeat="payment in orgFinanceFieldCtrl.paymentArr" ng-bind=payment.name ng-click=orgFinanceFieldCtrl.choosePaymentName(payment)>默认按钮</div></div></div><div class="cancelTh width_8 ellipsis">操作</div></div><div class=cancelTr ng-repeat="record in orgFinanceFieldCtrl.recordsDetail" style="{{record.state?\'background: #f2f2f2\':\'\'}}"><div class="cancelTd width_13 ellipsis" ng-bind="record.checkDate?record.checkDate:record.createDate | date:\'yyyy-MM-dd HH:mm:ss\'" style="text-indent: 20px"></div><div class="cancelTd width_10 ellipsis" ng-bind=record.name></div><div class="cancelTd width_8 ellipsis" ng-bind="record.cost | currency:\'\'"></div><div class="cancelTd width_38 ellipsis" ng-bind="record.description+\' \'+(record.remark?\'(备注：\'+record.remark+\')\':\'\')+(record.productContacts?\'(附加联系人：\'+record.productContacts+\')\':\'\')" title="{{record.description+\' \'+(record.remark?\'(备注：\'+record.remark+\')\':\'\')+(record.productContacts?\'(附加联系人：\'+record.productContacts+\')\':\'\')}}"></div><div class="cancelTd width_15 ellipsis" ng-bind="record.workerName==\'微信\'?\'微信用户\':record.workerName"></div><div class="cancelTd width_13 ellipsis" ng-bind=record.payment></div><div class="cancelTd width_8 ellipsis" ng-hide=record.state><span style="cursor: pointer;color: #8492a6" ng-click=orgFinanceFieldCtrl.openErrChangeBox(record._id)>纠错</span></div><div class="cancelTd width_8 ellipsis" ng-show=record.state>纠错单</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgFinanceFieldCtrl.pagination.numPages > 1" total-items=orgFinanceFieldCtrl.pagination.totalItems ng-model=orgFinanceFieldCtrl.pagination.page items-per-page=orgFinanceFieldCtrl.pagination.itemsPerPage max-size=orgFinanceFieldCtrl.pagination.maxSize boundary-links="{{orgFinanceFieldCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgFinanceFieldCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgFinanceFieldCtrl.pageChanged()></pagination><div class=float_right style="margin-top: 20px;font-size: 16px"><span>总金额：</span> <span style="color: #ff4949" ng-bind="\'￥\'+orgFinanceFieldCtrl.cost">100</span></div></div></div></div><div style="width: 0;height: 0;overflow: hidden"><table id=alltable2><tr><td>订单时间</td><td>用户名</td><td>金额</td><td>详情</td><td>提交人</td><td>支付方式</td></tr><tr ng-repeat="record in orgFinanceFieldCtrl.exportRecordsDetail"><td ng-bind="record.checkDate?record.checkDate:record.createDate | date:\'yyyy-MM-dd HH:mm:ss\'"></td><td ng-bind=record.name></td><td ng-bind="record.cost | currency:\'\'"></td><td ng-bind="record.description+\' \'+(record.remark?\'(备注：\'+record.remark+\')\':\'\')+(record.productContacts?\'(附加联系人：\'+record.productContacts+\')\':\'\')"></td><td ng-bind="record.workerName==\'微信\'?\'微信用户\':record.workerName"></td><td ng-bind=record.payment></td></tr></table></div><!-- 成功提示 --><div class=bgGary ng-show=orgFinanceFieldCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgFinanceFieldCtrl.wordOK>22212</div><div class=promptClose ng-click=orgFinanceFieldCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgFinanceFieldCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgFinanceFieldCtrl.wordERR>22212</div><div class=promptClose ng-click=orgFinanceFieldCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgFinanceFieldCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=orgFinanceFieldCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'),
            a.put("app/organization/finance/preporder/finance-preporder.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-cashall>营业收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-field>场地/综合服务收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-shop>小卖部收入</div><div class="field_titleNormal field_titleChoose">微信/支付宝</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-preppay>押金列表</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-service-count>会员卡使用明细表</div></div><div class=field_bookBoxPostition><div><div><div class=field_selectBoxOne style="height: auto"><div><div><div class=field_selectName style="text-indent: 0;width: 80px">选择日期</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="orgFinancePrepCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="orgFinancePrepCtrl.showChooseStartDateBox=!orgFinancePrepCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=orgFinancePrepCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=orgFinancePrepCtrl.closeChooseStartDateBox() ng-date=orgFinancePrepCtrl.startDate></datetimepick></div></div><div class=float_left style="height: 40px;line-height: 40px;padding: 0 10px">至</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="orgFinancePrepCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="orgFinancePrepCtrl.showChooseEndDateBox=!orgFinancePrepCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=orgFinancePrepCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=orgFinancePrepCtrl.closeChooseEndDateBox() ng-date=orgFinancePrepCtrl.endDate></datetimepick></div></div><div ng-show="orgFinancePrepCtrl.searchVenueIdArr.length>0"><div class="button2_normal float_right pointer" style="margin:0 20px" ng-click=orgFinancePrepCtrl.export()>导出</div></div><div style=clear:both></div></div><div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择场馆</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="venue in orgFinancePrepCtrl.venues" ng-click="(venue.image==\'manyChoose_imageG\')?\'\':orgFinancePrepCtrl.chooseVenueName(venue)"><div class="singleChoose_imageBox {{venue.image}} {{venue.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=venue.name style="{{venue.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择提交人</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="worker in orgFinancePrepCtrl.workers" ng-click="(worker.image==\'manyChoose_imageG\')?\'\':orgFinancePrepCtrl.chooseWorkerName(worker)"><div class="singleChoose_imageBox {{worker.image}} {{worker.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=worker.name style="{{worker.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div style=clear:both></div></div></div></div></div><!-- 阿宝版本 --><table id=alltable style="width: 106rem"><tr><td colspan=24><span>中心微信支付宝收入汇总表：</span> <span ng-bind=orgFinancePrepCtrl.venueName></span></td></tr><tr><td colspan=24><span>时间范围：</span> <span ng-bind=orgFinancePrepCtrl.dateName></span></td></tr><tr><td rowspan=2>柜员名称</td><td colspan=10>支付宝</td><td colspan=11>微信</td><td rowspan=2 style="color: #20a0ff">合计</td><td rowspan=2>详情</td></tr><tr><td>场地收入</td><td>柜台充值</td><td>综合服务费</td><td>会员服务费</td><td>小卖部</td><td>门票</td><td>工本费</td><td>卡押金</td><td>专用账户充值</td><td style="color: #20a0ff">合计</td><td>场地收入</td><td>线上充值</td><td>柜台充值</td><td>综合服务费</td><td>会员服务费</td><td>小卖部</td><td>门票</td><td>工本费</td><td>卡押金</td><td>专用账户充值</td><td style="color: #20a0ff">合计</td></tr><tr class=trHover ng-repeat="worker in orgFinancePrepCtrl.result"><td ng-bind=worker.workerName></td><td ng-bind=worker.payment.alipay.field></td><td ng-bind=worker.payment.alipay.charge></td><td ng-bind=worker.payment.alipay.product></td><td ng-bind=worker.payment.alipay.memberService></td><td ng-bind=worker.payment.alipay.shopProduct></td><td ng-bind=worker.payment.alipay.ticket></td><td ng-bind=worker.payment.alipay.cardFee></td><td ng-bind=worker.payment.alipay.bail></td><td ng-bind=worker.payment.alipay.chargeSpe></td><td ng-bind=worker.payment.alipay.subtotal style="color: #20a0ff"></td><td ng-bind=worker.payment.wx.field></td><td ng-bind=worker.payment.wx.charge_online></td><td ng-bind=worker.payment.wx.charge></td><td ng-bind=worker.payment.wx.product></td><td ng-bind=worker.payment.wx.memberService></td><td ng-bind=worker.payment.wx.shopProduct></td><td ng-bind=worker.payment.wx.ticket></td><td ng-bind=worker.payment.wx.cardFee></td><td ng-bind=worker.payment.wx.bail></td><td ng-bind=worker.payment.wx.chargeSpe></td><td ng-bind=worker.payment.wx.subtotal style="color: #20a0ff"></td><td ng-bind=worker.payment.subtotal style="color: #20a0ff"></td><td style="color: #20a0ff;cursor: pointer" ng-click=orgFinancePrepCtrl.initCondition(worker.workerName)>详情</td></tr><tr class=trHover><td colspan=2>制表人：</td><td colspan=3></td><td colspan=2>复核人：</td><td colspan=3></td><td colspan=2>审核人：</td><td colspan=12></td></tr></table></div></div></div></div></div></div><style>table{\n        border:1px solid #000;\n        text-align: center;\n        margin-top: 20px;\n    }\n    tr{\n        border:1px solid #000;\n    }\n    td{\n        border:1px solid #000;\n        padding:5px; \n    }</style><!-- 纠错操作 --><div class=bgGary ng-show=orgFinancePrepCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=orgFinancePrepCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{orgFinancePrepCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="orgFinancePrepCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{orgFinancePrepCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="orgFinancePrepCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=orgFinancePrepCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=orgFinancePrepCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=orgFinancePrepCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=orgFinancePrepCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 预览详情 --><div class=bgGary ng-show=orgFinancePrepCtrl.showDetail><div class=middle><div id=box class="form_div center" style="width: 110rem;height: 650px;overflow-y: auto;padding: 20px;padding-bottom: 50px;border-radius: 10px;box-shadow: #ccc 0 0 3px 3px"><div><div class="form_title float_left">详情</div><img src=assets/images/close.png class="float_right pointer" ng-click=orgFinancePrepCtrl.close()></div><div class=clear></div><div class=cancelTable><div class="cancelThTr height_40"><div class="cancelTh width_21 ellipsis" style="text-indent: 20px">订单时间</div><!-- <div  class="cancelTh width_10 ellipsis">用户名</div> --><div class="cancelTh width_21 ellipsis">金额</div><div class="cancelTh width_21 ellipsis">详情</div><div class="cancelTh width_21 ellipsis">提交人</div><div class="cancelTh width_21" style="position: relative"><div class=ellipsis style="float:left;max-width: 90px" ng-bind=orgFinancePrepCtrl.showPaymentName>支付方式</div><div class=downBtn ng-click="orgFinancePrepCtrl.showChoosePaymentBox=!orgFinancePrepCtrl.showChoosePaymentBox"></div><div class="form_select_div finance_selectBox" ng-show=orgFinancePrepCtrl.showChoosePaymentBox><div class="select_cell pointer ellipsis" ng-repeat="payment in orgFinancePrepCtrl.paymentArr" ng-bind=payment.name ng-click=orgFinancePrepCtrl.choosePaymentName(payment)>默认按钮</div></div></div></div><div class=cancelTr ng-repeat="preporder in orgFinancePrepCtrl.prepordersDetail" style="{{record.state?\'background: #f2f2f2\':\'\'}}"><div class="cancelTd width_21 ellipsis" ng-bind="preporder.createDate | date:\'yyyy-MM-dd HH:mm:ss\'" style="text-indent: 20px"></div><!-- <div class="cancelTd width_10 ellipsis" ng-bind="preporder.name"></div> --><div class="cancelTd width_21 ellipsis" ng-bind=preporder.total_fee></div><div class="cancelTd width_21 ellipsis" ng-bind=preporder.status title={{record.status}}></div><div class="cancelTd width_21 ellipsis" ng-bind=preporder.workerName></div><div class="cancelTd width_21 ellipsis" ng-bind=preporder.payment></div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgFinancePrepCtrl.pagination.numPages > 1" total-items=orgFinancePrepCtrl.pagination.totalItems ng-model=orgFinancePrepCtrl.pagination.page items-per-page=orgFinancePrepCtrl.pagination.itemsPerPage max-size=orgFinancePrepCtrl.pagination.maxSize boundary-links="{{orgFinancePrepCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgFinancePrepCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgFinancePrepCtrl.pageChanged()></pagination></div></div></div><!-- 导出xls --><div style="width: 0px;height: 0px;overflow: hidden"><table id=alltable><tr><td ng-bind="orgFinancePrepCtrl.venueName+\'的柜员微信/支付宝结算收银报表\'" colspan=5 style="text-align: center"></td></tr><tr><td>柜员</td><td>现金支付</td><td>微信支付</td><td>支付宝支付</td><td>合计</td></tr><tr ng-repeat="worker in orgFinancePrepCtrl.result"><td ng-bind=worker.name>1</td><td ng-bind=worker.cash>1</td><td ng-bind=worker.wx>1</td><td ng-bind=worker.alipay>1</td><td ng-bind=worker.all>1</td></tr></table></div><!-- 预览 --><div class=bgGary ng-show=orgFinancePrepCtrl.showPreview><div class=middle><div id=box class="form_div center" style="width: 560px;padding: 20px"><div><div class="form_title float_left" ng-bind="orgFinancePrepCtrl.venueName+\'的柜员微信/支付宝结算收银报表\'"></div><img src=assets/images/close.png class="float_right pointer" ng-click="orgFinancePrepCtrl.showPreview=false"></div><div class=clear></div><div class=form_error_font></div><div class=cancelTable><div class="cancelThTr height_40" style="width: 520px"><div class="cancelTh width_100">柜员</div><div class="cancelTh width_100">微信支付</div><div class="cancelTh width_100">支付宝支付</div><div class="cancelTh width_100">合计</div></div><div class=cancelTr ng-repeat="worker in orgFinancePrepCtrl.result" style="width: 520px"><div class="cancelTd width_100" ng-bind=worker.name>1</div><div class="cancelTd width_100" ng-bind=worker.wx>1</div><div class="cancelTd width_100" ng-bind=worker.alipay>1</div><div class="cancelTd width_100" ng-bind=worker.all>1</div></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgFinancePrepCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgFinancePrepCtrl.wordOK>22212</div><div class=promptClose ng-click=orgFinancePrepCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgFinancePrepCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgFinancePrepCtrl.wordERR>22212</div><div class=promptClose ng-click=orgFinancePrepCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgFinancePrepCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=orgFinancePrepCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/organization/finance/preppay/preppay-view.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div class=field_bookBox><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-cashall>营业收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-field>场地/综合服务收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-shop>小卖部收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-prep>微信/支付宝</div><div class="field_titleNormal field_titleChoose">押金列表</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-service-count>会员卡使用明细表</div></div><div class=field_bookBoxPostition><div class=field_selectBoxOne style="height: auto"><div><div><div class=field_selectName style="text-indent: 0;width: 80px">选择日期</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="orgFinancePreppayCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="orgFinancePreppayCtrl.showChooseStartDateBox=!orgFinancePreppayCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=orgFinancePreppayCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=orgFinancePreppayCtrl.closeChooseBox() ng-date=orgFinancePreppayCtrl.startDate></datetimepick></div></div><div class=float_left style="height: 40px;line-height: 40px;padding: 0 10px">至</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="orgFinancePreppayCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="orgFinancePreppayCtrl.showChooseEndDateBox=!orgFinancePreppayCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=orgFinancePreppayCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=orgFinancePreppayCtrl.closeChooseBox() ng-date=orgFinancePreppayCtrl.endDate></datetimepick></div></div><div style=clear:both></div></div></div></div><div class=cancelTable style="margin-top: 20px"><div class="cancelThTr height_40"><div class="cancelTh width_25 ellipsis" style="text-indent: 20px">单号</div><div class="cancelTh width_25 ellipsis">金额</div><div class="cancelTh width_25 ellipsis">提交人</div><div class="cancelTh width_25 ellipsis">日期</div></div><div class=cancelTr ng-repeat="record in orgFinancePreppayCtrl.records"><div class="cancelTd width_25 ellipsis" style="text-indent: 20px" ng-bind=record._id></div><div class="cancelTd width_25 ellipsis" ng-bind="(record.status==\'prepPay\'?\'+\':\'-\')+record.cost"></div><div class="cancelTd width_25 ellipsis" ng-bind=record.workerName></div><div class="cancelTd width_25 ellipsis" ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm\'"></div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgFinancePreppayCtrl.pagination.numPages > 1" total-items=orgFinancePreppayCtrl.pagination.totalItems ng-model=orgFinancePreppayCtrl.pagination.page items-per-page=orgFinancePreppayCtrl.pagination.itemsPerPage max-size=orgFinancePreppayCtrl.pagination.maxSize boundary-links="{{orgFinancePreppayCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgFinancePreppayCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgFinancePreppayCtrl.pageChanged()></pagination><div class=float_right style="margin-top: 20px;font-size: 16px"><span>收入现金押金:</span> <span style="color: #ff4949" ng-bind="\'￥\'+orgFinancePreppayCtrl.inCost"></span> <span style="margin-left: 20px">退出现金押金:</span> <span style="color: #ff4949" ng-bind="\'￥\'+orgFinancePreppayCtrl.outCost"></span> <span style="margin-left: 20px">合计:</span> <span style="color: #ff4949" ng-bind="\'￥\'+orgFinancePreppayCtrl.cost">100</span></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgFinancePreppayCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgFinancePreppayCtrl.wordOK>22212</div><div class=promptClose ng-click=orgFinancePreppayCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgFinancePreppayCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgFinancePreppayCtrl.wordERR>22212</div><div class=promptClose ng-click=orgFinancePreppayCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgFinancePreppayCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=orgFinancePreppayCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/organization/finance/service/service-count.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-cashall>营业收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-field>场地/综合服务收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-shop>小卖部收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-prep>微信/支付宝</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-preppay>押金列表</div><div class="field_titleNormal field_titleChoose">包玉刚运动人数明细表</div></div><div class=field_bookBoxPostition><div><div><div class=field_selectBoxOne style="height: auto"><div><div><div class=field_selectName style="text-indent: 0;width: 80px">选择日期</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="orgServiceCountCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="orgServiceCountCtrl.showChooseStartDateBox=!orgServiceCountCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=orgServiceCountCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=orgServiceCountCtrl.closeChooseStartDateBox() ng-date=orgServiceCountCtrl.startDate></datetimepick></div></div><div class=float_left style="height: 40px;line-height: 40px;padding: 0 10px">至</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="orgServiceCountCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="orgServiceCountCtrl.showChooseEndDateBox=!orgServiceCountCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=orgServiceCountCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=orgServiceCountCtrl.closeChooseEndDateBox() ng-date=orgServiceCountCtrl.endDate></datetimepick></div></div><div><div class="button2_normal float_right" style="margin:0 20px" ng-click="orgServiceCountCtrl.export(\'alltable\')">导出</div></div><div style=clear:both></div></div></div></div></div><div><table id=alltable style="width: 100%"><tr><td colspan=2><span>会员卡使用明细表</span> <span ng-bind=orgServiceCountCtrl.venueName></span></td></tr><tr><td colspan=2><span>时间范围：</span> <span ng-bind=orgServiceCountCtrl.dateName></span></td></tr><tr><td>名称</td><td>次数</td></tr><tr class=trHover ng-repeat="ticket in orgServiceCountCtrl.useCount.ticketArr"><td ng-bind=ticket.ticketName>1</td><td ng-bind=ticket.count>1</td></tr><tr class=trHover ng-repeat="service in orgServiceCountCtrl.useCount.historyArr"><td ng-bind=service.memberServiceName>1</td><td ng-bind=service.count>1</td></tr></table></div><div style="margin-top: 20px;margin-bottom: 20px"><span style="margin-right: 20px" ng-bind="\'所有使用人数：\'+orgServiceCountCtrl.useCount.allCount+\'人\'"></span> <span style="margin-right: 20px" ng-bind="\'时间卡：\'+orgServiceCountCtrl.useCount.dateCount+\'人\'"></span> <span style="margin-right: 20px" ng-bind="\'次数卡：\'+orgServiceCountCtrl.useCount.timeCount+\'人\'"></span> <span style="margin-right: 20px" ng-bind="\'0元票：\'+orgServiceCountCtrl.useCount.ticketCountNoPrice+\'人\'"></span> <span style="margin-right: 20px" ng-bind="\'其他票：\'+orgServiceCountCtrl.useCount.ticketCount+\'人\'"></span></div></div></div></div></div></div></div><style>table{\n        border:1px solid #000;\n        text-align: center;\n        margin-top: 20px;\n    }\n    tr{\n        border:1px solid #000;\n    }\n    td{\n        border:1px solid #000;\n        padding:5px; \n    }</style><!-- 纠错操作 --><div class=bgGary ng-show=orgServiceCountCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=orgServiceCountCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{orgServiceCountCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="orgServiceCountCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{orgServiceCountCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="orgServiceCountCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=orgServiceCountCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=orgServiceCountCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=orgServiceCountCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=orgServiceCountCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 预览详情 --><div class=bgGary ng-show=orgServiceCountCtrl.showDetail><div class=middle><div id=box class="form_div center" style="width: 110rem;height: 650px;overflow-y: auto;padding: 20px;padding-bottom: 50px;border-radius: 10px;box-shadow: #ccc 0 0 3px 3px"><div><div class="form_title float_left">详情</div><img src=assets/images/close.png class="float_right pointer" ng-click=orgServiceCountCtrl.close()></div><div class=clear></div><div class=cancelTable><div class="cancelThTr height_40"><div class="cancelTh width_13 ellipsis" style="text-indent: 20px">订单时间</div><div class="cancelTh width_10 ellipsis">用户名</div><div class="cancelTh width_8 ellipsis">金额</div><div class="cancelTh width_38 ellipsis">详情</div><div class="cancelTh width_15 ellipsis">提交人</div><div class="cancelTh width_13" style="position: relative"><div class=ellipsis style="float:left;max-width: 90px" ng-bind=orgServiceCountCtrl.showPaymentName>支付方式</div><div class=downBtn ng-click="orgServiceCountCtrl.showChoosePaymentBox=!orgServiceCountCtrl.showChoosePaymentBox"></div><div class="form_select_div finance_selectBox" ng-show=orgServiceCountCtrl.showChoosePaymentBox><div class="select_cell pointer ellipsis" ng-repeat="payment in orgServiceCountCtrl.paymentArr" ng-bind=payment.name ng-click=orgServiceCountCtrl.choosePaymentName(payment)>默认按钮</div></div></div><div class="cancelTh width_8 ellipsis">操作</div></div><div class=cancelTr ng-repeat="record in orgServiceCountCtrl.recordsDetail" style="{{record.state?\'background: #f2f2f2\':\'\'}}"><div class="cancelTd width_13 ellipsis" ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm:ss\'" style="text-indent: 20px"></div><div class="cancelTd width_10 ellipsis" ng-bind=record.name></div><div class="cancelTd width_8 ellipsis" ng-bind="record.cost | currency:\'\'"></div><div class="cancelTd width_38 ellipsis" ng-bind="record.description+\' \'+(record.remark?\'(\'+record.remark+\')\':\'\')" title="{{record.description+\' \'+(record.remark?\'(\'+record.remark+\')\':\'\')}}"></div><div class="cancelTd width_15 ellipsis" ng-bind="record.workerName==\'微信\'?\'微信用户\':record.workerName"></div><div class="cancelTd width_13 ellipsis" ng-bind=record.payment></div><div class="cancelTd width_8 ellipsis" ng-hide=record.state><span style="cursor: pointer;color: #8492a6" ng-click=orgServiceCountCtrl.openErrChangeBox(record._id)>纠错</span></div><div class="cancelTd width_8 ellipsis" ng-show=record.state>纠错单</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgServiceCountCtrl.pagination.numPages > 1" total-items=orgServiceCountCtrl.pagination.totalItems ng-model=orgServiceCountCtrl.pagination.page items-per-page=orgServiceCountCtrl.pagination.itemsPerPage max-size=orgServiceCountCtrl.pagination.maxSize boundary-links="{{orgServiceCountCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgServiceCountCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgServiceCountCtrl.pageChanged()></pagination></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgServiceCountCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgServiceCountCtrl.wordOK>22212</div><div class=promptClose ng-click=orgServiceCountCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgServiceCountCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgServiceCountCtrl.wordERR>22212</div><div class=promptClose ng-click=orgServiceCountCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgServiceCountCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=orgServiceCountCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/organization/finance/shop/finance-shop.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-cashall>营业收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-field>场地/综合服务收入</div><div class="field_titleNormal field_titleChoose">小卖部收入</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-prep>微信/支付宝</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-finance-preppay>押金列表</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-service-count>会员卡使用明细表</div></div><div class=field_bookBoxPostition><div><div><div class=field_selectBoxOne style="height: auto"><div><div><div class=field_selectName style="text-indent: 0;width: 80px">选择日期</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="orgFinanceShopCtrl.startDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="orgFinanceShopCtrl.showChooseStartDateBox=!orgFinanceShopCtrl.showChooseStartDateBox"></div></div><div style="z-index: 100" class=input_calendar_datetimepick ng-show=orgFinanceShopCtrl.showChooseStartDateBox><datetimepick class=ng-isolate-scope ng-close=orgFinanceShopCtrl.closeChooseStartDateBox() ng-date=orgFinanceShopCtrl.startDate></datetimepick></div></div><div class=float_left style="height: 40px;line-height: 40px;padding: 0 10px">至</div><div class="input_calendar float_left"><div class=input_calendar_showBox><div class=input_calendar_show style=color:#1f2d3d ng-bind="orgFinanceShopCtrl.endDate | date:\'yyyy-MM-dd\'">项目1</div><div class=input_calendar_showBtn ng-click="orgFinanceShopCtrl.showChooseEndDateBox=!orgFinanceShopCtrl.showChooseEndDateBox"></div></div><div style="z-index: 50" class=input_calendar_datetimepick ng-show=orgFinanceShopCtrl.showChooseEndDateBox><datetimepick class=ng-isolate-scope ng-close=orgFinanceShopCtrl.closeChooseEndDateBox() ng-date=orgFinanceShopCtrl.endDate></datetimepick></div></div><div ng-show="orgFinanceShopCtrl.searchVenueIdArr.length>0"><div class="button2_normal float_right pointer" style="margin:0 20px" ng-click=orgFinanceShopCtrl.export()>导出</div></div><div style=clear:both></div></div><div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择场馆</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="venue in orgFinanceShopCtrl.venues" ng-click="(venue.image==\'manyChoose_imageG\')?\'\':orgFinanceShopCtrl.chooseVenueName(venue)"><div class="singleChoose_imageBox {{venue.image}} {{venue.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=venue.name style="{{venue.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div class=field_selectBoxOne style="margin-top: 0px;width: auto"><div class=field_selectName style="text-indent: 0;width: 80px">选择提交人</div><div class="singleChoose_box float_left"><div class=singleChoose_option style="cursor: text" ng-repeat="worker in orgFinanceShopCtrl.workers" ng-click="(worker.image==\'manyChoose_imageG\')?\'\':orgFinanceShopCtrl.chooseWorkerName(worker)"><div class="singleChoose_imageBox {{worker.image}} {{worker.image==\'manyChoose_imageG\'?\'\':\'pointer\'}}"></div><div class=singleChoose_prompt ng-bind=worker.name style="{{worker.image==\'manyChoose_imageG\'?\'color:#888;\':\'\'}}">每周</div></div></div><div style=clear:both></div></div><div style=clear:both></div></div></div></div></div><table id=alltable style="width: 106rem"><tr><td colspan=8><span>小卖部消费汇总表：</span> <span ng-bind=orgFinanceShopCtrl.venueName></span></td></tr><tr><td colspan=8><span>时间范围：</span> <span ng-bind=orgFinanceShopCtrl.dateName></span></td></tr><tr><td>柜员名</td><td>现金支付</td><td>微信支付</td><td>支付宝支付</td><td>转账支付</td><td>支票支付</td><td>POS机支付</td><td>余额支付</td><td>退款</td><td style="color: #20a0ff">合计</td><td>详情</td></tr><tr class=trHover ng-repeat="worker in orgFinanceShopCtrl.records"><td ng-bind=worker.workerName></td><td ng-bind=worker.payment.cash></td><td ng-bind=worker.payment.wx></td><td ng-bind=worker.payment.alipay></td><td ng-bind=worker.payment.card></td><td ng-bind=worker.payment.check></td><td ng-bind=worker.payment.pos></td><td ng-bind=worker.payment.member></td><td ng-bind=worker.payment.refund></td><td ng-bind=worker.payment.subtotal style="color: #20a0ff"></td><td style="color: #20a0ff;cursor: pointer" ng-click=orgFinanceShopCtrl.initCondition(worker._worker,worker.workerName)>详情</td></tr><tr class=trHover><td colspan=1>制表人：</td><td colspan=1></td><td colspan=1>复核人：</td><td colspan=1></td><td colspan=1>审核人：</td><td colspan=6></td></tr></table></div></div></div></div></div></div><style>table{\n        border:1px solid #000;\n        text-align: center;\n        margin-top: 20px;\n    }\n    tr{\n        border:1px solid #000;\n    }\n    td{\n        border:1px solid #000;\n        padding:5px; \n    }</style><!-- 纠错操作 --><div class=bgGary ng-show=orgFinanceShopCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=orgFinanceShopCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{orgFinanceShopCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="orgFinanceShopCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{orgFinanceShopCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="orgFinanceShopCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=orgFinanceShopCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=orgFinanceShopCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=orgFinanceShopCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=orgFinanceShopCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 预览详情 --><div class=bgGary ng-show=orgFinanceShopCtrl.showDetail><div class=middle><div id=box class="form_div center" style="width: 63rem;max-height: 650px;overflow-y: auto;padding: 20px;padding-bottom: 50px;border-radius: 10px;box-shadow: #ccc 0 0 3px 3px"><div><div class="form_title float_left">小卖部消费明细表</div><img src=assets/images/close.png class="float_right pointer" ng-click=orgFinanceShopCtrl.close()></div><div class=clear></div><table id=table style="width: 60rem"><tr><td colspan=6><span ng-bind=orgFinanceShopCtrl.workerName></span> <span>的小卖部消费明细表：</span> <span ng-bind=orgFinanceShopCtrl.venueName></span></td></tr><tr><td colspan=6><span>时间范围：</span> <span ng-bind=orgFinanceShopCtrl.dateName></span></td></tr><tr><td colspan=2>商品名称</td><td colspan=1>余额支付</td><td colspan=1>非余额支付</td><td colspan=1>数量</td><td colspan=1>金额</td></tr><tr class=trHover ng-repeat="shop in orgFinanceShopCtrl.shopDetails"><td colspan=2 ng-bind=shop.name></td><td colspan=1 ng-bind=shop.member></td><td colspan=1 ng-bind=shop.noMember></td><td colspan=1 ng-bind=shop.quantity></td><td colspan=1 ng-bind=shop.subTotal></td></tr><tr class=trHover><td style="width: 10rem" colspan=1>制表人：</td><td style="width: 10rem" colspan=1 ng-bind=orgFinanceShopCtrl.workerName></td><td style="width: 10rem" colspan=1>复核人：</td><td style="width: 10rem" colspan=1></td><td style="width: 10rem" colspan=1>审核人：</td><td style="width: 10rem" colspan=1></td></tr></table><div><div class="button2_normal pointer" style="margin-top:20px;width: 80px" ng-click="orgFinanceShopCtrl.export(\'table\')">导出</div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgFinanceShopCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgFinanceShopCtrl.wordOK>22212</div><div class=promptClose ng-click=orgFinanceShopCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgFinanceShopCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgFinanceShopCtrl.wordERR>22212</div><div class=promptClose ng-click=orgFinanceShopCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgFinanceShopCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=orgFinanceShopCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'),
            a.put("app/organization/head/head.html", '<div ng-controller="HeadCtrl as headCtrl" style="height:65px;line-height:65px;border-bottom:1px solid #94A8BA"><div style="width: 100rem;height: 65px;margin:0 auto;border:1px solid red;padding: 0 3rem"><div style="width: 50rem;font-size: 24px;font-weight: bold;float: left">场地使用管理系统</div><div><img src=assets/images/blackdownG.png ng-click="headCtrl.outFlag = true" class="float_right pointer" style="width:16px;margin:26px 20px 0 10px"><div class="float_right pointer" ng-click="headCtrl.outFlag = true" ng-bind=headCtrl.admin>管理员</div></div></div></div><div class=bgGary ng-show=headCtrl.outFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>是否退出该账号</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click="headCtrl.outFlag = false">取消</div><div class="button_normal float_right" ng-click=headCtrl.logout()>退出</div><div class=clear></div></div></div></div></div>'), a.put("app/organization/member/member-detail-info.html", '<div style="min-width: 900px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div style=margin:20px><div class="float_left pointer" ui-sref=org-member>会员管理</div><img class=float_left src=assets/images/gang.png style="height:16px;margin:-0px 5px"><div class=float_left style=color:#99a9bf ng-bind=orgMemberDetailCtrl.member.name></div><div class=clear></div></div><div class=field_titleBox><div class="field_titleNormal field_titleChoose">基本信息</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-member-detail.record>消费&充值记录</div><div class=clear></div></div><div style="margin-left: 20px"><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">会员姓名</div><input class="float_left width_355" style="border:1px solid #ddd;border-radius:4px;height:40px;margin-top:20px;padding:0 0 0 10px" ng-change=orgMemberDetailCtrl.judge() ng-model="orgMemberDetailCtrl.name"><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">手机号码</div><input class="float_left width_355" style="border:1px solid #ddd;border-radius:4px;height:40px;margin-top:20px;padding:0 0 0 10px" ng-change=orgMemberDetailCtrl.judge() ng-model="orgMemberDetailCtrl.tel"><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">身份证号</div><input class="float_left width_355" style="border:1px solid #ddd;border-radius:4px;height:40px;margin-top:20px;padding:0 0 0 10px" ng-change=orgMemberDetailCtrl.judge() ng-model="orgMemberDetailCtrl.idCard"><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">会员卡号</div><div class="float_left width_355" style="border:1px solid #ddd;border-radius:4px;height:40px;margin-top:20px;padding:12px 0 0 10px" ng-bind="orgMemberDetailCtrl.member.cardNo?orgMemberDetailCtrl.member.cardNo:\'暂无\'">小七</div><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">会员类型</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!orgMemberDetailCtrl.chooseTypeFlag,\'select_foucs\':orgMemberDetailCtrl.chooseTypeFlag}" style="margin:20px 0 0 0" ng-click="orgMemberDetailCtrl.chooseTypeFlag = !orgMemberDetailCtrl.chooseTypeFlag"><div class="form_down_icon form_width_354 form_select_value_choose" ng-bind=orgMemberDetailCtrl.typeName></div><div class="form_select_div form_width_354" ng-show=orgMemberDetailCtrl.chooseTypeFlag><div ng-click=orgMemberDetailCtrl.chooseType(type) class="select_cell pointer" ng-repeat="type in orgMemberDetailCtrl.types" ng-bind=type.name onclick="event.cancelBubble = true">默认按钮</div></div></div><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">现金账户</div><div class=float_left><div class=width_355 style="border:1px solid #ddd;border-radius:4px;padding:10px;margin-top:20px"><div><span>￥</span><span ng-bind="orgMemberDetailCtrl.member.cards.length>0?orgMemberDetailCtrl.member.cards[0].total:\'0\'">999</span></div></div></div><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px">虚拟账户</div><div class=float_left><div class=width_355 style="border:1px solid #ddd;border-radius:4px;padding:10px;margin-top:20px;height:36px"><div class=float_left>￥</div><div class=float_left ng-bind=orgMemberDetailCtrl.member.virtualAccount.total>999</div><div class=float_right style=color:#999 ng-bind="orgMemberDetailCtrl.member.virtualAccount.expires_in?(orgMemberDetailCtrl.member.virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期\':\'无\'">999</div></div></div><div class=clear></div><div class=float_left style="color:#6C8094;margin:35px 40px 0 20px" ng-show="orgMemberDetailCtrl.speAccount.length > 0">专用账户</div><div class=float_left ng-show="orgMemberDetailCtrl.speAccount.length > 0"><div ng-repeat="account in orgMemberDetailCtrl.speAccount"><div class=width_355 style="border:1px solid #ddd;border-radius:4px;padding:10px;margin-top:20px;height:36px"><div class=float_left>￥</div><div class=float_left ng-bind=account.total>999</div><div class=float_right style=color:#999 ng-bind=account.name>999</div></div><div class=clear></div></div></div><div class=clear></div><div class="button2_normal float_left" style="margin:20px 20px 0 120px" ng-show=orgMemberDetailCtrl.judgeFlag ng-click=orgMemberDetailCtrl.update()>保存</div><div class="button2_normal float_left" style="margin:20px 20px 0 120px;background:#ccc" ng-show=!orgMemberDetailCtrl.judgeFlag>保存</div><div class="button2_normal float_left" style="background:#ccc;margin:20px 20px 0 0px" ng-click="orgMemberDetailCtrl.refundFlag = true">退余额</div></div><div class=bgGary ng-show=orgMemberDetailCtrl.refundFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">退余额</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgMemberDetailCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入退款金额 ng-class="{\'\':!orgMemberDetailCtrl.priceFlag,\'form_value_error\':orgMemberDetailCtrl.priceFlag}" ng-model="orgMemberDetailCtrl.price"></div><div class=clear></div><div class=form_error_font ng-show=!orgMemberDetailCtrl.priceFlag></div><div class=form_error_font ng-show=orgMemberDetailCtrl.priceFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">输验证码</div><input class="form_value float_left form_value_width" placeholder=请输入验证码 ng-class="{\'\':!orgMemberDetailCtrl.smsFlag,\'form_value_error\':orgMemberDetailCtrl.smsFlag}" ng-model="orgMemberDetailCtrl.code"></div><div class=clear></div><div class=form_error_font ng-show=!orgMemberDetailCtrl.smsFlag></div><div class=form_error_font ng-show=orgMemberDetailCtrl.smsFlag>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgMemberDetailCtrl.refund()>确认退还</div><div class="button_normal float_right" ng-click="orgMemberDetailCtrl.sendToFlag = true">发送验证码</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgMemberDetailCtrl.sendToFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">选择场馆管理员</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgMemberDetailCtrl.sendToFlag = false"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">场馆管理</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!orgMemberDetailCtrl.chooseObjectFlag,\'select_foucs\':orgMemberDetailCtrl.chooseObjectFlag}" ng-click="orgMemberDetailCtrl.chooseObjectFlag = !orgMemberDetailCtrl.chooseObjectFlag"><div class="form_down_icon form_width_354 form_select_value_choose" style=width:345px ng-bind=orgMemberDetailCtrl.objectName></div><div class="form_select_div form_width_354" style=width:345px ng-show=orgMemberDetailCtrl.chooseObjectFlag><div ng-click=orgMemberDetailCtrl.chooseObject(object) class="select_cell pointer" ng-repeat="object in orgMemberDetailCtrl.users" ng-bind=object.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgMemberDetailCtrl.sendSms()>完成</div><div class="button_normal float_right" ng-click="orgMemberDetailCtrl.sendToFlag = false">取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=orgMemberDetailCtrl.toastFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/rectangle2.png"><div class="float_left form_marginL_15px">保存成功</div></div></div></div><div class=bgGary style=z-index:999 ng-show=orgMemberDetailCtrl.sendFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/rectangle2.png"><div class="float_left form_marginL_15px">发送成功</div></div></div></div><div class=bgGary ng-show=orgMemberDetailCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>退款成功</div><div class=promptClose ng-click="orgMemberDetailCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary style=z-index:999 ng-show=orgMemberDetailCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgMemberDetailCtrl.wordERR>22212</div><div class=promptClose ng-click="orgMemberDetailCtrl.promptERR = false"></div></div></div></div></div><style></style>'), a.put("app/organization/member/member-detail-record.html", '<div style="min-width: 900px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div style=margin:20px><div class="float_left pointer" ui-sref=org-member>会员管理</div><img class=float_left src=assets/images/gang.png style="height:16px;margin:-0px 5px"><div class=float_left style=color:#00A1FF ng-bind=orgMemberDetailCtrl.member.name></div><div class=clear></div></div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=org-member-detail.info>基本信息</div><div class="field_titleNormal field_titleChoose">消费&充值记录</div><div class=clear></div></div><div style="margin:20px 30px 3px 30px"><table style="margin:20px 30px 0 0px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:14%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">支付日期</td><td style="width:14%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">支付方式</td><td style="width:30%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">明细</td><td style="width:14%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作人</td><td style="width:14%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">流水号</td><td style="width:14%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">金额</td></tr><tr ng-repeat="record in orgMemberDetailCtrl.records" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:14%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm\'"></td><td style="width:14%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record.pm></td><td style="width:30%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="record.description?record.description:\'暂无\'"></td><td style="width:14%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="record.workerName?record.workerName:\'自助机\'"></td><td style="width:14%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record._id></td><td style="width:14%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=record.price></td></tr></table><pagination style="left:280px;margin:20px 0 0 0" ng-if="orgMemberDetailCtrl.pagination.numPages > 1" total-items=orgMemberDetailCtrl.pagination.totalItems ng-model=orgMemberDetailCtrl.pagination.page items-per-page=orgMemberDetailCtrl.pagination.itemsPerPage max-size=orgMemberDetailCtrl.pagination.maxSize boundary-links="{{orgMemberDetailCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgMemberDetailCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgMemberDetailCtrl.pageChanged()></pagination></div></div>'), a.put("app/organization/member/member-detail.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div ui-view="" style="padding:0px 0rem 20px 200px"></div></div>'), a.put("app/organization/member/member-docord.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px;min-width: 1100px"><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=org-member>会员列表</div><div class="field_titleNormal field_titleChoose">重要操作记录</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-old>合并记录</div><div class=clear></div><div class="form_value form_width_250" style="margin:20px 0 0 0"><input style=border:0;height:32px;width:200px placeholder=搜索会员(手机号/姓名/卡号) ng-model="orgDocordCtrl.mix"> <img src=assets/images/search.png class="student_search pointer" ng-click="orgDocordCtrl.getRecord()"></div><div style="margin:0 30px 0 0"><table style="margin:20px 30px 0 0px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作时间</td><td style="width:12%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">会员名称</td><td style="width:13%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">事件</td><td style="width:55%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">详情</td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作人</td></tr><tr ng-repeat="event in orgDocordCtrl.events" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="event.createDate | date:\'yyyy-MM-dd HH:mm\'"></td><td style="width:12%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=event.name?event.name:evnet.name_from></td><td style="width:13%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=event.status></td><td style="width:55%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=event.description></td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=event.workerName></td></tr></table><pagination style="left:280px;margin:20px 30px 3px 0px" ng-if="orgDocordCtrl.pagination.numPages > 1" total-items=orgDocordCtrl.pagination.totalItems ng-model=orgDocordCtrl.pagination.page items-per-page=orgDocordCtrl.pagination.itemsPerPage max-size=orgDocordCtrl.pagination.maxSize boundary-links="{{orgDocordCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgDocordCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgDocordCtrl.pageChanged()></pagination></div></div></div></div>'), a.put("app/organization/member/member.html", '<div class=contentBox id=search><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px;min-width: 1100px"><div class=field_titleBox><div class="field_titleNormal field_titleChoose">会员列表</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-docord>重要操作记录</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-old>合并记录</div><div class=clear></div><div class="form_value form_width_250 float_left" style="margin:20px 0 0 0"><input style=border:0;height:32px;width:200px placeholder=搜索会员(手机号/姓名/卡号) ng-model="orgMemberCtrl.searchName"> <img src=assets/images/search.png class="student_search pointer" ng-click="orgMemberCtrl.search()"></div><div class="button2_normal float_right" style="margin:20px 20px 0 0" ng-click=orgMemberCtrl.newAdd()>新增会员</div><div class=clear></div><div style="margin:20px 30px 0 0px"><table style="min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">姓名</td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">手机号</td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><span>会员等级</span> <img style=width:11px src="assets/images/bdown.png"><div ng-show=orgMemberCtrl.levelFlag class=pointer style="position:absolute;border:1px solid #ddd;background:#fff;width:150px;top:15px"><div class=select_choose style=height:28px;line-height:28px ng-click="orgMemberCtrl.levelDes = \'\';orgMemberCtrl.getMember()">全部</div><div class=select_choose style=height:28px;line-height:28px ng-click="orgMemberCtrl.levelDes = \'黄金会员\';orgMemberCtrl.getMember()">黄金会员</div><div class=select_choose style=height:28px;line-height:28px ng-click="orgMemberCtrl.levelDes = \'白银会员\';orgMemberCtrl.getMember()">白银会员</div><div class=select_choose style=height:28px;line-height:28px ng-click="orgMemberCtrl.levelDes = \'普通会员\';orgMemberCtrl.getMember()">普通会员</div><div class=select_choose style=height:28px;line-height:28px ng-click="orgMemberCtrl.levelDes = \'非实名会员\';orgMemberCtrl.getMember()">非实名会员</div></div></td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">注册日期</td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">卡号/会员号</td><td style="width:5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div class=ellipsis style=height:44px>现金账户</div></td><td style="width:5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div class=ellipsis style=height:44px>虚拟账户</div></td><td style="width:5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div class=ellipsis style=height:44px;width:98%>包玉刚账户</div></td><td style="width:18%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr class=pointer ng-repeat="member in orgMemberCtrl.members" ui-sref=org-member-detail.info({id:member._id,searchName:orgMemberCtrl.searchName}) style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><span title={{member.name}} ng-bind=member.name>合并过</span> <span ng-show=member.mergeDate style="border:1px solid #FFD1D1;background::#FFECEC;border-radius:4px;color:#FF7B7B;padding:1px">合并过</span></td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><span ng-bind="member.tel?member.tel:\'暂无\'"></span> <span style=color:#FF6F6F;font-size:10px ng-bind="member.wx?\'\':\'未绑微信\'"></span></td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div ng-show="member.cards.length==0 || member.cards[0].levelDes==\'非实名会员\'"><div class=float_left style="background:#999;width:9px;height:9px;border-radius:50%;margin:15px 10px 0 0"></div><div class=float_left style=color:#999>非实名会员</div></div><div ng-show="member.cards[0].levelDes==\'白银会员\'"><div class=float_left style="background:#A2AECF;width:9px;height:9px;border-radius:50%;margin:15px 10px 0 0"></div><div class=float_left style=color:#A2AECF>白银会员</div></div><div ng-show="member.cards[0].levelDes==\'黄金会员\'"><div class=float_left style="background:#F9CA2F;width:9px;height:9px;border-radius:50%;margin:15px 10px 0 0"></div><div class=float_left style=color:#F9CA2F>黄金会员</div></div><div ng-show="member.cards[0].levelDes==\'普通会员\'"><div class=float_left style="background:#000;width:9px;height:9px;border-radius:50%;margin:15px 10px 0 0"></div><div class=float_left style=color:#000>普通会员</div></div><span ng-show=member.realWorkerName style=color:#999 ng-bind="\'(\'+member.realWorkerName+\')\'"></span> <span ng-show="member.type&&member.type!=\'会员卡\'" ng-bind=member.type style="border:1px solid #FFD1D1;background::#FFECEC;border-radius:4px;color:#FF7B7B;padding:1px;font-size:12px"></span></td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="(member.createDate?(member.createDate | date:\'yyyy-MM-dd\'):\'无\')+\'(\'+member.workerName+\')\'"></td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><span ng-show=member.cardNo ng-bind=member.cardNo></span> <span style=color:#999 ng-show=!member.cardNo>未办理</span> <span>/</span> <span ng-show=member.memberNo ng-bind=member.memberNo></span> <span style=color:#999 ng-show=!member.memberNo>未办理</span></td><td style="width:5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="(member.cards.length>0?member.cards[0].total:\'0\')"></td><td style="width:5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="!member.virFlag?member.virtualAccount.total:(member.virtualAccount.total==0?\'0\':member.virtualAccount.total+\'(已过期)\')"></td><td style="width:5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="(member.accFlag?member.accTot:\'0\')"></td><td class=pointer style="width:18%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-show="member.cardNo && member.isReal && !member.isFreezed"><div onclick="event.cancelBubble = true" ng-click=orgMemberCtrl.chongzhi(member) class=float_left style=color:#00a1ff><span>充值</span> <span style=color:#fff>充值</span></div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click=orgMemberCtrl.banka(member) class=float_left>办卡</div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click=orgMemberCtrl.freeze(member) class=float_left>冻结</div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click="orgMemberCtrl.changeAccFlag = true;orgMemberCtrl.fromId = member._id" class=float_left>过户</div></td><td class=pointer style="width:18%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-show="!member.cardNo && member.isReal && !member.isFreezed"><div onclick="event.cancelBubble = true" ng-click=orgMemberCtrl.chongzhi(member) class=float_left style=color:#00a1ff><span>充值</span> <span style=color:#fff>充值</span></div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click=orgMemberCtrl.banka(member) class=float_left>办卡</div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click=orgMemberCtrl.freeze(member) class=float_left>冻结</div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click="orgMemberCtrl.changeAccFlag = true;orgMemberCtrl.fromId = member._id" class=float_left>过户</div></td><td class=pointer style="width:18%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-show="!member.isReal && !member.isFreezed"><div style=color:#00a1ff onclick="event.cancelBubble = true" ng-click=orgMemberCtrl.defind(member) class=float_left>实名认证</div><div onclick="event.cancelBubble = true" style="margin:0 0 0 20px" ng-click=orgMemberCtrl.chongzhi(member) class=float_left style=color:#00a1ff>充值</div><div ng-show=!member.cardNo style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click=orgMemberCtrl.banka(member) class=float_left>办卡</div><div ng-show=member.cardNo style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click=orgMemberCtrl.banka(member) class=float_left>补卡</div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click=orgMemberCtrl.freeze(member) class=float_left>冻结</div><div style="margin:0 0 0 20px" onclick="event.cancelBubble = true" ng-click="orgMemberCtrl.changeAccFlag = true;orgMemberCtrl.fromId = member._id" class=float_left>过户</div></td><td class=pointer style="width:18%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-show=member.isFreezed><div style=color:#00a1ff onclick="event.cancelBubble = true" ng-click=orgMemberCtrl.cfreeze(member) class=float_left>解除冻结</div></td></tr></table></div><pagination style="left:280px;margin:20px 30px 3px 0px" ng-if="orgMemberCtrl.pagination.numPages > 1" total-items=orgMemberCtrl.pagination.totalItems ng-model=orgMemberCtrl.pagination.page items-per-page=orgMemberCtrl.pagination.itemsPerPage max-size=orgMemberCtrl.pagination.maxSize boundary-links="{{orgMemberCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgMemberCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgMemberCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=orgMemberCtrl.changeAccFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">账户过户</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgMemberCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">过户给：</div><input class="form_value float_left form_value_width" ng-change="orgMemberCtrl.judge(\'tel\')" placeholder=请输入接收人手机号 ng-model="orgMemberCtrl.tel"></div><div class=clear></div><div class=form_error_font ng-show=!orgMemberCtrl.cardFlag></div><div class=form_error_font ng-show=orgMemberCtrl.cardFlag>此项为必填项</div><div ng-show=orgMemberCtrl.answerFlag class=form_first_view style=margin-top:0><div ng-show=orgMemberCtrl.jFlag class="form_key float_left form_key_margin"><span>接收人：</span> <span style=color:#00a1ff ng-bind=orgMemberCtrl.name></span></div><div ng-show=!orgMemberCtrl.jFlag style=color:red class="form_key float_left form_key_margin">系统中不存在该用户</div></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgMemberCtrl.move()>完成</div><div class="button_normal float_right" ng-click=orgMemberCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgMemberCtrl.payFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><img src=assets/images/back.png style="height:12px;margin:2px 10px 0 0" class="float_left pointer" ng-click="orgMemberCtrl.payFlag = false;orgMemberCtrl.addFlag = true"><div class="form_title float_left">发起支付</div><img src=assets/images/close.png class="float_right pointer" ng-click=orgMemberCtrl.close()></div><div class=clear></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">支付金额</div><div class="form_value float_left" style=border:none;color:#ff4949;margin-left:-10px;font-size:14px><span>￥</span> <span style=font-size:18px ng-bind=orgMemberCtrl.rp></span></div></div><div class=clear></div></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">支付方式</div><div style="width:350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in orgMemberCtrl.paymentArr" ng-click=orgMemberCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style=width:0;height:0;overflow:hidden ng-show="orgMemberCtrl.showCodeBox && !orgMemberCtrl.defindFlag"><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=orgMemberCtrl.auth_code ng-keypress=orgMemberCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div><div style=width:0;height:0;overflow:hidden ng-show="orgMemberCtrl.showCodeBox && orgMemberCtrl.defindFlag"><div><div class="form_key float_left form_key_margin">支付条码</div><input id=bk class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=orgMemberCtrl.auth_code ng-keypress=orgMemberCtrl.bk($event)></div><div class=clear></div><div class=form_error_font></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgMemberCtrl.create()>确认支付</div><div class="button_normal float_right" ng-click=orgMemberCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgMemberCtrl.cFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">办卡</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgMemberCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">实体卡</div><input class="form_value float_left form_value_width" style=margin-left:10px;width:350px placeholder=请放置实体卡 ng-class="{\'\':!orgMemberCtrl.cardFlag,\'form_value_error\':orgMemberCtrl.cardFlag}" ng-model="orgMemberCtrl.cardNum"></div><div class=clear></div><div ng-bind="\'卡库存\'+orgMemberCtrl.cardCount+\'张\'" style=margin-left:70px;color:#999></div><div class=form_error_font ng-show=!orgMemberCtrl.cardFlag></div><div class=form_error_font ng-show=orgMemberCtrl.cardFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">工本费</div><div style=margin-left:74px><div class=singleChoose_option style="float: none" ng-repeat="payment in orgMemberCtrl.useStateArr" ng-click=orgMemberCtrl.chooseState(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div><div class=float_left style=margin-top:12px ng-bind="orgMemberCtrl.cardCost+\'元\'"></div></div><div class=clear></div><div ng-show=orgMemberCtrl.isBk><div class="form_key float_left form_key_margin">支付方式</div><div style="width:350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in orgMemberCtrl.paymentArr" ng-click=orgMemberCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div><div style=width:0;height:0;overflow:hidden ng-show=orgMemberCtrl.showCodeBox><div><div class="form_key float_left form_key_margin">支付条码</div><input id=fillCard class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=orgMemberCtrl.auth_code ng-keypress=orgMemberCtrl.bk($event)></div><div class=clear></div><div class=form_error_font></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgMemberCtrl.bind()>完成</div><div class="button_normal float_right" ng-click=orgMemberCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgMemberCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left" ng-bind=orgMemberCtrl.memTitle>新增会员</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgMemberCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">会员姓名</div><input class="form_value float_left form_value_width" placeholder=会员真实姓名 ng-blur="orgMemberCtrl.judge(\'name\')" ng-class="{\'\':!orgMemberCtrl.nameFlag,\'form_value_error\':orgMemberCtrl.nameFlag}" ng-model="orgMemberCtrl.name"></div><div class=clear></div><div class=form_error_font ng-show=!orgMemberCtrl.nameFlag></div><div class=form_error_font style=margin-left:80px ng-show=orgMemberCtrl.nameFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">联系方式</div><input class="form_value float_left form_value_width" ng-show=!orgMemberCtrl.lengthFlag ng-change=orgMemberCtrl.judgeLength() placeholder=11位手机号码 ng-blur="orgMemberCtrl.judge(\'phone\')" ng-class="{\'\':!orgMemberCtrl.phoneFlag,\'form_value_error\':orgMemberCtrl.phoneFlag}" ng-model="orgMemberCtrl.phone"> <input class="form_value float_left form_value_width" ng-show=orgMemberCtrl.lengthFlag ng-change=orgMemberCtrl.judgeLength() style=color:#00a1ff placeholder=11位手机号码 ng-blur="orgMemberCtrl.judge(\'phone\')" ng-class="{\'\':!orgMemberCtrl.phoneFlag,\'form_value_error\':orgMemberCtrl.phoneFlag}" ng-model="orgMemberCtrl.phone"></div><div class=clear></div><div class=form_error_font ng-show=!orgMemberCtrl.phoneFlag></div><div class=form_error_font style=margin-left:80px ng-show=orgMemberCtrl.phoneFlag ng-bind=orgMemberCtrl.errPhone></div><div><div class="form_key float_left form_key_margin">证件类型</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!orgMemberCtrl.choosedZhengFlag,\'select_foucs\':orgMemberCtrl.choosedZhengFlag}" ng-click="orgMemberCtrl.choosedZhengFlag = !orgMemberCtrl.choosedZhengFlag"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=orgMemberCtrl.zhengName></div><div class=form_select_div style=width:345px ng-show=orgMemberCtrl.choosedZhengFlag><div ng-click="orgMemberCtrl.chooseIdType(\'id\')" class="select_cell pointer" onclick="event.cancelBubble = true">身份证</div><div ng-click="orgMemberCtrl.chooseIdType(\'other\')" class="select_cell pointer" onclick="event.cancelBubble = true">其他</div></div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">身份证号</div><input class="form_value float_left form_value_width" ng-class="{\'\':!orgMemberCtrl.idFlag,\'form_value_error\':orgMemberCtrl.idFlag}" placeholder=请核对身份证号 ng-model="orgMemberCtrl.idCard"></div><div class=clear></div><div class=form_error_font ng-show=!orgMemberCtrl.idFlag></div><div class=form_error_font style=margin-left:80px ng-show=orgMemberCtrl.idFlag>此项为必填项</div><!--                   <div ng-show="!orgMemberCtrl.defindFlag">\n                        <div class="form_key float_left form_key_margin">选择卡种</div>\n                        <div class="float_left pointer zindex_999" ng-class="{\'select\':!orgMemberCtrl.choosedCardFlag,\'select_foucs\':orgMemberCtrl.choosedCardFlag}" ng-click="orgMemberCtrl.choosedCardFlag = !orgMemberCtrl.choosedCardFlag">\n                            <div class="form_down_icon form_select_value_choose" style="width:345px" ng-bind="orgMemberCtrl.cardName"></div>\n                            <div class="form_select_div" style="width:345px" ng-show="orgMemberCtrl.choosedCardFlag">\n                                <div ng-click="orgMemberCtrl.chooseNewCard(card)" class="select_cell pointer" ng-repeat="card in orgMemberCtrl.cards" ng-bind="card.name+\'(\'+card.price+\'元)\'" onClick="event.cancelBubble = true">默认按钮</div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="clear"></div>\n                    <div ng-show="!orgMemberCtrl.defindFlag" class="form_error_font"></div> --><div ng-show=!orgMemberCtrl.defindFlag class=zindex_999><div class="form_key float_left form_key_margin">会员等级</div><div class="float_left pointer" ng-class="{\'select\':!orgMemberCtrl.choosedMembertypeFlag,\'select_foucs\':orgMemberCtrl.choosedMembertypeFlag}" ng-click="orgMemberCtrl.choosedMembertypeFlag = !orgMemberCtrl.choosedMembertypeFlag"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=orgMemberCtrl.membertypeName></div><div class=form_select_div style=width:345px ng-show=orgMemberCtrl.choosedMembertypeFlag><div ng-click=orgMemberCtrl.chooseMembertype(membertype) class="select_cell pointer" ng-repeat="membertype in orgMemberCtrl.membertypes" ng-bind=membertype.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div ng-show=!orgMemberCtrl.defindFlag class=form_error_font></div><div ng-show=!orgMemberCtrl.defindFlag><div class="form_key float_left form_key_margin">会员类型</div><div class="float_left pointer" ng-class="{\'select\':!orgMemberCtrl.choosedTypeFlag,\'select_foucs\':orgMemberCtrl.choosedTypeFlag}" ng-click="orgMemberCtrl.choosedTypeFlag = !orgMemberCtrl.choosedTypeFlag"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=orgMemberCtrl.typeName></div><div class=form_select_div style=width:345px ng-show=orgMemberCtrl.choosedTypeFlag><div ng-click=orgMemberCtrl.chooseType(type) class="select_cell pointer" ng-repeat="type in orgMemberCtrl.types" ng-bind=type.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div ng-show=!orgMemberCtrl.defindFlag class=form_error_font></div><div><div class="form_key float_left form_key_margin"><span>实体卡</span><span style=color:#fff>的</span></div><img src=assets/images/bluecircle.png ng-show=orgMemberCtrl.needFlag style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=!orgMemberCtrl.needFlag ng-click="orgMemberCtrl.needFlag = true" style=height:18px class="float_left form_oImage_margin"><div class="float_left pointer" style="margin:12px 20px 0 0" ng-click="orgMemberCtrl.needFlag = true">需要</div><img src=assets/images/radio_off.png ng-show=orgMemberCtrl.needFlag ng-click="orgMemberCtrl.needFlag = false" style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/bluecircle.png ng-show=!orgMemberCtrl.needFlag style=height:18px class="float_left form_oImage_margin"><div class="float_left pointer" style="margin:12px 10px 0 0" ng-click="orgMemberCtrl.needFlag = false">不需要</div></div><div class=clear></div><div class=form_error_font></div><div ng-show=orgMemberCtrl.needFlag><div class="form_key float_left form_key_margin">实体卡号</div><input class="form_value float_left form_value_width" placeholder=请放置实体卡 ng-class="{\'\':!orgMemberCtrl.cardFlag,\'form_value_error\':orgMemberCtrl.cardFlag}" ng-model="orgMemberCtrl.cardNum"></div><div class=clear></div><div class=form_error_font ng-show="orgMemberCtrl.needFlag && !orgMemberCtrl.cardFlag"></div><div class=form_error_font ng-show="orgMemberCtrl.needFlag && orgMemberCtrl.cardFlag">此项为必填项</div><div ng-show=orgMemberCtrl.needFlag><div class="form_key float_left form_key_margin"><span>工本费</span><span style=color:#fff>的</span></div><div><div class=singleChoose_option style="float: none" ng-repeat="payment in orgMemberCtrl.useStateArr" ng-click=orgMemberCtrl.chooseState(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgMemberCtrl.finish()>下一步</div><div class="button_normal float_right" ng-click=orgMemberCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgMemberCtrl.continueFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">账户充值</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgMemberCtrl.close()"></div><div class=clear></div><div><div ng-show=orgMemberCtrl.moneySelect class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;background:#00a1ff;color:#fff;border-top-left-radius:6px;border-bottom-left-radius:6px;height:36px;line-height:34px">通用账户</div><div ng-show=!orgMemberCtrl.moneySelect ng-click="orgMemberCtrl.waySelect(\'money\')" class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;color:#000;border-top-left-radius:6px;border-bottom-left-radius:6px;height:36px;line-height:34px">通用账户</div><div ng-show=orgMemberCtrl.oneSelect class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;background:#00a1ff;color:#fff;height:36px;line-height:34px;border-left:0">专用账户</div><div ng-show=!orgMemberCtrl.oneSelect ng-click="orgMemberCtrl.waySelect(\'one\')" class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;color:#000;height:36px;line-height:34px;border-left:0">专用账户</div><div ng-show=orgMemberCtrl.cardSelect class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;background:#00a1ff;color:#fff;height:36px;line-height:34px;border-left:0">通用充值卡</div><div ng-show=!orgMemberCtrl.cardSelect ng-click="orgMemberCtrl.waySelect(\'card\')" class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;color:#000;height:36px;line-height:34px;border-left:0">通用充值卡</div><div ng-show=orgMemberCtrl.speSelect class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;background:#00a1ff;color:#fff;border-top-right-radius:6px;border-bottom-right-radius:6px;height:36px;line-height:34px;border-left:0">专用充值卡</div><div ng-show=!orgMemberCtrl.speSelect ng-click="orgMemberCtrl.waySelect(\'speCard\')" class="float_left pointer" style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;color:#000;border-top-right-radius:6px;border-bottom-right-radius:6px;height:36px;line-height:34px;border-left:0">专用充值卡</div></div><div class=clear></div><div style=margin-top:20px ng-show=orgMemberCtrl.moneySelect><div class="form_key float_left form_key_margin">选择金额</div><div class=float_left style=width:350px><div ng-repeat="card in orgMemberCtrl.cCards" ng-click=orgMemberCtrl.choose(card) ng-style=card.select?orgMemberCtrl.cardBlue:orgMemberCtrl.cardGray class="float_left pointer" ng-bind=card.price></div></div></div><div class=clear></div><div ng-show=orgMemberCtrl.oneSelect style=margin-top:10px><div class="form_key float_left form_key_margin">选择场馆</div><div class=float_left style=width:350px><div class="float_left pointer" style="margin:10px 23px 0 0" ng-click=orgMemberCtrl.chVenue(venue) ng-repeat="venue in orgMemberCtrl.vrr"><img ng-show=!venue.select class=float_left src="assets/images/radio_off.png"> <img ng-show=venue.select style=width:16px class=float_left src="assets/images/bluecircle.png"><div class=float_left style=margin-left:3px ng-bind=venue.name></div></div></div></div><div class=clear></div><div class=form_error_font ng-show="!orgMemberCtrl.iFlag && orgMemberCtrl.oneSelect"></div><div class=form_error_font ng-show="orgMemberCtrl.iFlag && orgMemberCtrl.oneSelect">至少选择一个场馆</div><div ng-show="orgMemberCtrl.oneSelect || orgMemberCtrl.selfFlag"><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=orgMemberCtrl.price></div><div class=clear></div></div><div class=form_error_font style=margin-bottom:-20px ng-show="!orgMemberCtrl.pFlag && orgMemberCtrl.oneSelect"></div><div class=form_error_font style=margin-bottom:-20px ng-show="orgMemberCtrl.pFlag && orgMemberCtrl.oneSelect">此项必填</div><div style=margin-top:10px ng-show="orgMemberCtrl.moneySelect || orgMemberCtrl.oneSelect"><div><div class="form_key float_left form_key_margin">支付方式</div><div style="width:350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in orgMemberCtrl.paymentArr" ng-click=orgMemberCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style=width:0;height:0;overflow:hidden ng-show="orgMemberCtrl.showCodeBox && (orgMemberCtrl.moneySelect || orgMemberCtrl.oneSelect)"><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_codeC class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=orgMemberCtrl.auth_code ng-keypress=orgMemberCtrl.auth_codeCreateC($event)></div><div class=clear></div><div class=form_error_font></div></div><div ng-show=orgMemberCtrl.speSelect><div class="form_key float_left form_key_margin">充值场馆</div><div class=float_left style="width: 350px;padding-top: 7px"><div class=singleChoose_option ng-repeat="venue in orgMemberCtrl.venues_clone" ng-click=orgMemberCtrl.chooseChargeVenue(venue)><div class="singleChoose_imageBox {{venue.image}}" style="height: 26px"></div><div class=singleChoose_prompt style="min-width:60px;height: 26px;line-height: 26px" ng-bind=venue.name>场馆</div></div></div></div><div class=clear></div><div style=margin-top:20px ng-show=orgMemberCtrl.cardSelect||orgMemberCtrl.speSelect><div><div class="form_key float_left form_key_margin">充值账号</div><input class="form_value float_left form_value_width" placeholder=请输入充值卡账号 ng-model=orgMemberCtrl.chargeCardNum></div><div class=clear></div><div class=form_error_font></div></div><div ng-show=orgMemberCtrl.cardSelect||orgMemberCtrl.speSelect><div><div class="form_key float_left form_key_margin">充值密码</div><input class="form_value float_left form_value_width" placeholder=请输入充值卡密码 ng-model=orgMemberCtrl.chargeCardPassword></div><div class=clear></div></div><div><div class="form_key float_left form_key_margin">打印小票</div><img ng-show=orgMemberCtrl.printFlag style=width:15px;margin-top:10px class=float_left src=assets/images/bluecircle.png> <img ng-show=!orgMemberCtrl.printFlag ng-click="orgMemberCtrl.printFlag = true" style=width:15px;margin-top:10px class="float_left pointer" src=assets/images/radio_off.png><div class=float_left style="width:15px;margin:10px 5px 0 5px">是</div><img ng-show=!orgMemberCtrl.printFlag style=width:15px;margin-top:10px class=float_left src=assets/images/bluecircle.png> <img ng-show=orgMemberCtrl.printFlag ng-click="orgMemberCtrl.printFlag = false" style=width:15px;margin-top:10px class="float_left pointer" src=assets/images/radio_off.png><div class=float_left style="width:15px;margin:10px 5px 0 5px">否</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgMemberCtrl.continue()>完成</div><div class="button_normal float_right" ng-click=orgMemberCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=orgMemberCtrl.toastFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/rectangle2.png"><div class="float_left form_marginL_15px" ng-bind=orgMemberCtrl.wordOK>操作成功</div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=orgMemberCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=orgMemberCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgMemberCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" title={{orgMemberCtrl.wordWARN}}>支付中...</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div><!-- 错误提示 --><div class=bgGary style=z-index:999 ng-show=orgMemberCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgMemberCtrl.wordERR>22212</div><div class=promptClose ng-click="orgMemberCtrl.promptERR = false"></div></div></div></div><div class=bgGary ng-show=orgMemberCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgMemberCtrl.deleteFlag = false"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4 ng-bind=orgMemberCtrl.payWarn>删除项目后，场馆里该项目的场地全部会被删除。对于预定该项目的个人用户会退还预定金额。是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button_normal float_right" ng-click="orgMemberCtrl.deleteFlag = false">确定</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgMemberCtrl.sureFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgMemberCtrl.sureFlag = false"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4 ng-bind=orgMemberCtrl.sureWarn>删除项目后，场馆里该项目的场地全部会被删除。对于预定该项目的个人用户会退还预定金额。是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button_normal float_right" ng-click=orgMemberCtrl.surePay()>确定</div><div class=clear></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right:0px;top:10px;\n        }</style></div></div>'),
            a.put("app/organization/member/membership-card.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="min-width:1366px;margin-left: 200px"><!-- <div style="background:#fff;box-shadow: 0 1px 4px 0 rgba(0,0,0,0.4)">\n            <div style="height:58px;line-height:56px;padding:0 20px;font-size:18px;color:#475669">\n                <div class="float_left pointer" style="width:33%" ui-sref="org-index">\n                    <img class="float_left" style="height:22px;margin:19px 10px 0 0" src="assets/images/page_left.png" />\n                    <div class="float_left">返回</div>\n                </div>\n\n                <div class="float_left" style="width:33%;text-align:center">会员卡列表</div>\n\n            </div>\n        </div> --><!-- 会员卡列表开始 --><div class=men-card><!-- 搜索框开始 --><div class=men-card-form><!-- <form action="" method="" id="" name="" class="clearfloat"> --><input placeholder=会员名/手机号/卡号 ng-model=orgVipTableCtrl.mix ng-keypress="orgVipTableCtrl.enterCheck($event)"> <img src=../assets/images/search.png width=20 height=20 ng-click="orgVipTableCtrl.mySearch()"><!-- </form> --></div><!-- 搜索框结束 --><!-- 会员卡列表开始 --><ul class=tr-table><li class=tr-head><ul class=clearfloat><li class=tr-li1><span class=tr-b-right>姓名</span></li><li class=tr-li2><span class=tr-b-right>手机号</span></li><li class=tr-li2><span class=tr-b-right>实体卡号</span></li><li class=tr-li2><span class=tr-b-right>会员卡名称</span></li><li class=tr-li2><span class=tr-b-right>剩余期限</span></li><li class=tr-li2><span class=tr-b-right>过期时间</span></li><li class=tr-li2><span class=tr-b-right>所属会员</span></li><li class=tr-li3><span>操作</span></li></ul></li><li class=tr-content><ul class="clearfloat tr-control" ng-repeat="memberService in orgVipTableCtrl.memberServices"><li class=tr-li1><p class="tr-b-right overflow-hidden clearfloat"><span class=tr-name ng-bind=memberService.name title={{memberService.name}}></span> <span class=tr-hint1 ng-show=memberService.isFreeze>冻结中</span> <span class=tr-hint2 ng-hide=memberService.isActive>未激活</span> <span class=tr-hint2 ng-show=memberService.isEnd>已过期</span></p></li><li class="tr-li2 tr-line-height"><p class="tr-b-right overflow-hidden" ng-bind=memberService.tel title={{memberService.tel}}></p></li><li class="tr-li2 tr-line-height"><p class="tr-b-right overflow-hidden clearfloat"><span class=tr-card ng-bind=memberService.serviceNo title={{memberService.serviceNo}}></span></p></li><li class="tr-li2 tr-line-height"><p class="tr-b-right overflow-hidden" ng-bind=memberService.service.name title={{memberService.service.name}}></p></li><li class="tr-li2 tr-line-height"><p class="tr-b-right overflow-hidden clearfloat"><span class=tr-number1 ng-bind="memberService.valueLeft ? memberService.valueLeft : \'暂无\'" title="{{memberService.valueLeft ? memberService.valueLeft : \'暂无\'}}"></span></p></li><li class="tr-li2 tr-line-height"><p class="tr-b-right overflow-hidden clearfloat"><span class=tr-time1 ng-bind="memberService.endDate?(memberService.endDate | date:\'yyyy-MM-dd\'):\'暂未激活\'" title="{{memberService.endDate?(memberService.endDate | date:\'yyyy-MM-dd\'):\'暂未激活\'}}"></span> <span class=tr-time2 ng-show=memberService.endDate ng-click=orgVipTableCtrl.showPostponeCard(memberService._id)>延期</span></p></li><li class="tr-li2 tr-line-height"><p class="tr-b-right overflow-hidden" ng-bind="memberService._member.name+\'(\'+memberService._member.memberNo+\')\'" title="{{memberService._member.name+\'(\'+memberService._member.memberNo+\')\'}}"></p></li><li class="tr-li3 tr-line-height"><p><span class=tr-span-oactive ng-click=orgVipTableCtrl.showEdit(memberService)>编辑</span> <span ng-click=orgVipTableCtrl.showChangeCard(memberService._id)>换卡</span><!-- <span ng-click="orgVipTableCtrl.showReissueCard()">补卡</span> --> <span ng-click=orgVipTableCtrl.showFreezeCard(memberService._id)>冻结</span> <span ng-click=orgVipTableCtrl.showChangeName(memberService._id)>过户</span></p></li></ul></li></ul><!-- 会员卡列表结束 --><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgVipTableCtrl.pagination.numPages > 1" total-items=orgVipTableCtrl.pagination.totalItems ng-model=orgVipTableCtrl.pagination.page items-per-page=orgVipTableCtrl.pagination.itemsPerPage max-size=orgVipTableCtrl.pagination.maxSize boundary-links="{{orgVipTableCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgVipTableCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgVipTableCtrl.pageChanged()></pagination></div></div><!-- 会员卡列表结束 --><!-- 背景蒙版开始 --><div class=edit-information ng-show=orgVipTableCtrl.menberBg></div><!-- 背景蒙版结束 --><!-- 编辑信息开始 --><div class=edit-content ng-show=orgVipTableCtrl.edit><form name=editForm novalidate><div class="edit-colse clearfloat"><span>编辑信息</span> <img src=../assets/images/close.png width=15 height=15 ng-click="orgVipTableCtrl.close()"></div><div class=edit-form><p><label>姓名：</label><input name=editName ng-model=orgVipTableCtrl.showMemberService.name ng-maxlength=10 required></p><p class=prompt-p><!-- <p ng-show="editForm.editName.$dirty && editForm.editName.$invalid" > --><span ng-show=editForm.editName.$error.required>姓名是必须的</span> <span ng-show=editForm.editName.$error.maxlength>长度不能大于10</span><!-- </p> --></p><p><label>手机号码：</label><input name=editMobile ng-model=orgVipTableCtrl.showMemberService.tel ng-pattern="/^1([38]\\d|5[0-35-9]|7[3678])\\d{8}$/" required></p><p class=prompt-p><span ng-show=editForm.editMobile.$error.required>手机号码是必须的</span> <span ng-show=editForm.editMobile.$error.pattern>手机号码输入不正确</span></p><!-- <p>\n                    <label>身份证号：</label>\n                    <input type="text" name="editIdCard" ng-model="orgVipTableCtrl.memberService.tel" />\n                </p> --></div><div class="edit-button clearfloat"><input type=submit class=edit-btn-sure ng-click=orgVipTableCtrl.update() ng-disabled="editForm.editName.$dirty && editForm.editName.$invalid || editForm.editMobile.$dirty && editForm.editMobile.$invalid" value="确定"> <span class=edit-btn-cancel ng-click=orgVipTableCtrl.close()>取消</span></div></form></div><!-- 编辑信息结束 --><!-- 换卡信息开始 --><div class=change-card ng-show=orgVipTableCtrl.changeCard><!-- <form name="changeForm" novalidate> --><div class="change-colse clearfloat"><span>换卡</span> <img src=../assets/images/close.png width=15 height=15 ng-click="orgVipTableCtrl.close()"></div><div class=change-form><p><label class=ed-label>新卡：</label><input placeholder=请将新卡放置在感应器上 ng-model=orgVipTableCtrl.showMemberService.cardNo autofocus id=myCardNo name=changeInput class="edit-o-input1"></p><div class="need-cost clearfloat"><b>工本费：</b> <img src=../assets/images/radio_on.png width=16 height=16 ng-show="orgVipTableCtrl.showMemberService.isCost"> <img src=../assets/images/radio_off.png width=16 height=16 ng-click="orgVipTableCtrl.showMemberService.isCost = true" ng-show="!orgVipTableCtrl.showMemberService.isCost"> <span ng-click="orgVipTableCtrl.showMemberService.isCost = true">需要</span> <img src=../assets/images/radio_off.png width=16 height=16 ng-click="orgVipTableCtrl.showMemberService.isCost = false" ng-show="orgVipTableCtrl.showMemberService.isCost"> <img src=../assets/images/radio_on.png width=16 height=16 ng-show="!orgVipTableCtrl.showMemberService.isCost"> <span ng-click="orgVipTableCtrl.showMemberService.isCost = false">不需要</span><!-- <img src="{{orgVipTableCtrl.isCost2 ? \'../assets/images/radio_on.png\':\'../assets/images/radio_off.png\' }}" width="18" height="18" ng-click="orgVipTableCtrl.costOf2()" /> --><!-- <span ng-click="orgVipTableCtrl.isCost2 = !orgVipTableCtrl.isCost2">不需要</span> --></div><p class=change-book ng-show=orgVipTableCtrl.showMemberService.isCost><label>工本费用：</label>20元</p><div class="o-payment clearfloat" ng-show=orgVipTableCtrl.showMemberService.isCost><h4>支付方式：</h4><ul class=clearfloat><li ng-repeat="payment in orgVipTableCtrl.payments" ng-click=orgVipTableCtrl.choosePayment(payment)><span class="{{payment.img}} pay-choose-img"></span> <span ng-bind=payment.name></span></li></ul></div><div class="change-button clearfloat"><input type=submit class=change-btn-sure ng-click=orgVipTableCtrl.changeBtnSure() value=确定> <span class=change-btn-cancel ng-click=orgVipTableCtrl.close()>取消</span></div></div><!-- </form> --></div><!-- 换卡信息结束 --><!-- 延期开始 --><div class=change-card ng-show=orgVipTableCtrl.postponeCard><form novalidate><div class="change-colse clearfloat"><span>延期</span> <img src=../assets/images/close.png width=15 height=15 ng-click="orgVipTableCtrl.close()"></div><div class=change-form><p><label>延期天数：</label><input id=postponeInp autofocus ng-model="orgVipTableCtrl.showMemberService.value"></p></div><div class="change-button clearfloat"><span class=change-btn-sure ng-click=orgVipTableCtrl.postponeCardSure()>确定</span> <span class=change-btn-cancel ng-click=orgVipTableCtrl.close()>取消</span></div></form></div><!-- 延期结束 --><!-- 冻结卡信息开始 --><div class="change-card change-card1" ng-show=orgVipTableCtrl.freezeCard><form method="" action="" name="" novalidate><div class="change-colse clearfloat"><span>冻结</span> <img src=../assets/images/close.png width=15 height=15 ng-click="orgVipTableCtrl.close()"></div><div class=change-form><p class="clearfloat change-form-p"><label>冻结日期：</label><!-- <input type="text" placeholder="请选择冻结到哪天" /> --><span class=freeze-date><span style="{{orgVipTableCtrl.showChangeDate==\'请选择冻结到哪天\'?\'color: #999;\':\'\'}}" ng-bind="orgVipTableCtrl.showChangeDate==\'请选择冻结到哪天\'?\'请选择冻结到哪天\':(orgVipTableCtrl.showChangeDate | date:\'yyyy-MM-dd\')" class=show-date></span> <img src=../assets/images/icon_time@2x.png width=24 height=24 ng-click="orgVipTableCtrl.changeDateBox=!orgVipTableCtrl.changeDateBox"></span><div ng-show=orgVipTableCtrl.changeDateBox class=change-form-date><datetimepick class=ng-isolate-scope ng-close=orgVipTableCtrl.closeChangeDateBox() ng-date=orgVipTableCtrl.changeDate></datetimepick></div></p></div><div class="change-button clearfloat"><span class=change-btn-sure ng-click=orgVipTableCtrl.dongBtn()>确定</span> <span class=change-btn-cancel ng-click=orgVipTableCtrl.close()>取消</span></div></form></div><!-- 冻结卡信息结束 --><!-- 过户信息开始 --><div class=change-card ng-show=orgVipTableCtrl.changeName><form name=changeNameForm novalidate><div class="change-colse clearfloat"><span>过户</span> <img src=../assets/images/close.png width=15 height=15 ng-click="orgVipTableCtrl.close()"></div><div class=change-form><p><label>过户至：</label><input placeholder=请输入手机号 autofocus ng-change=orgVipTableCtrl.searchMember() id=changeMemberTel ng-model=orgVipTableCtrl.showMemberService.tel ng-pattern="/^1([38]\\d|5[0-35-9]|7[3678])\\d{8}$/" required name="changeNameFormInput"></p><p class=prompt-p ng-hide=orgVipTableCtrl.showMemberService._toMemberName><span ng-show=changeNameForm.changeNameFormInput.$error.required>手机号码是必须的</span> <span ng-show=changeNameForm.changeNameFormInput.$error.pattern>手机号码输入不正确</span></p><p class=prompt-p ng-show=orgVipTableCtrl.showMemberService._toMemberName ng-bind="\'过户至：\'+orgVipTableCtrl.showMemberService._toMemberName"></p></div><div class="change-button clearfloat"><input type=submit class=change-btn-sure ng-click=orgVipTableCtrl.transferCard() value="确定"> <span class=change-btn-cancel ng-click=orgVipTableCtrl.close()>取消</span></div></form></div><!-- 过户卡信息结束 --></div><!-- 二次预定确认提示 --><div class=bgGary ng-show=orgVipTableCtrl.againCheckBox><div class=middle><div id=box class="promptCheck center"><div class="checkWord top20">是否确认操作？</div><div class=top20><div class="chooseBtn left20 pointer" ng-click=orgVipTableCtrl.otherPay()>确认</div><div class="unChooseBtn left10 pointer" ng-click="orgVipTableCtrl.againCheckBox=false">取消</div></div></div></div></div><!-- 扫描二维码提示 --><div ng-show=orgVipTableCtrl.promptPay><div class=bgGary><div class=middle><input class=hiddenBox id=auth_code ng-model=orgVipTableCtrl.auth_code ng-keypress=orgVipTableCtrl.auth_codePay($event)><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgVipTableCtrl.wordPay>22212</div><div class=promptClose ng-click=orgVipTableCtrl.closePrompt()></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgVipTableCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgVipTableCtrl.wordOK></div><!-- <div class="promptClose" ng-click="orgVipTableCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgVipTableCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=orgVipTableCtrl.wordERR title={{orgVipTableCtrl.wordERR}}></div><div class=promptClose ng-click=orgVipTableCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgVipTableCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=orgVipTableCtrl.wordWARN title={{orgVipTableCtrl.wordWARN}}></div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/organization/member/old-record.html", '<style>.bg{\n        height:44px;line-height:42px;align-items:center;padding-left:20px\n    }\n    .bg1{\n        position:relative; \n    }\n    .show{\n        position:absolute;left:53rem;visibility:hidden;\n    }    \n    .bg1:hover .show{\n        position:absolute;left:1px;background:white;border:1px solid #ddd;visibility:visible;padding:0 10px;top:40px;z-index:999\n    }</style><div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px;min-width: 1100px"><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=org-member>会员列表</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-docord>重要操作记录</div><div class="field_titleNormal field_titleChoose">合并记录</div><div class=clear></div><div class=field_selectBox><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入手机/卡号搜索 ng-model=orgOldCtrl.searchN><div class=xt_searchImage ng-click=orgOldCtrl.getHistory()></div></div><div class=clear></div></div><div style="margin:20px 30px 0 0"><div class="tableCtr width_108 top20"><div class=width_108><div class="thCtr width_12 ellipsis">处理日期</div><div class="thCtr width_12 ellipsis">姓名</div><div class="thCtr width_12 ellipsis">会员号</div><div class="thCtr width_12 ellipsis">手机号</div><div class="thCtr width_12 ellipsis">事件</div><div class="thCtr width_36 ellipsis">处理详情</div><div class="thCtr width_12 ellipsis">操作端</div><div class=clear></div></div><div class="trCtr width_108" ng-repeat="record in orgOldCtrl.historyMembers"><div class="tdCtr width_12 ellipsis" ng-bind="record.mergeDate|date:\'yyyy-MM-dd hh:MM\'"></div><div class="tdCtr width_12 ellipsis" ng-bind=record.name></div><div class="tdCtr width_12 ellipsis" ng-bind=record.memberNo></div><div class="tdCtr width_12 ellipsis" ng-bind=record.tel></div><div class="tdCtr width_12 ellipsis" ng-bind="record.isDelete?\'删除\':\'合并\'"></div><div class="tdCtr width_36 ellipsis"><div ng-bind=record.des class=ellipsis></div><div class=show><div ng-repeat="xx in record.rr" style=line-height:24px ng-bind=xx></div></div></div><div class="tdCtr width_12 ellipsis" ng-bind="record.mergeWorkerName?record.mergeWorkerName:\'微信\'"></div><div class=clear></div></div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgOldCtrl.pagination.numPages > 1" total-items=orgOldCtrl.pagination.totalItems ng-model=orgOldCtrl.pagination.page items-per-page=orgOldCtrl.pagination.itemsPerPage max-size=orgOldCtrl.pagination.maxSize boundary-links="{{orgOldCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgOldCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgOldCtrl.pageChanged()></pagination></div></div></div>'), a.put("app/organization/product/product-record.html", '<div><div class=field_selectBox><!-- <div class="xt_searchBox float_right" style="float: left;">\n            <input class="xt_searchInput" style="text-indent: 10px;" placeholder="输入综合服务名称" ng-model="orgProductCtrl.searchProductName">\n            <div class="xt_searchImage" ng-click="orgProductCtrl.searchProduct()"></div>\n        </div> --><div><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgProductCtrl.showVenueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgProductCtrl.showVenueName ng-click="orgProductCtrl.showChooseVenueBox=!orgProductCtrl.showChooseVenueBox">场馆1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=orgProductCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in orgProductCtrl.venues" ng-bind=venue.name ng-click="orgProductCtrl.chooseVenueName(venue,\'record\')">默认按钮</div></div></div><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgProductCtrl.showFirstName==\'选择一级类目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgProductCtrl.showFirstName ng-click="orgProductCtrl.showChooseFirstBox=!orgProductCtrl.showChooseFirstBox">一级类目1</div></div><div class=form_select_div style="position: relative;z-index: 200" ng-show=orgProductCtrl.showChooseFirstBox><div class="select_cell pointer ellipsis" ng-repeat="first in orgProductCtrl.productCategories" ng-bind=first.name ng-click="orgProductCtrl.chooseFirstName(first,\'record\')">默认按钮</div></div></div><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgProductCtrl.showSecondName==\'选择二级类目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgProductCtrl.showSecondName ng-click="orgProductCtrl.showChooseSecondBox=!orgProductCtrl.showChooseSecondBox">二级类目1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=orgProductCtrl.showChooseSecondBox><div class="select_cell pointer ellipsis" ng-repeat="second in orgProductCtrl.secondCategories" ng-bind=second.name ng-click="orgProductCtrl.chooseSecondName(second,\'record\')">默认按钮</div></div></div></div><div class=clear></div></div><div class=cancelTable style="margin-top: 20px"><div class="cancelThTr height_40"><div class="cancelTh width_12 ellipsis" style="text-indent: 20px">金额</div><div class="cancelTh width_15 ellipsis">日期</div><div class="cancelTh width_14 ellipsis">提交人</div><div class="cancelTh width_25 ellipsis">详情</div><div class="cancelTh width_14 ellipsis">备注</div><div class="cancelTh width_12 ellipsis">联系人</div><div class="cancelTh width_14 ellipsis">操作</div></div><div class=cancelTr ng-repeat="record in orgProductCtrl.records" style="{{record.state?\'background: #f2f2f2\':\'\'}}"><div class="cancelTd width_12 ellipsis" style="text-indent: 20px" ng-bind=record.cost></div><div class="cancelTd width_15 ellipsis" ng-bind="record.createDate | date:\'MM-dd\'"></div><div class="cancelTd width_14 ellipsis" ng-bind=record.workerName></div><div class="cancelTd width_25 ellipsis" ng-bind=record.description title={{record.description}}></div><div class="cancelTd width_14 ellipsis" ng-bind=record.remark></div><div class="cancelTd width_12 ellipsis" ng-bind="record.productContacts?record.productContacts:\'暂无\'"></div><div class="cancelTd width_14 ellipsis" ng-hide=record.state><span style="cursor: pointer;color: #8492a6" ng-click=orgProductCtrl.openErrChangeBox(record._id)>纠错</span> <span style="cursor: pointer;color: #20a0ff;margin-left: 20px" ng-click=orgProductCtrl.printRecord(record)>打印</span></div><div class="cancelTd width_14 ellipsis" ng-show=record.state>纠错单</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgProductCtrl.pagination.numPages > 1" total-items=orgProductCtrl.pagination.totalItems ng-model=orgProductCtrl.pagination.page items-per-page=orgProductCtrl.pagination.itemsPerPage max-size=orgProductCtrl.pagination.maxSize boundary-links="{{orgProductCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgProductCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgProductCtrl.pageChanged()></pagination></div><!-- 纠错操作 --><div class=bgGary ng-show=orgProductCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=orgProductCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{orgProductCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="orgProductCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{orgProductCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="orgProductCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=orgProductCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=orgProductCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=orgProductCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=orgProductCtrl.close()>取消</div><div class=clear></div></div></div></div></div>'), a.put("app/organization/product/product-sale.html", '<div><div class=fbonce_member_InfoBox><div class=fbonce_m_i_readTelOrCard><div class=fbonce_m_i_r_title>读取用户信息</div><div class=fbonce_m_i_r_contect><input id=cardNoBox class=fbonce_m_i_r_c_input placeholder=请读取会员卡号/二维码 ng-model=orgProductCtrl.memberTelOrCard ng-keypress=orgProductCtrl.enterCheck($event) style=ime-mode:disabled><div ng-show=orgProductCtrl.memberTelOrCard class=fbonce_m_i_r_c_btn ng-click=orgProductCtrl.checkMember()>查询</div><div ng-hide=orgProductCtrl.memberTelOrCard class="fbonce_m_i_r_c_btn bgcolorG">查询</div><div class="fbonce_m_i_r_c_btn bgcolorW borderccc" style="color: #475669" ng-click=orgProductCtrl.resert()>重置</div></div></div><div ng-show=orgProductCtrl.showMemberInfo class=fbonce_m_i_info><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>姓名:</div><div class=fbonce_m_i_i_l_d_value ng-bind=orgProductCtrl.member.name>徐涛</div></div><div class=fbonce_m_i_i_l_detail style=margin-left:-40px><div class=fbonce_m_i_i_l_d_key>现金账户:</div><div class=fbonce_m_i_i_l_d_value ng-bind="orgProductCtrl.member.cards[0].total?orgProductCtrl.member.cards[0].total:0 | currency:\'￥\'">500元</div></div></div><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>级别:</div><div class=fbonce_m_i_i_l_d_value ng-show=orgProductCtrl.member.cards[0].levelDes ng-bind=orgProductCtrl.member.cards[0].levelDes>金卡</div><div class=fbonce_m_i_i_l_d_value ng-hide=orgProductCtrl.member.cards[0].levelDes>暂无等级</div></div><div class=fbonce_m_i_i_l_detail style=margin-left:-40px><div class=fbonce_m_i_i_l_d_key>虚拟账户:</div><div class="fbonce_m_i_i_l_d_value ellipsis" title="{{(orgProductCtrl.member.virtualAccount.total | currency:\'￥\')+\'(\'+(orgProductCtrl.member.virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'}}"><span ng-bind="orgProductCtrl.member.virtualAccount.total | currency:\'￥\'">500元(2017-10-28过期)</span> <span ng-show="orgProductCtrl.member.virtualAccount.total>0" ng-bind="\'(\'+(orgProductCtrl.member.virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'"></span></div></div></div><div class=fbonce_m_i_i_line><div class=fbonce_m_i_i_l_detail><div class=fbonce_m_i_i_l_d_key>手机号:</div><div class=fbonce_m_i_i_l_d_value ng-bind=orgProductCtrl.member.tel>18806712362</div></div></div></div><div ng-hide=orgProductCtrl.showMemberInfo class="fbonce_m_i_info fbonce_m_i_noInfo"><span class=colorG>暂无会员信息</span></div><div class=clear></div></div><div class=field_selectBox><div class="xt_searchBox float_right" style="float: left"><input class=xt_searchInput style="text-indent: 10px" placeholder=输入综合服务名称 ng-model=orgProductCtrl.searchProductName><div class=xt_searchImage ng-click=orgProductCtrl.searchProduct()></div></div><div style="float: left;margin-left: 20px"><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgProductCtrl.showVenueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgProductCtrl.showVenueName ng-click="orgProductCtrl.showChooseVenueBox=!orgProductCtrl.showChooseVenueBox">场馆1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=orgProductCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in orgProductCtrl.venues" ng-bind=venue.name ng-click="orgProductCtrl.chooseVenueName(venue,\'product\')">默认按钮</div></div></div><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgProductCtrl.showFirstName==\'选择一级类目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgProductCtrl.showFirstName ng-click="orgProductCtrl.showChooseFirstBox=!orgProductCtrl.showChooseFirstBox">一级类目1</div></div><div class=form_select_div style="position: relative;z-index: 200" ng-show=orgProductCtrl.showChooseFirstBox><div class="select_cell pointer ellipsis" ng-repeat="first in orgProductCtrl.productCategories" ng-bind=first.name ng-click="orgProductCtrl.chooseFirstName(first,\'product\')">默认按钮</div></div></div><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgProductCtrl.showSecondName==\'选择二级类目\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgProductCtrl.showSecondName ng-click="orgProductCtrl.showChooseSecondBox=!orgProductCtrl.showChooseSecondBox">二级类目1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=orgProductCtrl.showChooseSecondBox><div class="select_cell pointer ellipsis" ng-repeat="second in orgProductCtrl.secondCategories" ng-bind=second.name ng-click="orgProductCtrl.chooseSecondName(second,\'product\')">默认按钮</div></div></div></div><div class=clear></div></div></div><div><div class=cancelTable><div class="cancelThTr height_40"><div class="cancelTh width_21 ellipsis" style="text-indent: 2rem">名称</div><div class="cancelTh width_21 ellipsis">所属场馆</div><div class="cancelTh width_21 ellipsis">一级分类</div><div class="cancelTh width_21 ellipsis">二级分类</div><div class="cancelTh width_22 ellipsis">操作</div></div><div class=cancelTr ng-repeat="product in orgProductCtrl.products"><div class="cancelTd width_21 ellipsis" style="text-indent: 2rem"><span ng-bind=product.name></span><span style="color:#20a0ff;font-size: 12px;margin-left: 5px" ng-hide=product.isUsed>停用中</span></div><div class="cancelTd width_21 ellipsis" ng-bind=product._venue.name>预订时间</div><div class="cancelTd width_21 ellipsis" ng-bind="product._firstCategory?product._firstCategory.name:\'暂无\'">预订时间</div><div class="cancelTd width_21 ellipsis" ng-bind="product._secondCategory?product._secondCategory.name:\'暂无\'">支付金额</div><div class="cancelTd width_22 ellipsis"><span class=cancel_btn ng-show=product.isUsed ng-click=orgProductCtrl.openBuyProduct(product)>售卖</span> <span ng-hide=product.isUsed style=color:#8492a6>售卖</span></div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgProductCtrl.pagination2.numPages > 1" total-items=orgProductCtrl.pagination2.totalItems ng-model=orgProductCtrl.pagination2.page items-per-page=orgProductCtrl.pagination2.itemsPerPage max-size=orgProductCtrl.pagination2.maxSize boundary-links="{{orgProductCtrl.pagination2.numPages > 2}}" rotate=false num-pages=orgProductCtrl.pagination2.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgProductCtrl.pageChanged()></pagination></div><!-- 售卖服务 --><div class=bgGary ng-show=orgProductCtrl.showBuyProduct><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">售卖综合服务</div><!-- <div class="form_title float_left">编辑综合服务</div> --><img src=assets/images/close.png class="float_right pointer" ng-click="orgProductCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">客户名称</div><input class="form_value float_left form_value_width" placeholder=请输入客户名称 ng-model=orgProductCtrl.name></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入综合服务金额 ng-model=orgProductCtrl.price></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=orgProductCtrl.remark></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">联系人员</div><input class="form_value float_left form_value_width" placeholder=输入活动对接人或招生联系人姓名 ng-model=orgProductCtrl.productContacts></div><div class=clear></div><div style="margin-top: 10px"><div class="form_key float_left form_key_margin">支付方式</div><div class="singleChoose_box float_left" style="width: 348px;height: 65px"><div class=singleChoose_option ng-repeat="payment in orgProductCtrl.paymentArr" ng-click=orgProductCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>每周</div></div></div></div><div class=clear></div><div style="width: 0px;height: 0px;overflow: hidden"><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=orgProductCtrl.auth_code ng-keypress=orgProductCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgProductCtrl.buy()>完成</div><div class="button_normal float_right" ng-click=orgProductCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=orgProductCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=orgProductCtrl.closePrompt()></div></div></div></div>'), a.put("app/organization/product/product.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal {{orgProductCtrl.titleState==\'sale\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="orgProductCtrl.changeTitle(\'sale\')">售卖服务</div><div class="field_titleNormal {{orgProductCtrl.titleState==\'record\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="orgProductCtrl.changeTitle(\'record\')">服务记录</div></div><div class=field_bookBoxPostition ui-view=""></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgProductCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgProductCtrl.wordOK>22212</div><div class=promptClose ng-click=orgProductCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgProductCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgProductCtrl.wordERR>22212</div><div class=promptClose ng-click=orgProductCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgProductCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=orgProductCtrl.wordWARN>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'),
            a.put("app/organization/setting/setting-card.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><div style=padding:30px;margin-left:190px;min-width:900px><div><div class=float_left style=font-size:18px;color:#475669>固定充值面额设置</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="orgSettingCardCtrl.addFlag = true">新增</div></div><div class=clear></div><table style="margin-top:20px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">卡种名称</td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">售价</td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">会员等级</td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">描述</td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr ng-repeat="card in orgSettingCardCtrl.cards" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=card.name></td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=card.realPrice></td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=card.levelDes></td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="card.description?card.description:\'无\'"></td><td class=pointer style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div ng-click=orgSettingCardCtrl.showEdit(card) class=float_left>编辑</div><div ng-click="orgSettingCardCtrl.sureFlag = true;orgSettingCardCtrl.cId = card._id" class=float_left style="margin:0 0 0 40px;color:#99a9bc">删除</div></td></tr></table><div style=margin-top:30px><div class=float_left style=font-size:18px;color:#475669>自定义充值面额设置</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="orgSettingCardCtrl.addLevelFlag = true">新增</div></div><div class=clear></div><div style="margin-top:20px;padding-bottom:30px;border-bottom:1px solid #94A8BA;font-weight:medium;font-size:16px;min-width:98rem;color:#475669"><div class=float_left style=width:16rem;padding-left:20px>面额数值范围</div><div class=float_left style=width:14rem>会员等级</div><div class=float_left style=width:32rem>享受折扣</div><div class=float_left style=width:18rem>操作</div></div><div class=clear></div><div ng-repeat="level in orgSettingCardCtrl.levels"><div class=pointer style="height:46px;line-height:46px;border-bottom:1px solid #ddd;color:#475669;font-size:13px;min-width:98rem"><div class=float_left style=width:16rem;padding-left:20px ng-bind="level.lower+\'--\'+level.upper">小七</div><div class=float_left style=width:14rem ng-bind=level.name>黄金会员</div><div class=float_left style=width:32rem ng-bind=level.discount>描述</div><div class=float_left style=width:18rem;color:#00a1ff><div ng-click=orgSettingCardCtrl.showEditLevel(level) class=float_left>编辑</div><div ng-click="orgSettingCardCtrl.sureFlag = true;orgSettingCardCtrl.lId = level._id;orgSettingCardCtrl.lFlag = true" class=float_left style="margin:0 0 0 40px;color:#99a9bc">删除</div></div></div><div class=clear></div></div><div style=margin-top:40px><div class=float_left style=font-size:18px;color:#475669>充值规则</div></div><div class=clear></div><div style=margin-top:20px><div class="form_key float_left form_key_margin" style=margin-right:20px>充值规则</div><textarea class="form_value float_left form_value_width" style=margin-right:20px;line-height:20px;height:150px;width:800px placeholder=请输入充值规则 ng-model=orgSettingCardCtrl.rule></textarea></div><div class=clear></div><div class="button2_normal float_left" style="background:#00A1FF;margin:20px 0 0 70px" ng-click=orgSettingCardCtrl.saveRule()>保存</div><div class=clear></div><div style=margin-top:40px;font-size:18px;color:#475669>实体卡工本费</div><div style=margin-top:17px><div class="form_key float_left form_key_margin" style=margin-right:20px>工本费</div><input class="form_value float_left form_value_width" style=margin-right:20px placeholder=请输入工本费 ng-model="orgSettingCardCtrl.money"></div><div class=clear></div><div class="button2_normal float_left" style="background:#00A1FF;margin:20px 0 10px 60px" ng-click=orgSettingCardCtrl.saveMoney()>保存</div></div><div class=bgGary ng-show=orgSettingCardCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增卡种</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingCardCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin"><span style=color:#fff>售价</span><span>售价</span></div><input class="form_value float_left form_value_width" placeholder=请输入售价 ng-blur="orgSettingCardCtrl.judge(\'totalPrice\')" ng-class="{\'\':!orgSettingCardCtrl.totalPriceFlag,\'form_value_error\':orgSettingCardCtrl.totalPriceFlag}" ng-model="orgSettingCardCtrl.totalPrice"></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingCardCtrl.totalPriceFlag></div><div class=form_error_font ng-show=orgSettingCardCtrl.totalPriceFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">会员等级</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!orgSettingCardCtrl.chooseFlag,\'select_foucs\':orgSettingCardCtrl.chooseFlag}" ng-click="orgSettingCardCtrl.chooseFlag = !orgSettingCardCtrl.chooseFlag"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=orgSettingCardCtrl.membertypeName></div><div class=form_select_div style=width:345px ng-show=orgSettingCardCtrl.chooseFlag><div ng-click=orgSettingCardCtrl.chooseMembertype(membertype) class="select_cell pointer" ng-repeat="membertype in orgSettingCardCtrl.membertypes" ng-bind=membertype.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingCardCtrl.discountFlag></div><div><div class="form_key float_left form_key_margin">详情描述</div><input class="form_value float_left form_value_width" ng-class="{\'\':!orgSettingCardCtrl.infoFlag,\'form_value_error\':orgSettingCardCtrl.infoFlag}" placeholder=请输入详情描述 ng-blur="orgSettingCardCtrl.judge(\'info\')" ng-model="orgSettingCardCtrl.info"></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingCardCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=orgSettingCardCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgSettingCardCtrl.addMemberFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">会员类型</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingCardCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">会员名称</div><input class="form_value float_left form_value_width" placeholder=请输入卡种名称 ng-blur="orgSettingCardCtrl.judge(\'name\')" ng-class="{\'\':!orgSettingCardCtrl.nameFlag,\'form_value_error\':orgSettingCardCtrl.nameFlag}" ng-model="orgSettingCardCtrl.name"></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingCardCtrl.nameFlag></div><div class=form_error_font ng-show=orgSettingCardCtrl.nameFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">优惠折扣</div><input class="form_value float_left form_value_width" ng-class="{\'\':!orgSettingCardCtrl.discountFlag,\'form_value_error\':orgSettingCardCtrl.discountFlag}" placeholder=输入数字，例：九折输入0.9 ng-blur="orgSettingCardCtrl.judge(\'discount\')" ng-model="orgSettingCardCtrl.discount"></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingCardCtrl.discountFlag></div><div class=form_error_font ng-show=orgSettingCardCtrl.discountFlag ng-bind=orgSettingCardCtrl.discountErr>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingCardCtrl.finishMember()>完成</div><div class="button_normal float_right" ng-click=orgSettingCardCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgSettingCardCtrl.addLevelFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">自定义充值范围</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingCardCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">会员等级</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!orgSettingCardCtrl.chooseFlag,\'select_foucs\':orgSettingCardCtrl.chooseFlag}" ng-click="orgSettingCardCtrl.chooseFlag = !orgSettingCardCtrl.chooseFlag"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=orgSettingCardCtrl.membertypeName></div><div class=form_select_div style=width:345px ng-show=orgSettingCardCtrl.chooseFlag><div ng-click=orgSettingCardCtrl.chooseMembertype(membertype) class="select_cell pointer" ng-repeat="membertype in orgSettingCardCtrl.membertypes" ng-bind=membertype.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingCardCtrl.discountFlag></div><div><div class="form_key float_left form_key_margin">价格下限</div><input class="form_value float_left form_value_width" ng-class="{\'\':!orgSettingCardCtrl.lpriceFlag,\'form_value_error\':orgSettingCardCtrl.lpriceFlag}" placeholder=输入价格下限 ng-blur="orgSettingCardCtrl.judge(\'lprice\')" ng-model="orgSettingCardCtrl.lprice"></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingCardCtrl.lpriceFlag></div><div class=form_error_font ng-show=orgSettingCardCtrl.lpriceFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">价格上限</div><input class="form_value float_left form_value_width" ng-class="{\'\':!orgSettingCardCtrl.upriceFlag,\'form_value_error\':orgSettingCardCtrl.upriceFlag}" placeholder=输入价格上限 ng-blur="orgSettingCardCtrl.judge(\'uprice\')" ng-model="orgSettingCardCtrl.uprice"></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingCardCtrl.upriceFlag></div><div class=form_error_font ng-show=orgSettingCardCtrl.upriceFlag>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingCardCtrl.finishLevel()>完成</div><div class="button_normal float_right" ng-click=orgSettingCardCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgSettingCardCtrl.sureFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">确认删除？</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingCardCtrl.close()"></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingCardCtrl.delete()>确定</div><div class="button_normal float_right" ng-click=orgSettingCardCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=orgSettingCardCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=orgSettingCardCtrl.err></div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="orgSettingCardCtrl.errorFlag = false"></div></div></div><div class=bgGary ng-show=orgSettingCardCtrl.succeedFlag><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>修改完成</div><div class=promptClose ng-click="orgSettingCardCtrl.succeedFlag = false"></div></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n    #mid{display:table-cell;left:0;vertical-align:middle;} \n    #box{border:2px solid #ddd;} \n    .student_search{\n        position:absolute;right: 0;top: 10px;\n    }</style>'), a.put("app/organization/setting/setting-date-card.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="padding:20px 30px 30px 30px;margin-left:200px;min-width:930px"><div><div class=float_left style=font-size:18px;margin-top:10px;color:#475669>时间卡设置</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="orgDateCardCtrl.addFlag = true">新增</div><div class="float_right pointer" ng-class="{\'select\':!orgDateCardCtrl.selectItemFlag,\'select_foucs\':orgDateCardCtrl.selectItemFlag}" ng-click="orgDateCardCtrl.selectItemFlag = !orgDateCardCtrl.selectItemFlag" style="margin:0 20px 0 20px"><div class="form_down_icon form_width_180 form_select_value_choose" ng-bind=orgDateCardCtrl.iName></div><div class="form_select_div form_width_180" ng-show=orgDateCardCtrl.selectItemFlag><div ng-click=orgDateCardCtrl.chooseIrr(item) ng-repeat="item in orgDateCardCtrl.irr" ng-bind=item.name class="select_cell pointer" onclick="event.cancelBubble = true"></div></div></div><div class="float_right pointer" ng-class="{\'select\':!orgDateCardCtrl.selectVenueFlag,\'select_foucs\':orgDateCardCtrl.selectVenueFlag}" ng-click="orgDateCardCtrl.selectVenueFlag = !orgDateCardCtrl.selectVenueFlag"><div class="form_down_icon form_width_180 form_select_value_choose" ng-bind=orgDateCardCtrl.vName></div><div class="form_select_div form_width_180" ng-show=orgDateCardCtrl.selectVenueFlag><div ng-click=orgDateCardCtrl.chooseVrr(venue) ng-repeat="venue in orgDateCardCtrl.vrr" ng-bind=venue.name class="select_cell pointer" onclick="event.cancelBubble = true"></div></div></div></div><div class=clear></div><table style="margin-top:20px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">名称</td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属项目</td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属场馆</td><td style="width:7%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">天数</td><td style="width:7%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">价格</td><td style="width:8%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">工本费</td><td style="width:8%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">保证金</td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">单次限时</td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">当天限次</td><td style="width:6%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">当前状态</td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr ng-repeat="service in orgDateCardCtrl.services" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.name></td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service._item.name></td><td style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service._venue.name></td><td style="width:7%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.value></td><td style="width:7%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.price></td><td style="width:8%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.cardCost></td><td style="width:8%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.bail></td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="service.limit?(service.limit+\'分钟\'):\'不限\'"></td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="service.daylimit==1?(\'一次\'):\'不限次数\'"></td><td style="width:6%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="service.isActive?\'上架中\':\'下架中\'"></td><td class=pointer style="width:11%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><img class=float_left ng-click="orgDateCardCtrl.deleteFlag = true;orgDateCardCtrl._id = service._id" style="width:11px;margin:10px 20px 0 0" src="assets/images/rdelete.png"> <img class=float_left ng-click=orgDateCardCtrl.edit(service) style="width:13px;margin:10px 20px 0 0" src="assets/images/editb.png"><div class=float_left ng-bind="service.isActive?\'去下架\':\'去上架\'" ng-click="orgDateCardCtrl.edit(service,\'isactive\')"></div></td></tr></table><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgDateCardCtrl.pagination.numPages > 1" total-items=orgDateCardCtrl.pagination.totalItems ng-model=orgDateCardCtrl.pagination.page items-per-page=orgDateCardCtrl.pagination.itemsPerPage max-size=orgDateCardCtrl.pagination.maxSize boundary-links="{{orgDateCardCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgDateCardCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgDateCardCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=orgDateCardCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">时间卡</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgDateCardCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">场馆名称</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!orgDateCardCtrl.venueFlag,\'select_foucs\':orgDateCardCtrl.venueFlag}" ng-click="orgDateCardCtrl.venueFlag = !orgDateCardCtrl.venueFlag"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=orgDateCardCtrl.venueName></div><div class=form_select_div style=width:345px ng-show=orgDateCardCtrl.venueFlag><div ng-click=orgDateCardCtrl.chooseVenue(venue) class="select_cell pointer" ng-repeat="venue in orgDateCardCtrl.venues" ng-bind=venue.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">项目名称</div><div class="float_left pointer zindex-500" ng-class="{\'select\':!orgDateCardCtrl.itemFlag,\'select_foucs\':orgDateCardCtrl.itemFlag}" ng-click="orgDateCardCtrl.itemFlag = !orgDateCardCtrl.itemFlag"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=orgDateCardCtrl.itemName></div><div class=form_select_div style=width:345px ng-show=orgDateCardCtrl.itemFlag><div ng-click=orgDateCardCtrl.chooseItem(item) class="select_cell pointer" ng-repeat="item in orgDateCardCtrl.items" ng-bind=item.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">卡类名称</div><input class="form_value float_left form_value_width" placeholder=请输入卡类名称 ng-model="orgDateCardCtrl.name"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">产品时间</div><input class="form_value float_left form_value_width" placeholder=请输入产品使用时间 ng-model="orgDateCardCtrl.value"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">产品售价</div><input class="form_value float_left form_value_width" placeholder=请输入产品售价 ng-model="orgDateCardCtrl.price"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">服务标签</div><div class=float_left style=width:350px><div class="float_left pointer" style="margin:10px 23px 0 0" ng-click=orgDateCardCtrl.chooseTag(tag) ng-repeat="tag in orgDateCardCtrl.tags"><img ng-show=!tag.select class=float_left src="assets/images/select_box.png"> <img ng-show=tag.select style=width:16px class=float_left src="assets/images/select_true.png"><div class=float_left style=margin-left:3px ng-bind=tag.name></div></div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin"><div>每天使用</div><div>次数</div></div><div ng-show=orgDateCardCtrl.oneFlag class=singleChoose_option style="float: none"><div class="singleChoose_imageBox singleChoose_imageYes"></div><div class=singleChoose_prompt>仅一次</div></div><div ng-show=!orgDateCardCtrl.oneFlag class=singleChoose_option style="float: none" ng-click="orgDateCardCtrl.oneFlag = !orgDateCardCtrl.oneFlag"><div class="singleChoose_imageBox singleChoose_imageNo"></div><div class=singleChoose_prompt>仅一次</div></div><div ng-show=!orgDateCardCtrl.oneFlag class=singleChoose_option style="float: none"><div class="singleChoose_imageBox singleChoose_imageYes"></div><div class=singleChoose_prompt>不限次数</div></div><div ng-show=orgDateCardCtrl.oneFlag class=singleChoose_option style="float: none" ng-click="orgDateCardCtrl.oneFlag = !orgDateCardCtrl.oneFlag"><div class="singleChoose_imageBox singleChoose_imageNo"></div><div class=singleChoose_prompt>不限次数</div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin"><div>每次使用</div><div>时长</div></div><input class="form_value float_left form_value_width" placeholder=每次使用限制时间，单位：分钟 ng-model="orgDateCardCtrl.limit"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">卡工本费</div><input class="form_value float_left form_value_width" placeholder=请输入产品实体卡工本费 ng-model="orgDateCardCtrl.cardcost"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">卡保证金</div><input class="form_value float_left form_value_width" placeholder=请输入产品实体卡保证金 ng-model="orgDateCardCtrl.bail"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">产品描述</div><input class="form_value float_left form_value_width" placeholder=请输入产品描述 ng-model="orgDateCardCtrl.des"></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgDateCardCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=orgDateCardCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgDateCardCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgDateCardCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>是否要删除这个卡种？</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgDateCardCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=orgDateCardCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgDateCardCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=orgDateCardCtrl.err>此名称已被占用</div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="orgDateCardCtrl.errorFlag = false"></div></div></div><div class=bgGary ng-show=orgDateCardCtrl.succeedFlag><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>操作成功</div><div class=promptClose ng-click="orgDateCardCtrl.succeedFlag = false"></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/organization/setting/setting-field-register.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="margin-left:200px;min-width: 830px"><div style="font-size:16px;padding:30px 0 0 30px">场地登记</div><div style="width:100%;border-bottom:1px solid #ddd;height:37px;margin-top:30px;line-height:34px"><div style="padding-left: 30px" class=pointer ng-repeat="venue in orgFieldRegisterCtrl.venues" ng-click=orgFieldRegisterCtrl.chooseVenue(venue)><div class=float_left ng-show="venue.name == orgFieldRegisterCtrl.venueName" style="font-size:14px;color:#00a1ff;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;border-bottom:0" ng-bind=venue.name></div><div class=float_left ng-show="!(venue.name == orgFieldRegisterCtrl.venueName)" style="font-size:14px;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;background:#EFF2F6;color:#8492a6;margin-right:20px;border-bottom:0" ng-bind=venue.name></div></div></div><div class=clear></div><div style="padding: 0 30px"><div ng-repeat="item in orgFieldRegisterCtrl.venue.items" ng-click=orgFieldRegisterCtrl.getField(item)><div ng-show="item._id == orgFieldRegisterCtrl.item._id && item.select && !item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;background:#00a1ff;color:#fff;border-top-left-radius:6px;border-bottom-left-radius:6px;height:36px;line-height:34px"></div><div ng-show="item._id == orgFieldRegisterCtrl.item._id && item.select && item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;background:#00a1ff;color:#fff;border-left:0;border-radius:6px;height:36px;line-height:34px"></div><div ng-show="item._id == orgFieldRegisterCtrl.item._id && !item.select && item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;background:#00a1ff;color:#fff;border-left:0;border-top-right-radius:6px;border-bottom-right-radius:6px;height:36px;line-height:34px"></div><div ng-show="item._id == orgFieldRegisterCtrl.item._id && !item.select && !item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;background:#00a1ff;color:#fff;border-left:0;height:36px;line-height:34px"></div><div ng-show="!(item._id == orgFieldRegisterCtrl.item._id) && item.select && !item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;border-top-left-radius:6px;border-bottom-left-radius:6px;height:36px;line-height:34px"></div><div ng-show="!(item._id == orgFieldRegisterCtrl.item._id) && !item.select && item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;border-left:0;border-top-right-radius:6px;border-bottom-right-radius:6px;height:36px;line-height:34px"></div><div ng-show="!(item._id == orgFieldRegisterCtrl.item._id) && item.select && item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;border-left:0;border-radius:6px;height:36px;line-height:34px"></div><div ng-show="!(item._id == orgFieldRegisterCtrl.item._id) && !item.select && !item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0px 15px;border-left:0;height:36px;line-height:34px"></div></div><div class="button2_normal float_right" style=background:#00A1FF;margin-top:20px ng-click="orgFieldRegisterCtrl.addFlag = true">新增场地</div><div class=clear></div><div style=width:100%;height:60px;background:#EFF2F7;border-radius:4px;margin-top:20px;color:#8492a6;line-height:60px;font-size:14px><div class=float_left style="margin:0 10px 0 20px">该项目公众号是否开放预订:</div><img ng-show=orgFieldRegisterCtrl.orderFlag ng-click="orgFieldRegisterCtrl.editVenueItem(\'orderFlag\')" class=float_left style=margin-top:20px src="assets/images/on.png"> <img ng-show=!orgFieldRegisterCtrl.orderFlag ng-click="orgFieldRegisterCtrl.editVenueItem(\'orderFlag\')" class=float_left style=margin-top:20px src="assets/images/off.png"><div ng-show=!orgFieldRegisterCtrl.orderFlag class=float_left style="margin:0 10px 0 100px">该项目公众号是否在列表显示</div><img ng-show=!orgFieldRegisterCtrl.orderFlag&&orgFieldRegisterCtrl.remarkFlag ng-click="orgFieldRegisterCtrl.editVenueItem(\'remarkFlag\')" class=float_left style=margin-top:20px src="assets/images/on.png"> <img ng-show=!orgFieldRegisterCtrl.orderFlag&&!orgFieldRegisterCtrl.remarkFlag ng-click="orgFieldRegisterCtrl.editVenueItem(\'remarkFlag\')" class=float_left style=margin-top:20px src="assets/images/off.png"></div><div style="margin-top:30px;padding-bottom:20px;border-bottom:1px solid #94A8BA;color:#1F2D3D;font-size:13px;font-weight:medium;min-width:98rem;height:20px"><div class=float_left style=width:27rem;padding-left:20px><span style=margin-left:10px>场地名称</span></div><div class=float_left style=width:14rem>状态</div><div class=float_left style=width:28rem>对外预定</div><div class=float_left style=width:19rem>操作</div></div><div class=clear></div><div style=overflow-y:auto;overflow-x:hidden;{{orgFieldRegisterCtrl.h}}><div ng-repeat="field in orgFieldRegisterCtrl.fields" style=font-size:13px;min-width:100rem><div style="border-bottom:1px solid #D3DCE6;display:flex;align-items:center;color:#475669;height:46px;line-height:44px"><div class=float_left style=width:27rem;padding-left:20px><span ng-bind=field.name style=margin-left:1rem></span></div><div ng-show=field.isUsed class=float_left style=width:14rem><div class=float_left style=background:#13ce66;border-radius:50%;width:7px;height:7px;margin-top:20px></div><div class=float_left style=margin-left:5px>使用中</div></div><div ng-show=!field.isUsed class=float_left style=width:14rem><div class=float_left style=background:#ff4949;border-radius:50%;width:7px;height:7px;margin-top:20px></div><div class=float_left style=margin-left:5px>停用中</div></div><div class=float_left style=width:28rem><div ng-show=field.isOpen style=width:10rem><div class=float_left style=background:#13ce66;border-radius:50%;width:7px;height:7px;margin-top:7px></div><div class=float_left style=margin-left:5px;line-height:20px>可预订</div></div><div ng-show=!field.isOpen style=width:10rem><div class=float_left style=background:#ff4949;border-radius:50%;width:7px;height:7px;margin-top:7px></div><div class=float_left style=margin-left:5px;line-height:20px>不可订</div></div><div class=clear></div><div style="color:#ff4949;font-size:12px;margin:2px 0 0 11px;line-height:10px" ng-bind=field.warn></div></div><div class=float_left style=width:19rem;color:#00a1ff><div ng-click=orgFieldRegisterCtrl.showEdit(field) class="float_left pointer">编辑</div><div ng-click="orgFieldRegisterCtrl.deleteFlag = true;orgFieldRegisterCtrl.fId = field._id" class="float_left pointer" style=margin-left:20px;color:#99a9bc>删除</div></div></div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgFieldRegisterCtrl.editFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">编辑场地</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgFieldRegisterCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">输入名称</div><input class="form_value float_left form_value_width" placeholder=请输入场地名称 ng-blur="orgFieldRegisterCtrl.judge(\'name\')" ng-class="{\'\':!orgFieldRegisterCtrl.nameFlag,\'form_value_error\':orgFieldRegisterCtrl.nameFlag}" ng-model="orgFieldRegisterCtrl.name"></div><div class=clear></div><div class=form_error_font ng-show=!orgFieldRegisterCtrl.nameFlag></div><div class=form_error_font ng-show=orgFieldRegisterCtrl.nameFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">场地状态</div><img src=assets/images/bluecircle.png ng-show=orgFieldRegisterCtrl.flagOn ng-click=orgFieldRegisterCtrl.chooseOn(true) style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=!orgFieldRegisterCtrl.flagOn ng-click=orgFieldRegisterCtrl.chooseOn(true) style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=orgFieldRegisterCtrl.chooseOn(true)>启用</div><img src=assets/images/bluecircle.png ng-show=!orgFieldRegisterCtrl.flagOn ng-click=orgFieldRegisterCtrl.chooseOn(false) style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=orgFieldRegisterCtrl.flagOn ng-click=orgFieldRegisterCtrl.chooseOn(false) style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=orgFieldRegisterCtrl.chooseOn(false)>不启用</div></div><div class=clear></div><div class="position_relative form_first_view"><div class="form_key float_left" style=line-height:18px;margin-right:18px><div>对外预定</div><div>停用时间</div></div><input class="form_value float_left form_clock_icon" style=width:150px placeholder=停用开始时间 ng-click="orgFieldRegisterCtrl.closeFlag = true;orgFieldRegisterCtrl.closeDateFlag = true;orgFieldRegisterCtrl.closeDateFlag2 = false" ng-show="!orgFieldRegisterCtrl.closeFlag"><div class="form_value float_left form_clock_icon" style=width:150px ng-click="orgFieldRegisterCtrl.closeDateFlag = !orgFieldRegisterCtrl.closeDateFlag;orgFieldRegisterCtrl.closeDateFlag2 = false" ng-bind="orgFieldRegisterCtrl.closeDate | date:\'yyyy-MM-dd\'" ng-show=orgFieldRegisterCtrl.closeFlag></div><div class="form_key float_left form_key_margin" style=margin-left:15px>至</div><input class="form_value float_left form_clock_icon" style=width:150px placeholder=无限期 ng-click="orgFieldRegisterCtrl.closeFlag2 = true;orgFieldRegisterCtrl.closeDateFlag2 = true;orgFieldRegisterCtrl.closeDateFlag = false" ng-show="!orgFieldRegisterCtrl.closeFlag2"><div class="form_value float_left form_clock_icon" style=width:150px ng-click="orgFieldRegisterCtrl.closeDateFlag2 = !orgFieldRegisterCtrl.closeDateFlag2;orgFieldRegisterCtrl.closeDateFlag = false" ng-bind="orgFieldRegisterCtrl.closeDate2 | date:\'yyyy-MM-dd\'" ng-show=orgFieldRegisterCtrl.closeFlag2></div><div class="student_datetime student_datetime2"><datetimepick ng-close="orgFieldRegisterCtrl.closeDateFlag = false" ng-id="\'first\'" ng-show=orgFieldRegisterCtrl.closeDateFlag ng-date=orgFieldRegisterCtrl.closeDate></datetimepick></div><div class="student_datetime student_datetime2"><datetimepick ng-close="orgFieldRegisterCtrl.closeDateFlag2 = false" ng-id="\'first\'" ng-show=orgFieldRegisterCtrl.closeDateFlag2 ng-date=orgFieldRegisterCtrl.closeDate2></datetimepick></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgFieldRegisterCtrl.edit()>完成</div><div class="button_normal float_right" ng-click="orgFieldRegisterCtrl.deleteFlag = true">删除场地</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgFieldRegisterCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增场地</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgFieldRegisterCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">输入名称</div><input class="form_value float_left form_value_width" placeholder=请输入场地名称 ng-blur="orgFieldRegisterCtrl.judge(\'name\')" ng-class="{\'\':!orgFieldRegisterCtrl.nameFlag,\'form_value_error\':orgFieldRegisterCtrl.nameFlag}" ng-model="orgFieldRegisterCtrl.name"></div><div class=clear></div><div class=form_error_font ng-show=!orgFieldRegisterCtrl.nameFlag></div><div class=form_error_font ng-show=orgFieldRegisterCtrl.nameFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">是否启用</div><img src=assets/images/bluecircle.png style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=orgFieldRegisterCtrl.chooseOn(true)>启用</div><img src=assets/images/whitecircle.png style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=orgFieldRegisterCtrl.chooseOn(false)>不启用</div></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgFieldRegisterCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=orgFieldRegisterCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgFieldRegisterCtrl.showEditFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">编辑场地</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgFieldRegisterCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">该项目是否启用</div><img src=assets/images/bluecircle.png ng-show=orgFieldRegisterCtrl.flagOn ng-click="orgFieldRegisterCtrl.chooseOn(true);orgFieldRegisterCtrl.flagEdit = false" style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=!orgFieldRegisterCtrl.flagOn ng-click="orgFieldRegisterCtrl.chooseOn(true);orgFieldRegisterCtrl.flagEdit = false" style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click="orgFieldRegisterCtrl.chooseOn(true);orgFieldRegisterCtrl.flagEdit = false">启用</div><img src=assets/images/bluecircle.png ng-show=!orgFieldRegisterCtrl.flagOn ng-click="orgFieldRegisterCtrl.chooseOn(false);orgFieldRegisterCtrl.flagEdit = true" style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=orgFieldRegisterCtrl.flagOn ng-click="orgFieldRegisterCtrl.chooseOn(false);orgFieldRegisterCtrl.flagEdit = true" style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click="orgFieldRegisterCtrl.chooseOn(false);orgFieldRegisterCtrl.flagEdit = true">不启用</div></div><div class=clear></div><div class=form_error_font ng-show=orgFieldRegisterCtrl.flagEdit></div><div class=position_relative ng-show=orgFieldRegisterCtrl.flagEdit><div class="form_key float_left form_key_margin">停用时间</div><input class="form_value float_left form_value_width form_clock_icon" placeholder=请输入停用时间 ng-click="orgFieldRegisterCtrl.closeFlag = true;orgFieldRegisterCtrl.closeDateFlag = true" ng-show="!orgFieldRegisterCtrl.closeFlag"><div class="form_value float_left form_value_width form_clock_icon" ng-click="orgFieldRegisterCtrl.closeDateFlag = !orgFieldRegisterCtrl.closeDateFlag" ng-bind="orgFieldRegisterCtrl.closeDate | date:\'yyyy-MM-dd\'" ng-show=orgFieldRegisterCtrl.closeFlag></div><div class="student_datetime student_datetime2" style=margin-top:78px><datetimepick ng-close="orgFieldRegisterCtrl.closeDateFlag = false" ng-id="\'second\'" ng-show=orgFieldRegisterCtrl.closeDateFlag ng-date=orgFieldRegisterCtrl.closeDate></datetimepick></div></div><div class=clear></div><div class=form_error_font ng-show=!orgFieldRegisterCtrl.oFlag></div><div class=form_error_font ng-show=orgFieldRegisterCtrl.oFlag>此项为必填项</div><!--                         <div>\n                            <div class="form_key float_left form_key_margin">网上预订</div>\n                            <img src="assets/images/bluecircle.png" ng-show="orgFieldRegisterCtrl.flagOpen" ng-click="orgFieldRegisterCtrl.chooseOpen(true)" style="height:18px" class="float_left form_oImage_margin"/>\n                            <img src="assets/images/radio_off.png" ng-show="!orgFieldRegisterCtrl.flagOpen" ng-click="orgFieldRegisterCtrl.chooseOpen(true)" style="height:18px" class="float_left form_oImage_margin"/>\n                            <div class="float_left form_key form_option_margin pointer" ng-click="orgFieldRegisterCtrl.chooseOpen(true)">可预订</div>\n                            <img src="assets/images/bluecircle.png" ng-show="!orgFieldRegisterCtrl.flagOpen" ng-click="orgFieldRegisterCtrl.chooseOpen(false)" style="height:18px" class="float_left form_oImage_margin"/>\n                            <img src="assets/images/radio_off.png" ng-show="orgFieldRegisterCtrl.flagOpen" ng-click="orgFieldRegisterCtrl.chooseOpen(false)" style="height:18px" class="float_left form_oImage_margin"/>\n                            <div class="float_left form_key form_option_margin pointer" ng-click="orgFieldRegisterCtrl.chooseOpen(false)">不可预订</div>\n                        </div>\n                        <div class="clear"></div> --></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgFieldRegisterCtrl.finishEdit()>完成</div><div class="button_normal float_right" ng-click=orgFieldRegisterCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=orgFieldRegisterCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=orgFieldRegisterCtrl.err></div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="orgFieldRegisterCtrl.errorFlag = false"></div></div></div><div class=bgGary ng-show=orgFieldRegisterCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgFieldRegisterCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>此操作将永久删除该场地信息，对于预定该场馆的个人用户会退还预定金额。是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgFieldRegisterCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=orgFieldRegisterCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'),
            a.put("app/organization/setting/setting-holiday.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0px 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="padding:20px 30px 30px 30px;min-width:900px;margin-left:190px"><div class=float_left style=font-size:18px;color:#475669>特殊日期登记</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="orgSettingHolidayCtrl.addFlag = true">新增特殊日期</div><div class=clear></div><table style="margin-top:20px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:16%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">特殊日期名称</td><td style="width:16%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">开始日期</td><td style="width:16%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">结束日期</td><td style="width:16%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">价格体系</td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">备注</td><td style="width:16%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr ng-repeat="holiday in orgSettingHolidayCtrl.holidaies" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:16%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=holiday.name></td><td style="width:16%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="holiday.startDate | date:\'yyyy-MM-dd\'"></td><td style="width:16%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="holiday.endDate | date:\'yyyy-MM-dd\'"></td><td style="width:16%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="holiday.weekAs == 1?\'工作日方案\':(holiday.weekAs == 6?\'周末方案\':\'节假日方案\')"></td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="holiday.remark?holiday.remark:\'无\'"></td><td class=pointer style="width:16%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div ng-click=orgSettingHolidayCtrl.showEdit(holiday) class=float_left>编辑</div><div ng-click="orgSettingHolidayCtrl.deleteFlag=true;orgSettingHolidayCtrl.hId = holiday._id" class=float_left style="margin:0 0 0 40px;color:#99a9bc">删除</div></td></tr></table></div></div></div><!-- 新增编辑服务 --><div class=bgGary ng-show=orgSettingHolidayCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增特殊日期</div><!-- <div class="form_title float_left">编辑综合服务</div> --><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingHolidayCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">特殊日期</div><input class="form_value float_left form_value_width" placeholder=请输入特殊日期名 ng-model=orgSettingHolidayCtrl.name></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingHolidayCtrl.nFlag></div><div class=form_error_font ng-show=orgSettingHolidayCtrl.nFlag>此项为必填项</div><div class="position_relative zindex-500"><div class="form_key float_left form_key_margin">开始日期</div><input class="form_value float_left form_value_width form_right_date_icon" placeholder=开始日期 ng-click="orgSettingHolidayCtrl.startFlag = true;orgSettingHolidayCtrl.startShowFlag = true;" ng-show="!orgSettingHolidayCtrl.startShowFlag"><div class="form_value float_left form_value_width form_right_date_icon" ng-click="orgSettingHolidayCtrl.startFlag = !orgSettingHolidayCtrl.startFlag" ng-bind="orgSettingHolidayCtrl.startDate | date:\'yyyy-MM-dd\'" ng-show=orgSettingHolidayCtrl.startShowFlag></div><div class=student_datetime style=margin-left:75px ng-show=orgSettingHolidayCtrl.startFlag><datetimepick ng-close="orgSettingHolidayCtrl.startFlag=false;" ng-date=orgSettingHolidayCtrl.startDate></datetimepick></div><div class=clear></div></div><div class=form_error_font ng-show=!orgSettingHolidayCtrl.sFlag></div><div class=form_error_font ng-show=orgSettingHolidayCtrl.sFlag>此项为必填项</div><div class="position_relative zindex-400"><div class="form_key float_left form_key_margin">结束日期</div><input class="form_value float_left form_value_width form_right_date_icon" placeholder=结束日期 ng-click="orgSettingHolidayCtrl.endFlag = true;orgSettingHolidayCtrl.endShowFlag = true;" ng-show="!orgSettingHolidayCtrl.endShowFlag"><div class="form_value float_left form_value_width form_right_date_icon" ng-click="orgSettingHolidayCtrl.endFlag = !orgSettingHolidayCtrl.endFlag" ng-bind="orgSettingHolidayCtrl.endDate | date:\'yyyy-MM-dd\'" ng-show=orgSettingHolidayCtrl.endShowFlag></div><div class=student_datetime style=margin-left:75px ng-show=orgSettingHolidayCtrl.endFlag><datetimepick ng-close="orgSettingHolidayCtrl.endFlag=false;" ng-date=orgSettingHolidayCtrl.endDate></datetimepick></div><div class=clear></div></div><div class=form_error_font ng-show=!orgSettingHolidayCtrl.eFlag></div><div class=form_error_font ng-show=orgSettingHolidayCtrl.eFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">详情备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=orgSettingHolidayCtrl.remark></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingHolidayCtrl.nFlag></div><div class=form_error_font ng-show=orgSettingHolidayCtrl.nFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">选择价格</div><div class="singleChoose_box float_left"><div class=singleChoose_option ng-repeat="state in orgSettingHolidayCtrl.useStateArr" ng-click=orgSettingHolidayCtrl.chooseState(state)><div class="singleChoose_imageBox {{state.image}}"></div><div class=singleChoose_prompt ng-bind=state.name>每周</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingHolidayCtrl.create()>完成</div><div class="button_normal float_right" ng-click=orgSettingHolidayCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgSettingHolidayCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingHolidayCtrl.deleteFlag = false"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>删除为不可逆操作，是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click="orgSettingHolidayCtrl.deleteFlag = false">不删了</div><div class="button_normal float_right" ng-click=orgSettingHolidayCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgSettingHolidayCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgSettingHolidayCtrl.wordOK>22212</div><div class=promptClose ng-click=orgSettingHolidayCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgSettingHolidayCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgSettingHolidayCtrl.wordERR>22212</div><div class=promptClose ng-click="orgSettingHolidayCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgSettingHolidayCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=orgSettingHolidayCtrl.wordWARN>22212</div><div class=promptClose ng-click=orgSettingHolidayCtrl.closePrompt()></div></div></div></div>'), a.put("app/organization/setting/setting-item.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="padding:30px;margin-left:170px;min-width: 600px"><div><div class=float_left style=font-size:16px;margin-left:30px>项目设置</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="orgSettingItemCtrl.addFlag = true">新增项目</div></div><div class=clear></div><div style="margin:40px 0 0 30px;padding-bottom:20px;border-bottom:1px solid #94A8BA;color:#475669;font-size:16px;font-weight:medium;min-width:90rem"><div class=float_left style=width:20rem;padding-left:2rem>项目名称</div><div class=float_left style=width:20rem>折扣</div><div class=float_left style=width:20rem>每天限定</div><div class=float_left style=width:14rem>操作</div></div><div class=clear></div><div ng-repeat="item in orgSettingItemCtrl.items" style="font-size:13px;min-width:90rem;margin-left:30px;line-height: 20px"><div style="border-bottom:1px solid #D3DCE6;color:#475669;padding:13px 0;display:flex;align-items:center"><div class=float_left style=width:20rem;padding-left:2rem ng-bind=item.name></div><div class=float_left style=width:20rem ng-bind="item.discount>0?item.discount:\'暂无\'"></div><div class=float_left style=width:20rem ng-bind="item.limit?item.limit:\'暂无\'"></div><div class=float_left style=width:14rem;color:#00a1ff><div ng-click=orgSettingItemCtrl.showEdit(item) class="float_left pointer">编辑</div><img ng-show="item.order != orgSettingItemCtrl.length" ng-click="orgSettingItemCtrl.move(\'down\',item)" title=将项目下移 class="float_right pointer" style="height:15px;margin:5px 5px 0 10px" src="assets/images/xup.png"> <img ng-show="item.order != 1" title=将项目上移 ng-click="orgSettingItemCtrl.move(\'up\',item)" class="float_right pointer" style=height:15px;margin-top:5px src="assets/images/xdown.png"></div></div><div class=clear></div></div></div><div class=bgGary ng-show=orgSettingItemCtrl.editFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">编辑项目</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingItemCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">项目名称</div><input class="form_value float_left form_value_width" placeholder=请输入项目名称 ng-blur="orgSettingItemCtrl.judge(\'item\')" ng-class="{\'\':!orgSettingItemCtrl.itemFlag,\'form_value_error\':orgSettingItemCtrl.itemFlag}" ng-model="orgSettingItemCtrl.itemName"></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingItemCtrl.itemFlag></div><div class=form_error_font ng-show=orgSettingItemCtrl.itemFlag ng-bind=orgSettingItemCtrl.err></div><div><div class="form_key float_left form_key_margin">每天限定</div><input class="form_value float_left form_value_width" placeholder=请输入该项目每天限定小时数 ng-model="orgSettingItemCtrl.limit"></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingItemCtrl.limitFlag></div><div class=form_error_font ng-show=orgSettingItemCtrl.limitFlag>此项必填</div><div class=clear></div><div><div class="form_key float_left form_key_margin">场馆状态</div><img src=assets/images/bluecircle.png ng-show=orgSettingItemCtrl.flagOn ng-click=orgSettingItemCtrl.chooseOn(true) style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=!orgSettingItemCtrl.flagOn ng-click=orgSettingItemCtrl.chooseOn(true) style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=orgSettingItemCtrl.chooseOn(true)>有折扣</div><img src=assets/images/bluecircle.png ng-show=!orgSettingItemCtrl.flagOn ng-click=orgSettingItemCtrl.chooseOn(false) style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=orgSettingItemCtrl.flagOn ng-click=orgSettingItemCtrl.chooseOn(false) style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=orgSettingItemCtrl.chooseOn(false)>没折扣</div></div><div class=clear></div><div class=form_first_view ng-show=orgSettingItemCtrl.flagOn><div class="form_key float_left form_key_margin">项目折扣</div><input class="form_value float_left form_value_width" placeholder=请输入项目折扣(例：0.9) ng-model="orgSettingItemCtrl.discount"></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingItemCtrl.discountFlag></div><div class=form_error_font ng-show=orgSettingItemCtrl.discountFlag>此项必填</div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingItemCtrl.edit()>完成</div><div class="button_normal float_right" ng-click="orgSettingItemCtrl.close();orgSettingItemCtrl.deleteFlag = true">删除项目</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgSettingItemCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingItemCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>删除项目后，场馆里该项目的场地全部会被删除。对于预定该项目的个人用户会退还预定金额。是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingItemCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=orgSettingItemCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgSettingItemCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增项目</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingItemCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">项目名称</div><input class="form_value float_left form_value_width" placeholder=请输入项目名称 ng-blur="orgSettingItemCtrl.judge(\'item\')" ng-class="{\'\':!orgSettingItemCtrl.itemFlag,\'form_value_error\':orgSettingItemCtrl.itemFlag}" ng-model="orgSettingItemCtrl.itemName"></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingItemCtrl.itemFlag></div><div class=form_error_font ng-show=orgSettingItemCtrl.itemFlag ng-bind=orgSettingItemCtrl.err></div><div><div class="form_key float_left form_key_margin">每天限定</div><input class="form_value float_left form_value_width" placeholder=请输入该项目每天限定小时数 ng-model="orgSettingItemCtrl.limit"></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingItemCtrl.limitFlag></div><div class=form_error_font ng-show=orgSettingItemCtrl.limitFlag>此项必填</div><div class=clear></div><div><div class="form_key float_left form_key_margin">场馆状态</div><img src=assets/images/bluecircle.png ng-show=orgSettingItemCtrl.flagOn ng-click=orgSettingItemCtrl.chooseOn(true) style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=!orgSettingItemCtrl.flagOn ng-click=orgSettingItemCtrl.chooseOn(true) style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=orgSettingItemCtrl.chooseOn(true)>有折扣</div><img src=assets/images/bluecircle.png ng-show=!orgSettingItemCtrl.flagOn ng-click=orgSettingItemCtrl.chooseOn(false) style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=orgSettingItemCtrl.flagOn ng-click=orgSettingItemCtrl.chooseOn(false) style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=orgSettingItemCtrl.chooseOn(false)>没折扣</div></div><div class=clear></div><div class=form_first_view ng-show=orgSettingItemCtrl.flagOn><div class="form_key float_left form_key_margin">项目折扣</div><input class="form_value float_left form_value_width" placeholder=请输入项目折扣(例：0.9) ng-model="orgSettingItemCtrl.discount"></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingItemCtrl.discountFlag></div><div class=form_error_font ng-show=orgSettingItemCtrl.discountFlag>此项必填</div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingItemCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=orgSettingItemCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 成功提示弹框 --><div class=bgGary2 ng-show=orgSettingItemCtrl.succeedFlag><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/rectangle2.png"><div class="float_left form_marginL_15px">修改完成</div></div></div><div class=bgGary style=z-index:999 ng-show=orgSettingItemCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=orgSettingItemCtrl.err>此名称已被占用</div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="orgSettingItemCtrl.errorFlag = false"></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/organization/setting/setting-person.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style=padding:30px;margin-left:170px;min-width:600px><div style=font-size:16px;margin-left:30px>个人信息</div><div class=form_first_view><div class="form_key float_left form_key_margin" style=margin-right:20px;width:84px;text-align:right>账号名称</div><div class="form_value float_left form_value_width" ng-bind=orgSettingPersonCtrl.account></div></div><div class=clear></div><div style=margin-top:20px><div class="form_key float_left form_key_margin" style=margin-right:20px;width:84px;text-align:right>原密码</div><input class="form_value float_left form_value_width" placeholder=请输入原密码 ng-model=orgSettingPersonCtrl.oldPassword ng-change="orgSettingPersonCtrl.judge()"></div><div class=clear></div><div style=margin-top:20px><div class="form_key float_left form_key_margin" style=margin-right:20px;width:84px;text-align:right>新密码</div><input class="form_value float_left form_value_width" placeholder=请输入新密码 ng-model=orgSettingPersonCtrl.newPassword ng-change="orgSettingPersonCtrl.judge()"></div><div class=clear></div><div class="button2_normal float_left" ng-show=!orgSettingPersonCtrl.saveFlag style="background:#ccc;margin:30px 0 0 104px">保存</div><div class="button2_normal float_left" ng-show=orgSettingPersonCtrl.saveFlag style="margin:30px 0 0 104px" ng-click=orgSettingPersonCtrl.save()>保存</div><div class="button2_normal float_left" style="background:#fff;margin:30px 0 0 20px;border:1px solid #ccc;color:#99a9bf" ng-click=orgSettingPersonCtrl.logout()>退出登录</div></div><!-- 成功提示弹框 --><div class=bgGary2 ng-show=orgSettingPersonCtrl.succeedFlag><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/rectangle2.png"><div class="float_left form_marginL_15px">修改完成</div></div></div><div class=bgGary ng-show=orgSettingPersonCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px">请正确输入密码</div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/organization/setting/setting-price-register.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style=margin-left:190px><div style="font-size:16px;padding:30px 0 0 30px">价格设置</div><div style="width:100%;border-bottom:1px solid #ddd;height:37px;margin-top:30px;line-height:34px"><div style="padding-left: 30px" class=pointer ng-repeat="venue in orgPriceRegisterCtrl.venues" ng-click=orgPriceRegisterCtrl.chooseVenue(venue)><div class=float_left ng-show="venue.name == orgPriceRegisterCtrl.venueName" style="font-size:14px;color:#00a1ff;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;border-bottom:0" ng-bind=venue.name></div><div class=float_left ng-show="!(venue.name == orgPriceRegisterCtrl.venueName)" style="font-size:14px;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;background:#EFF2F6;color:#8492a6;border-bottom:0" ng-bind=venue.name></div></div><div class=clear></div></div><div ng-repeat="item in orgPriceRegisterCtrl.venue.items" style="font-size:13px;min-width: 1000px;padding: 0 30px"><div style=margin-top:30px;height:30px;margin-right:15px;font-weight:600 ng-bind=item.name></div><div class=clear></div><div style=margin-left:2.7rem><div style=width:5rem ng-repeat="clock in item.clocks" class=float_left ng-bind="clock.sd | date:\'HH:mm\'"></div></div><div class=clear></div><div style=margin-top:10px><div ng-repeat="time in item.clocks"><div class=float_left ng-show=time.flag style=font-weight:600;width:4rem;height:50px;line-height:50px><div>工作日</div><div>周末</div><div>节假日</div></div><div class=float_left ng-show="!time.emptyFlag && !time.endFlag"><div style="height:52px;line-height:50px;width:5rem;color:#00A1FF;border:1px solid #ddd;border-bottom:0;padding-left:8px" ng-click="orgPriceRegisterCtrl.showAdd(time,\'week\',item)" class=pointer ng-show="!time.priceArr[1].unit && time.flag">设价格</div><div style="height:52px;line-height:50px;width:5rem;border:1px solid #ddd;border-bottom:0;padding-left:8px" ng-click="orgPriceRegisterCtrl.showAdd(time,\'week\',item,time.priceArr[1].price)" class=pointer ng-show="time.priceArr[1].unit && time.flag" ng-bind="time.priceArr[1].price+\'/\'+time.priceArr[1].u"></div><div style="height:52px;line-height:50px;width:5rem;color:#00A1FF;border-right:1px solid #ddd;border-top:1px solid #ddd;padding-left:8px" ng-click="orgPriceRegisterCtrl.showAdd(time,\'week\',item)" class=pointer ng-show="!time.priceArr[1].unit && !time.flag">设价格</div><div style="height:52px;line-height:50px;width:5rem;border-right:1px solid #ddd;border-top:1px solid #ddd;padding-left:8px" ng-click="orgPriceRegisterCtrl.showAdd(time,\'week\',item,time.priceArr[1].price)" class=pointer ng-show="time.priceArr[1].unit && !time.flag" ng-bind="time.priceArr[1].price+\'/\'+time.priceArr[1].u"></div><div style="height:51px;line-height:50px;width:5rem;color:#00A1FF;border:1px solid #ddd;border-left:0;padding-left:8px" ng-click="orgPriceRegisterCtrl.showAdd(time,\'weekend\',item)" class=pointer ng-show="!time.priceArr[6].unit && !time.flag">设价格</div><div style="height:51px;line-height:50px;width:5rem;border:1px solid #ddd;border-left:0;padding-left:8px" ng-click="orgPriceRegisterCtrl.showAdd(time,\'weekend\',item,time.priceArr[6].price)" class=pointer ng-show="time.priceArr[6].unit && !time.flag" ng-bind="time.priceArr[6].price+\'/\'+time.priceArr[6].u"></div><div style="height:51px;line-height:50px;width:5rem;color:#00A1FF;border:1px solid #ddd;padding-left:8px" ng-click="orgPriceRegisterCtrl.showAdd(time,\'weekend\',item)" class=pointer ng-show="!time.priceArr[6].unit && time.flag">设价格</div><div style="height:51px;line-height:50px;width:5rem;border:1px solid #ddd;padding-left:8px" ng-click="orgPriceRegisterCtrl.showAdd(time,\'weekend\',item,time.priceArr[6].price)" class=pointer ng-show="time.priceArr[6].unit && time.flag" ng-bind="time.priceArr[6].price+\'/\'+time.priceArr[6].u"></div><div style="height:51px;line-height:50px;width:5rem;color:#00A1FF;border:1px solid #ddd;border-left:0;padding-left:8px;border-top:0" ng-click="orgPriceRegisterCtrl.showAdd(time,\'holiday\',item)" class=pointer ng-show="!time.priceArr[7].unit && !time.flag">设价格</div><div style="height:51px;line-height:50px;width:5rem;border:1px solid #ddd;border-left:0;padding-left:8px;border-top:0" ng-click="orgPriceRegisterCtrl.showAdd(time,\'holiday\',item,time.priceArr[7].price)" class=pointer ng-show="time.priceArr[7].unit && !time.flag" ng-bind="time.priceArr[7].price+\'/\'+time.priceArr[7].u"></div><div style="height:51px;line-height:50px;width:5rem;color:#00A1FF;border:1px solid #ddd;padding-left:8px;border-top:0" ng-click="orgPriceRegisterCtrl.showAdd(time,\'holiday\',item)" class=pointer ng-show="!time.priceArr[7].unit && time.flag">设价格</div><div style="height:51px;line-height:50px;width:5rem;border:1px solid #ddd;padding-left:8px;border-top:0" ng-click="orgPriceRegisterCtrl.showAdd(time,\'holiday\',item,time.priceArr[7].price)" class=pointer ng-show="time.priceArr[7].unit && time.flag" ng-bind="time.priceArr[7].price+\'/\'+time.priceArr[7].u"></div></div><div class=float_left ng-show=time.emptyFlag><div style="height:52px;line-height:50px;width:5rem;color:#00A1FF;border-top:1px solid #ddd;border-right:1px solid #ddd;padding-left:8px">暂无</div><div style="height:51px;line-height:50px;width:5rem;color:#00A1FF;border:1px solid #ddd;border-left:0;padding-left:8px">暂无</div></div></div><div class=clear></div></div><div class=clear></div></div></div><div class=bgGary ng-show=orgPriceRegisterCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">设置价格</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgPriceRegisterCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">输入价格</div><input class="form_value float_left form_value_width" placeholder=请输入价格 ng-blur="orgPriceRegisterCtrl.judge(\'price\')" ng-class="{\'\':!orgPriceRegisterCtrl.priceFlag,\'form_value_error\':orgPriceRegisterCtrl.priceFlag}" ng-model="orgPriceRegisterCtrl.price"><div class=clear></div><div class=form_error_font ng-show=!orgPriceRegisterCtrl.pFlag></div><div class=form_error_font ng-show=orgPriceRegisterCtrl.pFlag>此项为必填项</div><div><img src=assets/images/bluecircle.png ng-show=orgPriceRegisterCtrl.flagOn ng-click=orgPriceRegisterCtrl.chooseOn(true) style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=!orgPriceRegisterCtrl.flagOn ng-click=orgPriceRegisterCtrl.chooseOn(true) style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=orgPriceRegisterCtrl.chooseOn(true)>按小时</div><img src=assets/images/bluecircle.png ng-show=!orgPriceRegisterCtrl.flagOn ng-click=orgPriceRegisterCtrl.chooseOn(false) style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=orgPriceRegisterCtrl.flagOn ng-click=orgPriceRegisterCtrl.chooseOn(false) style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=orgPriceRegisterCtrl.chooseOn(false)>按场次</div></div><div class=clear></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgPriceRegisterCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=orgPriceRegisterCtrl.close()>取消</div><div class=clear></div></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/organization/setting/setting-product-info.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div class=field_titleBox><div class="field_titleNormal field_titleChoose">商品基础信息</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-setting-supply>供应商和商品种类设置</div></div><div style="padding:20px 30px 30px 30px;min-width: 850px"><div><div class="button2_normal float_left" style=background:#00A1FF ng-click="orgProductInfoCtrl.addFlag = true">新增商品</div></div><div class=clear></div><div style="margin-top:40px;padding-bottom:20px;border-bottom:1px solid #94A8BA;color:#1F2D3D;font-size:13px;font-weight:medium;min-width:114rem"><div class=float_left style=width:14rem;padding-left:20px>商品名称</div><div class=float_left style=width:14rem>商品条码</div><div class=float_left style=width:14rem>计价单位</div><div class=float_left style=width:14rem>商品售价</div><div class=float_left style=width:14rem>商品种类</div><div class=float_left style=width:14rem>供应商</div><div class=float_left style=width:14rem>调价日期</div><div class=float_left style=width:16rem>操作</div></div><div class=clear></div><div ng-repeat="product in orgProductInfoCtrl.products" style=font-size:13px;min-width:114rem><div style="border-bottom:1px solid #ddd;display:flex;align-items:center;color:#475669;height:46px;line-height:46px"><div class=float_left style=width:14rem;padding-left:20px><span style=width:10rem ng-bind=product.name></span></div><div class=float_left style=width:14rem><span ng-bind="product.misCode?product.misCode:\'暂无\'"></span></div><div class=float_left style=width:14rem><span ng-bind=product.unit></span></div><div class=float_left style=width:14rem><span ng-bind=product.price></span></div><div class=float_left style=width:14rem><span ng-bind=product.categoryName></span></div><div class=float_left style=width:14rem><span ng-bind=product.supplyName></span></div><div class=float_left style=width:14rem><span ng-bind="product.updatePriceDate?(product.updatePriceDate | date:\'yyyy-MM-dd HH:mm\'):\'暂无\'"></span></div><div class=float_left style=width:16rem;color:#00a1ff><div ng-click=orgProductInfoCtrl.showEdit(product) class="float_left pointer">编辑</div><!-- <div ng-click="orgProductInfoCtrl.deleteFlag = true;orgProductInfoCtrl.vId = venue._id" class="float_left pointer" style="margin:0 0 0 40px;color:#99a9bc">删除</div>  --></div></div><div class=clear></div></div><pagination style="left:280px;margin:20px 30px 3px 0px" ng-if="orgProductInfoCtrl.pagination.numPages > 1" total-items=orgProductInfoCtrl.pagination.totalItems ng-model=orgProductInfoCtrl.pagination.page items-per-page=orgProductInfoCtrl.pagination.itemsPerPage max-size=orgProductInfoCtrl.pagination.maxSize boundary-links="{{orgProductInfoCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgProductInfoCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgProductInfoCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=orgProductInfoCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">商品详情</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgProductInfoCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin" style="width: 56px">商品名称</div><input class="form_value float_left form_value_width" placeholder=请输入商品名称 ng-blur="orgProductInfoCtrl.judge(\'name\')" ng-class="{\'\':!orgProductInfoCtrl.nameFlag,\'form_value_error\':orgProductInfoCtrl.nameFlag}" ng-model="orgProductInfoCtrl.name"></div><div class=clear></div><div class=form_error_font ng-show=!orgProductInfoCtrl.nameFlag></div><div class=form_error_font ng-show=orgProductInfoCtrl.nameFlag style=margin-left:80px>此项为必填项</div><div><div class="form_key float_left form_key_margin" style="width: 56px">商品类别</div><div class="float_left pointer" style="z-index: 50" ng-class="{\'select\':!orgProductInfoCtrl.chooseProductFlag,\'select_foucs\':orgProductInfoCtrl.chooseProductFlag}" ng-click="orgProductInfoCtrl.chooseProductFlag = !orgProductInfoCtrl.chooseProductFlag"><div class="form_down_icon form_select_value_choose" style=width:346px ng-bind=orgProductInfoCtrl.categoryName></div><div class=form_select_div style=width:346px ng-show=orgProductInfoCtrl.chooseProductFlag><div ng-click=orgProductInfoCtrl.chooseCreateCategory(category) class="select_cell pointer" ng-repeat="category in orgProductInfoCtrl.shopProductCategories" ng-bind=category.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin" style="width: 56px">供应商</div><div class="float_left pointer" style="z-index: 20" ng-class="{\'select\':!orgProductInfoCtrl.chooseSupplyFlag,\'select_foucs\':orgProductInfoCtrl.chooseSupplyFlag}" ng-click="orgProductInfoCtrl.chooseSupplyFlag = !orgProductInfoCtrl.chooseSupplyFlag"><div class="form_down_icon form_select_value_choose" style=width:346px ng-bind=orgProductInfoCtrl.supplyName></div><div class=form_select_div style=width:346px ng-show=orgProductInfoCtrl.chooseSupplyFlag><div ng-click=orgProductInfoCtrl.chooseSupply(supply) class="select_cell pointer" ng-repeat="supply in orgProductInfoCtrl.supplies" ng-bind=supply.supplyName onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin" style="width: 56px">计价单位</div><input class="form_value float_left form_value_width" placeholder=请输入计价单位 ng-blur="orgProductInfoCtrl.judge(\'unit\')" ng-class="{\'\':!orgProductInfoCtrl.unitFlag,\'form_value_error\':orgProductInfoCtrl.unitFlag}" ng-model="orgProductInfoCtrl.unit"></div><div class=clear></div><div class=form_error_font ng-show=!orgProductInfoCtrl.unitFlag></div><div class=form_error_font ng-show=orgProductInfoCtrl.unitFlag style=margin-left:80px>此项为必填项</div><div><div class="form_key float_left form_key_margin" style="width: 56px">商品条码</div><input class="form_value float_left form_value_width" placeholder=请输入商品条码 ng-model="orgProductInfoCtrl.misCode"></div><div class=clear></div><div class=clear></div><div class=form_error_font ng-show=!orgProductInfoCtrl.misCodeFlag></div><div class=form_error_font ng-show=orgProductInfoCtrl.misCodeFlag style=margin-left:80px>此项为必填项</div><div><div class="form_key float_left form_key_margin" style="width: 56px">商品售价</div><input class="form_value float_left form_value_width" placeholder=请输入商品售价 ng-model="orgProductInfoCtrl.price"></div><div class=clear></div><div class=form_error_font ng-show=!orgProductInfoCtrl.priceFlag></div><div class=form_error_font ng-show=orgProductInfoCtrl.priceFlag style=margin-left:80px>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgProductInfoCtrl.create()>完成</div><div class="button_normal float_right" ng-click=orgProductInfoCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=orgProductInfoCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=orgProductInfoCtrl.err></div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="orgProductInfoCtrl.errorFlag = false"></div></div></div><div class=bgGary ng-show=orgProductInfoCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgProductInfoCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>此操作将永久删除该商品信息，是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgProductInfoCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=orgProductInfoCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div><!-- 成功提示 --><div class=bgGary ng-show=orgProductInfoCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgProductInfoCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="orgProductInfoCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgProductInfoCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=orgProductInfoCtrl.wordERR title={{orgProductInfoCtrl.wordERR}}>22212</div><div class=promptClose ng-click=orgProductInfoCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgProductInfoCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=orgProductInfoCtrl.wordWARN title={{orgProductInfoCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'),
            a.put("app/organization/setting/setting-rule.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="padding:30px;border-left:1px solid #ddd;margin-left:200px;min-width: 870px"><div style=font-size:16px>预定规则</div><!--             <div class="form_first_view">\n                <div class="form_key float_left form_key_margin" style="margin-right:50px">预定限制</div>\n                <input class="form_value float_left form_value_width" placeholder="会员每日每个项目限预定X小时(请输入数字)" ng-model="orgSettingRuleCtrl.orderLimit" ng-change="orgSettingRuleCtrl.isSave()"/>\n            </div>\n            <div class="clear"></div> --><div class=form_first_view><div class="form_key float_left form_key_margin" style=margin-right:50px>放场时间</div><input class="form_value float_left form_value_width form_clock_icon" placeholder=请输入放场时间 ng-click="orgSettingRuleCtrl.startFlag = true;orgSettingRuleCtrl.startShowFlag = true;" ng-show="!orgSettingRuleCtrl.startShowFlag"><div class="form_value float_left form_value_width form_clock_icon" ng-click="orgSettingRuleCtrl.startFlag = !orgSettingRuleCtrl.startFlag" ng-bind="orgSettingRuleCtrl.startDate | date:\'HH:mm:ss\'" ng-show=orgSettingRuleCtrl.startShowFlag></div><div style=position:absolute;left:535px;top:180px;z-index:999 ng-show=orgSettingRuleCtrl.startFlag><timepick ng-close="orgSettingRuleCtrl.startFlag=false;" ng-date=orgSettingRuleCtrl.startDate></timepick></div></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin" style=margin-right:22px>详细预定规则</div><div class="form_value float_left" style=width:70rem;height:200px><textarea style=width:68rem;border:0;height:180px placeholder=请输入详细的预订规则 ng-change=orgSettingRuleCtrl.isSave() ng-model=orgSettingRuleCtrl.orderRule></textarea></div></div><div class=clear></div><div class="button2_normal float_left" ng-show=!orgSettingRuleCtrl.saveFlag style="background:#ccc;margin:20px 0 0 105px">保存</div><div class="button2_normal float_left pointer" ng-show=orgSettingRuleCtrl.saveFlag style="margin:20px 0 0 105px" ng-click=orgSettingRuleCtrl.save()>保存</div><div class=clear></div><div style="margin:40px 0 20px 0"><div class=float_left style=font-size:16px>退订规则</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="orgSettingRuleCtrl.addFlag = true">新增规则</div></div><div class=clear></div><div style="margin-top:40px;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;font-size:13px;min-width:97rem"><div class=float_left style=width:27rem;padding-left:20px>时间范围</div><div class=float_left style=width:24rem>扣费情况</div><div class=float_left>操作</div></div><div class=clear></div><div ng-repeat="rule in orgSettingRuleCtrl.rules"><div class=pointer style="height:60px;line-height:60px;border-bottom:1px solid #ddd;color:#475669;font-size:13px;min-width:97rem"><div class=float_left style=width:27rem;padding-left:20px ng-bind=rule.state>小七</div><div class=float_left style=width:24rem ng-bind=rule.p>18888888888</div><div class=float_left><div ng-click=orgSettingRuleCtrl.showEdit(rule) class=float_left style=color:#00a1ff>编辑</div><div ng-click="orgSettingRuleCtrl.deleteFlag = true;orgSettingRuleCtrl.rId = rule._id" class=float_left style="margin:0 0 0 40px;color:#99a9bc">删除</div></div></div><div class=clear></div></div></div><div class=bgGary ng-show=orgSettingRuleCtrl.editFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">编辑退订规则</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingRuleCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">开场前后</div><img src=assets/images/bluecircle.png ng-show=orgSettingRuleCtrl.flagOn ng-click=orgSettingRuleCtrl.chooseOn(true) style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=!orgSettingRuleCtrl.flagOn ng-click=orgSettingRuleCtrl.chooseOn(true) style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=orgSettingRuleCtrl.chooseOn(true)>开场前</div><img src=assets/images/bluecircle.png ng-show=!orgSettingRuleCtrl.flagOn ng-click=orgSettingRuleCtrl.chooseOn(false) style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=orgSettingRuleCtrl.flagOn ng-click=orgSettingRuleCtrl.chooseOn(false) style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=orgSettingRuleCtrl.chooseOn(false)>开场后</div></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">退款时间</div><input class="form_value float_left form_value_width" placeholder=请输入退款最晚时间(小时),例：2 ng-blur="orgSettingRuleCtrl.judge(\'hour\')" ng-class="{\'\':!orgSettingRuleCtrl.hourFlag,\'form_value_error\':orgSettingRuleCtrl.hourFlag}" ng-model="orgSettingRuleCtrl.hour"></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingRuleCtrl.hourFlag></div><div class=form_error_font ng-show=orgSettingRuleCtrl.hourFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">扣费折扣</div><input class="form_value float_left form_value_width" placeholder=请输入扣费百分比，例：0.1 ng-blur="orgSettingRuleCtrl.judge(\'price\')" ng-class="{\'\':!orgSettingRuleCtrl.priceFlag,\'form_value_error\':orgSettingRuleCtrl.priceFlag}" ng-model="orgSettingRuleCtrl.price"></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingRuleCtrl.priceFlag></div><div class=form_error_font ng-show=orgSettingRuleCtrl.priceFlag>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingRuleCtrl.edit()>完成</div><div class="button_normal float_right" ng-click=orgSettingRuleCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgSettingRuleCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增退订规则</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingRuleCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">开场前后</div><img src=assets/images/bluecircle.png ng-show=orgSettingRuleCtrl.flagOn ng-click=orgSettingRuleCtrl.chooseOn(true) style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=!orgSettingRuleCtrl.flagOn ng-click=orgSettingRuleCtrl.chooseOn(true) style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=orgSettingRuleCtrl.chooseOn(true)>开场前</div><img src=assets/images/bluecircle.png ng-show=!orgSettingRuleCtrl.flagOn ng-click=orgSettingRuleCtrl.chooseOn(false) style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=orgSettingRuleCtrl.flagOn ng-click=orgSettingRuleCtrl.chooseOn(false) style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=orgSettingRuleCtrl.chooseOn(false)>开场后</div></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">退款时间</div><input class="form_value float_left form_value_width" placeholder=请输入退款最晚时间(小时),例：2 ng-blur="orgSettingRuleCtrl.judge(\'hour\')" ng-class="{\'\':!orgSettingRuleCtrl.hourFlag,\'form_value_error\':orgSettingRuleCtrl.hourFlag}" ng-model="orgSettingRuleCtrl.hour"></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingRuleCtrl.hourFlag></div><div class=form_error_font ng-show=orgSettingRuleCtrl.hourFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">扣费折扣</div><input class="form_value float_left form_value_width" placeholder=请输入扣费百分比，例：0.1 ng-blur="orgSettingRuleCtrl.judge(\'price\')" ng-class="{\'\':!orgSettingRuleCtrl.priceFlag,\'form_value_error\':orgSettingRuleCtrl.priceFlag}" ng-model="orgSettingRuleCtrl.price"></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingRuleCtrl.priceFlag></div><div class=form_error_font ng-show=orgSettingRuleCtrl.priceFlag>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingRuleCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=orgSettingRuleCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgSettingRuleCtrl.succeedFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/rectangle2.png"><div class="float_left form_marginL_15px">修改完成</div></div></div></div><div class=bgGary ng-show=orgSettingRuleCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingRuleCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>是否确认删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingRuleCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=orgSettingRuleCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/organization/setting/setting-service-tag.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="padding:20px 30px 30px 30px;margin-left:200px;min-width: 930px"><div><div class=float_left style=font-size:18px;color:#475669;margin-top:10px>会员卡标签</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="orgServiceTagCtrl.addFlag = true">新增标签</div></div><div class=clear></div><table style="margin-top:20px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:25%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">标签名称</td><td style="width:25%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属场馆</td><td style="width:25%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">时间段</td><td style="width:25%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr ng-repeat="tag in orgServiceTagCtrl.tags" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:25%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=tag.name></td><td style="width:25%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=tag.venueName></td><td style="width:25%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=tag.time></td><td style="width:25%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div ng-click=orgServiceTagCtrl.showEdit(tag) class="float_left pointer">编辑</div><!--  <div ng-click="orgServiceTagCtrl.deleteFlag = true;orgServiceTagCtrl.tId = tag._id" class="float_left pointer" style="margin-left:2rem;color:#99a9bc">删除</div> --></td></tr></table><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgServiceTagCtrl.pagination.numPages > 1" total-items=orgServiceTagCtrl.pagination.totalItems ng-model=orgServiceTagCtrl.pagination.page items-per-page=orgServiceTagCtrl.pagination.itemsPerPage max-size=orgServiceTagCtrl.pagination.maxSize boundary-links="{{orgServiceTagCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgServiceTagCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgServiceTagCtrl.pageChanged()></pagination></div></div><div class=bgGary ng-show=orgServiceTagCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">会员卡时间段</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgServiceTagCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">时间段名</div><input class="form_value float_left form_value_width" placeholder=请输入标签名称 ng-model=orgServiceTagCtrl.name></div><div class=clear></div><div class=form_error_font ng-show=!orgServiceTagCtrl.nameFlag></div><div class=form_error_font ng-show=orgServiceTagCtrl.nameFlag>此项为必填项</div><div ng-show=!orgServiceTagCtrl.editFlag class="field_selectBoxOne form_zindex_100" style=width:445px;margin-top:0><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">场馆名称</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value" style=color:#000><div class=ellipsis ng-bind=orgServiceTagCtrl.venueName ng-click="orgServiceTagCtrl.venueFlag=!orgServiceTagCtrl.venueFlag">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=orgServiceTagCtrl.venueFlag><div class="select_cell pointer ellipsis" ng-repeat="venue in orgServiceTagCtrl.venues" ng-bind=venue.name ng-click=orgServiceTagCtrl.chooseVenue(venue)>默认按钮</div></div></div><div style=clear:both></div></div><div ng-show=!orgServiceTagCtrl.editFlag class=form_error_font></div><div class=position_relative style=z-index:2><div class="form_key float_left form_key_margin">开始时间</div><input class="form_value float_left form_value_width form_clock_icon" placeholder=会员卡开始时间 ng-click="orgServiceTagCtrl.startFlag = true;orgServiceTagCtrl.startShowFlag = true;" ng-show="!orgServiceTagCtrl.startShowFlag"><div class="form_value float_left form_value_width form_clock_icon" ng-click="orgServiceTagCtrl.startFlag = !orgServiceTagCtrl.startFlag" ng-bind="orgServiceTagCtrl.startDate | date:\'HH:mm:ss\'" ng-show=orgServiceTagCtrl.startShowFlag></div><div class=student_datetime style=margin-left:75px ng-show=orgServiceTagCtrl.startFlag><timepick ng-close="orgServiceTagCtrl.startFlag=false;" ng-date=orgServiceTagCtrl.startDate></timepick></div><div class=clear></div></div><div class=form_error_font></div><div class=position_relative style=z-index:1><div class="form_key float_left form_key_margin">结束时间</div><input class="form_value float_left form_value_width form_clock_icon" placeholder=会员卡结束时间 ng-click="orgServiceTagCtrl.endFlag = true;orgServiceTagCtrl.endShowFlag = true;" ng-show="!orgServiceTagCtrl.endShowFlag"><div class="form_value float_left form_value_width form_clock_icon" ng-click="orgServiceTagCtrl.endFlag = !orgServiceTagCtrl.endFlag" ng-bind="orgServiceTagCtrl.endDate | date:\'HH:mm:ss\'" ng-show=orgServiceTagCtrl.endShowFlag></div><div class=student_datetime style=margin-left:75px ng-show=orgServiceTagCtrl.endFlag><timepick ng-close="orgServiceTagCtrl.endFlag=false;" ng-date=orgServiceTagCtrl.endDate></timepick></div><div class=clear></div></div><div class=form_error_font></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgServiceTagCtrl.create()>完成</div><div class="button_normal float_right" ng-click=orgServiceTagCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgTimeCardCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgTimeCardCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>是否要删除这个卡种？</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgTimeCardCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=orgTimeCardCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgTimeCardCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=orgTimeCardCtrl.err>此名称已被占用</div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="orgTimeCardCtrl.errorFlag = false"></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style>'), a.put("app/organization/setting/setting-service.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0px 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="padding:20px 0px 30px 10px;min-width:900px;margin-left:190px"><div><div style=font-size:20px;margin-left:30px>综合服务设置</div><div class=field_titleBox><div class="field_titleNormal field_titleChoose">综合服务</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-setting-type>分类设置</div><div class=clear></div></div></div><div style="margin:20px 0 0 30px"><div class="form_value form_width_250 float_left" style="margin:0 20px 0 0"><input style=border:0;height:32px;width:200px placeholder=输入服务名称 ng-model="orgSettingServiceCtrl.searchName"> <img src=assets/images/search.png style=margin-top:-6px class=pointer ng-click="orgSettingServiceCtrl.loadProducts()"></div><div class="select field_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgSettingServiceCtrl.showVenueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgSettingServiceCtrl.showVenueName ng-click="orgSettingServiceCtrl.showChooseVenueBoxIndex=!orgSettingServiceCtrl.showChooseVenueBoxIndex">场馆1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=orgSettingServiceCtrl.showChooseVenueBoxIndex><div class="select_cell pointer ellipsis" ng-repeat="venue in orgSettingServiceCtrl.venues" ng-bind=venue.name ng-click="orgSettingServiceCtrl.chooseVenueName(venue,\'search\')">默认按钮</div></div></div><div class="select field_select float_left"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgSettingServiceCtrl.searchType==\'选择一级分类\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgSettingServiceCtrl.searchType ng-click="orgSettingServiceCtrl.searchFlag=!orgSettingServiceCtrl.searchFlag">场馆1</div></div><div class=form_select_div style="position:relative;z-index: 100" ng-show=orgSettingServiceCtrl.searchFlag><div class="select_cell pointer ellipsis" ng-repeat="productcategory in orgSettingServiceCtrl.searchArr" ng-bind=productcategory.name ng-click=orgSettingServiceCtrl.chooseSearch(productcategory)>默认按钮</div></div></div><div class="select field_select float_left"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgSettingServiceCtrl.searchSecondType==\'选择二级分类\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgSettingServiceCtrl.searchSecondType ng-click="orgSettingServiceCtrl.searchSecondFlag=!orgSettingServiceCtrl.searchSecondFlag">场馆1</div></div><div class=form_select_div style="position:relative;z-index: 100" ng-show=orgSettingServiceCtrl.searchSecondFlag><div class="select_cell pointer ellipsis" ng-repeat="second in orgSettingServiceCtrl.secondCategories" ng-bind=second.name ng-click=orgSettingServiceCtrl.chooseSecondSearch(second)>默认按钮</div></div></div><div class="button2_normal float_right" style=background:#00A1FF;margin-right:20px ng-click="orgSettingServiceCtrl.addFlag = true">新增综合服务</div></div><div class=clear></div><div style="margin:20px 20px 0 30px"><div style="margin:40px 20px 0 0;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;min-width:96rem"><div class=float_left style=width:14rem;padding-left:20px>服务名称</div><div class=float_left style=width:18rem>场馆名称</div><div class=float_left style=width:16rem>一级分类</div><div class=float_left style=width:16rem>二级分类</div><div class=float_left style=width:14rem>状态</div><div class=float_left style=width:14rem>操作</div></div><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;min-width:96rem;margin-right:20px" ng-repeat="product in orgSettingServiceCtrl.products"><div class="float_left ellipsis" style=width:14rem;padding-left:20px ng-bind=product.name></div><div class="float_left ellipsis" style=width:18rem ng-bind=product._venue.name></div><div class="float_left ellipsis" style=width:16rem ng-bind="product._firstCategory?product._firstCategory.name:\'暂无\'"></div><div class="float_left ellipsis" style=width:16rem ng-bind="product._secondCategory?product._secondCategory.name:\'暂无\'"></div><div class="float_left ellipsis" style=width:14rem ng-bind="product.isUsed?\'启用\':\'未启用\'"></div><div class="float_left pointer" style=width:14rem><div onclick="event.cancelBubble = true" ng-click=orgSettingServiceCtrl.showEdit(product) class=float_left style=color:#00a1ff>编辑</div><div style="margin:0 0 0 40px" onclick="event.cancelBubble = true" ng-click="orgSettingServiceCtrl.deleteFlag = true;orgSettingServiceCtrl.pId = product._id" class=float_left>删除</div></div></div><div class=select_div ng-show=orgSettingServiceCtrl.typeFlag style=width:20rem;top:230px;left:430px><div class="select_choose ellipsis pointer" ng-click=orgSettingServiceCtrl.chooseClass(class)>全部</div></div></div><pagination style="margin:20px 0 0 30px" ng-if="orgSettingServiceCtrl.pagination.numPages > 1" total-items=orgSettingServiceCtrl.pagination.totalItems ng-model=orgSettingServiceCtrl.pagination.page items-per-page=orgSettingServiceCtrl.pagination.itemsPerPage max-size=orgSettingServiceCtrl.pagination.maxSize boundary-links="{{orgSettingServiceCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgSettingServiceCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgSettingServiceCtrl.pageChanged()></pagination></div></div></div><!-- 新增编辑服务 --><div class=bgGary ng-show=orgSettingServiceCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left" ng-show=!orgSettingServiceCtrl.editFlag>新增综合服务</div><div class="form_title float_left" ng-show=orgSettingServiceCtrl.editFlag>编辑综合服务</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingServiceCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">服务名称</div><input class="form_value float_left form_value_width" placeholder=请输入综合服务名称 ng-model=orgSettingServiceCtrl.name></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingServiceCtrl.nameFlag></div><div class=form_error_font ng-show=orgSettingServiceCtrl.nameFlag>此项为必填项</div><div class=field_selectBoxOne style="margin-top: 0px;width: 445px"><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">选择场馆</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgSettingServiceCtrl.product.venueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgSettingServiceCtrl.product.venueName ng-click="orgSettingServiceCtrl.showChooseVenueBox=!orgSettingServiceCtrl.showChooseVenueBox">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=orgSettingServiceCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in orgSettingServiceCtrl.venues" ng-bind=venue.name ng-click=orgSettingServiceCtrl.chooseVenueName(venue)>默认按钮</div></div></div><div style=clear:both></div></div><div class=field_selectBoxOne style=width:445px;margin-top:20px><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">一级分类</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value" style=color:#000 ng-click="orgSettingServiceCtrl.firstFlag=!orgSettingServiceCtrl.firstFlag"><div class=ellipsis ng-bind=orgSettingServiceCtrl.firstType>场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=orgSettingServiceCtrl.firstFlag><div class="select_cell pointer ellipsis" ng-repeat="productcategory in orgSettingServiceCtrl.searchArr" ng-bind=productcategory.name ng-click=orgSettingServiceCtrl.chooseProductCategory(productcategory)>默认按钮</div></div></div><div style=clear:both></div></div><div class=field_selectBoxOne style="margin-top: 20px;width: 445px"><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">二级分类</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value" style=color:#000 ng-click="orgSettingServiceCtrl.secondFlag=!orgSettingServiceCtrl.secondFlag"><div class=ellipsis ng-bind=orgSettingServiceCtrl.second>项目1</div></div><div style="position: relative;z-index: 300" class=form_select_div ng-show=orgSettingServiceCtrl.secondFlag><div class="select_cell pointer ellipsis" ng-repeat="second in orgSettingServiceCtrl.secondArr" ng-bind=second.name ng-click=orgSettingServiceCtrl.chooseSecond(second)>默认按钮</div></div></div><div style=clear:both></div></div><div style=margin-top:20px><div class="form_key float_left form_key_margin">服务备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=orgSettingServiceCtrl.remark></div><div class=clear></div><div style=margin-top:10px><div class="form_key float_left form_key_margin">是否启用</div><div class="singleChoose_box float_left"><div class=singleChoose_option ng-repeat="state in orgSettingServiceCtrl.useStateArr" ng-click=orgSettingServiceCtrl.chooseState(state)><div class="singleChoose_imageBox {{state.image}}"></div><div class=singleChoose_prompt ng-bind=state.name>每周</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingServiceCtrl.create()>完成</div><div class="button_normal float_right" ng-click=orgSettingServiceCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgSettingServiceCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingServiceCtrl.deleteFlag = false"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>删除服务为不可逆操作，是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click="orgSettingServiceCtrl.deleteFlag = false">不删了</div><div class="button_normal float_right" ng-click=orgSettingServiceCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgSettingServiceCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgSettingServiceCtrl.wordOK>22212</div><div class=promptClose ng-click=orgSettingServiceCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgSettingServiceCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgSettingServiceCtrl.wordERR>22212</div><div class=promptClose ng-click="orgSettingServiceCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgSettingServiceCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=orgSettingServiceCtrl.wordWARN>22212</div><div class=promptClose ng-click=orgSettingServiceCtrl.closePrompt()></div></div></div></div>'), a.put("app/organization/setting/setting-special.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><div style="padding:30px;margin-left:190px;min-width: 900px"><div><div class=float_left style=font-size:18px;color:#475669>专用账户设置</div></div><div class=clear></div><div style="margin-top:20px;padding-bottom:30px;border-bottom:1px solid #94A8BA;font-weight:medium;font-size:16px;min-width:98rem;color:#475669"><div class=float_left style=width:16rem;padding-left:20px>场馆</div><div class=float_left style=width:14rem>消费享受折扣</div><div class=float_left style=width:18rem>操作</div></div><div class=clear></div><div ng-repeat="venue in orgSettingSpecialCtrl.venues"><div class=pointer style="height:46px;line-height:44px;border-bottom:1px solid #ddd;color:#475669;font-size:13px;min-width:98rem"><div class=float_left style=width:16rem;padding-left:20px ng-bind=venue.name>小七</div><div class=float_left style=width:14rem ng-bind="venue.openSpe?venue.discount:\'暂无折扣\'">黄金会员</div><div class=float_left style=width:18rem;color:#00a1ff><div ng-click=orgSettingSpecialCtrl.showEdit(venue) class=float_left>编辑</div></div></div><div class=clear></div></div></div><div class=bgGary ng-show=orgSettingSpecialCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_key float_left form_key_margin">专用账户</div><div class="singleChoose_box float_left"><div class=singleChoose_option ng-repeat="state in orgSettingSpecialCtrl.useStateArr" ng-click=orgSettingSpecialCtrl.chooseState(state)><div class="singleChoose_imageBox {{state.image}}"></div><div class=singleChoose_prompt ng-bind=state.name>每周</div></div></div></div><div class=clear></div><div ng-show=orgSettingSpecialCtrl.isUsed><div class="form_key float_left form_key_margin" style=margin-top:5px><div>专用账户</div><div>折扣</div></div><input class="form_value float_left form_value_width" placeholder=请输入专用账户折扣，例：0.5 ng-class="{\'\':!orgSettingSpecialCtrl.discountFlag,\'form_value_error\':orgSettingSpecialCtrl.discountFlag}" ng-model="orgSettingSpecialCtrl.discount"></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingSpecialCtrl.update()>完成</div><div class="button_normal float_right" ng-click=orgSettingSpecialCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=orgSettingSpecialCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=orgSettingSpecialCtrl.err></div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="orgSettingSpecialCtrl.errorFlag = false"></div></div></div><div class=bgGary ng-show=orgSettingSpecialCtrl.succeedFlag><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>修改完成</div><div class=promptClose ng-click="orgSettingSpecialCtrl.succeedFlag = false"></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'),
            a.put("app/organization/setting/setting-supply.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0px 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=org-setting-product-info>商品基础信息</div><div class="field_titleNormal field_titleChoose">供应商和商品种类设置</div></div><div style="padding:20px 30px 30px 30px;min-width: 850px"><div style="min-width: 850px"><div class=float_left style="height: 40px;line-height: 40px;font-weight: bold">供应商设置</div><div class="button2_normal float_right" style="background:#00A1FF;margin-right: 20px" ng-click="orgSupplyCtrl.addFlag = true">新增供应商</div></div><div class=clear></div><div style="margin-top:40px;padding-bottom:20px;border-bottom:1px solid #94A8BA;color:#1F2D3D;font-size:14px;font-weight:medium;width:114rem"><div class="float_left width_22" style=padding-left:20px>供应商名称</div><div class="float_left width_22">联系人</div><div class="float_left width_22">联系电话</div><div class="float_left width_22">是否启用</div><div class="float_left width_22">操作</div></div><div class=clear></div><div ng-repeat="supply in orgSupplyCtrl.supplies" style=font-size:14px;width:114rem><div style="border-bottom:1px solid #ddd;display:flex;align-items:center;padding:10px 0;color:#475669"><div class="float_left width_22" style=padding-left:20px;line-height:20px><span ng-bind=supply.supplyName></span></div><div class="float_left width_22"><span ng-bind=supply.workerName></span></div><div class="float_left width_22" ng-bind=supply.tel></div><div class="float_left width_22" ng-bind="supply.isUsed?\'启用\':\'不启用\'"></div><div class="float_left width_22"><img src=assets/images/edit.png ng-click=orgSupplyCtrl.showEdit(supply) class="float_left pointer" style="width:13px"> <img src=assets/images/destroy.png ng-click="orgSupplyCtrl.deleteFlag = true;orgSupplyCtrl._supplyId = supply._id" class="float_left pointer" style="width:12px;margin:0px 0 0 40px"></div></div><div class=clear></div></div><pagination style="left:280px;margin:20px 30px 3px 0px" ng-if="orgSupplyCtrl.pagination.numPages > 1" total-items=orgSupplyCtrl.pagination.totalItems ng-model=orgSupplyCtrl.pagination.page items-per-page=orgSupplyCtrl.pagination.itemsPerPage max-size=orgSupplyCtrl.pagination.maxSize boundary-links="{{orgSupplyCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgSupplyCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgSupplyCtrl.pageChanged()></pagination></div><div style="padding:20px 30px 30px 30px;min-width: 650px"><div><div class=float_left style="height: 40px;line-height: 40px;font-weight: bold">类别设置</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="orgSupplyCtrl.addTypeFlag = true">新增类别</div></div><div class=clear></div><div style="margin-top:20px;color:#1F2D3D;font-size:14px;font-weight:medium;min-width: 100rem"><div style="width: 200px;height: 50px;line-height: 50px;border:1px solid #94A8BA;border-radius: 5px;margin-right: 20px;margin-bottom: 20px;padding: 0 20px;float: left" ng-repeat="type in orgSupplyCtrl.shopProductCategories"><span class="float_left ellipsis" style="max-width: 120px" ng-bind=type.name>xx</span> <span class="float_right pointer" style=color:#20a0ff ng-click=orgSupplyCtrl.showTypeEdit(type)>编辑</span></div></div></div></div></div><div class=bgGary ng-show=orgSupplyCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增供应商</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSupplyCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin"><span>供应商</span><span style=color:#fff>的</span></div><input class="form_value float_left form_value_width" placeholder=请输入供应商 ng-blur="orgSupplyCtrl.judge(\'supplyName\')" ng-class="{\'\':!orgSupplyCtrl.supplyNameFlag,\'form_value_error\':orgSupplyCtrl.supplyNameFlag}" ng-model="orgSupplyCtrl.supplyName"></div><div class=clear></div><div class=form_error_font ng-show=!orgSupplyCtrl.supplyNameFlag></div><div class=form_error_font ng-show=orgSupplyCtrl.supplyNameFlag style=margin-left:80px>此项为必填项</div><div><div class="form_key float_left form_key_margin"><span>联系人</span><span style=color:#fff>的</span></div><input class="form_value float_left form_value_width" placeholder=请输入联系人 ng-blur="orgSupplyCtrl.judge(\'workerName\')" ng-class="{\'\':!orgSupplyCtrl.workerNameFlag,\'form_value_error\':orgSupplyCtrl.workerNameFlag}" ng-model="orgSupplyCtrl.workerName"></div><div class=clear></div><div class=form_error_font ng-show=!orgSupplyCtrl.workerNameFlag></div><div class=form_error_font ng-show=orgSupplyCtrl.workerNameFlag style=margin-left:80px>此项为必填项</div><div><div class="form_key float_left form_key_margin">联系电话</div><input class="form_value float_left form_value_width" placeholder=请输入联系电话 ng-blur="orgSupplyCtrl.judge(\'tel\')" ng-class="{\'\':!orgSupplyCtrl.telFlag,\'form_value_error\':orgSupplyCtrl.telFlag}" ng-model="orgSupplyCtrl.tel"></div><div class=clear></div><div class=form_error_font ng-show=!orgSupplyCtrl.telFlag></div><div class=form_error_font ng-show=orgSupplyCtrl.telFlag style=margin-left:80px>此项为必填项</div><div><div class="form_key float_left form_key_margin">是否上架</div><div class="singleChoose_box float_left"><div class=singleChoose_option ng-repeat="state in orgSupplyCtrl.stateArr" ng-click=orgSupplyCtrl.chooseState(state)><div class="singleChoose_imageBox {{state.image}}"></div><div class=singleChoose_prompt ng-bind=state.name>每周</div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSupplyCtrl.create()>完成</div><div class="button_normal float_right" ng-click=orgSupplyCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgSupplyCtrl.addTypeFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增类别</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSupplyCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">类别名称</div><input class="form_value float_left form_value_width" placeholder=请输入类别名称 ng-blur="orgSupplyCtrl.judge(\'type\')" ng-class="{\'\':!orgSupplyCtrl.typeFlag,\'form_value_error\':orgSupplyCtrl.typeFlag}" ng-model="orgSupplyCtrl.type"></div><div class=clear></div><div class=form_error_font ng-show=!orgSupplyCtrl.typeFlag></div><div class=form_error_font ng-show=orgSupplyCtrl.typeFlag style=margin-left:80px>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSupplyCtrl.createType()>完成</div><div class="button_normal float_right" ng-click=orgSupplyCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=orgSupplyCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=orgSupplyCtrl.err></div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="orgSupplyCtrl.errorFlag = false"></div></div></div><div class=bgGary ng-show=orgSupplyCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSupplyCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>此操作将永久删除该供应商信息，是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSupplyCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=orgSupplyCtrl.deleteSupply()>继续删除</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgSupplyCtrl.deleteTypeFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSupplyCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>此操作将永久删除该类别，是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSupplyCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=orgSupplyCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgSupplyCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgSupplyCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="orgSupplyCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgSupplyCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=orgSupplyCtrl.wordERR title={{orgSupplyCtrl.wordERR}}>22212</div><div class=promptClose ng-click=orgSupplyCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgSupplyCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=orgSupplyCtrl.wordWARN title={{orgSupplyCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n    #mid{display:table-cell;left:0;vertical-align:middle;} \n    #box{border:2px solid #ddd;} \n    .student_search{\n        position:absolute;right: 0;top: 10px;\n    }</style>'), a.put("app/organization/setting/setting-tag.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="width:100%;border-bottom:1px solid #ddd;height:37px;margin:30px 0 0 200px;line-height:34px;padding-left:30px"><div class=pointer><div class=float_left ui-sref=org-setting-ticket style="font-size:14px;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;background:#EFF2F6;color:#8492a6;border-bottom:0">门票设置</div><div class=float_left style="font-size:14px;color:#00a1ff;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;border-bottom:0">门票标签</div><div class=float_left ui-sref=org-setting-ticket-cash style="font-size:14px;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;background:#EFF2F6;color:#8492a6;border-bottom:0">超时和押金</div></div><div class=clear></div></div><div style="padding:20px 30px 30px 30px;margin-left:200px;min-width: 930px"><div><div class=float_left style=font-size:18px;color:#475669;margin-top:10px>门票标签</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="orgSettingTagCtrl.addFlag = true">新增标签</div></div><div class=clear></div><table style="margin-top:20px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:34%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">标签名称</td><td style="width:33%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属场馆</td><td style="width:33%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr ng-repeat="tag in orgSettingTagCtrl.tags" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=tag.name></td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=tag.venueName></td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div ng-click=orgSettingTagCtrl.showEdit(tag) class="float_left pointer">编辑</div><!--  <div ng-click="orgSettingTagCtrl.deleteFlag = true;orgSettingTagCtrl.tId = tag._id" class="float_left pointer" style="margin-left:2rem;color:#99a9bc">删除</div> --></td></tr></table><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgSettingTagCtrl.pagination.numPages > 1" total-items=orgSettingTagCtrl.pagination.totalItems ng-model=orgSettingTagCtrl.pagination.page items-per-page=orgSettingTagCtrl.pagination.itemsPerPage max-size=orgSettingTagCtrl.pagination.maxSize boundary-links="{{orgSettingTagCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgSettingTagCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgSettingTagCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=orgSettingTagCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增门票</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingTagCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">门票名称</div><input class="form_value float_left form_value_width" placeholder=请输入门票名称 ng-model=orgSettingTagCtrl.name></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingTagCtrl.nameFlag></div><div class=form_error_font ng-show=orgSettingTagCtrl.nameFlag>此项为必填项</div><div class="field_selectBoxOne form_zindex_100" ng-show=!orgSettingTagCtrl.editFlag style=width:445px;margin-top:0><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">场馆名称</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value" style=color:#000><div class=ellipsis ng-bind=orgSettingTagCtrl.venueName ng-click="orgSettingTagCtrl.venueFlag=!orgSettingTagCtrl.venueFlag">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=orgSettingTagCtrl.venueFlag><div class="select_cell pointer ellipsis" ng-repeat="venue in orgSettingTagCtrl.venues" ng-bind=venue.name ng-click=orgSettingTagCtrl.chooseVenue(venue)>默认按钮</div></div></div><div style=clear:both></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingTagCtrl.create()>完成</div><div class="button_normal float_right" ng-click=orgSettingTagCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgSettingTagCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingTagCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>删除场馆后，场馆里的所有信息将被删除。对于预定该场馆的个人用户会退还预定金额。是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingTagCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=orgSettingTagCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgSettingTagCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgSettingTagCtrl.wordERR>22212</div><div class=promptClose ng-click="orgSettingTagCtrl.promptERR = false"></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/organization/setting/setting-ticket-cash.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="width:100%;border-bottom:1px solid #ddd;height:37px;margin:30px 0 0 200px;line-height:34px;padding-left:30px"><div class=pointer><div class=float_left ui-sref=org-setting-ticket style="font-size:14px;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;background:#EFF2F6;color:#8492a6;border-bottom:0">门票设置</div><div class=float_left ui-sref=org-setting-tag style="font-size:14px;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;background:#EFF2F6;color:#8492a6;border-bottom:0">门票标签</div><div class=float_left style="font-size:14px;color:#00a1ff;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;border-bottom:0">超时和押金</div></div><div class=clear></div></div><div style="padding:20px 30px 30px 30px;margin-left:200px;min-width: 930px"><div><div class=float_left style=font-size:16px;margin-top:10px>门票押金</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="orgSettingTicketCashCtrl.add(\'deposit\')">新增押金</div></div><div class=clear></div><table style="margin-top:20px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">押金面额</td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属项目</td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属场馆</td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr ng-repeat="deposit in orgSettingTicketCashCtrl.deposits" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=deposit.price></td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=deposit.itemName></td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=deposit.venueName></td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div ng-click=orgSettingTicketCashCtrl.showEdit(deposit) class="float_left pointer">编辑</div><div ng-click="orgSettingTicketCashCtrl.deleteFlag = true;orgSettingTicketCashCtrl.fId = deposit._id" class="float_left pointer" style=margin-left:2rem;color:#99a9bc>删除</div></td></tr></table><div style=margin-top:20px><div class=float_left style=font-size:16px;margin-top:10px>超时固定补费金额设置</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="orgSettingTicketCashCtrl.add(\'overtime\')">新增面额</div></div><div class=clear></div><table style="margin-top:20px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">固定金额</td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属项目</td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属场馆</td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr ng-repeat="overtime in orgSettingTicketCashCtrl.overtimes" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=overtime.price></td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=overtime.itemName></td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=overtime.venueName></td><td style="width:14.2%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div ng-click=orgSettingTicketCashCtrl.showEdit(overtime) class="float_left pointer">编辑</div><div ng-click="orgSettingTicketCashCtrl.deleteFlag = true;orgSettingTicketCashCtrl.fId = overtime._id" class="float_left pointer" style=margin-left:2rem;color:#99a9bc>删除</div></td></tr></table></div><div class=bgGary ng-show=orgSettingTicketCashCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增门票</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingTicketCashCtrl.close()"></div><div class=clear></div><div class="field_selectBoxOne form_zindex_100" style=width:445px;margin-top:20px><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">场馆名称</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value" style=color:#000><div class=ellipsis ng-bind=orgSettingTicketCashCtrl.venueName ng-click="orgSettingTicketCashCtrl.venueFlag=!orgSettingTicketCashCtrl.venueFlag">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=orgSettingTicketCashCtrl.venueFlag><div class="select_cell pointer ellipsis" ng-repeat="venue in orgSettingTicketCashCtrl.venues" ng-bind=venue.name ng-click=orgSettingTicketCashCtrl.chooseVenue(venue)>默认按钮</div></div></div><div style=clear:both></div></div><div class="field_selectBoxOne zindex_400" style="margin-top: 20px;width: 445px"><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">项目名称</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value" style=color:#000><div class=ellipsis ng-bind=orgSettingTicketCashCtrl.itemName ng-click="orgSettingTicketCashCtrl.itemFlag=!orgSettingTicketCashCtrl.itemFlag">项目1</div></div><div style="position: relative;z-index: 300" class=form_select_div ng-show=orgSettingTicketCashCtrl.itemFlag><div class="select_cell pointer ellipsis" ng-repeat="item in orgSettingTicketCashCtrl.items" ng-bind=item.name ng-click=orgSettingTicketCashCtrl.chooseItem(item)>默认按钮</div></div></div><div style=clear:both></div></div><div style=margin-top:20px><div class="form_key float_left form_key_margin">价格面额</div><input class="form_value float_left form_value_width" placeholder=请输入价格 ng-model=orgSettingTicketCashCtrl.price></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingTicketCashCtrl.priceFlag></div><div class=form_error_font ng-show=orgSettingTicketCashCtrl.priceFlag>此项为必填项</div><div ng-show="orgSettingTicketCashCtrl.type != \'overtime\'"><div class="form_key float_left form_key_margin">押金方式</div><div class="float_left form_value_width"><div class="signalChooseBox top4_5 right15 pointer" ng-repeat="payment in orgSettingTicketCashCtrl.payments" ng-click=orgSettingTicketCashCtrl.choosePayment(payment)><div class="{{payment.isChoose?\'manyChooseBtn\':\'manyUnChooseBtn\'}}"></div><div class=signalChooseName ng-bind=payment.name>xxxx</div></div></div></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingTicketCashCtrl.priceFlag></div><div class=form_error_font ng-show=orgSettingTicketCashCtrl.priceFlag>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingTicketCashCtrl.create()>完成</div><div class="button_normal float_right" ng-click=orgSettingTicketCashCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgSettingTicketCashCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingTicketCashCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>删除后，可能会影响其他东西。是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingTicketCashCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=orgSettingTicketCashCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgSettingTicketCashCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgSettingTicketCashCtrl.wordERR>22212</div><div class=promptClose ng-click="orgSettingTicketCashCtrl.promptERR = false"></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/organization/setting/setting-ticket.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="width:100%;border-bottom:1px solid #ddd;height:37px;margin:30px 0 0 200px;line-height:34px;padding-left:30px"><div class=pointer><div class=float_left style="font-size:14px;color:#00a1ff;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;border-bottom:0">门票设置</div><div class=float_left ui-sref=org-setting-tag style="font-size:14px;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;background:#EFF2F6;color:#8492a6;border-bottom:0">门票标签</div><div class=float_left ui-sref=org-setting-ticket-cash style="font-size:14px;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;background:#EFF2F6;color:#8492a6;border-bottom:0">超时和押金</div></div><div class=clear></div></div><div style="padding:20px 30px 30px 30px;margin-left:200px;min-width: 930px"><div><div class=float_left style=font-size:18px;color:#475669;margin-top:10px>门票登记</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="orgSettingTicketCtrl.addFlag = true">新增门票</div></div><div class=clear></div><table style="margin-top:20px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">门票名称</td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属项目</td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属场馆</td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">时间段</td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">价格</td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">单次限时</td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">门票标签</td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr ng-repeat="ticket in orgSettingTicketCtrl.tickets" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=ticket.name></td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=ticket._item.name></td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=ticket._venue.name></td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=ticket.showDate></td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=ticket.price></td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="ticket.limit?(ticket.limit+\'分钟\'):\'暂无\'"></td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div class=float_left style=margin-right:5px ng-repeat="tag in ticket.tags" ng-bind=tag.name></div></td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div ng-click=orgSettingTicketCtrl.showEdit(ticket) class="float_left pointer">编辑</div><div ng-click="orgSettingTicketCtrl.deleteFlag = true;orgSettingTicketCtrl.tId = ticket._id" class="float_left pointer" style=margin-left:2rem;color:#99a9bc>删除</div></td></tr></table><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgSettingTicketCtrl.pagination.numPages > 1" total-items=orgSettingTicketCtrl.pagination.totalItems ng-model=orgSettingTicketCtrl.pagination.page items-per-page=orgSettingTicketCtrl.pagination.itemsPerPage max-size=orgSettingTicketCtrl.pagination.maxSize boundary-links="{{orgSettingTicketCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgSettingTicketCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgSettingTicketCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=orgSettingTicketCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增门票</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingTicketCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">门票名称</div><input class="form_value float_left form_value_width" placeholder=请输入门票名称 ng-model=orgSettingTicketCtrl.name></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingTicketCtrl.nameFlag></div><div class=form_error_font ng-show=orgSettingTicketCtrl.nameFlag>此项为必填项</div><div class="field_selectBoxOne form_zindex_100" style=width:445px;margin-top:0><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">场馆名称</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value" style=color:#000><div class=ellipsis ng-bind=orgSettingTicketCtrl.venueName ng-click="orgSettingTicketCtrl.venueFlag=!orgSettingTicketCtrl.venueFlag">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=orgSettingTicketCtrl.venueFlag><div class="select_cell pointer ellipsis" ng-repeat="venue in orgSettingTicketCtrl.venues" ng-bind=venue.name ng-click=orgSettingTicketCtrl.chooseVenue(venue)>默认按钮</div></div></div><div style=clear:both></div></div><div class="field_selectBoxOne zindex_400" style="margin-top: 20px;width: 445px"><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">项目名称</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value" style=color:#000><div class=ellipsis ng-bind=orgSettingTicketCtrl.itemName ng-click="orgSettingTicketCtrl.itemFlag=!orgSettingTicketCtrl.itemFlag">项目1</div></div><div style="position: relative;z-index: 300" class=form_select_div ng-show=orgSettingTicketCtrl.itemFlag><div class="select_cell pointer ellipsis" ng-repeat="item in orgSettingTicketCtrl.items" ng-bind=item.name ng-click=orgSettingTicketCtrl.chooseItem(item)>默认按钮</div></div></div><div style=clear:both></div></div><div style=margin-top:20px><div class="form_key float_left form_key_margin">门票价格</div><input class="form_value float_left form_value_width" placeholder=请输入价格 ng-model=orgSettingTicketCtrl.price></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingTicketCtrl.priceFlag></div><div class=form_error_font ng-show=orgSettingTicketCtrl.priceFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">单次限时</div><input class="form_value float_left form_value_width" placeholder=请输入单次限时（可不填） ng-model=orgSettingTicketCtrl.limit></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">门票标签</div><div class=float_left style=width:350px><div class="float_left pointer" style="margin:10px 23px 0 0" ng-click=orgSettingTicketCtrl.chooseTag(tag) ng-repeat="tag in orgSettingTicketCtrl.tags"><img ng-show=!tag.select class=float_left src="assets/images/select_box.png"> <img ng-show=tag.select style=width:16px class=float_left src="assets/images/select_true.png"><div class=float_left style=margin-left:3px ng-bind=tag.name></div></div></div></div><div class=clear></div><div class=form_error_font></div><div class=position_relative style=z-index:2><div class="form_key float_left form_key_margin">开始时间</div><input class="form_value float_left form_value_width form_clock_icon" placeholder=门票开始时间 ng-click="orgSettingTicketCtrl.startFlag = true;orgSettingTicketCtrl.startShowFlag = true;" ng-show="!orgSettingTicketCtrl.startShowFlag"><div class="form_value float_left form_value_width form_clock_icon" ng-click="orgSettingTicketCtrl.startFlag = !orgSettingTicketCtrl.startFlag" ng-bind="orgSettingTicketCtrl.startDate | date:\'HH:mm:ss\'" ng-show=orgSettingTicketCtrl.startShowFlag></div><div class=student_datetime style=margin-left:75px ng-show=orgSettingTicketCtrl.startFlag><timepick ng-close="orgSettingTicketCtrl.startFlag=false;" ng-date=orgSettingTicketCtrl.startDate></timepick></div><div class=clear></div></div><div class=form_error_font ng-show=!orgSettingTicketCtrl.sFlag></div><div class=form_error_font ng-show=orgSettingTicketCtrl.sFlag>此项为必填项</div><div class=position_relative style=z-index:1><div class="form_key float_left form_key_margin">结束时间</div><input class="form_value float_left form_value_width form_clock_icon" placeholder=门票结束时间 ng-click="orgSettingTicketCtrl.endFlag = true;orgSettingTicketCtrl.endShowFlag = true;" ng-show="!orgSettingTicketCtrl.endShowFlag"><div class="form_value float_left form_value_width form_clock_icon" ng-click="orgSettingTicketCtrl.endFlag = !orgSettingTicketCtrl.endFlag" ng-bind="orgSettingTicketCtrl.endDate | date:\'HH:mm:ss\'" ng-show=orgSettingTicketCtrl.endShowFlag></div><div class=student_datetime style=margin-left:75px ng-show=orgSettingTicketCtrl.endFlag><timepick ng-close="orgSettingTicketCtrl.endFlag=false;" ng-date=orgSettingTicketCtrl.endDate></timepick></div><div class=clear></div></div><div class=form_error_font ng-show=!orgSettingTicketCtrl.eFlag></div><div class=form_error_font ng-show=orgSettingTicketCtrl.eFlag>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingTicketCtrl.create()>完成</div><div class="button_normal float_right" ng-click=orgSettingTicketCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgSettingTicketCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingTicketCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>删除场馆后，场馆里的所有信息将被删除。对于预定该场馆的个人用户会退还预定金额。是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingTicketCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=orgSettingTicketCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgSettingTicketCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgSettingTicketCtrl.wordERR>22212</div><div class=promptClose ng-click="orgSettingTicketCtrl.promptERR = false"></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'),
            a.put("app/organization/setting/setting-time-card.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="padding:20px 30px 30px 30px;margin-left:200px;min-width: 930px"><div><div class=float_left style=font-size:16px;margin-top:10px>次数卡设置</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="orgTimeCardCtrl.addFlag = true">新增</div><div class="float_right pointer" ng-class="{\'select\':!orgTimeCardCtrl.selectItemFlag,\'select_foucs\':orgTimeCardCtrl.selectItemFlag}" ng-click="orgTimeCardCtrl.selectItemFlag = !orgTimeCardCtrl.selectItemFlag" style="margin:0 20px 0 20px"><div class="form_down_icon form_width_180 form_select_value_choose" ng-bind=orgTimeCardCtrl.iName></div><div class="form_select_div form_width_180" ng-show=orgTimeCardCtrl.selectItemFlag><div ng-click=orgTimeCardCtrl.chooseIrr(item) ng-repeat="item in orgTimeCardCtrl.irr" ng-bind=item.name class="select_cell pointer" onclick="event.cancelBubble = true"></div></div></div><div class="float_right pointer" ng-class="{\'select\':!orgTimeCardCtrl.selectVenueFlag,\'select_foucs\':orgTimeCardCtrl.selectVenueFlag}" ng-click="orgTimeCardCtrl.selectVenueFlag = !orgTimeCardCtrl.selectVenueFlag"><div class="form_down_icon form_width_180 form_select_value_choose" ng-bind=orgTimeCardCtrl.vName></div><div class="form_select_div form_width_180" ng-show=orgTimeCardCtrl.selectVenueFlag><div ng-click=orgTimeCardCtrl.chooseVrr(venue) ng-repeat="venue in orgTimeCardCtrl.vrr" ng-bind=venue.name class="select_cell pointer" onclick="event.cancelBubble = true"></div></div></div></div><div class=clear></div><table style="margin-top:20px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">名称</td><td style="width:7%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属项目</td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">所属场馆</td><td style="width:6%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">有效期</td><td style="width:7.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">次数</td><td style="width:7.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">价格</td><td style="width:7%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">工本费</td><td style="width:7%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">保证金</td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">单次限时</td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">当天限次</td><td style="width:6%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">当前状态</td><td style="width:12%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr ng-repeat="service in orgTimeCardCtrl.services" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.name></td><td style="width:7%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service._item.name></td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service._venue.name></td><td style="width:6%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.timeValue></td><td style="width:7.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.value></td><td style="width:7.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.price></td><td style="width:7%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.cardCost></td><td style="width:7%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=service.bail></td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="service.limit?(service.limit+\'分钟\'):\'不限\'"></td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="service.daylimit==1?(\'一次\'):\'不限次数\'"></td><td style="width:6%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="service.isActive?\'上架中\':\'下架中\'"></td><td class=pointer style="width:12%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><img class=float_left ng-click="orgTimeCardCtrl.deleteFlag = true;orgTimeCardCtrl._id = service._id" style="width:11px;margin:10px 20px 0 0" src="assets/images/rdelete.png"> <img class=float_left ng-click=orgTimeCardCtrl.edit(service) style="width:13px;margin:10px 20px 0 0" src="assets/images/editb.png"><div class=float_left ng-bind="service.isActive?\'去下架\':\'去上架\'" ng-click="orgTimeCardCtrl.edit(service,\'isactive\')"></div></td></tr></table><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgTimeCardCtrl.pagination.numPages > 1" total-items=orgTimeCardCtrl.pagination.totalItems ng-model=orgTimeCardCtrl.pagination.page items-per-page=orgTimeCardCtrl.pagination.itemsPerPage max-size=orgTimeCardCtrl.pagination.maxSize boundary-links="{{orgTimeCardCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgTimeCardCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgTimeCardCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=orgTimeCardCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">次数卡</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgTimeCardCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">场馆名称</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!orgTimeCardCtrl.venueFlag,\'select_foucs\':orgTimeCardCtrl.venueFlag}" ng-click="orgTimeCardCtrl.venueFlag = !orgTimeCardCtrl.venueFlag"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=orgTimeCardCtrl.venueName></div><div class=form_select_div style=width:345px ng-show=orgTimeCardCtrl.venueFlag><div ng-click=orgTimeCardCtrl.chooseVenue(venue) class="select_cell pointer" ng-repeat="venue in orgTimeCardCtrl.venues" ng-bind=venue.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">项目名称</div><div class="float_left pointer zindex-500" ng-class="{\'select\':!orgTimeCardCtrl.itemFlag,\'select_foucs\':orgTimeCardCtrl.itemFlag}" ng-click="orgTimeCardCtrl.itemFlag = !orgTimeCardCtrl.itemFlag"><div class="form_down_icon form_select_value_choose" style=width:345px ng-bind=orgTimeCardCtrl.itemName></div><div class=form_select_div style=width:345px ng-show=orgTimeCardCtrl.itemFlag><div ng-click=orgTimeCardCtrl.chooseItem(item) class="select_cell pointer" ng-repeat="item in orgTimeCardCtrl.items" ng-bind=item.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">卡类名称</div><input class="form_value float_left form_value_width" placeholder=请输入卡类名称 ng-model="orgTimeCardCtrl.name"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">卡有效期</div><input class="form_value float_left form_value_width" placeholder=请输入次数卡有效期(天) ng-model="orgTimeCardCtrl.timeValue"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">产品次数</div><input class="form_value float_left form_value_width" placeholder=请输入产品次数 ng-model="orgTimeCardCtrl.value"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">产品售价</div><input class="form_value float_left form_value_width" placeholder=请输入产品售价 ng-model="orgTimeCardCtrl.price"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">服务标签</div><div class=float_left style=width:350px><div class="float_left pointer" style="margin:10px 23px 0 0" ng-click=orgTimeCardCtrl.chooseTag(tag) ng-repeat="tag in orgTimeCardCtrl.tags"><img ng-show=!tag.select class=float_left src="assets/images/select_box.png"> <img ng-show=tag.select style=width:16px class=float_left src="assets/images/select_true.png"><div class=float_left style=margin-left:3px ng-bind=tag.name></div></div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin"><div>每天使用</div><div>次数</div></div><div ng-show=orgTimeCardCtrl.oneFlag class=singleChoose_option style="float: none"><div class="singleChoose_imageBox singleChoose_imageYes"></div><div class=singleChoose_prompt>仅一次</div></div><div ng-show=!orgTimeCardCtrl.oneFlag class=singleChoose_option style="float: none" ng-click="orgTimeCardCtrl.oneFlag = !orgTimeCardCtrl.oneFlag"><div class="singleChoose_imageBox singleChoose_imageNo"></div><div class=singleChoose_prompt>仅一次</div></div><div ng-show=!orgTimeCardCtrl.oneFlag class=singleChoose_option style="float: none"><div class="singleChoose_imageBox singleChoose_imageYes"></div><div class=singleChoose_prompt>不限次数</div></div><div ng-show=orgTimeCardCtrl.oneFlag class=singleChoose_option style="float: none" ng-click="orgTimeCardCtrl.oneFlag = !orgTimeCardCtrl.oneFlag"><div class="singleChoose_imageBox singleChoose_imageNo"></div><div class=singleChoose_prompt>不限次数</div></div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin"><div>每次使用</div><div>时长</div></div><input class="form_value float_left form_value_width" placeholder=每次使用限制时间，单位：分钟 ng-model="orgTimeCardCtrl.limit"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">卡工本费</div><input class="form_value float_left form_value_width" placeholder=请输入产品实体卡工本费 ng-model="orgTimeCardCtrl.cardcost"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">卡保证金</div><input class="form_value float_left form_value_width" placeholder=请输入产品实体卡保证金 ng-model="orgTimeCardCtrl.bail"></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">产品描述</div><input class="form_value float_left form_value_width" placeholder=请输入产品描述 ng-model="orgTimeCardCtrl.des"></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgTimeCardCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=orgTimeCardCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgTimeCardCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgTimeCardCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>是否要删除这个卡种？</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgTimeCardCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=orgTimeCardCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgTimeCardCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=orgTimeCardCtrl.err>此名称已被占用</div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="orgTimeCardCtrl.errorFlag = false"></div></div></div><div class=bgGary ng-show=orgTimeCardCtrl.succeedFlag><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>操作成功</div><div class=promptClose ng-click="orgTimeCardCtrl.succeedFlag = false"></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/organization/setting/setting-time-register.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style=margin-left:200px><div style="font-size:16px;padding:30px 0 0 30px">场次登记</div><div style="width:100%;border-bottom:1px solid #ddd;height:37px;margin-top:30px;line-height:34px"><div style="padding-left: 30px" class=pointer ng-repeat="venue in orgTimeRegisterCtrl.venues" ng-click=orgTimeRegisterCtrl.chooseVenue(venue)><div class=float_left ng-show="venue.name == orgTimeRegisterCtrl.venueName" style="font-size:14px;color:#00a1ff;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;border-bottom:0" ng-bind=venue.name></div><div class=float_left ng-show="!(venue.name == orgTimeRegisterCtrl.venueName)" style="font-size:14px;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;background:#EFF2F6;color:#8492a6;border-bottom:0" ng-bind=venue.name></div></div></div><div class=clear></div><div style="padding: 0 30px"><div ng-repeat="item in orgTimeRegisterCtrl.venue.items" ng-click=orgTimeRegisterCtrl.getTime(item._id)><div ng-show="item._id == orgTimeRegisterCtrl.iId && item.select && !item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0 15px;height:36px;line-height:34px;background:#00a1ff;color:#fff;border-top-left-radius:6px;border-bottom-left-radius:6px"></div><div ng-show="item._id == orgTimeRegisterCtrl.iId && !item.select && !item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0 15px;height:36px;line-height:34px;background:#00a1ff;color:#fff;border-left:0"></div><div ng-show="item._id == orgTimeRegisterCtrl.iId && !item.select && item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0 15px;height:36px;line-height:34px;background:#00a1ff;color:#fff;border-top-right-radius:6px;border-bottom-right-radius:6px"></div><div ng-show="item._id == orgTimeRegisterCtrl.iId && item.select && item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0 15px;height:36px;line-height:34px;background:#00a1ff;color:#fff;border-left:0;border-radius:6px"></div><div ng-show="!(item._id == orgTimeRegisterCtrl.iId) && item.select && !item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0 15px;height:36px;line-height:34px;border-top-left-radius:6px;border-bottom-left-radius:6px"></div><div ng-show="!(item._id == orgTimeRegisterCtrl.iId) && !item.select && !item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0 15px;height:36px;line-height:34px;border-left:0"></div><div ng-show="!(item._id == orgTimeRegisterCtrl.iId) && item.select && item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0 15px;height:36px;line-height:34px;border-radius:6px"></div><div ng-show="!(item._id == orgTimeRegisterCtrl.iId) && !item.select && item.endSelect" class="float_left pointer" ng-bind=item.name style="border:1px solid #ddd;margin-top:20px;font-size:14px;padding:0 15px;height:36px;line-height:34px;border-left:0;border-top-right-radius:6px;border-bottom-right-radius:6px"></div></div><div class="button2_normal float_right" style="background:#00A1FF;margin:20px 0 0 0" ng-click="orgTimeRegisterCtrl.addFlag = true">新增场次</div><!--       <div ng-show="orgTimeRegisterCtrl.editAllFlag" class="button2_normal float_right" style="background:#fff;color:#000;margin:20px 15px 0 0;border:1px solid #C0CCDA">编辑</div> --><div class=clear></div><div style="margin-top:30px;padding-bottom:20px;border-bottom:1px solid #94A8BA;color:#1F2D3D;font-size:13px;font-weight:medium;min-width:97rem;height:20px"><div class=float_left style=width:30rem;padding-left:20px><!--           <img ng-show="!orgTimeRegisterCtrl.selectFlag" ng-click="orgTimeRegisterCtrl.select(true)" class="pointer" src="assets/images/select_box.png" />\n                        <img ng-show="orgTimeRegisterCtrl.selectFlag" ng-click="orgTimeRegisterCtrl.select(false)"" class="pointer" src="assets/images/select_box_on.png" /> --><span style=margin-left:10px>场次名称</span></div><div class=float_left style=width:33rem>对外预定</div><div class=float_left style=width:19rem>操作</div></div><div class=clear></div><div style=overflow-y:auto;overflow-x:hidden;{{orgTimeRegisterCtrl.h}}><div ng-repeat="time in orgTimeRegisterCtrl.times" style=font-size:13px;min-width:100rem><div style="border-bottom:1px solid #D3DCE6;display:flex;align-items:center;color:#475669;height:46px;line-height:44px"><div class=float_left style=width:30rem;padding-left:20px><!--  <img ng-show="!time.select" ng-click="orgTimeRegisterCtrl.changeTime(time)" class="pointer" src="assets/images/select_box.png" />\n                                <img ng-show="time.select" ng-click="orgTimeRegisterCtrl.changeTime(time)" class="pointer" src="assets/images/select_box_on.png" /> --><span ng-bind=time.showDate style=margin-left:1rem></span></div><div class=float_left style=width:33rem><div ng-show=time.isUsed style=width:10rem><div class=float_left style=background:#13ce66;border-radius:50%;width:7px;height:7px;margin-top:6px></div><div class=float_left style=margin-left:5px;line-height:20px>可预订</div></div><div ng-show=!time.isUsed style=width:10rem><div class=float_left style=background:#ff4949;border-radius:50%;width:7px;height:7px;margin-top:6px></div><div class=float_left style=margin-left:5px;line-height:20px>不可订</div></div><div class=clear></div><div style="color:#ff4949;font-size:12px;margin:2px 0 0 12px;line-height:10px" ng-bind=time.warn></div></div><div class=float_left style=width:19rem;color:#00a1ff><div ng-click=orgTimeRegisterCtrl.showEdit(time) class="float_left pointer">编辑</div><div ng-click="orgTimeRegisterCtrl.deleteFlag = true;orgTimeRegisterCtrl.tId = time._id" class="float_left pointer" style=margin-left:20px;color:#99a9bc>删除</div></div></div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgTimeRegisterCtrl.editFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">编辑场次</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgTimeRegisterCtrl.close()"></div><div class=clear></div><div class="position_relative form_first_view zindex-500"><div class="form_key float_left form_key_margin">开始时间</div><input class="form_value float_left form_value_width form_clock_icon" placeholder=场次开始时间 ng-click="orgTimeRegisterCtrl.startFlag = true;orgTimeRegisterCtrl.startShowFlag = true;" ng-show="!orgTimeRegisterCtrl.startShowFlag"><div class="form_value float_left form_value_width form_clock_icon" ng-click="orgTimeRegisterCtrl.startFlag = !orgTimeRegisterCtrl.startFlag" ng-bind="orgTimeRegisterCtrl.startDate | date:\'HH:mm:ss\'" ng-show=orgTimeRegisterCtrl.startShowFlag></div><div class=student_datetime style=margin-left:75px ng-show=orgTimeRegisterCtrl.startFlag><timepick ng-close="orgTimeRegisterCtrl.startFlag=false;" ng-date=orgTimeRegisterCtrl.startDate></timepick></div><div class=clear></div></div><div class=form_error_font ng-show=!orgTimeRegisterCtrl.sFlag></div><div class=form_error_font ng-show=orgTimeRegisterCtrl.sFlag>此项为必填项</div><div class="position_relative zindex-400"><div class="form_key float_left form_key_margin">结束时间</div><input class="form_value float_left form_value_width form_clock_icon" placeholder=场次结束时间 ng-click="orgTimeRegisterCtrl.endFlag = true;orgTimeRegisterCtrl.endShowFlag = true;" ng-show="!orgTimeRegisterCtrl.endShowFlag"><div class="form_value float_left form_value_width form_clock_icon" ng-click="orgTimeRegisterCtrl.endFlag = !orgTimeRegisterCtrl.endFlag" ng-bind="orgTimeRegisterCtrl.endDate | date:\'HH:mm:ss\'" ng-show=orgTimeRegisterCtrl.endShowFlag></div><div class=student_datetime style=margin-left:75px ng-show=orgTimeRegisterCtrl.endFlag><timepick ng-close="orgTimeRegisterCtrl.endFlag=false;" ng-date=orgTimeRegisterCtrl.endDate></timepick></div><div class=clear></div></div><div class=form_error_font ng-show=!orgTimeRegisterCtrl.eFlag></div><div class=form_error_font ng-show=orgTimeRegisterCtrl.eFlag>此项为必填项</div><!--                         <div>\n                            <div class="form_key float_left form_key_margin">场次状态</div>\n                            <img src="assets/images/bluecircle.png" ng-show="orgTimeRegisterCtrl.flagOn" ng-click="orgTimeRegisterCtrl.chooseOn(true)" style="height:18px" class="float_left form_oImage_margin"/>\n                            <img src="assets/images/radio_off.png" ng-show="!orgTimeRegisterCtrl.flagOn" ng-click="orgTimeRegisterCtrl.chooseOn(true)" style="height:18px" class="float_left form_oImage_margin"/>\n                            <div class="float_left form_key form_option_margin pointer" ng-click="orgTimeRegisterCtrl.chooseOn(true)">启用</div>\n                            <img src="assets/images/bluecircle.png" ng-show="!orgTimeRegisterCtrl.flagOn" ng-click="orgTimeRegisterCtrl.chooseOn(false)" style="height:18px" class="float_left form_oImage_margin"/>\n                            <img src="assets/images/radio_off.png" ng-show="orgTimeRegisterCtrl.flagOn" ng-click="orgTimeRegisterCtrl.chooseOn(false)" style="height:18px" class="float_left form_oImage_margin"/>\n                            <div class="float_left form_key form_option_margin pointer" ng-click="orgTimeRegisterCtrl.chooseOn(false)">不启用</div>\n                        </div>\n                        <div class="clear"></div> --><div class=position_relative><div class="form_key float_left" style=line-height:18px;margin-right:18px><div>对外预定</div><div>停用时间</div></div><input class="form_value float_left form_clock_icon" style=width:150px placeholder=停用开始时间 ng-click="orgTimeRegisterCtrl.closeFlag = true;orgTimeRegisterCtrl.closeDateFlag = true;orgTimeRegisterCtrl.closeDateFlag2 = false" ng-show="!orgTimeRegisterCtrl.closeFlag"><div class="form_value float_left form_clock_icon" style=width:150px ng-click="orgTimeRegisterCtrl.closeDateFlag = !orgTimeRegisterCtrl.closeDateFlag;orgTimeRegisterCtrl.closeDateFlag2 = false" ng-bind="orgTimeRegisterCtrl.closeDate | date:\'yyyy-MM-dd\'" ng-show=orgTimeRegisterCtrl.closeFlag></div><div class="form_key float_left form_key_margin" style=margin-left:15px>至</div><input class="form_value float_left form_clock_icon" style=width:150px placeholder=无限期 ng-click="orgTimeRegisterCtrl.closeFlag2 = true;orgTimeRegisterCtrl.closeDateFlag2 = true;orgTimeRegisterCtrl.closeDateFlag = false" ng-show="!orgTimeRegisterCtrl.closeFlag2"><div class="form_value float_left form_clock_icon" style=width:150px ng-click="orgTimeRegisterCtrl.closeDateFlag2 = !orgTimeRegisterCtrl.closeDateFlag2;orgTimeRegisterCtrl.closeDateFlag = false" ng-bind="orgTimeRegisterCtrl.closeDate2 | date:\'yyyy-MM-dd\'" ng-show=orgTimeRegisterCtrl.closeFlag2></div><div class="student_datetime student_datetime2"><datetimepick ng-close="orgTimeRegisterCtrl.closeDateFlag = false" ng-id="\'first\'" ng-show=orgTimeRegisterCtrl.closeDateFlag ng-date=orgTimeRegisterCtrl.closeDate></datetimepick></div><div class="student_datetime student_datetime2"><datetimepick ng-close="orgTimeRegisterCtrl.closeDateFlag2 = false" ng-id="\'first\'" ng-show=orgTimeRegisterCtrl.closeDateFlag2 ng-date=orgTimeRegisterCtrl.closeDate2></datetimepick></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgTimeRegisterCtrl.edit()>完成</div><div class="button_normal float_right" ng-click="orgTimeRegisterCtrl.deleteFlag = true">删除场次</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgTimeRegisterCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增场次</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgTimeRegisterCtrl.close()"></div><div class=clear></div><div class="position_relative form_first_view zindex-500"><div class="form_key float_left form_key_margin">开始时间</div><input class="form_value float_left form_value_width form_clock_icon" placeholder=场次开始时间 ng-click="orgTimeRegisterCtrl.startFlag = true;orgTimeRegisterCtrl.startShowFlag = true;" ng-show="!orgTimeRegisterCtrl.startShowFlag"><div class="form_value float_left form_value_width form_clock_icon" ng-click="orgTimeRegisterCtrl.startFlag = !orgTimeRegisterCtrl.startFlag" ng-bind="orgTimeRegisterCtrl.startDate | date:\'HH:mm:ss\'" ng-show=orgTimeRegisterCtrl.startShowFlag></div><div class=student_datetime style=margin-left:75px ng-show=orgTimeRegisterCtrl.startFlag><timepick ng-close="orgTimeRegisterCtrl.startFlag=false;" ng-date=orgTimeRegisterCtrl.startDate></timepick></div><div class=clear></div></div><div class=form_error_font ng-show=!orgTimeRegisterCtrl.sFlag></div><div class=form_error_font ng-show=orgTimeRegisterCtrl.sFlag>此项为必填项</div><div class="position_relative zindex-400"><div class="form_key float_left form_key_margin">结束时间</div><input class="form_value float_left form_value_width form_clock_icon" placeholder=场次结束时间 ng-click="orgTimeRegisterCtrl.endFlag = true;orgTimeRegisterCtrl.endShowFlag = true;" ng-show="!orgTimeRegisterCtrl.endShowFlag"><div class="form_value float_left form_value_width form_clock_icon" ng-click="orgTimeRegisterCtrl.endFlag = !orgTimeRegisterCtrl.endFlag" ng-bind="orgTimeRegisterCtrl.endDate | date:\'HH:mm:ss\'" ng-show=orgTimeRegisterCtrl.endShowFlag></div><div class=student_datetime style=margin-left:75px ng-show=orgTimeRegisterCtrl.endFlag><timepick ng-close="orgTimeRegisterCtrl.endFlag=false;" ng-date=orgTimeRegisterCtrl.endDate></timepick></div><div class=clear></div></div><div class=form_error_font ng-show=!orgTimeRegisterCtrl.eFlag></div><div class=form_error_font ng-show=orgTimeRegisterCtrl.eFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">是否启用</div><img src=assets/images/bluecircle.png style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=orgTimeRegisterCtrl.chooseOn(true)>启用</div><img src=assets/images/whitecircle.png style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=orgTimeRegisterCtrl.chooseOn(false)>不启用</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgTimeRegisterCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=orgTimeRegisterCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgTimeRegisterCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgTimeRegisterCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>此操作将永久删除此场次信息，对于预定该场馆的个人用户会退还预定金额。是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgTimeRegisterCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=orgTimeRegisterCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=orgTimeRegisterCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px">时间段不予许有重叠</div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="orgTimeRegisterCtrl.errorFlag = false"></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/organization/setting/setting-type.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0px 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="padding:20px 0px 30px 10px;min-width:900px;margin-left:190px"><div><div style=font-size:20px;margin-left:30px>分类设置</div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=org-setting-service>综合服务</div><div class="field_titleNormal field_titleChoose">分类设置</div><div class=clear></div></div></div><div style="margin:20px 0 0 30px"><div class="button2_normal float_left" style=background:#00A1FF ng-click="orgSettingTypeCtrl.addFlag = true">新增分类</div></div><div class=clear></div><div style="margin:20px 20px 0 30px"><div style="margin:40px 20px 0 0;padding-bottom:20px;border-bottom:1px solid #94A8BA;font-weight:medium;min-width:10rem"><div class=float_left style=width:21rem;padding-left:20px>一级分类</div><div class=float_left style=width:36rem>二级分类</div><div class=float_left style=width:14rem>操作</div></div><div style="height:60px;line-height:60px;border-bottom:1px solid #ddd;min-width:96rem;margin-right:20px" ng-repeat="productcategory in orgSettingTypeCtrl.productcategories"><div class="float_left ellipsis" style=width:21rem;padding-left:20px ng-bind=productcategory.name>预订时间</div><div class="float_left ellipsis" style=width:36rem ng-bind="productcategory.second?productcategory.second:\'暂无\'">支付金额</div><div class="float_left pointer" style=width:14rem><div ng-click=orgSettingTypeCtrl.showEdit(productcategory) class=float_left style=color:#00a1ff>编辑</div><div style="margin:0 0 0 40px" ng-click="orgSettingTypeCtrl.deleteFlag = true;orgSettingTypeCtrl.pId = productcategory._id" class=float_left>删除</div></div></div></div><pagination style="margin:20px 0 0 30px" ng-if="orgSettingTypeCtrl.pagination.numPages > 1" total-items=orgSettingTypeCtrl.pagination.totalItems ng-model=orgSettingTypeCtrl.pagination.page items-per-page=orgSettingTypeCtrl.pagination.itemsPerPage max-size=orgSettingTypeCtrl.pagination.maxSize boundary-links="{{orgSettingTypeCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgSettingTypeCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgSettingTypeCtrl.pageChanged()></pagination></div></div></div><!-- 新增编辑服务 --><div class=bgGary ng-show=orgSettingTypeCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增分类</div><!-- <div class="form_title float_left">编辑综合服务</div> --><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingTypeCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">一级分类</div><input class="form_value float_left form_value_width" placeholder=请输入一级分类名称 ng-model=orgSettingTypeCtrl.firstName></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingTypeCtrl.firstFlag></div><div class=form_error_font ng-show=orgSettingTypeCtrl.firstFlag>此项为必填项</div><div ng-repeat="secondType in orgSettingTypeCtrl.secondTypes track by $index"><div><div class="form_key float_left form_key_margin">二级分类</div><div class="form_value float_left form_value_width" ng-mouseover="item.imgFlag = true" ng-mouseleave="item.imgFlag = false"><input style=border:0;height:30px ng-model="secondType.name"><span ng-click=orgSettingTypeCtrl.delete(secondType.order) class="float_right pointer" style="margin:0px 20px 0 0">删除</span></div></div><div class=clear></div><div class=form_error_font></div></div><div ng-show=orgSettingTypeCtrl.inputFlag1><div class="form_key float_left form_key_margin">二级分类</div><input id=type ng-focus="orgSettingTypeCtrl.inputFlag2 = true" class="form_value float_left form_value_width" placeholder=请输入二级分类名称 ng-model=orgSettingTypeCtrl.name1></div><div class=clear></div><div style=margin-top:20px ng-show=orgSettingTypeCtrl.inputFlag2><div class="form_key float_left form_key_margin">二级分类</div><input class="form_value float_left form_value_width" ng-focus=orgSettingTypeCtrl.judge() placeholder=请输入二级分类名称 ng-model=orgSettingTypeCtrl.name2></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingTypeCtrl.create()>完成</div><div class="button_normal float_right" ng-click=orgSettingTypeCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgSettingTypeCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingTypeCtrl.deleteFlag = false"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>删除服务为不可逆操作，是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click="orgSettingTypeCtrl.deleteFlag = false">不删了</div><div class="button_normal float_right" ng-click=orgSettingTypeCtrl.deleteProductCategory()>继续删除</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgSettingTypeCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgSettingTypeCtrl.wordOK>22212</div><div class=promptClose ng-click=orgSettingTypeCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgSettingTypeCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgSettingTypeCtrl.wordERR>22212</div><div class=promptClose ng-click="orgSettingTypeCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgSettingTypeCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=orgSettingTypeCtrl.wordWARN>22212</div><div class=promptClose ng-click=orgSettingTypeCtrl.closePrompt()></div></div></div></div>'),
            a.put("app/organization/setting/setting-venue-register.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style="padding:20px 30px 30px 30px;margin-left:200px;min-width: 930px"><div><div class=float_left style=font-size:16px;margin-top:10px>场馆登记</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="orgVenueRegisterCtrl.addFlag = true">新增场馆</div></div><div class=clear></div><table style="margin-top:20px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">场馆名称</td><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">状态</td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">对外预定</td><td style="width:40%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">项目</td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr ng-repeat="venue in orgVenueRegisterCtrl.venues" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=venue.name></td><td ng-show=venue.isUsed style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div class=float_left style=background:#13ce66;border-radius:50%;width:7px;height:7px;margin-top:17px></div><div class=float_left style=margin-left:5px>使用中</div></td><td ng-show=!venue.isUsed style="width:10%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div class=float_left style=background:#ff4949;border-radius:50%;width:7px;height:7px;margin-top:17px></div><div class=float_left style=margin-left:5px>停用中</div></td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div ng-show="venue.isOpen && venue.isUsed" style=width:10rem><div class=float_left style=background:#13ce66;border-radius:50%;width:7px;height:7px;margin-top:7px></div><div class=float_left style=margin-left:5px;line-height:20px>可预订</div></div><div ng-show="!venue.isOpen || !venue.isUsed" style=width:10rem><div class=float_left style=background:#ff4949;border-radius:50%;width:7px;height:7px;margin-top:7px></div><div class=float_left style=margin-left:5px;line-height:20px>不可订</div></div><div class=clear></div><div ng-show=venue.isUsed style="color:#ff4949;font-size:12px;margin:0.2rem 0 0 1.1rem;line-height:10px" ng-bind=venue.warn></div></td><td style="width:40%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div class=float_left style="margin:3px 1rem 3px 0;font-size:13px" ng-bind=item.name ng-repeat="item in venue.items"></div></td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div ng-click=orgVenueRegisterCtrl.showEdit(venue) class="float_left pointer" style=margin-top:7px>编辑</div><div ng-click="orgVenueRegisterCtrl.deleteFlag = true;orgVenueRegisterCtrl.vId = venue._id" class="float_left pointer" style="margin:7px 2rem 0 2rem;color:#99a9bc">删除</div><img src=assets/images/xup.png style=height:15px;margin-top:15px;margin-right:10px ng-click="orgVenueRegisterCtrl.move(\'down\',venue)" title=将场馆下移 ng-show="venue.order != orgVenueRegisterCtrl.venues.length" class="float_left pointer"> <img src=assets/images/xdown.png title=将场馆上移 ng-click="orgVenueRegisterCtrl.move(\'up\',venue)" style=height:15px;margin-top:15px ng-show="venue.order != 1" class="float_left pointer"></td></tr></table></div><div class=bgGary ng-show=orgVenueRegisterCtrl.editFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">编辑场馆</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgVenueRegisterCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">场馆名称</div><input class="form_value float_left form_value_width" placeholder=请输入场馆名称 ng-blur="orgVenueRegisterCtrl.judge(\'name\')" ng-class="{\'\':!orgVenueRegisterCtrl.nameFlag,\'form_value_error\':orgVenueRegisterCtrl.nameFlag}" ng-model="orgVenueRegisterCtrl.name"></div><div class=clear></div><div class=form_error_font ng-show=!orgVenueRegisterCtrl.nameFlag></div><div class=form_error_font ng-show=orgVenueRegisterCtrl.nameFlag ng-bind=orgVenueRegisterCtrl.errName></div><div><div class="form_key float_left form_key_margin">选择项目</div><div class=float_left style=width:350px><div class="float_left pointer" style="margin:10px 23px 0 0" ng-click=orgVenueRegisterCtrl.chooseItem(item) ng-repeat="item in orgVenueRegisterCtrl.items"><img ng-show=!item.select class=float_left src="assets/images/select_box.png"> <img ng-show=item.select style=width:16px class=float_left src="assets/images/select_true.png"><div class=float_left style=margin-left:3px;font-size:15px ng-bind=item.name></div></div></div></div><div class=clear></div><div class=form_error_font ng-show=!orgVenueRegisterCtrl.iFlag></div><div class=form_error_font ng-show=orgVenueRegisterCtrl.iFlag>至少选择一个项目</div><div><div class="form_key float_left form_key_margin">场馆状态</div><img src=assets/images/bluecircle.png ng-show=orgVenueRegisterCtrl.flagOn ng-click=orgVenueRegisterCtrl.chooseOn(true) style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=!orgVenueRegisterCtrl.flagOn ng-click=orgVenueRegisterCtrl.chooseOn(true) style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=orgVenueRegisterCtrl.chooseOn(true)>启用</div><img src=assets/images/bluecircle.png ng-show=!orgVenueRegisterCtrl.flagOn ng-click=orgVenueRegisterCtrl.chooseOn(false) style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=orgVenueRegisterCtrl.flagOn ng-click=orgVenueRegisterCtrl.chooseOn(false) style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=orgVenueRegisterCtrl.chooseOn(false)>不启用</div></div><div class=clear></div><div class="position_relative form_first_view"><div class="form_key float_left" style=line-height:18px;margin-right:18px><div>对外预定</div><div>停用时间</div></div><input class="form_value float_left form_clock_icon" style=width:150px placeholder=停用开始时间 ng-click="orgVenueRegisterCtrl.closeFlag = true;orgVenueRegisterCtrl.closeDateFlag = true;orgVenueRegisterCtrl.closeDateFlag2 = false" ng-show="!orgVenueRegisterCtrl.closeFlag"><div class="form_value float_left form_clock_icon" style=width:150px ng-click="orgVenueRegisterCtrl.closeDateFlag = !orgVenueRegisterCtrl.closeDateFlag;orgVenueRegisterCtrl.closeDateFlag2 = false" ng-bind="orgVenueRegisterCtrl.closeDate | date:\'yyyy-MM-dd\'" ng-show=orgVenueRegisterCtrl.closeFlag></div><div class="form_key float_left form_key_margin" style=margin-left:15px>至</div><input class="form_value float_left form_clock_icon" style=width:150px placeholder=无限期 ng-click="orgVenueRegisterCtrl.closeFlag2 = true;orgVenueRegisterCtrl.closeDateFlag2 = true;orgVenueRegisterCtrl.closeDateFlag = false" ng-show="!orgVenueRegisterCtrl.closeFlag2"><div class="form_value float_left form_clock_icon" style=width:150px ng-click="orgVenueRegisterCtrl.closeDateFlag2 = !orgVenueRegisterCtrl.closeDateFlag2;orgVenueRegisterCtrl.closeDateFlag = false" ng-bind="orgVenueRegisterCtrl.closeDate2 | date:\'yyyy-MM-dd\'" ng-show=orgVenueRegisterCtrl.closeFlag2></div><div class="student_datetime student_datetime2"><datetimepick ng-close="orgVenueRegisterCtrl.closeDateFlag = false" ng-id="\'first\'" ng-show=orgVenueRegisterCtrl.closeDateFlag ng-date=orgVenueRegisterCtrl.closeDate></datetimepick></div><div class="student_datetime student_datetime2"><datetimepick ng-close="orgVenueRegisterCtrl.closeDateFlag2 = false" ng-id="\'first\'" ng-show=orgVenueRegisterCtrl.closeDateFlag2 ng-date=orgVenueRegisterCtrl.closeDate2></datetimepick></div></div><div class=clear></div><div class=form_error_font ng-show=!orgVenueRegisterCtrl.longTimeFlag></div><div class=form_error_font ng-show=orgVenueRegisterCtrl.longTimeFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">提前预定</div><input class="form_value float_left form_value_width" placeholder=请输入提前预订天数 ng-class="{\'\':!orgVenueRegisterCtrl.odFlag,\'form_value_error\':orgVenueRegisterCtrl.odFlag}" ng-model="orgVenueRegisterCtrl.od"></div><div class=clear></div><div class=form_error_font ng-show=!orgVenueRegisterCtrl.odFlag></div><div class=form_error_font ng-show=orgVenueRegisterCtrl.odFlag>此项必填</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgVenueRegisterCtrl.edit()>完成</div><div class="button_normal float_right" ng-click=orgVenueRegisterCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgVenueRegisterCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增场馆</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgVenueRegisterCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">场馆名称</div><input class="form_value float_left form_value_width" placeholder=请输入场馆名称 ng-blur="orgVenueRegisterCtrl.judge(\'name\')" ng-class="{\'\':!orgVenueRegisterCtrl.nameFlag,\'form_value_error\':orgVenueRegisterCtrl.nameFlag}" ng-model="orgVenueRegisterCtrl.name"></div><div class=clear></div><div class=form_error_font ng-show=!orgVenueRegisterCtrl.nameFlag></div><div class=form_error_font ng-show=orgVenueRegisterCtrl.nameFlag ng-bind=orgVenueRegisterCtrl.errName></div><div><div class="form_key float_left form_key_margin">选择项目</div><div class=float_left style=width:350px><div class="float_left pointer" style="margin:10px 23px 0 0" ng-click=orgVenueRegisterCtrl.chooseItem(item) ng-repeat="item in orgVenueRegisterCtrl.items"><img ng-show=!item.select class=float_left src="assets/images/select_box.png"> <img ng-show=item.select style=width:16px class=float_left src="assets/images/select_true.png"><div class=float_left style=margin-left:3px ng-bind=item.name></div></div></div></div><div class=clear></div><div class=form_error_font ng-show=!orgVenueRegisterCtrl.iFlag></div><div class=form_error_font ng-show=orgVenueRegisterCtrl.iFlag>至少选择一个项目</div><div><div class="form_key float_left form_key_margin">是否启用</div><img src=assets/images/bluecircle.png style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=orgVenueRegisterCtrl.chooseOn(true)>启用</div><img src=assets/images/whitecircle.png style=height:18px class="float_left form_oImage_margin"><div class="float_left form_key form_option_margin pointer" ng-click=orgVenueRegisterCtrl.chooseOn(false)>不启用</div></div><div class=clear></div><div style=margin-top:15px></div><div><div class="form_key float_left form_key_margin">提前预定</div><input class="form_value float_left form_value_width" placeholder=请输入提前预订天数 ng-class="{\'\':!orgVenueRegisterCtrl.odFlag,\'form_value_error\':orgVenueRegisterCtrl.odFlag}" ng-model="orgVenueRegisterCtrl.od"></div><div class=clear></div><div class=form_error_font ng-show=!orgVenueRegisterCtrl.odFlag></div><div class=form_error_font ng-show=orgVenueRegisterCtrl.odFlag>此项必填</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgVenueRegisterCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=orgVenueRegisterCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgVenueRegisterCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgVenueRegisterCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>删除场馆后，场馆里的所有信息将被删除。对于预定该场馆的个人用户会退还预定金额。是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgVenueRegisterCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=orgVenueRegisterCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgVenueRegisterCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=orgVenueRegisterCtrl.errrr>此名称已被占用</div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="orgVenueRegisterCtrl.errorFlag = false"></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/organization/setting/setting-vip.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 0 20px 200px"><div style="padding:30px;margin-left:190px;min-width: 900px"><div><div class=float_left style=font-size:18px;color:#475669>会员设置</div><div class="button2_normal float_right" style=background:#00A1FF ng-click="orgSettingVipCtrl.addMemberFlag = true">新增</div></div><div class=clear></div><div style="margin-top:20px;padding-bottom:30px;border-bottom:1px solid #94A8BA;font-weight:medium;font-size:16px;min-width:98rem;color:#475669"><div class=float_left style=width:16rem;padding-left:20px>会员名称</div><div class=float_left style=width:14rem>享受折扣</div><div class=float_left style=width:18rem>操作</div></div><div class=clear></div><div ng-repeat="membertype in orgSettingVipCtrl.membertypes"><div class=pointer style="height:46px;line-height:44px;border-bottom:1px solid #ddd;color:#475669;font-size:13px;min-width:98rem"><div class=float_left style=width:16rem;padding-left:20px ng-bind=membertype.name>小七</div><div class=float_left style=width:14rem ng-bind=membertype.discount>黄金会员</div><div class=float_left style=width:18rem;color:#00a1ff><div ng-click=orgSettingVipCtrl.showEditMember(membertype) class=float_left>编辑</div><div ng-click="orgSettingVipCtrl.sureFlag = true;orgSettingVipCtrl.mId = membertype._id;orgSettingVipCtrl.mtFlag = true" class=float_left style="margin:0 0 0 40px;color:#99a9bc">删除</div></div></div><div class=clear></div></div></div><div class=bgGary ng-show=orgSettingVipCtrl.addMemberFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">会员类型</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingVipCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">会员名称</div><input class="form_value float_left form_value_width" placeholder=请输入卡种名称 ng-blur="orgSettingVipCtrl.judge(\'name\')" ng-class="{\'\':!orgSettingVipCtrl.nameFlag,\'form_value_error\':orgSettingVipCtrl.nameFlag}" ng-model="orgSettingVipCtrl.name"></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingVipCtrl.nameFlag></div><div class=form_error_font ng-show=orgSettingVipCtrl.nameFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">优惠折扣</div><input class="form_value float_left form_value_width" ng-class="{\'\':!orgSettingVipCtrl.discountFlag,\'form_value_error\':orgSettingVipCtrl.discountFlag}" placeholder=输入数字，例：九折输入0.9 ng-blur="orgSettingVipCtrl.judge(\'discount\')" ng-model="orgSettingVipCtrl.discount"></div><div class=clear></div><div class=form_error_font ng-show=!orgSettingVipCtrl.discountFlag></div><div class=form_error_font ng-show=orgSettingVipCtrl.discountFlag ng-bind=orgSettingVipCtrl.discountErr>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingVipCtrl.finishMember()>完成</div><div class="button_normal float_right" ng-click=orgSettingVipCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgSettingVipCtrl.sureFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">确认删除？</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingVipCtrl.close()"></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingVipCtrl.delete()>确定</div><div class="button_normal float_right" ng-click=orgSettingVipCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary style=z-index:999 ng-show=orgSettingVipCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=orgSettingVipCtrl.err></div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="orgSettingVipCtrl.errorFlag = false"></div></div></div><div class=bgGary ng-show=orgSettingVipCtrl.succeedFlag><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>修改完成</div><div class=promptClose ng-click="orgSettingVipCtrl.succeedFlag = false"></div></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/organization/setting/setting-voucher.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div style="padding:0 20px 20px 200px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div style=padding:30px;margin-left:170px><div style="font-size:16px;padding:0 0 0 30px">手环管理</div><div style="width:100%;border-bottom:1px solid #ddd;height:37px;margin-top:30px;line-height:34px"><div style="padding-left: 30px" class=pointer ng-repeat="venue in orgSettingVoucherCtrl.venues" ng-click=orgSettingVoucherCtrl.chooseVenue(venue)><div class=float_left ng-show="venue.name == orgSettingVoucherCtrl.venueName" style="font-size:14px;color:#00a1ff;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;margin-right:20px;border-bottom:0" ng-bind=venue.name></div><div class=float_left ng-show="!(venue.name == orgSettingVoucherCtrl.venueName)" style="font-size:14px;border:1px solid #ddd;border-top-left-radius:4px;border-top-right-radius:4px;padding:0 15px;background:#EFF2F6;color:#8492a6;margin-right:20px;border-bottom:0" ng-bind=venue.name></div></div></div><div class="form_value form_width_250 float_left" style="margin:20px 0 0 30px"><input style=border:0;height:32px;width:200px placeholder=根据手环表面码查询 ng-model="orgSettingVoucherCtrl.searchName"> <img src=assets/images/search.png class="student_search pointer" ng-click="orgSettingVoucherCtrl.search()"></div><div class="button2_normal float_right" style="background:#00A1FF;margin:20px 0 0 30px" ng-click="orgSettingVoucherCtrl.addFlag = true">添加手环</div><div class=clear></div><table style="margin:20px 20px 0 30px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">表面码</td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">内码</td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">关联闸机</td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">关联门票类型</td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr ng-repeat="voucherinfo in orgSettingVoucherCtrl.voucherinfos" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=voucherinfo.No></td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=voucherinfo.voucherNo></td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div class=float_left style="margin:3px 1rem 3px 0;font-size:13px" ng-repeat="ip in voucherinfo.ips" ng-bind=ip></div></td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div class=float_left style="margin:3px 1rem 3px 0;font-size:13px" ng-repeat="tag in voucherinfo.tags" ng-bind=tag.name></div></td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div ng-click=orgSettingVoucherCtrl.showEdit(voucherinfo) class="float_left pointer" style=margin-top:7px>编辑</div></td></tr></table><pagination style="left:280px;margin:20px 30px 3px 30px" ng-if="orgSettingVoucherCtrl.pagination.numPages > 1" total-items=orgSettingVoucherCtrl.pagination.totalItems ng-model=orgSettingVoucherCtrl.pagination.page items-per-page=orgSettingVoucherCtrl.pagination.itemsPerPage max-size=orgSettingVoucherCtrl.pagination.maxSize boundary-links="{{orgSettingVoucherCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgSettingVoucherCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgSettingVoucherCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=orgSettingVoucherCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">手环</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingVoucherCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin" style=width:55px>表面码</div><input class="form_value float_left form_value_width" placeholder=请输入手环表面码 ng-model=orgSettingVoucherCtrl.outCode></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin" style=width:55px>内码</div><input class="form_value float_left form_value_width" placeholder=请输入手环内码 ng-model=orgSettingVoucherCtrl.insideCode></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">关联闸机</div><input class="form_value float_left form_value_width" placeholder=请输入闸机凭证，用分号(;)隔开 ng-model=orgSettingVoucherCtrl.ips></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">门票类型</div><div class=float_left style=width:350px><div class="float_left pointer" style="margin:10px 23px 0 0" ng-click=orgSettingVoucherCtrl.chooseTag(tag) ng-repeat="tag in orgSettingVoucherCtrl.tags"><img ng-show=!tag.select class=float_left src="assets/images/select_box.png"> <img ng-show=tag.select style=width:16px class=float_left src="assets/images/select_true.png"><div class=float_left style=margin-left:3px ng-bind=tag.name></div></div></div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingVoucherCtrl.create()>完成</div><div class="button_normal float_right" ng-click=orgSettingVoucherCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgSettingVoucherCtrl.detailFlag><div class=middle><div id=box class="form_div center" style="width: 110rem;height: 650px;overflow-y: auto;padding: 20px;padding-bottom: 50px;border-radius: 10px;box-shadow: #ccc 0 0 3px 3px"><div><div class="form_title float_left">历史绑定记录</div><img src=assets/images/close.png class="float_right pointer" ng-click=orgSettingVoucherCtrl.close()></div><div class=clear></div><div class=cancelTable><div class="cancelThTr height_40"><div class="cancelTh ellipsis" style=text-indent:20px;width:20%>入场时间</div><div class="cancelTh ellipsis" style=width:16%>用户</div><div class="cancelTh ellipsis" style=width:16%>产品</div><div class="cancelTh ellipsis" style=width:16%>消费时间</div><div class="cancelTh ellipsis" style=width:16%>柜员-售卖</div><div class="cancelTh ellipsis" style=width:16%>柜员-结算</div></div><div class=cancelTr ng-repeat="record in orgSettingVoucherCtrl.recordsDetail" style="{{record.state?\'background: #f2f2f2\':\'\'}}"><div class="cancelTd ellipsis" ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm:ss\'" style=text-indent:20px;width:20%></div><div class="cancelTd ellipsis" style=width:16% ng-bind=record.name></div><div class="cancelTd ellipsis" style=width:16% ng-bind="record.cost | currency:\'\'"></div><div class="cancelTd ellipsis" style=width:16% ng-bind="record.workerName==\'微信\'?\'微信用户\':record.workerName"></div><div class="cancelTd ellipsis" style=width:16% ng-bind=record.payment></div><div class="cancelTd ellipsis" style=width:16%>纠错单</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgSettingVoucherCtrl.pagination.numPages > 1" total-items=orgSettingVoucherCtrl.pagination.totalItems ng-model=orgSettingVoucherCtrl.pagination.page items-per-page=orgSettingVoucherCtrl.pagination.itemsPerPage max-size=orgSettingVoucherCtrl.pagination.maxSize boundary-links="{{orgSettingVoucherCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgSettingVoucherCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgSettingVoucherCtrl.pageChanged()></pagination></div></div></div><div class=bgGary ng-show=orgSettingVoucherCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSettingVoucherCtrl.close()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>删除项目后，场馆里该项目的场地全部会被删除。对于预定该项目的个人用户会退还预定金额。是否继续删除?</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSettingVoucherCtrl.close()>不删了</div><div class="button_normal float_right" ng-click=orgSettingVoucherCtrl.delete()>继续删除</div><div class=clear></div></div></div></div></div><!-- 成功提示弹框 --><div class=bgGary2 ng-show=orgSettingVoucherCtrl.succeedFlag><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/rectangle2.png"><div class="float_left form_marginL_15px">修改完成</div></div></div><div class=bgGary style=z-index:999 ng-show=orgSettingVoucherCtrl.errorFlag><div class=middle><div class="form_toast_div center"><img class="float_left form_height_37" src="assets/images/error.png"><div class="float_left form_marginL_15px" ng-bind=orgSettingVoucherCtrl.err>此名称已被占用</div><img class="float_right form_toast_close pointer" src=assets/images/cancel.png ng-click="orgSettingVoucherCtrl.errorFlag = false"></div></div></div></div><style>#wrapper{height:100%;display:table;margin: 0 auto;} \n        #mid{display:table-cell;left:0;vertical-align:middle;} \n        #box{border:2px solid #ddd;}</style><style>.student_search{\n            position:absolute;right: 0;top: 10px;\n        }</style></div>'), a.put("app/organization/shop/inventory-record.html", '<div><div class=cancelTable style="margin-top: 20px"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style=width:110px>进货号</div><div class="cancelTh ellipsis" style=width:110px>进货日期</div><div class="cancelTh ellipsis" style=width:110px>商品名称</div><div class="cancelTh ellipsis pointer" ng-click="orgInventoryCtrl.typeFlag = !orgInventoryCtrl.typeFlag" style=width:110px><span>商品类别</span> <img style=margin-left:5px src="assets/images/arrow.png"></div><div class="cancelTh ellipsis" style=width:110px>供应商</div><div class="cancelTh ellipsis" style=width:110px>进货数量</div><div class="cancelTh ellipsis" style=width:110px>进货单价</div><div class="cancelTh ellipsis" style=width:110px>进货金额</div><div class="cancelTh ellipsis" style=width:110px>登记人员</div></div><div class=cancelTr ng-repeat="record in orgInventoryCtrl.records" style="{{record.state?\'background: #f2f2f2\':\'\'}}"><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div><div class=cancelTdellipsis style=width:110px ng-bind=record.cost></div></div><div class=select_div ng-show=orgInventoryCtrl.typeFlag style=width:200px;top:170px;left:570px><div class="select_choose ellipsis pointer" ng-click=orgInventoryCtrl.chooseClass(class)>全部</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgInventoryCtrl.pagination.numPages > 1" total-items=orgInventoryCtrl.pagination.totalItems ng-model=orgInventoryCtrl.pagination.page items-per-page=orgInventoryCtrl.pagination.itemsPerPage max-size=orgInventoryCtrl.pagination.maxSize boundary-links="{{orgInventoryCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgInventoryCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgInventoryCtrl.pageChanged()></pagination></div><!-- 纠错操作 --><div class=bgGary ng-show=orgInventoryCtrl.showErrChangeBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">纠错操作</div><img src=assets/images/close.png class="float_right pointer" ng-click=orgInventoryCtrl.close()></div><div class=clear></div><div class=field_cancelTitleBox style="height: 30px"><div style="width: 45px;height: 30px;line-height: 28px;{{orgInventoryCtrl.errState==\'add\'?\'background: #20a0ff;\':\'\'}}" class="field_cancelTitle field_once" ng-click="orgInventoryCtrl.chooseErrState(\'add\')">增加</div><div style="width: 45px;height: 30px;line-height: 28px;{{orgInventoryCtrl.errState==\'add\'?\'\':\'background: #20a0ff;\'}}" class="field_cancelTitle field_long" ng-click="orgInventoryCtrl.chooseErrState(\'reduce\')">减少</div></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入金额</div><input class="form_value float_left form_value_width" placeholder=请输入金额 ng-model=orgInventoryCtrl.errPrice></div><div class=clear></div><div class=form_error_font></div><div><div class="form_key float_left form_key_margin">输入备注</div><input class="form_value float_left form_value_width" placeholder=请输入备注 ng-model=orgInventoryCtrl.errRemark></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit style="margin-top: -20px"><div class="button2_normal float_right form_create_view" ng-click=orgInventoryCtrl.changeErrRemark()>确认</div><div class="button_normal float_right" ng-click=orgInventoryCtrl.close()>取消</div><div class=clear></div></div></div></div></div>'), a.put("app/organization/shop/inventory-stock.html", '<div><div class=field_selectBox><div class="button2_normal float_left" ng-click="orgInventoryCtrl.enterFlag = true">进货入库</div><div class="xt_searchBox float_right" style="margin-right: 20px"><input class=xt_searchInput style="text-indent: 10px" placeholder=请输入商品名称 ng-model=orgInventoryCtrl.searchProductName><div class=xt_searchImage ng-click=orgInventoryCtrl.search()></div></div><div class=clear></div></div></div><div><div class=cancelTable><div class="cancelTr height_40"><div class="cancelTh ellipsis" style=width:160px>商品名称</div><div class="cancelTh ellipsis pointer" ng-click="orgInventoryCtrl.typeFlag = !orgInventoryCtrl.typeFlag" style=width:160px><span>商品类别</span> <img style=margin-left:5px src="assets/images/arrow.png"></div><div class="cancelTh ellipsis" style=width:160px>库存数</div><div class="cancelTh ellipsis" style=width:160px>进货价</div><div class="cancelTh ellipsis" style=width:160px>销售价</div><div class="cancelTh ellipsis" style=width:160px>操作</div></div><div class=cancelTr ng-repeat="product in orgInventoryCtrl.products" ng-show="product.quantity > 0"><div class="cancelTd ellipsis" style=width:160px ng-bind=product.name></div><div class="cancelTd ellipsis" style=width:160px ng-bind=product.categoryName></div><div class="cancelTd ellipsis" style=width:160px ng-bind=product.quantity></div><div class="cancelTd ellipsis" style=width:160px ng-bind=product.price></div><div class="cancelTd ellipsis" style=width:160px ng-bind=product.price></div><div class="cancelTd ellipsis pointer" style=width:160px;color:#00a1ff><span style=margin-right:10px ng-click="orgInventoryCtrl.enterFlag = true">修改</span><span ng-click="orgInventoryCtrl.changePriceFlag = true">调价</span></div></div><div class=select_div ng-show=orgInventoryCtrl.typeFlag style=width:200px;top:230px;left:388px><div class="select_choose ellipsis pointer" ng-click=orgInventoryCtrl.chooseClass(class)>全部</div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgInventoryCtrl.pagination.numPages > 1" total-items=orgInventoryCtrl.pagination.totalItems ng-model=orgInventoryCtrl.pagination.page items-per-page=orgInventoryCtrl.pagination.itemsPerPage max-size=orgInventoryCtrl.pagination.maxSize boundary-links="{{orgInventoryCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgInventoryCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgInventoryCtrl.pageChanged()></pagination></div><!-- 进货入库 --><div class=bgGary ng-show=orgInventoryCtrl.enterFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">进货入库</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgInventoryCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">商品名称</div><div class="float_left pointer zindex_999" ng-class="{\'select\':!orgInventoryCtrl.chooseNameFlag,\'select_foucs\':orgInventoryCtrl.chooseNameFlag}" ng-click="orgInventoryCtrl.chooseNameFlag = !orgInventoryCtrl.chooseNameFlag"><div class="form_down_icon form_select_value_choose" style=width:346px ng-bind=orgInventoryCtrl.productName></div><div class=form_select_div style=width:346px ng-show=orgInventoryCtrl.chooseNameFlag><div ng-click=orgInventoryCtrl.chooseProduct(product) class="select_cell pointer" ng-repeat="product in orgInventoryCtrl.products" ng-bind=product.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin"><span>供货商</span><span style=color:#fff>的</span></div><div class="float_left pointer form_zindex_100" ng-class="{\'select\':!orgInventoryCtrl.chooseSupplyFlag,\'select_foucs\':orgInventoryCtrl.chooseSupplyFlag}" ng-click="orgInventoryCtrl.chooseSupplyFlag = !orgInventoryCtrl.chooseSupplyFlag"><div class="form_down_icon form_select_value_choose" style=width:346px ng-bind=orgInventoryCtrl.supply></div><div class=form_select_div style=width:346px ng-show=orgInventoryCtrl.chooseSupplyFlag><div ng-click=orgInventoryCtrl.chooseSupply(supply) class="select_cell pointer" ng-repeat="supply in orgInventoryCtrl.supplies" ng-bind=supply.supplyName onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">进货数量</div><input class="form_value float_left form_value_width" placeholder=请输入进货数量 ng-model=orgInventoryCtrl.num></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">进货单价</div><input class="form_value float_left form_value_width" placeholder=请输入进货单价 ng-model=orgInventoryCtrl.price></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgInventoryCtrl.enter()>完成</div><div class="button_normal float_right" ng-click=orgInventoryCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 调价 --><div class=bgGary ng-show=orgInventoryCtrl.changePriceFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">调价</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgInventoryCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin"><span>销售价</span><span style=color:#fff>的</span></div><input class="form_value float_left form_value_width" placeholder=请输入销售价 ng-model=orgInventoryCtrl.salePrice></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgInventoryCtrl.buy()>完成</div><div class="button_normal float_right" ng-click=orgInventoryCtrl.close()>取消</div><div class=clear></div></div></div></div></div>'),
            a.put("app/organization/shop/inventory.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div class=field_bookBoxPostition><div class=field_titleBox><div style="width: 90px" class="field_titleNormal {{orgInventoryCtrl.titleState==\'stock\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="orgInventoryCtrl.changeTitle(\'stock\')">商品库存</div><div style="width: 90px" class="field_titleNormal {{orgInventoryCtrl.titleState==\'record\'?\'field_titleChoose\':\'field_titleUnChoose\'}}" ng-click="orgInventoryCtrl.changeTitle(\'record\')">进货记录</div></div><div ui-view=""></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgInventoryCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgInventoryCtrl.wordOK>22212</div><div class=promptClose ng-click=orgInventoryCtrl.closePrompt()></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgInventoryCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgInventoryCtrl.wordERR>22212</div><div class=promptClose ng-click=orgInventoryCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgInventoryCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class=promptWord ng-bind=orgInventoryCtrl.wordWARN>22212</div><div class=promptClose ng-click=orgInventoryCtrl.closePrompt()></div></div></div></div>'), a.put("app/organization/shop/sell-record.html", '<div><div class=field_selectBox><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入商品名搜索 ng-model=orgSellCtrl.searchProductName><div class=xt_searchImage ng-click=orgSellCtrl.searchProduct()></div></div><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="orgSellCtrl.startDateFlag = !orgSellCtrl.startDateFlag;orgSellCtrl.closeDateFlag = false" ng-bind="orgSellCtrl.startDate | date:\'yyyy-MM-dd\'"></div><div class=float_left style="margin:10px 10px 0 10px">至</div><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="orgSellCtrl.closeDateFlag = !orgSellCtrl.closeDateFlag;orgSellCtrl.startDateFlag = false" ng-bind="orgSellCtrl.closeDate | date:\'yyyy-MM-dd\'"></div><div class=clear></div><div class="student_datetime student_datetime2" style="margin:380px 0 0 0"><datetimepick ng-close=orgSellCtrl.getRecord() ng-id="\'first\'" ng-show=orgSellCtrl.startDateFlag ng-date=orgSellCtrl.startDate></datetimepick></div><div class="student_datetime student_datetime2" style="margin:380px 0 0 0"><datetimepick ng-close=orgSellCtrl.getRecord() ng-id="\'second\'" ng-show=orgSellCtrl.closeDateFlag ng-date=orgSellCtrl.closeDate></datetimepick></div></div></div><div><div class=cancelTable><div class="cancelTr height_40"><div class="cancelTh ellipsis" style=width:20rem>订单号</div><div class="cancelTh ellipsis" style=width:14rem>商品名称</div><div class="cancelTh ellipsis" style=width:13rem>订单时间</div><div class="cancelTh ellipsis" style=width:5rem>售价</div><div class="cancelTh ellipsis" style=width:6rem>数量</div><div class="cancelTh ellipsis" style=width:12rem>销售额</div><div class="cancelTh ellipsis" style=width:10rem>顾客姓名</div><div class="cancelTh ellipsis" style=width:10rem>操作人</div><div class="cancelTh ellipsis" style=width:10rem>操作</div></div><div class=cancelTr ng-repeat="record in orgSellCtrl.records"><div class="cancelTd ellipsis" style=width:20rem ng-bind=record._id></div><div class="cancelTd ellipsis" style=width:14rem ng-bind=record._record?record.description+record.remark:record.shopProductName title={{record._record?record.description+record.remark:record.shopProductName}}></div><div class="cancelTd ellipsis" style=width:13rem ng-bind="record.createDate | date:\'yyyy-MM-dd HH:mm\'"></div><div class="cancelTd ellipsis" style=width:5rem ng-bind=record.price></div><div class="cancelTd ellipsis" style=width:6rem ng-bind=record.quantity></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=record.cost></div><div class="cancelTd ellipsis" style=width:10rem ng-bind=record.name></div><div class="cancelTd ellipsis" style=width:10rem ng-bind=record.workerName></div><div class="cancelTd ellipsis pointer" style=width:10rem;color:#00a1ff><span class=pointer style=color:#00a1ff ng-show=!record.isRefund&&!record._record ng-click="orgSellCtrl.refundFlag = true;orgSellCtrl.rId = record._id">退款</span> <span ng-show=record.isRefund&&!record._record>已退款</span> <span ng-show=record._record>纠错单</span></div></div></div><div style=margin-top:20px;font-size:18px><span>总额：</span><span ng-bind=orgSellCtrl.recordTotal></span></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgSellCtrl.pagination.numPages > 1" total-items=orgSellCtrl.pagination.totalItems ng-model=orgSellCtrl.pagination.page items-per-page=orgSellCtrl.pagination.itemsPerPage max-size=orgSellCtrl.pagination.maxSize boundary-links="{{orgSellCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgSellCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgSellCtrl.pageChanged()></pagination></div><!-- 商品退款 --><div class=bgGary ng-show=orgSellCtrl.refundFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">商品退款</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSellCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">退款金额</div><input class="form_value float_left form_value_width" placeholder=请输入退款金额 ng-model=orgSellCtrl.refundPrice></div><div class=clear></div><!-- \n                <div class="form_first_view">\n                    <div class="form_key float_left form_key_margin">退款方式</div>\n                    <div class="singleChoose_box float_left">\n                        <div class="singleChoose_option" ng-repeat="refund in orgSellCtrl.refundArr" ng-click="orgSellCtrl.chooseRefund(refund)">\n                            <div class="singleChoose_imageBox {{refund.image}}"></div>\n                            <div class="singleChoose_prompt" ng-bind="refund.name">每周</div>\n                        </div>\n                    </div>\n                </div>\n                <div class="clear"></div> --></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSellCtrl.refund()>完成</div><div class="button_normal float_right" ng-click=orgSellCtrl.close()>取消</div><div class=clear></div></div></div></div></div>'), a.put("app/organization/shop/sell-sale.html", '<div style=margin-top:20px><div style="height: 36px;margin-top: 20px;float: left"><input style="float:left;width:160px;height:36px;text-indent:10px;border-radius:5px 0 0 5px;border:1px solid #ccc;border-right:none" placeholder="输入商品名称/条码 " ng-model=orgSellCtrl.pName ng-keydown=orgSellCtrl.addListByDown($event)><div ng-show=orgSellCtrl.pName style="float:left;height:36px;line-height:36px;text-align:center;border-radius:0 5px 5px 0;background:#20a0ff;color:#fff;cursor:pointer;padding:0 15px" ng-click=orgSellCtrl.addList()>加入购物车</div><div ng-hide=orgSellCtrl.pName style="float:left;padding:0 15px;height:36px;line-height:36px;text-align:center;border-radius:0 5px 5px 0;background:#d3dce6;color:#fff">加入购物车</div></div><div class=clear></div><div ng-show=orgSellCtrl.selectFlag style="width:160px;border:1px solid #ddd;background:#fff;z-index:999;position:relative"><div ng-show=product.isUsed ng-click=orgSellCtrl.add(product) class="pointer select_cell" ng-repeat="product in orgSellCtrl.products" ng-bind=product.name style="padding:0 10px">d</div><div ng-show=!product.isUsed ng-click="orgSellCtrl.selectFlag = false" class="pointer select_cell" ng-repeat="product in orgSellCtrl.products" style="padding:0 10px"><span class=float_left ng-bind=product.name></span><span style=float:right;color:#00a1ff>已下架</span></div></div></div><div class=clear></div><div style=margin-top:30px;z-index:888><div class=cancelTable ng-show="!orgSellCtrl.buyProduct.length == 0"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style=width:25rem>商品名称</div><div class="cancelTh ellipsis" style=width:25rem>单价</div><div class="cancelTh ellipsis" style=width:25rem>数量</div><div class="cancelTh ellipsis" style=width:25rem>总价</div></div><div class=cancelTr ng-repeat="product in orgSellCtrl.buyProduct"><div class="cancelTd ellipsis" style=width:25rem ng-bind=product.name>2</div><div class="cancelTd ellipsis" style=width:25rem ng-bind="\'￥\'+product.price">2</div><div class="cancelTd ellipsis" style=width:25rem><input ng-blur=orgSellCtrl.canPrice(product) ng-model=product.num ng-change=orgSellCtrl.calPrice(product) style=border:0;width:20px class="float_left"><div class="float_left pointer"><img src=assets/images/circleadd.png style=width:15px ng-click="orgSellCtrl.changeNum(product,\'add\')"> <img src=assets/images/circledelete.png style=width:15px ng-click="orgSellCtrl.changeNum(product,\'delete\')"></div></div><div class="cancelTd ellipsis" style=width:25rem ng-bind="\'￥\'+product.tot"></div></div><div class=select_div ng-show=orgSellCtrl.typeFlag style=width:20rem;top:230px;left:430px><div class="select_choose ellipsis pointer" ng-click=orgSellCtrl.chooseClass(class)>全部</div></div></div><div style="margin-top:20px;font-size:14px;color:#8492a6;border:1px solid #ddd;width:1000px;text-align:center;height:60px;line-height:60px" ng-show="orgSellCtrl.buyProduct.length == 0">购物车暂无商品</div><div style=margin-top:20px;font-size:14px ng-show="!orgSellCtrl.buyProduct.length == 0"><span>应付:</span> <span style=color:#ff4949>￥</span> <span style=color:#ff4949;font-size:18px ng-bind=orgSellCtrl.total></span></div><div class="button2_normal float_left" style="margin:20px 20px 0 0" ng-click=orgSellCtrl.judgePay()>立即付款</div><div class=bgGary ng-show=orgSellCtrl.payFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">发起支付</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgSellCtrl.payFlag = false"></div><div class=clear></div><div ng-show=orgSellCtrl.moneyFlag style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">需支付：</div><div class="form_value float_left form_value_width" style=border:none;color:red ng-bind="orgSellCtrl.realPrice | currency:\'￥\'"></div></div><div class=clear></div></div><div ng-show=!orgSellCtrl.moneyFlag style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">需支付：</div><div class="form_value float_left form_value_width" style=border:none;color:red ng-bind="orgSellCtrl.total | currency:\'￥\'"></div></div><div class=clear></div></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">支付方式</div><div><div class=singleChoose_option style="float: none" ng-repeat="payment in orgSellCtrl.paymentArr" ng-click=orgSellCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div><div style=width:0;height:0;overflow:hidden><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=orgSellCtrl.auth_code ng-keypress=orgSellCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgSellCtrl.create()>确认支付</div><div class="button_normal float_right" ng-click="orgSellCtrl.payFlag = false">取消</div><div class=clear></div></div></div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=orgSellCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=orgSellCtrl.shut()></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgSellCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgSellCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="orgSellCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgSellCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=orgSellCtrl.wordERR title={{orgSellCtrl.wordERR}}>22212</div><div class=promptClose ng-click=orgSellCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgSellCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=orgSellCtrl.wordWARN title={{orgSellCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/organization/shop/sell.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div><!-- <div ng-include="\'app/organization/head/head.html\'"></div>  --><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=org-shop-form>商品结存报表</div><div class="field_titleNormal field_titleChoose">销售明细</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-purchase-record>入库记录</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-return-record>报废记录</div></div><div class=field_bookBoxPostition ui-view=""></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgSellCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgSellCtrl.wordOK>22212</div><div class=promptClose ng-click="orgSellCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgSellCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgSellCtrl.wordERR>22212</div><div class=promptClose ng-click="orgSellCtrl.promptERR = false"></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgSellCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" title={{orgSellCtrl.wordWARN}}>支付中...</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/organization/staff/staff-all.html", '<div><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div class=field_titleBox><div class="field_titleNormal field_titleChoose">所有人</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-staff.explain>角色说明</div><div class=clear></div></div><div style="padding:0 30px"><div class="float_left pointer" ng-class="{\'select\':!orgStaffCtrl.selectRoleFlag,\'select_foucs\':orgStaffCtrl.selectRoleFlag}" ng-click="orgStaffCtrl.showSelect(\'role\')" style="margin:20px 0 0 0px"><div class="form_down_icon form_width_180 form_select_value_choose" ng-bind=orgStaffCtrl.selectRole></div><div class="form_select_div form_width_180" ng-show=orgStaffCtrl.selectRoleFlag><div ng-click="orgStaffCtrl.chooseRole(\'\',\'所有角色类型\')" class="select_cell pointer" onclick="event.cancelBubble = true">所有角色类型</div><div ng-click="orgStaffCtrl.chooseRole(\'fieldManager\',\'场馆管理员\')" class="select_cell pointer" onclick="event.cancelBubble = true">场馆管理员</div><div ng-click="orgStaffCtrl.chooseRole(\'checkStand\',\'前台柜员\')" class="select_cell pointer" onclick="event.cancelBubble = true">前台柜员</div><div ng-click="orgStaffCtrl.chooseRole(\'fieldWorker\',\'场工\')" class="select_cell pointer" onclick="event.cancelBubble = true">场工</div><div ng-click="orgStaffCtrl.chooseRole(\'cardManager\',\'卡务管理员\')" class="select_cell pointer" onclick="event.cancelBubble = true">卡务管理员</div><div ng-click="orgStaffCtrl.chooseRole(\'financeManager\',\'财务管理员\')" class="select_cell pointer" onclick="event.cancelBubble = true">财务管理员</div></div></div><div class="button2_normal float_right" style="background:#00A1FF;margin:20px 0px 0 0" ng-click="orgStaffCtrl.addFlag = true">新增员工</div><div class=clear></div><table style="margin:20px 30px 0 0px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:14px;background:#F1F3F6><td style="width:15%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">姓名</td><td style="width:15%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">角色类型</td><td style="width:15%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">账号</td><td style="width:35%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">负责场馆</td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">操作</td></tr><tr ng-repeat="user in orgStaffCtrl.users" style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:15%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=user.name></td><td style="width:15%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=user.role></td><td style="width:15%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=user.account></td><td style="width:35%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div class=float_left ng-repeat="venue in user.venues" ng-bind=venue.name style="margin:0px 10px 0 0;font-size:13px;line-height:16px">xxx</div><div ng-show="user.venues.length == 0" style=color:white>xx</div></td><td style="width:20%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px"><div class="float_left pointer" onclick="event.cancelBubble = true" ng-click=orgStaffCtrl.showEdit(user)>编辑</div><div class="float_left pointer" ng-click="orgStaffCtrl.sureFlag = true;orgStaffCtrl.uId = user._id" style="margin:0 0 0 40px">删除</div></td></tr></table><pagination style="left:280px;margin:20px 30px 3px 0px" ng-if="orgStaffCtrl.pagination.numPages > 1" total-items=orgStaffCtrl.pagination.totalItems ng-model=orgStaffCtrl.pagination.page items-per-page=orgStaffCtrl.pagination.itemsPerPage max-size=orgStaffCtrl.pagination.maxSize boundary-links="{{orgStaffCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgStaffCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgStaffCtrl.pageChanged()></pagination></div><div class=bgGary ng-show=orgStaffCtrl.sureFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">确认删除？</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgStaffCtrl.close()"></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgStaffCtrl.delete()>确定</div><div class="button_normal float_right" ng-click=orgStaffCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgStaffCtrl.editFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">编辑员工</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgStaffCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">员工姓名</div><input class="form_value float_left form_value_width" placeholder=请输入姓名 ng-blur="orgStaffCtrl.judge(\'name\')" ng-class="{\'\':!orgStaffCtrl.nameFlag,\'form_value_error\':orgStaffCtrl.nameFlag}" ng-model="orgStaffCtrl.name"></div><div class=clear></div><div class=form_error_font ng-show=!orgStaffCtrl.nameFlag></div><div class=form_error_font ng-show=orgStaffCtrl.nameFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">输入账号</div><input class="form_value float_left form_value_width" placeholder=请输入账号 ng-blur="orgStaffCtrl.judge(\'account\')" ng-class="{\'\':!orgStaffCtrl.accountFlag,\'form_value_error\':orgStaffCtrl.accountFlag}" ng-model="orgStaffCtrl.account"></div><div class=clear></div><div class=form_error_font ng-show=!orgStaffCtrl.accountFlag></div><div class=form_error_font ng-show=orgStaffCtrl.accountFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">输入密码</div><input class="form_value float_left form_value_width" placeholder=请输入密码 ng-blur="orgStaffCtrl.judge(\'password\')" ng-class="{\'\':!orgStaffCtrl.passwordFlag,\'form_value_error\':orgStaffCtrl.passwordFlag}" ng-model="orgStaffCtrl.password"></div><div class=clear></div><div class=form_error_font ng-show=!orgStaffCtrl.passwordFlag></div><div class=form_error_font ng-show=orgStaffCtrl.passwordFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">联系方式</div><input class="form_value float_left form_value_width" placeholder=请输入手机号码 ng-blur="orgStaffCtrl.judge(\'tel\')" ng-class="{\'\':!orgStaffCtrl.telFlag,\'form_value_error\':orgStaffCtrl.telFlag}" ng-model="orgStaffCtrl.tel"></div><div class=clear></div><div class=form_error_font ng-show=!orgStaffCtrl.telFlag></div><div class=form_error_font ng-show=orgStaffCtrl.telFlag>此项为必填项</div><div ng-show=orgStaffCtrl.igFlag><div class="form_key float_left form_key_margin">登录验证</div><div class=float_left style="margin-top:10px;width: 348px"><div class="float_left pointer" style="margin-right:10px;margin-bottom: 10px" ng-click="orgStaffCtrl.codeFlag = true"><img ng-hide=orgStaffCtrl.codeFlag class=float_left src="assets/images/radio_off.png"> <img ng-show=orgStaffCtrl.codeFlag style=width:16px class=float_left src="assets/images/bluecircle.png"><div class=float_left style=margin-left:5px>关闭</div></div><div class="float_left pointer" style="margin-right:10px;margin-bottom: 10px" ng-click="orgStaffCtrl.codeFlag = false"><img ng-hide=!orgStaffCtrl.codeFlag class=float_left src="assets/images/radio_off.png"> <img ng-show=!orgStaffCtrl.codeFlag style=width:16px class=float_left src="assets/images/bluecircle.png"><div class=float_left style=margin-left:5px>开启</div></div></div></div><div class=clear></div><div class=field_selectBoxOne style="margin-top: 0px;width: 445px" ng-show=orgStaffCtrl.staffToVenue><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">财务所属</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgStaffCtrl.product.venueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgStaffCtrl.venueName ng-click="orgStaffCtrl.showChooseVenueBox=!orgStaffCtrl.showChooseVenueBox">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=orgStaffCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in orgStaffCtrl.venues" ng-bind=venue.name ng-click=orgStaffCtrl.chooseVenueName(venue)>默认按钮</div></div></div><div style=clear:both></div></div><div ng-show=orgStaffCtrl.igFlag><div class=field_selectBoxOne style="margin-top: 20px;width: 445px"><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">柜员类型</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value"><div class=ellipsis style="color: #1f2d3d" ng-bind=orgStaffCtrl.checkTypeName ng-click="orgStaffCtrl.showChooseCheckTypeBox=!orgStaffCtrl.showChooseCheckTypeBox">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=orgStaffCtrl.showChooseCheckTypeBox><div class="select_cell pointer ellipsis" ng-repeat="checkType in orgStaffCtrl.checkTypes" ng-bind=checkType.name ng-click=orgStaffCtrl.chooseCheckTypeName(checkType)>默认按钮</div></div></div><div style=clear:both></div></div></div><div ng-show=orgStaffCtrl.cvFlag><div><div class="form_key float_left form_key_margin">负责场馆</div><div class=float_left style=width:350px><div class="float_left pointer" style="margin:10px 23px 0 0" ng-click=orgStaffCtrl.chooseVenue(venue) ng-repeat="venue in orgStaffCtrl.venues"><img ng-show=!venue.select class=float_left src="assets/images/select_box.png"> <img ng-show=venue.select style=width:16px class=float_left src="assets/images/select_true.png"><div class=float_left style=margin-left:3px ng-bind=venue.name></div></div></div></div><div class=clear></div><div class=form_error_font ng-show=!orgStaffCtrl.vFlag></div><div class=form_error_font ng-show=orgStaffCtrl.vFlag>至少选择一个项目</div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgStaffCtrl.edit()>完成</div><div class="button_normal float_right" ng-click=orgStaffCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div class=bgGary ng-show=orgStaffCtrl.addFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">新增员工</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgStaffCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin">员工姓名</div><input class="form_value float_left form_value_width" placeholder=请输入姓名 ng-blur="orgStaffCtrl.judge(\'name\')" ng-class="{\'\':!orgStaffCtrl.nameFlag,\'form_value_error\':orgStaffCtrl.nameFlag}" ng-model="orgStaffCtrl.name"></div><div class=clear></div><div class=form_error_font ng-show=!orgStaffCtrl.nameFlag></div><div class=form_error_font ng-show=orgStaffCtrl.nameFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">角色类型</div><div class=float_left style="margin-top:10px;width: 348px"><div class="float_left pointer" style="margin-right:10px;margin-bottom: 10px" ng-click="orgStaffCtrl.chooseIdentity(\'fieldManager\')"><img ng-hide="orgStaffCtrl.state==\'fieldManager\'" class=float_left src="assets/images/radio_off.png"> <img ng-show="orgStaffCtrl.state==\'fieldManager\'" style=width:16px class=float_left src="assets/images/bluecircle.png"><div class=float_left style=margin-left:5px>场馆管理员</div></div><div class="float_left pointer" style="margin-right:10px;margin-bottom: 10px" ng-click="orgStaffCtrl.chooseIdentity(\'checkStand\')"><img ng-hide="orgStaffCtrl.state==\'checkStand\'" class=float_left src="assets/images/radio_off.png"> <img ng-show="orgStaffCtrl.state==\'checkStand\'" style=width:16px class=float_left src="assets/images/bluecircle.png"><div class=float_left style=margin-left:5px>前台柜员</div></div><div class="float_left pointer" style="margin-right:10px;margin-bottom: 10px" ng-click="orgStaffCtrl.chooseIdentity(\'fieldWorker\')"><img ng-hide="orgStaffCtrl.state==\'fieldWorker\'" class=float_left src="assets/images/radio_off.png"> <img ng-show="orgStaffCtrl.state==\'fieldWorker\'" style=width:16px class=float_left src="assets/images/bluecircle.png"><div class=float_left style=margin-left:5px>场工</div></div><div class="float_left pointer" style="margin-right:10px;margin-bottom: 10px" ng-click="orgStaffCtrl.chooseIdentity(\'cardManager\')"><img ng-hide="orgStaffCtrl.state==\'cardManager\'" class=float_left src="assets/images/radio_off.png"> <img ng-show="orgStaffCtrl.state==\'cardManager\'" style=width:16px class=float_left src="assets/images/bluecircle.png"><div class=float_left style=margin-left:5px>卡务管理员</div></div><div class="float_left pointer" style="margin-right:10px;margin-bottom: 10px" ng-click="orgStaffCtrl.chooseIdentity(\'financeManager\')"><img ng-hide="orgStaffCtrl.state==\'financeManager\'" class=float_left src="assets/images/radio_off.png"> <img ng-show="orgStaffCtrl.state==\'financeManager\'" style=width:16px class=float_left src="assets/images/bluecircle.png"><div class=float_left style=margin-left:5px>财务管理员</div></div></div></div><div class=clear></div><div><div class="form_key float_left form_key_margin">输入账号</div><input class="form_value float_left form_value_width" placeholder=请输入账号 ng-blur="orgStaffCtrl.judge(\'account\')" ng-class="{\'\':!orgStaffCtrl.accountFlag,\'form_value_error\':orgStaffCtrl.accountFlag}" ng-model="orgStaffCtrl.account"></div><div class=clear></div><div class=form_error_font ng-show=!orgStaffCtrl.accountFlag></div><div class=form_error_font ng-show=orgStaffCtrl.accountFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">输入密码</div><input class="form_value float_left form_value_width" placeholder=请输入密码 ng-blur="orgStaffCtrl.judge(\'password\')" ng-class="{\'\':!orgStaffCtrl.passwordFlag,\'form_value_error\':orgStaffCtrl.passwordFlag}" ng-model="orgStaffCtrl.password"></div><div class=clear></div><div class=form_error_font ng-show=!orgStaffCtrl.passwordFlag></div><div class=form_error_font ng-show=orgStaffCtrl.passwordFlag>此项为必填项</div><div><div class="form_key float_left form_key_margin">联系方式</div><input class="form_value float_left form_value_width" placeholder=请输入手机号码 ng-blur="orgStaffCtrl.judge(\'tel\')" ng-class="{\'\':!orgStaffCtrl.telFlag,\'form_value_error\':orgStaffCtrl.telFlag}" ng-model="orgStaffCtrl.tel"></div><div class=clear></div><div class=form_error_font ng-show=!orgStaffCtrl.telFlag></div><div class=form_error_font ng-show=orgStaffCtrl.telFlag>此项为必填项</div><div ng-show=orgStaffCtrl.igFlag><div class="form_key float_left form_key_margin">登录验证</div><div class=float_left style="margin-top:10px;width: 348px"><div class="float_left pointer" style="margin-right:10px;margin-bottom: 10px" ng-click="orgStaffCtrl.codeFlag = true"><img ng-hide=orgStaffCtrl.codeFlag class=float_left src="assets/images/radio_off.png"> <img ng-show=orgStaffCtrl.codeFlag style=width:16px class=float_left src="assets/images/bluecircle.png"><div class=float_left style=margin-left:5px>关闭</div></div><div class="float_left pointer" style="margin-right:10px;margin-bottom: 10px" ng-click="orgStaffCtrl.codeFlag = false"><img ng-hide=!orgStaffCtrl.codeFlag class=float_left src="assets/images/radio_off.png"> <img ng-show=!orgStaffCtrl.codeFlag style=width:16px class=float_left src="assets/images/bluecircle.png"><div class=float_left style=margin-left:5px>开启</div></div></div></div><div class=clear></div><div class=field_selectBoxOne style="margin-top: 0px;width: 445px" ng-show=orgStaffCtrl.staffToVenue><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">财务所属</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgStaffCtrl.product.venueName==\'选择场馆\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgStaffCtrl.venueName ng-click="orgStaffCtrl.showChooseVenueBox=!orgStaffCtrl.showChooseVenueBox">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=orgStaffCtrl.showChooseVenueBox><div class="select_cell pointer ellipsis" ng-repeat="venue in orgStaffCtrl.venues" ng-bind=venue.name ng-click=orgStaffCtrl.chooseVenueName(venue)>默认按钮</div></div></div><div style=clear:both></div></div><div ng-show=orgStaffCtrl.igFlag><div class=field_selectBoxOne style="margin-top: 20px;width: 445px"><div class=field_selectName style="text-indent: 0px;width: 74px;color: #475669">柜员类型</div><div class="select field_select" style="width: 350px"><div class="form_down_icon form_select_value"><div class=ellipsis style="color: #1f2d3d" ng-bind=orgStaffCtrl.checkTypeName ng-click="orgStaffCtrl.showChooseCheckTypeBox=!orgStaffCtrl.showChooseCheckTypeBox">场馆1</div></div><div style="position: relative;z-index: 200" class=form_select_div ng-show=orgStaffCtrl.showChooseCheckTypeBox><div class="select_cell pointer ellipsis" ng-repeat="checkType in orgStaffCtrl.checkTypes" ng-bind=checkType.name ng-click=orgStaffCtrl.chooseCheckTypeName(checkType)>默认按钮</div></div></div><div style=clear:both></div></div></div><div ng-show=orgStaffCtrl.cvFlag><div><div class="form_key float_left form_key_margin">负责场馆</div><div class=float_left style=width:350px><div class="float_left pointer" style="margin:10px 23px 0 0" ng-click=orgStaffCtrl.chooseVenue(venue) ng-repeat="venue in orgStaffCtrl.venues"><img ng-show=!venue.select class=float_left src="assets/images/select_box.png"> <img ng-show=venue.select style=width:16px class=float_left src="assets/images/select_true.png"><div class=float_left style=margin-left:3px ng-bind=venue.name></div></div></div></div><div class=clear></div><div class=form_error_font ng-show=!orgStaffCtrl.vFlag></div><div class=form_error_font ng-show=orgStaffCtrl.vFlag>至少选择一个项目</div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgStaffCtrl.finish()>完成</div><div class="button_normal float_right" ng-click=orgStaffCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 错误提示 --><div class=bgGary style=z-index:999 ng-show=orgStaffCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class=promptWord ng-bind=orgStaffCtrl.wordERR>22212</div><div class=promptClose ng-click="orgStaffCtrl.promptERR = false"></div></div></div></div></div>'),
            a.put("app/organization/staff/staff-explain.html", '<div style="min-width: 900px"><!-- <div ng-include="\'app/organization/head/head.html\'"></div> --><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=org-staff.all>所有人</div><div class="field_titleNormal field_titleChoose">角色说明</div><div class=clear></div></div><div><div style="margin:40px 20px 0 20px;padding-bottom:20px;border-bottom:1px solid #94A8BA;min-width:106rem"><div class=float_left style="width:30rem;padding-left:20px;font-weight: medium">角色类型</div><div class=float_left style="width:80rem;font-weight: medium">描述</div></div><div class=clear></div><div style=margin-right:20px;;min-width:106rem><div style="height:48px;line-height:48px;border-bottom:1px solid #ddd;margin-left:20px;color:#526874"><div class=float_left style=width:30rem;padding-left:20px>超级管理员</div><div class=float_left>包含所有场馆、会员、员工的功能的管理权限</div></div><div class=clear></div><div style="height:48px;line-height:48px;border-bottom:1px solid #ddd;margin-left:20px;color:#526874"><div class=float_left style=width:30rem;padding-left:20px>场馆管理员</div><div class=float_left>包含自己负责场馆下的场地、会员、员工的功能的管理权限</div></div><div class=clear></div><div style="height:48px;line-height:48px;border-bottom:1px solid #ddd;margin-left:20px;color:#526874"><div class=float_left style=width:30rem;padding-left:20px>卡务管理员</div><div class=float_left>包含所有场馆下的实体卡、虚拟卡的功能的管理权限</div></div><div class=clear></div><div style="height:48px;line-height:48px;border-bottom:1px solid #ddd;margin-left:20px;color:#526874"><div class=float_left style=width:30rem;padding-left:20px>财务管理员</div><div class=float_left>包含自己负责场馆下的财务的功能的管理权限</div></div><div class=clear></div><div style="height:48px;line-height:48px;border-bottom:1px solid #ddd;margin-left:20px;color:#526874"><div class=float_left style=width:30rem;padding-left:20px>前台柜员</div><div class=float_left>包含自己负责场馆的场地预定、会员的管理权限</div></div><div class=clear></div><div style="height:48px;line-height:48px;border-bottom:1px solid #ddd;margin-left:20px;color:#526874"><div class=float_left style=width:30rem;padding-left:20px>场地工作人员</div><div class=float_left>负责自己负责场馆的场地的开启使用，更换场地</div></div><div class=clear></div></div></div></div><style></style>'), a.put("app/organization/staff/staff.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div ui-view="" style="padding:0 0rem 20px 200px"></div></div>'), a.put("app/organization/stock/purchase-record.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=org-shop-form>商品结存报表</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-sell.record>销售明细</div><div class="field_titleNormal field_titleChoose">入库记录</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-return-record>报废记录</div></div><div class=field_bookBoxPostition><div><div class=field_selectBox><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入商品名条码 ng-model=orgPurchaseRecordCtrl.searchProductName><!-- <div class="xt_searchImage" ng-click="orgPurchaseRecordCtrl.searchProduct()"></div> --></div><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入进货批号 ng-model=orgPurchaseRecordCtrl.orderNo><!-- <div class="xt_searchImage" ng-click="orgPurchaseRecordCtrl.searchProduct()"></div> --></div><div class=float_left style="margin-right: 20px;position: relative"><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="orgPurchaseRecordCtrl.startDateFlag = !orgPurchaseRecordCtrl.startDateFlag;orgPurchaseRecordCtrl.closeDateFlag = false" ng-bind="orgPurchaseRecordCtrl.startDate | date:\'yyyy-MM-dd\'"></div><div class=float_left style="margin:10px 10px 0 10px">至</div><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="orgPurchaseRecordCtrl.closeDateFlag = !orgPurchaseRecordCtrl.closeDateFlag;orgPurchaseRecordCtrl.startDateFlag = false" ng-bind="orgPurchaseRecordCtrl.closeDate | date:\'yyyy-MM-dd\'"></div><div class=clear></div><div class="student_datetime student_datetime2" style="position: absolute;top:36px;left: 0"><datetimepick ng-close=orgPurchaseRecordCtrl.closeDateBox() ng-id="\'first\'" ng-show=orgPurchaseRecordCtrl.startDateFlag ng-date=orgPurchaseRecordCtrl.startDate></datetimepick></div><div class="student_datetime student_datetime2" style="position: absolute;top:36px;left: 184px"><datetimepick ng-close=orgPurchaseRecordCtrl.closeDateBox() ng-id="\'second\'" ng-show=orgPurchaseRecordCtrl.closeDateFlag ng-date=orgPurchaseRecordCtrl.closeDate></datetimepick></div></div><div class=float_left style="margin-right: 20px"><div class="fbonce_bookConfirmBtn pointer" style="margin-top: 0px;height: 36px;line-height: 36px;margin-bottom: 0" ng-click=orgPurchaseRecordCtrl.check()>查询</div></div><div class=float_left><div class="fbonce_m_i_r_c_btn bgcolorW borderccc" style="color: #475669" ng-click=orgPurchaseRecordCtrl.resert()>重置</div></div><div class=clear></div></div></div><div><div class=cancelTable style="width: 114rem"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style="width:11rem;text-indent: 20px">登记时间</div><div class="cancelTh ellipsis" style=width:11rem>采购单号</div><div class="cancelTh ellipsis" style=width:11rem>商品码</div><div class="cancelTh ellipsis" style=width:11rem>商品名称</div><div class="cancelTh ellipsis" style=width:12rem>供应商名称</div><div class="cancelTh ellipsis" style=width:11rem>进货数量</div><div class="cancelTh ellipsis" style=width:11rem>进货单价</div><div class="cancelTh ellipsis" style=width:11rem>进货总价</div><div class="cancelTh ellipsis" style=width:11rem>销售单价</div><div class="cancelTh ellipsis" style=width:11rem>操作人</div><!-- <div class="cancelTh ellipsis" style="width:10rem">操作</div> --></div><div class=cancelTr ng-repeat="order in orgPurchaseRecordCtrl.orders"><div class="cancelTd ellipsis" style="width:11rem;text-indent: 20px" ng-bind="order.createDate | date:\'yyyy-MM-dd HH:mm\'"></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.orderNo></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.misCode></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.name></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=order.supplyName></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.quantity></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.purchasePrice></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.cost></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.price></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.workerName></div><!-- <div class="cancelTd ellipsis" style="width:10rem;">\n                                <span style="color:#00a1ff;cursor: pointer;" ng-show="order.canChange" ng-click="csdReturnRecordCtrl.cancel(order._id)">撤销</span>\n                                <span ng-hide="order.canChange">不可操作</span>\n                            </div> --></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgPurchaseRecordCtrl.pagination.numPages > 1" total-items=orgPurchaseRecordCtrl.pagination.totalItems ng-model=orgPurchaseRecordCtrl.pagination.page items-per-page=orgPurchaseRecordCtrl.pagination.itemsPerPage max-size=orgPurchaseRecordCtrl.pagination.maxSize boundary-links="{{orgPurchaseRecordCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgPurchaseRecordCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgPurchaseRecordCtrl.pageChanged()></pagination></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgPurchaseRecordCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgPurchaseRecordCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="orgPurchaseRecordCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgPurchaseRecordCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=orgPurchaseRecordCtrl.wordERR title={{orgPurchaseRecordCtrl.wordERR}}>22212</div><div class=promptClose ng-click=orgPurchaseRecordCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgPurchaseRecordCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=orgPurchaseRecordCtrl.wordWARN title={{orgPurchaseRecordCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/organization/stock/purchase.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleChoose">商品入库</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-stock>库存管理</div></div><div class=field_bookBoxPostition style="margin-top: 10px"><div><div class=field_selectBox style="position: relative;width:auto;width: 106rem;height: 130px;min-width:1500px;background: #EFF2F7;border:1px solid #ccc;border-radius: 5px"><div style="float:left;width: 28rem;min-width:380px;height: 120px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">商品名称：</div><div style="float: left;margin-top: 12px;background: #fff;width: 230px"><input name=name class="select field_select" style="width: 230px;text-indent: 10px;cursor: auto;ime-mode:disabled" ng-keypress=orgPurchaseCtrl.enterCheck($event) placeholder=请扫商品码 ng-model=orgPurchaseCtrl.product.showName><div style="position: absolute;top:48px;width: 230px;z-index: 300" class=form_select_div ng-show=orgPurchaseCtrl.showProductsBox><div class="select_cell pointer ellipsis" ng-repeat="product in orgPurchaseCtrl.products" ng-bind=product.name ng-click=orgPurchaseCtrl.chooseProduct(product)>默认按钮</div></div></div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">进货数量：</div><div style="float: left;margin-top: 12px;background: #fff;width: 230px"><input name=name class="select field_select" style="width: 230px;text-indent: 10px;cursor: auto" placeholder=请输入进货数量 ng-model=orgPurchaseCtrl.product.quantity></div></div></div><div style="float:left;width: 28rem;min-width:380px;height: 120px"><div style="height: 60px;line-height: 60px;padding-left: 20px"></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">进货单价：</div><div style="float: left;margin-top: 12px;background: #fff;width: 230px"><input name=name class="select field_select" style="width: 230px;text-indent: 10px;cursor: auto" placeholder=请输入进货价 ng-model=orgPurchaseCtrl.product.purchasePrice></div></div></div><div style="float:left;width: 28rem;min-width:380px;height: 120px"><div style="height: 60px;line-height: 60px;padding-left: 20px"></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div style="float: left;color:#8F99A6;width: 80px">销售单价：</div><div style="float: left;margin-top: 12px;width: 230px"><div style="width: 230px;height: 36px;line-height: 36px;border-radius: 4px;text-indent: 10px;cursor: text" ng-bind=orgPurchaseCtrl.product.price></div></div></div></div><div style="float:left;width: 20rem;min-width:200px;height: 120px"><div style="height: 60px;line-height: 60px;padding-left: 20px"><div class=fbonce_bookConfirmBtn style="background: #d3dce6" ng-hide=orgPurchaseCtrl.product.misCode&&orgPurchaseCtrl.product.quantity&&orgPurchaseCtrl.product.purchasePrice&&orgPurchaseCtrl.product.price>加入进货单</div><div class="fbonce_bookConfirmBtn pointer" ng-show=orgPurchaseCtrl.product.misCode&&orgPurchaseCtrl.product.quantity&&orgPurchaseCtrl.product.purchasePrice&&orgPurchaseCtrl.product.price ng-click=orgPurchaseCtrl.addToForm()>加入进货单</div></div><div style="height: 60px;line-height: 60px;padding-left: 20px"><div class="fbonce_m_i_r_c_btn bgcolorW borderccc" style="color: #475669;margin-left: 0px" ng-click=orgPurchaseCtrl.resert()>重置</div></div></div></div><div class=clear></div></div><div><div class=cancelTable style="width: 106rem" ng-show="orgPurchaseCtrl.showProducts.length>0"><div class="cancelThTr height_40" style="font-size: 15px"><div class="cancelTh width_4 ellipsis"><div style="width: 16px;height: 16px;border-radius: 5px;margin-top: 7px;margin-left: 12px;cursor: pointer" class={{orgPurchaseCtrl.chooseAll}} ng-click=orgPurchaseCtrl.chooseAllDoc()></div></div><div class="cancelTh width_13 ellipsis">商品码</div><div class="cancelTh width_13 ellipsis">商品名称</div><div class="cancelTh width_18 ellipsis">供货商名称</div><div class="cancelTh width_13 ellipsis">销售单价</div><div class="cancelTh width_13 ellipsis">进货数量</div><div class="cancelTh width_13 ellipsis">进货单价</div><div class="cancelTh width_13 ellipsis">进货总价</div></div><div class=cancelTr ng-repeat="doc in orgPurchaseCtrl.showProducts"><div class="cancelTd width_4 ellipsis"><div style="width: 16px;height: 16px;border-radius: 5px;margin-top: 15px;margin-left: 12px;cursor: pointer" class={{doc.image}} ng-click=orgPurchaseCtrl.chooseDoc(doc)></div></div><div class="cancelTd width_13 ellipsis" ng-bind=doc.misCode>预订时间</div><div class="cancelTd width_13 ellipsis" ng-bind=doc.name></div><div class="cancelTd width_18 ellipsis" ng-bind=doc.supplyName></div><div class="cancelTd width_13 ellipsis" ng-bind=doc.price></div><div class="cancelTd width_13 ellipsis" ng-bind=doc.quantity></div><div class="cancelTd width_13 ellipsis" ng-bind=doc.purchasePrice></div><div class="cancelTd width_13 ellipsis" ng-bind=doc.cost></div></div><div><div class=fbonce_bookConfirmBtn style="background: #d3dce6" ng-hide="orgPurchaseCtrl.commiteCount>0">确认进货</div><div class="fbonce_bookConfirmBtn pointer" ng-show="orgPurchaseCtrl.commiteCount>0" ng-click="orgPurchaseCtrl.showWorkersBox=true">确认进货</div></div></div></div></div></div></div></div><!-- 选择发放柜员 --><div class=bgGary ng-show=orgPurchaseCtrl.showWorkersBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">选择库存发放柜员</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgPurchaseCtrl.close()"><div class=clear></div></div><div style="margin-top: 20px"><div class="form_key float_left form_key_margin" style="width: 56px">发放柜员</div><div class="float_left pointer" style="z-index: 20" ng-class="{\'select\':!orgPurchaseCtrl.chooseWorkerFlag,\'select_foucs\':orgPurchaseCtrl.chooseWorkerFlag}" ng-click="orgPurchaseCtrl.chooseWorkerFlag = !orgPurchaseCtrl.chooseWorkerFlag"><div class="form_down_icon form_select_value_choose" style="width:346px;{{orgPurchaseCtrl.workerName==\'请选择柜员\'?\'color:#8f99a6\':\'color:#1f2d3d\';}}" ng-bind=orgPurchaseCtrl.workerName></div><div class=form_select_div style=width:346px ng-show=orgPurchaseCtrl.chooseWorkerFlag><div ng-click=orgPurchaseCtrl.chooseWorker(worker) class="select_cell pointer" ng-repeat="worker in orgPurchaseCtrl.workers" ng-bind=worker.name onclick="event.cancelBubble = true">默认按钮</div></div></div></div><div class=clear></div><div class=form_error_font></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgPurchaseCtrl.create()>完成</div><div class="button_normal float_right" ng-click=orgPurchaseCtrl.close()>取消</div><div class=clear></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgPurchaseCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgPurchaseCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="orgPurchaseCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgPurchaseCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=orgPurchaseCtrl.wordERR title={{orgPurchaseCtrl.wordERR}}>22212</div><div class=promptClose ng-click=orgPurchaseCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgPurchaseCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=orgPurchaseCtrl.wordWARN title={{orgPurchaseCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/organization/stock/return-record.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=org-shop-form>商品结存报表</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-sell.record>销售明细</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-purchase-record>入库记录</div><div class="field_titleNormal field_titleChoose">报废记录</div></div><div class=field_bookBoxPostition><div><div class=field_selectBox><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入商品名条码 ng-model=orgReturnRecordCtrl.searchProductName><!-- <div class="xt_searchImage" ng-click="orgReturnRecordCtrl.searchProduct()"></div> --></div><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入报废单号 ng-model=orgReturnRecordCtrl.orderNo><!-- <div class="xt_searchImage" ng-click="orgReturnRecordCtrl.searchProduct()"></div> --></div><div class=float_left style="margin-right: 20px;position: relative"><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="orgReturnRecordCtrl.startDateFlag = !orgPurchaseRecordReturnrtDateFlag;orgReturnRecordCtrl.closeDateFlag = false" ng-bind="orgReturnRecordCtrl.startDate | date:\'yyyy-MM-dd\'"></div><div class=float_left style="margin:10px 10px 0 10px">至</div><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="orgReturnRecordCtrl.closeDateFlag = !orgPurchaseRecordReturnseDateFlag;orgReturnRecordCtrl.startDateFlag = false" ng-bind="orgReturnRecordCtrl.closeDate | date:\'yyyy-MM-dd\'"></div><div class=clear></div><div class="student_datetime student_datetime2" style="position: absolute;top:36px;left: 0"><datetimepick ng-close=orgReturnRecordCtrl.closeDateBox() ng-id="\'first\'" ng-show=orgReturnRecordCtrl.startDateFlag ng-date=orgReturnRecordCtrl.startDate></datetimepick></div><div class="student_datetime student_datetime2" style="position: absolute;top:36px;left: 184px"><datetimepick ng-close=orgReturnRecordCtrl.closeDateBox() ng-id="\'second\'" ng-show=orgReturnRecordCtrl.closeDateFlag ng-date=orgReturnRecordCtrl.closeDate></datetimepick></div></div><div class=float_left style="margin-right: 20px"><div class="fbonce_bookConfirmBtn pointer" style="margin-top: 0px;height: 36px;line-height: 36px;margin-bottom: 0" ng-click=orgReturnRecordCtrl.check()>查询</div></div><div class=float_left><div class="fbonce_m_i_r_c_btn bgcolorW borderccc" style="color: #475669" ng-click=orgReturnRecordCtrl.resert()>重置</div></div><div class=clear></div></div></div><div><div class=cancelTable style="width: 114rem"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style="width:11rem;text-indent: 20px">报废时间</div><div class="cancelTh ellipsis" style=width:11rem>报废单号</div><div class="cancelTh ellipsis" style=width:11rem>商品码</div><div class="cancelTh ellipsis" style=width:11rem>商品名称</div><div class="cancelTh ellipsis" style=width:12rem>供应商名称</div><div class="cancelTh ellipsis" style=width:11rem>报废数量</div><div class="cancelTh ellipsis" style=width:11rem>进货单价</div><div class="cancelTh ellipsis" style=width:11rem>进货总价</div><div class="cancelTh ellipsis" style=width:11rem>销售单价</div><div class="cancelTh ellipsis" style=width:11rem>操作人</div><!-- <div class="cancelTh ellipsis" style="width:10rem">操作</div> --></div><div class=cancelTr ng-repeat="order in orgReturnRecordCtrl.orders"><div class="cancelTd ellipsis" style="width:11rem;text-indent: 20px" ng-bind="order.createDate | date:\'yyyy-MM-dd HH:mm\'"></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.orderNo></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.misCode></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.name></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=order.supplyName></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.quantity></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.purchasePrice></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.cost></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.price></div><div class="cancelTd ellipsis" style=width:11rem ng-bind=order.workerName></div><!-- <div class="cancelTd ellipsis" style="width:10rem;">\n                                <span style="color:#00a1ff;cursor: pointer;" ng-show="order.canChange" ng-click="csdReturnRecordCtrl.cancel(order._id)">撤销</span>\n                                <span ng-hide="order.canChange">不可操作</span>\n                            </div> --></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgReturnRecordCtrl.pagination.numPages > 1" total-items=orgReturnRecordCtrl.pagination.totalItems ng-model=orgReturnRecordCtrl.pagination.page items-per-page=orgReturnRecordCtrl.pagination.itemsPerPage max-size=orgReturnRecordCtrl.pagination.maxSize boundary-links="{{orgPurchaseRecReturnpagination.numPages > 2}}" rotate=false num-pages=orgReturnRecordCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgReturnRecordCtrl.pageChanged()></pagination></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgReturnRecordCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgReturnRecordCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="orgReturnRecordCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgReturnRecordCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=orgReturnRecordCtrl.wordERR title={{orgPurchaseReturnrl.wordERR}}>22212</div><div class=promptClose ng-click=orgReturnRecordCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgReturnRecordCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=orgReturnRecordCtrl.wordWARN title={{orgPurchaseRReturnl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/organization/stock/shop-form.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleChoose">商品结存报表</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-sell.record>销售明细</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-purchase-record>入库记录</div><div class="field_titleNormal field_titleUnChoose" ui-sref=org-return-record>报废记录</div></div><div class=field_bookBoxPostition><div><div class=field_selectBox><div class=float_left style="margin-right: 20px;position: relative"><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="orgShopFormCtrl.startDateFlag = !orgShopFormCtrl.startDateFlag;orgShopFormCtrl.closeDateFlag = false" ng-bind="orgShopFormCtrl.startDate | date:\'yyyy-MM-dd\'"></div><div class=float_left style="margin:10px 10px 0 10px">至</div><div class="form_value float_left form_right_date_icon" style=width:150px ng-click="orgShopFormCtrl.closeDateFlag = !orgShopFormCtrl.closeDateFlag;orgShopFormCtrl.startDateFlag = false" ng-bind="orgShopFormCtrl.closeDate | date:\'yyyy-MM-dd\'"></div><div class=clear></div><div class="student_datetime student_datetime2" style="position: absolute;top:36px;left: 0"><datetimepick ng-close=orgShopFormCtrl.closeDateBox() ng-id="\'first\'" ng-show=orgShopFormCtrl.startDateFlag ng-date=orgShopFormCtrl.startDate></datetimepick></div><div class="student_datetime student_datetime2" style="position: absolute;top:36px;left: 184px"><datetimepick ng-close=orgShopFormCtrl.closeDateBox() ng-id="\'second\'" ng-show=orgShopFormCtrl.closeDateFlag ng-date=orgShopFormCtrl.closeDate></datetimepick></div></div><div class=float_right style="margin-right: 20px"><div class="fbonce_bookConfirmBtn pointer" style="margin-top: 0px;height: 36px;line-height: 36px;margin-bottom: 0px" ng-click=orgShopFormCtrl.export()>导出xls</div></div></div></div><div><div class=cancelTable style="width: 114rem"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style="width:8rem;text-indent: 20px">商品名称</div><div class="cancelTh ellipsis" style=width:8rem>上次结存数量</div><div class="cancelTh ellipsis" style=width:8rem>上次结存金额</div><div class="cancelTh ellipsis" style=width:8rem>本次进货价</div><div class="cancelTh ellipsis" style=width:8rem>本次进货数量</div><div class="cancelTh ellipsis" style=width:8rem>本次进货金额</div><div class="cancelTh ellipsis" style=width:8rem>本次报废数量</div><div class="cancelTh ellipsis" style=width:8rem>本次报废金额</div><div class="cancelTh ellipsis" style=width:8rem>本次销售量</div><div class="cancelTh ellipsis" style=width:8rem>本次零售价</div><div class="cancelTh ellipsis" style=width:8rem>本次销售金额</div><div class="cancelTh ellipsis" style=width:8rem>盈利</div><div class="cancelTh ellipsis" style=width:8rem>本次结存数量</div><div class="cancelTh ellipsis" style=width:8rem>本次结存金额</div></div><div class=cancelTr ng-repeat="form in orgShopFormCtrl.forms"><div class="cancelTd ellipsis" style="width:8rem;text-indent: 20px" ng-bind=form.name title={{form.name}}></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.lastQuantity></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.lastCost></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.purchasePrice></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.purchaseQuantity></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.purchaseCost></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.returnQuantity></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.returnCost></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.saleQuantity></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.price></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.salesVolume></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.income></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.nowQuantity></div><div class="cancelTd ellipsis" style=width:8rem ng-bind=form.nowCost></div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgShopFormCtrl.pagination.numPages > 1" total-items=orgShopFormCtrl.pagination.totalItems ng-model=orgShopFormCtrl.pagination.page items-per-page=orgShopFormCtrl.pagination.itemsPerPage max-size=orgShopFormCtrl.pagination.maxSize boundary-links="{{orgShopFormCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgShopFormCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgShopFormCtrl.pageChanged()></pagination></div></div></div></div></div><table id=alltable style="width: 0;height: 0;overflow: hidden"><tr><td colspan=14><span>库存盘存表</span></td></tr><tr><td colspan=14><span>时间范围：</span> <span ng-bind=orgShopFormCtrl.dateName></span></td></tr><tr><td>商品名称</td><td>上次结存数量</td><td>上次结存金额</td><td>本次进货价</td><td>本次进货数量</td><td>本次进货金额</td><td>本次报废数量</td><td>本次报废金额</td><td>本次销售量</td><td>本次零售价</td><td>本次销售金额</td><td>盈利</td><td>本次结存数量</td><td>本次结存金额</td></tr><tr ng-repeat="form in orgShopFormCtrl.exportforms"><td ng-bind=form.name></td><td ng-bind=form.lastQuantity></td><td ng-bind=form.lastCost></td><td ng-bind=form.purchasePrice></td><td ng-bind=form.purchaseQuantity></td><td ng-bind=form.purchaseCost></td><td ng-bind=form.returnQuantity></td><td ng-bind=form.returnCost></td><td ng-bind=form.saleQuantity></td><td ng-bind=form.price></td><td ng-bind=form.salesVolume></td><td ng-bind=form.income></td><td ng-bind=form.nowQuantity></td><td ng-bind=form.nowCost></td></tr></table><!-- 成功提示 --><div class=bgGary ng-show=orgShopFormCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgShopFormCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="orgShopFormCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgShopFormCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=orgShopFormCtrl.wordERR title={{orgShopFormCtrl.wordERR}}>22212</div><div class=promptClose ng-click=orgShopFormCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgShopFormCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=orgShopFormCtrl.wordWARN title={{orgShopFormCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/organization/stock/stock.html", '<div class=contentBox><div ng-include="\'components/header/header.html\'"></div><div class=field_bookBox><div><div class=field_titleBox><div class="field_titleNormal field_titleUnChoose" ui-sref=org-purchase>商品入库</div><div class="field_titleNormal field_titleChoose">库存管理</div></div><div class=field_bookBoxPostition><div><div class=field_selectBox><div class="select fbonce_select"><div class="form_down_icon form_select_value"><div class=ellipsis style="{{orgStockCtrl.showWorkerName==\'选择柜员\'?\'\':\'color:#1f2d3d\';}}" ng-bind=orgStockCtrl.showWorkerName ng-click="orgStockCtrl.showChooseWorkerBox=!orgStockCtrl.showChooseWorkerBox">场馆1</div></div><div class=form_select_div style="position: relative;z-index: 100" ng-show=orgStockCtrl.showChooseWorkerBox><div class="select_cell pointer ellipsis" ng-repeat="worker in orgStockCtrl.workers" ng-bind=worker.name ng-click=orgStockCtrl.chooseWorkerName(worker)>默认按钮</div></div></div><div class="xt_searchBox float_left" style=margin-right:20px><input class=xt_searchInput style=text-indent:10px placeholder=请输入商品名/条码 ng-model=orgStockCtrl.searchProductName ng-keypress=orgStockCtrl.enterCheck($event)><div class=xt_searchImage ng-click=orgStockCtrl.searchProduct()></div></div><div class=float_right style="margin-right: 20px"><div class="fbonce_bookConfirmBtn pointer" style="margin-top: 0px;height: 36px;line-height: 36px;margin-bottom:0" ng-click=orgStockCtrl.export()>导出xls</div></div></div></div><div><div class=cancelTable style="width: 114rem"><div class="cancelTr height_40"><div class="cancelTh ellipsis" style="width:12rem;text-indent: 20px">商品码</div><div class="cancelTh ellipsis" style=width:12rem>商品名称</div><div class="cancelTh ellipsis" style=width:12rem>商品类别</div><div class="cancelTh ellipsis" style=width:12rem>库存数量</div><div class="cancelTh ellipsis" style=width:12rem>进货单价</div><div class="cancelTh ellipsis" style=width:12rem>销售单价</div><div class="cancelTh ellipsis" style=width:12rem>当前状态</div><div class="cancelTh ellipsis" style=width:12rem>当前柜员</div><div class="cancelTh ellipsis" style=width:12rem>操作</div></div><div class=cancelTr ng-repeat="product in orgStockCtrl.products"><div class="cancelTd ellipsis" style="width:12rem;text-indent: 20px" ng-bind=product.misCode></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=product.name></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=product.categoryName></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=product.quantity></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=product.purchasePrice></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=product.price></div><div class="cancelTd ellipsis" style=width:12rem ng-bind=product.status></div><div class="cancelTd ellipsis" style=width:12rem ng-bind="product._worker?product.workerName:\'暂无柜员\'"></div><div class="cancelTd ellipsis pointer" style="width:12rem;color: #20a0ff"><span ng-click=orgStockCtrl.openShowReturnBox(product._id)>报废</span></div></div></div><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgStockCtrl.pagination.numPages > 1" total-items=orgStockCtrl.pagination.totalItems ng-model=orgStockCtrl.pagination.page items-per-page=orgStockCtrl.pagination.itemsPerPage max-size=orgStockCtrl.pagination.maxSize boundary-links="{{orgStockCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgStockCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgStockCtrl.pageChanged()></pagination></div></div></div></div></div><!-- 报废商品 --><div class=bgGary ng-show=orgStockCtrl.showReturnBox><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">报废数量</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgStockCtrl.close()"></div><div class=clear></div><div class=form_first_view><div class="form_key float_left form_key_margin" style="width: 56px">报废数量</div><input class="form_value float_left form_value_width" placeholder=请输入报废数量 ng-blur="orgStockCtrl.judge(\'price\')" ng-class="{\'\':!orgStockCtrl.nameFlag,\'form_value_error\':orgStockCtrl.nameFlag}" ng-model="orgStockCtrl.returnQuantity"></div><div class=clear></div><div class=form_error_font ng-show=!orgStockCtrl.nameFlag></div><div class=form_error_font ng-show=orgStockCtrl.nameFlag style=margin-left:80px>此项为必填项</div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgStockCtrl.check()>确认报废</div><div class="button_normal float_right" ng-click=orgStockCtrl.close()>取消</div><div class=clear></div></div></div></div></div><div style="width: 0;height: 0;overflow: hidden"><table id=alltable><tr><td colspan=6><span>柜员库存表</span></td></tr><tr><td>柜员</td><td>商品名称</td><td>商品类别</td><td>库存数量</td><td>进货单价</td><td>销售单价</td></tr><tr ng-repeat="product in orgStockCtrl.exportProducts"><td ng-bind="product._worker?product.workerName:\'暂无柜员\'"></td><td ng-bind=product.name></td><td ng-bind=product.categoryName></td><td ng-bind=product.quantity></td><td ng-bind=product.purchasePrice></td><td ng-bind=product.price></td></tr></table></div><!-- 成功提示 --><div class=bgGary ng-show=orgStockCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=orgStockCtrl.wordOK>22212</div><!-- <div class="promptClose" ng-click="orgStockCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgStockCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=orgStockCtrl.wordERR title={{orgStockCtrl.wordERR}}>22212</div><div class=promptClose ng-click=orgStockCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgStockCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=orgStockCtrl.wordWARN title={{orgStockCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'),
            a.put("app/organization/swim/change.html", '<div class="contentBox noselect" style=min-width:1366px;background:#EDF0F2;font-weight:700 id=fdWorker ondragstart="return false"><!-- <div ng-include="\'components/header/header.html\'"></div> --><div style=min-width:1366px;background:#EDF0F2><div style="background:#fff;box-shadow: 0 1px 4px 0 rgba(0,0,0,0.4)"><div style="height:58px;line-height:56px;padding:0 20px;font-size:18px;color:#475669"><div class="float_left pointer" style=width:33% ui-sref=org-index><img class=float_left style="height:22px;margin:19px 10px 0 0" src="assets/images/page_left.png"><div class=float_left>返回</div></div><div class=float_left style=width:33%;text-align:center>更换年卡</div></div></div><div style="background:#fff;min-width:1326px;margin:20px;padding:28px 28px 27px 28px;color:#475669;border-radius:4px;border: 1px solid #E5E5E5"><div style=font-size:18px>原卡查询</div><div style=margin-top:20px><div class=float_left style=height:280px;width:220px;overflow:hidden><img ng-show=!orgChangeCtrl.photoFlag style=height:280px;width:220px src="{{orgChangeCtrl.img}}"> <img ng-show=orgChangeCtrl.photoFlag style=height:298px;width:600px src="{{orgChangeCtrl.img}}"></div><div class=float_left style="margin:21px 0 0 62px;color:#5E6D82;font-size:14px"><div style=height:41px;line-height:41px;color:#5E6D82;font-size:14px><div class=float_left>旧卡查询</div><input id=voucher class=float_left placeholder=请将旧卡放置在感应器上 ng-model=orgChangeCtrl.oldNo style="ime-mode:disabled;width:329px;height:39px;border:1px solid #C0CCDA;border-radius:4px;line-height:37px;padding-left:12px;margin:0 75px 0 12px"></div><div style=height:41px;line-height:41px;margin-top:20px><div class=float_left>客户姓名</div><div class=float_left style="border:1px solid #C0CCDA;border-radius:4px;width:160px;line-height:39px;margin:0 62px 0 12px;color:#1F2D3D;padding-left:10px" placeholder=请读取用户信息 ng-bind=orgChangeCtrl.name></div><div class=float_left>手机号码</div><div class=float_left style="border:1px solid #C0CCDA;border-radius:4px;width:160px;line-height:39px;margin:0 62px 0 12px;color:#1F2D3D;padding-left:10px" ng-bind="orgChangeCtrl.tel?orgChangeCtrl.tel:\'暂无手机号\'"></div><div class=float_left>会员卡号</div><div class=float_left style="border:1px solid #C0CCDA;border-radius:4px;width:160px;line-height:39px;margin:0 62px 0 12px;color:#1F2D3D;padding-left:10px" ng-bind=orgChangeCtrl.cardNo></div><div class=float_left>办卡日期</div><div class=float_left style="border:1px solid #C0CCDA;border-radius:4px;width:160px;line-height:39px;margin:0 62px 0 12px;color:#1F2D3D;padding-left:10px" ng-bind="orgChangeCtrl.cardDate | date:\'yyyy-MM-dd\'"></div></div><div class=clear></div><div style=height:41px;line-height:41px;margin-top:20px><div class=float_left>卡片类型</div><div class=float_left style="border:1px solid #C0CCDA;border-radius:4px;width:160px;line-height:39px;margin:0 62px 0 12px;color:#06CAE9;font-size:18px;padding-left:10px" ng-bind=orgChangeCtrl.cardType></div><div class=float_left>过期时间</div><div class=float_left style="border:1px solid #C0CCDA;border-radius:4px;width:160px;line-height:39px;margin:0 62px 0 12px;color:#06CAE9;font-size:18px;padding-left:10px" ng-bind="orgChangeCtrl.leftTime+(orgChangeCtrl.cardType==\'次数卡\'?\'次\':\'\')"></div><div class=float_left>使用权限</div><div class=float_left style="border:1px solid #C0CCDA;border-radius:4px;width:160px;line-height:39px;margin:0 62px 0 12px;color:#06CAE9;font-size:18px;padding-left:10px" ng-bind=orgChangeCtrl.power></div></div><div class=clear></div><div class="pointer float_left" ng-click=orgChangeCtrl.refund() style=margin-top:21px;height:36px;width:96px;line-height:34px;text-align:center;background:#06cae9;font-size:14px;color:#fff;border-radius:4px>退卡</div></div><div class="pointer float_right" ng-click=orgChangeCtrl.clear() style="margin-top:101px;height:36px;width:96px;line-height:34px;text-align:center;font-size:14px;color:#999;border-radius:4px;border:1px solid #ddd">重置信息</div></div><div class=clear></div></div><div style="background:#fff;min-width:1326px;margin:20px;padding:29px 29px 28px 29px;border-radius:4px;border: 1px solid #E5E5E5"><div style=font-size:18px>绑定新卡</div><div style=margin-top:30px;height:41px;line-height:41px;color:#5E6D82;font-size:14px><div class=float_left>新卡</div><input class=float_left placeholder=请将新卡放置在感应器上 ng-model=orgChangeCtrl.newNo style="width:329px;height:39px;border:1px solid #C0CCDA;border-radius:4px;line-height:37px;padding-left:12px;margin:0 75px 0 12px"></div><div><div class="form_key float_left form_key_margin">是否需要工本费</div><img src=assets/images/bluecircle.png ng-show=orgChangeCtrl.isCost style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/radio_off.png ng-show=!orgChangeCtrl.isCost ng-click="orgChangeCtrl.isCost = true" style=height:18px class="float_left form_oImage_margin"><div class="float_left pointer" style="margin:12px 20px 0 0" ng-click="orgChangeCtrl.isCost = true">需要</div><img src=assets/images/radio_off.png ng-show=orgChangeCtrl.isCost ng-click="orgChangeCtrl.isCost = false" style=height:18px class="float_left form_oImage_margin"> <img src=assets/images/bluecircle.png ng-show=!orgChangeCtrl.isCost style=height:18px class="float_left form_oImage_margin"><div class="float_left pointer" style="margin:12px 10px 0 0" ng-click="orgChangeCtrl.isCost = false">不需要</div></div><div class=clear></div><div ng-show=orgChangeCtrl.isCost style=font-size:20px;margin-top:28px>支付结算</div><div ng-show=orgChangeCtrl.isCost class=pointer style=margin-top:14px;font-size:14px;color:#5E6D82><div class=float_left style=margin-right:15px>工本费</div><div class=float_left style=margin-top:-12px ng-repeat="payment in orgChangeCtrl.paymentArr" ng-click=orgChangeCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div><div class=clear></div><div class=pointer ng-click=orgChangeCtrl.sure() style=margin-top:35px;height:36px;width:96px;line-height:34px;text-align:center;background:#06cae9;font-size:14px;color:#fff;border-radius:4px>确认更换</div></div><div ng-show=orgChangeCtrl.showAuth_codeBox style=width:0;height:0;overflow:hidden><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code style=ime-mode:disabled class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=orgChangeCtrl.auth_code></div><div class=clear></div><div class=form_error_font></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=orgChangeCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=orgChangeCtrl.closePay()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgChangeCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=orgChangeCtrl.wordWARN title={{orgChangeCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgChangeCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>操作成功</div><div class=promptClose ng-click="orgChangeCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgChangeCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=orgChangeCtrl.wordERR title={{orgChangeCtrl.wordERR}}>22212</div><div class=promptClose ng-click="orgChangeCtrl.promptERR = false"></div></div></div></div></div>'), a.put("app/organization/swim/check.html", '<div class="contentBox noselect" style=min-width:1366px;background:#EDF0F2;font-weight:700 id=fdWorker ondragstart="return false"><!-- <div ng-include="\'components/header/header.html\'"></div> --><div style=min-width:1366px;background:#EDF0F2><div style="background:#fff;box-shadow: 0 1px 4px 0 rgba(0,0,0,0.4)"><div style="height:56px;line-height:56px;padding:0 20px;font-size:18px;color:#475669"><div class="float_left pointer" ui-sref=org-index style=width:33%><img class=float_left style="height:22px;margin:18px 10px 0 0" src="assets/images/page_left.png"><div class=float_left>返回</div></div><div class=float_left style=width:33%;text-align:center>场内运动情况</div></div></div><div class=clear></div><div style="min-width:1326px;margin:32px 40px;color:#475669;font-size:14px;border-radius:4px"><div><div class=float_left style=width:80%;height:58px;line-height:58px;font-size:18px;color:#fff><div class=float_left style=width:30%;background:#107ae9;text-align:center;line-height:57px><span>今天总消费人数:</span> <span style=font-size:24px;padding-left:14px ng-bind=orgCheckCtrl.data.allCount>888</span></div><div class=float_left style="width:70%;background:#48acf9;padding:0 72px 0 36px"><div class=float_left>场内人数:</div><div class=float_left style="font-size:24px;margin:0 14px" ng-bind=orgCheckCtrl.count>888</div><div class=float_left>【散客人数:</div><div class=float_left style="font-size:24px;margin:0 14px" ng-bind=orgCheckCtrl.data.noMemberCount>888</div><div class=float_left>/</div><div class=float_left style="margin:0 14px">刷卡人数:</div><div class=float_left style=font-size:24px ng-bind="orgCheckCtrl.data.memberCount+\'】\'">888</div><div class=float_right style=font-size:24px;padding-left:14px ng-bind=orgCheckCtrl.data.noEnterCount>888</div><div class=float_right>未进场人数:</div></div></div><div class=float_right style="height:58px;line-height:58px;font-size:16px;color:#333;background:#fff;padding:0 24px"><img ng-show=!orgCheckCtrl.enterFlag ng-click=orgCheckCtrl.showEnter(true) class=float_left style="margin:17px 10px 0 0;height:22px" src="assets/images/select_box.png"> <img ng-show=orgCheckCtrl.enterFlag ng-click=orgCheckCtrl.showEnter(false) class=float_left style="margin:17px 10px 0 0;height:22px" src="assets/images/select_box_on.png"><div class=float_left>仅显示未入场</div></div></div><div class=clear></div><!-- \n            <div style="font-size:22px;color:#475669">\n                <span style="color:#5E6D82;font-size:14px">今天总消费人数:</span>\n                <span ng-bind="orgCheckCtrl.data.allCount">888</span>\n                <span style="color:#5E6D82;font-size:14px">场内消费人数:</span>\n                <span ng-bind="orgCheckCtrl.count">888</span>\n                <span style="color:#5E6D82;font-size:14px">购票人数:</span>\n                <span ng-bind="orgCheckCtrl.data.noMemberCount">888</span>\n                <span style="color:#5E6D82;font-size:14px">会员卡人数:</span>\n                <span ng-bind="orgCheckCtrl.data.memberCount">888</span>\n                <span style="color:#5E6D82;font-size:14px">未进场人数:</span>\n                <span ng-bind="orgCheckCtrl.data.noEnterCount">888</span>\n            </div> --><table style="margin-top:32px;min-width:100%;color:#1f2d3d;box-shadow:0 0 6px 0 rgba(0,0,0,0.08)"><tr style=height:66px;line-height:64px;width:100%;font-size:17px;background:#fff;color:#333><td style=width:12%;padding-left:20px>入场时间</td><td style=width:11%;padding-left:20px>手环编号</td><td style=width:11%;padding-left:20px>手环内码</td><td style=width:11%;padding-left:20px>用户信息</td><td style=width:11%;padding-left:20px>消费时间</td><td style=width:11%;padding-left:20px>门票限时</td><td style=width:11%;padding-left:20px>消费方式</td><td style=width:11%;padding-left:20px>押金</td><td style=width:11%;padding-left:20px>操作员</td></tr><tr ng-repeat="voucher in orgCheckCtrl.vouchers" ng-style=voucher.select?orgCheckCtrl.tb:orgCheckCtrl.fb style=height:60px;line-height:58px;width:100%;font-size:16px;color:#666><td style=width:12%;padding-left:20px ng-bind="voucher.enterDate?(voucher.enterDate | date:\'yyyy-MM-dd HH:mm\'):\'暂未进场\'"></td><td style=width:11%;padding-left:20px ng-bind=voucher.No></td><td style=width:11%;padding-left:20px ng-bind=voucher.voucherNo></td><td style=width:11%;padding-left:20px ng-bind="voucher.memberName?voucher.memberName:\'暂无\'"></td><td ng-show=!voucher.overFlag style=width:11%;padding-left:20px ng-bind="voucher.time?(voucher.time+\'分钟\'):\'暂无\'"></td><td ng-show=voucher.overFlag style=width:11%;padding-left:20px;color:red ng-bind="voucher.time+\'分钟\'"></td><td style=width:11%;padding-left:20px ng-bind="voucher.limit?(voucher.limit+\'分钟\'):\'不限时\'"></td><td style=width:11%;padding-left:20px ng-bind=voucher.payment></td><td style=width:11%;padding-left:20px ng-bind=voucher.dep></td><td style=width:11%;padding-left:20px ng-bind="voucher.checkInWorkerName?voucher.checkInWorkerName:\'暂无\'">出场</td></tr><tr ng-show="orgCheckCtrl.length == 0" style=height:44px;line-height:42px;width:100%;font-size:13px><td style=text-align:center colspan=7>暂无信息</td></tr></table><pagination style="left:280px;margin:20px 30px 3px 0px" ng-if="orgCheckCtrl.pagination.numPages > 1" total-items=orgCheckCtrl.pagination.totalItems ng-model=orgCheckCtrl.pagination.page items-per-page=orgCheckCtrl.pagination.itemsPerPage max-size=orgCheckCtrl.pagination.maxSize boundary-links="{{orgCheckCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgCheckCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgCheckCtrl.pageChanged()></pagination></div></div></div>'), a.put("app/organization/swim/deal.html", '<div class="contentBox noselect" style=min-width:1366px;background:#EDF0F2;font-weight:700 id=fdWorker ondragstart="return false"><!-- <div ng-include="\'components/header/header.html\'"></div> --><div style=min-width:1366px;background:#EDF0F2><div style="background:#fff;box-shadow: 0 1px 4px 0 rgba(0,0,0,0.4)"><div style="height:56px;line-height:56px;padding:0 20px;font-size:18px;color:#475669"><div class="float_left pointer" ui-sref=org-index style=width:33%><img class=float_left style="height:22px;margin:18px 10px 0 0" src="assets/images/page_left.png"><div class=float_left>返回</div></div><div class=float_left style=width:33%;text-align:center>出场结算</div></div></div><div class=clear></div><div style="background:#fff;min-width:1326px;margin:20px;height:138px;padding:28px 28px 27px 28px;color:#475669;font-size:14px;border-radius:4px;border: 1px solid #E5E5E5"><div style=font-size:20px>请刷手环</div><div style=margin-top:20px><div class=float_left style=height:41px;line-height:41px;color:#5E6D82><div class=float_left>请刷手环</div><input id=voucher class=float_left style="border:1px solid #C0CCDA;border-radius:4px;width:329px;line-height:39px;margin:0 62px 0 12px;color:#1F2D3D;padding-left:10px" ng-model=orgDealCtrl.vNo placeholder="请将手环放置在感应器上"></div><div class="pointer float_right" ng-click=orgDealCtrl.clear() style="height:36px;width:96px;line-height:34px;text-align:center;font-size:14px;color:#999;border-radius:4px;border:1px solid #ddd">重置信息</div></div></div><div style="background:#fff;min-width:1326px;margin:20px;height:446px;padding:28px 28px 27px 28px;color:#475669;border-radius:4px;border: 1px solid #E5E5E5"><div style=font-size:20px>消费明细</div><table style="margin-top:20px;min-width:100%;border:solid #E0E6ED 1px;color:#1f2d3d"><tr style=height:44px;line-height:42px;width:100%;font-size:16px><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">手环表面码</td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">手环内码</td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">用户信息</td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">消费时间</td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">门票限时</td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">入场时间</td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">消费方式</td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px">押金</td></tr><tr ng-show=orgDealCtrl.ringNum style=height:44px;line-height:42px;width:100%;font-size:13px><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=orgDealCtrl.No></td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=orgDealCtrl.ringNum></td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=orgDealCtrl.name></td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="orgDealCtrl.longTime+\'分钟\'"></td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="orgDealCtrl.limitTime?(orgDealCtrl.limitTime+\'分钟\'):\'暂无\'"></td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="orgDealCtrl.enterDate | date:\'HH:mm\'"></td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind="orgDealCtrl.payWay+\'消费\'"></td><td style="width:12.5%;padding-left:10px;border:solid #E0E6ED;border-width:0px 1px 1px 0px" ng-bind=orgDealCtrl.refundPrice></td></tr><tr ng-show=!orgDealCtrl.ringNum style=height:44px;line-height:42px;width:100%;font-size:13px><td style=text-align:center colspan=7>暂无信息</td></tr></table><div style=font-size:20px;margin-top:28px>出场结算</div><div style=margin-top:20px;font-size:14px;color:#5E6D82><span>押金退还</span> <span style=margin-left:12px;color:#475669;font-size:18px ng-bind="\'￥\'+(orgDealCtrl.rFlag?orgDealCtrl.refundPrice:\'0\')">￥100</span></div><!--             <div ng-show="!orgDealCtrl.overFlag" style="margin-top:10px;font-size:14px;color:#5E6D82">\n                <span class="float_left">超时补费</span>\n                <span class="float_left" style="margin-left:16px;color:#475669;font-size:18px" ng-bind="\'￥\'+orgDealCtrl.overPrice">￥0</span>\n            </div> --><div ng-show=!orgDealCtrl.overFlag style=margin-top:10px;font-size:14px;color:#5E6D82><span class=float_left>退还方式</span> <span class=float_left style=margin-left:16px;color:#475669;font-size:18px ng-bind=orgDealCtrl.payWay>￥0</span></div><div ng-show=orgDealCtrl.overFlag style=margin-top:10px;font-size:14px;color:#f00;height:28px;line-height:28px><div class=float_left style=margin-right:16px;;font-size:14px;color:#5E6D82>超时补费</div><div class="float_left pointer" style=font-size:18px><div class=float_left ng-repeat="overtime in orgDealCtrl.overtimes" ng-click=orgDealCtrl.chooseOvertime(overtime)><div ng-show=overtime.choose style="border:1px solid #ff0000;border-radius:4px;padding:0 7px;color:#465669;margin-right:12px" ng-bind=overtime.price>￥50</div><div ng-show=!overtime.choose style="border:1px solid #c0ccd1;border-radius:4px;padding:0 7px;color:#465669;margin-right:12px" ng-bind=overtime.price>￥50</div></div><div ng-show="!orgDealCtrl.defindFlag && !orgDealCtrl.overPriceFlag" ng-click="orgDealCtrl.chooseOvertime(\'defind\')" class=float_left style="border:1px solid #c0ccd1;border-radius:4px;padding:0 7px;color:#465669">自定义金额</div><div ng-show=orgDealCtrl.defindFlag class=float_left style="border:1px solid #ff0000;border-radius:4px;padding:0 7px;color:#465669;width:108px"><div class=float_left>￥</div><input class=float_left style=width:30px;border:0 ng-model="orgDealCtrl.defindPrice"><div class=float_right ng-click=orgDealCtrl.sureOver() style=color:#06CAE9>确定</div></div><div ng-show=orgDealCtrl.overPriceFlag ng-click="orgDealCtrl.defindFlag=true;orgDealCtrl.overPriceFlag=false" class=float_left ng-bind="\'￥\'+orgDealCtrl.defindPrice" style="border:1px solid #ff0000;border-radius:4px;padding:0 7px;color:#465669;margin-right:12px">￥50</div></div></div><div class=clear></div><div style=margin-top:28px;font-size:24px;color:red><span ng-bind="\'需\'+orgDealCtrl.re">需退还</span> <span ng-show=!orgDealCtrl.overFlag style=margin-left:26px ng-bind="\'￥\'+(orgDealCtrl.rePayment == \'cash\'?orgDealCtrl.total:\'0\')">￥100</span> <span ng-show=orgDealCtrl.overFlag style=margin-left:26px ng-bind="\'￥\'+(orgDealCtrl.buyPayment == \'bail\'?orgDealCtrl.total:(orgDealCtrl.rePayment == \'cash\'?orgDealCtrl.total:\'0\'))">￥100</span></div><div style=margin-top:14px;font-size:14px;color:#5E6D82 ng-show=orgDealCtrl.overFlag><div class=float_left ng-bind="orgDealCtrl.re+\'方式\'" style=margin-right:15px>退还方式</div><div class=float_left style=margin-top:-12px ng-repeat="payment in orgDealCtrl.paymentArr" ng-click=orgDealCtrl.choosePayment(payment.value)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div><div class=clear></div><div class=pointer ng-bind="\'确认\'+orgDealCtrl.re" ng-click=orgDealCtrl.refund() style=margin-top:21px;height:36px;width:96px;line-height:34px;text-align:center;background:#06cae9;font-size:14px;color:#fff;border-radius:4px>确认退还</div></div><div ng-show=orgDealCtrl.showAuth_codeBox style=width:0;height:0;overflow:hidden><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=orgDealCtrl.auth_code ng-keypress=orgDealCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=orgDealCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=orgDealCtrl.closePay()></div></div></div></div><div class=bgGary ng-show=orgDealCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=orgDealCtrl.wordWARN title={{orgDealCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgDealCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind="orgDealCtrl.re+\'成功\'"></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgDealCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=orgDealCtrl.wordERR title={{orgDealCtrl.wordERR}}>22212</div></div></div></div></div>'), a.put("app/organization/swim/enter.html", '<div class="contentBox noselect" style=min-width:1366px;background:#EDF0F2;font-weight:700 id=fdWorker ondragstart="return false"><!-- <div ng-include="\'components/header/header.html\'"></div> --><div style=min-width:1366px;background:#fff><div style="background:#fff;box-shadow: 0 1px 4px 0 rgba(0,0,0,0.4)"><div style="height:56px;line-height:56px;padding:0 20px;font-size:18px;color:#475669"><div class="float_left pointer" ui-sref=org-index style=width:33%><img class=float_left style="height:22px;margin:18px 10px 0 0" src="assets/images/page_left.png"><div class=float_left>返回</div></div><div class=float_left style=width:33%;text-align:center>会员入场</div></div></div><div style="background:#EDF0F2;width:100%;margin:2px auto;padding:30px;color:#333"><div class=float_left style="border-right:1px solid #e9e9e9;padding-right:30px;width:50%"><div style=font-size:22px>读取会员信息</div><div><input class="pointer float_left" id=voucher ng-style=orgEnterCtrl.div2Width style=ime-mode:disabled;line-height:58px;margin-top:24px;color:#1F2D3D;padding-left:20px placeholder=请将用户的实体卡或支付码放置在感应器 ng-model="orgEnterCtrl.codeName"><div class="pointer float_right" ng-click=orgEnterCtrl.clear() style=background:#06cae9;height:32px;width:80px;line-height:34px;text-align:center;font-size:14px;color:#fff;border-radius:4px;margin-top:35px>重置信息</div></div><div class=clear></div><div style=font-size:22px;margin-top:30px>会员信息</div><div style=margin-top:24px;height:526px;padding:36px;background:#fff><div class=float_left style=margin-right:36px><img ng-show="!orgEnterCtrl.sheFlag && !orgEnterCtrl.photoFlag" ng-click=orgEnterCtrl.getMedia() style=height:400px;width:400px src="assets/images/p1.png"><div ng-show="orgEnterCtrl.sheFlag && !orgEnterCtrl.photoFlag" ng-click=orgEnterCtrl.getPhoto() style=height:400px;width:400px;background:#000><video ng-show=!orgEnterCtrl.cameraFlag height=400px width=400px autoplay></video><canvas class=float_left height=400px width=400px ng-show=orgEnterCtrl.cameraFlag id=canvas1></canvas></div><div ng-show="orgEnterCtrl.photoFlag && !orgEnterCtrl.smallFlag && !orgEnterCtrl.bigFlag" style=height:400px;width:400px;overflow:hidden><img id=img src="{{orgEnterCtrl.img}}"></div><div ng-show="orgEnterCtrl.photoFlag && orgEnterCtrl.bigFlag" style=height:400px;width:400px;overflow:hidden><img style=height:400px;width:400px src="{{orgEnterCtrl.img}}"></div><div ng-show="orgEnterCtrl.photoFlag && orgEnterCtrl.smallFlag" style=height:400px;width:400px;overflow:hidden><img style=height:428px;width:1085px src="{{orgEnterCtrl.img}}"></div><div><div ng-show=!orgEnterCtrl.sheFlag class="pointer float_left" ng-click=orgEnterCtrl.getMedia() style="background:#06cae9;margin:25px 10px 0 150px;height:32px;width:80px;line-height:32px;text-align:center;font-size:14px;color:#fff;border-radius:4px">拍照</div><div ng-show=orgEnterCtrl.sheFlag class="pointer float_left" ng-click=orgEnterCtrl.getPhoto() style="background:#06cae9;margin:25px 10px 0 150px;height:32px;width:80px;line-height:32px;text-align:center;font-size:14px;color:#fff;border-radius:4px">拍照</div></div></div><div class=float_left style=font-size:20px><div style=height:33px;line-height:33px><div class=float_left ng-bind=orgEnterCtrl.name>姓名</div></div><div style=height:38px;line-height:38px;margin-top:17px><div class=float_left>卡片状态：</div><div class=float_left ng-bind="orgEnterCtrl.freFlag?\'冻结中\':(orgEnterCtrl.overDateFlag?\'已过期\':\'可使用\')" style="padding:0 5px;color:#fe9168;background:#fff9ec"></div></div><div style=height:38px;line-height:38px;margin-top:10px><div class=float_left>手机号码：</div><div class=float_left ng-bind="orgEnterCtrl.tel?orgEnterCtrl.tel:\'暂无手机号\'"></div></div><div style=height:38px;line-height:38px;margin-top:10px><div class=float_left>会员卡号：</div><div class=float_left ng-bind=orgEnterCtrl.cardNo></div></div><div style=height:38px;line-height:38px;margin-top:10px><div class=float_left>办卡日期：</div><div class=float_left ng-bind="orgEnterCtrl.cardDate | date:\'yyyy-MM-dd\'"></div></div><div style=height:38px;line-height:38px;margin-top:10px><div class=float_left>过期时间：</div><div ng-show=orgEnterCtrl.overDateFlag class=float_left ng-bind="orgEnterCtrl.endDate | date:\'yyyy-MM-dd\'" style="padding:0 5px;color:#fe9168;background:#fff9ec;font-size:20px"></div><div ng-show=!orgEnterCtrl.overDateFlag class=float_left ng-bind="orgEnterCtrl.endDate | date:\'yyyy-MM-dd\'"></div></div><div style=height:38px;line-height:38px;margin-top:10px><div class=float_left>剩余时长：</div><div ng-show=orgEnterCtrl.threeFlag class=float_left ng-bind="orgEnterCtrl.cardType==\'次数卡\'?orgEnterCtrl.leftTime :orgEnterCtrl.leftDay" style=color:#f00;font-size:38px></div><div ng-show=!orgEnterCtrl.threeFlag class=float_left ng-bind="orgEnterCtrl.cardType==\'次数卡\'?orgEnterCtrl.leftTime :orgEnterCtrl.leftDay"></div></div><div style=height:38px;line-height:38px;margin-top:10px><div class=float_left>单次限时：</div><div class=float_left ng-bind=orgEnterCtrl.limitTime></div></div><div style=height:38px;line-height:38px;margin-top:10px><div class=float_left>当天限次：</div><div class=float_left ng-bind=orgEnterCtrl.dayLimit></div></div></div><div class=float_right ng-bind=orgEnterCtrl.cardName style="font-size:20px;padding:0px 5px;color:#08be61;background:#eefbf1"></div></div><div style=font-size:22px;margin-top:30px>绑定手环</div><div style=margin-top:24px;width:100%;padding:36px;background:#fff><div style=font-size:14px;color:#999>绑定手环</div><input id=ring style=ime-mode:disabled;width:100%;line-height:40px;margin-top:24px;color:#1F2D3D;padding-left:20px placeholder=请将手环放置在感应器上 ng-model="orgEnterCtrl.vNo"><div class=clear></div><div ng-show=orgEnterCtrl.deposit style=margin-top:10px><img ng-show=orgEnterCtrl.fFlag ng-click="orgEnterCtrl.fFlag = false" style=margin-right:3px src=assets/images/select_box_on.png class="float_left"> <img ng-show=!orgEnterCtrl.fFlag ng-click="orgEnterCtrl.fFlag = true" style=margin-right:3px src=assets/images/select_box.png class="float_left"><div class=float_left ng-click="orgEnterCtrl.fFlag = !orgEnterCtrl.fFlag" ng-bind="\'需要\'+orgEnterCtrl.deposit+\'元押金\'"></div></div><div class=clear></div></div></div><div class=float_left style=width:50%;padding-left:30px><div style=font-size:22px><span>消费记录</span> <span ng-show="orgEnterCtrl.name != \'暂无信息\'" ng-bind="\'自10月26日起共消费\'+orgEnterCtrl.pagination.totalItems+\'次\'"></span></div><table style=margin-top:30px;width:100%;border:0;color:#666><tr style=height:44px;line-height:21px;width:100%;font-size:18px;color:#333><td style=width:25%;border:0>办理时间</td><td style=width:25%;border:0>表面码</td><td style=width:25%;border:0>内码</td><td style=width:25%;border:0>柜员</td></tr><tr ng-repeat="voucherHistory in orgEnterCtrl.voucherHistories" style=height:44px;line-height:21px;width:100%;font-size:16px><td style=width:25%;border:0 ng-bind="voucherHistory.createDate | date:\'yyyy-MM-dd HH:mm\'"></td><td style=width:25%;border:0 ng-bind=voucherHistory.No></td><td style=width:25%;border:0 ng-bind=voucherHistory.voucherNo></td><td style=width:25%;border:0 ng-bind=voucherHistory.workerName></td></tr></table><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="orgEnterCtrl.pagination.numPages > 1" total-items=orgEnterCtrl.pagination.totalItems ng-model=orgEnterCtrl.pagination.page items-per-page=orgEnterCtrl.pagination.itemsPerPage max-size=orgEnterCtrl.pagination.maxSize boundary-links="{{orgEnterCtrl.pagination.numPages > 2}}" rotate=false num-pages=orgEnterCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=orgEnterCtrl.pageChanged()></pagination></div><div class=clear></div></div></div><div ng-show=orgEnterCtrl.showAuth_codeBox style=width:0;height:0;overflow:hidden><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=orgEnterCtrl.auth_code ng-keypress=orgEnterCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div><div class=bgGary ng-show="orgEnterCtrl.cFlag && !orgEnterCtrl.freezeFlag"><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">发起支付</div><img src=assets/images/close.png class="float_right pointer" ng-click=orgEnterCtrl.clear()></div><div class=clear></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">支付金额</div><div class="form_value float_left" style=border:none;color:#ff4949;margin-left:-10px;font-size:14px><span>￥</span> <span style=font-size:18px ng-bind=orgEnterCtrl.bail></span></div></div><div class=clear></div></div><div style="margin-top: 10px"><div><div class="form_key float_left form_key_margin">支付方式</div><div style="width:350px;float: left"><div class=singleChoose_option style="float: none" ng-repeat="payment in orgEnterCtrl.paymentArr" ng-click=orgEnterCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div></div><div class=clear></div></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click=orgEnterCtrl.banli()>确认支付</div><div class="button_normal float_right" ng-click=orgEnterCtrl.clear()>取消</div><div class=clear></div></div></div></div></div><!-- 二次确认 --><div class=bgGary ng-show=orgEnterCtrl.nwFlag><div class=middle><div id=box class=center style="box-shadow:0 2px 8px 0 rgba(0,0,0,0.20);border-radius:4px;width:416px;height:228px;background:#fff;padding:35px 36px 40px 36px"><div><img style=height:36px src=assets/images/nw.png class="float_left"><div class=float_left style=height:36px;line-height:36px;font-size:18px;color:#333;margin-left:10px>请注意</div></div><div class=clear></div><div style=height:21px;line-height:21px;font-size:16px;color:#666;margin-left:46px>此卡已被冻结，继续入场会解冻，确认继续入场吗</div><div><div class="pointer float_right" ng-click=orgEnterCtrl.clear() style="margin-top:65px;height:32px;width:96px;line-height:32px;text-align:center;font-size:14px;color:#666;border-radius:4px;border:1px solid #d9d9d9">取消</div><div class="pointer float_right" ng-click=orgEnterCtrl.continue() style="margin-top:65px;height:32px;width:96px;line-height:32px;text-align:center;font-size:14px;color:#666;border-radius:4px;border:1px solid #d9d9d9;margin-right:10px">确认</div></div></div></div></div><div class=bgGary ng-show=orgEnterCtrl.freezeFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgEnterCtrl.clear()"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left ng-bind=orgEnterCtrl.wordERR style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>此账号已被冻结，继续入场可以解除冻结.</div></div><div class=clear></div></div><div class=form_submit><div class="button_normal float_right" ng-click="orgEnterCtrl.freezeFlag = false">确定</div><div class=clear></div></div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=orgEnterCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=float_right ng-bind=orgEnterCtrl.second style=margin:12px></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgEnterCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=orgEnterCtrl.wordWARN title={{orgEnterCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgEnterCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>成功</div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgEnterCtrl.saveOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>相片保存成功</div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgEnterCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=orgEnterCtrl.wordERR title={{orgEnterCtrl.wordERR}}>22212</div><div class=promptClose ng-click="orgEnterCtrl.promptERR = false"></div></div></div></div></div>'),
            a.put("app/organization/swim/index.html", '<!-- <div ng-include="\'components/header/header.html\'"></div> --><div style="padding:52px 73px;color:#fff;height:100%;width:100%;background:#002129"><div class=float_left style="font-size:40px;text-shadow: 1px 1px 2px" ng-bind=orgIndexCtrl.title>呼啦场馆游泳健身系统</div><img class="float_right pointer" src=assets/images/arr.png style="margin-top:8px"><div class="float_right pointer" style=font-size:18px;margin-right:12px ng-click="orgIndexCtrl.deleteFlag = true" ng-bind=orgIndexCtrl.name>管理员</div><div ng-show="orgIndexCtrl.venues.length != 1" class="float_right pointer" ng-class="{\'select\':!orgIndexCtrl.selectVenueFlag,\'select_foucs\':orgIndexCtrl.selectVenueFlag}" ng-click="orgIndexCtrl.selectVenueFlag = !orgIndexCtrl.selectVenueFlag" style="margin:-8px 10px 0 0px"><div class="form_down_icon form_width_180 form_select_value_choose" style=color:#fff ng-bind=orgIndexCtrl.vName></div><div class="form_select_div form_width_180" ng-show=orgIndexCtrl.selectVenueFlag><div ng-click=orgIndexCtrl.chooseVenue(venue) ng-repeat="venue in orgIndexCtrl.venues" ng-bind=venue.name class="select_cell pointer" onclick="event.cancelBubble = true"></div></div></div><div class=clear></div><div style=color:#fff;font-size:24px><div style="margin:100px auto 0 auto;width:980px"><div class="float_left pointer" style=width:140px;text-align:center ui-sref=org-muti><img ng-mouseover="orgIndexCtrl.flag1 = true" ng-show=!orgIndexCtrl.flag1 src=assets/images/tickets.png style="width:140px;height:140px"> <img ng-mouseleave="orgIndexCtrl.flag1 = false" ng-show=orgIndexCtrl.flag1 src=assets/images/tickets.p.png style="width:140px;height:140px"><div style=margin-top:25px>购票</div></div><div class="float_left pointer" style=width:140px;text-align:center;margin-left:140px ui-sref=org-enter><img ng-mouseover="orgIndexCtrl.flag2 = true" ng-show=!orgIndexCtrl.flag2 src=assets/images/vip.png style="width:140px;height:140px"> <img ng-mouseleave="orgIndexCtrl.flag2 = false" ng-show=orgIndexCtrl.flag2 src=assets/images/vip.p.png style="width:140px;height:140px"><div style=margin-top:25px>会员入场</div></div><div class="float_right pointer" style=width:140px;text-align:center ui-sref=org-change><img ng-mouseover="orgIndexCtrl.flag3 = true" ng-show=!orgIndexCtrl.flag3 src=assets/images/changecard.png style="width:140px;height:140px"> <img ng-mouseleave="orgIndexCtrl.flag3 = false" ng-show=orgIndexCtrl.flag3 src="assets/images/changecard 2.png" style="width:140px;height:140px"><div style=margin-top:25px>退-换卡</div></div><div class="float_right pointer" style=width:140px;text-align:center;margin-right:140px ui-sref=org-ring><img ng-mouseover="orgIndexCtrl.flag7 = true" ng-show=!orgIndexCtrl.flag7 src=assets/images/ringnormal.png style="width:140px;height:140px"> <img ng-mouseleave="orgIndexCtrl.flag7 = false" ng-show=orgIndexCtrl.flag7 src=assets/images/ring.png style="width:140px;height:140px"><div style=margin-top:25px>换手环</div></div></div><div class=clear></div><div style="margin:50px auto 0 auto;width:980px"><div class="float_left pointer" style=width:140px;text-align:center ui-sref=org-deal><img ng-mouseover="orgIndexCtrl.flag4 = true" ng-show=!orgIndexCtrl.flag4 src=assets/images/money.png style="width:140px;height:140px"> <img ng-mouseleave="orgIndexCtrl.flag4 = false" ng-show=orgIndexCtrl.flag4 src=assets/images/money.p.png style="width:140px;height:140px"><div style=margin-top:25px>出场结账</div></div><div class="float_left pointer" style=width:140px;text-align:center;margin-left:140px ui-sref=org-shop><img ng-mouseover="orgIndexCtrl.flag5 = true" ng-show=!orgIndexCtrl.flag5 src=assets/images/buy.png style="width:140px;height:140px"> <img ng-mouseleave="orgIndexCtrl.flag5 = false" ng-show=orgIndexCtrl.flag5 src=assets/images/buy.p.png style="width:140px;height:140px"><div style=margin-top:25px>购买产品</div></div><div class="float_right pointer" style=width:140px;text-align:center ui-sref=csd-vip-table><img ng-mouseover="orgIndexCtrl.flag8 = true" ng-show=!orgIndexCtrl.flag8 src=assets/images/vipcard.png style="width:140px;height:140px"> <img ng-mouseleave="orgIndexCtrl.flag8 = false" ng-show=orgIndexCtrl.flag8 src=assets/images/vipcardG.png style="width:140px;height:140px"><div style=margin-top:25px>会员卡</div></div><div class="float_right pointer" style=width:140px;text-align:center;margin-right:140px ui-sref=org-check><img ng-mouseover="orgIndexCtrl.flag6 = true" ng-show=!orgIndexCtrl.flag6 src=assets/images/find.png style="width:140px;height:140px"> <img ng-mouseleave="orgIndexCtrl.flag6 = false" ng-show=orgIndexCtrl.flag6 src=assets/images/find.p.png style="width:140px;height:140px"><div style=margin-top:25px>运动人数</div></div></div></div><div class=clear></div><a href=/checkstand/finance/cashall target=_block style="color:red;font-size:24px;position:absolute;bottom:100px;margin:0px;float:left;left: 40px">其他操作></a></div><div class=bgGary ng-show=orgIndexCtrl.deleteFlag><div class=middle><div id=box class="form_div center"><div class=form_padding><div><div class="form_title float_left">注意</div><img src=assets/images/close.png class="float_right pointer" ng-click="orgIndexCtrl.deleteFlag = false"></div><div class=clear></div><div class=form_first_view><img class=float_left style=height:25px src="assets/images/circlewarn.png"><div class=float_left style=width:350px;margin-left:20px;line-height:20px;color:#8181b4>是否确定退出？</div></div><div class=clear></div></div><div class=form_submit><div class="button2_normal float_right form_create_view" ng-click="orgIndexCtrl.deleteFlag = false">不退了</div><div class="button_normal float_right" ng-click=orgIndexCtrl.logout()>确认退出</div><div class=clear></div></div></div></div></div>'), a.put("app/organization/swim/membership-card.html", '<div class=contentBox><!-- <div ng-include="\'components/header/header.html\'"></div> --><div style=min-width:1366px><div style="background:#fff;box-shadow: 0 1px 4px 0 rgba(0,0,0,0.4)"><div style="height:58px;line-height:56px;padding:0 20px;font-size:18px;color:#475669"><div class="float_left pointer" style=width:33% ui-sref=org-index><img class=float_left style="height:22px;margin:19px 10px 0 0" src="assets/images/page_left.png"><div class=float_left>返回</div></div><div class=float_left style=width:33%;text-align:center>会员卡列表</div></div></div><!-- 会员卡列表开始 --><div class=men-card><!-- 搜索框开始 --><div class=men-card-form><!-- <form action="" method="" id="" name="" class="clearfloat"> --><input placeholder=会员名/手机号/卡号 ng-model=csdVipTableCtrl.mix ng-keypress="csdVipTableCtrl.enterCheck($event)"> <img src=../assets/images/search.png width=20 height=20 ng-click="csdVipTableCtrl.mySearch()"><!-- </form> --></div><!-- 搜索框结束 --><!-- 会员卡列表开始 --><ul class=tr-table><li class=tr-head><ul class=clearfloat><li class=tr-li1><span class=tr-b-right>姓名</span></li><li class=tr-li2><span class=tr-b-right>手机号</span></li><li class=tr-li2><span class=tr-b-right>实体卡号</span></li><li class=tr-li2><span class=tr-b-right>会员卡名称</span></li><li class=tr-li2><span class=tr-b-right>剩余期限</span></li><li class=tr-li2><span class=tr-b-right>过期时间</span></li><li class=tr-li2><span class=tr-b-right>所属会员</span></li><li class=tr-li3><span>操作</span></li></ul></li><li class=tr-content><ul class="clearfloat tr-control" ng-repeat="memberService in csdVipTableCtrl.memberServices"><li class=tr-li1><p class="tr-b-right overflow-hidden clearfloat"><span class=tr-name ng-bind=memberService.name title={{memberService.name}}></span> <span class=tr-hint1 ng-show=memberService.isFreeze>冻结中</span> <span class=tr-hint2 ng-hide=memberService.isActive>未激活</span> <span class=tr-hint2 ng-show=memberService.isEnd>已过期</span></p></li><li class="tr-li2 tr-line-height"><p class="tr-b-right overflow-hidden" ng-bind=memberService.tel title={{memberService.tel}}></p></li><li class="tr-li2 tr-line-height"><p class="tr-b-right overflow-hidden clearfloat"><span class=tr-card ng-bind=memberService.serviceNo title={{memberService.serviceNo}}></span></p></li><li class="tr-li2 tr-line-height"><p class="tr-b-right overflow-hidden" ng-bind=memberService.service.name title={{memberService.service.name}}></p></li><li class="tr-li2 tr-line-height"><p class="tr-b-right overflow-hidden clearfloat"><span class=tr-number1 ng-bind="memberService.valueLeft ? memberService.valueLeft : \'暂无\'" title="{{memberService.valueLeft ? memberService.valueLeft : \'暂无\'}}"></span></p></li><li class="tr-li2 tr-line-height"><p class="tr-b-right overflow-hidden clearfloat"><span class=tr-time1 ng-bind="memberService.endDate?(memberService.endDate | date:\'yyyy-MM-dd\'):\'暂未激活\'" title="{{memberService.endDate?(memberService.endDate | date:\'yyyy-MM-dd\'):\'暂未激活\'}}"></span> <span class=tr-time2 ng-show=memberService.endDate ng-click=csdVipTableCtrl.showPostponeCard(memberService._id)>延期</span></p></li><li class="tr-li2 tr-line-height"><p class="tr-b-right overflow-hidden" ng-bind="memberService._member.name+\'(\'+memberService._member.memberNo+\')\'" title="{{memberService._member.name+\'(\'+memberService._member.memberNo+\')\'}}"></p></li><li class="tr-li3 tr-line-height"><p><span class=tr-span-oactive ng-click=csdVipTableCtrl.showEdit(memberService)>编辑</span> <span ng-click=csdVipTableCtrl.showChangeCard(memberService._id)>换卡</span><!-- <span ng-click="csdVipTableCtrl.showReissueCard()">补卡</span> --> <span ng-click=csdVipTableCtrl.showFreezeCard(memberService._id)>冻结</span> <span ng-click=csdVipTableCtrl.showChangeName(memberService._id)>过户</span></p></li></ul></li></ul><!-- 会员卡列表结束 --><pagination style="left:280px;margin:20px 30px 3px 0" ng-if="csdVipTableCtrl.pagination.numPages > 1" total-items=csdVipTableCtrl.pagination.totalItems ng-model=csdVipTableCtrl.pagination.page items-per-page=csdVipTableCtrl.pagination.itemsPerPage max-size=csdVipTableCtrl.pagination.maxSize boundary-links="{{csdVipTableCtrl.pagination.numPages > 2}}" rotate=false num-pages=csdVipTableCtrl.pagination.numPages previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo; ng-change=csdVipTableCtrl.pageChanged()></pagination></div></div><!-- 会员卡列表结束 --><!-- 背景蒙版开始 --><div class=edit-information ng-show=csdVipTableCtrl.menberBg></div><!-- 背景蒙版结束 --><!-- 编辑信息开始 --><div class=edit-content ng-show=csdVipTableCtrl.edit><form name=editForm novalidate><div class="edit-colse clearfloat"><span>编辑信息</span> <img src=../assets/images/close.png width=15 height=15 ng-click="csdVipTableCtrl.close()"></div><div class=edit-form><p><label>姓名：</label><input name=editName ng-model=csdVipTableCtrl.showMemberService.name ng-maxlength=10 required></p><p class=prompt-p><!-- <p ng-show="editForm.editName.$dirty && editForm.editName.$invalid" > --><span ng-show=editForm.editName.$error.required>姓名是必须的</span> <span ng-show=editForm.editName.$error.maxlength>长度不能大于10</span><!-- </p> --></p><p><label>手机号码：</label><input name=editMobile ng-model=csdVipTableCtrl.showMemberService.tel ng-pattern="/^1([38]\\d|5[0-35-9]|7[3678])\\d{8}$/" required></p><p class=prompt-p><span ng-show=editForm.editMobile.$error.required>手机号码是必须的</span> <span ng-show=editForm.editMobile.$error.pattern>手机号码输入不正确</span></p><!-- <p>\n                    <label>身份证号：</label>\n                    <input type="text" name="editIdCard" ng-model="csdVipTableCtrl.memberService.tel" />\n                </p> --></div><div class="edit-button clearfloat"><input type=submit class=edit-btn-sure ng-click=csdVipTableCtrl.update() ng-disabled="editForm.editName.$dirty && editForm.editName.$invalid || editForm.editMobile.$dirty && editForm.editMobile.$invalid" value="确定"> <span class=edit-btn-cancel ng-click=csdVipTableCtrl.close()>取消</span></div></form></div><!-- 编辑信息结束 --><!-- 换卡信息开始 --><div class=change-card ng-show=csdVipTableCtrl.changeCard><!-- <form name="changeForm" novalidate> --><div class="change-colse clearfloat"><span>换卡</span> <img src=../assets/images/close.png width=15 height=15 ng-click="csdVipTableCtrl.close()"></div><div class=change-form><p><label class=ed-label>新卡：</label><input placeholder=请将新卡放置在感应器上 ng-model=csdVipTableCtrl.showMemberService.cardNo autofocus id=myCardNo name=changeInput class="edit-o-input1"></p><div class="need-cost clearfloat"><b>工本费：</b> <img src=../assets/images/radio_on.png width=16 height=16 ng-show="csdVipTableCtrl.showMemberService.isCost"> <img src=../assets/images/radio_off.png width=16 height=16 ng-click="csdVipTableCtrl.showMemberService.isCost = true" ng-show="!csdVipTableCtrl.showMemberService.isCost"> <span ng-click="csdVipTableCtrl.showMemberService.isCost = true">需要</span> <img src=../assets/images/radio_off.png width=16 height=16 ng-click="csdVipTableCtrl.showMemberService.isCost = false" ng-show="csdVipTableCtrl.showMemberService.isCost"> <img src=../assets/images/radio_on.png width=16 height=16 ng-show="!csdVipTableCtrl.showMemberService.isCost"> <span ng-click="csdVipTableCtrl.showMemberService.isCost = false">不需要</span><!-- <img src="{{csdVipTableCtrl.isCost2 ? \'../assets/images/radio_on.png\':\'../assets/images/radio_off.png\' }}" width="18" height="18" ng-click="csdVipTableCtrl.costOf2()" /> --><!-- <span ng-click="csdVipTableCtrl.isCost2 = !csdVipTableCtrl.isCost2">不需要</span> --></div><p class=change-book ng-show=csdVipTableCtrl.showMemberService.isCost><label>工本费用：</label>20元</p><div class="o-payment clearfloat" ng-show=csdVipTableCtrl.showMemberService.isCost><h4>支付方式：</h4><ul class=clearfloat><li ng-repeat="payment in csdVipTableCtrl.payments" ng-click=csdVipTableCtrl.choosePayment(payment)><span class="{{payment.img}} pay-choose-img"></span> <span ng-bind=payment.name></span></li></ul></div><div class="change-button clearfloat"><input type=submit class=change-btn-sure ng-click=csdVipTableCtrl.changeBtnSure() value=确定> <span class=change-btn-cancel ng-click=csdVipTableCtrl.close()>取消</span></div></div><!-- </form> --></div><!-- 换卡信息结束 --><!-- 延期开始 --><div class=change-card ng-show=csdVipTableCtrl.postponeCard><form novalidate><div class="change-colse clearfloat"><span>延期</span> <img src=../assets/images/close.png width=15 height=15 ng-click="csdVipTableCtrl.close()"></div><div class=change-form><p><label>延期天数：</label><input id=postponeInp autofocus ng-model="csdVipTableCtrl.showMemberService.value"></p></div><div class="change-button clearfloat"><span class=change-btn-sure ng-click=csdVipTableCtrl.postponeCardSure()>确定</span> <span class=change-btn-cancel ng-click=csdVipTableCtrl.close()>取消</span></div></form></div><!-- 延期结束 --><!-- 冻结卡信息开始 --><div class="change-card change-card1" ng-show=csdVipTableCtrl.freezeCard><form method="" action="" name="" novalidate><div class="change-colse clearfloat"><span>冻结</span> <img src=../assets/images/close.png width=15 height=15 ng-click="csdVipTableCtrl.close()"></div><div class=change-form><p class="clearfloat change-form-p"><label>冻结日期：</label><!-- <input type="text" placeholder="请选择冻结到哪天" /> --><span class=freeze-date><span style="{{csdVipTableCtrl.showChangeDate==\'请选择冻结到哪天\'?\'color: #999;\':\'\'}}" ng-bind="csdVipTableCtrl.showChangeDate==\'请选择冻结到哪天\'?\'请选择冻结到哪天\':(csdVipTableCtrl.showChangeDate | date:\'yyyy-MM-dd\')" class=show-date></span> <img src=../assets/images/icon_time@2x.png width=24 height=24 ng-click="csdVipTableCtrl.changeDateBox=!csdVipTableCtrl.changeDateBox"></span><div ng-show=csdVipTableCtrl.changeDateBox class=change-form-date><datetimepick class=ng-isolate-scope ng-close=csdVipTableCtrl.closeChangeDateBox() ng-date=csdVipTableCtrl.changeDate></datetimepick></div></p></div><div class="change-button clearfloat"><span class=change-btn-sure ng-click=csdVipTableCtrl.dongBtn()>确定</span> <span class=change-btn-cancel ng-click=csdVipTableCtrl.close()>取消</span></div></form></div><!-- 冻结卡信息结束 --><!-- 过户信息开始 --><div class=change-card ng-show=csdVipTableCtrl.changeName><form name=changeNameForm novalidate><div class="change-colse clearfloat"><span>过户</span> <img src=../assets/images/close.png width=15 height=15 ng-click="csdVipTableCtrl.close()"></div><div class=change-form><p><label>过户至：</label><input placeholder=请输入手机号 autofocus ng-change=csdVipTableCtrl.searchMember() id=changeMemberTel ng-model=csdVipTableCtrl.showMemberService.tel ng-pattern="/^1([38]\\d|5[0-35-9]|7[3678])\\d{8}$/" required name="changeNameFormInput"></p><p class=prompt-p ng-hide=csdVipTableCtrl.showMemberService._toMemberName><span ng-show=changeNameForm.changeNameFormInput.$error.required>手机号码是必须的</span> <span ng-show=changeNameForm.changeNameFormInput.$error.pattern>手机号码输入不正确</span></p><p class=prompt-p ng-show=csdVipTableCtrl.showMemberService._toMemberName ng-bind="\'过户至：\'+csdVipTableCtrl.showMemberService._toMemberName"></p></div><div class="change-button clearfloat"><input type=submit class=change-btn-sure ng-click=csdVipTableCtrl.transferCard() value="确定"> <span class=change-btn-cancel ng-click=csdVipTableCtrl.close()>取消</span></div></form></div><!-- 过户卡信息结束 --></div><!-- 二次预定确认提示 --><div class=bgGary ng-show=csdVipTableCtrl.againCheckBox><div class=middle><div id=box class="promptCheck center"><div class="checkWord top20">是否确认操作？</div><div class=top20><div class="chooseBtn left20 pointer" ng-click=csdVipTableCtrl.otherPay()>确认</div><div class="unChooseBtn left10 pointer" ng-click="csdVipTableCtrl.againCheckBox=false">取消</div></div></div></div></div><!-- 扫描二维码提示 --><div ng-show=csdVipTableCtrl.promptPay><div class=bgGary><div class=middle><input class=hiddenBox id=auth_code ng-model=csdVipTableCtrl.auth_code ng-keypress=csdVipTableCtrl.auth_codePay($event)><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=csdVipTableCtrl.wordPay>22212</div><div class=promptClose ng-click=csdVipTableCtrl.closePrompt()></div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=csdVipTableCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord ng-bind=csdVipTableCtrl.wordOK></div><!-- <div class="promptClose" ng-click="csdVipTableCtrl.closePrompt()"></div> --></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=csdVipTableCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=csdVipTableCtrl.wordERR title={{csdVipTableCtrl.wordERR}}></div><div class=promptClose ng-click=csdVipTableCtrl.closePrompt()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=csdVipTableCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=csdVipTableCtrl.wordWARN title={{csdVipTableCtrl.wordWARN}}></div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), a.put("app/organization/swim/muti.html", '<div class="contentBox noselect" style=min-width:1366px;background:#EDF0F2;font-weight:700 id=fdWorker ondragstart="return false"><!-- <div ng-include="\'components/header/header.html\'"></div> --><div style=min-width:1366px;background:#EDF0F2><div style="background:#fff;box-shadow: 0 1px 4px 0 rgba(0,0,0,0.4)"><div style="height:58px;line-height:56px;padding:0 20px;font-size:18px;color:#475669"><div class="float_left pointer" ui-sref=org-index style=width:33%><img class=float_left style="height:22px;margin:19px 10px 0 0" src="assets/images/page_left.png"><div class=float_left>返回</div></div><div class=float_left style=width:33%;text-align:center>多张票</div></div></div><div style="background:#fff;min-width:1326px;margin:20px;padding:29px 29px 28px 29px;border-radius:4px;border: 1px solid #E5E5E5"><div class="float_left pointer" ng-repeat="ticket in orgMutiCtrl.tickets" style=margin-right:12px><div ng-show=ticket.isChoose style=background-image:url(assets/images/ticket.png);height:94px;width:183px><div class=float_left style=width:150px;height:94px;text-align:center;line-height:94px;color:#fff;font-size:18px ng-bind=ticket.name>成人票</div></div><div ng-show=!ticket.isChoose ng-click=orgMutiCtrl.choose(ticket) style=background-image:url(assets/images/unticket.png);height:94px;width:183px><div class=float_left style=width:150px;height:94px;text-align:center;line-height:94px;color:#475669;font-size:18px ng-bind=ticket.name>成人票</div></div></div><div class=clear></div><div style=margin-top:14px;color:#99A9BF;font-size:14px>按方向键切换选择门票</div><div style=margin-top:30px;height:41px;line-height:41px;color:#5E6D82;font-size:14px><div class=float_left>单张售价</div><div class=float_left style="width:200px;height:39px;border:1px solid #C0CCDA;border-radius:4px;line-height:37px;padding-left:12px;margin:0 75px 0 12px" ng-bind=orgMutiCtrl.ticketPrice>100元</div><div class=float_left>门票时间</div><div class=float_left style="width:200px;height:39px;border:1px solid #C0CCDA;border-radius:4px;line-height:37px;padding-left:12px;margin:0 75px 0 12px" ng-bind="orgMutiCtrl.ticketLimit?(orgMutiCtrl.ticketLimit+\'分钟\'):\'不限时间\'">100元</div><div class=float_left>门票场次</div><div class=float_left style="width:200px;height:39px;border:1px solid #C0CCDA;border-radius:4px;line-height:37px;padding-left:12px;margin:0 75px 0 12px" ng-bind=orgMutiCtrl.ticketState>100元</div><div class=float_left>押金</div><div class=float_left style="width:200px;height:39px;border:1px solid #C0CCDA;border-radius:4px;line-height:37px;padding-left:12px;margin:0 75px 0 12px" ng-bind="orgMutiCtrl.deposit+\'元\'">20元</div></div><div style=margin-top:15px;height:41px;line-height:41px;color:#5E6D82;font-size:14px><div class=float_left>绑定手环</div><input id=voucher class=float_left placeholder=请将手环放置在感应器上 ng-model=orgMutiCtrl.vNo style="ime-mode:disabled;width:329px;height:39px;border:1px solid #C0CCDA;border-radius:4px;line-height:37px;padding-left:12px;margin:0 75px 0 12px"></div></div><div class=clear></div><div style="background:#fff;min-width:1326px;margin:0 20px 0 20px;padding:29px 29px 28px 29px;color:#5e6d82;font-size:14px;border-radius:4px;border: 1px solid #E5E5E5"><div style=height:44px;background:#767676;font-size:14px;color:#fff><div class=float_left style=width:3.1%;padding-top:14px ng-click=orgMutiCtrl.changeAllS()><div class=float_left style=width:33%;color:#767676>d</div><img ng-show=orgMutiCtrl.select class=float_left src=assets/images/select_box_on.png style="width:16px"> <img ng-show=!orgMutiCtrl.select class=float_left src=assets/images/select_box.png style="width:16px"></div><div class=float_left style=width:16.1%;line-height:42px>门票名称</div><div class=float_left style=width:17.2%;line-height:42px>手环编号</div><div class=float_left style=width:16%;line-height:42px>单张售价</div><div class=float_left style=width:16%;line-height:42px>押金</div><div class=float_left style=width:16%;line-height:42px>门票时间</div><div class=float_left style=line-height:42px>操作</div></div><div ng-show="orgMutiCtrl.buyTickets.length != 0" ng-repeat="ticket in orgMutiCtrl.buyTickets" style="height:44px;background:#fff;font-size:14px;color:#1f2d3d;border:1px solid #ddd;border-top:0"><div class=float_left style=width:3.1%;padding-top:14px ng-click=orgMutiCtrl.changeSelect(ticket)><div class=float_left style=width:33%;color:#fff>d</div><img ng-show=ticket.select class=float_left src=assets/images/select_box_on.png style="width:16px"> <img ng-show=!ticket.select class=float_left src=assets/images/select_box.png style="width:16px"></div><div class=float_left ng-bind=ticket.name style=width:16.1%;line-height:42px>门票名称</div><div class=float_left ng-bind=ticket.vNo style=width:17.2%;line-height:42px>手环编号</div><div class=float_left ng-bind=ticket.price style=width:16%;line-height:42px>单张售价</div><div class=float_left ng-bind=ticket.fee style=width:16%;line-height:42px>押金</div><div class=float_left ng-bind=ticket.time style=width:16%;line-height:42px>门票时间</div><div class="float_left pointer" ng-click=orgMutiCtrl.move(ticket) style=line-height:42px;color:#00a1ff>移除</div></div><div ng-show="orgMutiCtrl.buyTickets.length == 0" style="height:44px;line-height:42px;text-align:center;color:#1f2d3d;font-size:16px;border:1px solid #ddd">请选择门票</div><div style=margin-top:36px><span>需支付</span> <span style=margin-left:20px;color:#ff0000;font-size:18px ng-bind="\'￥\'+orgMutiCtrl.payPrice">$100</span></div><div style=margin-top:20px class=pointer><div class=float_left style=margin-right:10px>支付方式</div><div class=float_left style=margin-top:-12px ng-repeat="payment in orgMutiCtrl.paymentArr" ng-click=orgMutiCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div><div class=clear></div><div style="margin:10px 0 0 70px"><!-- <div class="float_left">按F8选择切换支付方式</div> --><div class="pointer float_right" ng-click=orgMutiCtrl.sureSale() style="margin:-20px 0 0 12px;height:36px;width:96px;line-height:34px;text-align:center;background:#06cae9;font-size:14px;color:#fff;border-radius:4px">确认售卖</div><div class="pointer float_right" ng-click=orgMutiCtrl.succeed() style="margin-top:-20px;height:36px;width:80px;line-height:34px;text-align:center;background:#fff;font-size:14px;color:#475669;border-radius:4px;border:1px solid #C0CCDA">清空</div></div></div><div ng-show=orgMutiCtrl.showAuth_codeBox style=width:0;height:0;overflow:hidden><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code style=ime-mode:disabled class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=orgMutiCtrl.auth_code ng-keypress=orgMutiCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=orgMutiCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=orgMutiCtrl.closePay()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgMutiCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=orgMutiCtrl.wordWARN title={{orgMutiCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgMutiCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>购买成功</div><div class=promptClose></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgMutiCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=orgMutiCtrl.wordERR title={{orgMutiCtrl.wordERR}}>22212</div><div class=promptClose ng-click="orgMutiCtrl.promptERR = false"></div></div></div></div></div>'), a.put("app/organization/swim/ring.html", '<div class="contentBox noselect" style=min-height:100%;min-width:1366px;background:#E3E7EA;font-weight:700 id=fdWorker ondragstart="return false"><!-- <div ng-include="\'components/header/header.html\'"></div> --><div style=min-width:1366px;background:#E3E7EA><div style="background:#fff;box-shadow: 0 1px 4px 0 rgba(0,0,0,0.4)"><div style="height:58px;line-height:56px;padding:0 20px;font-size:18px;color:#475669"><div class="float_left pointer" style=width:33% ui-sref=org-index><img class=float_left style="height:22px;margin:19px 10px 0 0" src="assets/images/page_left.png"><div class=float_left>返回</div></div><div class=float_left style=width:33%;text-align:center>更换手环</div></div></div><div style="background:#EDF0F2;width:1180px;margin:2px auto;color:#333;min-height:100%;padding-top:32px"><div style="width:100%;padding:24px 40px;background:#fff;font-size:14px;color:#108ee9;margin-left:40px;width:1100px"><div>第一步：原手环</div><input id=voucher placeholder=请将旧手环放置在感应器上 ng-model=orgRingCtrl.oldNo style="width:492px;height:40px;border:1px solid #C0CCDA;border-radius:4px;line-height:38px;padding-left:12px;margin-top:12px"><div style=margin-top:32px>第二步：新手环</div><input id=voucher2 placeholder=请将新手环放置在感应器上 ng-model=orgRingCtrl.newNo style="width:492px;height:40px;border:1px solid #C0CCDA;border-radius:4px;line-height:38px;padding-left:12px;margin-top:12px"></div><div style=height:68px;line-height:68px;width:1180px;background:#fff;position:absolute;bottom:0;padding-left:40px;font-size:14px;color:#333><div class=pointer ng-click=orgRingCtrl.sure() style="margin:16px auto 0 auto;height:36px;width:96px;line-height:34px;text-align:center;background:#06cae9;font-size:14px;color:#fff;border-radius:4px">确认更换</div></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=orgRingCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=orgRingCtrl.closePay()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgRingCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=orgRingCtrl.wordWARN title={{orgRingCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgRingCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>更换成功</div><div class=promptClose ng-click="orgRingCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgRingCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=orgRingCtrl.wordERR title={{orgRingCtrl.wordERR}}>22212</div><div class=promptClose ng-click="orgRingCtrl.promptERR = false"></div></div></div></div></div>'), a.put("app/organization/swim/shop.html", '<div class="contentBox noselect" style=min-width:1366px;background:#E3E7EA;font-weight:700 id=fdWorker ondragstart="return false"><!-- <div ng-include="\'components/header/header.html\'"></div> --><div style=min-width:1366px;background:#E3E7EA><div style="background:#fff;box-shadow: 0 1px 2px 0 rgba(0,0,0,0.4)"><div style="height:56px;line-height:56px;padding:0 20px;font-size:18px;color:#475669"><div class="float_left pointer" ui-sref=org-index style=width:33%><img class=float_left style="height:22px;margin:18px 10px 0 0" src="assets/images/page_left.png"><div class=float_left>返回</div></div><!--     <div class="float_left" style="width:33%;text-align:center">购买产品</div> --><div class="float_left pointer" style=width:170px;height:32px;margin-left:11%;margin-top:12px;text-align:center;line-height:32px><div class=float_left ng-style=orgShopCtrl.selectFlag?orgShopCtrl.select:orgShopCtrl.unSelect style=width:80px;border-top-left-radius:4px;border-bottom-left-radius:4px ng-click="orgShopCtrl.clear(true,\'exit\')">续卡</div><div class=float_left ng-style=!orgShopCtrl.selectFlag?orgShopCtrl.select:orgShopCtrl.unSelect style="width:87px;border-left:1px solid #ddd;border-top-right-radius:4px;border-bottom-right-radius:4px" ng-click="orgShopCtrl.clear(false,\'exit\')">新办卡</div></div></div></div><div class=clear></div><div style="background:#fff;min-width:1326px;margin:20px;height:236px;padding:28px 28px 27px 28px;color:#475669;border-radius:4px;border: 1px solid #E5E5E5"><div style=font-size:20px><span>会员信息</span><span style=font-size:14px>(没有照片的会员可点击图片拍照)</span></div><div style=margin-top:20px><div ng-show=orgShopCtrl.photoFlag class=float_left style=height:140px;width:110px;overflow:hidden><img ng-show=!orgShopCtrl.photoFlag style=height:140px;width:110px src="{{orgShopCtrl.img}}"> <img ng-show=orgShopCtrl.photoFlag style=height:298px;width:600px src="{{orgShopCtrl.img}}"></div><img ng-show="!orgShopCtrl.sheFlag && !orgShopCtrl.photoFlag" class=float_left ng-click=orgShopCtrl.getMedia() style=height:140px;width:110px src="assets/images/p1.png"><div ng-show="orgShopCtrl.sheFlag && !orgShopCtrl.photoFlag" class=float_left ng-click=orgShopCtrl.getPhoto() style=height:140px;width:110px;background:#000><video ng-show=!orgShopCtrl.cameraFlag height=140px width=110px autoplay></video><canvas class=float_left ng-show=orgShopCtrl.cameraFlag id=canvas1></canvas></div><div class=float_left style="margin:21px 0 0 62px;color:#5E6D82;font-size:14px"><div ng-show=!orgShopCtrl.selectFlag style=height:41px;line-height:41px><div class=float_left>客户姓名</div><input class=float_left style="border:1px solid #C0CCDA;border-radius:4px;width:256px;line-height:39px;margin:0 8px 0 12px;color:#1F2D3D;padding-left:10px" placeholder=请输入用户姓名 ng-model="orgShopCtrl.name"><div class=float_left style=color:red;font-size:20px;margin-right:37px>*</div><div class=float_left>手机号码</div><input class=float_left style="border:1px solid #C0CCDA;border-radius:4px;width:256px;line-height:39px;margin:0 8px 0 12px;color:#1F2D3D;padding-left:10px" placeholder=请输入手机号码 ng-model="orgShopCtrl.tel"><div class=float_left style=color:red;font-size:20px>*</div></div><div ng-show=orgShopCtrl.selectFlag style=height:41px;line-height:41px><div class=float_left>客户姓名</div><div class=float_left style="border:1px solid #C0CCDA;border-radius:4px;width:256px;line-height:39px;height:41px;margin:0 8px 0 12px;color:#1F2D3D;padding-left:10px" ng-bind=orgShopCtrl.name></div><div class=float_left style=color:red;font-size:20px;margin-right:37px>*</div><div class=float_left>手机号码</div><div class=float_left style="border:1px solid #C0CCDA;border-radius:4px;width:256px;line-height:39px;height:41px;margin:0 8px 0 12px;color:#1F2D3D;padding-left:10px" ng-bind=orgShopCtrl.tel></div><div class=float_left style=color:red;font-size:20px;margin-right:37px>*</div><div class=float_left ng-show=orgShopCtrl.cardName>当前产品</div><div class=float_left ng-show=orgShopCtrl.cardName style="border:1px solid #C0CCDA;border-radius:4px;width:256px;line-height:39px;height:41px;margin:0 8px 0 12px;color:#1F2D3D;padding-left:10px" ng-bind=orgShopCtrl.cardName></div></div><div class=clear></div><div ng-show=orgShopCtrl.selectFlag style=height:41px;line-height:41px;margin-top:20px><div class=float_left>会员卡号</div><input id=cardNo class=float_left style="ime-mode:disabled;border:1px solid #C0CCDA;border-radius:4px;width:256px;line-height:39px;margin:0 8px 0 12px;color:#1F2D3D;padding-left:10px" placeholder=老用户请刷卡读取 ng-model="orgShopCtrl.cardNo"><div class=float_left style=color:#99a9bf;font-size:14px>非必填</div></div><div ng-show=!orgShopCtrl.selectFlag style=height:41px;line-height:41px;margin-top:20px><div class=float_left>身份证号</div><input id=cardNo class=float_left style="border:1px solid #C0CCDA;border-radius:4px;width:256px;line-height:39px;margin:0 8px 0 12px;color:#1F2D3D;padding-left:10px" placeholder=请输入身份证号 ng-model="orgShopCtrl.idCard"><div class=float_left style=color:#99a9bf;font-size:14px>非必填</div></div></div><div class="pointer float_right" ng-click=orgShopCtrl.clear() style=margin-top:101px;height:36px;width:96px;line-height:34px;text-align:center;background:#06cae9;font-size:14px;color:#fff;border-radius:4px>重置信息</div></div></div><div style="background:#fff;min-width:1326px;margin:20px;padding:28px 28px 27px 28px;color:#475669;border-radius:4px;border: 1px solid #E5E5E5"><div style=font-size:20px>产品选择</div><div style=height:160px;overflow-y:scroll><div class="float_left pointer" ng-repeat="service in orgShopCtrl.services" ng-click=orgShopCtrl.chooseCard(service) style="margin:21px 12px 0 0"><div ng-show=service.choose style="width:476px;height:156px;background:#fafafa;border:#767F8A 2px solid;padding-left:20px;background: url(../../assets/images/specard.png) no-repeat 310px 42px;background-size:161px 110px"><div style=margin-top:20px class=float_left><div><span style=color:#1f2d3d;font-size:20px ng-bind=service.name>游泳半年卡</span> <span style=color:red;font-size:22px ng-bind="\'￥\'+service.price">￥1000</span></div><div style=color:#99a9bf;font-size:14px;margin-top:6px>仅自己使用</div><div style=margin-top:20px;height:22px;line-height:22px><div class=float_left style=font-size:13px;height:22px;width:56px;border-radius:55px;background:#767F8A;line-height:22px;text-align:center;color:#fff ng-bind=service.type>时间卡</div><div class=float_left style="margin:0 30px 0 5px;font-size:14px;color:#1f2d3d" ng-bind=service.value>180天</div><div class=float_left ng-show="service.type==\'次数卡\'" style=font-size:13px;height:22px;width:56px;border-radius:55px;background:#767F8A;line-height:22px;text-align:center;color:#fff>有效期</div><div class=float_left ng-show="service.type==\'次数卡\'" style="margin:0 0 0 5px;font-size:14px;color:#1f2d3d" ng-bind="service.timeValue+\'天\'">90分钟</div></div><div style=margin-top:10px;height:22px;line-height:22px><div class=float_left style=font-size:13px;height:22px;width:72px;border-radius:55px;background:#767F8A;line-height:22px;text-align:center;color:#fff>单次限时</div><div class=float_left style="margin:0 16px 0 5px;font-size:14px;color:#5E6D82" ng-bind=service.limit>180天</div></div></div></div><div ng-show=!service.choose style="width:476px;height:156px;background:#fafafa;border:#E4E9EE 2px solid;padding-left:20px;background: url(../../assets/images/unspecard.png) no-repeat 310px 42px;background-size:161px 110px"><div style=margin-top:20px class=float_left><div><span style=color:#5E6D82;font-size:20px ng-bind=service.name>游泳半年卡</span> <span style=color:red;font-size:22px ng-bind="\'￥\'+service.price">￥1000</span></div><div style=color:#99a9bf;font-size:14px;margin-top:2px>仅自己使用</div><div style=margin-top:20px;height:22px;line-height:22px><div class=float_left style=height:22px;width:56px;border-radius:55px;background:#C0C9D4;line-height:22px;text-align:center;color:#fff ng-bind=service.type>时间卡</div><div class=float_left style="margin:0 30px 0 5px;font-size:14px;color:#5E6D82" ng-bind=service.value>180天</div><div class=float_left ng-show="service.type==\'次数卡\'" style=height:22px;width:56px;border-radius:55px;background:#C0C9D4;line-height:22px;text-align:center;color:#fff>有效期</div><div class=float_left ng-show="service.type==\'次数卡\'" style="margin:0 0 0 5px;font-size:14px;color:#5E6D82" ng-bind="service.timeValue+\'天\'">90分钟</div></div><div style=margin-top:10px;height:22px;line-height:22px><div class=float_left style=height:22px;width:72px;border-radius:55px;background:#C0C9D4;line-height:22px;text-align:center;color:#fff>单次限时</div><div class=float_left style="margin:0 16px 0 5px;font-size:14px;color:#5E6D82" ng-bind=service.limit>180天</div></div></div></div></div></div><div class=clear></div><div ng-show=!orgShopCtrl.selectFlag style=height:41px;line-height:41px;margin-top:20px><div class=float_left>绑定实体卡</div><input id=cardNo2 class=float_left style="border:1px solid #C0CCDA;border-radius:4px;width:256px;line-height:39px;margin:0 8px 0 12px;color:#1F2D3D;padding-left:10px" ng-change=orgShopCtrl.change() placeholder=请把新卡放置在刷卡器上 ng-model="orgShopCtrl.cardNo2"><!-- <div class="float_left" style="color:#99a9bf;font-size:14px">必填</div> --></div><div class=clear></div><!--         <div>\n                <div class="form_key float_left form_key_margin">是否需要工本费</div>\n                <img src="assets/images/bluecircle.png" ng-show="orgShopCtrl.isCost" style="height:18px" class="float_left form_oImage_margin"/>\n                <img src="assets/images/radio_off.png" ng-show="!orgShopCtrl.isCost" ng-click="orgShopCtrl.isCost = true;orgShopCtrl.change()" style="height:18px" class="float_left form_oImage_margin"/>\n                <div class="float_left pointer" style="margin:12px 20px 0 0" ng-click="orgShopCtrl.isCost = true;orgShopCtrl.change()">需要</div>\n                <img src="assets/images/radio_off.png" ng-show="orgShopCtrl.isCost" ng-click="orgShopCtrl.isCost = false;orgShopCtrl.change()" style="height:18px" class="float_left form_oImage_margin"/>\n                <img src="assets/images/bluecircle.png" ng-show="!orgShopCtrl.isCost" style="height:18px" class="float_left form_oImage_margin"/>\n                <div class="float_left pointer" style="margin:12px 10px 0 0" ng-click="orgShopCtrl.isCost = false;orgShopCtrl.change()">不需要</div>\n            </div>\n            <div class="clear"></div> --><div style=font-size:20px;margin-top:28px>支付结算</div><div class=pointer style=margin-top:14px;font-size:14px;color:#5E6D82><div style="margin:0 0 10px 0"><span>合计</span> <span style=margin-left:36px;color:#ff0000;font-size:18px ng-bind="\'￥\'+orgShopCtrl.total">$100</span></div><div class=float_left style=margin-right:15px>支付结算</div><div class=float_left style=margin-top:-12px ng-repeat="payment in orgShopCtrl.paymentArr" ng-click=orgShopCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div><div class=clear></div><div style=margin-top:10px ng-show=!orgShopCtrl.selectFlag><img ng-show=orgShopCtrl.isBail ng-click=orgShopCtrl.cal() style=margin-right:3px src=assets/images/select_box_on.png class="float_left"> <img ng-show=!orgShopCtrl.isBail ng-click=orgShopCtrl.cal() style=margin-right:3px src=assets/images/select_box.png class="float_left"><div class=float_left ng-click=orgShopCtrl.cal() ng-bind="\'需要\'+orgShopCtrl.bail+\'元保证金\'"></div></div><div class=clear></div><div class=pointer ng-click="orgShopCtrl.nwFlag = true" style=margin-top:21px;height:36px;width:96px;line-height:34px;text-align:center;background:#06cae9;font-size:14px;color:#fff;border-radius:4px>确认办理</div></div><div ng-show=orgShopCtrl.showAuth_codeBox style=width:0;height:0;overflow:hidden><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=orgShopCtrl.auth_code ng-keypress=orgShopCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=orgShopCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=orgShopCtrl.closePay()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=orgShopCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" title={{orgShopCtrl.wordWARN}}>支付中</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div><!-- 二次确认 --><div class=bgGary ng-show=orgShopCtrl.nwFlag><div class=middle><div id=box class=center style="box-shadow:0 2px 8px 0 rgba(0,0,0,0.20);border-radius:4px;width:416px;height:228px;background:#fff;padding:35px 36px 40px 36px"><div><img style=height:36px src=assets/images/nw.png class="float_left"><div class=float_left style=height:36px;line-height:36px;font-size:18px;color:#333;margin-left:10px>请注意</div></div><div class=clear></div><div style=height:21px;line-height:21px;font-size:16px;color:#666;margin-left:46px><span>确认购买</span><span ng-bind="\'【\'+orgShopCtrl.serviceName+\'】\'" style=color:red;font-weight:700;font-size:20px></span><span>吗?</span></div><div><div class="pointer float_right" ng-click=orgShopCtrl.banli() style="margin-top:65px;height:32px;width:96px;line-height:32px;text-align:center;font-size:14px;color:#666;border-radius:4px;border:1px solid #d9d9d9">继续购买</div><div class="pointer float_right" ng-click="orgShopCtrl.nwFlag = false" style="margin-top:65px;height:32px;width:96px;line-height:32px;text-align:center;font-size:14px;color:#666;border-radius:4px;border:1px solid #d9d9d9;margin-right:10px">返回修改</div></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=orgShopCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>办理成功</div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=orgShopCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=orgShopCtrl.wordERR title={{orgShopCtrl.wordERR}}>22212</div></div></div></div></div>'),
            a.put("app/organization/swim/show.html", '<div style="width: 100%;height: 100%;background: #0000ff;color:#fff;font-size: 60px;padding-top: 20px;padding-left: 20px"><span>当日总人数：</span> <span ng-bind=orgShowCtrl.data.allCount></span> <span style="margin-left: 30px">场内总人数：</span> <span ng-bind=orgShowCtrl.data.todayInFieldCount></span></div>'), a.put("app/organization/swim/singal.html", '<div class="contentBox noselect" style=min-width:1366px;background:#EDF0F2 id=fdWorker ondragstart="return false"><!-- <div ng-include="\'components/header/header.html\'"></div> --><div style=min-width:1366px;background:#EDF0F2><div style="background:#fff;box-shadow: 0 1px 4px 0 rgba(0,0,0,0.4)"><div style="height:58px;line-height:56px;padding:0 20px;font-size:18px;color:#475669"><div class="float_left pointer" style=width:33% ui-sref=csd-index><img class=float_left style="height:22px;margin:19px 10px 0 0" src="assets/images/page_left.png"><div class=float_left>返回</div></div><div class=float_left style=width:33%;text-align:center>单张票</div></div></div><div style="background:#fff;min-width:1326px;margin:20px;padding:29px 29px 28px 29px;border-radius:4px;border: 1px solid #E5E5E5"><div class="float_left pointer" ng-repeat="ticket in csdSingalCtrl.tickets" style=margin-right:12px><div ng-show=ticket.isChoose style=background-image:url(assets/images/ticket.png);height:94px;width:183px><div class=float_left style=width:150px;height:94px;text-align:center;line-height:94px;color:#fff;font-size:18px ng-bind=ticket.name>成人票</div></div><div ng-show=!ticket.isChoose ng-click=csdSingalCtrl.choose(ticket) style=background-image:url(assets/images/unticket.png);height:94px;width:183px><div class=float_left style=width:150px;height:94px;text-align:center;line-height:94px;color:#475669;font-size:18px ng-bind=ticket.name>成人票</div></div></div><div class=clear></div><div style=margin-top:14px;color:#99A9BF;font-size:14px>按F9切换选择门票</div><div style=margin-top:30px;height:41px;line-height:41px;color:#5E6D82;font-size:14px><div class=float_left>单张售价</div><div class=float_left style="width:200px;height:39px;border:1px solid #C0CCDA;border-radius:4px;line-height:37px;padding-left:12px;margin:0 75px 0 12px" ng-bind=csdSingalCtrl.ticketPrice>100元</div><div class=float_left>门票时间</div><div class=float_left style="width:200px;height:39px;border:1px solid #C0CCDA;border-radius:4px;line-height:37px;padding-left:12px;margin:0 75px 0 12px" ng-bind="csdSingalCtrl.ticketLimit?(csdSingalCtrl.ticketLimit+\'分钟\'):\'不限时间\'">100元</div><div class=float_left>门票场次</div><div class=float_left style="width:200px;height:39px;border:1px solid #C0CCDA;border-radius:4px;line-height:37px;padding-left:12px;margin:0 75px 0 12px" ng-bind=csdSingalCtrl.ticketState>100元</div><div class=float_left>押金</div><div class=float_left style="width:200px;height:39px;border:1px solid #C0CCDA;border-radius:4px;line-height:37px;padding-left:12px;margin:0 75px 0 12px" ng-bind="csdSingalCtrl.deposit+\'元\'">20元</div></div><div style=margin-top:15px;height:41px;line-height:41px;color:#5E6D82;font-size:14px><div class=float_left>绑定手环</div><input id=voucher class=float_left placeholder=请将手环放置在感应器上 ng-model=csdSingalCtrl.vNo style="width:329px;height:39px;border:1px solid #C0CCDA;border-radius:4px;line-height:37px;padding-left:12px;margin:0 75px 0 12px"></div></div><div style="background:#fff;min-width:1326px;margin:0 20px 0 20px;height:198px;padding:29px 29px 28px 29px;color:#5e6d82;font-size:14px;border-radius:4px;border: 1px solid #E5E5E5"><div><span>需支付</span> <span style=margin-left:20px;color:#ff0000;font-size:18px ng-bind="\'￥\'+csdSingalCtrl.total">$100</span></div><div style=margin-top:20px class=pointer><div class=float_left style=margin-right:10px>支付方式</div><div class=float_left style=margin-top:-12px ng-repeat="payment in csdSingalCtrl.paymentArr" ng-click=csdSingalCtrl.choosePayment(payment)><div class="singleChoose_imageBox {{payment.image}}"></div><div class=singleChoose_prompt ng-bind=payment.name>支付宝</div></div></div><div class=clear></div><!--   <div style="margin:10px 0 0 70px">按F8选择切换支付方式</div> --><div class=pointer ng-click=csdSingalCtrl.sureSale() style=margin-top:35px;height:36px;width:96px;line-height:34px;text-align:center;background:#06cae9;font-size:14px;color:#fff;border-radius:4px>确认售卖</div></div><div ng-show=csdSingalCtrl.showAuth_codeBox style=width:0;height:0;overflow:hidden><div><div class="form_key float_left form_key_margin">支付条码</div><input id=auth_code style=ime-mode:disabled class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=csdSingalCtrl.auth_code ng-keypress=csdSingalCtrl.auth_codeCreate($event)></div><div class=clear></div><div class=form_error_font></div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=csdSingalCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=promptClose ng-click=csdSingalCtrl.closePay()></div></div></div></div><!-- 警告提示 --><div class=bgGary ng-show=csdSingalCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" ng-bind=csdSingalCtrl.wordWARN title={{csdSingalCtrl.wordWARN}}>22212</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div><!-- 成功提示 --><div class=bgGary ng-show=csdSingalCtrl.promptOK><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>购买成功</div><div class=promptClose ng-click="csdSingalCtrl.promptOK = false"></div></div></div></div><!-- 错误提示 --><div class=bgGary ng-show=csdSingalCtrl.promptERR><div class=middle><div id=box class="promptBox center"><div class="promptImage errImage"></div><div class="promptWord ellipsis" ng-bind=csdSingalCtrl.wordERR title={{csdSingalCtrl.wordERR}}>22212</div><div class=promptClose ng-click="csdSingalCtrl.promptERR = false"></div></div></div></div></div>'), a.put("app/organization/swim/test.html", '<div class="contentBox noselect" style=min-width:1366px;background:#EDF0F2 id=fdWorker ondragstart="return false"><!-- <div ng-include="\'components/header/header.html\'"></div> --><div style=min-width:1366px;background:#EDF0F2><div style="background:#fff;min-width:1326px;margin:0 20px 0 20px;height:194px;padding:28px 28px 27px 28px;color:#475669;font-size:14px;border-radius:4px"><div style=font-size:18px>绑定手环</div><div style=margin-top:20px;height:41px;line-height:41px;color:#5E6D82><div class=float_left>绑定手环</div><input class=float_left id=ring style="border:1px solid #C0CCDA;border-radius:4px;width:329px;line-height:39px;margin:0 62px 0 12px;color:#1F2D3D;padding-left:10px" ng-model=orgTestCtrl.vNo placeholder="请将手环放置在感应器上"></div><div class=pointer ng-click=orgTestCtrl.enter() style=margin-top:20px;height:36px;width:96px;line-height:34px;text-align:center;background:#06cae9;font-size:14px;color:#fff;border-radius:4px>进场</div><div class=pointer ng-click=orgTestCtrl.out() style=margin-top:20px;height:36px;width:96px;line-height:34px;text-align:center;background:#06cae9;font-size:14px;color:#fff;border-radius:4px>出场</div></div></div><!-- 扫码提示 --><div class=bgGary ng-show=csdEnterCtrl.showAuth_codeBox><div class=middle><div id=box class="promptBox center"><div class="promptImage okImage"></div><div class=promptWord>请扫描用户二维码</div><div class=float_right ng-bind=csdEnterCtrl.second style=margin:12px></div></div></div></div></div>'), a.put("app/selfhelp/self/self-help.html", '<style>.noselect {\n\n    -webkit-touch-callout: none; /* iOS Safari */\n\n    -webkit-user-select: none; /* Chrome/Safari/Opera */\n\n    -khtml-user-select: none; /* Konqueror */\n\n    -moz-user-select: none; /* Firefox */\n\n    -ms-user-select: none; /* Internet Explorer/Edge */\n\n    user-select: none; /* Non-prefixed version, currently\n\n    not supported by any browser */\n\n    }\n    .fa{\n        margin:30px 0;padding:0 30px\n    }\n    .bg{\n        height:210px;background:#fff;padding-top:40px\n    }\n    .bg:hover{\n        height:210px;background:#d2ecff;padding-top:40px\n    }</style><div class="contentBox noselect" style="width: 1024px;background:#f5f4f3" id=fdWorker ondragstart="return false"><!-- <div ng-include="\'components/header/header.html\'"></div> --><div style="min-width: 1024px;background:#f5f4f3"><div style=background:#fff><div style="height: 75px;line-height: 73px;margin:0 auto;padding: 0 30px;border-bottom: 1px solid #ccc"><div style="width: 500px;font-size: 24px;font-weight: bold;float: left"><span style=margin-right:20px>包玉刚游泳场</span> <span ng-bind=selfHelpCtrl.showDate>早场 06:00-12:00</span></div><!-- <div ng-show="!selfHelpCtrl.fullFlag" style="font-size:17px;font-weight:bold" class="float_right pointer" id=\'full\'>全屏</div>\n                <div ng-show="selfHelpCtrl.fullFlag" style="font-size:17px;font-weight:bold" class="float_right pointer" id=\'quite\'>退出全屏</div> --><div style=float:right;height:73px;font-size:22px;font-weight:bold;margin-right:20px><span ng-bind=selfHelpCtrl.nowDay></span> <span style="margin:0 10px" ng-bind="selfHelpCtrl.dt | date:\'HH:mm:ss\'"></span> <span ng-bind="selfHelpCtrl.nowDate | date:\'yyyy年MM月dd日\'"></span></div></div></div><!-- <input type="BUTTON" name="FullScreen" value="全屏显示" onClick="window.open(document.location, \'big\', \'fullscreen=yes\')"> --><div style=width:0;height:0;overflow:hidden><div><input id=auth_code style=ime-mode:disabled class="form_value float_left form_value_width" placeholder=请扫描支付码 ng-model=selfHelpCtrl.auth_code ng-keypress=selfHelpCtrl.enterCheck($event)></div><div class=clear></div><div class=form_error_font></div></div><div class=fa><div ng-repeat="ticket in selfHelpCtrl.tickets" ng-show=selfHelpCtrl.haveBuy><div class=bg><div style="height:80px;padding:0 80px 0 20px;line-height:80px"><div class=float_left style=width:40%><span style=font-size:48px;color:#000 ng-bind=ticket.name></span> <span style="color:#00a1ff;font-size:32px;margin:0 0 0 15px" ng-bind="\'￥\'+ticket.price+\'/张\'"></span></div><div class=float_left onclick="event.cancelBubble = true" ng-click="selfHelpCtrl.changeNum(\'delete\',ticket)" style="margin-top:15px;background: url(../../assets/images/add2.png) no-repeat;width:96px;height:96px;overflow: hidden;cursor: pointer"></div><div class=float_left style="border:1px solid #ddd;border-radius:4px;margin:0 30px 0 0px;width:100px;font-size:48px;color:#ff2424;text-align:center" ng-bind=ticket.num></div><div class=float_left onclick="event.cancelBubble = true" ng-click="selfHelpCtrl.changeNum(\'add\',ticket)" style="margin-top:15px;background: url(../../assets/images/delete2.png) no-repeat;width:96px;height:96px;overflow: hidden;cursor: pointer"></div><div class=float_right style=font-size:44px;color:#ff2424 ng-bind="\'￥\'+ticket.singalPrice">￥0</div></div><div class=clear></div><div style=margin-left:20px;color:#ff4949;font-size:28px ng-show="ticket.name == \'成人票\'">每人最多限购5张</div><div style=margin-left:20px;color:#ff4949;font-size:28px ng-show="ticket.name == \'儿童票\'">仅限1.4米以下儿童购买</div></div><div style=background:#f5f4f3;width:100%;height:20px ng-show="ticket.order != ticket.length"></div></div><div ng-show=!selfHelpCtrl.haveBuy><div class=bg><div style="height:80px;padding:0 80px 0 20px;line-height:80px"><div class=float_left style=width:40%><span style=font-size:44px;color:#000>此时段暂无门票售卖</span></div></div></div><div style=background:#f5f4f3;width:100%;height:20px></div></div></div><div style="padding:0 30px;width:100%"><div style=height:100px;line-height:100px;background:#fff><div class=float_left style=width:33% ng-click="selfHelpCtrl.select(\'account\')"><div class=float_left ng-show=selfHelpCtrl.accountFlag style="margin:30px 0px 0 20px;width:64px;height:64px;background: url(../../assets/images/select3.png) no-repeat"></div><div class=float_left ng-show=!selfHelpCtrl.accountFlag style="margin:30px 0px 0 20px;width:64px;height:64px;background: url(../../assets/images/select2.png) no-repeat"></div><div style=font-size:28px;color:#00a1ff ng-show=selfHelpCtrl.accountFlag class="float_left pointer" ng-click="selfHelpCtrl.select(\'account\')">账户余额</div><div style=font-size:28px;color:#999 ng-show=!selfHelpCtrl.accountFlag class="float_left pointer" ng-click="selfHelpCtrl.select(\'account\')">账户余额</div></div><!--                 <div class="float_left" style="width:33%" ng-click="selfHelpCtrl.select(\'alipay\')">\n                    <div class="float_left" ng-show="selfHelpCtrl.alipayFlag" style="margin:30px 0px 0 20px;width:64px;height:64px;background: url(../../assets/images/select3.png) no-repeat;"></div>\n                    <div class="float_left" ng-show="!selfHelpCtrl.alipayFlag" style="margin:30px 0px 0 20px;width:64px;height:64px;background: url(../../assets/images/select2.png) no-repeat;"></div>\n                    <div class="float_left pointer" ng-show="selfHelpCtrl.alipayFlag" style="font-size:28px;color:#00a1ff" class="float_left pointer">支付宝</div>\n                    <div class="float_left pointer" ng-show="!selfHelpCtrl.alipayFlag" style="font-size:28px;color:#999" class="float_left pointer">支付宝</div>\n                </div>\n                <div class="float_left" style="width:33%" ng-click="selfHelpCtrl.select(\'wx\')">\n                    <div class="float_left" ng-show="selfHelpCtrl.wxFlag" style="margin:30px 0px 0 20px;width:64px;height:64px;background: url(../../assets/images/select3.png) no-repeat;"></div>\n                    <div class="float_left" ng-show="!selfHelpCtrl.wxFlag" style="margin:30px 0px 0 20px;width:64px;height:64px;background: url(../../assets/images/select2.png) no-repeat;"></div>\n                    <div style="font-size:28px;color:#00a1ff" ng-show="selfHelpCtrl.wxFlag" class="float_left pointer" ng-click="selfHelpCtrl.select(\'wx\')">微信</div>\n                    <div style="font-size:28px;color:#999" ng-show="!selfHelpCtrl.wxFlag" class="float_left pointer" ng-click="selfHelpCtrl.select(\'wx\')">微信</div>\n                </div>  --></div></div><div class=clear></div><div ng-show=!selfHelpCtrl.canFlag style="color:#999;margin:20px 0 30px 30px"><span style=font-size:40px>总价:￥</span> <span style=font-size:60px>0</span></div><div ng-show=selfHelpCtrl.canFlag style="color:#ce2424;margin:20px 0 30px 30px"><span style=font-size:40px>总价:￥</span> <span style=font-size:60px ng-bind=selfHelpCtrl.total>0</span></div><div><div ng-show=!selfHelpCtrl.canFlag style="width:300px;height:100px;margin:0 auto;background:#ccc;color:#fff;line-height:100px;text-align:center;border-radius:4px;font-size:40px">确认购买</div><div class=pointer ng-click=selfHelpCtrl.message() ng-show=selfHelpCtrl.canFlag onclick="event.cancelBubble = true" style="width:300px;height:100px;margin:0 auto;background:#00a1ff;color:#fff;line-height:100px;text-align:center;border-radius:4px;font-size:40px">确认购买</div><div class=clear></div></div></div></div><div class=bgGary ng-show=selfHelpCtrl.promptOK><div class=middle><div id=box class="promptBox center" style=height:88px;width:330px><img class=float_left style="width:40px;margin:24px 14px 0 20px" src="assets/images/greensure.png"><div class=float_left><div style="color:#1f2d3d;font-size:24px;margin:20px 0 10px 0">成功</div><div style=color:#8492a6;font-size:18px>请取走小票，凭票入场。</div></div></div></div></div><div class=bgGary ng-show=selfHelpCtrl.wayFlag><div class=middle><div id=box class="promptBox center" style=height:250px;width:500px><div><div class=float_left style="padding:20px 0 0 20px;font-size:28px;color:#1f2d3d">请选择支付方式</div><div class="float_right pointer" onclick="event.cancelBubble = true" ng-click=selfHelpCtrl.clearInfo() style=font-size:60px;padding-right:20px>×</div></div><div class=clear></div><div class=float_left ng-click="selfHelpCtrl.select(\'account\')"><div class=float_left ng-show=selfHelpCtrl.accountFlag style="margin:30px 0px 0 20px;width:64px;height:64px;background: url(../../assets/images/select3.png) no-repeat"></div><div class=float_left ng-show=!selfHelpCtrl.accountFlag style="margin:30px 0px 0 20px;width:64px;height:64px;background: url(../../assets/images/select2.png) no-repeat"></div><div style=font-size:28px;margin-top:34px;color:#00a1ff ng-show=selfHelpCtrl.accountFlag class="float_left pointer" ng-click="selfHelpCtrl.select(\'account\')">账户余额</div><div style=font-size:28px;margin-top:34px;color:#999 ng-show=!selfHelpCtrl.accountFlag class="float_left pointer" ng-click="selfHelpCtrl.select(\'account\')">账户余额</div></div><div class=float_left ng-click="selfHelpCtrl.select(\'wx\')"><div class=float_left ng-show=selfHelpCtrl.wxFlag style="margin:30px 0px 0 20px;width:64px;height:64px;background: url(../../assets/images/select3.png) no-repeat"></div><div class=float_left ng-show=!selfHelpCtrl.wxFlag style="margin:30px 0px 0 20px;width:64px;height:64px;background: url(../../assets/images/select2.png) no-repeat"></div><div style=font-size:28px;margin-top:34px;color:#00a1ff ng-show=selfHelpCtrl.wxFlag class="float_left pointer" ng-click="selfHelpCtrl.select(\'wx\')">微信</div><div style=font-size:28px;margin-top:34px;color:#999 ng-show=!selfHelpCtrl.wxFlag class="float_left pointer" ng-click="selfHelpCtrl.select(\'wx\')">微信</div></div><div class=clear></div><div ng-click=selfHelpCtrl.message() class=pointer style="width:100px;height:50px;margin:10px auto 0 auto;background:#00a1ff;color:#fff;line-height:50px;text-align:center;border-radius:4px;font-size:30px">确认</div></div></div></div><div class=bgGary ng-show=selfHelpCtrl.promptWARN ng-click=selfHelpCtrl.setIntervalId()><div class=middle><div id=box class="promptBox center" style=height:300px;width:500px><div><div class=float_left style="padding:20px 0 0 20px;font-size:28px;color:#1f2d3d">请支付</div><div class="float_right pointer" onclick="event.cancelBubble = true" ng-click=selfHelpCtrl.clearInfo() style=font-size:60px;padding-right:20px>×</div></div><div class=clear></div><div style="color:#8492a6;font-size:36px;margin:5px 20px 0 20px;line-height:38px"><!--          <span>微信支付请在自助机左侧扫描</span>\n                <span style="color:#ff2424">微信</span> --><span>一卡通用户在下方扫描</span> <span style=color:#ff2424>黄龙一卡通</span> <span>进行支付</span></div><div style="margin:40px 0 0 150px"><span style=font-size:30px;color:#1f2d3d>支付剩余时间:</span> <span style=font-size:30px;color:#ff4949 ng-bind=selfHelpCtrl.second>20s</span></div></div></div></div><div class=bgGary ng-show=selfHelpCtrl.promptERR><div class=middle><div id=box class="promptBox center" style=height:88px;width:500px><img class=float_left style="width:40px;margin:24px 14px 0 20px" src="assets/images/red.png"><div class=float_left><div style="color:#1f2d3d;font-size:24px;margin:20px 0 10px 0">错误</div><div style=color:#8492a6;font-size:18px ng-bind=selfHelpCtrl.wordERR>余额不足</div></div><div class="float_right pointer" onclick="event.cancelBubble = true" ng-click=selfHelpCtrl.clearInfo() style=font-size:60px;padding-right:20px>×</div></div></div></div><div class=bgGary ng-show=selfHelpCtrl.promptMES><div class=middle><div id=box class="promptBox center" style=height:88px;width:380px><img class=float_left style="width:40px;margin:24px 14px 0 20px" src="assets/images/circlewarn.png"><div class=float_left><div style="color:#1f2d3d;font-size:24px;margin:20px 0 10px 0">温馨提示</div><div style=color:#8492a6;font-size:18px ng-bind=selfHelpCtrl.wordMES>余额不足</div></div><div class="float_right pointer" onclick="event.cancelBubble = true" ng-click=selfHelpCtrl.clearInfo() style=font-size:60px;padding-right:20px>×</div></div></div></div><div class=bgGary ng-show=selfHelpCtrl.payFlag><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" title={{selfHelpCtrl.wordWARN}}>支付中</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div>'), 
            a.put("app/wx/authorized.html", "<!-- 授权页面 -->"), 
            a.put("app/wx/buy/wx-apply.html", '<style>html{\n		font-size:100px;\n	}</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-width:1.38rem;min-height:7rem;background:#f8f8f8><!--  <div style="height:0.5rem;line-height:0.5rem;margin:0 0.15rem;border-bottom:1px solid #ddd" class="pointer">\n        <div class="float_left" style="font-size:0.17rem;color:#999">订单名称</div>\n        <div class="float_right" style="font-size:0.17rem;color:#000;" ng-bind="wxApplyCtrl.name">500元储值卡</div>\n        <div class="clear"></div>\n    </div>\n    <div style="height:0.5rem;line-height:0.5rem;margin:0 0.15rem;border-bottom:1px solid #ddd" class="pointer">\n        <div class="float_left" style="font-size:0.17rem;color:#999">支付金额</div>\n        <div class="float_right" style="font-size:0.17rem;color:#000;" ng-bind="\'￥\'+wxApplyCtrl.price">￥470</div>\n        <div class="clear"></div>\n    </div>\n    <div style="height:0.5rem;line-height:0.5rem;margin:0 0.15rem;border-bottom:1px solid #ddd" class="pointer">\n        <div class="float_left" style="font-size:0.17rem;color:#999">支付方式</div>\n        <div class="float_right" style="font-size:0.17rem;color:#000;">微信支付</div>\n        <div class="clear"></div>\n    </div> --><div style="padding:0.2rem 0.15rem 0.15rem 0.15rem"><div class=float_left>充值金额（会员账户一经充值概不退费）</div><img ng-show=wxApplyCtrl.state src=assets/images/cancel.png style=width:0.17rem ng-click=wxApplyCtrl.turn() class="float_right pointer"></div><div style=height:0.15rem;width:100%></div><div style="background:#fff;padding:0.2rem 0rem 0.05rem 0rem" ng-style=wxApplyCtrl.height><div class=pointer ng-repeat="card in wxApplyCtrl.cards" ng-click=wxApplyCtrl.chooseCard(card)><div ng-show=card.flag class=float_left ng-style=card.canFlag?(card.chooseFlag?wxApplyCtrl.background1:wxApplyCtrl.background2):wxApplyCtrl.background3 style="width:45%;height:0.5rem;border-radius:4px;text-align:center;margin:0 0 0.15rem 0.15rem;padding-top:0.1rem"><div ng-bind="\'￥\'+card.price" style=font-size:0.16rem ng-style="!card.description?wxApplyCtrl.margin:\'\'">200</div><div ng-bind=card.description style=font-size:0.1rem;margin-top:0.05rem>订单享五折</div></div><div ng-show=!card.flag class=float_right ng-style=card.canFlag?(card.chooseFlag?wxApplyCtrl.background1:wxApplyCtrl.background2):wxApplyCtrl.background3 style="width:45%;height:0.5rem;border-radius:4px;text-align:center;margin:0 0.15rem 0.15rem 0;padding-top:0.1rem"><div ng-bind="\'￥\'+card.price" style=font-size:0.16rem ng-style="!card.description?wxApplyCtrl.margin:\'\'">200</div><div ng-bind=card.description style=font-size:0.1rem;margin-top:0.05rem>订单享五折</div></div></div></div><div class=clear></div><div style="padding:0.05rem 0.15rem 0.4rem 0.15rem;font-size:0.14rem;color:#aaa;position:relative" ng-repeat="rule in wxApplyCtrl.arr"><div class=float_left style="background:#999;border-radius:50%;width:0.08rem;height:0.08rem;margin:0.04rem 0.05rem 0 0"></div><div class=float_left style=line-height:0.18rem;text-indent:0.15rem;position:absolute ng-bind=rule></div></div><div class=bgGary ng-show=wxApplyCtrl.warnFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset;border-radius:10px"><div style="padding:0.2rem 0.1rem 0.1rem 0.1rem"><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>注意</div><div style=margin-top:0.1rem;line-height:0.18rem;color:#999;text-align:center ng-bind=wxApplyCtrl.wordWarn>抱歉，请先去场馆柜台完成实名认证，才可以购买数额大的充值卡</div></div><div class=pointer style="text-align:center;color:#00a1ff;font-size:0.18rem;width:100%;border-top:1px solid #d3dce6;height:0.4rem;line-height:0.4rem" ng-click="wxApplyCtrl.warnFlag = false">我知道了</div></div></div></div><div class=bgGary ng-show=wxApplyCtrl.succeedFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset"><div class=form_padding><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>注意</div><div style=margin-top:0.1rem ng-bind=wxApplyCtrl.alert>支付成功</div></div><div class="form_submit pointer" style=text-align:center;color:#00a1ff;font-size:0.18rem ng-click="wxApplyCtrl.succeedFlag = false">我知道了</div></div></div></div><div class=bgGary style=z-index:999 ng-show=wxApplyCtrl.refundFlag><div class=middle><div class=center style="border-radius:8px;background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset"><div class=form_padding><div style="text-align:center;font-size:0.14rem;color:#999;margin:0 0.23rem;border-bottom:1px #999 dashed;height:0.31rem;line-height:0.16rem">注意</div><div style="text-align:center;padding:0.26rem 0.29rem 0 0.29rem"><div style=line-height:0.23rem;color:#333;font-size:0.16rem>充值较小的金额，您的折扣将会下降，是否继续充值</div></div></div><div class=pointer style="border-top:1px solid #e1e1e1;text-align:center;height:0.45rem;line-height:0.45rem;margin-top:0.1rem;font-size:0.16rem"><div style=width:49%;color:#999 class=float_left ng-click=wxApplyCtrl.wxPay()>确定</div><div style=width:1px;height:0.45rem;background:#e1e1e1 class=float_left></div><div style=width:49%;color:#108ee9 class=float_left ng-click="wxApplyCtrl.refundFlag = false">取消</div></div><div class=clear></div></div></div></div><div style=height:0.5rem;width:100%></div><div style="position:fixed;bottom:0px;width:100%;background:#fff;color:#888;border-top:1px solid #ddd" class=pointer><div style=font-size:0.14rem;line-height:0.28rem;padding-left:0.2rem><img ng-show=!wxApplyCtrl.agreeFlag ng-click="wxApplyCtrl.agreeFlag=true" class=float_left style="margin:0.06rem 0.05rem 0 0" src="assets/images/select_box.png"> <img ng-show=wxApplyCtrl.agreeFlag ng-click="wxApplyCtrl.agreeFlag=false" class=float_left style="margin:0.06rem 0.05rem 0 0" src="assets/images/select_box_on.png"><div class=float_left>我已阅读并同意</div><div class=float_left style=color:#00a1ff ui-sref=wx-rule>《充值服务条款》</div></div><div class=clear></div><div style=font-size:0.14rem;height:0.28rem;line-height:0.28rem;padding-left:0.2rem><span ng-bind=wxApplyCtrl.levelDes>黄金会员</span> <span ng-bind="\'现金账户:\'+wxApplyCtrl.price+\'元\'" style="margin:0 0.2rem">现金账户:9000</span> <span ng-bind="\'虚拟账户:\'+wxApplyCtrl.member.virtualAccount.total+\'元\'">虚拟账户:500</span></div><div style="padding:0.15rem;border-top:1px solid #ddd" class=pointer><div style=height:0.44rem;line-height:0.44rem;text-align:center;background:#00a1ff;color:white;border-radius:4px;font-size:0.2rem ng-click=wxApplyCtrl.wxPay()>确认支付</div></div></div></div>'), a.put("app/wx/buy/wx-buy.html", '<style>html{\n		font-size:100px;\n	}</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-height:7rem;background:#fff><!--     <img ng-show="wxBuyCtrl.state == \'order\'" class="float_right pointer" src="assets/images/wxcancel.png" ui-sref="wx-sure" style="width:0.2rem;margin:0.1rem 0.1rem 0 0 "/> \n    <div class="clear"></div> --><div style="margin:0 0.15rem;padding:0.2rem 0;border-bottom:1px solid #ddd" ng-repeat="card in wxBuyCtrl.cards" ng-click=wxBuyCtrl.turn(card) class=pointer><div class=float_left style=height:1rem;width:1.6rem;margin-right:0.2rem;background:#ddd;border-radius:4px></div><div class=float_left><div style=line-height:0.25rem;font-size:0.18rem;color:#000;font-weight:700;margin-top:0.1rem ng-bind=card.name>500元储值卡</div><div style="line-height:0.2rem;font-size:0.14rem;margin:0.05rem 0 0.1rem 0"><span ng-bind=card.description style=margin-right:0.1rem>黄龙全场通用</span><span>可退款</span></div><div style=line-height:0.2rem;font-size:0.14rem;color:#ff4949;font-weight:600><span>￥</span><span style=font-size:0.2rem ng-bind=card.realPrice>480</span></div></div><div class=clear></div></div><div style=height:0.5rem;width:100%></div><div ng-show="wxBuyCtrl.state != \'order\'" style="position:fixed;bottom:0px;width:100%;height:0.44rem;background:#fff;line-height:0.44rem;text-align:center;font-size:0.17rem;color:#888;border-top:1px solid #ddd" class=pointer><div style=width:33% class="float_left pointer" ui-sref=wx-order>订场</div><div style=width:1px;height:0.2rem;background:#ddd;margin-top:0.11rem class=float_left></div><div style=width:33%;color:#00a1ff class=float_left>购买</div><div style=width:1px;height:0.2rem;background:#ddd;margin-top:0.11rem class=float_left></div><div style=width:33% class="float_left pointer" ui-sref=wx-me>我的</div></div><div class=bgGary ng-show=wxBuyCtrl.ruleFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset;border-radius:10px"><div style="padding:0.2rem 0.1rem 0.1rem 0.1rem"><div style=color:#999;font-size:0.14rem;line-height:0.16rem>抱歉，请先去场馆柜台完成实名认证，才可以购买数额大的充值卡</div></div><div class=pointer style="text-align:center;color:#00a1ff;font-size:0.18rem;width:100%;border-top:1px solid #d3dce6;height:0.4rem;line-height:0.4rem" ng-click="wxBuyCtrl.ruleFlag = false">我知道了</div></div></div></div></div>'), a.put("app/wx/buy/wx-confirm.html", '<style>html{\n		font-size:100px;\n	}</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-height:100%;background:#fff;padding-top:1.24rem><img src=assets/images/pic_ok.png style="margin-left:-0.3rem;position:absolute;left:50%;width:0.6rem;top:0.56rem"><div style=text-align:center><div style=height:0.25rem;font-size:0.18rem;color:#333;line-height:0.25rem>支付成功</div><div style=height:0.20rem;font-size:0.148rem;color:#999;line-height:0.20rem;margin-top:0.16rem>如果遇到网络延迟，最迟半小时到账</div><div style=height:0.33rem;font-size:0.24rem;color:#333;line-height:0.33rem;margin-top:0.77rem ng-bind="\'￥\'+wxConfirmCtrl.price">支付成功</div></div><div ng-click=wxConfirmCtrl.p() style="border:1px solid #108EE9;border-radius:4px;position:absolute;left:50%;width:1.6rem;height:0.4rem;bottom:0.4rem;margin-left:-0.8rem;text-align:center;line-height:0.4rem;color:#108ee9">完成</div></div>'), a.put("app/wx/buy/wx-rule.html", '<style>html{\n		font-size:100px;\n	}</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style="width:100%;min-width:1.38rem;min-height:7rem;background:#f8f8f8;padding:0 0.15rem"><div style=font-size:0.18rem;padding-top:0.15rem;text-align:center>浙江省黄龙体育中心全民健身会员账户章程</div><div style=margin-top:0.1rem;text-align:center>第一章 总则</div><div style=margin-top:0.1rem;line-height:0.2rem><div>1.1为适应电子支付业务的发展，规范浙江省黄龙体育中心（以下简称“本中心”）及消费者就有关本中心发行的单用途商业预付账户的购买、使用行为，为社会各界提供全面优质的服务，根据国家法律、法规等规章制度以及行业惯例，特制定本章程。</div><div>1.2 本会员使用范围仅限于本中心或本中心所属机构或特许经营体系内兑付货物或预订场地，其功能主要为提供全面优质的服务。</div><div>1.3注册会员须遵守本章程使用全民健身账户。</div><div>1.4本章程涉及的部分名词遵从如下定义：</div><div>1、黄龙会员、注册会员或会员账户的单位或个人。</div><div>2、会员账户内设有三个帐户：现金帐户、虚拟帐户和专用帐户。</div><div>3、以下黄龙会员全称为黄龙体育中心全民健身会员账户</div></div><div style=margin-top:0.1rem;text-align:center>第二章 会员注册</div><div style=margin-top:0.1rem;line-height:0.2rem><div>2.1个人、单位或及其代理人均可向本中心或及其代理服务中心注册黄龙会员账户，或网上进行新建非实名账户，在黄龙各服务中心进行线下实名认证，注册成功即视为自愿遵守本章程。</div><div>2.2会员认证制度：黄龙会员为个人或单位注册充值，须出示有效身份证件填进行实名认证，并留存姓名或单位名称、有效身份证件号码和有效手机联系方式个人有效身份证件包括居民身份证、户口簿、军人身份证件、武警身份证件、港澳台居民通行证、护照等。单位有效身份证件包括营业执照、事业单位法人证书、税务登记证、组织机构登记代码证等。本中心或代理售卡点保存购卡人的登记信息5年以上，同时对会员的身份信息和交易信息保密，除法律另有规定外，不向第三方提供。</div><div>2.3非现金购卡制度：单位一次性购充值金额达5000元（含）以上或个人一次性充值金额达5000元（含）以上的，须通过银行转账</div><div>2.4限额发行制度：单张记名卡限额（指卡内余额，包括充值后资金余额）不得超过5000元</div></div><div style=margin-top:0.1rem;text-align:center>第三章 使用</div><div style=margin-top:0.1rem;line-height:0.2rem><div>3.1黄龙会员账户有充值、消费、消费记录查询、充值记录查询等功能，其应用覆盖综合消费系统，包括黄龙体育中心内各个运动健身场馆消费和健身培训，各场馆内黄龙自主经营小卖部的消费。</div><div>3.2本中心或黄龙服务中心对黄龙会员提供办卡充值、换卡等配套服务；如需使用线下会员卡，可至服务中心进行登记购买，购卡需缴纳 10元/张的补卡工本费</div><div>3.3原全名健身卡客户可凭旧卡到本中心指定场所免费补换新卡，若记名卡遗失，凭有效信息可在本中心办理补卡，补换新卡时均需缴纳 10元/张的补卡工本费</div><div>3.4使用黄龙会员账户购买商品后需要退货的，经管理人员核实，本中心或受理企业应将资金退至原账户余额，不退现金。</div><div>3.5黄龙会员账户充值类别：黄金会员、白银会员、普通会员、非实名会员。</div><div>3.6黄龙会员账户等级制度及充值的优惠</div><div>1、黄龙会员账户等级实行自动升降级制度，根据用户每次充值金额的不同进行调整。每次充值3000元以下金额为普通会员，充值3000元为白银会员，充值5000元为黄金会员，可享受不同折扣优惠。</div><div>2、会员折扣黄金会员：每次充值现金5000元，本账户可享受8.5折优惠（折扣仅限健身项目使用）。白银会员：每次充值不少于现金3000元，本账户可享受9折优惠（折扣仅限健身项目使用）。普通会员：每次充值金额不少于200元，本账户可享受9.5折优惠（折扣仅限健身项目使用）。非实名会员账户：每次充值金额不少于100元，本帐户无折扣，需实名认证后方可升级为其他会员等级。<span style=color:red;font-weight:600>以上会员账户一经充值概不退费</span>（包含移动端等其他渠道充值）。1、凡在黄龙消费的健身会员，可凭消费记录至前台购买停车票。注：1、以上卡类折扣只适用于羽毛球、网球、壁球、乒乓球、篮球的场地消费（不含特殊项目，如灯光费等）超市购物无折扣优惠。虚拟帐户只限于场地消费，不能用于购买商品。</div><div>3.7黄龙服务中心场馆及咨询电话</div><div>黄龙训练馆： 96218-1-2</div><div>黄龙篮球馆： 96218-1-1</div><div>黄龙包玉刚游泳场： 96218-3</div><div>3.8系统预订规则</div><div>1、黄龙会员可提前7日预订场地，系统开放下一周期预订时间为7:00，会员每日每个项目限预订4小时。</div><div>2、场地撤销扣费规则：场地开场前5小时撤销不扣费，开场前5小时至2小时内撤销场地扣除金额的20%，开场前2小时内撤销场地扣除金额50%，开场后扣除全部金额。</div><div>3、如遇场馆举办大型活动（赛事）或政府行为等其他特殊原因，与会员预定时段发生冲突时，场馆提前24小时通知会员将预订时间顺延或取消，请确保预留手机号码真实有效。</div><div>4、如需消费小票，请于当天开场后及时至训练馆服务大厅打印，场馆将不予保留。</div><div>5、如需发票请于30天内凭支付信息至训练馆服务大厅办理。</div><div>6、室外网球场：若遇雨雪天造成场地无法使用，系统后台自动取消，费用退还到对应手机的会员账户。如果发生客户自行取消导致的扣费问题请联系工作人员解决。</div><div>7、室外五人制足球场：若遇雨雪天造成场地无法使用，联系工作人员进行核实后，费用退还到对应手机的会员账户。</div><div>8、黄龙会员使用场地不得用于经营性俱乐部活动、组织培训、比赛或挪作他用，会员客户在使用场地时应遵守场地管理制度的规定。</div></div><div style=margin-top:0.1rem;text-align:center>第四章 当事人权利和义务</div><div style=margin-top:0.1rem;line-height:0.2rem><div>4.1本中心的权利：</div><div>1.本中心为黄龙会员提供的各种免费增值服务，本中心有单方终止的权利，且无须事先征得账户所有者同意。</div><div>2.本中心若发现黄龙会员有使用非法软件预订场地等导致账户、系统等安全问题的，一经核实将冻结该账户余额，并移交相关机构追究法律责任.</div><div>4.2本中心的义务：</div><div>1.本中心以书面或通过网站等方式提供黄龙会员账户使用的有关资料，包括章程、协议、使用说明、收费项目及标准等。</div><div>2.本中心按约定通过有关渠道为黄龙会员提供服务，包括但不限于电话、网站、网点咨询服务。</div><div>3.本中心依法对黄龙会员信息承担保密义务，未经当事人同意不得向任何单位或个人披露，但法律、法规和规章另有规定，或黄龙会员与本中心另有约定的除外。</div><div>4.3黄龙会员的权利：</div><div>1.黄龙会员享有按规定享受场地服务的权利。</div><div>2.黄龙会员有权知悉会员账户的功能、使用方法、收费项目及标准。</div><div>3.黄龙会员对交易有疑问的，有权在规定时间内向本中心提出查询或更正要求,并提供消费明细。</div><div>4.4黄龙会员的义务：</div><div>1.黄龙会员未妥善保管，导致账户遗失、灭失的，并未及时冻结而造成的经济损失的，应当自行承担经济损失。</div><div>2.黄龙会员对个人账户密码保管不善，导致他人冒用造成的经济损失，应当自行承担。</div><div>3.黄龙会员不得在本中心指定场所以外的其他场所使用，黄龙未按约定进行交易造成经济损失的，应当自行承担。</div><div>4.黄龙会员不得将全民健身账户用于套现、交易、洗钱等违法行为。</div></div><div style=margin-top:0.1rem;text-align:center>第五章 纠纷处理原则及违约责任</div><div style=margin-top:0.1rem;line-height:0.2rem><div>5.1本中心办理预付业务的部门及黄龙会员均须遵守本章程</div><div>5.2本中心与黄龙会员及本中心业务处理有关的部门之间发生的争议，按照本章程及有关的法律法规进行处理。</div><div>5.3任何一方违反规定的内容，给另一方造成损害的，应当承担违约责任，按照法律赔偿另一方由此造成的损失。</div><div>5.4任何一方违反规定内容给另一方造成损害的，受损害一方应当采取合措施避免损失扩大的，因防止损失扩大而支出的合理费用，由违约方承担。一方没有采取合理措施避免损失扩大的，对损失扩大部分违约方不承担赔偿责任。</div><div>5.5如果本章程与国家的法律、法规有冲突的，将按照国家法律、法规的规定执行。</div></div><div style=margin-top:0.1rem;text-align:center>第六章 附则</div><div style=margin-top:0.1rem;line-height:0.2rem><div>6.1本章程未尽事宜按照国家有关法律、法规、规章及行业惯例执行，如本中心与购卡者另有约定的，遵从双方约定。</div><div>6.2本章程由本中心负责依法制定、修改和解释。本章程的修改或调整公布后即生效，无须另行专门通知注册会员。修改后的条款对所有当事人具有同等约束力。</div><div>6.3本章程自会员注册认证起正式生效。</div><div>6.4最终解释权归浙江省黄龙体育中心。</div></div></div>'),
            a.put("app/wx/check/wx-check.html", '<style>html{\n        font-size:100px;\n    }</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-width:1.38rem;min-height:7rem;background:#f8f8f8;padding:0.2rem><div style="background:#fff;width:100%;height:0.48rem;line-height:0.48rem;border-radius:4px;margin-top:0.4rem;padding:0 0.1rem"><input class=float_left ng-model=wxCheckCtrl.cardNo style=border:0;font-size:0.16rem placeholder="请输入9位卡号"><div ng-click=wxCheckCtrl.check() class="float_right pointer" style=color:#00a1ff;font-size:0.18rem>查询</div></div><div ng-show=wxCheckCtrl.flag style=background:#fff;margin-top:0.4rem;height:2.5rem;color:#666;padding:0.1rem;font-size:0.16rem;line-height:0.3rem><div><span>持卡人姓名：</span><span ng-bind=wxCheckCtrl.name></span></div><div><span>持卡人证件：</span><span ng-bind=wxCheckCtrl.idCard></span></div><div><span style=color:#fff>手</span><span>手机号码：</span><span ng-bind=wxCheckCtrl.tel></span></div><div><span style=color:#fff>手</span><span>现金账户：</span><span ng-bind=wxCheckCtrl.rprice></span></div><div><span style=color:#fff>手</span><span>虚拟账户：</span><span ng-bind=wxCheckCtrl.xprice></span></div></div><div class=bgGary ng-show=wxCheckCtrl.errorFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset;border-radius:10px"><div style="padding:0.2rem 0.1rem 0.1rem 0.1rem"><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>注意</div><div style=margin:0.1rem;color:#999;text-align:center ng-bind=wxCheckCtrl.err>支付成功</div></div><div class=pointer style="text-align:center;color:#00a1ff;font-size:0.18rem;width:100%;border-top:1px solid #d3dce6;height:0.4rem;line-height:0.4rem" ng-click="wxCheckCtrl.errorFlag = false">我知道了</div></div></div></div></div>'), a.put("app/wx/login/wx-account.html", '<style>html{\n		font-size:100px;\n	}</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-width:1.38rem;min-height:7rem;background:#f8f8f8><div ng-show="wxAccountCtrl.state == \'one\' && (member.num == wxAccountCtrl.order || !member.num)" ng-repeat="member in wxAccountCtrl.members" class=pointer style="border-bottom:1px solid #ddd;padding:0.15rem;background:#fff" ng-click=wxAccountCtrl.chooseOne(member)><img ng-show=member.oneSelect style=width:0.2rem;margin-top:0.2rem src=assets/images/bluesure.png class="float_left"> <img ng-show=!member.oneSelect style=width:0.2rem;margin-top:0.2rem src=assets/images/graysure.png class="float_left"><div class=float_left style=margin-left:0.1rem;font-size:0.15rem><div><span style=font-size:0.17rem;letter-spacing:0.04rem;font-weight:650 ng-bind="member.cardNo?member.cardNo:\'暂无\'"></span></div><div style=margin-top:0.1rem;color:#999><span ng-bind="member.name?member.name:\'暂无\'">龙傲天</span> <span ng-bind="member.idCard?member.idCard:\'暂无\'" style=margin-left:0.2rem>3303333333333333</span></div><div style=margin-top:0.1rem;color:#999><span ng-bind="\'现金账户：\'+member.cards[0].total">现金账户：</span> <span style=margin-left:0.2rem ng-bind="\'虚拟账户：\'+member.virtualAccount.total">虚拟账户：</span></div></div><div ng-show=member.oneSelect class=float_right style=font-size:0.17rem;color:red;margin-top:0.25rem>主账户</div><div class=clear></div></div><div ng-show="wxAccountCtrl.state == \'two\' && (member.num == wxAccountCtrl.order || !member.num)" class=pointer style="border-bottom:1px solid #ddd;padding:0.15rem;background:#fff" ng-click=wxAccountCtrl.chooseTwo(member) ng-repeat="member in wxAccountCtrl.members"><img ng-show="member.twoSelect || member.oneSelect" style=width:0.2rem;margin-top:0.2rem src=assets/images/bluesure.png class="float_left"> <img ng-show="!member.twoSelect && !member.oneSelect" style=width:0.2rem;margin-top:0.2rem src=assets/images/graysure.png class="float_left"><div class=float_left style=margin-left:0.1rem><div><span style=font-size:0.17rem ng-bind=member.cardNo></span></div><div style=margin-top:0.1rem;color:#999><span ng-bind=member.name>龙傲天</span> <span ng-bind=member.idCard style=margin-left:0.2rem>3303333333333333</span></div><div style=margin-top:0.1rem;color:#999><span ng-bind="\'现金账户：\'+member.cards[0].total">现金账户：</span> <span style=margin-left:0.2rem ng-bind="\'虚拟账户：\'+member.virtualAccount.total">虚拟账户：</span></div></div><div ng-show=member.oneSelect class=float_right style=font-size:0.17rem;color:red;margin-top:0.25rem>主账户</div><div class=clear></div></div><div style=height:0.5rem;width:100%></div><div ng-click=wxAccountCtrl.back() class=pointer style=background:#f8f8f8;position:fixed;bottom:0;width:100%;padding:0.1rem;text-align:center><div style="background:#00a1ff;color:#fff;border-radius:4px;padding:0.1rem 0">确认</div></div><div class=bgGary ng-show=wxAccountCtrl.errorFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset;border-radius:10px"><div style="padding:0.2rem 0.1rem 0.1rem 0.1rem"><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>注意</div><div style=margin:0.1rem;color:#999;text-align:center ng-bind=wxAccountCtrl.err>支付成功</div></div><div class=pointer style="text-align:center;color:#00a1ff;font-size:0.18rem;width:100%;border-top:1px solid #d3dce6;height:0.4rem;line-height:0.4rem" ng-click="wxAccountCtrl.errorFlag = false">我知道了</div></div></div></div></div>'), a.put("app/wx/login/wx-code.html", '<style>html{\n        font-size:100px;\n    }</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style="width:100%;min-width:1.38rem;min-height:7rem;background:#F0EFF3;padding:0.2rem 0"><!--     <img class="float_left pointer" src="assets/images/back.png" ui-sref="wx-new" style="height:0.22rem"/> \n    <img class="float_right pointer" src="assets/images/wxcancel.png" ui-sref="wx-order" style="width:0.2rem"/> \n    <div class="clear"></div> --><div style="padding:0 0 0.1rem 0.1rem;color:#ff3f3f;font-weight:700">新用户实名注册</div><div ng-show=wxCodeCtrl.newFlag style="height:0.43rem;line-height:0.43rem;background:#fff;padding:0 0.15rem" class=pointer><div class=float_left style=font-size:0.17rem;color:#000;width:20%>姓名</div><input class=float_left style=border:0px;font-size:0.16rem;width:80% ng-change=wxCodeCtrl.judge() ng-model=wxCodeCtrl.name placeholder="为保证订场信息准确，请使用真实姓名"><div class=clear></div></div><div class=bgGary ng-show=wxCodeCtrl.errorFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset;border-radius:10px"><div style="padding:0.2rem 0.1rem 0.1rem 0.1rem"><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>注意</div><div style=margin:0.1rem;text-align:center><div style=line-height:0.2rem;color:#888;font-size:0.15rem ng-bind=wxCodeCtrl.err></div></div></div><div class=pointer style="text-align:center;color:#00a1ff;font-size:0.18rem;width:100%;border-top:1px solid #d3dce6;height:0.4rem;line-height:0.4rem" ng-click="wxCodeCtrl.errorFlag = false">我知道了</div></div></div></div><div style="padding:0 0.2rem"><div ng-show=!wxCodeCtrl.flag style="border:1px solid #E5EAEE;border-radius:4px;text-align:center;height:0.5rem;line-height:0.5rem;background:#fff;color:#aaa;margin-top:0.38rem;font-size:0.18rem">确认</div><div ng-show=wxCodeCtrl.flag style="border:1px solid #E5EAEE;border-radius:4px;text-align:center;height:0.5rem;line-height:0.5rem;background:#00a1ff;color:#fff;margin-top:0.38rem;font-size:0.18rem" class=pointer ng-click=wxCodeCtrl.sure()>确认</div></div></div>'), a.put("app/wx/login/wx-create.html", '<style>html{\n		font-size:100px;\n	}</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-width:1.38rem;min-height:7rem;background:#f8f8f8><div style="height:0.36rem;line-height:0.36rem;padding:0 0.1rem;color:#ff4949;background:#f9c6c6;font-size:0.16rem">请确保每个帐号手机号是唯一的</div><div ng-repeat="ar in wxCreateCtrl.arr" style=font-size:0.17rem><div style="height:0.44rem;line-height:0.44rem;padding:0 0.1rem;border-bottom:1px solid #ddd"><div class=float_left ng-bind="\'帐户\'+ar.order"></div><div class="float_right pointer" ng-click=wxCreateCtrl.delete(ar) style=color:#999>删除</div></div><div class=pointer ng-click="wxCreateCtrl.turn(\'one\',ar.order)" style="height:0.44rem;line-height:0.44rem;border-bottom:1px solid #ddd;background:#fff;padding:0 0.1rem"><div class=float_left style=width:26%>选择帐号</div><div ng-show=!ar.cardNo class=float_left style=color:#767676>选择要保留的账号</div><div ng-show=ar.cardNo class=float_left ng-bind=ar.cardNo></div><img class=float_right src=assets/images/arrowRight.png style="margin-top:0.15rem"></div><div class=clear></div><div style="height:0.44rem;line-height:0.44rem;border-bottom:1px solid #ddd;background:#fff;padding-left:0.1rem"><div class=float_left style=width:25%>姓名</div><input class=float_left style=border:0;height:0.41rem;width:75% ng-model=ar.name placeholder="输入持有人姓名"></div><div class=clear></div><div style="height:0.44rem;line-height:0.44rem;border-bottom:1px solid #ddd;background:#fff;padding-left:0.1rem"><div class=float_left style=width:25%>身份证</div><input class=float_left style=border:0;height:0.41rem;width:75% ng-model=ar.idCard placeholder="输入持有人身份证号"></div><div class=clear></div><div style="height:0.44rem;line-height:0.44rem;border-bottom:1px solid #ddd;background:#fff;padding-left:0.1rem"><div class=float_left style=width:25%>手机号码</div><input class=float_left style=border:0;height:0.41rem;width:75% ng-model=ar.tel placeholder="请输入手机号"></div><div class=clear></div><!--         <div ng-show="ar.ids.length == 0" class="pointer" ng-click="wxCreateCtrl.turn(\'two\',ar.order)" style="height:0.44rem;line-height:0.44rem;border-bottom:1px solid #ddd;background:#fff;padding:0 0.1rem">\n            <div class="float_left" style="width:26%">合并账号</div>\n            <div class="float_left" style="color:#767676">选择要合并的账号</div>\n            <img class="float_right" src="assets/images/arrowRight.png" style="margin-top:0.15rem" />\n        </div> --><div ng-show="ar.ids.length == 0" class=pointer ng-click="wxCreateCtrl.turn(\'two\',ar.order)" style="height:0.44rem;line-height:0.44rem;border-bottom:1px solid #ddd;background:#fff;padding:0 0.1rem;color:#00a1ff"><div class=float_left>请选择要合并的账号</div><img class=float_right src=assets/images/arrowRight.png style="margin-top:0.15rem"></div><div ng-show="ar.ids.length != 0" class=pointer ng-click="wxCreateCtrl.turn(\'two\',ar.order)" style="border-bottom:1px solid #ddd;background:#fff;;display:flex;align-items:center;padding-left:0.1rem"><div class=float_left style=width:25%>合并账号</div><div class=float_left style=width:75%;padding-right:0.1rem;color:#00a1ff><div ng-repeat="m in ar.ids"><div ng-show=!m.flag style="height:0.44rem;line-height:0.44rem;border-bottom:1px solid #ddd"><div class=float_left><span ng-bind=m.name style=margin-right:0.15rem></span><span ng-bind="\'账户余额:\'+m.price"></span></div><img class=float_right src=assets/images/arrowRight.png style="margin-top:0.15rem"></div><div ng-show=m.flag style=height:0.44rem;line-height:0.44rem><div class=float_left><span ng-bind=m.name style=margin-right:0.15rem></span><span ng-bind="\'账户余额:\'+m.price"></span></div><img class=float_right src=assets/images/arrowRight.png style="margin-top:0.15rem"></div></div><div class=clear></div></div></div><div class=clear></div></div><div style="height:0.44rem;line-height:0.44rem;background:#fff;margin-top:0.15rem;padding-left:0.1rem;border-top:1px solid #ddd;border-bottom:1px solid #ddd" class=pointer ng-click=wxCreateCtrl.add()><img class=float_left src=assets\\images\\blueadd.png style="margin-right:0.1rem;height:0.15rem;margin-top:0.13rem"><div class=float_left style=color:#00a1ff;font-size:0.17rem>添加新账户</div></div><div style=height:0.7rem;width:100%></div><div ng-click=wxCreateCtrl.judge() class=pointer style=background:#f8f8f8;position:fixed;bottom:0;width:100%;padding:0.1rem;text-align:center><div style=background:#00a1ff;color:#fff;border-radius:4px;height:0.44rem;line-height:0.44rem;font-size:0.17rem>预览处理后的账号</div></div><div class=bgGary style=z-index:999 ng-show=wxCreateCtrl.accountFlag><div class=middle><div class=center style="background:#fff;width:300px;border:1px solid #ddd;border-radius:10px;overflow:hidden;padding-top:0.1rem"><div><img src=assets\\images\\cancel.png style=width:0.11rem;margin-right:0.1rem ng-click="wxCreateCtrl.accountFlag = false" class="float_right pointer"><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700;margin-left:5px>注意</div></div><div class=clear></div><div style=margin:0.1rem;text-align:center;line-height:0.18rem ng-bind=wxCreateCtrl.wordErr>您还有账号未被绑定或合并，如果您选择继续操作，您的这些未绑定账号将被删除，是否继续？</div><div class=pointer style="border-top:1px solid #ddd;text-align:center;height:0.4rem;line-height:0.4rem"><!-- <div style="width:49%;color:#999" class="float_left" ng-click="wxCreateCtrl.wxPay()">微信支付</div> --><div style=width:49%;color:#999 class=float_left ng-click="wxCreateCtrl.accountFlag = false">取消</div><div style=width:1px;height:0.4rem;background:#ddd class=float_left></div><div style=width:49%;color:#00a1ff class=float_left ng-click=wxCreateCtrl.sure()>继续</div></div><div class=clear></div></div></div></div><div class=bgGary ng-show=wxCreateCtrl.errorFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset;border-radius:10px"><div style="padding:0.2rem 0.1rem 0.1rem 0.1rem"><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>注意</div><div style=margin:0.1rem;color:#999;text-align:center ng-bind=wxCreateCtrl.err>支付成功</div></div><div class=pointer style="text-align:center;color:#00a1ff;font-size:0.18rem;width:100%;border-top:1px solid #d3dce6;height:0.4rem;line-height:0.4rem" ng-click="wxCreateCtrl.errorFlag = false">我知道了</div></div></div></div></div>'), a.put("app/wx/login/wx-infoo.html", '<style>html{\n		font-size:100px;\n	}</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-width:1.38rem;min-height:7rem;background:#fff;padding:0.2rem><div style=font-size:0.18rem>系统正在维护中，将于12月20号开放，敬请期待！</div></div>'), a.put("app/wx/login/wx-message.html", '<style>html{\n		font-size:100px;\n	}</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-width:1.38rem;min-height:7rem;background:#F0EFF3><div ng-show="wxMessageCtrl.state == \'oldAdd\'" style=padding:0.2rem;position:fixed;top:0;background:#f8f8f8;width:100%><div style=font-size:0.18rem;color:#00a1ff>注意</div><div ng-show="wxMessageCtrl.state == \'new\'" style=margin-top:0.1rem;color:#666;line-height:0.18rem>抱歉，系统正在调试中，目前只服务老用户。近期内会开放新用户注册。</div><div ng-show="wxMessageCtrl.state == \'oldAdd\'" style=margin-top:0.1rem;color:#666;line-height:0.24rem;font-size:0.17rem><div>由于系统升级，每个手机号只能绑定一张会员卡。你可以对这些会员卡合并到某一张卡内，或者将卡绑定到其他手机号码上</div><div>如有疑问请致电：0571-56133150</div></div></div><div ng-show="wxMessageCtrl.state == \'old\'" style=position:fixed;top:0;background:#F0EFF3;width:100%><div style="font-size:0.14rem;color:#999;padding:0.2rem 0 0.1rem 0.2rem">老用户信息核对</div><div style="padding:0 0.2rem 0.1rem 0.2rem;color:#888;line-height:0.24rem;font-size:0.15rem;width:100%;background:#fff"><div style="height:0.48rem;line-height:0.48rem;border-bottom:1px #e5e5e5 solid"><div class=float_left>账户姓名</div><div class=float_right style=font-size:0.24rem;color:#000 ng-bind=wxMessageCtrl.name>xx</div></div><div class=clear></div><div style=height:0.28rem;line-height:0.28rem;margin-top:0.1rem><div class=float_left>手机号码</div><div class=float_right ng-bind=wxMessageCtrl.tel>xx</div></div><div class=clear></div><div style=height:0.28rem;line-height:0.28rem><div class=float_left>原卡号</div><div class=float_right ng-bind=wxMessageCtrl.cardNo>xx</div></div><div class=clear></div><div style=height:0.28rem;line-height:0.28rem><div class=float_left>现金账户</div><div class=float_right ng-bind=wxMessageCtrl.p1>xx</div></div><div class=clear></div><div style=height:0.28rem;line-height:0.28rem\\><div class=float_left>虚拟账户</div><div class=float_right ng-bind=wxMessageCtrl.p2>xx</div></div><div class=clear></div><!--             <div ng-bind="\'姓名:\'+wxMessageCtrl.name"></div>\n            <div ng-bind="\'联系方式:\'+wxMessageCtrl.tel"></div>\n            <div ng-bind="\'原卡号:\'+wxMessageCtrl.cardNo"></div>\n            <div ng-bind="\'现金账户:\'+wxMessageCtrl.p1"></div>\n            <div ng-bind="\'虚拟账户:\'+wxMessageCtrl.p2"></div>           \n            <div>如有疑问请致电：0571-56133150</div> --></div><div ng-click=wxMessageCtrl.bind() class=pointer style="border-top:1px #e5e5e5 solid;line-height:0.4rem;height:0.4rem;text-align:center;color:#00a1ff;font-size:0.15rem;background:#fff">确认信息</div><div style="font-size:0.14rem;color:#999;padding:0.1rem 0 0.1rem 0.2rem">如有疑问请致电：0571-56133150</div></div><div ng-show="wxMessageCtrl.state == \'oldAdd\'" style=margin-top:1.5rem;background:#fff;padding-top:0.23rem><div ng-bind="\'此手机号绑定了\'+wxMessageCtrl.members.length+\'张卡\'" style="margin:0 0 0.1rem 0.2rem;font-size:0.16rem;color:#666"></div><div style="padding:0 0.2rem;margin-bottom:0.1rem" ng-repeat="member in wxMessageCtrl.members"><div style="border:1px solid #ddd;padding:0.13rem 0.12rem;background:#fff;font-size:0.15rem"><div style=font-size:0.17rem;letter-spacing:0.04rem;font-weight:650 ng-bind="member.cardNo?member.cardNo:\'暂无卡号\'"></div><div style=margin-top:0.1rem;color:#666><span ng-bind="member.name?member.name:\'暂无姓名\'">龙傲天</span> <span ng-bind="member.idCard?member.idCard:\'暂无身份证\'" style=margin-left:0.2rem>3303333333333333</span></div><div style=margin-top:0.1rem;color:#666><span ng-bind="\'现金账户：\'+(member.cards[0]?member.cards[0].total:\'0\')">现金账户：</span> <span style=margin-left:0.2rem ng-bind="\'虚拟账户：\'+(member.virtualAccount?member.virtualAccount.total:\'0\')">虚拟账户：</span></div></div></div></div><div style=height:0.5rem;width:100%></div><div ng-show="wxMessageCtrl.state == \'oldAdd\'" ng-click=wxMessageCtrl.turn() class=pointer style=background:#fff;position:fixed;bottom:0;width:100%;padding:0.1rem;text-align:center><div style=background:#00a1ff;color:#fff;border-radius:4px;line-height:0.44rem;height:0.44rem;font-size:0.17rem>开始合并或重新绑定</div></div><!--     <div ng-show="wxMessageCtrl.state == \'old\'" ng-click="wxMessageCtrl.bind()" class="pointer" style="background:#fff;position:fixed;bottom:0;width:100%;padding:0.1rem;text-align:center">\n        <div style="background:#00a1ff;color:#fff;border-radius:4px;line-height:0.44rem;height:0.44rem;font-size:0.17rem">确认绑定</div>\n    </div>\n --><div class=bgGary ng-show=wxMessageCtrl.errorFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset;border-radius:10px"><div style="padding:0.2rem 0.1rem 0.1rem 0.1rem"><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>注意</div><div style=margin:0.1rem;color:#666;text-align:center ng-bind=wxMessageCtrl.err>支付成功</div></div><div class=pointer style="text-align:center;color:#00a1ff;font-size:0.18rem;width:100%;border-top:1px solid #d3dce6;height:0.4rem;line-height:0.4rem" ng-click="wxMessageCtrl.errorFlag = false">我知道了</div></div></div></div></div>'), a.put("app/wx/login/wx-new.html", '<style>html{\n        font-size:100px;\n    }</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style="width:100%;min-width:1.38rem;min-height:7rem;background:#F0EFF3;padding:0.2rem 0"><div style="padding:0 0 0.1rem 0.15rem">手机号验证</div><div style="height:0.43rem;line-height:0.43rem;background:#fff;padding:0 0.15rem;border-top:1px solid #ddd" class=pointer><div class=float_left style=font-size:0.17rem;color:#000;width:25%>手机号码</div><input class=float_left style=border:0px;font-size:0.16rem;width:33%;height:0.4rem ng-model=wxNewCtrl.tel placeholder="填写手机号码"><div ng-click=wxNewCtrl.sendCode() class="float_right pointer" style="text-align:center;color:#00a1ff;border-left:1px solid #ddd;padding-left:0.15rem;letter-spacing:2">获取验证码</div><div class=clear></div></div><div style="height:0.43rem;line-height:0.43rem;background:#fff;padding:0 0.15rem;border-top:1px solid #ddd" class=pointer><div class=float_left style=font-size:0.17rem;color:#000;width:25%>验证码</div><input class=float_left style=border:0px;font-size:0.16rem;width:33%;height:0.4rem ng-change=wxNewCtrl.judge() ng-model=wxNewCtrl.code placeholder="请输入验证码"></div><div style="padding:0 0.2rem"><div ng-show=!wxNewCtrl.flag style="border:1px solid #E5EAEE;border-radius:4px;text-align:center;height:0.4rem;line-height:0.4rem;background:#fff;color:#aaa;margin-top:0.38rem;font-size:0.18rem">确认</div><div ng-show=wxNewCtrl.flag style="border:1px solid #E5EAEE;border-radius:4px;text-align:center;height:0.4rem;line-height:0.4rem;background:#00a1ff;color:#fff;margin-top:0.38rem;font-size:0.18rem" class=pointer ng-click=wxNewCtrl.sure()>确认</div></div><div style=font-size:0.14rem;line-height:0.28rem;padding-left:0.2rem;color:#999><span>我已阅读并同意</span> <span style=color:#00a1ff class=pointer ui-sref=wx-rule>《服务条款》</span></div><div style="position:fixed;bottom:0px;width:100%;background:#fff;color:#888;border-top:1px solid #ddd"><div style=font-size:0.16rem;height:0.43rem;line-height:0.43rem;padding-left:0.15rem;color:#000>已有一卡通用户通知</div><div style=font-size:0.14rem;line-height:0.22rem;padding-left:0.15rem>如果你已有黄龙一卡通健身卡，为避免混淆手机号，请先使用老卡查询功能获知原注册手机号信息，再根据流程进行注册。如果你已弃用原卡所绑定手机号，请携带身份证来黄龙训练馆前台办理。</div><div style=height:0.44rem;line-height:0.44rem;text-align:center;font-size:0.16rem;color:#00a1ff ui-sref=wx-check class=pointer>去查询老卡</div></div><div class=bgGary ng-show=wxNewCtrl.errorFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset;border-radius:10px"><div style="padding:0.2rem 0.1rem 0.1rem 0.1rem"><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>注意</div><div style=margin:0.1rem;color:#999;text-align:center ng-bind=wxNewCtrl.err>支付成功</div></div><div class=pointer style="text-align:center;color:#00a1ff;font-size:0.18rem;width:100%;border-top:1px solid #d3dce6;height:0.4rem;line-height:0.4rem" ng-click="wxNewCtrl.errorFlag = false">我知道了</div></div></div></div></div>'), a.put("app/wx/login/wx-old.html", '<style>html{\n		font-size:100px;\n	}</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-width:1.38rem;min-height:7rem;background:#fff;padding:0.2rem><img class="float_left pointer" src=assets/images/back.png ui-sref=wx-user style="height:0.22rem"> <img class=float_right src=assets/images/wxcancel.png ui-sref=wx-order style="width:0.2rem"><div class=clear></div><input style="border:0px;border-bottom:1px solid #ddd;width:100%;padding:0 0 0.11rem 0.1rem;font-size:0.16rem;margin-top:0.7rem" ng-model=wxOldCtrl.tel ng-change=wxOldCtrl.judge() placeholder="输入办卡时预留的手机号"><div ng-show=!wxOldCtrl.flag style="border:1px solid #E5EAEE;border-radius:4px;text-align:center;height:0.5rem;line-height:0.5rem;background:#EFF2F6;color:#aaa;margin-top:0.38rem;font-size:0.18rem">验证账号</div><div ng-show=wxOldCtrl.flag style="border:1px solid #E5EAEE;border-radius:4px;text-align:center;height:0.5rem;line-height:0.5rem;background:#00a1ff;color:#fff;margin-top:0.38rem;font-size:0.18rem" class=pointer ng-click=wxOldCtrl.sendCode()>验证账号</div><div style=margin-top:0.19rem;font-size:0.14rem;line-height:0.2rem><span style=color:#b2b2b2>如果当时预留的手机号无法使用，你可去场馆前台更新手机号，也可以</span> <span style=color:#00a1ff ui-sref=wx-new class=pointer>创建新账号</span></div><div class=bgGary ng-show=wxOldCtrl.warnFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset;border-radius:10px"><div style="padding:0.2rem 0.1rem 0.1rem 0.1rem"><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>注意</div><div style=margin:0.1rem;text-align:center><div style=line-height:0.2rem;color:#888;font-size:0.15rem ng-bind=wxOldCtrl.error></div></div></div><div class=pointer style="text-align:center;color:#00a1ff;font-size:0.18rem;width:100%;border-top:1px solid #d3dce6;height:0.4rem;line-height:0.4rem" ng-click="wxOldCtrl.warnFlag = false">我知道了</div></div></div></div></div>'), a.put("app/wx/login/wx-submit.html", '<style>html{\n		font-size:100px;\n	}</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><!----><div style=width:100%;min-width:1.38rem;min-height:7rem;background:#fff><!--     <div style="background:#fff;padding-top:0.1rem">\n        <div style="padding:0 0.1rem;margin-bottom:0.1rem">\n            <div style="border:1px solid #ddd;padding:0.1rem;background:#fff">\n                <div>\n                    <span ng-bind="member.name?member.name:\'暂无\'"></span>\n                    <span style="margin-left:0.15rem" ng-bind="member.tel?member.tel:\'暂无\'"></span>\n                </div>\n                <div style="margin-top:0.1rem;color:#999" ng-bind="member.idCard?member.idCard:\'暂无\'"></div>\n                <div style="margin-top:0.1rem;color:#999">\n                    <span ng-bind="\'现金账户：\'+member.rPrice"></span>\n                    <span style="margin-left:0.2rem" ng-bind="\'虚拟账户：\'+member.fPrice"></span>\n                </div>\n            </div>\n        </div>\n    </div> --><div style="padding:0.1rem 0.2rem" ng-repeat="member in wxSubmitCtrl.members"><div style="border:1px solid #ddd;padding:0.13rem 0.12rem;background:#fff;font-size:0.15rem"><div><span style=font-size:0.17rem;letter-spacing:0.04rem class=float_left ng-bind="member.tel?member.tel:\'暂无\'"></span> <span style=color:#666;font-size:0.16rem class=float_right ng-bind="\'卡号:\'+(member.cardNo?member.cardNo:\'暂无卡号\')"></span></div><div class=clear></div><div style=margin-top:0.1rem;color:#666><span ng-bind="member.name?member.name:\'暂无姓名\'">龙傲天</span> <span ng-bind="member.idCard?member.idCard:\'暂无身份证\'" style=margin-left:0.2rem>3303333333333333</span></div><div style=margin-top:0.1rem;color:#666><span ng-bind="\'现金账户：\'+member.rPrice">现金账户：</span> <span style=margin-left:0.2rem ng-bind="\'虚拟账户：\'+member.fPrice">虚拟账户：</span></div></div></div><div style=height:0.5rem;width:100%></div><div class=pointer ng-click=wxSubmitCtrl.sure() style=background:#fff;position:fixed;bottom:0;width:100%;padding:0.1rem;text-align:center><div style=background:#00a1ff;color:#fff;border-radius:4px;height:0.44rem;line-height:0.44rem;font-size:0.17rem>确认提交</div></div><div class=bgGary ng-show=wxSubmitCtrl.errorFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset;border-radius:10px"><div style="padding:0.2rem 0.1rem 0.1rem 0.1rem"><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>注意</div><div style=margin:0.1rem;color:#999;text-align:center ng-bind=wxSubmitCtrl.err>支付成功</div></div><div class=pointer ng-show=!wxSubmitCtrl.succeedFlag style="text-align:center;color:#00a1ff;font-size:0.18rem;width:100%;border-top:1px solid #d3dce6;height:0.4rem;line-height:0.4rem" ng-click="wxSubmitCtrl.errorFlag = false">我知道了</div><div class=pointer ng-show=wxSubmitCtrl.succeedFlag style="text-align:center;color:#00a1ff;font-size:0.18rem;width:100%;border-top:1px solid #d3dce6;height:0.4rem;line-height:0.4rem" ng-click=wxSubmitCtrl.turn()>我知道了</div></div></div></div></div>'), a.put("app/wx/login/wx-user.html", '<style>html{\n		font-size:100px;\n	}</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-width:1.38rem;min-height:7rem;background:#fff;padding:0.2rem><img class="float_right pointer" src=assets/images/wxcancel.png ng-click=wxUserCtrl.back() style="width:0.2rem"><div class=clear></div><div style="width:1.2rem;height:1.2rem;border-radius:50%;background:#00a1ff;text-align:center;color:#fff;font-size:0.18rem;padding-top:0.2rem;font-weight:600;line-height:0.25rem;margin:0.5rem auto 0 auto" class=pointer ui-sref=wx-old><div>原黄龙</div><div>一卡通</div><div>用户</div></div><div style="width:1.2rem;height:1.2rem;border-radius:50%;border:1px solid #00a1ff;text-align:center;color:#00a1ff;font-size:0.18rem;padding-top:0.3rem;font-weight:600;line-height:0.25rem;margin:0.7rem auto 0 auto" class=pointer ui-sref=wx-new><div>我是</div><div>新用户</div></div></div>'), a.put("app/wx/my/wx-info.html", '<style>html{\n        font-size:100px;\n    }</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-width:1.38rem;min-height:7rem;background:#fff;text-align:center><img class="float_right pointer" src=assets/images/wxcancel.png ui-sref=wx-order style="width:0.2rem;margin:0.2rem"><div class=clear></div><div ng-show=!wxInfoCtrl.orderFlag style="width:1.2rem;height:1.2rem;margin:0.5rem auto 0 auto"><img src=assets/images/red.png style="width:1.2rem;height:1.2rem"></div><div ng-show=!wxInfoCtrl.orderFlag style=font-size:0.2rem;color:#999;margin-top:0.16rem>这时段没有订场</div><div ng-show=wxInfoCtrl.orderFlag style="text-align:left;margin:0 0.2rem"><span style=color:#00a1ff;font-size:0.2rem;margin-right:0.1rem>扫码成功</span><span style=font-size:0.14rem;color:#999>将信息展示给场地管理员</span></div><div ng-show=wxInfoCtrl.orderFlag style="text-align:left;padding:0.2rem;background:#00a1ff;border-radius:4px;margin-top:0.2rem;color:#fff;margin:0.1rem 0.2rem 0 0.2rem" ng-repeat="order in wxInfoCtrl.arr"><div><span style=font-size:0.2rem;margin-right:0.1rem ng-bind=order.fieldName>篮球04场</span><span style=font-size:0.18rem ng-bind=order.showDate>18:00-20:00</span></div><div style=font-size:0.14rem;margin-top:0.15rem><span style=margin-right:0.1rem ng-bind=order.itemNames[0]>室内篮球</span><span ng-bind=order.venueName>黄龙健身馆</span></div></div><div style="position:fixed;bottom:0px;width:100%;height:2rem;background:#f8f8f8;border-top:1px solid #ddd;text-align:left;padding:0.2rem;overflow-y:scroll"><div><span style=color:#f76260;font-size:0.17rem;margin-right:0.1rem>未开始</span><span style=font-size:0.15rem;color:#999>请在开场前15分钟入场</span></div><div ng-repeat="order in wxInfoCtrl.brr" style=padding:0.2rem;background:#e4e4e4;border-radius:4px;margin-top:0.2rem><div style=color:#696969><span style=font-size:0.2rem;margin-right:0.1rem ng-bind=order.fieldName>篮球04场</span><span style=font-size:0.18rem ng-bind=order.showDate>18:00-20:00</span></div><div style=font-size:0.14rem;color:#999;margin-top:0.15rem><span style=margin-right:0.1rem ng-bind=order.itemNames[0]>室内篮球</span><span ng-bind=order.venueName>黄龙健身馆</span></div></div></div></div>'), a.put("app/wx/my/wx-me.html", '<style>html{\n        font-size:100px;\n    }</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-width:1.38rem;min-height:7rem;background:#f8f8f8><div style="padding:0.2rem 0"><div style=background:#ddd;height:1px;width:100%></div><div style=height:0.8rem;background:#fff class=pointer ui-sref=wx-per><img style="float:left;height:0.56rem;width:0.56rem;border-radius:6px;margin:0.12rem 0.15rem 0 0.15rem" ng-src="{{wxMeCtrl.url}}"> <img ng-show=wxMeCtrl.goldFlag src=assets/images/gold.png style="float:left;height:0.2rem;width:0.2rem;margin:0.55rem 0 0 -0.3rem"> <img ng-show=wxMeCtrl.baiyinFlag src=assets/images/baiyin.png style="float:left;height:0.2rem;width:0.2rem;margin:0.55rem 0 0 -0.3rem"><div class=float_left><div style=margin-top:0.18rem><span style=color:#000;font-size:0.17rem ng-bind=wxMeCtrl.nickName></span> <span style=color:#fba814;font-size:0.14rem;margin-left:0.1rem ng-show=wxMeCtrl.goldFlag>黄金会员</span> <span style=color:#7797a9;font-size:0.14rem;margin-left:0.1rem ng-show=wxMeCtrl.baiyinFlag>白银会员</span></div><div style=margin-top:0.1rem;color:#999 ng-bind=wxMeCtrl.member.tel></div></div><img class=float_right src=assets\\images\\wxr.png style="margin:0.3rem 0.15rem 0 0;height:0.14rem"><div class=float_right style="margin:0.3rem 0.1rem 0 0;color:#999">查看账户余额</div></div><div style=background:#ddd;height:1px;width:100%></div><div style=background:#ddd;height:1px;width:100%;margin-top:0.2rem></div><div style="height:0.43rem;line-height:0.43rem;background:#fff;padding:0 0.15rem" class=pointer ui-sref=wx-myvenue><div class=float_left style=font-size:0.17rem;color:#000>我的订场</div><img class=float_right src=assets\\images\\wxr.png style="margin-top:0.15rem;height:0.12rem"><div class=float_right style=font-size:0.16rem;color:#00a1ff;margin-right:0.1rem ng-bind="wxMeCtrl.orderlists.length==0?\'暂无订场\':(wxMeCtrl.orderlists.length+\'场未开始\')"></div><div class=clear></div></div><div style=background:#ddd;height:1px;width:100%></div><div style="height:0.43rem;line-height:0.43rem;background:#fff;padding:0 0.15rem" class=pointer ui-sref=wx-money><div class=float_left style=font-size:0.17rem;color:#000>消费记录</div><img class=float_right src=assets\\images\\wxr.png style="margin-top:0.15rem;height:0.12rem"><div class=float_right style=font-size:0.16rem;color:#999;margin-right:0.1rem>查看</div><div class=clear></div></div><div style=background:#ddd;height:1px;width:100%></div><div style="height:0.43rem;line-height:0.43rem;background:#fff;padding:0 0.15rem" class=pointer ng-click="wxMeCtrl.ruleFlag = true"><div class=float_left style=font-size:0.17rem;color:#000>入场须知</div><img class=float_right src=assets\\images\\wxr.png style="margin-top:0.15rem;height:0.12rem"><div class=float_right style=font-size:0.16rem;color:#999;margin-right:0.1rem>查看</div><div class=clear></div></div><div style=background:#ddd;height:1px;width:100%></div><div style=background:#ddd;height:1px;width:100%;margin-top:0.2rem></div><div style="height:0.43rem;line-height:0.43rem;background:#fff;padding:0 0.15rem" class=pointer ui-sref=wx-two><div class=float_left style=font-size:0.17rem;color:#000>我的支付码</div><img class=float_right src=assets\\images\\wxr.png style="margin-top:0.15rem;height:0.12rem"><div class=float_right style=font-size:0.16rem;color:#999;margin-right:0.1rem>查看</div><div class=clear></div></div><div style=background:#ddd;height:1px;width:100%></div><div style="height:0.43rem;line-height:0.43rem;background:#fff;padding:0 0.15rem" class=pointer ui-sref=wx-remark><div class=float_left style=font-size:0.17rem;color:#000>意见反馈</div><img class=float_right src=assets\\images\\wxr.png style="margin-top:0.15rem;height:0.12rem"><div class=float_right style=font-size:0.16rem;color:#999;margin-right:0.1rem>查看</div><div class=clear></div></div><div style=background:#ddd;height:1px;width:100%></div><div style=background:#ddd;height:1px;width:100%;margin-top:0.2rem></div><div style="height:0.43rem;line-height:0.43rem;background:#fff;padding:0 0.15rem" class=pointer ng-click="wxMeCtrl.accountFlag = true"><div class=float_left style=font-size:0.17rem;color:#000>登出...</div><div class=clear></div></div><div style=background:#ddd;height:1px;width:100%></div></div><div class=bgGary style=z-index:999 ng-show=wxMeCtrl.accountFlag><div class=middle><div class=center style="background:#fff;width:300px;border:1px solid #ddd;border-radius:10px;overflow:hidden;padding-top:0.1rem"><div><img src=assets\\images\\cancel.png style=width:0.11rem;margin-right:0.1rem ng-click="wxMeCtrl.accountFlag = false" class="float_right pointer"><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700;margin-left:5px>注意</div></div><div class=clear></div><div style=margin:0.1rem;text-align:center;line-height:0.18rem>确定要退出该账号吗？</div><div class=pointer style="border-top:1px solid #ddd;text-align:center;height:0.4rem;line-height:0.4rem"><!-- <div style="width:49%;color:#999" class="float_left" ng-click="wxMeCtrl.wxPay()">微信支付</div> --><div style=width:49%;color:#999 class=float_left ng-click="wxMeCtrl.accountFlag = false">取消</div><div style=width:1px;height:0.4rem;background:#ddd class=float_left></div><div style=width:49%;color:#00a1ff class=float_left ng-click=wxMeCtrl.cancelbind()>确定</div></div><div class=clear></div></div></div></div><div class=bgGary ng-show=wxMeCtrl.ruleFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset;border-radius:10px"><div style="padding:0.2rem 0.1rem 0.1rem 0.1rem"><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>注意</div><div style=margin-top:0.1rem;color:#999><div style="margin:0 0.1rem 0.1rem 0.1rem">1.开场前<span style=color:red;font-weight:600>10分钟</span>才能扫码<span style=color:red;font-weight:600>验证</span></div><div style="margin:0 0.1rem 0.1rem 0.1rem">2.将入场码展示给场地工</div><div style="margin:0 0.1rem 0.1rem 0.1rem">3.场地工确认后使用场地</div></div></div><div class=pointer style="text-align:center;color:#00a1ff;font-size:0.18rem;width:100%;border-top:1px solid #d3dce6;height:0.4rem;line-height:0.4rem" ng-click="wxMeCtrl.ruleFlag = false">我知道了</div></div></div></div><div style=height:0.5rem;width:100%></div><div style="position:fixed;bottom:0px;width:100%;height:0.44rem;background:#fff;line-height:0.44rem;text-align:center;font-size:0.17rem;color:#888;border-top:1px solid #ddd" class=pointer><div style=width:33% class="float_left pointer" ui-sref=wx-order>订场</div><div style=width:1px;height:0.2rem;background:#ddd;margin-top:0.11rem class=float_left></div><div style=width:33% ui-sref=wx-apply class="float_left pointer">充值</div><div style=width:1px;height:0.2rem;background:#ddd;margin-top:0.11rem class=float_left></div><div style=width:33%;color:#00a1ff class=float_left>我的</div></div></div>'),
            a.put("app/wx/my/wx-money.html", '<style>html{\n		font-size:100px;\n	}</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-width:1.38rem;min-height:7rem;background:#fff><!--     <div style="padding:0 0.15rem 0 0.15rem;height:0.9rem;background:#FBF9F7">\n        <div class="float_left">\n            <div style="color:#999">\n                <div class="float_left" style="color:#999;font-size:0.14rem;margin-top:0.25rem">现金账户</div>\n                <div class="float_left" style="color:#00a1ff;font-size:0.2rem;margin:0.18rem 0 0 0.1rem" ng-bind="wxMoneyCtrl.price">300</div>\n            </div>\n            <div class="clear"></div>\n            <div style="color:#999;font-size:0.14rem">\n                <div class="float_left" style="margin-top:0.13rem">虚拟账户</div>\n                <div class="float_left" style="font-size:0.19rem;margin:0.08rem 0.1rem" ng-bind="wxMoneyCtrl.vp"></div>\n                <div class="float_left" style="margin-top:0.13rem" ng-show="wxMoneyCtrl.dateFlag" style="font-size:0.12rem" ng-bind="(wxMoneyCtrl.date|date:\'yyyy-MM-dd\')+\'过期\'"></div>\n            </div>\n            <div class="clear"></div>\n        </div>\n        <div class="float_right" style="line-height:0.9rem">\n            <img class="float_right pointer" ng-click="wxMoneyCtrl.turn()" style="margin-top:0.38rem;height:0.13rem" src="assets/images/arrow-rightB.png"/>\n            <div class="float_right pointer" ng-click="wxMoneyCtrl.turn()" style="color:#00a1ff;margin:0 0.1rem 0 0;font-size:0.18rem">去充值</div>\n        </div> --><!--         <div style="margin-top:0.26rem">\n            <div class="float_left pointer" style="height:0.3rem;line-height:0.3rem;font-size:0.16rem;margin-right:0.2rem" ng-style="wxMoneyCtrl.chooseFlag?wxMoneyCtrl.choose:wxMoneyCtrl.unchoose" ng-click="wxMoneyCtrl.chooseRecord(true)">消费记录</div>\n            <div class="float_left pointer" style="height:0.3rem;line-height:0.3rem;font-size:0.16rem;" ng-style="!wxMoneyCtrl.chooseFlag?wxMoneyCtrl.choose:wxMoneyCtrl.unchoose" ng-click="wxMoneyCtrl.chooseRecord(false)">充值记录</div>\n        </div> --><!--         <div class="clear"></div>\n    </div> --><div style="padding:0.1rem 0;display:flex;align-items:center;border-bottom:1px solid #ddd;width:100%;line-height:0.18rem" class=pointer ng-repeat="record in wxMoneyCtrl.records"><div class=float_left style=width:65%;margin-left:0.15rem><div ng-show=wxMoneyCtrl.chooseFlag style=font-size:0.16rem;color:#000;line-height:0.24rem;font-style:medium ng-bind=record.des>订室内篮球场18：00-20:00</div><div style=font-size:0.14rem;color:#999;line-height:0.21rem ng-bind="record.createDate | date:\'yyyy/MM/dd HH:mm\'">2017/08/08</div></div><div class=float_left style=font-size:0.18rem;color:#000;font-weight:700;width:25%;text-align:right ng-bind=record.price></div><div class=clear></div></div><div class=bgGary ng-show=wxMoneyCtrl.ruleFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset;border-radius:10px"><div style="padding:0.2rem 0.1rem 0.1rem 0.1rem"><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>注意</div><div style=margin-top:0.1rem;line-height:0.18rem;color:#999;text-align:center ng-bind=wxMoneyCtrl.rule>抱歉，暂不支持在线提现。请去场馆前台处退款</div></div><div class=pointer style="text-align:center;color:#00a1ff;font-size:0.18rem;width:100%;border-top:1px solid #d3dce6;height:0.4rem;line-height:0.4rem" ng-click="wxMoneyCtrl.ruleFlag = false">我知道了</div></div></div></div><div style=height:0.5rem;width:100%></div><!--     <div style="position:fixed;bottom:0px;width:100%;height:0.44rem;background:#fff;line-height:0.44rem;text-align:center;font-size:0.14rem;color:#888" ng-click="wxMoneyCtrl.money()" class="pointer">\n        关于提现\n    </div> --><div style=position:fixed;width:100%;height:100%;background:#000;opacity:0.5;top:0 ng-show=wxMoneyCtrl.bgFlag ng-click="wxMoneyCtrl.bgFlag = false"></div><div style=position:fixed;bottom:0px;background:#fff;width:100%;max-height:60%;overflow-y:scroll ng-show=wxMoneyCtrl.bgFlag><div style="padding:0.2rem 0 0.2rem 0.15rem;border-bottom:1px solid #ddd" ng-repeat="card in wxMoneyCtrl.cards" ng-click=wxMoneyCtrl.turn(card) class=pointer><div class=float_left style=height:1rem;width:1.6rem;margin-right:0.2rem;background:#ddd;border-radius:4px></div><div class=float_left><div style=line-height:0.25rem;font-size:0.18rem;color:#000;font-weight:700;margin-top:0.1rem ng-bind=card.name>500元储值卡</div><div style="line-height:0.2rem;font-size:0.14rem;margin:0.05rem 0 0.1rem 0"><span ng-bind=card.description style=margin-right:0.1rem>黄龙全场通用</span><span>可退款</span></div><div style=line-height:0.2rem;font-size:0.14rem;color:#ff4949;font-weight:600><span>￥</span><span style=font-size:0.2rem ng-bind=card.realPrice>480</span></div></div><div class=clear></div></div></div></div>'), a.put("app/wx/my/wx-myvenue.html", '<style>html{\n		font-size:100px;\n	}</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-width:1.38rem;min-height:7rem;background:#fff><div style="position:fixed;padding:0.2rem 0.15rem 0 0.15rem;background:#FBF9F7;width:100%"><div><div class="float_left pointer" style=height:0.3rem;line-height:0.3rem;font-size:0.17rem;margin-right:0.2rem ng-style=wxMyvenueCtrl.chooseFlag?wxMyvenueCtrl.choose:wxMyvenueCtrl.unchoose ng-click=wxMyvenueCtrl.chooseRecord(true)>还没开始</div><div class="float_left pointer" style=height:0.3rem;line-height:0.3rem;font-size:0.17rem ng-style=!wxMyvenueCtrl.chooseFlag?wxMyvenueCtrl.choose:wxMyvenueCtrl.unchoose ng-click=wxMyvenueCtrl.chooseRecord(false)>已经完成</div></div><div class=clear></div></div><div style=height:0.55rem></div><div style="margin:0 0.15rem" class=pointer ng-repeat="orderlist in wxMyvenueCtrl.orderlists"><div style=margin-top:0.18rem><div style=font-size:0.16rem;color:#000;font-style:medium;line-height:0.24rem><span ng-bind=orderlist.week></span> <span style="margin:0 0.1rem" ng-bind=orderlist.showDate></span> <span ng-bind=orderlist.fieldName></span> <span ng-show="orderlist.remark && orderlist.orderFlag" ng-bind="\'(\'+orderlist.remark+\')\'"></span> <span ng-show="orderlist.remark && !orderlist.orderFlag" ng-bind="\'(\'+orderlist.name+orderlist.remark+\')\'"></span> <span ng-show="!orderlist.remark && !orderlist.orderFlag" ng-bind="\'(\'+orderlist.name+\')\'"></span></div><div style=font-size:0.14rem;color:#999;margin-top:0.06rem;line-height:0.21rem><span style=margin-right:0.05rem ng-bind=orderlist.venueName>室内篮球</span> <span ng-bind="(orderlist.startDate | date:\'yyyy.MM.dd\')">19:00-20:00</span></div><div style=color:#999;margin-top:0.18rem;font-size:0.16rem;line-height:0.21rem><div class=float_left><span>入场码:</span> <span style=margin-left:0.2rem;color:#00a1ff ng-bind=orderlist.code></span></div><div class=float_right ng-show="wxMyvenueCtrl.chooseFlag && orderlist.orderFlag && !orderlist.cancelDate" style=color:#999;font-size:0.14rem ng-click=wxMyvenueCtrl.query(orderlist)>退订</div><div class=float_right ng-show=orderlist.cancelDate style=color:#999;font-size:0.14rem>已撤销</div><div class=clear></div></div></div><div style=background:#ddd;height:1px;width:100%;margin-top:0.12rem></div></div><div ng-show="wxMyvenueCtrl.chooseFlag && wxMyvenueCtrl.orderlists.length == 0" style=text-align:center;color:#999;font-size:0.16rem;margin-top:2rem>暂无预订场次</div><div class=bgGary style=z-index:999 ng-show=wxMyvenueCtrl.refundFlag><div class=middle><div class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset"><div class=form_padding><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>注意</div><div style=margin-top:0.1rem;text-align:center><div style=line-height:0.2rem;color:#888;font-size:0.15rem ng-bind=wxMyvenueCtrl.error></div></div></div><div class=pointer style="border-top:1px solid #ddd;text-align:center;height:0.45rem;line-height:0.45rem;margin-top:0.1rem"><div style=width:49% class=float_left ng-click="wxMyvenueCtrl.refundFlag = false">不退了</div><div style=width:1px;height:0.45rem;background:#ddd class=float_left></div><div style=width:49%;color:#00a1ff class=float_left ng-click=wxMyvenueCtrl.reFund()>确定</div></div><div class=clear></div></div></div></div><div class=bgGary ng-show=wxMyvenueCtrl.errorFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset"><div class=form_padding><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>注意</div><div style=margin-top:0.1rem ng-bind=wxMyvenueCtrl.err>支付成功</div></div><div class="form_submit pointer" style=text-align:center;color:#00a1ff;font-size:0.18rem ng-click="wxMyvenueCtrl.errorFlag = false">我知道了</div></div></div></div><div class=bgGary ng-show=wxMyvenueCtrl.ruleFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset;border-radius:10px"><div style="padding:0.2rem 0.1rem 0.1rem 0.1rem"><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>场地退订规则</div><div style=margin-top:0.1rem;color:#999;font-size:0.14rem><div style="margin:0 0.1rem 0.1rem 0.1rem;line-height:0.2rem" ng-bind=wxMyvenueCtrl.ru></div></div></div><div class=pointer style="text-align:center;color:#00a1ff;font-size:0.18rem;width:100%;border-top:1px solid #d3dce6;height:0.4rem;line-height:0.4rem" ng-click="wxMyvenueCtrl.ruleFlag = false">我知道了</div></div></div></div><div style=height:0.5rem;width:100%></div><div style=position:fixed;bottom:0px;width:100%;height:0.44rem;background:#fff;line-height:0.44rem;text-align:center;font-size:0.14rem;color:#888 ng-click="wxMyvenueCtrl.ruleFlag = true" class=pointer>退订规则</div></div>'), a.put("app/wx/my/wx-newtel.html", '<style>html{\n		font-size:100px;\n	}</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-width:1.38rem;min-height:7rem;background:#f8f8f8><div style="padding:0.2rem 0"><div style=background:#ddd;height:1px;width:100%></div><div style="height:0.5rem;line-height:0.5rem;background:#fff;padding:0 0.15rem" class=pointer><div class=float_left style=font-size:0.17rem;color:#000;font-weight:700;width:0.8rem>新手机号</div><input class=float_left style=font-size:0.15rem;color:#999;border:0;height:0.48rem;width:1.2rem placeholder=请输入新手机号 ng-model="wxNewtelCtrl.tel"><div class=float_right style=font-size:0.15rem;color:#00a1ff ng-click=wxNewtelCtrl.send()>获取验证码</div><div class=clear></div></div><div style="height:0.5rem;line-height:0.5rem;background:#fff;padding:0 0.15rem;border-top:1px solid #ddd" class=pointer><div class=float_left style=font-size:0.17rem;color:#000;font-weight:700;width:0.8rem>验证码</div><input class=float_left style=font-size:0.16rem;color:#999;border:0;height:0.48rem placeholder=请输入手机验证码 ng-model="wxNewtelCtrl.code"><div class=clear></div></div><div style=background:#ddd;height:1px;width:100%></div><div style="color:#00a1ff;padding:0.1rem 0 0 0.2rem;font-size:0.14rem">手机号必须是未注册过的</div><div style="width:100%;height:0.5rem;padding:0 0.2rem;margin-top:0.4rem"><div class=pointer ng-click=wxNewtelCtrl.finish() style=background:#00a1ff;color:#fff;font-size:0.18rem;text-align:center;line-height:0.5rem;border-radius:4px>完成</div></div></div></div>'), a.put("app/wx/my/wx-oldtel.html", '<style>html{\n		font-size:100px;\n	}</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-width:1.38rem;min-height:7rem;background:#f8f8f8><div style="padding:0.2rem 0"><div style=background:#ddd;height:1px;width:100%></div><div style="height:0.5rem;line-height:0.5rem;background:#fff;padding:0 0.15rem" class=pointer><div class=float_left style=font-size:0.17rem;color:#000;font-weight:700>验证码</div><input class=float_left style=font-size:0.16rem;color:#999;border:0;margin-left:0.2rem placeholder=请输入手机验证码 ng-model="wxOldtelCtrl.code"><div class=clear></div></div><div style=background:#ddd;height:1px;width:100%></div><div style="width:100%;height:0.5rem;padding:0 0.2rem;margin-top:0.4rem"><div class=pointer ng-click=wxOldtelCtrl.check() style=background:#00a1ff;color:#fff;font-size:0.18rem;text-align:center;line-height:0.5rem;border-radius:4px>下一步</div></div></div></div>'), a.put("app/wx/my/wx-per.html", '<style>html{\n		font-size:100px;\n	}</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-width:1.38rem;min-height:7rem;background:#f8f8f8><div style="padding:0.2rem 0"><div style=background:#ddd;height:1px;width:100%></div><div style="height:0.43rem;line-height:0.43rem;background:#fff;padding:0 0.15rem" class=pointer ui-sref=wx-money><div class=float_left style=font-size:0.17rem;color:#000>姓名</div><div class=float_right style=font-size:0.16rem;color:#999 ng-bind=wxPerCtrl.member.name></div><div class=clear></div></div><div style=background:#ddd;height:1px;width:100%></div><div style="height:0.43rem;line-height:0.43rem;background:#fff;padding:0 0.15rem" class=pointer ui-sref=wx-myvenue><div class=float_left style=font-size:0.17rem;color:#000>手机号</div><div ng-bind=wxPerCtrl.member.tel class=float_right style=font-size:0.16rem;color:#999>暂无订场</div><div class=clear></div></div><div style=background:#ddd;height:1px;width:100%></div><div style="height:0.43rem;line-height:0.43rem;background:#fff;padding:0 0.15rem" class=pointer ng-click="wxPerCtrl.ruleFlag = true"><div class=float_left style=font-size:0.17rem;color:#000>身份证</div><div class=float_right ng-bind=wxPerCtrl.idCard style=font-size:0.16rem;color:#999>查看</div><div class=clear></div></div><div style=background:#ddd;height:1px;width:100%></div><div style="height:0.43rem;line-height:0.43rem;background:#fff;padding:0 0.15rem" class=pointer ng-click="wxPerCtrl.ruleFlag = true"><div class=float_left style=font-size:0.17rem;color:#000>卡号</div><div class=float_right ng-bind=wxPerCtrl.member.cardNo?wxPerCtrl.member.cardNo:wxPerCtrl.member.memberNo style=font-size:0.16rem;color:#999>查看</div><div class=clear></div></div><div style=background:#ddd;height:1px;width:100%></div><div style=background:#ddd;height:1px;width:100%;margin-top:0.2rem></div><div style="height:0.43rem;line-height:0.43rem;background:#fff;padding:0 0.15rem" class=pointer><div class=float_left style=font-size:0.17rem;color:#000>现金账户</div><div class=float_right ng-bind=wxPerCtrl.price style=font-size:0.16rem;color:#999>查看</div><div class=clear></div></div><div style=background:#ddd;height:1px;width:100%></div><div style="height:0.43rem;line-height:0.43rem;background:#fff;padding:0 0.15rem" class=pointer><div class=float_left style=font-size:0.17rem;color:#000>虚拟账户</div><div class=float_right ng-bind=wxPerCtrl.member.virtualAccount.total style=font-size:0.16rem;color:#999>查看</div><div class=clear></div></div><div style=background:#ddd;height:1px;width:100%></div><div ng-repeat="account in wxPerCtrl.member.specialAccount" style="height:0.43rem;line-height:0.43rem;background:#fff;padding:0 0.15rem" class=pointer><div class=float_left style=font-size:0.17rem;color:#000 ng-bind=account.name>包玉刚专用账户</div><div class=float_right ng-bind=wxPerCtrl.accTot style=font-size:0.16rem;color:#999>查看</div><div class=clear></div></div><div style=background:#ddd;height:1px;width:100%></div><div style=background:#ddd;height:1px;width:100%;margin-top:0.2rem></div><div style="height:0.43rem;line-height:0.43rem;background:#fff;padding:0 0.15rem" class=pointer ui-sref=wx-oldtel><div class=float_left style=font-size:0.17rem;color:#000>修改绑定的手机号</div><div class=clear></div></div><div style=background:#ddd;height:1px;width:100%></div></div></div>'), a.put("app/wx/my/wx-remark.html", '<style>html{\n		font-size:100px;\n	}</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-width:1.38rem;min-height:7rem;background:#f8f8f8><div style=font-size:0.16rem;padding:0.2rem;color:#999>请详细描述问题和意见</div><textarea style="width:100%;height:2rem;border:0;padding:0.1rem 0.2rem 0 0.2rem;font-size:0.17rem;line-height:0.3rem" placeholder=请输入... ng-model=wxRemarkCtrl.content></textarea><div ng-click=wxRemarkCtrl.submit() class=pointer style=width:100%;text-align:center;padding:0.1rem;margin-top:0.6rem><div style=background:#00a1ff;color:#fff;border-radius:4px;line-height:0.44rem;height:0.44rem>提交</div></div></div>'), a.put("app/wx/my/wx-two.html", '<style>html{\n        font-size:100px;\n    }</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style="width:100%;min-height:100%;background:#108EE9;padding:0.4rem 0"><div style="padding:0 0.25rem"><div ng-show=wxTwoCtrl.select style=height:0.49rem;background:#f8f8f8;border-top-left-radius:10px;border-top-right-radius:10px;width:100%;color:#333;line-height:0.47rem;font-size:0.16rem;text-align:center ng-bind=wxTwoCtrl.name></div><div ng-show=!wxTwoCtrl.select style="height:0.64rem;background:#f8f8f8;border-top-left-radius:10px;border-top-right-radius:10px;width:100%;color:#333;font-size:0.16rem;padding:0.11rem 0.2rem"><div class=float_left><div style=height:0.22rem;line-height:0.22rem;font-size:0.16rem ng-bind=wxTwoCtrl.name>xxx</div><div style=height:0.18rem;line-height:0.18rem;font-size:0.13rem;color:#999 ng-bind=wxTwoCtrl.left>xxx</div></div><img class=float_right src=assets/images/wxcr.png style="width:0.13rem;height:0.13rem;margin-top:0.14rem"><div class=float_right style=font-size:0.14rem;margin-top:0.14rem;color:#999 ng-click="wxTwoCtrl.toastFlag = true">切换</div></div><div ng-style=wxTwoCtrl.select?wxTwoCtrl.chuUi:wxTwoCtrl.vipUi style="background:#fff;border-bottom-left-radius:10px;border-bottom-right-radius:10px;width:100%;box-shadow: 0 0 6px 0 rgba(190,190,190,0.28)"><div style=width:100%;height:1.81rem><div id=qrcode style=display:flex;position:absolute;left:50%;margin-left:-0.88rem></div></div><div ng-show=wxTwoCtrl.select><div ng-style="wxTwoCtrl.specialAccount.length==0?wxTwoCtrl.h2:wxTwoCtrl.h1" style=color:#999;font-size:0.14rem;height:0.2rem;line-height:0.2rem><div class=float_left>现金账户</div><div class=float_right style=color:#333 ng-bind="\'￥\'+wxTwoCtrl.price">800元</div></div><div style=color:#999;font-size:0.14rem;margin-top:0.04rem;height:0.2rem;line-height:0.2rem ng-show="wxTwoCtrl.fakePrice != 0"><div class=float_left>虚拟账户</div><div class=float_right style=color:#333 ng-bind="\'￥\'+wxTwoCtrl.fakePrice">800元</div></div><div style=color:#999;font-size:0.14rem;margin-top:0.04rem;height:0.2rem;line-height:0.2rem ng-click="wxTwoCtrl.toastFlag = true" ng-show="wxTwoCtrl.specialAccount.length > 1"><div class=float_left>全部专用账户</div></div><div style=color:#999;font-size:0.14rem;margin-top:0.04rem;height:0.2rem;line-height:0.2rem ng-show="wxTwoCtrl.specialAccount.length == 1"><div class=float_left ng-bind=wxTwoCtrl.specialAccount[0].name>全部专用账户</div><div class=float_right ng-bind="\'￥\'+wxTwoCtrl.specialAccount[0].total">800元</div></div></div></div></div><div ui-sref=wx-apply ng-show=wxTwoCtrl.select style=margin-left:45%;margin-top:0.12rem><div class=float_left style=color:#fff;font-size:0.14rem>去充值</div><img class=float_left src=assets/images/wxbr.png style="width:0.13rem"></div><div style=margin-top:0.65rem;width:100%;text-align:center><div class=float_left style=width:50% ng-click=wxTwoCtrl.changeAcc(true)><div style="margin:0 auto;opacity:0.6" ng-show=!wxTwoCtrl.select><img src=assets/images/chu.png style="width:0.38rem"><div style=color:#fff;font-size:0.11rem>储值卡</div></div><div style="margin:0 auto" ng-show=wxTwoCtrl.select><img src=assets/images/chu.png style="width:0.38rem"><div style=color:#fff;font-size:0.11rem>储值卡</div></div></div><div class=float_left style=width:50% ng-click=wxTwoCtrl.changeAcc(false) style="border-left:1px solid #fff"><div style="margin:0 auto;opacity:0.6" ng-show=wxTwoCtrl.select><img src=assets/images/wxvip.png style="width:0.38rem"><div style=color:#fff;font-size:0.11rem>会员卡</div></div><div style="margin:0 auto" ng-show=!wxTwoCtrl.select><img src=assets/images/wxvip.png style="width:0.38rem"><div style=color:#fff;font-size:0.11rem>会员卡</div></div></div></div><div class=clear></div><div ng-show=wxTwoCtrl.toastFlag ng-click="wxTwoCtrl.toastFlag = false" style=position:fixed;width:100%;height:100%;background:rgba(0,0,0,0.50);top:0></div><div ng-show=wxTwoCtrl.toastFlag style="padding:0.14rem 0.14rem 0 0.14rem;width:100%;background:#fff;position:fixed;bottom:0;color:#fff;font-size:0.14rem"><div ng-show=wxTwoCtrl.select style="width:100%;height:0.4rem;line-height:0.4rem;border-radius:4px;background:#41C0F7;padding:0 0.1rem;margin-bottom:0.1rem" ng-repeat="sa in wxTwoCtrl.specialAccount"><div class=float_left ng-bind=sa.name>xxx</div><div class=float_right ng-bind="\'￥\'+sa.total">xx</div></div><div ng-show=!wxTwoCtrl.select style="width:100%;height:0.4rem;line-height:0.4rem;border-radius:4px;background:#41C0F7;padding:0 0.1rem;margin-bottom:0.1rem" ng-click=wxTwoCtrl.changeVip(card) ng-repeat="card in wxTwoCtrl.cards"><div class=float_left ng-bind=card.name>xxx</div></div></div><div class=bgGary ng-show=wxTwoCtrl.errorFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset"><div class=form_padding><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>注意</div><div style=margin-top:0.1rem ng-bind=wxTwoCtrl.err>支付成功</div></div><div class="form_submit pointer" style=text-align:center;color:#00a1ff;font-size:0.18rem ng-click="wxTwoCtrl.errorFlag = false">我知道了</div></div></div></div></div>'), a.put("app/wx/order/wx-choose.html", '<style>html{\n		font-size:100px;\n	}\n    .wd{width:10rem}\n    .xx{padding:0.1rem 0.15rem 0 0.15rem;font-size:0.14rem;color:#7B7B7A;margin-top:1.2rem;display:flex;direction:column}</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-height:7rem;background:#FBF9F7><div style=position:fixed;top:0px;width:100%><div style="height:0.44rem;background:#fff;padding:0 0.15rem;line-height:0.44rem"><div class=float_left style=color:#000;font-size:0.17rem;margin-right:0.1rem ng-bind=wxChooseCtrl.iName></div><div class=float_left style=color:#888;font-size:0.16rem;margin-right:0.1rem ng-bind=wxChooseCtrl.vName></div></div><div class=clear></div><div id=d style=background:#fff;height:0.4rem;overflow-x:scroll><div class="float_left pointer" ng-click=wxChooseCtrl.getWeek(week.num) ng-repeat="week in wxChooseCtrl.showWeeks track by $index" style=width:12.5%;height:0.4rem;text-align:center ng-style=week.select?wxChooseCtrl.background:wxChooseCtrl.lineHeight><div ng-bind=week.week></div><div style=font-size:0.11rem;margin-top:0.04rem ng-bind="week.date | date:\'MM·dd\'"></div></div></div><div class=clear></div><div style=height:0.4rem;background:#f2f2f2;padding-top:0.1rem><div style="margin:0rem auto 0 auto;font-size:0.13rem;width:2.3rem"><div class=float_left style="border:1px solid #ddd;width:0.2rem;height:0.2rem;border-radius:4px;background:#fff;margin:0 0.05rem 0 0rem"></div><div class=float_left style=margin-top:0.02rem>可选</div><div class=float_left style="width:0.2rem;height:0.2rem;border-radius:4px;background:#00a1ff;margin:0 0.05rem 0 0.3rem"></div><div class=float_left style=margin-top:0.02rem>已选</div><div class=float_left style="border:1px solid #ddd;width:0.2rem;height:0.2rem;border-radius:4px;background:#dcdcdc;margin:0 0.05rem 0 0.3rem"></div><div class=float_left style=margin-top:0.02rem>已售出</div></div></div><div class=clear></div><div id=tab style=overflow-x:hidden;white-space:nowrap;padding-left:0.63rem;background:#FBF9F7><div style="display:inline-block;text-align:center;margin:0.1rem 0rem 0.12rem 0" ng-style=field.w ng-repeat="field in wxChooseCtrl.fields" ng-bind=field.name>篮球场01</div></div></div><div style="padding:0.1rem 0.15rem 0 0.15rem;font-size:0.14rem;color:#7B7B7A;margin-top:1.2rem;display:flex;direction:column"><div style=margin-top:0.3rem;width:0.3rem><div ng-repeat="time in wxChooseCtrl.trr"><div style=margin-bottom:0.26rem ng-bind="time+\':\'+wxChooseCtrl.mintime">14:00</div></div></div><div id=hhh style="margin:0.33rem 0 0 0.15rem;overflow-x:scroll;white-space:nowrap;text-align:center"><div ng-repeat="time in wxChooseCtrl.times"><div ng-repeat="field in time.fields" style=display:inline-block><div ng-style=field.height style="margin:0 0rem 0.0rem 0"><div ng-show="!time.emptyFlag && field.order == time.fields.length && field.or == wxChooseCtrl.times.length" class=pointer style="height:100%;border:1px solid #ccc;text-align:center" ng-style=(field.unit&&time.isUsed&&field.isOpen&&!field.isChoose&&wxChooseCtrl.flag&&wxChooseCtrl.isOpen&&wxChooseCtrl.odFlag&&wxChooseCtrl.openTimeFlag)?(field.flag?wxChooseCtrl.background2:wxChooseCtrl.background1):wxChooseCtrl.background3 ng-click=wxChooseCtrl.chooseVenue(field,time)><div ng-show=field.unit&&time.isUsed&&field.isOpen&&!field.isChoose&&wxChooseCtrl.flag&&wxChooseCtrl.isOpen&&wxChooseCtrl.odFlag&&wxChooseCtrl.openTimeFlag><span style=font-size:0.10rem>￥</span> <span style=font-size:0.12rem ng-bind=field.p></span></div><div ng-show=!(field.unit&&time.isUsed&&field.isOpen&&!field.isChoose&&wxChooseCtrl.flag&&wxChooseCtrl.isOpen&&wxChooseCtrl.odFlag&&wxChooseCtrl.openTimeFlag)>已售出</div></div><div ng-show="!time.emptyFlag && !(field.order == time.fields.length) && field.or == wxChooseCtrl.times.length" class=pointer style="height:100%;border:1px solid #ccc;text-align:center;border-right:0" ng-style=(field.unit&&time.isUsed&&field.isOpen&&!field.isChoose&&wxChooseCtrl.flag&&wxChooseCtrl.isOpen&&wxChooseCtrl.odFlag&&wxChooseCtrl.openTimeFlag)?(field.flag?wxChooseCtrl.background2:wxChooseCtrl.background1):wxChooseCtrl.background3 ng-click=wxChooseCtrl.chooseVenue(field,time)><div ng-show=field.unit&&time.isUsed&&field.isOpen&&!field.isChoose&&wxChooseCtrl.flag&&wxChooseCtrl.isOpen&&wxChooseCtrl.odFlag&&wxChooseCtrl.openTimeFlag><span style=font-size:0.10rem>￥</span><span style=font-size:0.12rem ng-bind=field.p></span></div><div ng-show=!(field.unit&&time.isUsed&&field.isOpen&&!field.isChoose&&wxChooseCtrl.flag&&wxChooseCtrl.isOpen&&wxChooseCtrl.odFlag&&wxChooseCtrl.openTimeFlag)>已售出</div></div><div ng-show="!time.emptyFlag && !(field.order == time.fields.length) && !(field.or == wxChooseCtrl.times.length) && !time.bottomFlag" class=pointer style="height:100%;border:1px solid #ccc;text-align:center;border-right:0;border-bottom:0" ng-style=(field.unit&&time.isUsed&&field.isOpen&&!field.isChoose&&wxChooseCtrl.flag&&wxChooseCtrl.isOpen&&wxChooseCtrl.odFlag&&wxChooseCtrl.openTimeFlag)?(field.flag?wxChooseCtrl.background2:wxChooseCtrl.background1):wxChooseCtrl.background3 ng-click=wxChooseCtrl.chooseVenue(field,time)><div ng-show=field.unit&&time.isUsed&&field.isOpen&&!field.isChoose&&wxChooseCtrl.flag&&wxChooseCtrl.isOpen&&wxChooseCtrl.odFlag&&wxChooseCtrl.openTimeFlag><span style=font-size:0.10rem>￥</span><span style=font-size:0.12rem ng-bind=field.p></span></div><div ng-show=!(field.unit&&time.isUsed&&field.isOpen&&!field.isChoose&&wxChooseCtrl.flag&&wxChooseCtrl.isOpen&&wxChooseCtrl.odFlag&&wxChooseCtrl.openTimeFlag)>已售出</div></div><div ng-show="!time.emptyFlag && field.order == time.fields.length && !(field.or == wxChooseCtrl.times.length) && !time.bottomFlag" class=pointer style="height:100%;border:1px solid #ccc;text-align:center;border-bottom:0" ng-style=(field.unit&&time.isUsed&&field.isOpen&&!field.isChoose&&wxChooseCtrl.flag&&wxChooseCtrl.isOpen&&wxChooseCtrl.odFlag&&wxChooseCtrl.openTimeFlag)?(field.flag?wxChooseCtrl.background2:wxChooseCtrl.background1):wxChooseCtrl.background3 ng-click=wxChooseCtrl.chooseVenue(field,time)><div ng-show=field.unit&&time.isUsed&&field.isOpen&&!field.isChoose&&wxChooseCtrl.flag&&wxChooseCtrl.isOpen&&wxChooseCtrl.odFlag&&wxChooseCtrl.openTimeFlag><span style=font-size:0.10rem>￥</span><span style=font-size:0.12rem ng-bind=field.p></span></div><div ng-show=!(field.unit&&time.isUsed&&field.isOpen&&!field.isChoose&&wxChooseCtrl.flag&&wxChooseCtrl.isOpen&&wxChooseCtrl.odFlag&&wxChooseCtrl.openTimeFlag)>已售出</div></div><div ng-show="!time.emptyFlag && !(field.order == time.fields.length) && !(field.or == wxChooseCtrl.times.length) && time.bottomFlag" class=pointer style="height:100%;border:1px solid #ccc;text-align:center;border-right:0" ng-style=(field.unit&&time.isUsed&&field.isOpen&&!field.isChoose&&wxChooseCtrl.flag&&wxChooseCtrl.isOpen&&wxChooseCtrl.odFlag&&wxChooseCtrl.openTimeFlag)?(field.flag?wxChooseCtrl.background2:wxChooseCtrl.background1):wxChooseCtrl.background3 ng-click=wxChooseCtrl.chooseVenue(field,time)><div ng-show=field.unit&&time.isUsed&&field.isOpen&&!field.isChoose&&wxChooseCtrl.flag&&wxChooseCtrl.isOpen&&wxChooseCtrl.odFlag&&wxChooseCtrl.openTimeFlag><span style=font-size:0.10rem>￥</span><span style=font-size:0.12rem ng-bind=field.p></span></div><div ng-show=!(field.unit&&time.isUsed&&field.isOpen&&!field.isChoose&&wxChooseCtrl.flag&&wxChooseCtrl.isOpen&&wxChooseCtrl.odFlag&&wxChooseCtrl.openTimeFlag)>已售出</div></div><div ng-show="!time.emptyFlag && field.order == time.fields.length && !(field.or == wxChooseCtrl.times.length) && time.bottomFlag" class=pointer style="height:100%;border:1px solid #ccc;text-align:center" ng-style=(field.unit&&time.isUsed&&field.isOpen&&!field.isChoose&&wxChooseCtrl.flag&&wxChooseCtrl.isOpen&&wxChooseCtrl.odFlag&&wxChooseCtrl.openTimeFlag)?(field.flag?wxChooseCtrl.background2:wxChooseCtrl.background1):wxChooseCtrl.background3 ng-click=wxChooseCtrl.chooseVenue(field,time)><div ng-show=field.unit&&time.isUsed&&field.isOpen&&!field.isChoose&&wxChooseCtrl.flag&&wxChooseCtrl.isOpen&&wxChooseCtrl.odFlag&&wxChooseCtrl.openTimeFlag><span style=font-size:0.10rem>￥</span><span style=font-size:0.12rem ng-bind=field.p></span></div><div ng-show=!(field.unit&&time.isUsed&&field.isOpen&&!field.isChoose&&wxChooseCtrl.flag&&wxChooseCtrl.isOpen&&wxChooseCtrl.odFlag&&wxChooseCtrl.openTimeFlag)>已售出</div></div></div></div></div></div><div class=clear></div></div><div class=bgGary ng-show=wxChooseCtrl.errorFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset"><div class=form_padding><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>注意</div><div style=margin-top:0.1rem ng-bind=wxChooseCtrl.err>支付成功</div></div><div class="form_submit pointer" style=text-align:center;color:#00a1ff;font-size:0.18rem ng-click="wxChooseCtrl.errorFlag = false">我知道了</div></div></div></div><div class=bgGary ng-show=wxChooseCtrl.warnFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset;border-radius:10px"><div style="padding:0.2rem 0.1rem 0.1rem 0.1rem"><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>注意</div><div style=margin-top:0.1rem;line-height:0.18rem;color:#999;text-align:center>抱歉，请先去场馆柜台完成实名认证，才可以购买数额大的充值卡</div></div><div class=pointer style="text-align:center;color:#00a1ff;font-size:0.18rem;width:100%;border-top:1px solid #d3dce6;height:0.4rem;line-height:0.4rem" ng-click="wxChooseCtrl.warnFlag = false">我知道了</div></div></div></div><div style=height:2rem;width:100%></div><div style="position:fixed;bottom:0.84rem;width:100%;background:#fff;border-top:1px solid #ddd;padding:0 0.2rem;overflow-y:auto;height:0.9rem" ng-show="wxChooseCtrl.orderlists.length>0"><div style="margin:0.07rem 0 0.08rem 0;font-size:0.13rem;color:#999">已选的</div><div class="float_left pointer" style="border:1px #00a1ff solid;border-radius:4px;margin:0 0.1rem 0.1rem 0;padding:0.05rem" ng-repeat="order in wxChooseCtrl.orderlists" ng-click=wxChooseCtrl.chooseVenue(order.field,order.time)><div style=color:#00a1ff ng-bind=order.showDate>18:00-20:00</div><div style=color:#999;margin-top:0.05rem;font-size:0.12rem ng-bind=order.fName>篮球</div></div></div><div style="position:fixed;bottom:0px;width:100%;background:#fff;border-top:1px solid #ddd" ng-show="!wxChooseCtrl.orderlists.length>0"><div style="height:0.28rem;line-height:0.28rem;padding:0 0.2rem;background:#DEEEF8;font-size:0.14rem;color:#8b9399"><div class=float_left><span ng-bind="\'现金账户:￥\'+wxChooseCtrl.realPrice"></span> <span ng-show=wxChooseCtrl.fakeFlag ng-bind="\';虚拟账户:\'+wxChooseCtrl.fakePrice+\'元(\'+(wxChooseCtrl.member.virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'"></span></div><!-- <div class="float_right pointer" ng-click="wxChooseCtrl.turn()" style="color:#1EABFD">去充值</div> --></div><div style="height:0.56rem;line-height:0.56rem;border-top:1px solid #ddd;padding:0 0.2rem"><div class=float_left style=font-size:0.16rem;color:#000 ng-bind="\'每人最多预定\'+wxChooseCtrl.limit+\'小时\'">3</div><div class=float_right style="height:0.4rem;width:1.2rem;border-radius:4px;border:1px solid #ddd;line-height:0.4rem;margin-top:0.08rem;text-align:center;background:#eff2f6;color:#D2DCE3;font-size:0.16rem">请先选场</div></div></div><div style="position:fixed;bottom:0px;width:100%;background:#fff;border-top:1px solid #ddd;max-height:60%;overflow-y:scroll" ng-show="wxChooseCtrl.orderlists.length>0"><div><div style="height:0.28rem;line-height:0.28rem;padding:0 0.2rem;background:#DEEEF8;font-size:0.14rem;color:#8b9399"><div class=float_left><span ng-bind="\'现金账户:￥\'+wxChooseCtrl.realPrice"></span> <span ng-show=wxChooseCtrl.fakeFlag ng-bind="\';虚拟账户:\'+wxChooseCtrl.fakePrice+\'元(\'+(wxChooseCtrl.member.virtualAccount.expires_in | date:\'yyyy-MM-dd\')+\'过期)\'"></span></div><!--   <div class="float_right pointer" ng-click="wxChooseCtrl.turn()" style="color:#1EABFD">去充值</div> --></div><div style="height:0.56rem;border-top:1px solid #ddd;padding:0 0.2rem"><div class=float_left style=color:#000><div ng-show="wxChooseCtrl.dis != \'10\'"><div id=a style="margin:0.1rem 0 0.05rem 0"><div class=float_left style=font-size:0.16rem;color:red;font-weight:700;margin-right:0.1rem ng-bind="\'￥\'+wxChooseCtrl.price"></div><div class=float_left style=font-size:0.14rem;color:#999;width:{{wxChooseCtrl.priceWidth}};overflow:hidden ng-show="wxChooseCtrl.orderlists.length > 1"><span ng-repeat="order in wxChooseCtrl.orderlists" ng-bind=order.price></span></div><div class=clear></div></div><div style=font-size:0.12rem;color:#999 ng-bind="\'已享受\'+wxChooseCtrl.dis+\'折优惠\'"></div></div><div ng-show="wxChooseCtrl.dis == \'10\'" style=line-height:0.56rem><div class=float_left id=b style=font-size:0.16rem;color:red;font-weight:700;margin-right:0.1rem ng-bind="\'￥\'+wxChooseCtrl.price"></div><div class=float_left style=font-size:0.14rem;color:#999;width:{{wxChooseCtrl.priceWidth}};overflow:hidden;height:0.5rem ng-show="wxChooseCtrl.orderlists.length > 1"><span ng-repeat="order in wxChooseCtrl.orderlists" ng-bind=order.price></span></div></div></div><div id=c class="float_right pointer" style=height:0.4rem;width:1.2rem;border-radius:4px;line-height:0.42rem;margin-top:0.08rem;text-align:center;background:#00a1ff;color:#fff;font-size:0.16rem><div ng-show=!wxChooseCtrl.pFlag ng-click=wxChooseCtrl.isUser()>确认选场</div><div ng-show=wxChooseCtrl.pFlag ng-click=wxChooseCtrl.turn()>余额不足去充值</div></div></div></div></div></div>'),
            a.put("app/wx/order/wx-finish.html", '<style>html{\n        font-size:100px;\n    }</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-height:7rem;background:#fff;padding:0.2rem;text-align:center><img class="float_right pointer" src=assets/images/wxcancel.png ui-sref=wx-order style="width:0.2rem"><div class=clear></div><div style="width:1.2rem;height:1.2rem;margin:0.5rem auto 0 auto"><img src=assets/images/succse.png style="width:1.2rem;height:1.2rem"></div><div style=font-size:0.2rem;color:#000;margin-top:0.16rem>订场成功</div><div style="margin:0.1rem 0.6rem 0 0.6rem;color:#888;font-size:0.14rem"><span>已预订</span><span ng-bind=wxFinishCtrl.w></span></div><div style=border-radius:4px;text-align:center;height:0.5rem;line-height:0.5rem;background:#00a1ff;color:#fff;margin-top:0.25rem;font-size:0.18rem ui-sref=wx-myvenue class=pointer>我的订场</div><div style="border:1px solid #E5EAEE;border-radius:4px;text-align:center;height:0.5rem;line-height:0.5rem;background:#EFF2F6;color:#000;margin-top:0.15rem;font-size:0.18rem" ui-sref=wx-order class=pointer>返回首页</div><div style=margin-top:0.2rem;color:red;font-size:0.14rem;text-align:left;line-height:0.21rem>严禁外来培训机构或个人进行经营性质的培训，一经发现，立即清场!</div></div>'), a.put("app/wx/order/wx-order.html", '<style>html{\n		font-size:100px;\n	}</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-width:1.38rem;min-height:7rem;background:#fff;background:#f8f8f8;padding-top:0.2rem><div style=margin-bottom:0.2rem ng-show="venue.isUsed && venue.isOpen" ng-repeat="venue in wxOrderCtrl.venues"><div style="font-size:0.14rem;color:#888;padding:0 0.15rem 0.1rem 0.15rem;border-bottom:1px solid #ddd" ng-bind=venue.name>室内健身房</div><div ng-repeat="item in venue.items" style=background:#fff><div ng-show="venue.isUsed && item.isUsed && item.orderFlag" style="height:0.44rem;border-bottom:1px solid #ddd" class=pointer ui-sref=wx-choose({vId:venue._id,iId:item._id,iName:item.name,vName:venue.name,sd:venue.closeOpen_startDate,ed:venue.closeOpen_endDate,flag:venue.isUsed,orderDay:venue.orderDay,discount:item.discount,limit:item.limit})><div class=float_left style="font-size:0.16rem;color:#000;font-weight:700;margin:0.13rem 0 0 0.15rem" ng-bind=item.name>室内篮球</div><img class=float_right src=assets\\images\\wxr.png style="margin:0.14rem 0.15rem 0 0;height:0.12rem"><div class=clear></div></div><div ng-show="(!venue.isUsed || !item.isUsed) || (!item.orderFlag && item.remarkFlag)" style="height:0.44rem;border-bottom:1px solid #ddd"><div class=float_left style="font-size:0.16rem;color:#000;font-weight:700;margin:0.13rem 0 0 0.15rem" ng-bind=item.name>室内篮球</div><div class=float_left style="background:#FFEAEB;color:#ff4949;padding:0 0.1rem;border-radius:4px;height:0.24rem;line-height:0.24rem;margin:0.11rem 0 0 0.1rem">维护中</div><img class=float_right src=assets\\images\\wxr.png style="margin:0.14rem 0.15rem 0 0;height:0.12rem"><div class=clear></div></div></div></div><div class=bgGary ng-show=wxOrderCtrl.ruleFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset;border-radius:10px"><div style="padding:0.2rem 0.1rem 0.1rem 0.1rem"><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>场地撤销规则改动</div><div style=margin-top:0.1rem;color:#999><div style="margin:0 0.1rem 0.1rem 0.1rem;line-height:0.2rem"><span style=color:red>场地开场前5小时撤销不扣费，</span>开场前5小时至2小时内撤销场地扣除金额的20%，开场前2小时内撤销场地扣除金额50%，开场后扣除全部金额。</div></div></div><div class=pointer style="text-align:center;color:#00a1ff;font-size:0.18rem;width:100%;border-top:1px solid #d3dce6;height:0.4rem;line-height:0.4rem" ng-click="wxOrderCtrl.ruleFlag = false">我知道了</div></div></div></div><div style=height:0.6rem;width:100%></div><div style=position:fixed;bottom:0.54rem;width:100%;height:0.2rem;line-height:0.2rem;font-size:0.17rem;color:#888;text-align:center><div ng-bind="\'游泳馆当前人数：\'+wxOrderCtrl.data.todayInFieldCount+\'人\'"></div></div><div style="position:fixed;bottom:0px;width:100%;height:0.44rem;background:#fff;line-height:0.44rem;text-align:center;font-size:0.17rem;color:#888;border-top:1px solid #ddd" class=pointer><div style=width:33%;color:#00a1ff class=float_left>订场</div><div style=width:1px;height:0.2rem;background:#ddd;margin-top:0.11rem class=float_left></div><div style=width:33% class="float_left pointer" ui-sref=wx-apply>充值</div><div style=width:1px;height:0.2rem;background:#ddd;margin-top:0.11rem class=float_left></div><div style=width:33% class="float_left pointer" ui-sref=wx-me>我的</div></div></div>'), a.put("app/wx/order/wx-sure.html", '<style>html{\n		font-size:100px;\n	}</style><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><div style=width:100%;min-height:7rem;background:#fff><div style=height:0.3rem;background:#FAC2C1;line-height:0.3rem;text-align:center;color:#FF534A;font-weight:600;font-size:0.13rem><div ng-bind="\'支付剩余：\'+(wxSureCtrl.t1|date:\'mm:ss\')">03:42</div></div><div ng-repeat="order in wxSureCtrl.orderlists"><div ng-show=!order.flag style="padding:0.14rem 0;margin:0 0.15rem;border-bottom:1px solid #ddd"><div style=font-size:0.16rem;color:#000;font-weight:550><span style=margin-right:0.1rem ng-bind=wxSureCtrl.iName>室内篮球</span><span ng-bind=wxSureCtrl.week+order.showDate>今天</span></div><div style=font-size:0.14rem;color:#757575;margin-top:0.05rem><span style=margin-right:0.1rem ng-bind=wxSureCtrl.vName>室内篮健身馆</span><span ng-bind=order.fName>篮球02</span></div></div><div ng-show=order.flag style="padding:0.14rem 0;margin:0 0.15rem"><div style=font-size:0.16rem;color:#000;font-weight:550><span style=margin-right:0.1rem ng-bind=wxSureCtrl.iName>室内篮球</span><span ng-bind=wxSureCtrl.week+order.showDate>今天</span></div><div style=font-size:0.14rem;color:#757575;margin-top:0.05rem><span style=margin-right:0.1rem ng-bind=wxSureCtrl.vName>室内篮健身馆</span><span ng-bind=order.fName>篮球02</span></div></div></div><div style=background:#F8F8F7;height:0.15rem;width:100%></div><div style="height:0.43rem;line-height:0.43rem;margin:0 0.15rem;border-bottom:1px solid #ddd"><div class=float_left style=font-size:0.16rem;color:#000>我的账户</div><div class=float_right style=font-size:0.14rem;color:#888;margin-right:0.1rem ng-bind=wxSureCtrl.newWord>购买储值卡，最低享8折</div><div class=clear></div></div><div style="height:0.43rem;line-height:0.43rem;padding:0 0.15rem" class=pointer><div class=float_left style=font-size:0.16rem;color:#000>订场总价</div><div class=float_right style=font-size:0.14rem;color:#999;margin-right:0.1rem ng-bind="\'￥\'+wxSureCtrl.price">￥300</div><div class=clear></div></div><div style=background:#F8F8F7;height:0.15rem;width:100%></div><div style="padding:0.1rem 0.15rem"><div style=font-size:0.16rem;color:#000;margin-bottom:0.1rem>退场和订场需知</div><div style=font-size:0.14rem;color:#888;line-height:0.2rem ng-repeat="rule in wxSureCtrl.rules" ng-bind=rule>退场和订场需知</div></div><div class=bgGary style=z-index:999 ng-show=wxSureCtrl.ruleFlag><div class=middle><div class=center style="background:#fff;width:300px;border:1px solid #ddd;border-radius:10px;overflow:hidden;padding-top:0.1rem"><div><img src=assets\\images\\cancel.png style=width:0.11rem;margin-right:0.1rem ng-click="wxSureCtrl.ruleFlag = false" class="float_right pointer"><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700;margin-left:5px>确认支付</div></div><div class=clear></div><div style=margin:0.1rem;text-align:center;line-height:0.18rem ng-bind=wxSureCtrl.pw>账户余额不足，请选择购卡充值，或者直接</div><div class=pointer style="border-top:1px solid #ddd;text-align:center;height:0.4rem;line-height:0.4rem"><!-- <div style="width:49%;color:#999" class="float_left" ng-click="wxSureCtrl.wxPay()">微信支付</div> --><div style=width:49%;color:#999 class=float_left ng-click="wxSureCtrl.ruleFlag = false">取消</div><div style=width:1px;height:0.4rem;background:#ddd class=float_left></div><div ng-show=wxSureCtrl.pFlag style=width:49%;color:#00a1ff class=float_left ng-click=wxSureCtrl.pay()>余额支付</div><div ng-show=!wxSureCtrl.pFlag style=width:49%;color:#00a1ff class=float_left ui-sref="wx-buy({state:\'order\'})">购卡充值</div></div><div class=clear></div></div></div></div><div class=bgGary ng-show=wxMyvenueCtrl.succeedFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset;border-radius:10px"><div class=form_padding><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>确认支付</div><div style=margin-top:0.1rem>支付成功</div></div><div class=pointer style="text-align:center;color:#00a1ff;font-size:0.18rem;width:100%;border-top:1px solid #d3dce6;height:0.4rem;line-height:0.4rem" ng-click="wxMyvenueCtrl.succeedFlag = false">我知道了</div></div></div></div><div style=height:0.86rem;width:100%></div><div class=bgGary ng-show=wxSureCtrl.warnFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset;border-radius:10px"><div style="padding:0.2rem 0.1rem 0.1rem 0.1rem"><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>注意</div><div style=margin-top:0.1rem;line-height:0.18rem;color:#999;text-align:center>抱歉，请先去场馆柜台完成实名认证，才可以购买数额大的充值卡</div></div><div class=pointer style="text-align:center;color:#00a1ff;font-size:0.18rem;width:100%;border-top:1px solid #d3dce6;height:0.4rem;line-height:0.4rem" ng-click="wxSureCtrl.warnFlag = false">我知道了</div></div></div></div><div class=bgGary ng-show=wxSureCtrl.errorFlag><div class=middle><div id=box class=center style="background:#fff;border:1px solid #d3dce6;width:3rem;box-shadow:0 0 1px #ddd inset"><div class=form_padding><div style=text-align:center;font-size:0.18rem;color:000;font-weight:700>注意</div><div style=margin-top:0.1rem ng-bind=wxSureCtrl.err>支付成功</div></div><div class="form_submit pointer" style=text-align:center;color:#00a1ff;font-size:0.18rem ng-click="wxSureCtrl.errorFlag = false">我知道了</div></div></div></div><div class=bgGary ng-show=wxSureCtrl.promptWARN><div class=middle><div id=box class="promptBox center"><div class="promptImage warnImage"></div><div class="promptWord ellipsis" title={{wxSureCtrl.wordWARN}}>支付中...</div><div class=promptClose style="background: url(../../assets/images/load.gif) no-repeat 5px 5px"></div></div></div></div><div style=position:fixed;width:100%;height:100%;background:#000;opacity:0.5;top:0 ng-show=wxSureCtrl.bgFlag ng-click="wxSureCtrl.bgFlag = false"></div><div style=position:fixed;bottom:0px;background:#fff;width:100%;max-height:60%;overflow-y:scroll><div style="padding:0.2rem 0 0.2rem 0.15rem;border-bottom:1px solid #ddd" ng-show=wxSureCtrl.bgFlag ng-repeat="card in wxSureCtrl.cards" ng-click=wxSureCtrl.turn(card) class=pointer><div class=float_left style=height:1rem;width:1.6rem;margin-right:0.2rem;background:#ddd;border-radius:4px></div><div class=float_left><div style=line-height:0.25rem;font-size:0.18rem;color:#000;font-weight:700;margin-top:0.1rem ng-bind=card.name>500元储值卡</div><div style="line-height:0.2rem;font-size:0.14rem;margin:0.05rem 0 0.1rem 0"><span ng-bind=card.description style=margin-right:0.1rem>黄龙全场通用</span><span>可退款</span></div><div style=line-height:0.2rem;font-size:0.14rem;color:#ff4949;font-weight:600><span>￥</span><span style=font-size:0.2rem ng-bind=card.realPrice>480</span></div></div><div class=clear></div></div><div style="height:0.86rem;border-top:1px solid #ddd;padding:0.1rem 0.2rem" ng-show=!wxSureCtrl.bgFlag><img class=float_left src=assets/images/greensure.png style="width:0.17rem;margin-right:0.05rem"><div class=float_left style=font-size:0.14rem;color:#999 ng-bind=wxSureCtrl.rw>开场前一小时退场不扣费</div><div class=float_right><span style=margin-right:0.1rem;font-size:0.14rem>应付</span><span style=color:#FF534A;font-size:0.16rem;font-weight:700 ng-bind="\'￥\'+wxSureCtrl.price">￥600</span></div><div class=clear><div style=height:0.4rem;border-radius:7px;line-height:0.4rem;margin-top:0.22rem;text-align:center;background:#00a1ff;color:#fff;font-size:18px class=pointer ng-click="wxSureCtrl.ruleFlag = true">确认支付</div></div></div></div></div>'), a.put("components/header/header.html", "<div ng-controller=\"HeaderCtrl as headerCtrl\"><div class=navsBox><div class=title ng-bind=headerCtrl.account>黄龙黑鲨橄榄球</div><div><div ng-repeat=\"firstMenu in headerCtrl.menus\"><div class=\"firstNav {{firstMenu.bgColor}}\" ng-show=\"headerCtrl.state==firstMenu.state\" ng-click=headerCtrl.openSecondNavBox(firstMenu)><div class=\"firstNavImg {{firstMenu.imgStyle}}\"></div><div class=firstNavPrompt ng-bind=firstMenu.name>班级管理</div><div class=firstNavShowSecondBtn ng-show=\"firstMenu.secondNavs.length>0&&firstMenu.showSecondNav==false&&(firstMenu.name=='场地服务'||firstMenu.name=='卡务管理'||firstMenu.name=='商品管理'||firstMenu.name=='会员管理')\"></div><div class=firstNavShowSecondBtnDefD ng-show=\"firstMenu.secondNavs.length>0&&firstMenu.showSecondNav==true&&(firstMenu.name=='场地服务'||firstMenu.name=='卡务管理'||firstMenu.name=='商品管理'||firstMenu.name=='会员管理')\"></div></div><div class=\"firstNav {{firstMenu.bgColor}}\" ng-hide=\"headerCtrl.state==firstMenu.state\" ui-sref={{firstMenu.state}}><div class=\"firstNavImg {{firstMenu.imgStyle}}\"></div><div class=firstNavPrompt ng-bind=firstMenu.name>班级管理</div><div class=firstNavShowSecondBtn ng-show=\"firstMenu.secondNavs.length>0&&firstMenu.showSecondNav==false&&(firstMenu.name=='场地服务'||firstMenu.name=='卡务管理'||firstMenu.name=='商品管理'||firstMenu.name=='会员管理')\"></div><div class=firstNavShowSecondBtnDefD ng-show=\"firstMenu.secondNavs.length>0&&firstMenu.showSecondNav==true&&(firstMenu.name=='场地服务'||firstMenu.name=='卡务管理'||firstMenu.name=='商品管理'||firstMenu.name=='会员管理')\"></div></div><div class=secondNavBoxD ng-show=\"firstMenu.showSecondNav&&(firstMenu.name=='场地服务'||firstMenu.name=='卡务管理'||firstMenu.name=='商品管理'||firstMenu.name=='会员管理')\" ng-repeat=\"secondMenu in firstMenu.secondNavs\"><div class=\"secondNavD {{secondMenu.bgColor}}\" ui-sref={{secondMenu.state?secondMenu.state:firstMenu.state}} ng-bind=secondMenu.name>全部教学地点</div></div></div></div></div><div class=showSecondNavBox ng-show=\"headerCtrl.nav.showSecondNav && headerCtrl.nav.secondNavs.length>0&&headerCtrl.nav.name!='场地服务'&&headerCtrl.nav.name!='卡务管理'&&headerCtrl.nav.name!='商品管理'&&headerCtrl.nav.name!='会员管理'\"><div ng-repeat=\"secondMenu in headerCtrl.nav.secondNavs\"><div class=\"secondNavBox {{secondMenu.bgColor}}\"><div class=secondNav ui-sref={{secondMenu.state}} ng-bind=secondMenu.name>全部教学地点</div><div class=firstNavShowSecondBtnDef ng-show=\"secondMenu.thirdNavs.length>0\"></div><div style=\"clear: both\"></div></div><div ng-show=\"secondMenu.thirdNavs.length>0\"><div class=\"thirdNav {{thirdNav.bgColor}}\" ng-repeat=\"thirdNav in secondMenu.thirdNavs\" ui-sref={{thirdNav.state}} ng-bind=thirdNav.name></div></div></div></div></div><style>body{padding: 0px;margin: 0px;}\n		.navsBox{\n			position: fixed;\n			width: 200px;\n			height: 100%;\n			background: #324057;\n			border-radius: 2px;\n			overflow-y: auto;\n			overflow-x:hidden;\n			z-index: 800;\n		}\n		.showSecondNavBox{\n			position: fixed;\n			width: 200px;\n			height: calc(100%);\n			background: #f8f8f8;\n			border:1px solid #99a9bf;\n			border-top:0px;\n			overflow-y: auto;\n			overflow-x:hidden;\n			z-index: 800;\n			margin:0 0 0 200px; \n		}\n		.title{\n			width: 200px;\n			height: 78px;\n			text-indent: 20px;\n			line-height: 78px;\n			font-size: 18px;\n			font-weight: bold;\n			color:#fff;\n		}\n		.firstNav{\n			width: 200px;\n			height: 56px;\n		}\n		.firstNav:hover{\n			background: #475669;\n		}\n		.firstNavImg{\n			float: left;\n			width: 19px;\n			height: 56px;\n			margin-left: 20px;\n			background: ;\n		}\n		.firstNavPrompt{\n			float: left;\n			width: 104px;\n			height: 56px;\n			text-indent: 10px;\n			line-height: 56px;\n			color: #c0ccda;\n			font-size: 14px;\n			cursor: pointer;\n		}\n		.firstNavShowSecondBtn{\n			float: left;\n			width: 50px;\n			height: 56px;\n			background: url(../../assets/images/downsmall.png) no-repeat 19px 24.5px;\n			cursor: pointer;\n		}\n		.firstNavShowSecondBtnDef{\n			float: left;\n			width: 50px;\n			height: 56px;\n			background: url(../../assets/images/blackdown.png) no-repeat 10px 24.5px;\n			background-size: 13px;\n			cursor: pointer;\n		}\n		.firstNavShowSecondBtnDefD{\n			float: left;\n			width: 50px;\n			height: 56px;\n			background: url(../../assets/images/upsmall.png) no-repeat 19px 24.5px;\n			cursor: pointer;\n		}\n		.secondNavBox{\n			width: 200px;\n			color: #1f2d3d;\n			background: #f8f8f8;\n		}\n		.secondNavBox:hover{\n			background: #e5e9f2;\n		}\n		.secondNav{\n			width: 150px;\n			height: 56px;\n			text-indent: 47px;\n			line-height: 56px;\n			font-size: 14px;\n			cursor: pointer;\n			float: left;\n		}\n		.secondNavBoxD{\n			width: 200px;\n		}\n		.secondNavD{\n			width: 200px;\n			height: 56px;\n			text-indent: 47px;\n			line-height: 56px;\n			color: #c0ccda;\n			font-size: 14px;\n			background: #1f2d3d;\n			cursor: pointer;\n		}\n		.thirdNav{\n			width: 200px;\n			height: 56px;\n			text-indent: 57px;\n			line-height: 56px;\n			color: #475669;\n			font-size: 14px;\n			cursor: pointer;\n		}\n		.thirdNav:hover{\n			background: #e5e9f2;\n		}\n		.imgField{\n			background: url(../../assets/images/navicon/field.png) no-repeat 1px 19.5px;\n			background-size: 17px;\n		}\n		.imgMember{\n			background: url(../../assets/images/navicon/member.png) no-repeat 0 21px;\n			background-size: 17px;\n		}\n		.imgMerge{\n			background: url(../../assets/images/navicon/merge.png) no-repeat 0 23px;\n			background-size: 17px;\n		}\n		.imgFinance{\n			background: url(../../assets/images/navicon/finance.png) no-repeat 1.5px 19px;\n			background-size: 17px;\n		}\n		.imgShop{\n			background: url(../../assets/images/navicon/shop.png) no-repeat 1.5px 19px;\n			background-size: 17px;\n		}\n		.imgTicket{\n			background: url(../../assets/images/navicon/ticket.png) no-repeat 2px 19.5px;\n			background-size: 17px;\n		}\n		.imgCard{\n			background: url(../../assets/images/navicon/card.png) no-repeat 1.5px 19px;\n			background-size: 17px;\n		}\n		.imgStaff{\n			background: url(../../assets/images/navicon/staff.png) no-repeat 1px 19.5px;\n			background-size: 17px;\n		}\n		.imgSetting{\n			background: url(../../assets/images/navicon/setting.png) no-repeat 1.5px 19px;\n			background-size: 17px;\n		}\n		.normal{\n			background: #324057;\n		}\n		.hover{\n			background: #475669;\n		}\n		.sencondNavhover{\n			background: #e5e9f2;\n			color: #20A0FF;\n		}\n		.thirdNavhover{\n			background: #e5e9f2;\n			color: #20A0FF;\n		}</style>"), a.put("components/navbar/navbar.html", '<div class="navbar navbar-default navbar-static-top" ng-controller=NavbarCtrl><div class=container><div class=navbar-header><button class=navbar-toggle type=button ng-click="isCollapsed = !isCollapsed"><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href="/" class=navbar-brand>field</a></div><div collapse=isCollapsed class="navbar-collapse collapse" id=navbar-main><ul class="nav navbar-nav"><li ng-repeat="item in menu" ng-class="{active: isActive(item.link)}"><a ng-href={{item.link}}>{{item.title}}</a></li><li ng-show=isAdmin() ng-class="{active: isActive(\'/admin\')}"><a ui-sref=admin>Admin</a></li></ul><ul class="nav navbar-nav navbar-right"><li ng-hide=isLoggedIn() ng-class="{active: isActive(\'/signup\')}"><a ui-sref=signup>Sign up</a></li><li ng-hide=isLoggedIn() ng-class="{active: isActive(\'/login\')}"><a ui-sref=login>Login</a></li><li ng-show=isLoggedIn()><p class=navbar-text>Hello {{ getCurrentUser().name }}</p></li><li ng-show=isLoggedIn() ng-class="{active: isActive(\'/settings\')}"><a ui-sref=settings><span class="glyphicon glyphicon-cog"></span></a></li><li ng-show=isLoggedIn() ng-class="{active: isActive(\'/logout\')}"><a href="" ng-click=logout()>Logout</a></li></ul></div></div></div>')
    }
]);